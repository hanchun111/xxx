{
  "version": 3,
  "sources": [
    "base/json2.js",
    "app/core/app-core.js",
    "base/pinyin.js",
    "app/core/app-class.js",
    "app/core/app-attribute.js",
    "app/core/app-events.js",
    "app/core/app-base.js",
    "app/core/app-options-helper.js",
    "app/core/app-jquery.js",
    "app/app-funcbase.js",
    "app/app-pagebase.js",
    "app/widgets/app-frags.js",
    "app/widgets/window/app-messager.js",
    "app/core/app-options.js",
    "app/widgets/app-widget.js",
    "app/widgets/app-workspace.js",
    "app/core/app-main.js",
    "app/util/app-localstorage.js",
    "app/widgets/form/app-textbox.js",
    "app/core/app-register.js",
    "app/util/app-number-format.js",
    "app/util/app-xss-utils.js",
    "app/util/app-utils.js",
    "app/data/app-json-result.js",
    "app/data/app-ajax.js",
    "app/data/app-result.js",
    "app/widgets/app-download.js",
    "app/widgets/button/app-button.js",
    "app/widgets/form/app-number.js",
    "app/widgets/form/app-money.js",
    "app/widgets/drag/app-droppanel.js",
    "app/widgets/form/app-combo.js",
    "app/widgets/form/app-suggest.js",
    "app/widgets/form/app-combobox.js",
    "bootstrap/bootstrap-datetimepicker.js",
    "app/widgets/form/app-datetime.js",
    "app/widgets/grid/app-grid-headerContextMenu.js",
    "app/widgets/grid/app-grid-editor.js",
    "app/widgets/grid/app-grid-formatter.js",
    "bs-http-plugin/config-ext.js",
    "bs-http-plugin/config.js",
    "bs-http-plugin/util/uuid.js",
    "bs-http-plugin/data-transmit/message.js",
    "base/dotpl-js.js",
    "base/base64.js",
    "bs-http-plugin/data-transmit/socket.js",
    "app/widgets/drag/app-drag.js",
    "app/widgets/drag/app-dialogdrag.js",
    "app/widgets/window/app-dialog.js",
    "bs-http-plugin/base-pluginvoke.js",
    "bs-http-plugin/util/img-lazyload.js",
    "bs-http-plugin/bs-print.js",
    "app/widgets/grid/app-grid-print.js",
    "app/widgets/grid/app-grid-sort.js",
    "app/widgets/grid/app-grid-summary.js",
    "app/widgets/grid/app-grid-ext.js",
    "app/widgets/grid/app-grid-pager.js",
    "app/widgets/grid/app-grid-merger.js",
    "app/widgets/menu/app-menu.js",
    "app/widgets/button/app-menubutton.js",
    "app/widgets/grid/app-grid-toolbar.js",
    "app/widgets/grid/app-grid.js",
    "app/widgets/form/app-combogrid.js",
    "app/widgets/form/app-comboztree.js",
    "app/widgets/form/app-reference.js",
    "app/widgets/app-jqgrid.js",
    "app/widgets/app-lang_zh_CN.js",
    "app/widgets/app-progressbar.js",
    "app/widgets/app-resizable.js",
    "app/widgets/app-scroll.js",
    "app/widgets/app-scrolltable.js",
    "app/widgets/form/app-checkbox.js",
    "app/widgets/form/app-comp.js",
    "app/widgets/form/app-validate.js",
    "app/widgets/form/app-form.js",
    "app/widgets/form/app-formgroup.js",
    "app/widgets/form/app-rule.js",
    "app/widgets/form/app-typeahead.js",
    "app/widgets/form/app-upload.js",
    "app/widgets/form/app-xquery.js",
    "app/widgets/form/app-xquerybox.js",
    "app/widgets/panel/app-panel.js",
    "app/widgets/layout/app-containerLayout.js",
    "app/widgets/layout/app-boxlayout.js",
    "app/widgets/layout/app-layout.js",
    "app/widgets/layout/app-layout2.js",
    "app/widgets/menu/app-contextmenu.js",
    "app/widgets/portlet/app-portal.js",
    "app/widgets/tabs/app-tab.js",
    "app/widgets/tabs/app-tabs.js",
    "app/widgets/tree/app-ztree.js",
    "app/widgets/treegrid/app-pagination.js",
    "app/widgets/treegrid/app-datagrid.js",
    "app/widgets/treegrid/app-treegrid.js",
    "base/html5.js",
    "base/template.js",
    "bs-http-plugin/bs-ca-auth.js",
    "bs-http-plugin/bs-doccamera.js",
    "bs-http-plugin/bs-pd.js",
    "bs-http-plugin/bs-pos.js",
    "bs-http-plugin/bs-upload.js",
    "bs-http-plugin/cas-login.js",
    "require-plugin/css.min.js",
    "app.js"
  ],
  "names": [],
  "mappings": "AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACzeA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACntBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACxHA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACjNA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AC9bA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACjNA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACpEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACpGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AC7rBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AC1MA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AC3HA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACpEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACnRA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AC5qEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACxIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AC5BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AC3LA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACnFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACv1CA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AClXA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACzLA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AC7BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACjZA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACzIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACtnBA;AACA;AACA;AACA,ACHA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACrBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AChQA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AC3NA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AC5DA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AC1VA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AChrBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACtkCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AC3pBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AC9qDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACvoCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACjMA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACrmDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AC7HA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACfA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACtBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACVA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AChCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AC/HA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AC7MA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACnbA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACpGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AC9FA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACpfA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACtsBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AC5FA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AC54BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACliBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AChRA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AC3KA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACxHA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACvcA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AC5HA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AC3rBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AC5KA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACtHA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACh2IA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACvoBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACr4BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACnSA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACz6DA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AC5OA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AChLA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AC9LA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACxGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AC5KA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACnSA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AC5XA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACnaA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AC/wBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AChaA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACvGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AC/cA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACpsBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AC1fA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AC7kCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACxyBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AC5DA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AC/cA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AC7LA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACr/BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACrEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACnaA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACrUA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACvgCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACjcA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AC5YA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AC3nGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AC/yDA;AACA;AACA;AACA;AACA;AACA,ACLA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACjMA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACtHA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACrLA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACrGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACxFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,ACjWA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,AChLA;AACA,ACDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA",
  "file": "app.build.js",
  "sourcesContent": [
    "/*\r\n    json2.js\r\n    2012-10-08\r\n\r\n    Public Domain.\r\n\r\n    NO WARRANTY EXPRESSED OR IMPLIED. USE AT YOUR OWN RISK.\r\n\r\n    See http://www.JSON.org/js.html\r\n\r\n\r\n    This code should be minified before deployment.\r\n    See http://javascript.crockford.com/jsmin.html\r\n\r\n    USE YOUR OWN COPY. IT IS EXTREMELY UNWISE TO LOAD CODE FROM SERVERS YOU DO\r\n    NOT CONTROL.\r\n\r\n\r\n    This file creates a global JSON object containing two methods: stringify\r\n    and parse.\r\n\r\n        JSON.stringify(value, replacer, space)\r\n            value       any JavaScript value, usually an object or array.\r\n\r\n            replacer    an optional parameter that determines how object\r\n                        values are stringified for objects. It can be a\r\n                        function or an array of strings.\r\n\r\n            space       an optional parameter that specifies the indentation\r\n                        of nested structures. If it is omitted, the text will\r\n                        be packed without extra whitespace. If it is a number,\r\n                        it will specify the number of spaces to indent at each\r\n                        level. If it is a string (such as '\\t' or '&nbsp;'),\r\n                        it contains the characters used to indent at each level.\r\n\r\n            This method produces a JSON text from a JavaScript value.\r\n\r\n            When an object value is found, if the object contains a toJSON\r\n            method, its toJSON method will be called and the result will be\r\n            stringified. A toJSON method does not serialize: it returns the\r\n            value represented by the name/value pair that should be serialized,\r\n            or undefined if nothing should be serialized. The toJSON method\r\n            will be passed the key associated with the value, and this will be\r\n            bound to the value\r\n\r\n            For example, this would serialize Dates as ISO strings.\r\n\r\n                Date.prototype.toJSON = function (key) {\r\n                    function f(n) {\r\n                        // Format integers to have at least two digits.\r\n                        return n < 10 ? '0' + n : n;\r\n                    }\r\n\r\n                    return this.getUTCFullYear()   + '-' +\r\n                         f(this.getUTCMonth() + 1) + '-' +\r\n                         f(this.getUTCDate())      + 'T' +\r\n                         f(this.getUTCHours())     + ':' +\r\n                         f(this.getUTCMinutes())   + ':' +\r\n                         f(this.getUTCSeconds())   + 'Z';\r\n                };\r\n\r\n            You can provide an optional replacer method. It will be passed the\r\n            key and value of each member, with this bound to the containing\r\n            object. The value that is returned from your method will be\r\n            serialized. If your method returns undefined, then the member will\r\n            be excluded from the serialization.\r\n\r\n            If the replacer parameter is an array of strings, then it will be\r\n            used to select the members to be serialized. It filters the results\r\n            such that only members with keys listed in the replacer array are\r\n            stringified.\r\n\r\n            Values that do not have JSON representations, such as undefined or\r\n            functions, will not be serialized. Such values in objects will be\r\n            dropped; in arrays they will be replaced with null. You can use\r\n            a replacer function to replace those with JSON values.\r\n            JSON.stringify(undefined) returns undefined.\r\n\r\n            The optional space parameter produces a stringification of the\r\n            value that is filled with line breaks and indentation to make it\r\n            easier to read.\r\n\r\n            If the space parameter is a non-empty string, then that string will\r\n            be used for indentation. If the space parameter is a number, then\r\n            the indentation will be that many spaces.\r\n\r\n            Example:\r\n\r\n            text = JSON.stringify(['e', {pluribus: 'unum'}]);\r\n            // text is '[\"e\",{\"pluribus\":\"unum\"}]'\r\n\r\n\r\n            text = JSON.stringify(['e', {pluribus: 'unum'}], null, '\\t');\r\n            // text is '[\\n\\t\"e\",\\n\\t{\\n\\t\\t\"pluribus\": \"unum\"\\n\\t}\\n]'\r\n\r\n            text = JSON.stringify([new Date()], function (key, value) {\r\n                return this[key] instanceof Date ?\r\n                    'Date(' + this[key] + ')' : value;\r\n            });\r\n            // text is '[\"Date(---current time---)\"]'\r\n\r\n\r\n        JSON.parse(text, reviver)\r\n            This method parses a JSON text to produce an object or array.\r\n            It can throw a SyntaxError exception.\r\n\r\n            The optional reviver parameter is a function that can filter and\r\n            transform the results. It receives each of the keys and values,\r\n            and its return value is used instead of the original value.\r\n            If it returns what it received, then the structure is not modified.\r\n            If it returns undefined then the member is deleted.\r\n\r\n            Example:\r\n\r\n            // Parse the text. Values that look like ISO date strings will\r\n            // be converted to Date objects.\r\n\r\n            myData = JSON.parse(text, function (key, value) {\r\n                var a;\r\n                if (typeof value === 'string') {\r\n                    a =\r\n/^(\\d{4})-(\\d{2})-(\\d{2})T(\\d{2}):(\\d{2}):(\\d{2}(?:\\.\\d*)?)Z$/.exec(value);\r\n                    if (a) {\r\n                        return new Date(Date.UTC(+a[1], +a[2] - 1, +a[3], +a[4],\r\n                            +a[5], +a[6]));\r\n                    }\r\n                }\r\n                return value;\r\n            });\r\n\r\n            myData = JSON.parse('[\"Date(09/09/2001)\"]', function (key, value) {\r\n                var d;\r\n                if (typeof value === 'string' &&\r\n                        value.slice(0, 5) === 'Date(' &&\r\n                        value.slice(-1) === ')') {\r\n                    d = new Date(value.slice(5, -1));\r\n                    if (d) {\r\n                        return d;\r\n                    }\r\n                }\r\n                return value;\r\n            });\r\n\r\n\r\n    This is a reference implementation. You are free to copy, modify, or\r\n    redistribute.\r\n*/\r\n\r\n/*jslint evil: true, regexp: true */\r\n\r\n/*members \"\", \"\\b\", \"\\t\", \"\\n\", \"\\f\", \"\\r\", \"\\\"\", JSON, \"\\\\\", apply,\r\n    call, charCodeAt, getUTCDate, getUTCFullYear, getUTCHours,\r\n    getUTCMinutes, getUTCMonth, getUTCSeconds, hasOwnProperty, join,\r\n    lastIndex, length, parse, prototype, push, replace, slice, stringify,\r\n    test, toJSON, toString, valueOf\r\n*/\r\n\r\n\r\n// Create a JSON object only if one does not already exist. We create the\r\n// methods in a closure to avoid creating global variables.\r\n\r\nif (typeof JSON !== 'object') {\r\n    JSON = {};\r\n}\r\n\r\n(function () {\r\n    'use strict';\r\n\r\n    function f(n) {\r\n        // Format integers to have at least two digits.\r\n        return n < 10 ? '0' + n : n;\r\n    }\r\n\r\n    if (typeof Date.prototype.toJSON !== 'function') {\r\n\r\n        Date.prototype.toJSON = function (key) {\r\n\r\n            return isFinite(this.valueOf())\r\n                ? this.getUTCFullYear()     + '-' +\r\n                    f(this.getUTCMonth() + 1) + '-' +\r\n                    f(this.getUTCDate())      + 'T' +\r\n                    f(this.getUTCHours())     + ':' +\r\n                    f(this.getUTCMinutes())   + ':' +\r\n                    f(this.getUTCSeconds())   + 'Z'\r\n                : null;\r\n        };\r\n\r\n        String.prototype.toJSON      =\r\n            Number.prototype.toJSON  =\r\n            Boolean.prototype.toJSON = function (key) {\r\n                return this.valueOf();\r\n            };\r\n    }\r\n\r\n    var cx = /[\\u0000\\u00ad\\u0600-\\u0604\\u070f\\u17b4\\u17b5\\u200c-\\u200f\\u2028-\\u202f\\u2060-\\u206f\\ufeff\\ufff0-\\uffff]/g,\r\n        escapable = /[\\\\\\\"\\x00-\\x1f\\x7f-\\x9f\\u00ad\\u0600-\\u0604\\u070f\\u17b4\\u17b5\\u200c-\\u200f\\u2028-\\u202f\\u2060-\\u206f\\ufeff\\ufff0-\\uffff]/g,\r\n        gap,\r\n        indent,\r\n        meta = {    // table of character substitutions\r\n            '\\b': '\\\\b',\r\n            '\\t': '\\\\t',\r\n            '\\n': '\\\\n',\r\n            '\\f': '\\\\f',\r\n            '\\r': '\\\\r',\r\n            '\"' : '\\\\\"',\r\n            '\\\\': '\\\\\\\\'\r\n        },\r\n        rep;\r\n\r\n\r\n    function quote(string) {\r\n\r\n// If the string contains no control characters, no quote characters, and no\r\n// backslash characters, then we can safely slap some quotes around it.\r\n// Otherwise we must also replace the offending characters with safe escape\r\n// sequences.\r\n\r\n        escapable.lastIndex = 0;\r\n        return escapable.test(string) ? '\"' + string.replace(escapable, function (a) {\r\n            var c = meta[a];\r\n            return typeof c === 'string'\r\n                ? c\r\n                : '\\\\u' + ('0000' + a.charCodeAt(0).toString(16)).slice(-4);\r\n        }) + '\"' : '\"' + string + '\"';\r\n    }\r\n\r\n\r\n    function str(key, holder) {\r\n\r\n// Produce a string from holder[key].\r\n\r\n        var i,          // The loop counter.\r\n            k,          // The member key.\r\n            v,          // The member value.\r\n            length,\r\n            mind = gap,\r\n            partial,\r\n            value = holder[key];\r\n\r\n// If the value has a toJSON method, call it to obtain a replacement value.\r\n\r\n        if (value && typeof value === 'object' &&\r\n                typeof value.toJSON === 'function') {\r\n            value = value.toJSON(key);\r\n        }\r\n\r\n// If we were called with a replacer function, then call the replacer to\r\n// obtain a replacement value.\r\n\r\n        if (typeof rep === 'function') {\r\n            value = rep.call(holder, key, value);\r\n        }\r\n\r\n// What happens next depends on the value's type.\r\n\r\n        switch (typeof value) {\r\n        case 'string':\r\n            return quote(value);\r\n\r\n        case 'number':\r\n\r\n// JSON numbers must be finite. Encode non-finite numbers as null.\r\n\r\n            return isFinite(value) ? String(value) : 'null';\r\n\r\n        case 'boolean':\r\n        case 'null':\r\n\r\n// If the value is a boolean or null, convert it to a string. Note:\r\n// typeof null does not produce 'null'. The case is included here in\r\n// the remote chance that this gets fixed someday.\r\n\r\n            return String(value);\r\n\r\n// If the type is 'object', we might be dealing with an object or an array or\r\n// null.\r\n\r\n        case 'object':\r\n\r\n// Due to a specification blunder in ECMAScript, typeof null is 'object',\r\n// so watch out for that case.\r\n\r\n            if (!value) {\r\n                return 'null';\r\n            }\r\n\r\n// Make an array to hold the partial results of stringifying this object value.\r\n\r\n            gap += indent;\r\n            partial = [];\r\n\r\n// Is the value an array?\r\n\r\n            if (Object.prototype.toString.apply(value) === '[object Array]') {\r\n\r\n// The value is an array. Stringify every element. Use null as a placeholder\r\n// for non-JSON values.\r\n\r\n                length = value.length;\r\n                for (i = 0; i < length; i += 1) {\r\n                    partial[i] = str(i, value) || 'null';\r\n                }\r\n\r\n// Join all of the elements together, separated with commas, and wrap them in\r\n// brackets.\r\n\r\n                v = partial.length === 0\r\n                    ? '[]'\r\n                    : gap\r\n                    ? '[\\n' + gap + partial.join(',\\n' + gap) + '\\n' + mind + ']'\r\n                    : '[' + partial.join(',') + ']';\r\n                gap = mind;\r\n                return v;\r\n            }\r\n\r\n// If the replacer is an array, use it to select the members to be stringified.\r\n\r\n            if (rep && typeof rep === 'object') {\r\n                length = rep.length;\r\n                for (i = 0; i < length; i += 1) {\r\n                    if (typeof rep[i] === 'string') {\r\n                        k = rep[i];\r\n                        v = str(k, value);\r\n                        if (v) {\r\n                            partial.push(quote(k) + (gap ? ': ' : ':') + v);\r\n                        }\r\n                    }\r\n                }\r\n            } else {\r\n\r\n// Otherwise, iterate through all of the keys in the object.\r\n\r\n                for (k in value) {\r\n                    if (Object.prototype.hasOwnProperty.call(value, k)) {\r\n                        v = str(k, value);\r\n                        if (v) {\r\n                            partial.push(quote(k) + (gap ? ': ' : ':') + v);\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n\r\n// Join all of the member texts together, separated with commas,\r\n// and wrap them in braces.\r\n\r\n            v = partial.length === 0\r\n                ? '{}'\r\n                : gap\r\n                ? '{\\n' + gap + partial.join(',\\n' + gap) + '\\n' + mind + '}'\r\n                : '{' + partial.join(',') + '}';\r\n            gap = mind;\r\n            return v;\r\n        }\r\n    }\r\n\r\n// If the JSON object does not yet have a stringify method, give it one.\r\n\r\n    if (typeof JSON.stringify !== 'function') {\r\n        JSON.stringify = function (value, replacer, space) {\r\n\r\n// The stringify method takes a value and an optional replacer, and an optional\r\n// space parameter, and returns a JSON text. The replacer can be a function\r\n// that can replace values, or an array of strings that will select the keys.\r\n// A default replacer method can be provided. Use of the space parameter can\r\n// produce text that is more easily readable.\r\n\r\n            var i;\r\n            gap = '';\r\n            indent = '';\r\n\r\n// If the space parameter is a number, make an indent string containing that\r\n// many spaces.\r\n\r\n            if (typeof space === 'number') {\r\n                for (i = 0; i < space; i += 1) {\r\n                    indent += ' ';\r\n                }\r\n\r\n// If the space parameter is a string, it will be used as the indent string.\r\n\r\n            } else if (typeof space === 'string') {\r\n                indent = space;\r\n            }\r\n\r\n// If there is a replacer, it must be a function or an array.\r\n// Otherwise, throw an error.\r\n\r\n            rep = replacer;\r\n            if (replacer && typeof replacer !== 'function' &&\r\n                    (typeof replacer !== 'object' ||\r\n                    typeof replacer.length !== 'number')) {\r\n                throw new Error('JSON.stringify');\r\n            }\r\n\r\n// Make a fake root object containing our value under the key of ''.\r\n// Return the result of stringifying the value.\r\n\r\n            return str('', {'': value});\r\n        };\r\n    }\r\n\r\n\r\n// If the JSON object does not yet have a parse method, give it one.\r\n\r\n    if (typeof JSON.parse !== 'function') {\r\n        JSON.parse = function (text, reviver) {\r\n\r\n// The parse method takes a text and an optional reviver function, and returns\r\n// a JavaScript value if the text is a valid JSON text.\r\n\r\n            var j;\r\n\r\n            function walk(holder, key) {\r\n\r\n// The walk method is used to recursively walk the resulting structure so\r\n// that modifications can be made.\r\n\r\n                var k, v, value = holder[key];\r\n                if (value && typeof value === 'object') {\r\n                    for (k in value) {\r\n                        if (Object.prototype.hasOwnProperty.call(value, k)) {\r\n                            v = walk(value, k);\r\n                            if (v !== undefined) {\r\n                                value[k] = v;\r\n                            } else {\r\n                                delete value[k];\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n                return reviver.call(holder, key, value);\r\n            }\r\n\r\n\r\n// Parsing happens in four stages. In the first stage, we replace certain\r\n// Unicode characters with escape sequences. JavaScript handles many characters\r\n// incorrectly, either silently deleting them, or treating them as line endings.\r\n\r\n            text = String(text);\r\n            cx.lastIndex = 0;\r\n            if (cx.test(text)) {\r\n                text = text.replace(cx, function (a) {\r\n                    return '\\\\u' +\r\n                        ('0000' + a.charCodeAt(0).toString(16)).slice(-4);\r\n                });\r\n            }\r\n\r\n// In the second stage, we run the text against regular expressions that look\r\n// for non-JSON patterns. We are especially concerned with '()' and 'new'\r\n// because they can cause invocation, and '=' because it can cause mutation.\r\n// But just to be safe, we want to reject all unexpected forms.\r\n\r\n// We split the second stage into 4 regexp operations in order to work around\r\n// crippling inefficiencies in IE's and Safari's regexp engines. First we\r\n// replace the JSON backslash pairs with '@' (a non-JSON character). Second, we\r\n// replace all simple value tokens with ']' characters. Third, we delete all\r\n// open brackets that follow a colon or comma or that begin the text. Finally,\r\n// we look to see that the remaining characters are only whitespace or ']' or\r\n// ',' or ':' or '{' or '}'. If that is so, then the text is safe for eval.\r\n\r\n            if (/^[\\],:{}\\s]*$/\r\n                    .test(text.replace(/\\\\(?:[\"\\\\\\/bfnrt]|u[0-9a-fA-F]{4})/g, '@')\r\n                        .replace(/\"[^\"\\\\\\n\\r]*\"|true|false|null|-?\\d+(?:\\.\\d*)?(?:[eE][+\\-]?\\d+)?/g, ']')\r\n                        .replace(/(?:^|:|,)(?:\\s*\\[)+/g, ''))) {\r\n\r\n// In the third stage we use the eval function to compile the text into a\r\n// JavaScript structure. The '{' operator is subject to a syntactic ambiguity\r\n// in JavaScript: it can begin a block or an object literal. We wrap the text\r\n// in parens to eliminate the ambiguity.\r\n\r\n                j = eval('(' + text + ')');\r\n\r\n// In the optional fourth stage, we recursively walk the new structure, passing\r\n// each name/value pair to a reviver function for possible transformation.\r\n\r\n                return typeof reviver === 'function'\r\n                    ? walk({'': j}, '')\r\n                    : j;\r\n            }\r\n\r\n// If the text is not JSON parseable, then a SyntaxError is thrown.\r\n\r\n            throw new SyntaxError('JSON.parse');\r\n        };\r\n    }\r\n}());\r\n\ndefine(\"base/json2\", function(){});\n\n",
    "/**\r\n * App系统核心对象\r\n */\r\ndefine('app/core/app-core',[\"jquery\", \"app/core/app-jquery\", \"base/json2\"], function($) {\r\n\r\n\tvar $A = undefined,$hostUrl=\"\",$contextPath,$caInfo=null,_caCryptoType;\r\n\t$A = function(selector, context) {\r\n\t\tif (typeof $A._exfn == \"function\") {\r\n\t\t\treturn $A._exfn(selector, context);\r\n\t\t}\r\n\t\treturn $(selector, context);\r\n\t};\r\n    $A.debug = false;\r\n    (function (variable) {\r\n        var query = window.location.search.substring(1);\r\n        var vars = query.split(\"&\");\r\n        for (var i=0;i<vars.length;i++) {\r\n            var pair = vars[i].split(\"=\");\r\n            if(pair[0] == variable && pair[1]=='true'){\r\n            \t$A.debug = true;\r\n            \treturn;\r\n            }\r\n        }\r\n    })(\"__debug\");\r\n\treturn $.extend($A, {\r\n\t\t/**\r\n\t\t * 设置为开发状态\r\n\t\t */\r\n\t\tdevelop : true,\r\n\t\t/**\r\n\t\t * 常用键盘码常量\r\n\t\t */\r\n\t\tkeyCode : {\r\n\t\t\tENTER : 13,\r\n\t\t\tESC : 27,\r\n\t\t\tEND : 35,\r\n\t\t\tHOME : 36,\r\n\t\t\tSHIFT : 16,\r\n\t\t\tTAB : 9,\r\n\t\t\tLEFT : 37,\r\n\t\t\tRIGHT : 39,\r\n\t\t\tUP : 38,\r\n\t\t\tDOWN : 40,\r\n\t\t\tDELETE : 46,\r\n\t\t\tBACKSPACE : 8,\r\n\t\t\tHOME : 36,\r\n\t\t\tEND : 35,\r\n\t\t\tPLUS : 187,\r\n\t\t\tPLUS1 : 107,\r\n\t\t\tMINUS : 189,\r\n\t\t\tMINUS1 : 109,\r\n\t\t\tPOINT : 190,\r\n\t\t\tPOINT1 : 110,\r\n\t\t\tPgUp : 33,\r\n\t\t\tPgDn : 34,\r\n\t\t\tZ : 90\r\n\t\t},\r\n\t\t/**\r\n\t\t * 是否属于数组按键中\r\n\t\t */\r\n\t\tcontainKeyCode : function(e, keys) {\r\n\t\t\tfor (var i = 0; i < keys.length; i++) {\r\n\t\t\t\tvar keyInfo = keys[i];\r\n\t\t\t\tif (isNaN(keyInfo)) {\r\n\t\t\t\t\tif (keyInfo.keyCode != e.keyCode) {\r\n\t\t\t\t\t\tcontinue;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (keyInfo.ctrlKey != undefined) {\r\n\t\t\t\t\t\tif (keyInfo.ctrlKey != e.ctrlKey) {\r\n\t\t\t\t\t\t\tcontinue;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (keyInfo.shiftKey != undefined) {\r\n\t\t\t\t\t\tif (keyInfo.shiftKey != e.shiftKey) {\r\n\t\t\t\t\t\t\tcontinue;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn true;\r\n\t\t\t\t} else if (e.keyCode == keyInfo) {\r\n\t\t\t\t\treturn true;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn false;\r\n\t\t},\r\n\t\t/**\r\n\t\t * 远程访问的状态码\r\n\t\t */\r\n\t\tstatusCode : {\r\n\t\t\tok : 200,\r\n\t\t\terror : 300,\r\n\t\t\ttimeout : \"250\",\r\n\t\t\tinternalError : 500,\r\n\t\t\tnotFound : 404\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t * require 脚本文件时缓存的参数及对象使用的属性\r\n\t\t */\r\n\t\tjsattrs : {\r\n\t\t\tPARAM : \"__jsparam\",\r\n\t\t\tOBJECT : \"__jsobj\"\r\n\t\t},\r\n\t\t/**\r\n\t\t * 系统初始化方法集合\r\n\t\t */\r\n\t\tinitMethods : {},\r\n\t\t/**\r\n\t\t * 系统销毁方法集合\r\n\t\t */\r\n\t\tdestroyMethods : {},\r\n\t\t/**\r\n\t\t * 状态对象\r\n\t\t */\r\n\t\tstatus : {\r\n\t\t\tspliter : true\r\n\t\t},\r\n\t\t/**\r\n\t\t * 自定义事件类型\r\n\t\t */\r\n\t\teventType : {\r\n\t\t\tpageLoad : \"onload\",\r\n\t\t\tpageDestroy : \"pageDestroy\"\r\n\t\t},\r\n\t\t/**\r\n\t\t * 注册初始化方法\r\n\t\t * \r\n\t\t * @param key{String/Object}\r\n\t\t *            包含多个初始化方法的集合\r\n\t\t * @param func{Function}\r\n\t\t *            构造方法\r\n\t\t */\r\n\t\tregInitMethod : function(key, func) {\r\n\t\t\tvar othis = this;\r\n\t\t\tvar initMethods = othis.initMethods;\r\n\t\t\tif ($.isPlainObject(key)) {\r\n\t\t\t\tinitMethods = $.extend(initMethods, key);\r\n\t\t\t} else if ($.isFunction(key)) {\r\n\t\t\t\tif (key.appid) {\r\n\t\t\t\t\tinitMethods[key.appid] = null;\r\n\t\t\t\t\tdelete initMethods[key.appid];\r\n\t\t\t\t} else {\r\n\t\t\t\t\tkey.appid = othis.nextId();\r\n\t\t\t\t\tinitMethods[key.appid] = key;\r\n\t\t\t\t}\r\n\t\t\t} else if (typeof key === \"string\") {\r\n\t\t\t\tif (func && $.isFunction(func)) {\r\n\t\t\t\t\tfunc.appid = key;\r\n\t\t\t\t\tinitMethods[key] = func;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tinitMethods[key] = null;\r\n\t\t\t\t\tdelete initMethods[key];\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tthrow \"valid component's constructor\";\r\n\t\t\t}\r\n\t\t},\r\n\t\tgetPageComponens:function(box){\r\n\t\t\tvar box=box||$A.getContainer();\r\n\t\t\tif (!$(box).data(\"componens\")){\r\n\t\t\t\tvar $componens = $(\"[name=componens]\",box),componens=null;\r\n\t\t\t\tif ($componens.length>0){\r\n\t\t\t\t\tvar cmpstr=$componens.val().trim();\r\n\t\t\t\t\tcomponens=$.parseJSON(cmpstr)\r\n\t\t\t\t}\r\n\t\t\t\t$(box).data(\"componens\",componens);\r\n\t\t\t\t $(\"[name=componens]\",box).remove();\r\n\t\t\t}\r\n\t\t\treturn $(box).data(\"componens\");\r\n\t\t},\r\n\t\t//根据控件id检测控件权限\r\n\t\tcehckPageComponensById:function(id){\r\n\t\t\tvar cmps=this.getPageComponens();\r\n\t\t\tvar hasRight=true;\r\n\t\t\tif (cmps){\r\n\t\t\t\t\r\n\t\t\t\tfor (var i=0;i<cmps.length;i++){\r\n\t\t\t\t\tcmp=cmps[i]\r\n\t\t\t\t\tif (cmp.id==id&&cmp.hidden==true){\r\n\t\t\t\t\t\thasRight=false;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t}\r\n\t\t\treturn hasRight;\r\n\t\t},\r\n\t\t/**\r\n\t\t * 检验页面控件权限\r\n\t\t */\r\n\t\tcheckPageComponens:function($box){\r\n\t\t\t//获取当前页面控件权限\r\n\t\t\tvar cmps=this.getPageComponens($box),cmp;\r\n\t\t\r\n\t\t\tif (cmps){\r\n\t\t\t\r\n\t\t\t\tfor (var i=0;i<cmps.length;i++){\r\n\t\t\t\t\tcmp=cmps[i]\r\n\t\t\t\t\tif (cmp.hidden==true){\r\n\t\t\t\t\t\t $(\"[id=\"+cmp.id+\"]\",$box).remove();\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\t/*var pageComponens=cmp[\"pageComponens\"],checkUserCmp=cmp[\"userComponens\"];\r\n\t\t\t\tif (pageComponens!=\"\"){\r\n\t\t\t\t\tvar pagecmps=pageComponens.split(\",\");\r\n\t\t\t\t\tfor(var i=0,len=pagecmps.length;i<len;i++){\r\n\t\t\t\t\t\tif (pagecmps[i]&&!checkUserCmp[pagecmps[i]]){\r\n\t\t\t\t\t\t\t $(\"[id=\"+pagecmps[i]+\"]\",$box).remove();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}*/\r\n\t\t\t\t\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\t\r\n\t\t},\r\n\t\t/**\r\n\t\t * 初试化方法调用\r\n\t\t */\r\n\t\tinitCalls : function($box) {\r\n\t\t\tvar othis = this;\r\n\t\t\tvar initMethods = $A.initMethods;\r\n\t\t\tfor (name in initMethods) {\r\n\t\t\t\tinitMethods[name]($box);\r\n\t\t\t}\r\n\t\t},\r\n\t\t/**\r\n\t\t * 初始化方法，包括组件和布局等\r\n\t\t */\r\n\t\tinit : function(box) {\r\n\t\t\tvar $box=$(box||\"body\");\r\n\t\t\t$box.clearAppJsObject();\r\n\t\t\tvar $js = $(\"[name=jsRequire]\",$box);\r\n\t\t\r\n\t\t\tthis.checkPageComponens($box);\r\n\t\t\tif($js.length == 0){\r\n\t\t\t\t$A.initCalls($box);\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\r\n\t\t\tvar rs =new Array;\r\n\t\t\tvar ids=new Array;\r\n\t\t\t$js.each(function(idx,item){\r\n\t\t\t\tvar $item=$(this),jspath = $item.val();\r\n\t\t\t\tif(jspath){\r\n\t\t\t\t\tids.push($item.attr(\"id\"));\r\n\t\t\t\t\trs.push(jspath);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\tif(rs.length == 0){\r\n\t\t\t\t$box.css('visibility','');\r\n\t\t\t\t$A.initCalls($box);\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\trequire(rs,function(){\r\n\t\t\t\tvar jsobj = new Array,nids=new Array,args=arguments;\r\n\t\t\t\t$.each(args,function(i){\r\n\t\t\t\t\tif(args[i] != null && ids[i]!=null){\r\n\t\t\t\t\t\tjsobj.push(args[i]);\r\n\t\t\t\t\t\tnids.push(ids[i]);\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t\tif(nids.length > 0){\r\n\t\t\t\t\t$box.setAppJsObject(nids,jsobj);\r\n\t\t\t\t\ttriggerBeforePageInit(jsobj, $box);\r\n\t\t\t\t\t//add by tw\r\n\t\t\t\t\tif($box.data(\"onPageLoad\")){\r\n\t\t\t\t\t\tvar funcName = $box.data(\"onPageLoad\");\r\n\t\t\t\t\t\ttry{\r\n\t\t\t\t\t\t\tvar f = new Function(nids,\"return (\"+funcName+\")\");\r\n\t\t\t\t\t\t\tvar onPageLoadFunc = f.apply(this,jsobj);\r\n\t\t\t\t\t\t\t$box.one($A.eventType.pageLoad,{\"pageLoadFunc\":onPageLoadFunc,\"uiPageModel\":$box.data(\"uiPageModel\")},function(e){\r\n\t\t\t\t\t\t\t\tif (e.data[\"pageLoadFunc\"]){\r\n\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\te.data[\"pageLoadFunc\"].call(jsobj[0],e.data[\"uiPageModel\"],$box)\r\n\t\t\t\t\t\t\t\t\t//e.data[\"pageLoadFunc\"].appli(e.data[\"uiPageModel\"],$box);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t}catch(e){\r\n\t\t\t\t\t\t\twindow.alert(e);\r\n\t\t\t\t\t\t\treturn {};\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\r\n\t\t\t\t}\r\n\t\t\t\t$A.initCalls($box);\r\n\t\t\t});\r\n\t\t\t$js.remove();\r\n\t\t\t$A.resolveUiPageModel($box);\r\n\t\t\t$box.removeData(\"onPageLoad\");\r\n\t\t\tvar $uiPageLoad = $(\">div.__uiPageLoad\",$box);\r\n\t\t\tif($uiPageLoad.length>0){\r\n\t\t\t\tvar pageLoadFuncName = $uiPageLoad.text();\r\n\t\t\t\t$box.data(\"onPageLoad\",pageLoadFuncName);\r\n\t\t\t\t$uiPageLoad.remove();\r\n\t\t\t}\r\n\t\t\t/**\r\n\t\t\t * 页面对象声明的pageBeforeInit方法\r\n\t\t\t */\r\n\t\t\tfunction triggerBeforePageInit(jsobj, $box){\r\n\t\t\t\tif(!(jsobj && jsobj[0])){\r\n//\t\t\t\t\t$box.css('visibility','');\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tvar func = jsobj[0].beforePageInit;\r\n\t\t\t\tif(!$.isFunction(func)){\r\n//\t\t\t\t\t$box.css('visibility','');\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tfunc($box, $box.data('uiPageModel'));\r\n\t\t\t\t$box.css('visibility','');\r\n\t\t\t}\r\n\t\t\t//end add by tw\r\n\t\t},\r\n\t\tresolveUiPageModel: function($box){\r\n\t\t\t//add by tw\r\n\t\t\tvar $pageModel = $(\">div.__uiPageModel\",$box);\r\n\t\t\tif($pageModel.length>0){\r\n\t\t\t\tvar json = $pageModel.text();\r\n\t\t\t\t$box.data(\"uiPageModel\",$.parseJSON(json));\r\n\t\t\t\t$pageModel.remove();\r\n\t\t\t}else{\r\n\t\t\t\t$box.data(\"uiPageModel\", {innerModel: true});\r\n\t\t\t}\r\n\t\t},\r\n\t\t/**\r\n\t\t * 页面销毁时处理方法\r\n\t\t */\r\n\t\tregDestroyMethod : function(key, func) {\r\n\t\t\tvar othis = this;\r\n\t\t\tvar destroyMethods = othis.destroyMethods;\r\n\t\t\tif ($.isPlainObject(key)) {\r\n\t\t\t\tdestroyMethods = $.extend(destroyMethods, key);\r\n\t\t\t} else if ($.isFunction(key)) {\r\n\t\t\t\tif (key.appid) {\r\n\t\t\t\t\tdestroyMethods[key.appid] = null;\r\n\t\t\t\t\tdelete destroyMethods[key.appid];\r\n\t\t\t\t} else {\r\n\t\t\t\t\tkey.appid = othis.nextId();\r\n\t\t\t\t\tdestroyMethods[key.appid] = key;\r\n\t\t\t\t}\r\n\t\t\t} else if (typeof key === \"string\") {\r\n\t\t\t\tif (func && $.isFunction(func)) {\r\n\t\t\t\t\tfunc.appid = key;\r\n\t\t\t\t\tdestroyMethods[key] = func;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tdestroyMethods[key] = null;\r\n\t\t\t\t\tdelete destroyMethods[key];\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tthrow \"valid component's destroy\";\r\n\t\t\t}\r\n\t\t},\r\n\t\t/**\r\n\t\t * 销毁方法调用\r\n\t\t */\r\n\t\tdestroyCalls : function($box, e) {\r\n\t\t\tvar othis = this;\r\n\t\t\tvar destroyMethods = othis.destroyMethods;\r\n\t\t\tfor (name in destroyMethods) {\r\n\t\t\t\tdestroyMethods[name]($box, e);\r\n\t\t\t}\r\n\t\t},\r\n\t\t/**\r\n\t\t * 页面加载时调动，非ajax加载\r\n\t\t * \r\n\t\t * @param options\r\n\t\t */\r\n\t\tboot : function(options) {\r\n\t\t\tthis.options = $.extend(this.options, options);\r\n\t\t\tthis.init();\r\n\t\t\tvar _doc = $(document);\r\n\t\t\tvar $this = this;\r\n\t\t\tif (!_doc.isBind(this.eventType.pageDestroy)) {\r\n\t\t\t\t_doc.bind(this.eventType.pageDestroy, function(e) {\r\n\t\t\t\t\t\t\tvar box = e.target;\r\n\t\t\t\t\t\t\t$this.destroyCalls(box, e);\r\n\t\t\t\t\t\t});\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t * 生成下一个id或一组id\r\n\t\t * \r\n\t\t * @param count{Number}\r\n\t\t *            生成id的个数\r\n\t\t */\r\n\t\tnextId : (function() {\r\n\t\t\tvar idno = 0;\r\n\t\t\treturn function(count) {\r\n\t\t\t\tif (count && count > 1) {\r\n\t\t\t\t\tvar ids = new Array();\r\n\t\t\t\t\tfor (var i = 0; i < count; i++) {\r\n\t\t\t\t\t\tidno++;\r\n\t\t\t\t\t\tids.push(\"app_\" + idno);\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn ids;\r\n\t\t\t\t}\r\n\t\t\t\treturn ++idno;\r\n\t\t\t};\r\n\t\t})(),\r\n\t\t/**\r\n\t\t * 字符串转换为json对象\r\n\t\t * \r\n\t\t * @param json{Object}\r\n\t\t *            json对象\r\n\t\t */\r\n\t\tjsonEval : function(json, context) {// add by tw\r\n\t\t\ttry {\r\n\t\t\t\t// add by tw\r\n\t\t\t\tif (context) {\r\n\t\t\t\t\tvar evalstr = \"\";\r\n\t\t\t\t\tfor (var key in context) {\r\n\t\t\t\t\t\tevalstr += \"var \" + key + \"=context[\\\"\" + key + \"\\\"];\";\r\n\t\t\t\t\t}\r\n\t\t\t\t\teval(evalstr);\r\n\t\t\t\t\treturn eval('(' + json + ')');\r\n\t\t\t\t}\r\n\t\t\t\t// end add by tw\r\n\t\t\t\treturn eval('(' + json + ')');\r\n\t\t\t} catch (e) {\r\n\t\t\t\treturn {};\r\n\t\t\t}\r\n\t\t},\r\n\t\t/**\r\n\t\t * json转换为字符串\r\n\t\t * \r\n\t\t * @param json{Object}\r\n\t\t *            json对象\r\n\t\t * @param {string}\r\n\t\t *            字符串\r\n\t\t */\r\n\t\ttoJsonString : function(value, replacer, space) {\r\n\t\t\treturn JSON.stringify(value, replacer, space);\r\n\t\t},\r\n\t\t/**\r\n\t\t * 调试信息输出\r\n\t\t */\r\n\t\tlog : function(msg) {\r\n\t\t\tif (this.develop) {\r\n\t\t\t\tif (window.console)\r\n\t\t\t\t\tconsole.log(msg);\r\n\t\t\t\telse\r\n\t\t\t\t\talert(msg);\r\n\t\t\t}\r\n\t\t},\r\n\t\t/**\r\n\t\t * 生成唯一的id字符串：前缀+当前时间毫秒数\r\n\t\t * \r\n\t\t * @param prefix\r\n\t\t *            前缀\r\n\t\t * @returns {String}\r\n\t\t */\r\n\t\tuuid : function(prefix) {\r\n\t\t\tprefix = prefix === undefined ? 'bs_' : prefix;\r\n\t\t\treturn prefix + this.nextId();\r\n\t\t},\r\n\t\t/**\r\n\t\t * 获取页面元素的属性\r\n\t\t * \r\n\t\t * @returns 元素属性\r\n\t\t */\r\n\t\tgetAttrFromElement : function($element) {\r\n\t\t\ttry{\r\n\t\t\t\tvar attrs = getAttrs($element[0]), _options = $element\r\n\t\t\t\t\t\t.getJsonAttr('_options');\r\n\t\t\t\t// 初始化数据源\r\n\t\t\t\tif (attrs.data) {\r\n\t\t\t\t\tattrs.data = $element.getJsonAttr('data');\r\n\t\t\t\t}\r\n\t\t\t\t// 初始化以选中节点\r\n\t\t\t\tif (attrs.selectednode) {\r\n\t\t\t\t\tattrs.selectednode = $element.getJsonAttr('selectednode');\r\n\t\t\t\t}\r\n\t\t\t\t// 初始化回调事件\r\n\t\t\t\tif (attrs.events) {\r\n\t\t\t\t\t$.extend(attrs, $element.getJsEvent(attrs.events));\r\n\t\t\t\t}\r\n\t\t\t\treturn $.extend(attrs, _options);\r\n\t\t\t}catch(e){\r\n\t\t\t\tvar id = $element.attr('id');\r\n\t\t\t\tif(!id){\r\n\t\t\t\t\tid = $element[0].outerHTML;\r\n\t\t\t\t}\r\n\t\t\t\tthrow new Error('组件[' + id + ']获取属性出错.');\r\n\t\t\t}\r\n\t\t\t/**\r\n\t\t\t * 获取元素的属性\r\n\t\t\t * \r\n\t\t\t * @param $el\r\n\t\t\t * @returns {___anonymous2415_2416}\r\n\t\t\t */\r\n\t\t\tfunction getAttrs($el) {\r\n\t\t\t\tvar attrs = {};\r\n\t\t\t\tif ($el.attributes) {\r\n\t\t\t\t\t// 继承html的原有属性\r\n\t\t\t\t\t$.each($el.attributes, function(i, att) {\r\n\t\t\t\t\t\t\t\tvar name = att.name.toLowerCase();\r\n\t\t\t\t\t\t\t\tif (att.value == 'true') {\r\n\t\t\t\t\t\t\t\t\tattrs[name] = true;\r\n\t\t\t\t\t\t\t\t} else if (att.value == 'false') {\r\n\t\t\t\t\t\t\t\t\tattrs[name] = false;\r\n\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\tif (att.value)\r\n\t\t\t\t\t\t\t\t\tattrs[name] = $.fn.escapeHtml(att.value);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t\treturn attrs;\r\n\t\t\t}\r\n\t\t},\r\n\t\tdestroyDom : function(dom) {\r\n\t\t\tvar plugins = $A.options.getPlugins();\r\n\t\t\tvar comps = [];\r\n\t\t\tfor (var i = 0; i < plugins.length; i++) {\r\n\t\t\t\tvar plugin = plugins[i];\r\n\t\t\t\tvar r;\r\n\t\t\t\t\r\n\t\t\t\tif (!plugin.className){\r\n\t\t\t\t\t r=$('.app-' + plugin.pluginName, dom);\r\n\t\t\t\t}else{\r\n\t\t\t\t\t r=$('.' + plugin.className, dom);\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tif (r.length) {\r\n\t\t\t\t\tif (r[plugin.pluginName]) {\r\n\t\t\t\t\t\tcomps.push({\r\n\t\t\t\t\t\t\t\t\tname : plugin.pluginName,\r\n\t\t\t\t\t\t\t\t\tjq : r\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tvar destroy=false;\r\n\t\t\tfor (var i = 0; i < comps.length; i++) {\r\n\t\t\t\tvar destoryItem = comps[i];\r\n\t\t\t\tdestroy=false;\r\n\t\t\t\t$.each(destoryItem.jq, function(index, item) {\r\n\t\t\t\t\tvar data = $(\"input:first-child\", item).data(destoryItem.name);\r\n\t\t\t\t\tif(data){\r\n\t\t\t\t\t\tdata.destroy();\r\n\t\t\t\t\t\tdestroy=true;\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t\tif (destroy==false){\r\n\t\t\t\tdestoryItem.jq[destoryItem.name]('destroy');\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif (!typeof CollectGarbage == \"undefined\") {\r\n\t\t\t\tCollectGarbage()\r\n\t\t\t}\r\n\t\t},\r\n\t\tgetComponent: function($input, componentName){\r\n\t\t\tif(!$A.debug){\r\n\t\t\t\treturn $input.data(componentName);\r\n\t\t\t}\r\n\t\t\tvar data = $input.data();\r\n\t\t\tif(!data){\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tvar componentNames = ['textbox', 'number', 'money', \r\n                  'comboztree', 'combogrid', 'checkbox', 'suggest',\r\n                  'datetime', 'typeahead', 'reference', 'combobox']\r\n\t\t\t\t,names = [];\r\n\t\t\tfor(var i = 0; i < componentNames.length; i++){\r\n\t\t\t\tvar name = componentNames[i]\r\n\t\t\t\tif(data[name]){\r\n\t\t\t\t\tnames.push(name);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif(names.length == 0){\r\n\t\t\t\treturn null;\r\n\t\t\t}else if(names.length == 1){\r\n\t\t\t\tif(names[0] == componentName){\r\n\t\t\t\t\treturn data[componentName];\r\n\t\t\t\t}else{\r\n\t\t\t\t\tthrow new Error('该组件已经声明为[' + names[0] +\r\n\t\t\t\t\t\t\t'],无法重复声明为[' + componentName + ']');\r\n\t\t\t\t}\r\n\t\t\t}else{\r\n\t\t\t\tthrow new Error('无法捕获的异常');\r\n\t\t\t}\r\n\t\t},\r\n\t\t/**\r\n\t\t * 调用组件的方法\r\n\t\t */\r\n\t\tcomponentMethodApply: function(component, methodName, methodArgs){\r\n\t\t\tif(!component){\r\n\t\t\t\tthrow new Error('调用未初始化的组件方法');\r\n\t\t\t}\r\n\t\t\tvar method = component[methodName];\r\n\t\t\tif($.isFunction(method)){\r\n\t\t\t\treturn method.apply(component, methodArgs);\r\n\t\t\t}else{\r\n\t\t\t\tthrow new Error('组件未声明[' + methodName + ']方法');\r\n\t\t\t}\r\n\t\t},\r\n\t\t/**\r\n\t\t * 组件方法调用异常包装\r\n\t\t */\r\n\t\tthrowCompMethodError: function($element, className, methodName, e){\r\n\t\t\tvar id = $element.attr('id')\r\n\t\t\t\t,msg = ''\r\n\t\t\t\t,type = getTypeMsg(e, $element);\r\n\t\t\tif(!id){\r\n\t\t\t\tid = $element[0].outerHTML;\r\n\t\t\t}\r\n\t\t\tmsg = '通过元素[' + id + ']调用类型为[' + className + ']组件的[' + methodName + ']方法时出现异常';\r\n\t\t\tif(type){\r\n\t\t\t\tmsg += ':元素已声明为类型[' + type + ']的组件:' + e;\r\n\t\t\t}else{\r\n\t\t\t\tmsg += ':' + e;\r\n\t\t\t}\r\n\t\t\tthrow new Error(msg);\r\n\t\t\tfunction getTypeMsg(e, $element){\r\n\t\t\t\tif(e.message == '调用未初始化的组件方法'){\r\n\t\t\t\t\tvar $parent = $element.parent();\r\n\t\t\t\t\tif(!$parent.hasClass('app-wrapper')){\r\n\t\t\t\t\t\treturn ''; \r\n\t\t\t\t\t}\r\n\t\t\t\t\tif($parent.hasClass('app-textbox')){\r\n\t\t\t\t\t\treturn 'textbox';\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif($parent.hasClass('app-combobox')){\r\n\t\t\t\t\t\treturn 'combobox';\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif($parent.hasClass('app-number')){\r\n\t\t\t\t\t\treturn 'number';\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif($parent.hasClass('app-money')){\r\n\t\t\t\t\t\treturn 'money';\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif($parent.hasClass('app-comboztree')){\r\n\t\t\t\t\t\treturn 'comboztree';\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif($parent.hasClass('app-combogrid')){\r\n\t\t\t\t\t\treturn 'combogrid';\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif($parent.hasClass('app-typeahead')){\r\n\t\t\t\t\t\treturn 'typeahead';\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif($parent.hasClass('app-suggest')){\r\n\t\t\t\t\t\treturn 'suggest';\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif($parent.hasClass('app-datatime')){\r\n\t\t\t\t\t\treturn 'datatime';\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\treturn '';\r\n\t\t\t}\r\n\t\t},\r\n\t\t/**\r\n\t\t * 组件初始化调用异常包装\r\n\t\t */\r\n\t\tthrowCompInitError: function($element, className){\r\n\t\t\tvar id = $element.attr('id');\r\n\t\t\tif(!id){\r\n\t\t\t\tid = $element[0].outerHTML;\r\n\t\t\t}\r\n\t\t\tthrow new Error('元素[' + id + ']已经初始化为[' + className + ']组件:无法重复初始化');\r\n\t\t},\r\n\t\tshowWaitScreen: function(msg){\r\n\t\t\tif(typeof msg === 'undefined'){\r\n\t\t\t\tmsg = '正在努力加载中...'\r\n\t\t\t}\r\n\t\t\tif(!$a.$wait){\r\n\t\t\t\t$a.$wait = $('<div id=\"waitMask\" class=\"dialog-mask\" style=\"z-index:999999999;display:block;\"><div>');\r\n\t\t\t\t$a.$wait.append($('<div style=\"width: 150px;height: 150px;margin: auto;position: absolute;top: 0;left: 0;bottom: 0;right: 0;color: #fff;font-size: 18px;\">\\\r\n\t\t\t\t\t\t\t\t\t<div style=\"width: 124px;height: 124px;background:url(resources/common/themes/default/images/loading2.gif) no-repeat center center;margin-bottom: 5px;\"></div>\\\r\n\t\t\t\t\t\t\t\t\t<div id=\"waitScreenMsg\">' + msg + '</div></div>'));\r\n\t\t\t\t$a.$wait.appendTo('body');\r\n\t\t\t}else{\r\n\t\t\t\t$a.$wait.find(\"#waitScreenMsg\").text(msg);\r\n\t\t\t\t$a.$wait.show();\r\n\t\t\t}\r\n\t\t},\r\n\t\thideWaitScreen: function(){\r\n\t\t\tif($a.$wait){\r\n\t\t\t\t$a.$wait.hide();\r\n\t\t\t}\r\n\t\t},\r\n\t\tsetContextPath:function(contextPath){\r\n\t\t\t$contextPath=contextPath\r\n\t\t},\r\n\t\tgetContextPath:function(){\r\n\t\t\treturn $contextPath;\r\n\t\t},\r\n\t\tgetCaProvider:function(){\r\n\t\t\t\r\n\t\t\treturn _caProvider;\r\n\t\t\t\r\n\t\t},\r\n\t\tsetCaInfo:function(caInfo){\r\n\t\t\t\r\n\t\t\t$caInfo=caInfo;\r\n\t\t},\r\n\t\tgetCaInfo:function(){\r\n\t\t\treturn $caInfo;\r\n\t\t},\r\n\t\tgetHostUrl:function(){\r\n\t\t\tvar location=window.location;\r\n\t\t\ttry{\r\n\t\t\t\tif (!$contextPath){\r\n\t\t\t\t\t$contextPath=_contextPath;\r\n\t\t\t\t}\r\n\t\t\t}catch(ex){\r\n\t\t\t\t\r\n\t\t\t}\r\n\t\t\tif ($hostUrl==\"\"){\r\n\t\t\t\t$hostUrl=location.protocol+\"//\"+location.host+$contextPath+\"/\";\r\n\t\t\t}\r\n\t\t\treturn $hostUrl;\r\n\t\t},\r\n\t\tgetCaCryptoType:function(){\r\n\t\t\t\r\n\t\t\treturn _caCryptoType;\r\n\t\t\t\r\n\t\t},\r\n\t\tsetCaCryptoType:function(caCryptoType){\r\n\t\t\t_caCryptoType=caCryptoType\r\n\t\t\t\r\n\t\t}\r\n\r\n\t});\r\n});\n",
    "/**\r\n * 汉字拼音转换\r\n */\r\ndefine('base/pinyin',[],function(){\r\n\t/**\r\n\t * 拼音汉字集合\r\n\t */\r\n\tvar PinYin = {\"a\":\"\\u554a\\u963f\\u9515\",\"ai\":\"\\u57c3\\u6328\\u54ce\\u5509\\u54c0\\u7691\\u764c\\u853c\\u77ee\\u827e\\u788d\\u7231\\u9698\\u8bf6\\u6371\\u55f3\\u55cc\\u5ad2\\u7477\\u66a7\\u7839\\u953f\\u972d\",\"an\":\"\\u978d\\u6c28\\u5b89\\u4ffa\\u6309\\u6697\\u5cb8\\u80fa\\u6848\\u8c19\\u57ef\\u63de\\u72b4\\u5eb5\\u6849\\u94f5\\u9e4c\\u9878\\u9eef\",\"ang\":\"\\u80ae\\u6602\\u76ce\",\"ao\":\"\\u51f9\\u6556\\u71ac\\u7ff1\\u8884\\u50b2\\u5965\\u61ca\\u6fb3\\u5773\\u62d7\\u55f7\\u5662\\u5c99\\u5ed2\\u9068\\u5aaa\\u9a9c\\u8071\\u87af\\u93ca\\u9ccc\\u93d6\",\"ba\":\"\\u82ad\\u634c\\u6252\\u53ed\\u5427\\u7b06\\u516b\\u75a4\\u5df4\\u62d4\\u8dcb\\u9776\\u628a\\u8019\\u575d\\u9738\\u7f62\\u7238\\u8307\\u83dd\\u8406\\u636d\\u5c9c\\u705e\\u6777\\u94af\\u7c91\\u9c85\\u9b43\",\"bai\":\"\\u767d\\u67cf\\u767e\\u6446\\u4f70\\u8d25\\u62dc\\u7a17\\u859c\\u63b0\\u97b4\",\"ban\":\"\\u6591\\u73ed\\u642c\\u6273\\u822c\\u9881\\u677f\\u7248\\u626e\\u62cc\\u4f34\\u74e3\\u534a\\u529e\\u7eca\\u962a\\u5742\\u8c73\\u94a3\\u7622\\u764d\\u8228\",\"bang\":\"\\u90a6\\u5e2e\\u6886\\u699c\\u8180\\u7ed1\\u68d2\\u78c5\\u868c\\u9551\\u508d\\u8c24\\u84a1\\u8783\",\"bao\":\"\\u82de\\u80de\\u5305\\u8912\\u96f9\\u4fdd\\u5821\\u9971\\u5b9d\\u62b1\\u62a5\\u66b4\\u8c79\\u9c8d\\u7206\\u52f9\\u8446\\u5b80\\u5b62\\u7172\\u9e28\\u8913\\u8db5\\u9f85\",\"bo\":\"\\u5265\\u8584\\u73bb\\u83e0\\u64ad\\u62e8\\u94b5\\u6ce2\\u535a\\u52c3\\u640f\\u94c2\\u7b94\\u4f2f\\u5e1b\\u8236\\u8116\\u818a\\u6e24\\u6cca\\u9a73\\u4eb3\\u8543\\u5575\\u997d\\u6a97\\u64d8\\u7934\\u94b9\\u9e41\\u7c38\\u8ddb\",\"bei\":\"\\u676f\\u7891\\u60b2\\u5351\\u5317\\u8f88\\u80cc\\u8d1d\\u94a1\\u500d\\u72c8\\u5907\\u60eb\\u7119\\u88ab\\u5b5b\\u9642\\u90b6\\u57e4\\u84d3\\u5457\\u602b\\u6096\\u789a\\u9e4e\\u8919\\u943e\",\"ben\":\"\\u5954\\u82ef\\u672c\\u7b28\\u755a\\u574c\\u951b\",\"beng\":\"\\u5d29\\u7ef7\\u752d\\u6cf5\\u8e66\\u8ff8\\u552a\\u5623\\u750f\",\"bi\":\"\\u903c\\u9f3b\\u6bd4\\u9119\\u7b14\\u5f7c\\u78a7\\u84d6\\u853d\\u6bd5\\u6bd9\\u6bd6\\u5e01\\u5e87\\u75f9\\u95ed\\u655d\\u5f0a\\u5fc5\\u8f9f\\u58c1\\u81c2\\u907f\\u965b\\u5315\\u4ef3\\u4ffe\\u8298\\u835c\\u8378\\u5421\\u54d4\\u72f4\\u5eb3\\u610e\\u6ed7\\u6fde\\u5f3c\\u59a3\\u5a62\\u5b16\\u74a7\\u8d32\\u7540\\u94cb\\u79d5\\u88e8\\u7b5a\\u7b85\\u7be6\\u822d\\u895e\\u8df8\\u9ac0\",\"bian\":\"\\u97ad\\u8fb9\\u7f16\\u8d2c\\u6241\\u4fbf\\u53d8\\u535e\\u8fa8\\u8fa9\\u8fab\\u904d\\u533e\\u5f01\\u82c4\\u5fed\\u6c74\\u7f0f\\u7178\\u782d\\u78a5\\u7a39\\u7a86\\u8759\\u7b3e\\u9cca\",\"biao\":\"\\u6807\\u5f6a\\u8198\\u8868\\u5a4a\\u9aa0\\u98d1\\u98d9\\u98da\\u706c\\u9556\\u9573\\u762d\\u88f1\\u9cd4\",\"bie\":\"\\u9cd6\\u618b\\u522b\\u762a\\u8e69\\u9cd8\",\"bin\":\"\\u5f6c\\u658c\\u6fd2\\u6ee8\\u5bbe\\u6448\\u50a7\\u6d5c\\u7f24\\u73a2\\u6ba1\\u8191\\u9554\\u9acc\\u9b13\",\"bing\":\"\\u5175\\u51b0\\u67c4\\u4e19\\u79c9\\u997c\\u70b3\\u75c5\\u5e76\\u7980\\u90b4\\u6452\\u7ee0\\u678b\\u69df\\u71f9\",\"bu\":\"\\u6355\\u535c\\u54fa\\u8865\\u57e0\\u4e0d\\u5e03\\u6b65\\u7c3f\\u90e8\\u6016\\u62ca\\u535f\\u900b\\u74ff\\u6661\\u949a\\u91ad\",\"ca\":\"\\u64e6\\u5693\\u7924\",\"cai\":\"\\u731c\\u88c1\\u6750\\u624d\\u8d22\\u776c\\u8e29\\u91c7\\u5f69\\u83dc\\u8521\",\"can\":\"\\u9910\\u53c2\\u8695\\u6b8b\\u60ed\\u60e8\\u707f\\u9a96\\u74a8\\u7cb2\\u9eea\",\"cang\":\"\\u82cd\\u8231\\u4ed3\\u6ca7\\u85cf\\u4f27\",\"cao\":\"\\u64cd\\u7cd9\\u69fd\\u66f9\\u8349\\u8279\\u5608\\u6f15\\u87ac\\u825a\",\"ce\":\"\\u5395\\u7b56\\u4fa7\\u518c\\u6d4b\\u5202\\u5e3b\\u607b\",\"ceng\":\"\\u5c42\\u8e6d\\u564c\",\"cha\":\"\\u63d2\\u53c9\\u832c\\u8336\\u67e5\\u78b4\\u643d\\u5bdf\\u5c94\\u5dee\\u8be7\\u7339\\u9987\\u6c4a\\u59f9\\u6748\\u6942\\u69ce\\u6aab\\u9497\\u9538\\u9572\\u8869\",\"chai\":\"\\u62c6\\u67f4\\u8c7a\\u4faa\\u8308\\u7625\\u867f\\u9f87\",\"chan\":\"\\u6400\\u63ba\\u8749\\u998b\\u8c17\\u7f20\\u94f2\\u4ea7\\u9610\\u98a4\\u5181\\u8c04\\u8c36\\u8487\\u5edb\\u5fcf\\u6f7a\\u6fb6\\u5b71\\u7fbc\\u5a75\\u5b17\\u9aa3\\u89c7\\u7985\\u9561\\u88e3\\u87fe\\u8e94\",\"chang\":\"\\u660c\\u7316\\u573a\\u5c1d\\u5e38\\u957f\\u507f\\u80a0\\u5382\\u655e\\u7545\\u5531\\u5021\\u4f25\\u9b2f\\u82cc\\u83d6\\u5f9c\\u6005\\u60dd\\u960a\\u5a3c\\u5ae6\\u6636\\u6c05\\u9cb3\",\"chao\":\"\\u8d85\\u6284\\u949e\\u671d\\u5632\\u6f6e\\u5de2\\u5435\\u7092\\u600a\\u7ec9\\u6641\\u8016\",\"che\":\"\\u8f66\\u626f\\u64a4\\u63a3\\u5f7b\\u6f88\\u577c\\u5c6e\\u7817\",\"chen\":\"\\u90f4\\u81e3\\u8fb0\\u5c18\\u6668\\u5ff1\\u6c89\\u9648\\u8d81\\u886c\\u79f0\\u8c0c\\u62bb\\u55d4\\u5bb8\\u741b\\u6987\\u809c\\u80c2\\u789c\\u9f80\",\"cheng\":\"\\u6491\\u57ce\\u6a59\\u6210\\u5448\\u4e58\\u7a0b\\u60e9\\u6f84\\u8bda\\u627f\\u901e\\u9a8b\\u79e4\\u57d5\\u5d4a\\u5fb5\\u6d48\\u67a8\\u67fd\\u6a18\\u665f\\u584d\\u77a0\\u94d6\\u88ce\\u86cf\\u9172\",\"chi\":\"\\u5403\\u75f4\\u6301\\u5319\\u6c60\\u8fdf\\u5f1b\\u9a70\\u803b\\u9f7f\\u4f88\\u5c3a\\u8d64\\u7fc5\\u65a5\\u70bd\\u50ba\\u5880\\u82aa\\u830c\\u640b\\u53f1\\u54e7\\u557b\\u55e4\\u5f73\\u996c\\u6cb2\\u5ab8\\u6555\\u80dd\\u7719\\u7735\\u9e31\\u761b\\u892b\\u86a9\\u87ad\\u7b1e\\u7bea\\u8c49\\u8e05\\u8e1f\\u9b51\",\"chong\":\"\\u5145\\u51b2\\u866b\\u5d07\\u5ba0\\u833a\\u5fe1\\u61a7\\u94f3\\u825f\",\"chou\":\"\\u62bd\\u916c\\u7574\\u8e0c\\u7a20\\u6101\\u7b79\\u4ec7\\u7ef8\\u7785\\u4e11\\u4fe6\\u5733\\u5e31\\u60c6\\u6eb4\\u59af\\u7633\\u96e0\\u9c8b\",\"chu\":\"\\u81ed\\u521d\\u51fa\\u6a71\\u53a8\\u8e87\\u9504\\u96cf\\u6ec1\\u9664\\u695a\\u7840\\u50a8\\u77d7\\u6410\\u89e6\\u5904\\u4e8d\\u520d\\u61b7\\u7ecc\\u6775\\u696e\\u6a17\\u870d\\u8e70\\u9edc\",\"chuan\":\"\\u63e3\\u5ddd\\u7a7f\\u693d\\u4f20\\u8239\\u5598\\u4e32\\u63be\\u821b\\u60f4\\u9044\\u5ddb\\u6c1a\\u948f\\u9569\\u8221\",\"chuang\":\"\\u75ae\\u7a97\\u5e62\\u5e8a\\u95ef\\u521b\\u6006\",\"chui\":\"\\u5439\\u708a\\u6376\\u9524\\u5782\\u9672\\u68f0\\u69cc\",\"chun\":\"\\u6625\\u693f\\u9187\\u5507\\u6df3\\u7eaf\\u8822\\u4fc3\\u83bc\\u6c8c\\u80ab\\u6710\\u9e51\\u877d\",\"chuo\":\"\\u6233\\u7ef0\\u851f\\u8fb6\\u8f8d\\u955e\\u8e14\\u9f8a\",\"ci\":\"\\u75b5\\u8328\\u78c1\\u96cc\\u8f9e\\u6148\\u74f7\\u8bcd\\u6b64\\u523a\\u8d50\\u6b21\\u8360\\u5472\\u5d6f\\u9e5a\\u8785\\u7ccd\\u8d91\",\"cong\":\"\\u806a\\u8471\\u56f1\\u5306\\u4ece\\u4e1b\\u506c\\u82c1\\u6dd9\\u9aa2\\u742e\\u7481\\u679e\",\"cu\":\"\\u51d1\\u7c97\\u918b\\u7c07\\u731d\\u6b82\\u8e59\",\"cuan\":\"\\u8e7f\\u7be1\\u7a9c\\u6c46\\u64ba\\u6615\\u7228\",\"cui\":\"\\u6467\\u5d14\\u50ac\\u8106\\u7601\\u7cb9\\u6dec\\u7fe0\\u8403\\u60b4\\u7480\\u69b1\\u96b9\",\"cun\":\"\\u6751\\u5b58\\u5bf8\\u78cb\\u5fd6\\u76b4\",\"cuo\":\"\\u64ae\\u6413\\u63aa\\u632b\\u9519\\u539d\\u811e\\u9509\\u77ec\\u75e4\\u9e7e\\u8e49\\u8e9c\",\"da\":\"\\u642d\\u8fbe\\u7b54\\u7629\\u6253\\u5927\\u8037\\u54d2\\u55d2\\u601b\\u59b2\\u75b8\\u8921\\u7b2a\\u977c\\u9791\",\"dai\":\"\\u5446\\u6b79\\u50a3\\u6234\\u5e26\\u6b86\\u4ee3\\u8d37\\u888b\\u5f85\\u902e\\u6020\\u57ed\\u7519\\u5454\\u5cb1\\u8fe8\\u902f\\u9a80\\u7ed0\\u73b3\\u9edb\",\"dan\":\"\\u803d\\u62c5\\u4e39\\u5355\\u90f8\\u63b8\\u80c6\\u65e6\\u6c2e\\u4f46\\u60ee\\u6de1\\u8bde\\u5f39\\u86cb\\u4ebb\\u510b\\u5369\\u840f\\u5556\\u6fb9\\u6a90\\u6b9a\\u8d55\\u7708\\u7605\\u8043\\u7baa\",\"dang\":\"\\u5f53\\u6321\\u515a\\u8361\\u6863\\u8c20\\u51fc\\u83ea\\u5b95\\u7800\\u94db\\u88c6\",\"dao\":\"\\u5200\\u6363\\u8e48\\u5012\\u5c9b\\u7977\\u5bfc\\u5230\\u7a3b\\u60bc\\u9053\\u76d7\\u53e8\\u5541\\u5fc9\\u6d2e\\u6c18\\u7118\\u5fd1\\u7e9b\",\"de\":\"\\u5fb7\\u5f97\\u7684\\u951d\",\"deng\":\"\\u8e6c\\u706f\\u767b\\u7b49\\u77aa\\u51f3\\u9093\\u5654\\u5d9d\\u6225\\u78f4\\u956b\\u7c26\",\"di\":\"\\u5824\\u4f4e\\u6ef4\\u8fea\\u654c\\u7b1b\\u72c4\\u6da4\\u7fdf\\u5ae1\\u62b5\\u5e95\\u5730\\u8482\\u7b2c\\u5e1d\\u5f1f\\u9012\\u7f14\\u6c10\\u7c74\\u8bcb\\u8c1b\\u90b8\\u577b\\u839c\\u837b\\u5600\\u5a23\\u67e2\\u68e3\\u89cc\\u7825\\u78b2\\u7747\\u955d\\u7f9d\\u9ab6\",\"dian\":\"\\u98a0\\u6382\\u6ec7\\u7898\\u70b9\\u5178\\u975b\\u57ab\\u7535\\u4f43\\u7538\\u5e97\\u60e6\\u5960\\u6dc0\\u6bbf\\u4e36\\u963d\\u576b\\u57dd\\u5dc5\\u73b7\\u765c\\u766b\\u7c1f\\u8e2e\",\"diao\":\"\\u7889\\u53fc\\u96d5\\u51cb\\u5201\\u6389\\u540a\\u9493\\u8c03\\u8f7a\\u94de\\u8729\\u7c9c\\u8c82\",\"die\":\"\\u8dcc\\u7239\\u789f\\u8776\\u8fed\\u8c0d\\u53e0\\u4f5a\\u57a4\\u581e\\u63f2\\u558b\\u6e2b\\u8f76\\u7252\\u74de\\u8936\\u800b\\u8e40\\u9cbd\\u9cce\",\"ding\":\"\\u4e01\\u76ef\\u53ee\\u9489\\u9876\\u9f0e\\u952d\\u5b9a\\u8ba2\\u4e22\\u4ec3\\u5576\\u738e\\u815a\\u7887\\u753a\\u94e4\\u7594\\u8035\\u914a\",\"dong\":\"\\u4e1c\\u51ac\\u8463\\u61c2\\u52a8\\u680b\\u4f97\\u606b\\u51bb\\u6d1e\\u578c\\u549a\\u5cbd\\u5cd2\\u5902\\u6c21\\u80e8\\u80f4\\u7850\\u9e2b\",\"dou\":\"\\u515c\\u6296\\u6597\\u9661\\u8c46\\u9017\\u75d8\\u8538\\u94ad\\u7aa6\\u7aac\\u86aa\\u7bfc\\u9161\",\"du\":\"\\u90fd\\u7763\\u6bd2\\u728a\\u72ec\\u8bfb\\u5835\\u7779\\u8d4c\\u675c\\u9540\\u809a\\u5ea6\\u6e21\\u5992\\u828f\\u561f\\u6e0e\\u691f\\u6a50\\u724d\\u8839\\u7b03\\u9ad1\\u9ee9\",\"duan\":\"\\u7aef\\u77ed\\u953b\\u6bb5\\u65ad\\u7f0e\\u5f56\\u6934\\u7145\\u7c16\",\"dui\":\"\\u5806\\u5151\\u961f\\u5bf9\\u603c\\u619d\\u7893\",\"dun\":\"\\u58a9\\u5428\\u8e72\\u6566\\u987f\\u56e4\\u949d\\u76fe\\u9041\\u7096\\u7818\\u7905\\u76f9\\u9566\\u8db8\",\"duo\":\"\\u6387\\u54c6\\u591a\\u593a\\u579b\\u8eb2\\u6735\\u8dfa\\u8235\\u5241\\u60f0\\u5815\\u5484\\u54da\\u7f0d\\u67c1\\u94ce\\u88f0\\u8e31\",\"e\":\"\\u86fe\\u5ce8\\u9e45\\u4fc4\\u989d\\u8bb9\\u5a25\\u6076\\u5384\\u627c\\u904f\\u9102\\u997f\\u5669\\u8c14\\u57a9\\u57ad\\u82ca\\u83aa\\u843c\\u5443\\u6115\\u5c59\\u5a40\\u8f6d\\u66f7\\u816d\\u786a\\u9507\\u9537\\u9e57\\u989a\\u9cc4\",\"en\":\"\\u6069\\u84bd\\u6441\\u5514\\u55ef\",\"er\":\"\\u800c\\u513f\\u8033\\u5c14\\u9975\\u6d31\\u4e8c\\u8d30\\u8fe9\\u73e5\\u94d2\\u9e38\\u9c95\",\"fa\":\"\\u53d1\\u7f5a\\u7b4f\\u4f10\\u4e4f\\u9600\\u6cd5\\u73d0\\u57a1\\u781d\",\"fan\":\"\\u85e9\\u5e06\\u756a\\u7ffb\\u6a0a\\u77fe\\u9492\\u7e41\\u51e1\\u70e6\\u53cd\\u8fd4\\u8303\\u8d29\\u72af\\u996d\\u6cdb\\u8629\\u5e61\\u72ad\\u68b5\\u6535\\u71d4\\u7548\\u8e6f\",\"fang\":\"\\u574a\\u82b3\\u65b9\\u80aa\\u623f\\u9632\\u59a8\\u4eff\\u8bbf\\u7eba\\u653e\\u531a\\u90a1\\u5f77\\u94ab\\u822b\\u9c82\",\"fei\":\"\\u83f2\\u975e\\u5561\\u98de\\u80a5\\u532a\\u8bfd\\u5420\\u80ba\\u5e9f\\u6cb8\\u8d39\\u82be\\u72d2\\u60b1\\u6ddd\\u5983\\u7ecb\\u7eef\\u69a7\\u8153\\u6590\\u6249\\u7953\\u7829\\u9544\\u75f1\\u871a\\u7bda\\u7fe1\\u970f\\u9cb1\",\"fen\":\"\\u82ac\\u915a\\u5429\\u6c1b\\u5206\\u7eb7\\u575f\\u711a\\u6c7e\\u7c89\\u594b\\u4efd\\u5fff\\u6124\\u7caa\\u507e\\u7035\\u68fc\\u610d\\u9cbc\\u9f22\",\"feng\":\"\\u4e30\\u5c01\\u67ab\\u8702\\u5cf0\\u950b\\u98ce\\u75af\\u70fd\\u9022\\u51af\\u7f1d\\u8bbd\\u5949\\u51e4\\u4ff8\\u9146\\u8451\\u6ca3\\u781c\",\"fu\":\"\\u4f5b\\u5426\\u592b\\u6577\\u80a4\\u5b75\\u6276\\u62c2\\u8f90\\u5e45\\u6c1f\\u7b26\\u4f0f\\u4fd8\\u670d\\u6d6e\\u6daa\\u798f\\u88b1\\u5f17\\u752b\\u629a\\u8f85\\u4fef\\u91dc\\u65a7\\u812f\\u8151\\u5e9c\\u8150\\u8d74\\u526f\\u8986\\u8d4b\\u590d\\u5085\\u4ed8\\u961c\\u7236\\u8179\\u8d1f\\u5bcc\\u8ba3\\u9644\\u5987\\u7f1a\\u5490\\u5310\\u51eb\\u90db\\u8299\\u82fb\\u832f\\u83a9\\u83d4\\u544b\\u5e5e\\u6ecf\\u8274\\u5b5a\\u9a78\\u7ec2\\u6874\\u8d59\\u9efb\\u9efc\\u7f58\\u7a03\\u99a5\\u864d\\u86a8\\u8709\\u8760\\u876e\\u9eb8\\u8dba\\u8dd7\\u9cc6\",\"ga\":\"\\u5676\\u560e\\u86e4\\u5c2c\\u5477\\u5c15\\u5c1c\\u65ee\\u9486\",\"gai\":\"\\u8be5\\u6539\\u6982\\u9499\\u76d6\\u6e89\\u4e10\\u9654\\u5793\\u6224\\u8d45\\u80f2\",\"gan\":\"\\u5e72\\u7518\\u6746\\u67d1\\u7aff\\u809d\\u8d76\\u611f\\u79c6\\u6562\\u8d63\\u5769\\u82f7\\u5c34\\u64c0\\u6cd4\\u6de6\\u6f89\\u7ec0\\u6a44\\u65f0\\u77f8\\u75b3\\u9150\",\"gang\":\"\\u5188\\u521a\\u94a2\\u7f38\\u809b\\u7eb2\\u5c97\\u6e2f\\u6206\\u7f61\\u9883\\u7b7b\",\"gong\":\"\\u6760\\u5de5\\u653b\\u529f\\u606d\\u9f9a\\u4f9b\\u8eac\\u516c\\u5bab\\u5f13\\u5de9\\u6c5e\\u62f1\\u8d21\\u5171\\u857b\\u5efe\\u54a3\\u73d9\\u80b1\\u86a3\\u86e9\\u89e5\",\"gao\":\"\\u7bd9\\u768b\\u9ad8\\u818f\\u7f94\\u7cd5\\u641e\\u9550\\u7a3f\\u544a\\u777e\\u8bf0\\u90dc\\u84bf\\u85c1\\u7f1f\\u69d4\\u69c1\\u6772\\u9506\",\"ge\":\"\\u54e5\\u6b4c\\u6401\\u6208\\u9e3d\\u80f3\\u7599\\u5272\\u9769\\u845b\\u683c\\u9601\\u9694\\u94ec\\u4e2a\\u5404\\u9b32\\u4ee1\\u54ff\\u5865\\u55dd\\u7ea5\\u643f\\u8188\\u784c\\u94ea\\u9549\\u88bc\\u988c\\u867c\\u8238\\u9abc\\u9ac2\",\"gei\":\"\\u7ed9\",\"gen\":\"\\u6839\\u8ddf\\u4e98\\u831b\\u54cf\\u826e\",\"geng\":\"\\u8015\\u66f4\\u5e9a\\u7fb9\\u57c2\\u803f\\u6897\\u54fd\\u8d53\\u9ca0\",\"gou\":\"\\u94a9\\u52fe\\u6c9f\\u82df\\u72d7\\u57a2\\u6784\\u8d2d\\u591f\\u4f5d\\u8bdf\\u5ca3\\u9058\\u5abe\\u7f11\\u89cf\\u5f40\\u9e32\\u7b31\\u7bdd\\u97b2\",\"gu\":\"\\u8f9c\\u83c7\\u5495\\u7b8d\\u4f30\\u6cbd\\u5b64\\u59d1\\u9f13\\u53e4\\u86ca\\u9aa8\\u8c37\\u80a1\\u6545\\u987e\\u56fa\\u96c7\\u560f\\u8bc2\\u83f0\\u54cc\\u5d2e\\u6c69\\u688f\\u8f71\\u726f\\u727f\\u80cd\\u81cc\\u6bc2\\u77bd\\u7f5f\\u94b4\\u9522\\u74e0\\u9e2a\\u9e44\\u75fc\\u86c4\\u9164\\u89da\\u9cb4\\u9ab0\\u9e58\",\"gua\":\"\\u522e\\u74dc\\u5250\\u5be1\\u6302\\u8902\\u5366\\u8bd6\\u5471\\u681d\\u9e39\",\"guai\":\"\\u4e56\\u62d0\\u602a\\u54d9\",\"guan\":\"\\u68fa\\u5173\\u5b98\\u51a0\\u89c2\\u7ba1\\u9986\\u7f50\\u60ef\\u704c\\u8d2f\\u500c\\u839e\\u63bc\\u6dab\\u76e5\\u9e73\\u9ccf\",\"guang\":\"\\u5149\\u5e7f\\u901b\\u72b7\\u6844\\u80f1\\u7592\",\"gui\":\"\\u7470\\u89c4\\u572d\\u7845\\u5f52\\u9f9f\\u95fa\\u8f68\\u9b3c\\u8be1\\u7678\\u6842\\u67dc\\u8dea\\u8d35\\u523d\\u5326\\u523f\\u5e8b\\u5b84\\u59ab\\u6867\\u7085\\u6677\\u7688\\u7c0b\\u9c91\\u9cdc\",\"gun\":\"\\u8f8a\\u6eda\\u68cd\\u4e28\\u886e\\u7ef2\\u78d9\\u9ca7\",\"guo\":\"\\u9505\\u90ed\\u56fd\\u679c\\u88f9\\u8fc7\\u9998\\u8803\\u57da\\u63b4\\u5459\\u56d7\\u5e3c\\u5d1e\\u7313\\u6901\\u8662\\u951e\\u8052\\u872e\\u873e\\u8748\",\"ha\":\"\\u54c8\",\"hai\":\"\\u9ab8\\u5b69\\u6d77\\u6c26\\u4ea5\\u5bb3\\u9a87\\u54b4\\u55e8\\u988f\\u91a2\",\"han\":\"\\u9163\\u61a8\\u90af\\u97e9\\u542b\\u6db5\\u5bd2\\u51fd\\u558a\\u7f55\\u7ff0\\u64bc\\u634d\\u65f1\\u61be\\u608d\\u710a\\u6c57\\u6c49\\u9097\\u83e1\\u6496\\u961a\\u701a\\u6657\\u7113\\u9894\\u86b6\\u9f3e\",\"hen\":\"\\u592f\\u75d5\\u5f88\\u72e0\\u6068\",\"hang\":\"\\u676d\\u822a\\u6c86\\u7ed7\\u73e9\\u6841\",\"hao\":\"\\u58d5\\u568e\\u8c6a\\u6beb\\u90dd\\u597d\\u8017\\u53f7\\u6d69\\u8585\\u55e5\\u5686\\u6fe0\\u704f\\u660a\\u7693\\u98a2\\u869d\",\"he\":\"\\u5475\\u559d\\u8377\\u83cf\\u6838\\u79be\\u548c\\u4f55\\u5408\\u76d2\\u8c89\\u9602\\u6cb3\\u6db8\\u8d6b\\u8910\\u9e64\\u8d3a\\u8bc3\\u52be\\u58d1\\u85ff\\u55d1\\u55ec\\u9616\\u76cd\\u86b5\\u7fee\",\"hei\":\"\\u563f\\u9ed1\",\"heng\":\"\\u54fc\\u4ea8\\u6a2a\\u8861\\u6052\\u8a07\\u8605\",\"hong\":\"\\u8f70\\u54c4\\u70d8\\u8679\\u9e3f\\u6d2a\\u5b8f\\u5f18\\u7ea2\\u9ec9\\u8ba7\\u836d\\u85a8\\u95f3\\u6cd3\",\"hou\":\"\\u5589\\u4faf\\u7334\\u543c\\u539a\\u5019\\u540e\\u5820\\u5f8c\\u9005\\u760a\\u7bcc\\u7cc7\\u9c8e\\u9aba\",\"hu\":\"\\u547c\\u4e4e\\u5ffd\\u745a\\u58f6\\u846b\\u80e1\\u8774\\u72d0\\u7cca\\u6e56\\u5f27\\u864e\\u552c\\u62a4\\u4e92\\u6caa\\u6237\\u51b1\\u553f\\u56eb\\u5cb5\\u7322\\u6019\\u60da\\u6d52\\u6ef9\\u7425\\u69f2\\u8f77\\u89f3\\u70c0\\u7173\\u623d\\u6248\\u795c\\u9e55\\u9e71\\u7b0f\\u9190\\u659b\",\"hua\":\"\\u82b1\\u54d7\\u534e\\u733e\\u6ed1\\u753b\\u5212\\u5316\\u8bdd\\u5290\\u6d4d\\u9a85\\u6866\\u94e7\\u7a1e\",\"huai\":\"\\u69d0\\u5f8a\\u6000\\u6dee\\u574f\\u8fd8\\u8e1d\",\"huan\":\"\\u6b22\\u73af\\u6853\\u7f13\\u6362\\u60a3\\u5524\\u75ea\\u8c62\\u7115\\u6da3\\u5ba6\\u5e7b\\u90c7\\u5942\\u57b8\\u64d0\\u571c\\u6d39\\u6d63\\u6f36\\u5bf0\\u902d\\u7f33\\u953e\\u9ca9\\u9b1f\",\"huang\":\"\\u8352\\u614c\\u9ec4\\u78fa\\u8757\\u7c27\\u7687\\u51f0\\u60f6\\u714c\\u6643\\u5e4c\\u604d\\u8c0e\\u968d\\u5fa8\\u6e5f\\u6f62\\u9051\\u749c\\u8093\\u7640\\u87e5\\u7bc1\\u9cc7\",\"hui\":\"\\u7070\\u6325\\u8f89\\u5fbd\\u6062\\u86d4\\u56de\\u6bc1\\u6094\\u6167\\u5349\\u60e0\\u6666\\u8d3f\\u79fd\\u4f1a\\u70e9\\u6c47\\u8bb3\\u8bf2\\u7ed8\\u8bd9\\u8334\\u835f\\u8559\\u54d5\\u5599\\u96b3\\u6d04\\u5f57\\u7f0b\\u73f2\\u6656\\u605a\\u867a\\u87ea\\u9ebe\",\"hun\":\"\\u8364\\u660f\\u5a5a\\u9b42\\u6d51\\u6df7\\u8be8\\u9984\\u960d\\u6eb7\\u7f17\",\"huo\":\"\\u8c41\\u6d3b\\u4f19\\u706b\\u83b7\\u6216\\u60d1\\u970d\\u8d27\\u7978\\u6509\\u56af\\u5925\\u94ac\\u952a\\u956c\\u8020\\u8816\",\"ji\":\"\\u51fb\\u573e\\u57fa\\u673a\\u7578\\u7a3d\\u79ef\\u7b95\\u808c\\u9965\\u8ff9\\u6fc0\\u8ba5\\u9e21\\u59ec\\u7ee9\\u7f09\\u5409\\u6781\\u68d8\\u8f91\\u7c4d\\u96c6\\u53ca\\u6025\\u75be\\u6c72\\u5373\\u5ac9\\u7ea7\\u6324\\u51e0\\u810a\\u5df1\\u84df\\u6280\\u5180\\u5b63\\u4f0e\\u796d\\u5242\\u60b8\\u6d4e\\u5bc4\\u5bc2\\u8ba1\\u8bb0\\u65e2\\u5fcc\\u9645\\u5993\\u7ee7\\u7eaa\\u5c45\\u4e0c\\u4e69\\u525e\\u4f76\\u4f74\\u8114\\u58bc\\u82a8\\u82b0\\u8401\\u84ba\\u857a\\u638e\\u53fd\\u54ad\\u54dc\\u5527\\u5c8c\\u5d74\\u6d0e\\u5f50\\u5c50\\u9aa5\\u757f\\u7391\\u696b\\u6b9b\\u621f\\u6222\\u8d4d\\u89ca\\u7284\\u9f51\\u77f6\\u7f81\\u5d47\\u7a37\\u7620\\u7635\\u866e\\u7b08\\u7b04\\u66a8\\u8dfb\\u8dfd\\u9701\\u9c9a\\u9cab\\u9afb\\u9e82\",\"jia\":\"\\u5609\\u67b7\\u5939\\u4f73\\u5bb6\\u52a0\\u835a\\u988a\\u8d3e\\u7532\\u94be\\u5047\\u7a3c\\u4ef7\\u67b6\\u9a7e\\u5ac1\\u4f3d\\u90cf\\u62ee\\u5cac\\u6d43\\u8fe6\\u73c8\\u621b\\u80db\\u605d\\u94d7\\u9553\\u75c2\\u86f1\\u7b33\\u8888\\u8dcf\",\"jian\":\"\\u6b7c\\u76d1\\u575a\\u5c16\\u7b3a\\u95f4\\u714e\\u517c\\u80a9\\u8270\\u5978\\u7f04\\u8327\\u68c0\\u67ec\\u78b1\\u7877\\u62e3\\u6361\\u7b80\\u4fed\\u526a\\u51cf\\u8350\\u69db\\u9274\\u8df5\\u8d31\\u89c1\\u952e\\u7bad\\u4ef6\\u5065\\u8230\\u5251\\u996f\\u6e10\\u6e85\\u6da7\\u5efa\\u50ed\\u8c0f\\u8c2b\\u83c5\\u84b9\\u641b\\u56dd\\u6e54\\u8e47\\u8b07\\u7f23\\u67a7\\u67d9\\u6957\\u620b\\u622c\\u726e\\u728d\\u6bfd\\u8171\\u7751\\u950f\\u9e63\\u88e5\\u7b15\\u7bb4\\u7fe6\\u8dbc\\u8e3a\\u9ca3\\u97af\",\"jiang\":\"\\u50f5\\u59dc\\u5c06\\u6d46\\u6c5f\\u7586\\u848b\\u6868\\u5956\\u8bb2\\u5320\\u9171\\u964d\\u8333\\u6d1a\\u7edb\\u7f30\\u729f\\u7913\\u8029\\u7ce8\\u8c47\",\"jiao\":\"\\u8549\\u6912\\u7901\\u7126\\u80f6\\u4ea4\\u90ca\\u6d47\\u9a84\\u5a07\\u56bc\\u6405\\u94f0\\u77eb\\u4fa5\\u811a\\u72e1\\u89d2\\u997a\\u7f34\\u7ede\\u527f\\u6559\\u9175\\u8f7f\\u8f83\\u53eb\\u4f7c\\u50ec\\u832d\\u6322\\u564d\\u5ce4\\u5fbc\\u59e3\\u7e9f\\u656b\\u768e\\u9e6a\\u86df\\u91ae\\u8de4\\u9c9b\",\"jie\":\"\\u7a96\\u63ed\\u63a5\\u7686\\u79f8\\u8857\\u9636\\u622a\\u52ab\\u8282\\u6854\\u6770\\u6377\\u776b\\u7aed\\u6d01\\u7ed3\\u89e3\\u59d0\\u6212\\u85c9\\u82a5\\u754c\\u501f\\u4ecb\\u75a5\\u8beb\\u5c4a\\u5048\\u8ba6\\u8bd8\\u5588\\u55df\\u736c\\u5a55\\u5b51\\u6840\\u7352\\u78a3\\u9534\\u7596\\u88b7\\u9889\\u86a7\\u7faf\\u9c92\\u9ab1\\u9aeb\",\"jin\":\"\\u5dfe\\u7b4b\\u65a4\\u91d1\\u4eca\\u6d25\\u895f\\u7d27\\u9526\\u4ec5\\u8c28\\u8fdb\\u9773\\u664b\\u7981\\u8fd1\\u70ec\\u6d78\\u5c3d\\u537a\\u8369\\u5807\\u5664\\u9991\\u5ed1\\u5997\\u7f19\\u747e\\u69ff\\u8d46\\u89d0\\u9485\\u9513\\u887f\\u77dc\",\"jing\":\"\\u52b2\\u8346\\u5162\\u830e\\u775b\\u6676\\u9cb8\\u4eac\\u60ca\\u7cbe\\u7cb3\\u7ecf\\u4e95\\u8b66\\u666f\\u9888\\u9759\\u5883\\u656c\\u955c\\u5f84\\u75c9\\u9756\\u7adf\\u7ade\\u51c0\\u522d\\u5106\\u9631\\u83c1\\u734d\\u61ac\\u6cfe\\u8ff3\\u5f2a\\u5a67\\u80bc\\u80eb\\u8148\\u65cc\",\"jiong\":\"\\u70af\\u7a98\\u5182\\u8fe5\\u6243\",\"jiu\":\"\\u63ea\\u7a76\\u7ea0\\u7396\\u97ed\\u4e45\\u7078\\u4e5d\\u9152\\u53a9\\u6551\\u65e7\\u81fc\\u8205\\u548e\\u5c31\\u759a\\u50e6\\u557e\\u9604\\u67e9\\u6855\\u9e6b\\u8d73\\u9b0f\",\"ju\":\"\\u97a0\\u62d8\\u72d9\\u75bd\\u9a79\\u83ca\\u5c40\\u5480\\u77e9\\u4e3e\\u6cae\\u805a\\u62d2\\u636e\\u5de8\\u5177\\u8ddd\\u8e1e\\u952f\\u4ff1\\u53e5\\u60e7\\u70ac\\u5267\\u5028\\u8bb5\\u82e3\\u82f4\\u8392\\u63ac\\u907d\\u5c66\\u741a\\u67b8\\u6910\\u6998\\u6989\\u6a58\\u728b\\u98d3\\u949c\\u9514\\u7aad\\u88fe\\u8d84\\u91b5\\u8e3d\\u9f83\\u96ce\\u97ab\",\"juan\":\"\\u6350\\u9e43\\u5a1f\\u5026\\u7737\\u5377\\u7ee2\\u9104\\u72f7\\u6d93\\u684a\\u8832\\u9529\\u954c\\u96bd\",\"jue\":\"\\u6485\\u652b\\u6289\\u6398\\u5014\\u7235\\u89c9\\u51b3\\u8bc0\\u7edd\\u53a5\\u5282\\u8c32\\u77cd\\u8568\\u5658\\u5d1b\\u7357\\u5b53\\u73cf\\u6877\\u6a5b\\u721d\\u9562\\u8e76\\u89d6\",\"jun\":\"\\u5747\\u83cc\\u94a7\\u519b\\u541b\\u5cfb\\u4fca\\u7ae3\\u6d5a\\u90e1\\u9a8f\\u6343\\u72fb\\u76b2\\u7b60\\u9e87\",\"ka\":\"\\u5580\\u5496\\u5361\\u4f67\\u5494\\u80e9\",\"ke\":\"\\u54af\\u5777\\u82db\\u67ef\\u68f5\\u78d5\\u9897\\u79d1\\u58f3\\u54b3\\u53ef\\u6e34\\u514b\\u523b\\u5ba2\\u8bfe\\u5ca2\\u606a\\u6e98\\u9a92\\u7f02\\u73c2\\u8f72\\u6c2a\\u778c\\u94b6\\u75b4\\u7aa0\\u874c\\u9ac1\",\"kai\":\"\\u5f00\\u63e9\\u6977\\u51ef\\u6168\\u5240\\u57b2\\u8488\\u5ffe\\u607a\\u94e0\\u950e\",\"kan\":\"\\u520a\\u582a\\u52d8\\u574e\\u780d\\u770b\\u4f83\\u51f5\\u83b0\\u83b6\\u6221\\u9f9b\\u77b0\",\"kang\":\"\\u5eb7\\u6177\\u7ce0\\u625b\\u6297\\u4ea2\\u7095\\u5751\\u4f09\\u95f6\\u94aa\",\"kao\":\"\\u8003\\u62f7\\u70e4\\u9760\\u5c3b\\u6832\\u7292\\u94d0\",\"ken\":\"\\u80af\\u5543\\u57a6\\u6073\\u57a0\\u88c9\\u9880\",\"keng\":\"\\u542d\\u5fd0\\u94ff\",\"kong\":\"\\u7a7a\\u6050\\u5b54\\u63a7\\u5025\\u5d06\\u7b9c\",\"kou\":\"\\u62a0\\u53e3\\u6263\\u5bc7\\u82a4\\u853b\\u53e9\\u770d\\u7b58\",\"ku\":\"\\u67af\\u54ed\\u7a9f\\u82e6\\u9177\\u5e93\\u88e4\\u5233\\u5800\\u55be\\u7ed4\\u9ab7\",\"kua\":\"\\u5938\\u57ae\\u630e\\u8de8\\u80ef\\u4f89\",\"kuai\":\"\\u5757\\u7b77\\u4fa9\\u5feb\\u84af\\u90d0\\u8489\\u72ef\\u810d\",\"kuan\":\"\\u5bbd\\u6b3e\\u9acb\",\"kuang\":\"\\u5321\\u7b50\\u72c2\\u6846\\u77ff\\u7736\\u65f7\\u51b5\\u8bd3\\u8bf3\\u909d\\u5739\\u593c\\u54d0\\u7ea9\\u8d36\",\"kui\":\"\\u4e8f\\u76d4\\u5cbf\\u7aa5\\u8475\\u594e\\u9b41\\u5080\\u9988\\u6127\\u6e83\\u9997\\u532e\\u5914\\u9697\\u63c6\\u55b9\\u559f\\u609d\\u6126\\u9615\\u9035\\u668c\\u777d\\u8069\\u8770\\u7bd1\\u81fe\\u8dec\",\"kun\":\"\\u5764\\u6606\\u6346\\u56f0\\u6083\\u9603\\u7428\\u951f\\u918c\\u9cb2\\u9ae1\",\"kuo\":\"\\u62ec\\u6269\\u5ed3\\u9614\\u86de\",\"la\":\"\\u5783\\u62c9\\u5587\\u8721\\u814a\\u8fa3\\u5566\\u524c\\u647a\\u908b\\u65ef\\u782c\\u760c\",\"lai\":\"\\u83b1\\u6765\\u8d56\\u5d03\\u5f95\\u6d9e\\u6fd1\\u8d49\\u7750\\u94fc\\u765e\\u7c41\",\"lan\":\"\\u84dd\\u5a6a\\u680f\\u62e6\\u7bee\\u9611\\u5170\\u6f9c\\u8c30\\u63fd\\u89c8\\u61d2\\u7f06\\u70c2\\u6ee5\\u5549\\u5c9a\\u61d4\\u6f24\\u6984\\u6593\\u7f71\\u9567\\u8934\",\"lang\":\"\\u7405\\u6994\\u72fc\\u5eca\\u90ce\\u6717\\u6d6a\\u83a8\\u8497\\u5577\\u9606\\u9512\\u7a02\\u8782\",\"lao\":\"\\u635e\\u52b3\\u7262\\u8001\\u4f6c\\u59e5\\u916a\\u70d9\\u6d9d\\u5520\\u5d02\\u6833\\u94d1\\u94f9\\u75e8\\u91aa\",\"le\":\"\\u52d2\\u4e50\\u808b\\u4ec2\\u53fb\\u561e\\u6cd0\\u9cd3\",\"lei\":\"\\u96f7\\u956d\\u857e\\u78ca\\u7d2f\\u5121\\u5792\\u64c2\\u7c7b\\u6cea\\u7fb8\\u8bd4\\u837d\\u54a7\\u6f2f\\u5ad8\\u7f27\\u6a91\\u8012\\u9179\",\"ling\":\"\\u68f1\\u51b7\\u62ce\\u73b2\\u83f1\\u96f6\\u9f84\\u94c3\\u4f36\\u7f9a\\u51cc\\u7075\\u9675\\u5cad\\u9886\\u53e6\\u4ee4\\u9143\\u5844\\u82d3\\u5464\\u56f9\\u6ce0\\u7eeb\\u67c3\\u68c2\\u74f4\\u8046\\u86c9\\u7fce\\u9cae\",\"leng\":\"\\u695e\\u6123\",\"li\":\"\\u5398\\u68a8\\u7281\\u9ece\\u7bf1\\u72f8\\u79bb\\u6f13\\u7406\\u674e\\u91cc\\u9ca4\\u793c\\u8389\\u8354\\u540f\\u6817\\u4e3d\\u5389\\u52b1\\u783e\\u5386\\u5229\\u5088\\u4f8b\\u4fd0\\u75e2\\u7acb\\u7c92\\u6ca5\\u96b6\\u529b\\u7483\\u54e9\\u4fea\\u4fda\\u90e6\\u575c\\u82c8\\u8385\\u84e0\\u85dc\\u6369\\u5456\\u5533\\u55b1\\u7301\\u6ea7\\u6fa7\\u9026\\u5a0c\\u5ae0\\u9a8a\\u7f21\\u73de\\u67a5\\u680e\\u8f79\\u623e\\u783a\\u8a48\\u7f79\\u9502\\u9e42\\u75a0\\u75ac\\u86ce\\u870a\\u8821\\u7b20\\u7be5\\u7c9d\\u91b4\\u8dde\\u96f3\\u9ca1\\u9ce2\\u9ee7\",\"lian\":\"\\u4fe9\\u8054\\u83b2\\u8fde\\u9570\\u5ec9\\u601c\\u6d9f\\u5e18\\u655b\\u8138\\u94fe\\u604b\\u70bc\\u7ec3\\u631b\\u8539\\u5941\\u6f4b\\u6fc2\\u5a08\\u740f\\u695d\\u6b93\\u81c1\\u81a6\\u88e2\\u880a\\u9ca2\",\"liang\":\"\\u7cae\\u51c9\\u6881\\u7cb1\\u826f\\u4e24\\u8f86\\u91cf\\u667e\\u4eae\\u8c05\\u589a\\u690b\\u8e09\\u9753\\u9b49\",\"liao\":\"\\u64a9\\u804a\\u50da\\u7597\\u71ce\\u5be5\\u8fbd\\u6f66\\u4e86\\u6482\\u9563\\u5ed6\\u6599\\u84fc\\u5c25\\u5639\\u7360\\u5bee\\u7f2d\\u948c\\u9e69\\u8022\",\"lie\":\"\\u5217\\u88c2\\u70c8\\u52a3\\u730e\\u51bd\\u57d2\\u6d0c\\u8d94\\u8e90\\u9b23\",\"lin\":\"\\u7433\\u6797\\u78f7\\u9716\\u4e34\\u90bb\\u9cde\\u6dcb\\u51db\\u8d41\\u541d\\u853a\\u5d99\\u5eea\\u9074\\u6aa9\\u8f9a\\u77b5\\u7cbc\\u8e8f\\u9e9f\",\"liu\":\"\\u6e9c\\u7409\\u69b4\\u786b\\u998f\\u7559\\u5218\\u7624\\u6d41\\u67f3\\u516d\\u62a1\\u507b\\u848c\\u6cd6\\u6d4f\\u905b\\u9a9d\\u7efa\\u65d2\\u7198\\u950d\\u954f\\u9e68\\u938f\",\"long\":\"\\u9f99\\u804b\\u5499\\u7b3c\\u7abf\\u9686\\u5784\\u62e2\\u9647\\u5f04\\u5785\\u830f\\u6cf7\\u73d1\\u680a\\u80e7\\u783b\\u7643\",\"lou\":\"\\u697c\\u5a04\\u6402\\u7bd3\\u6f0f\\u964b\\u55bd\\u5d5d\\u9542\\u7618\\u8027\\u877c\\u9ac5\",\"lu\":\"\\u82a6\\u5362\\u9885\\u5e90\\u7089\\u63b3\\u5364\\u864f\\u9c81\\u9e93\\u788c\\u9732\\u8def\\u8d42\\u9e7f\\u6f5e\\u7984\\u5f55\\u9646\\u622e\\u5786\\u6445\\u64b8\\u565c\\u6cf8\\u6e0c\\u6f09\\u7490\\u680c\\u6a79\\u8f73\\u8f82\\u8f98\\u6c07\\u80ea\\u9565\\u9e2c\\u9e6d\\u7c0f\\u823b\\u9c88\",\"lv\":\"\\u9a74\\u5415\\u94dd\\u4fa3\\u65c5\\u5c65\\u5c61\\u7f15\\u8651\\u6c2f\\u5f8b\\u7387\\u6ee4\\u7eff\\u634b\\u95fe\\u6988\\u8182\\u7a06\\u891b\",\"luan\":\"\\u5ce6\\u5b6a\\u6ee6\\u5375\\u4e71\\u683e\\u9e3e\\u92ae\",\"lue\":\"\\u63a0\\u7565\\u950a\",\"lun\":\"\\u8f6e\\u4f26\\u4ed1\\u6ca6\\u7eb6\\u8bba\\u56f5\",\"luo\":\"\\u841d\\u87ba\\u7f57\\u903b\\u9523\\u7ba9\\u9aa1\\u88f8\\u843d\\u6d1b\\u9a86\\u7edc\\u502e\\u8366\\u645e\\u7321\\u6cfa\\u6924\\u8136\\u9559\\u7630\\u96d2\",\"ma\":\"\\u5988\\u9ebb\\u739b\\u7801\\u8682\\u9a6c\\u9a82\\u561b\\u5417\\u551b\\u72b8\\u5b37\\u6769\\u9ebd\",\"mai\":\"\\u57cb\\u4e70\\u9ea6\\u5356\\u8fc8\\u8109\\u52a2\\u836c\\u54aa\\u973e\",\"man\":\"\\u7792\\u9992\\u86ee\\u6ee1\\u8513\\u66fc\\u6162\\u6f2b\\u8c29\\u5881\\u5e54\\u7f26\\u71b3\\u9558\\u989f\\u87a8\\u9cd7\\u9794\",\"mang\":\"\\u8292\\u832b\\u76f2\\u5fd9\\u83bd\\u9099\\u6f2d\\u6726\\u786d\\u87d2\",\"meng\":\"\\u6c13\\u840c\\u8499\\u6aac\\u76df\\u9530\\u731b\\u68a6\\u5b5f\\u52d0\\u750d\\u77a2\\u61f5\\u791e\\u867b\\u8722\\u8813\\u824b\\u8268\\u9efe\",\"miao\":\"\\u732b\\u82d7\\u63cf\\u7784\\u85d0\\u79d2\\u6e3a\\u5e99\\u5999\\u55b5\\u9088\\u7f08\\u7f2a\\u676a\\u6dfc\\u7707\\u9e4b\\u8731\",\"mao\":\"\\u8305\\u951a\\u6bdb\\u77db\\u94c6\\u536f\\u8302\\u5192\\u5e3d\\u8c8c\\u8d38\\u4f94\\u88a4\\u52d6\\u8306\\u5cc1\\u7441\\u6634\\u7266\\u8004\\u65c4\\u61cb\\u7780\\u86d1\\u8765\\u87ca\\u9ae6\",\"me\":\"\\u4e48\",\"mei\":\"\\u73ab\\u679a\\u6885\\u9176\\u9709\\u7164\\u6ca1\\u7709\\u5a92\\u9541\\u6bcf\\u7f8e\\u6627\\u5bd0\\u59b9\\u5a9a\\u5776\\u8393\\u5d4b\\u7338\\u6d7c\\u6e44\\u6963\\u9545\\u9e5b\\u8882\\u9b45\",\"men\":\"\\u95e8\\u95f7\\u4eec\\u626a\\u739f\\u7116\\u61d1\\u9494\",\"mi\":\"\\u772f\\u919a\\u9761\\u7cdc\\u8ff7\\u8c1c\\u5f25\\u7c73\\u79d8\\u89c5\\u6ccc\\u871c\\u5bc6\\u5e42\\u8288\\u5196\\u8c27\\u863c\\u5627\\u7315\\u736f\\u6c68\\u5b93\\u5f2d\\u8112\\u6549\\u7cf8\\u7e3b\\u9e8b\",\"mian\":\"\\u68c9\\u7720\\u7ef5\\u5195\\u514d\\u52c9\\u5a29\\u7f05\\u9762\\u6c94\\u6e4e\\u817c\\u7704\",\"mie\":\"\\u8511\\u706d\\u54a9\\u881b\\u7bfe\",\"min\":\"\\u6c11\\u62bf\\u76bf\\u654f\\u60af\\u95fd\\u82e0\\u5cb7\\u95f5\\u6cef\\u73c9\",\"ming\":\"\\u660e\\u879f\\u9e23\\u94ed\\u540d\\u547d\\u51a5\\u8317\\u6e9f\\u669d\\u7791\\u9169\",\"miu\":\"\\u8c2c\",\"mo\":\"\\u6478\\u6479\\u8611\\u6a21\\u819c\\u78e8\\u6469\\u9b54\\u62b9\\u672b\\u83ab\\u58a8\\u9ed8\\u6cab\\u6f20\\u5bde\\u964c\\u8c1f\\u8309\\u84e6\\u998d\\u5aeb\\u9546\\u79e3\\u763c\\u8031\\u87c6\\u8c8a\\u8c98\",\"mou\":\"\\u8c0b\\u725f\\u67d0\\u53b6\\u54de\\u5a7a\\u7738\\u936a\",\"mu\":\"\\u62c7\\u7261\\u4ea9\\u59c6\\u6bcd\\u5893\\u66ae\\u5e55\\u52df\\u6155\\u6728\\u76ee\\u7766\\u7267\\u7a46\\u4eeb\\u82dc\\u5452\\u6c90\\u6bea\\u94bc\",\"na\":\"\\u62ff\\u54ea\\u5450\\u94a0\\u90a3\\u5a1c\\u7eb3\\u5185\\u637a\\u80ad\\u954e\\u8872\\u7bac\",\"nai\":\"\\u6c16\\u4e43\\u5976\\u8010\\u5948\\u9f10\\u827f\\u8418\\u67f0\",\"nan\":\"\\u5357\\u7537\\u96be\\u56ca\\u5583\\u56e1\\u6960\\u8169\\u877b\\u8d67\",\"nao\":\"\\u6320\\u8111\\u607c\\u95f9\\u5b6c\\u57b4\\u7331\\u7459\\u7847\\u94d9\\u86f2\",\"ne\":\"\\u6dd6\\u5462\\u8bb7\",\"nei\":\"\\u9981\",\"nen\":\"\\u5ae9\\u80fd\\u6798\\u6041\",\"ni\":\"\\u59ae\\u9713\\u502a\\u6ce5\\u5c3c\\u62df\\u4f60\\u533f\\u817b\\u9006\\u6eba\\u4f32\\u576d\\u730a\\u6029\\u6ee0\\u6635\\u65ce\\u7962\\u615d\\u7768\\u94cc\\u9cb5\",\"nian\":\"\\u852b\\u62c8\\u5e74\\u78be\\u64b5\\u637b\\u5ff5\\u5eff\\u8f87\\u9ecf\\u9c87\\u9cb6\",\"niang\":\"\\u5a18\\u917f\",\"niao\":\"\\u9e1f\\u5c3f\\u8311\\u5b32\\u8132\\u8885\",\"nie\":\"\\u634f\\u8042\\u5b7d\\u556e\\u954a\\u954d\\u6d85\\u4e5c\\u9667\\u8616\\u55eb\\u8080\\u989e\\u81ec\\u8e51\",\"nin\":\"\\u60a8\\u67e0\",\"ning\":\"\\u72de\\u51dd\\u5b81\\u62e7\\u6cde\\u4f5e\\u84e5\\u549b\\u752f\\u804d\",\"niu\":\"\\u725b\\u626d\\u94ae\\u7ebd\\u72c3\\u5ff8\\u599e\\u86b4\",\"nong\":\"\\u8113\\u6d53\\u519c\\u4fac\",\"nu\":\"\\u5974\\u52aa\\u6012\\u5476\\u5e11\\u5f29\\u80ec\\u5b65\\u9a7d\",\"nv\":\"\\u5973\\u6067\\u9495\\u8844\",\"nuan\":\"\\u6696\",\"nuenue\":\"\\u8650\",\"nue\":\"\\u759f\\u8c11\",\"nuo\":\"\\u632a\\u61e6\\u7cef\\u8bfa\\u50a9\\u6426\\u558f\\u9518\",\"ou\":\"\\u54e6\\u6b27\\u9e25\\u6bb4\\u85d5\\u5455\\u5076\\u6ca4\\u6004\\u74ef\\u8026\",\"pa\":\"\\u556a\\u8db4\\u722c\\u5e15\\u6015\\u7436\\u8469\\u7b62\",\"pai\":\"\\u62cd\\u6392\\u724c\\u5f98\\u6e43\\u6d3e\\u4ff3\\u848e\",\"pan\":\"\\u6500\\u6f58\\u76d8\\u78d0\\u76fc\\u7554\\u5224\\u53db\\u723f\\u6cee\\u88a2\\u897b\\u87e0\\u8e52\",\"pang\":\"\\u4e53\\u5e9e\\u65c1\\u802a\\u80d6\\u6ec2\\u9004\",\"pao\":\"\\u629b\\u5486\\u5228\\u70ae\\u888d\\u8dd1\\u6ce1\\u530f\\u72cd\\u5e96\\u812c\\u75b1\",\"pei\":\"\\u5478\\u80da\\u57f9\\u88f4\\u8d54\\u966a\\u914d\\u4f69\\u6c9b\\u638a\\u8f94\\u5e14\\u6de0\\u65c6\\u952b\\u9185\\u9708\",\"pen\":\"\\u55b7\\u76c6\\u6e53\",\"peng\":\"\\u7830\\u62a8\\u70f9\\u6f8e\\u5f6d\\u84ec\\u68da\\u787c\\u7bf7\\u81a8\\u670b\\u9e4f\\u6367\\u78b0\\u576f\\u580b\\u562d\\u6026\\u87db\",\"pi\":\"\\u7812\\u9739\\u6279\\u62ab\\u5288\\u7435\\u6bd7\\u5564\\u813e\\u75b2\\u76ae\\u5339\\u75de\\u50fb\\u5c41\\u8b6c\\u4e15\\u9674\\u90b3\\u90eb\\u572e\\u9f19\\u64d7\\u567c\\u5e80\\u5ab2\\u7eb0\\u6787\\u7513\\u7765\\u7f74\\u94cd\\u75e6\\u7656\\u758b\\u868d\\u8c94\",\"pian\":\"\\u7bc7\\u504f\\u7247\\u9a97\\u8c1d\\u9a88\\u728f\\u80fc\\u890a\\u7fe9\\u8e41\",\"piao\":\"\\u98d8\\u6f02\\u74e2\\u7968\\u527d\\u560c\\u5ad6\\u7f25\\u6b8d\\u779f\\u87b5\",\"pie\":\"\\u6487\\u77a5\\u4e3f\\u82e4\\u6c15\",\"pin\":\"\\u62fc\\u9891\\u8d2b\\u54c1\\u8058\\u62da\\u59d8\\u5ad4\\u6980\\u725d\\u98a6\",\"ping\":\"\\u4e52\\u576a\\u82f9\\u840d\\u5e73\\u51ed\\u74f6\\u8bc4\\u5c4f\\u4fdc\\u5a09\\u67b0\\u9c86\",\"po\":\"\\u5761\\u6cfc\\u9887\\u5a46\\u7834\\u9b44\\u8feb\\u7c95\\u53f5\\u9131\\u6ea5\\u73c0\\u948b\\u94b7\\u76a4\\u7b38\",\"pou\":\"\\u5256\\u88d2\\u8e23\",\"pu\":\"\\u6251\\u94fa\\u4ec6\\u8386\\u8461\\u83e9\\u84b2\\u57d4\\u6734\\u5703\\u666e\\u6d66\\u8c31\\u66dd\\u7011\\u530d\\u5657\\u6fee\\u749e\\u6c06\\u9564\\u9568\\u8e7c\",\"qi\":\"\\u671f\\u6b3a\\u6816\\u621a\\u59bb\\u4e03\\u51c4\\u6f06\\u67d2\\u6c8f\\u5176\\u68cb\\u5947\\u6b67\\u7566\\u5d0e\\u8110\\u9f50\\u65d7\\u7948\\u7941\\u9a91\\u8d77\\u5c82\\u4e5e\\u4f01\\u542f\\u5951\\u780c\\u5668\\u6c14\\u8fc4\\u5f03\\u6c7d\\u6ce3\\u8bab\\u4e9f\\u4e93\\u573b\\u8291\\u840b\\u847a\\u5601\\u5c7a\\u5c90\\u6c54\\u6dc7\\u9a90\\u7eee\\u742a\\u7426\\u675e\\u6864\\u69ed\\u6b39\\u797a\\u61a9\\u789b\\u86f4\\u871e\\u7da6\\u7dae\\u8dbf\\u8e4a\\u9ccd\\u9e92\",\"qia\":\"\\u6390\\u6070\\u6d3d\\u845c\",\"qian\":\"\\u7275\\u6266\\u948e\\u94c5\\u5343\\u8fc1\\u7b7e\\u4edf\\u8c26\\u4e7e\\u9ed4\\u94b1\\u94b3\\u524d\\u6f5c\\u9063\\u6d45\\u8c34\\u5811\\u5d4c\\u6b20\\u6b49\\u4f65\\u9621\\u828a\\u82a1\\u8368\\u63ae\\u5c8d\\u60ad\\u614a\\u9a9e\\u6434\\u8930\\u7f31\\u6920\\u80b7\\u6106\\u94a4\\u8654\\u7b9d\",\"qiang\":\"\\u67aa\\u545b\\u8154\\u7f8c\\u5899\\u8537\\u5f3a\\u62a2\\u5af1\\u6a2f\\u6217\\u709d\\u9516\\u9535\\u956a\\u8941\\u8723\\u7f9f\\u8deb\\u8dc4\",\"qiao\":\"\\u6a47\\u9539\\u6572\\u6084\\u6865\\u77a7\\u4e54\\u4fa8\\u5de7\\u9798\\u64ac\\u7fd8\\u5ced\\u4fcf\\u7a8d\\u5281\\u8bee\\u8c2f\\u835e\\u6100\\u6194\\u7f32\\u6a35\\u6bf3\\u7857\\u8df7\\u9792\",\"qie\":\"\\u5207\\u8304\\u4e14\\u602f\\u7a83\\u90c4\\u553c\\u60ec\\u59be\\u6308\\u9532\\u7ba7\",\"qin\":\"\\u94a6\\u4fb5\\u4eb2\\u79e6\\u7434\\u52e4\\u82b9\\u64d2\\u79bd\\u5bdd\\u6c81\\u82a9\\u84c1\\u8572\\u63ff\\u5423\\u55ea\\u5659\\u6eb1\\u6a8e\\u8793\\u887e\",\"qing\":\"\\u9752\\u8f7b\\u6c22\\u503e\\u537f\\u6e05\\u64ce\\u6674\\u6c30\\u60c5\\u9877\\u8bf7\\u5e86\\u5029\\u82d8\\u570a\\u6aa0\\u78ec\\u873b\\u7f44\\u7b90\\u8b26\\u9cad\\u9ee5\",\"qiong\":\"\\u743c\\u7a77\\u909b\\u8315\\u7a79\\u7b47\\u928e\",\"qiu\":\"\\u79cb\\u4e18\\u90b1\\u7403\\u6c42\\u56da\\u914b\\u6cc5\\u4fc5\\u6c3d\\u5def\\u827d\\u72b0\\u6e6b\\u9011\\u9052\\u6978\\u8d47\\u9e20\\u866c\\u86af\\u8764\\u88d8\\u7cd7\\u9cc5\\u9f3d\",\"qu\":\"\\u8d8b\\u533a\\u86c6\\u66f2\\u8eaf\\u5c48\\u9a71\\u6e20\\u53d6\\u5a36\\u9f8b\\u8da3\\u53bb\\u8bce\\u52ac\\u8556\\u8627\\u5c96\\u8862\\u9612\\u74a9\\u89d1\\u6c0d\\u795b\\u78f2\\u766f\\u86d0\\u883c\\u9eb4\\u77bf\\u9ee2\",\"quan\":\"\\u5708\\u98a7\\u6743\\u919b\\u6cc9\\u5168\\u75ca\\u62f3\\u72ac\\u5238\\u529d\\u8be0\\u8343\\u737e\\u609b\\u7efb\\u8f81\\u754e\\u94e8\\u8737\\u7b4c\\u9b08\",\"que\":\"\\u7f3a\\u7094\\u7638\\u5374\\u9e4a\\u69b7\\u786e\\u96c0\\u9619\\u60ab\",\"qun\":\"\\u88d9\\u7fa4\\u9021\",\"ran\":\"\\u7136\\u71c3\\u5189\\u67d3\\u82d2\\u9aef\",\"rang\":\"\\u74e4\\u58e4\\u6518\\u56b7\\u8ba9\\u79b3\\u7a70\",\"rao\":\"\\u9976\\u6270\\u7ed5\\u835b\\u5a06\\u6861\",\"ruo\":\"\\u60f9\\u82e5\\u5f31\",\"re\":\"\\u70ed\\u504c\",\"ren\":\"\\u58ec\\u4ec1\\u4eba\\u5fcd\\u97e7\\u4efb\\u8ba4\\u5203\\u598a\\u7eab\\u4ede\\u834f\\u845a\\u996a\\u8f6b\\u7a14\\u887d\",\"reng\":\"\\u6254\\u4ecd\",\"ri\":\"\\u65e5\",\"rong\":\"\\u620e\\u8338\\u84c9\\u8363\\u878d\\u7194\\u6eb6\\u5bb9\\u7ed2\\u5197\\u5d58\\u72e8\\u7f1b\\u6995\\u877e\",\"rou\":\"\\u63c9\\u67d4\\u8089\\u7cc5\\u8e42\\u97a3\",\"ru\":\"\\u8339\\u8815\\u5112\\u5b7a\\u5982\\u8fb1\\u4e73\\u6c5d\\u5165\\u8925\\u84d0\\u85b7\\u5685\\u6d33\\u6ebd\\u6fe1\\u94f7\\u8966\\u98a5\",\"ruan\":\"\\u8f6f\\u962e\\u670a\",\"rui\":\"\\u854a\\u745e\\u9510\\u82ae\\u8564\\u777f\\u868b\",\"run\":\"\\u95f0\\u6da6\",\"sa\":\"\\u6492\\u6d12\\u8428\\u5345\\u4ee8\\u6332\\u98d2\",\"sai\":\"\\u816e\\u9cc3\\u585e\\u8d5b\\u567b\",\"san\":\"\\u4e09\\u53c1\\u4f1e\\u6563\\u5f61\\u9993\\u6c35\\u6bf5\\u7cc1\\u9730\",\"sang\":\"\\u6851\\u55d3\\u4e27\\u6421\\u78c9\\u98a1\",\"sao\":\"\\u6414\\u9a9a\\u626b\\u5ac2\\u57fd\\u81ca\\u7619\\u9ccb\",\"se\":\"\\u745f\\u8272\\u6da9\\u556c\\u94e9\\u94ef\\u7a51\",\"sen\":\"\\u68ee\",\"seng\":\"\\u50e7\",\"sha\":\"\\u838e\\u7802\\u6740\\u5239\\u6c99\\u7eb1\\u50bb\\u5565\\u715e\\u810e\\u6b43\\u75e7\\u88df\\u970e\\u9ca8\",\"shai\":\"\\u7b5b\\u6652\\u917e\",\"shan\":\"\\u73ca\\u82eb\\u6749\\u5c71\\u5220\\u717d\\u886b\\u95ea\\u9655\\u64c5\\u8d61\\u81b3\\u5584\\u6c55\\u6247\\u7f2e\\u5261\\u8baa\\u912f\\u57cf\\u829f\\u6f78\\u59d7\\u9a9f\\u81bb\\u9490\\u759d\\u87ee\\u8222\\u8dda\\u9cdd\",\"shang\":\"\\u5892\\u4f24\\u5546\\u8d4f\\u664c\\u4e0a\\u5c1a\\u88f3\\u57a7\\u7ef1\\u6b87\\u71b5\\u89de\",\"shao\":\"\\u68a2\\u634e\\u7a0d\\u70e7\\u828d\\u52fa\\u97f6\\u5c11\\u54e8\\u90b5\\u7ecd\\u52ad\\u82d5\\u6f72\\u86f8\\u7b24\\u7b72\\u8244\",\"she\":\"\\u5962\\u8d4a\\u86c7\\u820c\\u820d\\u8d66\\u6444\\u5c04\\u6151\\u6d89\\u793e\\u8bbe\\u538d\\u4f58\\u731e\\u7572\\u9e9d\",\"shen\":\"\\u7837\\u7533\\u547b\\u4f38\\u8eab\\u6df1\\u5a20\\u7ec5\\u795e\\u6c88\\u5ba1\\u5a76\\u751a\\u80be\\u614e\\u6e17\\u8bdc\\u8c02\\u5432\\u54c2\\u6e16\\u6939\\u77e7\\u8703\",\"sheng\":\"\\u58f0\\u751f\\u7525\\u7272\\u5347\\u7ef3\\u7701\\u76db\\u5269\\u80dc\\u5723\\u4e1e\\u6e11\\u5ab5\\u771a\\u7b19\",\"shi\":\"\\u5e08\\u5931\\u72ee\\u65bd\\u6e7f\\u8bd7\\u5c38\\u8671\\u5341\\u77f3\\u62fe\\u65f6\\u4ec0\\u98df\\u8680\\u5b9e\\u8bc6\\u53f2\\u77e2\\u4f7f\\u5c4e\\u9a76\\u59cb\\u5f0f\\u793a\\u58eb\\u4e16\\u67ff\\u4e8b\\u62ed\\u8a93\\u901d\\u52bf\\u662f\\u55dc\\u566c\\u9002\\u4ed5\\u4f8d\\u91ca\\u9970\\u6c0f\\u5e02\\u6043\\u5ba4\\u89c6\\u8bd5\\u8c25\\u57d8\\u83b3\\u84cd\\u5f11\\u5511\\u9963\\u8f7c\\u8006\\u8d33\\u70bb\\u793b\\u94c8\\u94ca\\u87ab\\u8210\\u7b6e\\u8c55\\u9ca5\\u9cba\",\"shou\":\"\\u6536\\u624b\\u9996\\u5b88\\u5bff\\u6388\\u552e\\u53d7\\u7626\\u517d\\u624c\\u72e9\\u7ef6\\u824f\",\"shu\":\"\\u852c\\u67a2\\u68b3\\u6b8a\\u6292\\u8f93\\u53d4\\u8212\\u6dd1\\u758f\\u4e66\\u8d4e\\u5b70\\u719f\\u85af\\u6691\\u66d9\\u7f72\\u8700\\u9ecd\\u9f20\\u5c5e\\u672f\\u8ff0\\u6811\\u675f\\u620d\\u7ad6\\u5885\\u5eb6\\u6570\\u6f31\\u6055\\u500f\\u587e\\u83fd\\u5fc4\\u6cad\\u6d91\\u6f8d\\u59dd\\u7ebe\\u6bf9\\u8167\\u6bb3\\u956f\\u79eb\\u9e6c\",\"shua\":\"\\u5237\\u800d\\u5530\\u6dae\",\"shuai\":\"\\u6454\\u8870\\u7529\\u5e05\\u87c0\",\"shuan\":\"\\u6813\\u62f4\\u95e9\",\"shuang\":\"\\u971c\\u53cc\\u723d\\u5b40\",\"shui\":\"\\u8c01\\u6c34\\u7761\\u7a0e\",\"shun\":\"\\u542e\\u77ac\\u987a\\u821c\\u6042\",\"shuo\":\"\\u8bf4\\u7855\\u6714\\u70c1\\u84b4\\u6420\\u55cd\\u6fef\\u5981\\u69ca\\u94c4\",\"si\":\"\\u65af\\u6495\\u5636\\u601d\\u79c1\\u53f8\\u4e1d\\u6b7b\\u8086\\u5bfa\\u55e3\\u56db\\u4f3a\\u4f3c\\u9972\\u5df3\\u53ae\\u4fdf\\u5155\\u83e5\\u549d\\u6c5c\\u6cd7\\u6f8c\\u59d2\\u9a77\\u7f0c\\u7940\\u7960\\u9536\\u9e36\\u801c\\u86f3\\u7b25\",\"song\":\"\\u677e\\u8038\\u6002\\u9882\\u9001\\u5b8b\\u8bbc\\u8bf5\\u51c7\\u83d8\\u5d27\\u5d69\\u5fea\\u609a\\u6dde\\u7ae6\",\"sou\":\"\\u641c\\u8258\\u64de\\u55fd\\u53df\\u55d6\\u55fe\\u998a\\u6eb2\\u98d5\\u778d\\u953c\\u878b\",\"su\":\"\\u82cf\\u9165\\u4fd7\\u7d20\\u901f\\u7c9f\\u50f3\\u5851\\u6eaf\\u5bbf\\u8bc9\\u8083\\u5919\\u8c21\\u850c\\u55c9\\u612b\\u7c0c\\u89eb\\u7a23\",\"suan\":\"\\u9178\\u849c\\u7b97\",\"sui\":\"\\u867d\\u968b\\u968f\\u7ee5\\u9ad3\\u788e\\u5c81\\u7a57\\u9042\\u96a7\\u795f\\u84d1\\u51ab\\u8c07\\u6fc9\\u9083\\u71e7\\u772d\\u7762\",\"sun\":\"\\u5b59\\u635f\\u7b0b\\u836a\\u72f2\\u98e7\\u69ab\\u8de3\\u96bc\",\"suo\":\"\\u68ad\\u5506\\u7f29\\u7410\\u7d22\\u9501\\u6240\\u5522\\u55e6\\u5a11\\u686b\\u7743\\u7fa7\",\"ta\":\"\\u584c\\u4ed6\\u5b83\\u5979\\u5854\\u736d\\u631e\\u8e4b\\u8e0f\\u95fc\\u6ebb\\u9062\\u69bb\\u6c93\",\"tai\":\"\\u80ce\\u82d4\\u62ac\\u53f0\\u6cf0\\u915e\\u592a\\u6001\\u6c70\\u90b0\\u85b9\\u80bd\\u70b1\\u949b\\u8dc6\\u9c90\",\"tan\":\"\\u574d\\u644a\\u8d2a\\u762b\\u6ee9\\u575b\\u6a80\\u75f0\\u6f6d\\u8c2d\\u8c08\\u5766\\u6bef\\u8892\\u78b3\\u63a2\\u53f9\\u70ad\\u90ef\\u8548\\u6619\\u94bd\\u952c\\u8983\",\"tang\":\"\\u6c64\\u5858\\u642a\\u5802\\u68e0\\u819b\\u5510\\u7cd6\\u50a5\\u9967\\u6e8f\\u746d\\u94f4\\u9557\\u8025\\u8797\\u87b3\\u7fb0\\u91a3\",\"thang\":\"\\u5018\\u8eba\\u6dcc\",\"theng\":\"\\u8d9f\\u70eb\",\"tao\":\"\\u638f\\u6d9b\\u6ed4\\u7ee6\\u8404\\u6843\\u9003\\u6dd8\\u9676\\u8ba8\\u5957\\u6311\\u9f17\\u5555\\u97ec\\u9955\",\"te\":\"\\u7279\",\"teng\":\"\\u85e4\\u817e\\u75bc\\u8a8a\\u6ed5\",\"ti\":\"\\u68af\\u5254\\u8e22\\u9511\\u63d0\\u9898\\u8e44\\u557c\\u4f53\\u66ff\\u568f\\u60d5\\u6d95\\u5243\\u5c49\\u8351\\u608c\\u9016\\u7ee8\\u7f07\\u9e48\\u88fc\\u918d\",\"tian\":\"\\u5929\\u6dfb\\u586b\\u7530\\u751c\\u606c\\u8214\\u8146\\u63ad\\u5fdd\\u9617\\u6b84\\u754b\\u94bf\\u86ba\",\"tiao\":\"\\u6761\\u8fe2\\u773a\\u8df3\\u4f7b\\u7967\\u94eb\\u7a95\\u9f86\\u9ca6\",\"tie\":\"\\u8d34\\u94c1\\u5e16\\u841c\\u992e\",\"ting\":\"\\u5385\\u542c\\u70c3\\u6c40\\u5ef7\\u505c\\u4ead\\u5ead\\u633a\\u8247\\u839b\\u8476\\u5a77\\u6883\\u8713\\u9706\",\"tong\":\"\\u901a\\u6850\\u916e\\u77b3\\u540c\\u94dc\\u5f64\\u7ae5\\u6876\\u6345\\u7b52\\u7edf\\u75db\\u4f5f\\u50ee\\u4edd\\u833c\\u55f5\\u6078\\u6f7c\\u783c\",\"tou\":\"\\u5077\\u6295\\u5934\\u900f\\u4ea0\",\"tu\":\"\\u51f8\\u79c3\\u7a81\\u56fe\\u5f92\\u9014\\u6d82\\u5c60\\u571f\\u5410\\u5154\\u580d\\u837c\\u83df\\u948d\\u9174\",\"tuan\":\"\\u6e4d\\u56e2\\u7583\",\"tui\":\"\\u63a8\\u9893\\u817f\\u8715\\u892a\\u9000\\u5fd2\\u717a\",\"tun\":\"\\u541e\\u5c6f\\u81c0\\u9968\\u66be\\u8c5a\\u7a80\",\"tuo\":\"\\u62d6\\u6258\\u8131\\u9e35\\u9640\\u9a6e\\u9a7c\\u692d\\u59a5\\u62d3\\u553e\\u4e47\\u4f57\\u5768\\u5eb9\\u6cb1\\u67dd\\u7823\\u7ba8\\u8204\\u8dce\\u9f0d\",\"wa\":\"\\u6316\\u54c7\\u86d9\\u6d3c\\u5a03\\u74e6\\u889c\\u4f64\\u5a32\\u817d\",\"wai\":\"\\u6b6a\\u5916\",\"wan\":\"\\u8c4c\\u5f2f\\u6e7e\\u73a9\\u987d\\u4e38\\u70f7\\u5b8c\\u7897\\u633d\\u665a\\u7696\\u60cb\\u5b9b\\u5a49\\u4e07\\u8155\\u525c\\u8284\\u82cb\\u83c0\\u7ea8\\u7efe\\u742c\\u8118\\u7579\\u873f\\u7ba2\",\"wang\":\"\\u6c6a\\u738b\\u4ea1\\u6789\\u7f51\\u5f80\\u65fa\\u671b\\u5fd8\\u5984\\u7f54\\u5c22\\u60d8\\u8f8b\\u9b4d\",\"wei\":\"\\u5a01\\u5dcd\\u5fae\\u5371\\u97e6\\u8fdd\\u6845\\u56f4\\u552f\\u60df\\u4e3a\\u6f4d\\u7ef4\\u82c7\\u840e\\u59d4\\u4f1f\\u4f2a\\u5c3e\\u7eac\\u672a\\u851a\\u5473\\u754f\\u80c3\\u5582\\u9b4f\\u4f4d\\u6e2d\\u8c13\\u5c09\\u6170\\u536b\\u502d\\u504e\\u8bff\\u9688\\u8473\\u8587\\u5e0f\\u5e37\\u5d34\\u5d6c\\u7325\\u732c\\u95f1\\u6ca9\\u6d27\\u6da0\\u9036\\u5a13\\u73ae\\u97ea\\u8ece\\u709c\\u7168\\u71a8\\u75ff\\u8249\\u9c94\",\"wen\":\"\\u761f\\u6e29\\u868a\\u6587\\u95fb\\u7eb9\\u543b\\u7a33\\u7d0a\\u95ee\\u520e\\u6120\\u960c\\u6c76\\u74ba\\u97eb\\u6b81\\u96ef\",\"weng\":\"\\u55e1\\u7fc1\\u74ee\\u84ca\\u8579\",\"wo\":\"\\u631d\\u8717\\u6da1\\u7a9d\\u6211\\u65a1\\u5367\\u63e1\\u6c83\\u83b4\\u5e44\\u6e25\\u674c\\u809f\\u9f8c\",\"wu\":\"\\u5deb\\u545c\\u94a8\\u4e4c\\u6c61\\u8bec\\u5c4b\\u65e0\\u829c\\u68a7\\u543e\\u5434\\u6bcb\\u6b66\\u4e94\\u6342\\u5348\\u821e\\u4f0d\\u4fae\\u575e\\u620a\\u96fe\\u6664\\u7269\\u52ff\\u52a1\\u609f\\u8bef\\u5140\\u4ef5\\u9622\\u90ac\\u572c\\u82b4\\u5e91\\u6003\\u5fe4\\u6d6f\\u5be4\\u8fd5\\u59a9\\u9a9b\\u727e\\u7110\\u9e49\\u9e5c\\u8708\\u92c8\\u9f2f\",\"xi\":\"\\u6614\\u7199\\u6790\\u897f\\u7852\\u77fd\\u6670\\u563b\\u5438\\u9521\\u727a\\u7a00\\u606f\\u5e0c\\u6089\\u819d\\u5915\\u60dc\\u7184\\u70ef\\u6eaa\\u6c50\\u7280\\u6a84\\u88ad\\u5e2d\\u4e60\\u5ab3\\u559c\\u94e3\\u6d17\\u7cfb\\u9699\\u620f\\u7ec6\\u50d6\\u516e\\u96b0\\u90d7\\u831c\\u8478\\u84f0\\u595a\\u550f\\u5f99\\u9969\\u960b\\u6d60\\u6dc5\\u5c63\\u5b09\\u73ba\\u6a28\\u66e6\\u89cb\\u6b37\\u71b9\\u798a\\u79a7\\u94b8\\u7699\\u7a78\\u8725\\u87cb\\u823e\\u7fb2\\u7c9e\\u7fd5\\u91af\\u9f37\",\"xia\":\"\\u778e\\u867e\\u5323\\u971e\\u8f96\\u6687\\u5ce1\\u4fa0\\u72ed\\u4e0b\\u53a6\\u590f\\u5413\\u6380\\u846d\\u55c4\\u72ce\\u9050\\u7455\\u7856\\u7615\\u7f45\\u9ee0\",\"xian\":\"\\u9528\\u5148\\u4ed9\\u9c9c\\u7ea4\\u54b8\\u8d24\\u8854\\u8237\\u95f2\\u6d8e\\u5f26\\u5acc\\u663e\\u9669\\u73b0\\u732e\\u53bf\\u817a\\u9985\\u7fa1\\u5baa\\u9677\\u9650\\u7ebf\\u51bc\\u85d3\\u5c98\\u7303\\u66b9\\u5a34\\u6c19\\u7946\\u9e47\\u75eb\\u86ac\\u7b45\\u7c7c\\u9170\\u8df9\",\"xiang\":\"\\u76f8\\u53a2\\u9576\\u9999\\u7bb1\\u8944\\u6e58\\u4e61\\u7fd4\\u7965\\u8be6\\u60f3\\u54cd\\u4eab\\u9879\\u5df7\\u6a61\\u50cf\\u5411\\u8c61\\u8297\\u8459\\u9977\\u5ea0\\u9aa7\\u7f03\\u87d3\\u9c9e\\u98e8\",\"xiao\":\"\\u8427\\u785d\\u9704\\u524a\\u54ee\\u56a3\\u9500\\u6d88\\u5bb5\\u6dc6\\u6653\\u5c0f\\u5b5d\\u6821\\u8096\\u5578\\u7b11\\u6548\\u54d3\\u54bb\\u5d24\\u6f47\\u900d\\u9a81\\u7ee1\\u67ad\\u67b5\\u7b71\\u7bab\\u9b48\",\"xie\":\"\\u6954\\u4e9b\\u6b47\\u874e\\u978b\\u534f\\u631f\\u643a\\u90aa\\u659c\\u80c1\\u8c10\\u5199\\u68b0\\u5378\\u87f9\\u61c8\\u6cc4\\u6cfb\\u8c22\\u5c51\\u5055\\u4eb5\\u52f0\\u71ee\\u85a4\\u64b7\\u5ee8\\u7023\\u9082\\u7ec1\\u7f2c\\u69ad\\u698d\\u6b59\\u8e9e\",\"xin\":\"\\u85aa\\u82af\\u950c\\u6b23\\u8f9b\\u65b0\\u5ffb\\u5fc3\\u4fe1\\u8845\\u56df\\u99a8\\u8398\\u6b46\\u94fd\\u946b\",\"xing\":\"\\u661f\\u8165\\u7329\\u60fa\\u5174\\u5211\\u578b\\u5f62\\u90a2\\u884c\\u9192\\u5e78\\u674f\\u6027\\u59d3\\u9649\\u8347\\u8365\\u64e4\\u60bb\\u784e\",\"xiong\":\"\\u5144\\u51f6\\u80f8\\u5308\\u6c79\\u96c4\\u718a\\u828e\",\"xiu\":\"\\u4f11\\u4fee\\u7f9e\\u673d\\u55c5\\u9508\\u79c0\\u8896\\u7ee3\\u83a0\\u5cab\\u9990\\u5ea5\\u9e3a\\u8c85\\u9af9\",\"xu\":\"\\u589f\\u620c\\u9700\\u865a\\u5618\\u987b\\u5f90\\u8bb8\\u84c4\\u9157\\u53d9\\u65ed\\u5e8f\\u755c\\u6064\\u7d6e\\u5a7f\\u7eea\\u7eed\\u8bb4\\u8be9\\u5729\\u84ff\\u6035\\u6d2b\\u6e86\\u987c\\u6829\\u7166\\u7809\\u76f1\\u80e5\\u7cc8\\u9191\",\"xuan\":\"\\u8f69\\u55a7\\u5ba3\\u60ac\\u65cb\\u7384\\u9009\\u7663\\u7729\\u7eda\\u5107\\u8c16\\u8431\\u63ce\\u9994\\u6ceb\\u6d35\\u6e32\\u6f29\\u7487\\u6966\\u6684\\u70ab\\u714a\\u78b9\\u94c9\\u955f\\u75c3\",\"xue\":\"\\u9774\\u859b\\u5b66\\u7a74\\u96ea\\u8840\\u5671\\u6cf6\\u9cd5\",\"xun\":\"\\u52cb\\u718f\\u5faa\\u65ec\\u8be2\\u5bfb\\u9a6f\\u5de1\\u6b89\\u6c5b\\u8bad\\u8baf\\u900a\\u8fc5\\u5dfd\\u57d9\\u8340\\u85b0\\u5ccb\\u5f87\\u6d54\\u66db\\u7aa8\\u91ba\\u9c9f\",\"ya\":\"\\u538b\\u62bc\\u9e26\\u9e2d\\u5440\\u4e2b\\u82bd\\u7259\\u869c\\u5d16\\u8859\\u6daf\\u96c5\\u54d1\\u4e9a\\u8bb6\\u4f22\\u63e0\\u5416\\u5c88\\u8fd3\\u5a05\\u740a\\u6860\\u6c29\\u7811\\u775a\\u75d6\",\"yan\":\"\\u7109\\u54bd\\u9609\\u70df\\u6df9\\u76d0\\u4e25\\u7814\\u8712\\u5ca9\\u5ef6\\u8a00\\u989c\\u960e\\u708e\\u6cbf\\u5944\\u63a9\\u773c\\u884d\\u6f14\\u8273\\u5830\\u71d5\\u538c\\u781a\\u96c1\\u5501\\u5f66\\u7130\\u5bb4\\u8c1a\\u9a8c\\u53a3\\u9765\\u8d5d\\u4fe8\\u5043\\u5156\\u8ba0\\u8c33\\u90fe\\u9122\\u82ab\\u83f8\\u5d26\\u6079\\u95eb\\u960f\\u6d07\\u6e6e\\u6edf\\u598d\\u5ae3\\u7430\\u664f\\u80ed\\u814c\\u7131\\u7f68\\u7b75\\u917d\\u9b47\\u990d\\u9f39\",\"yang\":\"\\u6b83\\u592e\\u9e2f\\u79e7\\u6768\\u626c\\u4f6f\\u75a1\\u7f8a\\u6d0b\\u9633\\u6c27\\u4ef0\\u75d2\\u517b\\u6837\\u6f3e\\u5f89\\u600f\\u6cf1\\u7080\\u70ca\\u6059\\u86d8\\u9785\",\"yao\":\"\\u9080\\u8170\\u5996\\u7476\\u6447\\u5c27\\u9065\\u7a91\\u8c23\\u59da\\u54ac\\u8200\\u836f\\u8981\\u8000\\u592d\\u723b\\u5406\\u5d3e\\u5fad\\u7039\\u5e7a\\u73e7\\u6773\\u66dc\\u80b4\\u9e5e\\u7a88\\u7e47\\u9cd0\",\"ye\":\"\\u6930\\u564e\\u8036\\u7237\\u91ce\\u51b6\\u4e5f\\u9875\\u6396\\u4e1a\\u53f6\\u66f3\\u814b\\u591c\\u6db2\\u8c12\\u90ba\\u63f6\\u9980\\u6654\\u70e8\\u94d8\",\"yi\":\"\\u4e00\\u58f9\\u533b\\u63d6\\u94f1\\u4f9d\\u4f0a\\u8863\\u9890\\u5937\\u9057\\u79fb\\u4eea\\u80f0\\u7591\\u6c82\\u5b9c\\u59e8\\u5f5d\\u6905\\u8681\\u501a\\u5df2\\u4e59\\u77e3\\u4ee5\\u827a\\u6291\\u6613\\u9091\\u5c79\\u4ebf\\u5f79\\u81c6\\u9038\\u8084\\u75ab\\u4ea6\\u88d4\\u610f\\u6bc5\\u5fc6\\u4e49\\u76ca\\u6ea2\\u8be3\\u8bae\\u8c0a\\u8bd1\\u5f02\\u7ffc\\u7fcc\\u7ece\\u5208\\u5293\\u4f7e\\u8bd2\\u572a\\u572f\\u57f8\\u61ff\\u82e1\\u858f\\u5f08\\u5955\\u6339\\u5f0b\\u5453\\u54a6\\u54bf\\u566b\\u5cc4\\u5db7\\u7317\\u9974\\u603f\\u6021\\u6092\\u6f2a\\u8fe4\\u9a7f\\u7f22\\u6baa\\u8d3b\\u65d6\\u71a0\\u9487\\u9552\\u9571\\u75cd\\u7617\\u7654\\u7fca\\u8864\\u8734\\u8223\\u7fbf\\u7ff3\\u914f\\u9edf\",\"yin\":\"\\u8335\\u836b\\u56e0\\u6bb7\\u97f3\\u9634\\u59fb\\u541f\\u94f6\\u6deb\\u5bc5\\u996e\\u5c39\\u5f15\\u9690\\u5370\\u80e4\\u911e\\u5819\\u831a\\u5591\\u72fa\\u5924\\u6c24\\u94df\\u763e\\u8693\\u972a\\u9f88\",\"ying\":\"\\u82f1\\u6a31\\u5a74\\u9e70\\u5e94\\u7f28\\u83b9\\u8424\\u8425\\u8367\\u8747\\u8fce\\u8d62\\u76c8\\u5f71\\u9896\\u786c\\u6620\\u5b34\\u90e2\\u8314\\u83ba\\u8426\\u6484\\u5624\\u81ba\\u6ee2\\u6f46\\u701b\\u745b\\u748e\\u6979\\u9e66\\u763f\\u988d\\u7f42\",\"yo\":\"\\u54df\\u5537\",\"yong\":\"\\u62e5\\u4f63\\u81c3\\u75c8\\u5eb8\\u96cd\\u8e0a\\u86f9\\u548f\\u6cf3\\u6d8c\\u6c38\\u607f\\u52c7\\u7528\\u4fd1\\u58c5\\u5889\\u6175\\u9095\\u955b\\u752c\\u9cd9\\u9954\",\"you\":\"\\u5e7d\\u4f18\\u60a0\\u5fe7\\u5c24\\u7531\\u90ae\\u94c0\\u72b9\\u6cb9\\u6e38\\u9149\\u6709\\u53cb\\u53f3\\u4f51\\u91c9\\u8bf1\\u53c8\\u5e7c\\u5363\\u6538\\u4f91\\u83b8\\u5466\\u56ff\\u5ba5\\u67da\\u7337\\u7256\\u94d5\\u75a3\\u8763\\u9c7f\\u9edd\\u9f2c\",\"yu\":\"\\u8fc2\\u6de4\\u4e8e\\u76c2\\u6986\\u865e\\u611a\\u8206\\u4f59\\u4fde\\u903e\\u9c7c\\u6109\\u6e1d\\u6e14\\u9685\\u4e88\\u5a31\\u96e8\\u4e0e\\u5c7f\\u79b9\\u5b87\\u8bed\\u7fbd\\u7389\\u57df\\u828b\\u90c1\\u5401\\u9047\\u55bb\\u5cea\\u5fa1\\u6108\\u6b32\\u72f1\\u80b2\\u8a89\\u6d74\\u5bd3\\u88d5\\u9884\\u8c6b\\u9a6d\\u79ba\\u6bd3\\u4f1b\\u4fe3\\u8c00\\u8c15\\u8438\\u84e3\\u63c4\\u5581\\u5704\\u5709\\u5d5b\\u72f3\\u996b\\u5ebe\\u9608\\u59aa\\u59a4\\u7ea1\\u745c\\u6631\\u89ce\\u8174\\u6b24\\u65bc\\u715c\\u71e0\\u807f\\u94b0\\u9e46\\u7610\\u7600\\u7ab3\\u8753\\u7afd\\u8201\\u96e9\\u9f89\",\"yuan\":\"\\u9e33\\u6e0a\\u51a4\\u5143\\u57a3\\u8881\\u539f\\u63f4\\u8f95\\u56ed\\u5458\\u5706\\u733f\\u6e90\\u7f18\\u8fdc\\u82d1\\u613f\\u6028\\u9662\\u586c\\u6c85\\u5a9b\\u7457\\u6a7c\\u7230\\u7722\\u9e22\\u8788\\u9f0b\",\"yue\":\"\\u66f0\\u7ea6\\u8d8a\\u8dc3\\u94a5\\u5cb3\\u7ca4\\u6708\\u60a6\\u9605\\u9fa0\\u6a3e\\u5216\\u94ba\",\"yun\":\"\\u8018\\u4e91\\u90e7\\u5300\\u9668\\u5141\\u8fd0\\u8574\\u915d\\u6655\\u97f5\\u5b55\\u90d3\\u82b8\\u72c1\\u607d\\u7ead\\u6b92\\u6600\\u6c32\",\"za\":\"\\u531d\\u7838\\u6742\\u62f6\\u5482\",\"zai\":\"\\u683d\\u54c9\\u707e\\u5bb0\\u8f7d\\u518d\\u5728\\u54b1\\u5d3d\\u753e\",\"zan\":\"\\u6512\\u6682\\u8d5e\\u74d2\\u661d\\u7c2a\\u7ccc\\u8db1\\u933e\",\"zang\":\"\\u8d43\\u810f\\u846c\\u5958\\u6215\\u81e7\",\"zao\":\"\\u906d\\u7cdf\\u51ff\\u85fb\\u67a3\\u65e9\\u6fa1\\u86a4\\u8e81\\u566a\\u9020\\u7682\\u7076\\u71e5\\u5523\\u7f2b\",\"ze\":\"\\u8d23\\u62e9\\u5219\\u6cfd\\u4ec4\\u8d5c\\u5567\\u8fee\\u6603\\u7b2e\\u7ba6\\u8234\",\"zei\":\"\\u8d3c\",\"zen\":\"\\u600e\\u8c2e\",\"zeng\":\"\\u589e\\u618e\\u66fe\\u8d60\\u7f2f\\u7511\\u7f7e\\u9503\",\"zha\":\"\\u624e\\u55b3\\u6e23\\u672d\\u8f67\\u94e1\\u95f8\\u7728\\u6805\\u69a8\\u548b\\u4e4d\\u70b8\\u8bc8\\u63f8\\u5412\\u54a4\\u54f3\\u600d\\u781f\\u75c4\\u86b1\\u9f44\",\"zhai\":\"\\u6458\\u658b\\u5b85\\u7a84\\u503a\\u5be8\\u7826\",\"zhan\":\"\\u77bb\\u6be1\\u8a79\\u7c98\\u6cbe\\u76cf\\u65a9\\u8f97\\u5d2d\\u5c55\\u8638\\u6808\\u5360\\u6218\\u7ad9\\u6e5b\\u7efd\\u8c35\\u640c\\u65c3\",\"zhang\":\"\\u6a1f\\u7ae0\\u5f70\\u6f33\\u5f20\\u638c\\u6da8\\u6756\\u4e08\\u5e10\\u8d26\\u4ed7\\u80c0\\u7634\\u969c\\u4ec9\\u9123\\u5e5b\\u5d82\\u7350\\u5adc\\u748b\\u87d1\",\"zhao\":\"\\u62db\\u662d\\u627e\\u6cbc\\u8d75\\u7167\\u7f69\\u5146\\u8087\\u53ec\\u722a\\u8bcf\\u68f9\\u948a\\u7b0a\",\"zhe\":\"\\u906e\\u6298\\u54f2\\u86f0\\u8f99\\u8005\\u9517\\u8517\\u8fd9\\u6d59\\u8c2a\\u966c\\u67d8\\u8f84\\u78d4\\u9e67\\u891a\\u8707\\u8d6d\",\"zhen\":\"\\u73cd\\u659f\\u771f\\u7504\\u7827\\u81fb\\u8d1e\\u9488\\u4fa6\\u6795\\u75b9\\u8bca\\u9707\\u632f\\u9547\\u9635\\u7f1c\\u6862\\u699b\\u8f78\\u8d48\\u80d7\\u6715\\u796f\\u755b\\u9e29\",\"zheng\":\"\\u84b8\\u6323\\u7741\\u5f81\\u72f0\\u4e89\\u6014\\u6574\\u62ef\\u6b63\\u653f\\u5e27\\u75c7\\u90d1\\u8bc1\\u8be4\\u5ce5\\u94b2\\u94ee\\u7b5d\",\"zhi\":\"\\u829d\\u679d\\u652f\\u5431\\u8718\\u77e5\\u80a2\\u8102\\u6c41\\u4e4b\\u7ec7\\u804c\\u76f4\\u690d\\u6b96\\u6267\\u503c\\u4f84\\u5740\\u6307\\u6b62\\u8dbe\\u53ea\\u65e8\\u7eb8\\u5fd7\\u631a\\u63b7\\u81f3\\u81f4\\u7f6e\\u5e1c\\u5cd9\\u5236\\u667a\\u79e9\\u7a1a\\u8d28\\u7099\\u75d4\\u6ede\\u6cbb\\u7a92\\u536e\\u965f\\u90c5\\u57f4\\u82b7\\u646d\\u5e19\\u5fee\\u5f58\\u54ab\\u9a98\\u6809\\u67b3\\u6800\\u684e\\u8f75\\u8f7e\\u6534\\u8d3d\\u81a3\\u7949\\u7957\\u9ef9\\u96c9\\u9e37\\u75e3\\u86ed\\u7d77\\u916f\\u8dd6\\u8e2c\\u8e2f\\u8c78\\u89ef\",\"zhong\":\"\\u4e2d\\u76c5\\u5fe0\\u949f\\u8877\\u7ec8\\u79cd\\u80bf\\u91cd\\u4ef2\\u4f17\\u51a2\\u953a\\u87bd\\u8202\\u822f\\u8e35\",\"zhou\":\"\\u821f\\u5468\\u5dde\\u6d32\\u8bcc\\u7ca5\\u8f74\\u8098\\u5e1a\\u5492\\u76b1\\u5b99\\u663c\\u9aa4\\u5544\\u7740\\u501c\\u8bf9\\u836e\\u9b3b\\u7ea3\\u80c4\\u78a1\\u7c40\\u8233\\u914e\\u9cb7\",\"zhu\":\"\\u73e0\\u682a\\u86db\\u6731\\u732a\\u8bf8\\u8bdb\\u9010\\u7af9\\u70db\\u716e\\u62c4\\u77a9\\u5631\\u4e3b\\u8457\\u67f1\\u52a9\\u86c0\\u8d2e\\u94f8\\u7b51\\u4f4f\\u6ce8\\u795d\\u9a7b\\u4f2b\\u4f8f\\u90be\\u82ce\\u8331\\u6d19\\u6e1a\\u6f74\\u9a7a\\u677c\\u69e0\\u6a65\\u70b7\\u94e2\\u75b0\\u7603\\u86b0\\u7afa\\u7bb8\\u7fe5\\u8e85\\u9e88\",\"zhua\":\"\\u6293\",\"zhuai\":\"\\u62fd\",\"zhuan\":\"\\u4e13\\u7816\\u8f6c\\u64b0\\u8d5a\\u7bc6\\u629f\\u556d\\u989b\",\"zhuang\":\"\\u6869\\u5e84\\u88c5\\u5986\\u649e\\u58ee\\u72b6\\u4e2c\",\"zhui\":\"\\u690e\\u9525\\u8ffd\\u8d58\\u5760\\u7f00\\u8411\\u9a93\\u7f12\",\"zhun\":\"\\u8c06\\u51c6\",\"zhuo\":\"\\u6349\\u62d9\\u5353\\u684c\\u7422\\u8301\\u914c\\u707c\\u6d4a\\u502c\\u8bfc\\u5ef4\\u855e\\u64e2\\u555c\\u6d5e\\u6dbf\\u6753\\u712f\\u799a\\u65ab\",\"zi\":\"\\u5179\\u54a8\\u8d44\\u59ff\\u6ecb\\u6dc4\\u5b5c\\u7d2b\\u4ed4\\u7c7d\\u6ed3\\u5b50\\u81ea\\u6e0d\\u5b57\\u8c18\\u5d6b\\u59ca\\u5b73\\u7f01\\u6893\\u8f8e\\u8d40\\u6063\\u7726\\u9531\\u79ed\\u8014\\u7b2b\\u7ca2\\u89dc\\u8a3e\\u9cbb\\u9aed\",\"zong\":\"\\u9b03\\u68d5\\u8e2a\\u5b97\\u7efc\\u603b\\u7eb5\\u8159\\u7cbd\",\"zou\":\"\\u90b9\\u8d70\\u594f\\u63cd\\u9139\\u9cb0\",\"zu\":\"\\u79df\\u8db3\\u5352\\u65cf\\u7956\\u8bc5\\u963b\\u7ec4\\u4fce\\u83f9\\u5550\\u5f82\\u9a75\\u8e74\",\"zuan\":\"\\u94bb\\u7e82\\u6525\\u7f35\",\"zui\":\"\\u5634\\u9189\\u6700\\u7f6a\",\"zun\":\"\\u5c0a\\u9075\\u6499\\u6a3d\\u9cdf\",\"zuo\":\"\\u6628\\u5de6\\u4f50\\u67de\\u505a\\u4f5c\\u5750\\u5ea7\\u961d\\u963c\\u80d9\\u795a\\u9162\",\"cou\":\"\\u85ae\\u6971\\u8f8f\\u8160\",\"nang\":\"\\u652e\\u54dd\\u56d4\\u9995\\u66e9\",\"o\":\"\\u5594\",\"dia\":\"\\u55f2\",\"chuai\":\"\\u562c\\u81aa\\u8e39\",\"cen\":\"\\u5c91\\u6d94\",\"diu\":\"\\u94e5\",\"nou\":\"\\u8028\",\"fou\":\"\\u7f36\",\"bia\":\"\\u9adf\"};\r\n\t/**\r\n\t * 单个汉字拼音转换\r\n\t * @param ch{String}拼音字符串\r\n\t * @return {String}转换后的串\r\n\t */\r\n\tfunction pinyinSearch(ch,convert){\r\n\t\tfor (var name in PinYin){\r\n\t\t\tif (PinYin[name].indexOf(ch) < 0) {\r\n\t\t\t\tcontinue;\r\n\t\t\t}\r\n\t\t\tif(convert)\r\n\t\t\t\treturn convert(name);\r\n\t\t\treturn name;\r\n\t\t}\r\n\t\treturn false;\r\n\t}\r\n\t\r\n\t/**\r\n\t * 获取拼音首字母\r\n\t * @param ch{String}拼音字符串\r\n\t * @return {String}拼音首字母\r\n\t */\r\n\tfunction getCapitalized(ch){\r\n\t\tvar first = ch.substr(0,1).toUpperCase();\r\n\t\tvar spare = ch.substr(1,ch.length);\r\n\t\treturn first + spare;\r\n\t}\r\n\t\r\n\t/**\r\n\t * 获取拼音首字母\r\n\t * @param ch{String}拼音字符串\r\n\t * @return {String}拼音首字母\r\n\t */\r\n\tfunction getInitials(ch){\r\n\t\treturn ch.substr(0,1).toUpperCase();\r\n\t}\r\n\t\r\n\t/**\r\n\t * 获取拼音首字母\r\n\t * @param ch{String}拼音字符串\r\n\t * @return {String}拼音首字母\r\n\t */\r\n\tfunction getUapperInitials(ch){\r\n\t\treturn ch.substr(0,1).toUpperCase();\r\n\t}\r\n\t/**\r\n\t * 将汉字转换为拼音\r\n\t * @param chStr{String}汉字串\r\n\t * @param convert{function} 转换策略\r\n\t * @return {String}拼音首字母\r\n\t */\r\n\tfunction chinese2Pinyin(chStr,convert){\r\n\t\tvar len = chStr.length;\r\n\t\tvar rs = \"\";\r\n\t\tvar reg = new RegExp('[a-zA-Z0-9\\- ]');\r\n\t\tfor (var i=0;i<len;i++) {\r\n\t\t\tvar val = chStr.charAt(i);\r\n\t\t\tvar name = pinyinSearch(val,convert);\r\n\t\t\tif(reg.test(val)) {\r\n\t\t\t\trs += val;\r\n\t\t\t} else if (name!==false) {\r\n\t\t\t\trs += name;\r\n\t\t\t}\r\n\t\t\t\r\n\t\t}\r\n\t\trs = rs.replace(/ /g,'-');\r\n\t\twhile (rs.indexOf('--')>0) {\r\n\t\t\trs = rs.replace('--','-');\r\n\t\t}\r\n\t\treturn rs;\r\n\t}\r\n\treturn {\r\n\t\t/**\r\n\t\t * 获取汉字拼音首字母串\r\n\t\t * @param ch{String}拼音字符串\r\n\t\t * @return {String}拼音首字母串\r\n\t\t */\r\n\t\ttoInitials:function(chStr) {\r\n\t\t\treturn chinese2Pinyin(chStr,getInitials);\r\n\t\t},\r\n\t\t/**\r\n\t\t * 获取汉字拼音大写首字母串\r\n\t\t * @param ch{String}拼音字符串\r\n\t\t * @return {String}大写的拼音首字母串\r\n\t\t */\r\n\t\ttoUpperInitials:function(chStr) {\r\n\t\t\treturn chinese2Pinyin(chStr,getUapperInitials);\r\n\t\t},\r\n\t\t\r\n\t\t/**\r\n\t\t * 获取汉字拼音串\r\n\t\t * @param ch{String}拼音字符串\r\n\t\t * @return {String}汉字拼音串\r\n\t\t */\r\n\t\ttoPinyin:function(chStr) {\r\n\t\t\treturn chinese2Pinyin(chStr);\r\n\t\t},\r\n\t\t/**\r\n\t\t * 获取汉字首字母大写的拼音串\r\n\t\t * @param ch{String}拼音字符串\r\n\t\t * @return {String}首字母大写的拼音串\r\n\t\t */\r\n\t\ttoCapPinyin:function(chStr) {\r\n\t\t\treturn chinese2Pinyin(chStr);\r\n\t\t}\r\n\t}\r\n});\r\n\t\r\n\r\n\t\r\n\r\n\n",
    "define('app/core/app-class',[],function() {\r\n\r\n    // Class\r\n    // -----------------\r\n    // Thanks to:\r\n    //  - http://mootools.net/docs/core/Class/Class\r\n    //  - http://ejohn.org/blog/simple-javascript-inheritance/\r\n    //  - https://github.com/ded/klass\r\n    //  - http://documentcloud.github.com/backbone/#Model-extend\r\n    //  - https://github.com/joyent/node/blob/master/lib/util.js\r\n    //  - https://github.com/kissyteam/kissy/blob/master/src/seed/src/kissy.js\r\n    // The base Class implementation.\r\n    /**\r\n     *\r\n     * @class\r\n     * @name Class\r\n     * @classdesc 提供简洁的 OO 实现\r\n     */\r\n    function Class(o) {\r\n        // Convert existed function to Class.\r\n        if (!(this instanceof Class) && isFunction(o)) {\r\n            return classify(o);\r\n        }\r\n    }\r\n    /**\r\n     * 创建类对象方法\r\n     * @function create\r\n     * @memberof Class\r\n     * @static\r\n     * @example 创建一个类\r\n     * // Create a new Class.\r\n     * //\r\n     * //    var SuperPig = Class.create({\r\n     * //        Extends: Animal,//继承类\r\n     * //        Implements: Flyable,//实现了,相当于SuperPig拥有了Flyable的所有方法\r\n     * //        initialize: function() {//初始化方法\r\n     * //            SuperPig.superclass.initialize.apply(this, arguments);\r\n     * //        },\r\n     * //        Statics: {\r\n     * //            COLOR: 'red'\r\n     * //        }\r\n     * //    });\r\n     * //\r\n     * @param parent 父类\r\n     * @param properties 方法对象\r\n     * @returns {*}\r\n     */\r\n    Class.create = function(parent, properties) {\r\n        if (!isFunction(parent)) {\r\n            properties = parent;\r\n            parent = null;\r\n        }\r\n\r\n        properties || (properties = {});\r\n        parent || (parent = properties.Extends || Class);\r\n        properties.Extends = parent;\r\n\r\n        // The created class constructor\r\n        function SubClass() {\r\n            // Call the parent constructor.\r\n            parent.apply(this, arguments);\r\n\r\n            // Only call initialize in self constructor.\r\n            if (this.constructor === SubClass && this.initialize) {\r\n                this.initialize.apply(this, arguments);\r\n            }\r\n        }\r\n\r\n        // Inherit class (static) properties from parent.\r\n        if (parent !== Class) {\r\n            mix(SubClass, parent);\r\n        }\r\n\r\n        // Add instance properties to the subclass.\r\n        implement.call(SubClass, properties);\r\n\r\n        // Make subclass extendable.\r\n        return classify(SubClass);\r\n    };\r\n\r\n\r\n    function implement(properties) {\r\n        var key, value;\r\n\r\n        for (key in properties) {\r\n            value = properties[key];\r\n\r\n            if (Class.Mutators.hasOwnProperty(key)) {\r\n                Class.Mutators[key].call(this, value);\r\n            } else {\r\n                this.prototype[key] = value;\r\n            }\r\n        }\r\n    }\r\n\r\n\r\n\r\n    /**\r\n     * 由 Class.create 创建的类，自动具有 extend 方法，功能与 Class.create 完全一样，只是继承的父类是 SomeClass 自身，前面的例子中已说明，不赘述\r\n     * @memberof Class\r\n     * @example 创建一个类\r\n     *\r\n     *\r\n     * //function Animal() {\r\n     *  // }\r\n     * // Animal.prototype.talk = function() {};\r\n     * //var Dog = Class(Animal).extend({\r\n     *  //swim: function() {}\r\n     *  // });\r\n     * // Create a sub Class based on `Class`.\r\n     * //\r\n     * @param properties 方法对象\r\n     * @returns {*}\r\n     */\r\n    Class.extend = function(properties) {\r\n        properties || (properties = {});\r\n        properties.Extends = this;\r\n\r\n        return Class.create(properties);\r\n    };\r\n\r\n\r\n    function classify(cls) {\r\n        cls.extend = Class.extend;\r\n        cls.implement = implement;\r\n        return cls;\r\n    }\r\n\r\n\r\n    // Mutators define special properties.\r\n    Class.Mutators = {\r\n        'Extends': function(parent) {\r\n            var existed = this.prototype;\r\n            var proto = createProto(parent.prototype);\r\n\r\n            // Keep existed properties.\r\n            mix(proto, existed);\r\n\r\n            // Enforce the constructor to be what we expect.\r\n            proto.constructor = this;\r\n\r\n            // Set the prototype chain to inherit from `parent`.\r\n            this.prototype = proto;\r\n\r\n            // Set a convenience property in case the parent's prototype is\r\n            // needed later.\r\n            this.superclass = parent.prototype;\r\n        },\r\n\r\n        'Implements': function(items) {\r\n            isArray(items) || (items = [items]);\r\n            var proto = this.prototype, item;\r\n\r\n            while (item = items.shift()) {\r\n                mix(proto, item.prototype || item);\r\n            }\r\n        },\r\n\r\n        'Statics': function(staticProperties) {\r\n            mix(this, staticProperties);\r\n        }\r\n    };\r\n\r\n\r\n    // Shared empty constructor function to aid in prototype-chain creation.\r\n    function Ctor() {\r\n    }\r\n\r\n    // See: http://jsperf.com/object-create-vs-new-ctor\r\n    var createProto = Object.__proto__ ?\r\n            function(proto) {\r\n                return { __proto__: proto };\r\n            } :\r\n            function(proto) {\r\n                Ctor.prototype = proto;\r\n                return new Ctor();\r\n            };\r\n\r\n\r\n    // Helpers\r\n    // ------------\r\n\r\n    function mix(r, s) {\r\n        // Copy \"all\" properties including inherited ones.\r\n        for (var p in s) {\r\n            // 在 iPhone 1 代等设备的 Safari 中，prototype 也会被枚举出来，需排除掉。\r\n            if (p === 'prototype') continue;\r\n            r[p] = s[p];\r\n        }\r\n    }\r\n\r\n\r\n    var toString = Object.prototype.toString;\r\n    var isArray = Array.isArray;\r\n\r\n    if (!isArray) {\r\n        isArray = function(val) {\r\n            return toString.call(val) === '[object Array]';\r\n        };\r\n    }\r\n\r\n    var isFunction = function(val) {\r\n        return toString.call(val) === '[object Function]';\r\n    };\r\n\r\n\r\n    return Class;\r\n});\r\n\n",
    "define('app/core/app-attribute',['require','exports','module'],function(require, exports) {\r\n\r\n    // Attribute\r\n    // -----------------\r\n    // Thanks to:\r\n    //  - http://documentcloud.github.com/backbone/#Model\r\n    //  - http://yuilibrary.com/yui/docs/api/classes/AttributeCore.html\r\n    //  - https://github.com/berzniz/backbone.getters.setters\r\n\r\n\tvar Attribute={};\r\n\r\n    // 负责 attributes 的初始化\r\n    // attributes 是与实例相关的状态信息，可读可写，发生变化时，会自动触发相关事件\r\n    Attribute.initAttrs = function(config) {\r\n        var specialProps = this.propsInAttrs || [];\r\n\r\n        // Get all inherited attributes.\r\n        var attrs = getInheritedAttrs(this, specialProps);\r\n\r\n        // Merge user-specific attributes from config.\r\n        if (config) {\r\n            merge(attrs, normalize(config));\r\n        }\r\n\r\n        // Automatically register `_onChangeX` method as 'change:x' handler.\r\n        for (key in attrs) {\r\n            if (attrs.hasOwnProperty(key)) {\r\n                var eventKey = getChangeEventKey(key);\r\n                if (this[eventKey]) {\r\n                    this.on('change:' + key, this[eventKey]);\r\n                }\r\n            }\r\n        }\r\n\r\n        // Convert `on/before/afterXxx` config to event handler.\r\n        parseEventsFromAttrs(this, attrs);\r\n\r\n        // initAttrs 是在初始化时调用的，默认情况下实例上肯定没有 attrs，不存在覆盖问题\r\n        this.attrs = attrs;\r\n\r\n        // 让属性的初始值生效\r\n        for (var key in attrs) {\r\n            if (!attrs.hasOwnProperty(key)) continue;\r\n            var attr = attrs[key];\r\n\r\n            // 在 set 里，有可能调用到 getter / setter 方法，在这两个方法里，很可能\r\n            // 会引用尚未初始化的变量，比如 this.element. 这时采取忽略就好。因为这种\r\n            // 情况下的属性，一般并不需要初始化。\r\n            try {\r\n\r\n                // 如果同时有 value 和 setter，先要调用一下 setter，以保证\r\n                // 关联属性的值正确。比如只有纯 setter / getter 的 xy 属性。\r\n                if (attr.hasOwnProperty('value') && attr.setter) {\r\n                    attr.setter.call(this, attr.value, key);\r\n                }\r\n\r\n                // 设置之，如果有改变，则触发事件\r\n                this.set(key, this.get(key));\r\n            }\r\n            catch (ex) {\r\n                // 虽然可忽略，但还是尽可能让开发者知晓\r\n                if (window.console) {\r\n                    console.log('A caught exception occurs: ' + ex);\r\n                }\r\n            }\r\n        }\r\n\r\n        // 将 this.attrs 上的 special properties 放回 this 上\r\n        copySpecialProps(specialProps, this, this.attrs, true);\r\n    };\r\n\r\n\r\n    // Get the value of an attribute.\r\n    Attribute.get = function(key) {\r\n        var attr = this.attrs[key] || {};\r\n        var val = attr.value;\r\n        return attr.getter ? attr.getter.call(this, val, key) : val;\r\n    };\r\n\r\n\r\n    // Set a hash of model attributes on the object, firing `\"change\"` unless\r\n    // you choose to silence it.\r\n    Attribute.set = function(key, val, options) {\r\n        var attrs = {};\r\n\r\n        // set(\"key\", val, options)\r\n        if (isString(key)) {\r\n            attrs[key] = val;\r\n        }\r\n        // set({ \"key\": val, \"key2\": val2 }, options)\r\n        else {\r\n            attrs = key;\r\n            options = val;\r\n        }\r\n\r\n        options || (options = {});\r\n\r\n        // ready 表示组件的初始状态是否已 OK\r\n        // 在 ready 之前，所有属性的设置操作都是静默的\r\n        var ready = this.__ready;\r\n        var silent = ready ? options.silent : true;\r\n\r\n        var now = this.attrs;\r\n        var changed = this.__changedAttrs || (this.__changedAttrs = {});\r\n\r\n        for (key in attrs) {\r\n            if (!attrs.hasOwnProperty(key)) continue;\r\n\r\n            var attr = now[key] || (now[key] = {});\r\n            val = attrs[key];\r\n\r\n            if (attr.readOnly) {\r\n                throw 'This attribute is readOnly: ' + key;\r\n            }\r\n\r\n            // invoke validator\r\n            if (attr.validator) {\r\n                var ex = attr.validator.call(this, val, key);\r\n                if (ex !== true) {\r\n                    if (options.error) {\r\n                        options.error.call(this, ex);\r\n                    }\r\n                    continue;\r\n                }\r\n            }\r\n\r\n            // invoke setter\r\n            if (attr.setter) {\r\n                val = attr.setter.call(this, val, key);\r\n            }\r\n\r\n            // 获取设置前的 prev 值\r\n            // ready 之前，实例上属性的 prev 值都未定义\r\n            var prev = ready ? this.get(key) : null;\r\n\r\n            // 获取需要设置的 val 值\r\n            // 都为对象时，做 merge 操作，以保留 prev 上没有覆盖的值\r\n            if (isPlainObject(prev) && isPlainObject(val)) {\r\n                val = merge(merge({}, prev), val);\r\n            }\r\n\r\n            // set finally\r\n            now[key].value = val;\r\n\r\n            // invoke change event\r\n            if (!isEqual(prev, val)) {\r\n                if (silent) {\r\n                    changed[key] = [val, prev];\r\n                }\r\n                else {\r\n                    this.trigger('change:' + key, val, prev, key);\r\n                }\r\n            }\r\n        }\r\n\r\n        return this;\r\n    };\r\n\r\n\r\n    // Call this method to manually fire a `\"change\"` event for triggering\r\n    // a `\"change:attribute\"` event for each changed attribute.\r\n    Attribute.change = function() {\r\n        var changed = this.__changedAttrs;\r\n\r\n        if (changed) {\r\n            for (var key in changed) {\r\n                if (changed.hasOwnProperty(key)) {\r\n                    var args = changed[key];\r\n                    this.trigger('change:' + key, args[0], args[1], key);\r\n                }\r\n            }\r\n            delete this.__changedAttrs;\r\n        }\r\n\r\n        return this;\r\n    };\r\n\r\n\r\n    // Helpers\r\n    // -------\r\n\r\n    var toString = Object.prototype.toString;\r\n\r\n    var isArray = Array.isArray || function(val) {\r\n        return toString.call(val) === '[object Array]';\r\n    };\r\n\r\n    function isString(val) {\r\n        return toString.call(val) === '[object String]';\r\n    }\r\n\r\n    function isFunction(val) {\r\n        return toString.call(val) === '[object Function]';\r\n    }\r\n\r\n    function isPlainObject(o) {\r\n        return o &&\r\n            // 排除 boolean/string/number/function 等\r\n            // 标准浏览器下，排除 window 等非 JS 对象\r\n            // 注：ie8- 下，toString.call(window 等对象)  返回 '[object Object]'\r\n                toString.call(o) === '[object Object]' &&\r\n            // ie8- 下，排除 window 等非 JS 对象\r\n                ('isPrototypeOf' in o);\r\n    }\r\n\r\n    function isEmptyObject(o) {\r\n        for (var p in o) {\r\n            if (o.hasOwnProperty(p)) return false;\r\n        }\r\n        return true;\r\n    }\r\n\r\n    function merge(receiver, supplier) {\r\n        var key, value;\r\n\r\n        for (key in supplier) {\r\n            if (supplier.hasOwnProperty&&supplier.hasOwnProperty(key)) {\r\n                value = supplier[key];\r\n\r\n                // 只 clone 数组和 plain object，其他的保持不变\r\n                if (isArray(value)) {\r\n                    value = value.slice();\r\n                }\r\n                else if (isPlainObject(value)) {\r\n                    value = merge(receiver[key] || {}, value);\r\n                }\r\n\r\n                receiver[key] = value;\r\n            }\r\n        }\r\n\r\n        return receiver;\r\n    }\r\n\r\n    var keys = Object.keys;\r\n\r\n    if (!keys) {\r\n        keys = function(o) {\r\n            var result = [];\r\n\r\n            for (var name in o) {\r\n                if (o.hasOwnProperty(name)) {\r\n                    result.push(name);\r\n                }\r\n            }\r\n            return result;\r\n        }\r\n    }\r\n\r\n\r\n    var EVENT_PATTERN = /^(on|before|after)([A-Z].*)$/;\r\n    var EVENT_NAME_PATTERN = /^(Change)?([A-Z])(.*)/;\r\n\r\n    function parseEventsFromAttrs(host, attrs) {\r\n        for (var key in attrs) {\r\n            if (attrs.hasOwnProperty(key)) {\r\n                var value = attrs[key].value, m;\r\n\r\n                /*if (isFunction(value) && (m = key.match(EVENT_PATTERN))) {\r\n                    host[m[1]](getEventName(m[2]), value);\r\n                    delete attrs[key];\r\n                }*/\r\n            }\r\n        }\r\n    }\r\n\r\n    // Converts `Show` to `show` and `ChangeTitle` to `change:title`\r\n    function getEventName(name) {\r\n        var m = name.match(EVENT_NAME_PATTERN);\r\n        var ret = m[1] ? 'change:' : '';\r\n        ret += m[2].toLowerCase() + m[3];\r\n        return ret;\r\n    }\r\n\r\n\r\n    var ATTR_SPECIAL_KEYS = ['value', 'getter', 'setter',\r\n        'validator', 'readOnly'];\r\n\r\n    // normalize `attrs` to\r\n    //\r\n    //   {\r\n    //      value: 'xx',\r\n    //      getter: fn,\r\n    //      setter: fn,\r\n    //      validator: fn,\r\n    //      readOnly: boolean\r\n    //   }\r\n    //\r\n    function normalize(attrs) {\r\n        // clone it\r\n        attrs = merge({}, attrs);\r\n\r\n        for (var key in attrs) {\r\n            var attr = attrs[key];\r\n\r\n            if (isPlainObject(attr) &&\r\n                    hasOwnProperties(attr, ATTR_SPECIAL_KEYS)) {\r\n                continue;\r\n            }\r\n\r\n            attrs[key] = {\r\n                value: attr\r\n            };\r\n        }\r\n\r\n        return attrs;\r\n    }\r\n\r\n    function hasOwnProperties(object, properties) {\r\n        for (var i = 0, len = properties.length; i < len; i++) {\r\n            if (object.hasOwnProperty(properties[i])) {\r\n                return true;\r\n            }\r\n        }\r\n        return false;\r\n    }\r\n\r\n\r\n    function getChangeEventKey(key) {\r\n        return '_onChange' + key.charAt(0).toUpperCase() + key.substring(1);\r\n    }\r\n\r\n    function copySpecialProps(specialProps, receiver, supplier, isAttr) {\r\n        for (var i = 0, len = specialProps.length; i < len; i++) {\r\n            var key = specialProps[i];\r\n\r\n            if (key in supplier && supplier.hasOwnProperty(key)) {\r\n                var val = supplier[key];\r\n                receiver[key] = isAttr ? val.value : val;\r\n            }\r\n        }\r\n    }\r\n\r\n    function getInheritedAttrs(instance, specialProps) {\r\n        var inherited = [];\r\n        var proto = instance.constructor.prototype;\r\n\r\n        while (proto) {\r\n            // 不要拿到 prototype 上的\r\n            if (!proto.hasOwnProperty('attrs')) {\r\n                proto.attrs = {};\r\n            }\r\n\r\n            // 将 proto 上的特殊 properties 放到 proto.attrs 上，以便合并\r\n            copySpecialProps(specialProps, proto.attrs, proto);\r\n\r\n            // 为空时不添加\r\n            if (!isEmptyObject(proto.attrs)) {\r\n                inherited.unshift(proto.attrs);\r\n            }\r\n\r\n            // 向上回溯一级\r\n            proto = proto.constructor.superclass;\r\n        }\r\n\r\n        // Merge and clone default values to instance.\r\n        var result = {};\r\n        for (var i = 0, len = inherited.length; i < len; i++) {\r\n            result = merge(result, normalize(inherited[i]));\r\n        }\r\n\r\n        return result;\r\n    }\r\n\r\n\r\n    // 对于 attrs 的 value 来说，以下值都认为是空值： null, undefined, '', [], {}\r\n    function isEmptyAttrValue(o) {\r\n        return o == null || // null, undefined\r\n                (isString(o) || isArray(o)) && o.length === 0 || // '', []\r\n                isPlainObject(o) && isEmptyObject(o); // {}\r\n    }\r\n\r\n    // 判断属性值 a 和 b 是否相等，注意仅适用于属性值的判断，非普适的 === 或 == 判断。\r\n    function isEqual(a, b) {\r\n        if (a === b) return true;\r\n\r\n        if (isEmptyAttrValue(a) && isEmptyAttrValue(b)) return true;\r\n\r\n        // Compare `[[Class]]` names.\r\n        var className = toString.call(a);\r\n        if (className != toString.call(b)) return false;\r\n\r\n        switch (className) {\r\n\r\n            // Strings, numbers, dates, and booleans are compared by value.\r\n            case '[object String]':\r\n                // Primitives and their corresponding object wrappers are\r\n                // equivalent; thus, `\"5\"` is equivalent to `new String(\"5\")`.\r\n                return a == String(b);\r\n\r\n            case '[object Number]':\r\n                // `NaN`s are equivalent, but non-reflexive. An `equal`\r\n                // comparison is performed for other numeric values.\r\n                return a != +a ? b != +b : (a == 0 ? 1 / a == 1 / b : a == +b);\r\n\r\n            case '[object Date]':\r\n            case '[object Boolean]':\r\n                // Coerce dates and booleans to numeric primitive values.\r\n                // Dates are compared by their millisecond representations.\r\n                // Note that invalid dates with millisecond representations\r\n                // of `NaN` are not equivalent.\r\n                return +a == +b;\r\n\r\n            // RegExps are compared by their source patterns and flags.\r\n            case '[object RegExp]':\r\n                return a.source == b.source &&\r\n                        a.global == b.global &&\r\n                        a.multiline == b.multiline &&\r\n                        a.ignoreCase == b.ignoreCase;\r\n\r\n            // 简单判断数组包含的 primitive 值是否相等\r\n            case '[object Array]':\r\n                var aString = a.toString();\r\n                var bString = b.toString();\r\n\r\n                // 只要包含非 primitive 值，为了稳妥起见，都返回 false\r\n                return aString.indexOf('[object') === -1 &&\r\n                        bString.indexOf('[object') === -1 &&\r\n                        aString === bString;\r\n        }\r\n\r\n        if (typeof a != 'object' || typeof b != 'object') return false;\r\n\r\n        // 简单判断两个对象是否相等，只判断第一层\r\n        if (isPlainObject(a) && isPlainObject(b)) {\r\n\r\n            // 键值不相等，立刻返回 false\r\n            if (!isEqual(keys(a), keys(b))) {\r\n                return false;\r\n            }\r\n\r\n            // 键相同，但有值不等，立刻返回 false\r\n            for (var p in a) {\r\n                if (a[p] !== b[p]) return false;\r\n            }\r\n\r\n            return true;\r\n        }\r\n\r\n        // 其他情况返回 false, 以避免误判导致 change 事件没发生\r\n        return false;\r\n    }\r\n\r\n    return Attribute;\r\n});\r\n\n",
    "define('app/core/app-events',[],function() {\r\n// Events\r\n// -----------------\r\n// Thanks to:\r\n//  - https://github.com/documentcloud/backbone/blob/master/backbone.js\r\n//  - https://github.com/joyent/node/blob/master/lib/events.js\r\n\r\n\r\n// Regular expression used to split event strings\r\nvar eventSplitter = /\\s+/\r\n\r\n\r\n// A module that can be mixed in to *any object* in order to provide it\r\n// with custom events. You may bind with `on` or remove with `off` callback\r\n// functions to an event; `trigger`-ing an event fires all callbacks in\r\n// succession.\r\n//\r\n//     var object = new Events();\r\n//     object.on('expand', function(){ alert('expanded'); });\r\n//     object.trigger('expand');\r\n//\r\nfunction Events() {\r\n}\r\n\r\n\r\n// Bind one or more space separated events, `events`, to a `callback`\r\n// function. Passing `\"all\"` will bind the callback to all events fired.\r\nEvents.prototype.on = function(events, callback, context) {\r\n  var cache, event, list\r\n  if (!callback) return this\r\n\r\n  cache = this.__events || (this.__events = {})\r\n  events = events.split(eventSplitter)\r\n\r\n  while (event = events.shift()) {\r\n    list = cache[event] || (cache[event] = [])\r\n    list.push(callback, context)\r\n  }\r\n\r\n  return this\r\n}\r\n\r\nEvents.prototype.once = function(events, callback, context) {\r\n  var that = this\r\n  var cb = function() {\r\n    that.off(events, cb)\r\n    callback.apply(context || that, arguments)\r\n  }\r\n  return this.on(events, cb, context)\r\n}\r\n\r\n// Remove one or many callbacks. If `context` is null, removes all callbacks\r\n// with that function. If `callback` is null, removes all callbacks for the\r\n// event. If `events` is null, removes all bound callbacks for all events.\r\nEvents.prototype.off = function(events, callback, context) {\r\n  var cache, event, list, i\r\n\r\n  // No events, or removing *all* events.\r\n  if (!(cache = this.__events)) return this\r\n  if (!(events || callback || context)) {\r\n    delete this.__events\r\n    return this\r\n  }\r\n\r\n  events = events ? events.split(eventSplitter) : keys(cache)\r\n\r\n  // Loop through the callback list, splicing where appropriate.\r\n  while (event = events.shift()) {\r\n    list = cache[event]\r\n    if (!list) continue\r\n\r\n    if (!(callback || context)) {\r\n      delete cache[event]\r\n      continue\r\n    }\r\n\r\n    for (i = list.length - 2; i >= 0; i -= 2) {\r\n      if (!(callback && list[i] !== callback ||\r\n          context && list[i + 1] !== context)) {\r\n        list.splice(i, 2)\r\n      }\r\n    }\r\n  }\r\n\r\n  return this\r\n}\r\n\r\n\r\n// Trigger one or many events, firing all bound callbacks. Callbacks are\r\n// passed the same arguments as `trigger` is, apart from the event name\r\n// (unless you're listening on `\"all\"`, which will cause your callback to\r\n// receive the true name of the event as the first argument).\r\nEvents.prototype.trigger = function(events) {\r\n  var cache, event, all, list, i, len, rest = [], args, returned = true;\r\n  if (!(cache = this.__events)) return this\r\n  events = events.split(eventSplitter)\r\n\r\n  // Fill up `rest` with the callback arguments.  Since we're only copying\r\n  // the tail of `arguments`, a loop is much faster than Array#slice.\r\n  for (i = 1, len = arguments.length; i < len; i++) {\r\n    rest[i - 1] = arguments[i]\r\n  }\r\n\r\n  // For each event, walk through the list of callbacks twice, first to\r\n  // trigger the event, then to trigger any `\"all\"` callbacks.\r\n  while (event = events.shift()) {\r\n    // Copy callback lists to prevent modification.\r\n    if (all = cache.all) all = all.slice()\r\n    if (list = cache[event]) list = list.slice()\r\n\r\n    // Execute event callbacks except one named \"all\"\r\n    if (event !== 'all') {\r\n      returned = triggerEvents(list, rest, this) && returned\r\n    }\r\n\r\n    // Execute \"all\" callbacks.\r\n    returned = triggerEvents(all, [event].concat(rest), this) && returned\r\n  }\r\n\r\n  return returned\r\n}\r\n\r\nEvents.prototype.emit = Events.prototype.trigger\r\n\r\n\r\n// 扩展是否绑定了XXX方法   Mr.T\r\nEvents.prototype.hasBindEvent = function(eventName) {\r\n  var cache = this.__events || (this.__events = {});\r\n  var event = cache[eventName];\r\n  return event && event.length > 1;\r\n}\r\n// Helpers\r\n// -------\r\n\r\nvar keys = Object.keys\r\n\r\nif (!keys) {\r\n  keys = function(o) {\r\n    var result = []\r\n\r\n    for (var name in o) {\r\n      if (o.hasOwnProperty(name)) {\r\n        result.push(name)\r\n      }\r\n    }\r\n    return result\r\n  }\r\n}\r\n\r\n// Mix `Events` to object instance or Class function.\r\nEvents.mixTo = function(receiver) {\r\n  receiver = isFunction(receiver) ? receiver.prototype : receiver\r\n  var proto = Events.prototype\r\n\r\n  var event = new Events\r\n  for (var key in proto) {\r\n    if (proto.hasOwnProperty(key)) {\r\n      copyProto(key)\r\n    }\r\n  }\r\n\r\n  function copyProto(key) {\r\n    receiver[key] = function() {\r\n      proto[key].apply(event, Array.prototype.slice.call(arguments))\r\n      return this\r\n    }\r\n  }\r\n}\r\n\r\n//对象增强，添加event能力\r\nEvents.enhance = function (receiver) {\r\n    if(typeof receiver !='object'){\r\n      return;\r\n    }\r\n    var proto = Events.prototype\r\n    for (var key in proto) {\r\n        if (proto.hasOwnProperty(key)) {\r\n            receiver[key] = proto[key]\r\n        }\r\n    }\r\n}\r\n\r\n// Execute callbacks\r\nfunction triggerEvents(list, args, context) {\r\n  var pass = true\r\n\r\n  if (list) {\r\n    var i = 0, l = list.length, a1 = args[0], a2 = args[1], a3 = args[2]\r\n    // call is faster than apply, optimize less than 3 argu\r\n    // http://blog.csdn.net/zhengyinhui100/article/details/7837127\r\n    switch (args.length) {\r\n      case 0: for (; i < l; i += 2) {pass = list[i].call(list[i + 1] || context) !== false && pass} break;\r\n      case 1: for (; i < l; i += 2) {pass = list[i].call(list[i + 1] || context, a1) !== false && pass} break;\r\n      case 2: for (; i < l; i += 2) {pass = list[i].call(list[i + 1] || context, a1, a2) !== false && pass} break;\r\n      case 3: for (; i < l; i += 2) {pass = list[i].call(list[i + 1] || context, a1, a2, a3) !== false && pass} break;\r\n      default: for (; i < l; i += 2) {pass = list[i].apply(list[i + 1] || context, args) !== false && pass} break;\r\n    }\r\n  }\r\n  // trigger will return false if one of the callbacks return false\r\n  return pass;\r\n}\r\n\r\nfunction isFunction(func) {\r\n  return Object.prototype.toString.call(func) === '[object Function]'\r\n}\r\n\r\nreturn Events;\r\n});\r\n\n",
    "define('app/core/app-base',[\"app/core/app-class\",\"app/core/app-attribute\",\"app/core/app-events\"],function(Class,Attribute,Events) {\r\n\r\n    // Base Events、Aspect\r\n    /**\r\n     *\r\n     * @class\r\n     * @name Base\r\n     * @extends Class\r\n     * @classdesc  Base 是一个基础类，提供 Class、Attrs 和  支持。\r\n     */\r\n    var Base = Class.create({\r\n        Implements: [Attribute,Events],\r\n        initialize: function(config) {\r\n               this.initAttrs(config);\r\n            // 对于 Base 来说，`change:attr` 事件的含义应该是在实例化后，当属性有变化\r\n            // 时触发，初始化过程中不应该触发。\r\n     \r\n            // 标识实例已准备好\r\n        \tparseEventsFromInstance(this, this.attrs);\r\n        },\r\n        /**\r\n         * 注销方法\r\n         * @abstract\r\n         * @memberof Base\r\n         */\r\n        destroy: function() {\r\n            for (var p in this) {\r\n                if (this.hasOwnProperty(p)) {\r\n                    delete this[p];\r\n                }\r\n            }\r\n        },\r\n        bind:function(target,eventObj){\r\n        \tvar evts=eventObj;\r\n        \tif (arguments.length==1){\r\n        \t\tevts=target;\r\n        \t}\r\n          \tfor(var eventName in evts){\r\n          \t\tthis.on(eventName,evts[eventName]);\r\n          \t}\r\n        },\r\n        unbind:function(trage,events){\r\n          if (typeof events==\"string\"){\r\n          \t\tthis.off(events);\r\n          }\r\n          if (typeof events==\"array\"){\r\n          \tfor(var i=0,len=events.length;i<len;i++){\r\n          \t\tthis.off(events[i]);\r\n          \t}\r\n          }\r\n        }\r\n    });\r\n   return Base;\r\nfunction parseEventsFromInstance(host, attrs) {\r\n  for (var attr in attrs) {\r\n    if (attrs.hasOwnProperty(attr)) {\r\n      var m = '_onChange' + ucfirst(attr);\r\n      if (host[m]) {\r\n        host.on('change:' + attr, host[m]);\r\n      }\r\n    }\r\n  }\r\n}\r\nfunction ucfirst(str) {\r\n  return str.charAt(0).toUpperCase() + str.substring(1);\r\n}\r\n});\r\n\n",
    "define('app/core/app-options-helper',[\"app/core/app-base\"],function(Base){\r\n\r\n\tConfigHelper = Base.extend({\r\n\t\t\t\tpropsInAttrs : [\"configData\", \"columns\",\"buttons\",\"editors\"],\r\n\t\t\t\tattrs : {\r\n\t\t\t\t\tconfigData : {},\r\n\t\t\t\t\tcolumns : {},\r\n\t\t\t\t\tbuttons : {},\r\n\t\t\t\t\teditors:{}\r\n\t\t\t\t},\r\n\t\t\t\tinitialize : function(opt) {\r\n\t\t\t\t\topt=opt||{};\r\n\t\t\t\t\tif (!opt.configData){\r\n\t\t\t\t\t\topt={configData:opt}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tthis.sourceData=opt.configData||opt;\r\n\t\t\t\t\tConfigHelper.superclass.initialize.call(this,opt);\r\n\t\t\t\t\t\r\n\t\t\t\t\tif (this.configData) {\r\n\t\t\t\t\t\tif (this.configData.columns) {\r\n\t\t\t\t\t\t\tthis.addColumns(this.configData.columns);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (this.configData.frozenColumns) {\r\n\t\t\t\t\t\t\tthis.addColumns(this.configData.frozenColumns);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (this.configData.frozenColumnsRight) {\r\n\t\t\t\t\t\t\tthis.addColumns(this.configData.frozenColumnsRight);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (this.configData.toolbar) {\r\n\t\t\t\t\t\t\tthis.addButtons(this.configData.toolbar);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\t\r\n\t\t\t\t//添加列集合\r\n\t\t\t\taddColumns : function(columns) {\r\n\t\t\t\t\tif (columns) {\r\n\t\t\t\t\t\tfor (var i = 0; i < columns.length; i++) {\r\n\t\t\t\t\t\t\tfor (var j = 0; j < columns[i].length; j++) {\r\n\t\t\t\t\t\t\t\tthis.columns[columns[i][j].id] = columns[i][j];\r\n\t\t\t\t\t\t\t\tif (columns[i][j]&&columns[i][j].buttons){\r\n\t\t\t\t\t\t\t\t\tthis.addButtons(columns[i][j].buttons);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tif (columns[i][j]&&columns[i][j].editor){\r\n\t\t\t\t\t\t\t\t\tthis.addEditors(columns[i][j].id,columns[i][j].editor);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\taddEditors:function(id,editor){\r\n\t\t\t\t\teditor.options = editor.options||{};\r\n\t\t\t\t  \tthis.editors[id] = editor.options;\r\n\t\t\t\t},\r\n\t\t\t\t//添加按钮集合\r\n\t\t\t\taddButtons : function(buttons) {\r\n\t\t\t\t\tif (buttons) {\r\n\t\t\t\t\t\tvar removeBtns=[];\r\n\t\t\t\t\t\tfor (var i = 0; i < buttons.length; i++) {\r\n\t\t\t\t\t\t\tthis.buttons[buttons[i].id]=buttons[i];\r\n\t\t\t\t\t\t\tif (!$A.cehckPageComponensById(buttons[i].id)){\r\n\t\t\t\t\t\t\t\t//buttons[i]=null;\r\n\t\t\t\t\t\t\t\tremoveBtns.push(i);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tfor(var i=0;i<removeBtns.length;i++){\r\n\t\t\t\t\t\t\tbuttons.splice((removeBtns[i]-i),1);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\r\n\t\t\t\t\t\r\n\t\t\t\t},\r\n\t\t\t\tgetButton:function(id){\r\n\t\t\t\t\tvar button=this.buttons[id],temp=new ConfigHelper(button);\r\n\t\t\t\t\treturn temp;\r\n\t\t\t\t},\r\n\t\t\t\tgetColumn:function(id){\r\n\t\t\t\t\tvar column=this.columns[id],tem=new ConfigHelper(column);\r\n\t\t\t\t\treturn tem;\r\n\t\t\t\t\t\r\n\t\t\t\t},\r\n\t\t\t\tgetEditor:function(id){\r\n\t\t\t\t\tvar editor=this.editors[id],temp=new ConfigHelper(editor);\r\n\t\t\t\t\treturn temp;\r\n\t\t\t\t},\r\n\t\t\t    setAttr:function(attrName,value){\r\n\t\t\t    \tthis.sourceData[attrName]=value;\r\n\t\t\t    },\r\n\t\t\t    setAttrs:function(attrs){\r\n\t\t\t    \tif (attrs){\r\n\t\t\t\t    \tfor(var key in attrs){\r\n\t\t\t\t    \t\tthis.sourceData[key]=attrs[key];\r\n\t\t\t\t    \t}\r\n\t\t\t    \t}\r\n\t\t\t    }\r\n\t\t\t});\r\n\t\t\treturn ConfigHelper;\r\n\t\r\n});\n",
    "/**\r\n * 针对jquery增加核心的扩展\r\n */\r\ndefine('app/core/app-jquery',[\"jquery\",\"app/core/app-core\",\"base/pinyin\",\"app/core/app-options-helper\"],function($,$A,$pinyin,ConfigHelper){\r\n\t\r\n\t\r\n\t/**\r\n\t * 空方法\r\n\t */\r\n\t$.emptyFunction = function(){};\r\n\t\r\n\t$.isEmpty = function(v, allowBlank){\r\n            return v === null || v === undefined || (($.isArray(v) && !v.length)) || (!allowBlank ? v === '' : false);\r\n    };\r\n\t$.extend($.fn,{\r\n\r\n\t\tescapeHtml : function(str) {\r\n\t\t\tif (str) {\r\n\t\t\t\t//str = str.replace(/&/g, '&amp;');\r\n\t\t\t\tstr = str.replace(/</g, '&lt;');\r\n\t\t\t\tstr = str.replace(/>/g, '&gt;');\r\n\t\t\t\tstr = str.replace(/\"/g, '&quot;');\r\n\t\t\t\tstr = str.replace(/'/g, '&#039;');\r\n\t\t\t}\r\n\t\t\treturn str;\r\n\t\t},\r\n\t\tunescapeHtml:function(str){\r\n\t\t\tif (str) {\r\n\t\t\t\t//str = str.replace(/&amp;/g, '&');\r\n\t\t\t\tstr = str.replace(/&lt;/g, '<');\r\n\t\t\t\tstr = str.replace(/&gt;/g, '>');\r\n\t\t\t\tstr = str.replace(/&quot;/g, '\"');\r\n\t\t\t\tstr = str.replace(/&#039;/g, '\\'');\r\n\t\t\t}\r\n\t\t\treturn str;\r\n\t\t},\r\n\t\t/**\r\n\t\t * 初始化方法\r\n\t\t */\r\n\t\tinitPageUI:function(){\r\n\t\t\t$A.init(this);\r\n\t\t},\r\n\t\t/**\r\n\t\t * 清除js对象缓存\r\n\t\t */\r\n\t\tclearAppJsObject:function(){\r\n\t\t\t$(this).removeAttr(\"__jsappobj\");\r\n\t\t\t$(this)[0].__jsappobj=null;\r\n\t\t},\r\n\t\t/**\r\n\t\t * 设置js对象缓存\r\n\t\t */\r\n\t\tsetAppJsObject:function(jsParam,jsobjs){\r\n\t\t\t$(this).attr(\"__jsappobj\",\"true\");\r\n\t\t\t$(this)[0].__jsappobj={\r\n\t\t\t\tparam:jsParam,\r\n\t\t\t\tobjs:jsobjs\r\n\t\t\t};\r\n\t\t},\r\n\t\t/**\r\n\t\t * 取得js对象缓存\r\n\t\t * @return {Object}带有param和objs属性,param为参数名,objs为js对象数组\r\n\t\t */\r\n\t\tgetAppJsObject:function(){\r\n\t\t\tvar $this=$(this)\r\n\t\t\t,$parents = $this.parents(\"[__jsappobj]\")\r\n\t\t\t,jsobj = $this[0].__jsappobj\r\n\t\t\t,params=null\r\n\t\t\t,jsobjs=null;\r\n\t\t\tif(jsobj != null && typeof jsobj==\"object\" && $.isArray(jsobj.param) && $.isArray(jsobj.objs)){\r\n\t\t\t\tparams=jsobj.param;\r\n\t\t\t\tjsobjs = jsobj.objs;\r\n\t\t\t}else{\r\n\t\t\t\tparams=[];\r\n\t\t\t\tjsobjs =[];\r\n\t\t\t}\r\n\t\t\t$parents.each(function(){\r\n\t\t\t\tvar $p=$(this)\r\n\t\t\t\t,j = this.__jsappobj;\r\n\t\t\t\tif(j == null)\r\n\t\t\t\t\treturn;\r\n\t\t\t\tif(!$.isArray(j.param) || !$.isArray(j.objs))\r\n\t\t\t\t\treturn;\r\n\t\t\t\tvar jp=j.param,jo=j.objs;\r\n\t\t\t\tfor(var i = 0; i < jp.length; i++){\r\n\t\t\t\t\tif($.inArray(jp[i],params)<0){\r\n\t\t\t\t\t\tparams.push(jp[i]);\r\n\t\t\t\t\t\tjsobjs.push(jo[i]);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\tif(params.length == 0)\r\n\t\t\t\treturn null;\r\n\t\t\treturn {param:params.join(\",\"),objs:jsobjs};\r\n\t\t},\r\n\t\t/**\r\n\t\t * 获取带有引入js对象的方法\r\n\t\t */\r\n\t\tgetJsFunction:function(funcstr,target){\r\n\t\t\tvar o = $(this).getAppJsObject();\r\n\t\t\tif(o){\r\n\t\t\t\tvar f = new Function(o.param,\"return function(){\"+funcstr+\"};\");\r\n\t\t\t\treturn f.apply(o,o.objs);\r\n\t\t\t}\r\n\t\t\treturn new Function(funcstr);\r\n\t\t},\r\n\t\t/**\r\n\t\t * 获取一个元素上的json形式的属性值\r\n\t\t * add by tw\r\n\t\t * @param attrName\r\n\t\t * @returns\r\n\t\t */\r\n\t\tgetJsonAttr:function(attrName){\r\n\t\t\tvar o = $(this).getAppJsObject() || {\r\n\t\t\t\t\"param\":\"\",\r\n\t\t\t\t\"objs\":[]\r\n\t\t\t};\r\n\t\t\tvar attrValue = $(this).attr(attrName);\r\n\t\t\tvar id= $(this).attr(\"id\");\r\n\t\t\t\r\n\t\t\t\r\n\t\t//\ttry{\r\n\t\t\t\tvar f = new Function(o.param,\"return (\"+attrValue+\")\");\r\n\t\t\t\t//console.log(o.objs);\r\n\t\t\t\tvar attrValue=f.apply(this,o.objs);\r\n\t\t\t\tif (o.objs&&o.objs.length>0&&id){\r\n\t\t\t\t\tvar initJsObj=o.objs[0];\r\n\t\t\t\t\tif (initJsObj.uiExtConfig){\r\n\t\t\t\t\t\tvar uiExtConfig=initJsObj.uiExtConfig;\r\n\t\t\t\t\t\tif (uiExtConfig[id]&&$.isFunction(uiExtConfig[id])){\r\n\t\t\t\t\t\t\tattrValue[\"beforeRender\"]=function(config){\r\n\t\t\t\t\t\t\t\t\t//重置初始化对象\r\n\t\t\t\t\t\t\t\t\tvar confighelper=new ConfigHelper(config);\r\n\t\t\t\t\t\t\t\t\tuiExtConfig[id].call(this,confighelper);\r\n\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t};\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\r\n\t\t\t\t}\r\n\t\t\t\t//console.log(id);\r\n\t\t\t\t//console.log(attrValue)\r\n\t\t\t\treturn attrValue;\r\n\t\t\t/*}catch(e){\r\n\t\t\t\talert(attrValue);\r\n\t\t\t\t\talert(o.param);\r\n\t\t\t\twindow.alert(e);\r\n\t\t\t\treturn {};\r\n\t\t\t}*/\r\n\t\t},\r\n\t\t// 2014-09-24 add function  by sjq\r\n\t\t/**\r\n\t\t * \r\n\t\t * @example  \r\n\t\t * var funobj=$A.getPageJsFunction(\"test.add\");\r\n\t\t * if ($.isFunction(funobj)){\r\n\t\t *     //funobj() or funobj.call() or funobj.apply;\r\n\t\t * }\r\n\t\t * \r\n\t\t * 获取页面中的js方法\r\n\t\t * @param funcstr\r\n\t\t * @param target\r\n\t\t * @returns\r\n\t\t *\r\n\t\t */\r\n\t\tgetPageJsProperty:function(funcstr,target){\r\n\t\t\tvar o = $(this).getAppJsObject();\r\n\t\t\tif(o){\r\n\t\t\t\tvar f = new Function(o.param,\"if (typeof \"+funcstr+\" !== 'undefined') return \"+funcstr+\";\");\r\n\t\t\t\treturn f.apply(o,o.objs);\r\n\t\t\t}\r\n\t\t\treturn null;\r\n\t\t},\r\n\t\t/**\r\n\t\t * 获取带有引入js对象的方法\r\n\t\t */\r\n\t\tgetJsCacheFunc:function(funcstr,target){\r\n\t\t\tvar $this = $(this)\r\n\t\t\t,func = $this.data(\"jsfunction\");\r\n\t\t\tif(func){\r\n\t\t\t\treturn func;\r\n\t\t\t}\r\n\t\t\tfunc = $this.getJsFunction(funcstr,target);\r\n\t\t\t$this.data(\"jsfunction\",func);\r\n\t\t\treturn func;\r\n\t\t},\r\n\t\t/**\r\n\t\t * 获取带有引入js对象的方法\r\n\t\t */\r\n\t\tgetJsEvent:function(events){\r\n\t\t\tvar o = $(this).getAppJsObject();\r\n\t\t\tif(o){\r\n\t\t\t\tvar f = new Function(o.param,'var e = '+events+';return e;');\r\n\t\t\t\treturn f.apply(o,o.objs);\r\n\t\t\t}\r\n\t\t\treturn $A.jsonEval(events);\r\n\t\t},\r\n\t\t/**\r\n\t\t * 判断当前元素的是否为指定的标签\r\n\t\t * @param tn 指定的标签\r\n\t\t */\r\n\t\tisTag:function(tn) {\r\n\t\t\tif(!tn) return false;\r\n\t\t\treturn $(this)[0].tagName.toLowerCase() == tn?true:false;\r\n\t\t},\r\n\t\t/**\r\n\t\t * 鼠标悬浮样式处理\r\n\t\t * @param className{String}样式名\r\n\t\t * @param speed 加载速度\r\n\t\t */\r\n\t\thoverClass: function(className, speed){\r\n\t\t\tvar _className = className || \"hover\";\r\n\t\t\treturn this.each(function(){\r\n\t\t\t\tvar $this = $(this), mouseOutTimer;\r\n\t\t\t\t$this.hover(function(){\r\n\t\t\t\t\tif (mouseOutTimer) clearTimeout(mouseOutTimer);\r\n\t\t\t\t\t$this.addClass(_className);\r\n\t\t\t\t},function(){\r\n\t\t\t\t\tmouseOutTimer = setTimeout(function(){$this.removeClass(_className);}, speed||10);\r\n\t\t\t\t});\r\n\t\t\t});\r\n\t\t},\r\n\t\t/**\r\n\t\t * 聚焦样式处理\r\n\t\t * @param className{String}样式名\r\n\t\t */\r\n\t\tfocusClass: function(className){\r\n\t\t\tvar _className = className || \"textInputFocus\";\r\n\t\t\treturn this.each(function(){\r\n\t\t\t\t$(this).focus(function(){\r\n\t\t\t\t\t$(this).addClass(_className);\r\n\t\t\t\t}).blur(function(){\r\n\t\t\t\t\t$(this).removeClass(_className);\r\n\t\t\t\t});\r\n\t\t\t});\r\n\t\t},\r\n\t\t/**\r\n\t\t * 判断当前元素是否已经绑定某个事件\r\n\t\t * @param {Object} type\r\n\t\t */\r\n\t\tisBind:function(type) {\r\n\t\t\tvar _events = $(this).data(\"events\");\r\n\t\t\treturn _events && type && _events[type];\r\n\t\t},\r\n\t\t/**\r\n\t\t * 取得dom元素的指定数值属性值\r\n\t\t * @param pre{string} 数值属性一般为left,width等\r\n\t\t * @param {number} 属性值\r\n\t\t */\r\n\t\tcssNum:function(pre){\r\n\t\t\tvar cssPre = $(this).css(pre);\r\n\t\t\treturn cssPre.substring(0, cssPre.indexOf(\"px\")) * 1;\r\n\t\t},\r\n\t\t\r\n\t\t/**\r\n\t\t * 判断两个jquery对象是否相等\r\n\t\t * @param obj2{jqueryObject} jquery对象\r\n\t\t */\r\n\t\tequalObject:function(obj){\r\n\t\t\tvar $this = (this);\r\n\t\t\tif($this.length == 0 && (obj == null||obj.length==0))\r\n\t\t\t\treturn true;\r\n\t\t\tif(obj == null)\r\n\t\t\t\treturn false;\r\n\t\t\tif($this.length != obj.length)\r\n\t\t\t\treturn false;\r\n\t\t\tfor(var i = 0; i < obj.length; i++){\r\n\t\t\t\tif($this[i] != obj[i])\r\n\t\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t\treturn true;\r\n\t\t},\r\n\t\t/**\r\n\t\t * parse options, including standard 'data-options' attribute.\r\n\t\t * \r\n\t\t * calling examples:\r\n\t\t * parseOptions(target);\r\n\t\t * parseOptions(target, ['id','title','width',{fit:'boolean',border:'boolean'},{min:'number'}]);\r\n\t\t */\r\n\t\tparseOptions: function(target, properties){\r\n\t\t\tvar t = $(target);\r\n\t\t\tvar options = {};\r\n\t\t\tvar o = $(target).getAppJsObject() || {\r\n\t\t\t\t\"param\":\"\",\r\n\t\t\t\t\"objs\":[]\r\n\t\t\t};\r\n\t\t\tvar s = $.trim(t.attr('data-options'));\r\n\t\t\tif (s){\r\n\t\t\t\tif (s.substring(0, 1) != '{'){\r\n\t\t\t\t\ts = '{' + s + '}';\r\n\t\t\t\t}\r\n\t\t\t\t//options = (new Function(o.param'return ' + s))();\r\n\t\t\t\t\r\n\t\t\t\t\r\n\t\t\t\tvar f = new Function(o.param,\"return (\"+s+\")\");\r\n\t\t\t\t//console.log(o.objs);\r\n\t\t\t\tvar options=f.apply(this,o.objs);\r\n\t\t\t}\r\n\t\t\tfor( key in options){\r\n\t\t\t\tif ($.isEmpty(options[key])){\r\n\t\t\t\t\tdelete options[key];\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t$.map(['width','height','left','top','minWidth','maxWidth','minHeight','maxHeight'], function(p){\r\n\t\t\t\tif (!target.style){\r\n\t\t\t\t\tconsole.log(target);\r\n\t\t\t\t}\r\n\t\t\t\r\n\t\t\t\tvar pv = $.trim(target.style[p] || '');\r\n\t\t\t\tif (pv){\r\n\t\t\t\t\tif (pv.indexOf('%') == -1){\r\n\t\t\t\t\t\tpv = parseInt(pv) || undefined;\r\n\t\t\t\t\t}\r\n\t\t\t\t\toptions[p] = pv;\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\t\t\r\n\t\t\tif (properties){\r\n\t\t\t\tvar opts = {};\r\n\t\t\t\tfor(var i=0; i<properties.length; i++){\r\n\t\t\t\t\tvar pp = properties[i];\r\n\t\t\t\t\tif (typeof pp == 'string'){\r\n\t\t\t\t\t\topts[pp] = t.attr(pp);\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tfor(var name in pp){\r\n\t\t\t\t\t\t\tvar type = pp[name];\r\n\t\t\t\t\t\t\tif (type == 'boolean'){\r\n\t\t\t\t\t\t\t\topts[name] = t.attr(name) ? (t.attr(name) == 'true') : undefined;\r\n\t\t\t\t\t\t\t} else if (type == 'number'){\r\n\t\t\t\t\t\t\t\topts[name] = t.attr(name)=='0' ? 0 : parseFloat(t.attr(name)) || undefined;\r\n\t\t\t\t\t\t\t\tif(!opts[name]&&options[name]){\r\n\t\t\t\t\t\t\t\t\toptions[name]=parseFloat(options[name]);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\t$.extend(options, opts);\r\n\t\t\t}\r\n\t\t\treturn options;\r\n\t\t},\r\n\t\t\r\n\t\t/**\r\n\t * extend plugin to set box model width\r\n\t */\r\n\t_outerWidth : function(width){\r\n\t\tif (width == undefined){\r\n\t\t\tif (this[0] == window){\r\n\t\t\t\treturn this.width() || document.body.clientWidth;\r\n\t\t\t}\r\n\t\t\treturn this.outerWidth()||0;\r\n\t\t}\r\n\t\treturn this._size('width', width);\r\n\t},\r\n\t\r\n\t/**\r\n\t * extend plugin to set box model height\r\n\t */\r\n\t_outerHeight : function(height){\r\n\t\tif (height == undefined){\r\n\t\t\tif (this[0] == window){\r\n\t\t\t\treturn this.height() || document.body.clientHeight;\r\n\t\t\t}\r\n\t\t\treturn this.outerHeight()||0;\r\n\t\t}\r\n\t\treturn this._size('height', height);\r\n\t},\r\n\t\r\n\t_scrollLeft : function(left){\r\n\t\tif (left == undefined){\r\n\t\t\treturn this.scrollLeft();\r\n\t\t} else {\r\n\t\t\treturn this.each(function(){$(this).scrollLeft(left)});\r\n\t\t}\r\n\t},\r\n\tparseValue:function (property, value, parent, delta){\r\n\t\tdelta = delta || 0;\r\n\t\tvar v = $.trim(String(value||''));\r\n\t\tvar endchar = v.substr(v.length-1, 1);\r\n\t\tif (endchar == '%'){\r\n\t\t\tv = parseInt(v.substr(0, v.length-1));\r\n\t\t\tif (property.toLowerCase().indexOf('width') >= 0){\r\n\t\t\t\tv = Math.floor((parent.width()-delta) * v / 100.0);\r\n\t\t\t} else {\r\n\t\t\t\tv = Math.floor((parent.height()-delta) * v / 100.0);\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tv = parseInt(v) || undefined;\r\n\t\t}\r\n\t\treturn v;\r\n\t},\r\n\t_size : function(options, parent){\r\n\t\tvar _slef=this;\r\n\t\tif (typeof options == 'string'){\r\n\t\t\tif (options == 'clear'){\r\n\t\t\t\treturn this.each(function(){\r\n\t\t\t\t\t$(this).css({width:'',minWidth:'',maxWidth:'',height:'',minHeight:'',maxHeight:''});\r\n\t\t\t\t});\r\n\t\t\t} else if (options == 'unfit'){\r\n\t\t\t\treturn this.each(function(){\r\n\t\t\t\t\t_fit(this, $(this).parent(), false);\r\n\t\t\t\t});\r\n\t\t\t} else {\r\n\t\t\t\tif (parent == undefined){\r\n\t\t\t\t\treturn _css(this[0], options);\r\n\t\t\t\t} else {\r\n\t\t\t\t\treturn this.each(function(){\r\n\t\t\t\t\t\t_css(this, options, parent);\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\treturn this.each(function(){\r\n\t\t\t\tparent = parent || $(this).parent();\r\n\t\t\t\t$.extend(options, _fit(this, parent, options.fit)||{});\r\n\t\t\t\tvar r1 = _setSize(this, 'width', parent, options);\r\n\t\t\t\tvar r2 = _setSize(this, 'height', parent, options);\r\n\t\t\t\tif (r1 || r2){\r\n\t\t\t\t\t$(this).addClass('app-fluid');\r\n\t\t\t\t} else {\r\n\t\t\t\t\t$(this).removeClass('app-fluid');\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\t\t\r\n\t\tfunction _fit(target, parent, fit){\r\n\t\t\tvar t = $(target)[0];\r\n\t\t\tvar p = parent[0];\r\n\t\t\tvar fcount = p.fcount || 0;\r\n\t\t\tif (fit){\r\n\t\t\t\tif (!t.fitted){\r\n\t\t\t\t\tt.fitted = true;\r\n\t\t\t\t\tp.fcount = fcount + 1;\r\n\t\t\t\t\t$(p).addClass('panel-noscroll');\r\n\t\t\t\t\tif (p.tagName == 'BODY'){\r\n\t\t\t\t\t\t$('html').addClass('panel-fit');\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\treturn {\r\n\t\t\t\t\twidth: ($(p).width()||1),\r\n\t\t\t\t\theight: ($(p).height()||1)\r\n\t\t\t\t};\r\n\t\t\t} else {\r\n\t\t\t\tif (t.fitted){\r\n\t\t\t\t\tt.fitted = false;\r\n\t\t\t\t\tp.fcount = fcount - 1;\r\n\t\t\t\t\tif (p.fcount == 0){\r\n\t\t\t\t\t\t$(p).removeClass('panel-noscroll');\r\n\t\t\t\t\t\tif (p.tagName == 'BODY'){\r\n\t\t\t\t\t\t\t$('html').removeClass('panel-fit');\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t\tfunction _setSize(target, property, parent, options){\r\n\t\t\tvar t = $(target);\r\n\t\t\tvar p = property;\r\n\t\t\tvar p1 = p.substr(0,1).toUpperCase() + p.substr(1);\r\n\t\t\tvar min = _slef.parseValue('min'+p1, options['min'+p1], parent);// || 0;\r\n\t\t\tvar max = _slef.parseValue('max'+p1, options['max'+p1], parent);// || 99999;\r\n\t\t\tvar val = _slef.parseValue(p, options[p], parent);\r\n\t\t\tvar fluid = (String(options[p]||'').indexOf('%') >= 0 ? true : false);\r\n\t\t\tif (!isNaN(val)){\r\n\t\t\t\tvar v = Math.min(Math.max(val, min||0), max||99999);\r\n\t\t\t\tif (!fluid){\r\n\t\t\t\t\toptions[p] = v;\r\n\t\t\t\t}\r\n\t\t\t\tt._size('min'+p1, '');\r\n\t\t\t\tt._size('max'+p1, '');\r\n\t\t\t\tt._size(p, v);\r\n\t\t\t} else {\r\n\t\t\t\tt._size(p, '');\r\n\t\t\t\tt._size('min'+p1, min);\r\n\t\t\t\tt._size('max'+p1, max);\r\n\t\t\t}\r\n\t\t\treturn fluid || options.fit;\r\n\t\t}\r\n\t\tfunction _css(target, property, value){\r\n\t\t\tvar t = $(target);\r\n\t\t\tif (value == undefined){\r\n\t\t\t\tvalue = parseInt(target.style[property]);\r\n\t\t\t\tif (isNaN(value)){return undefined;}\r\n\t\t\t\tif ($._boxModel){\r\n\t\t\t\t\tvalue += getDeltaSize();\r\n\t\t\t\t}\r\n\t\t\t\treturn value;\r\n\t\t\t} else if (value === ''){\r\n\t\t\t\tt.css(property, '');\r\n\t\t\t} else {\r\n\t\t\t\tif ($._boxModel){\r\n\t\t\t\t\tvalue -= getDeltaSize();\r\n\t\t\t\t\tif (value < 0){value = 0;}\r\n\t\t\t\t}\r\n\t\t\t\tt.css(property, value+'px');\r\n\t\t\t}\r\n\t\t\tfunction getDeltaSize(){\r\n\t\t\t\tif (property.toLowerCase().indexOf('width') >= 0){\r\n\t\t\t\t\treturn t.outerWidth() - t.width();\r\n\t\t\t\t} else {\r\n\t\t\t\t\treturn t.outerHeight() - t.height();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\t});\r\n\t\r\n\t\r\n\t\r\n\t/**\r\n\t * 扩展String方法\r\n\t */\r\n\t$.extend(String.prototype, {\r\n\t\t/**\r\n\t\t * 字符串是否为正整数\r\n\t\t */\r\n\t\tisPositiveInteger:function(){\r\n\t\t\treturn (new RegExp(/^[1-9]\\d*$/).test(this));\r\n\t\t},\r\n\t\t/**\r\n\t\t * 字符串是否为整数\r\n\t\t */\r\n\t\tisInteger:function(){\r\n\t\t\treturn (new RegExp(/^\\d+$/).test(this));\r\n\t\t},\r\n\t\t/**\r\n\t\t * 字符串是否为数值型\r\n\t\t */\r\n\t\tisNumber: function(value, element) {\r\n\t\t\treturn (new RegExp(/^-?(?:\\d+|\\d{1,3}(?:,\\d{3})+)(?:\\.\\d+)?$/).test(this));\r\n\t\t},\r\n\t\t/**\r\n\t\t * 去字符串的前后空格\r\n\t\t */\r\n\t\ttrim:function(){\r\n\t\t\treturn this.replace(/(^\\s*)|(\\s*$)|\\r|\\n/g, \"\");\r\n\t\t},\r\n\t\t/**\r\n\t\t * 当前字符串进行转码\r\n\t\t */\r\n\t\ttrans:function() {\r\n\t\t\treturn this.replace(/&lt;/g, '<').replace(/&gt;/g,'>').replace(/&quot;/g, '\"');\r\n\t\t},\r\n\t\t/**\r\n\t\t * 全部替换字符串\r\n\t\t * @param os 需要替换字符串正则表达式\r\n\t\t * @param ns 替换的字符串\r\n\t\t * @return 替换结果\r\n\t\t */\r\n\t\treplaceAll:function(os, ns) {\r\n\t\t\treturn this.replace(new RegExp(os,\"gm\"),ns);\r\n\t\t},\r\n\t\t/**\r\n\t\t * 模板替换\r\n\t\t * @param $data 上下文书局\r\n\t\t * @return 替换结果串\r\n\t\t */\r\n\t\tevalTm:function($data) {\r\n\t\t\tif (!$data) return this;\r\n\t\t\treturn this.replace(RegExp(\"({[A-Za-z_]+[A-Za-z0-9_{\\\\\\\\\\\\.}]*})\",\"g\"), function($1){\r\n\t\t\t\tvar v = $data[$1.replace(/[{}]+/g, \"\")];\r\n\t\t\t\treturn v?v:$1;\r\n\t\t\t});\r\n\t\t},\r\n\t\t/**\r\n\t\t * 通过指定元素内容里包含的元素id为上下文的变量名，元素值为变量值进行模板替换\r\n\t\t * @param _box 模板替换的范围\r\n\t\t * @return 替换结果\r\n\t\t */\r\n\t\tevalTmById:function(_box) {\r\n\t\t\tvar $parent = _box || $(document);\r\n\t\t\treturn this.replace(RegExp(\"({[A-Za-z_]+[A-Za-z0-9_{\\\\\\\\\\\\.}]*})\",\"g\"), function($1){\r\n\t\t\t\tvar $input = $parent.find(\"#\"+$1.replace(/[{}]+/g, \"\"));\r\n\t\t\t\treturn $input.size() > 0 ? $input.val() : $1;\r\n\t\t\t});\r\n\t\t},\r\n\t\t/**\r\n\t\t * 通过指定元素内容里包含的元素id为上下文的变量名，元素值为变量值进行模板替换\r\n\t\t * @param _box 模板替换的范围\r\n\t\t * @return 替换结果\r\n\t\t */\r\n\t\tevalTmByAttr:function(t) {\r\n\t\t\tif(!t)\r\n\t\t\t\treturn this.toString();\r\n\t\t\tvar $t =$(t);\r\n\t\t\treturn this.replace(RegExp(\"({[A-Za-z_]+[A-Za-z0-9_{\\\\\\\\\\\\.}]*})\",\"g\"), function($1){\r\n\t\t\t\tvar attr= $1.replace(/[{}]+/g, \"\");\r\n\t\t\t\tvar v = attr=='text'?$t.text():(attr=='value'|| attr=='val')?$t.val()||$t.attr(attr):$t.attr(attr);\r\n\t\t\t\treturn v || $1;\r\n\t\t\t});\r\n\t\t},\r\n\t\t/**\r\n\t\t * 转换模板串\r\n\t\t */\r\n\t\tevalTemplate:function(el){\r\n\t\t\tif(this.isFinishedTm())\r\n\t\t\t\treturn this.toString();\r\n\t\t\tvar $el = $(el)\r\n\t\t\t,box = $el.attr(\"evalTarget\")||el||document\r\n\t\t\t,$box=$(box);\r\n\t\t\tvar val = this.evalTmById($box);\r\n\t\t\tval = this.evalTmByAttr($el.attr(\"evalTarget\")||el);\r\n\t\t\tif (!val.isFinishedTm() && $el.attr(\"eval-warn\")) {\r\n\t\t\t\t$A.messager.error($el.attr(\"eval-warn\"));\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t\treturn val;\r\n\t\t},\r\n\t\t/**\r\n\t\t * 模板替换是否完成\r\n\t\t * @return 布尔值\r\n\t\t */\r\n\t\tisFinishedTm:function(){\r\n\t\t\treturn !(new RegExp(\"{[A-Za-z_]+[A-Za-z0-9_]*}\").test(this)); \r\n\t\t},\r\n\t\t/**\r\n\t\t * 去掉字符串前面指定的字母\r\n\t\t */\r\n\t\tskipChar:function(ch) {\r\n\t\t\tif (!this || this.length===0) {return '';}\r\n\t\t\tif (this.charAt(0)===ch) {return this.substring(1).skipChar(ch);}\r\n\t\t\treturn this;\r\n\t\t},\r\n\t\t/**\r\n\t\t * 判断是否为合格的密码串\r\n\t\t */\r\n\t\tisValidPwd:function() {\r\n\t\t\treturn (new RegExp(/^([_]|[a-zA-Z0-9]){6,32}$/).test(this)); \r\n\t\t},\r\n\t\t/**\r\n\t\t * 判断是否为邮件地址串\r\n\t\t */\r\n\t\tisValidMail:function(){\r\n\t\t\treturn(new RegExp(/^\\w+((-\\w+)|(\\.\\w+))*\\@[A-Za-z0-9]+((\\.|-)[A-Za-z0-9]+)*\\.[A-Za-z0-9]+$/).test(this.trim()));\r\n\t\t},\r\n\t\t/**\r\n\t\t * 判断当前串是否为空串\r\n\t\t */\r\n\t\tisSpaces:function() {\r\n\t\t\tfor(var i=0; i<this.length; i+=1) {\r\n\t\t\t\tvar ch = this.charAt(i);\r\n\t\t\t\tif (ch!=' '&& ch!=\"\\n\" && ch!=\"\\t\" && ch!=\"\\r\") {return false;}\r\n\t\t\t}\r\n\t\t\treturn true;\r\n\t\t},\r\n\t\t/**\r\n\t\t * 是否为电话号码\r\n\t\t */\r\n\t\tisPhone:function() {\r\n\t\t\treturn (new RegExp(/(^([0-9]{3,4}[-])?\\d{3,8}(-\\d{1,6})?$)|(^\\([0-9]{3,4}\\)\\d{3,8}(\\(\\d{1,6}\\))?$)|(^\\d{3,8}$)/).test(this));\r\n\t\t},\r\n\t\t/**\r\n\t\t * 是否为url地址\r\n\t\t */\r\n\t\tisUrl:function(){\r\n\t\t\treturn (new RegExp(/^[a-zA-z]+:\\/\\/([a-zA-Z0-9\\-\\.]+)([-\\w .\\/?%&=:]*)$/).test(this));\r\n\t\t},\r\n\t\t/**\r\n\t\t * 判断是否为外部地址\r\n\t\t */\r\n\t\tisExternalUrl:function(){\r\n\t\t\treturn this.isUrl() && this.indexOf(\"://\"+document.domain) == -1;\r\n\t\t},\r\n\t\t/**\r\n\t\t * 获取汉字拼音首字母串\r\n\t\t * @return {String}拼音首字母串\r\n\t\t */\r\n\t\ttoInitials:function() {\r\n\t\t\treturn $pinyin.toInitials(this);\r\n\t\t},\r\n\t\t/**\r\n\t\t * 获取汉字拼音大写首字母串\r\n\t\t * @return {String}大写的拼音首字母串\r\n\t\t */\r\n\t\ttoUpperInitials:function() {\r\n\t\t\treturn $pinyin.toUpperInitials(this);\r\n\t\t},\r\n\t\t\r\n\t\t/**\r\n\t\t * 获取汉字拼音串\r\n\t\t * @param ch{String}拼音字符串\r\n\t\t * @return {String}汉字拼音串\r\n\t\t */\r\n\t\ttoPinyin:function() {\r\n\t\t\treturn $pinyin.toPinyin(this);\r\n\t\t},\r\n\t\t\r\n\t\t/**\r\n\t\t * 获取汉字首字母大写的拼音串\r\n\t\t * @return {String}首字母大写的拼音串\r\n\t\t */\r\n\t\ttoCapPinyin:function() {\r\n\t\t\treturn $pinyin.toCapPinyin(this);\r\n\t\t}\r\n\t\t\r\n\t});\r\n\treturn $;\r\n});\n",
    "define('app/app-funcbase',[\"app/core/app-jquery\",\"app/core/app-core\"],function ($,$A) {\r\n\t/**\r\n\t * 系统函数库\r\n\t */\r\n\treturn {\r\n\t\t\r\n\t\t/**\r\n\t\t * 打开对话框\r\n\t\t */\r\n\t\topenDialog:function(options){\r\n\t\t\tif(typeof options === \"string\"){\r\n\t\t\t\toptions = {url:options};\r\n\t\t\t}\r\n\t\t\tvar path = options[\"url\"];\r\n\t\t\tif(!path)\r\n\t\t\t\treturn;\r\n\t\t\tif(path.indexOf(_contextPath)!=0){\r\n\t\t\t\tif(path.indexOf(\"/\")!=0){\r\n\t\t\t\t\tpath=\"/\"+path;\r\n\t\t\t\t}\r\n\t\t\t\tpath=_contextPath+path;\r\n\t\t\t}\r\n\t\t\tvar dialogId = options[\"dialogId\"];\r\n\t\t\tif(!dialogId){\r\n\t\t\t\tdialogId = \"dialog\"+$A.nextId();\r\n\t\t\t\toptions[\"dialogId\"]=dialogId;\r\n\t\t\t\toptions[\"data-target\"]=\"#\"+dialogId;\r\n\t\t\t}\r\n\t\t\toptions[\"url\"]=path;\r\n\t\t\trequire([\"app/widgets/window/app-dialog\"],function(){\r\n\t\t\t\t$.openModalDialog(options);\r\n\t\t\t});\r\n\t\t},\r\n\t\t\r\n\t\t/**\r\n\t\t * 通过指定的表单地址在对话框中编辑当前选中列表数据\r\n\t\t */\r\n\t\teditGridRowDialog:function(options){\r\n\t\t\tvar that = this;\r\n\t\t\trequire([\"app/widgets/window/app-dialog\",\"app/widgets/window/app-messager\"],function($dialog,$messager){\r\n\t\t\t\tvar gridId = options[\"gridId\"];\r\n\t\t\t\tif(!gridId){\r\n\t\t\t\t\t$messager.error(\"请指定列表对象！\");\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tvar $grid = $A(\"#\"+gridId);\r\n\t\t\t\tif($grid.length==0){\r\n\t\t\t\t\t$messager.error(\"请指定列表对象！\");\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tvar id = $grid.bsgrid('getSelectRowId');\r\n\t\t\t\tif (id)\t{\r\n\t\t\t\t\toptions[\"params\"]={id:id};\r\n\t\t\t\t\t$.openModalDialog(options);\r\n\t\t\t\t} else { $messager.warn(\"请选中一行数据后再编辑！\");}\r\n\t\t\t});\r\n\t\t},\r\n\t\t/**\r\n\t\t * 通过指定的表单地址在对话框中编辑当前选中列表数据\r\n\t\t */\r\n\t\tdeleteGridSelRows:function(options){\r\n\t\t\trequire([\"app/widgets/window/app-messager\",\"app/data/app-ajax\"],function($messager,$ajax){\r\n\t\t\t\tvar gridId = options[\"gridId\"];\r\n\t\t\t\tif(!gridId){\r\n\t\t\t\t\t$messager.error(\"请指定列表对象！\");\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tvar $grid = $(\"#\"+gridId);\r\n\t\t\t\tif($grid.length==0){\r\n\t\t\t\t\t$messager.error(\"请指定列表对象！\");\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tvar delUrl = options[\"delUrl\"];\r\n\t\t\t\tif(!delUrl){\r\n\t\t\t\t\t$messager.error(\"请指定删除数据的服务地址！\");\r\n\t\t\t\t\treturn\r\n\t\t\t\t}\r\n\t\t\t\tif(!delUrl.startsWith(\"/\")){\r\n\t\t\t\t\tdelUrl=\"/\"+delUrl;\r\n\t\t\t\t}\r\n\t\t\t\tdelUrl = _contextPath + delUrl;\r\n\t\t\t\tvar ids = $grid.bsgrid('getSelectRowId');\r\n\t\t\t\tif (ids&& ids.length>0)\t{\r\n\t\t\t\t\tvar op = {\r\n\t\t\t\t\t\t\ttype:'POST',\r\n\t\t\t\t\t\t\turl:delUrl,\r\n\t\t\t\t\t\t\tdata:{ids:ids},\r\n\t\t\t\t\t\t\tdataType:\"json\",\r\n\t\t\t\t\t\t\tcache: false,\r\n\t\t\t\t\t\t\tbeforeCall:'confirmPrompt',\r\n\t\t\t\t\t\t\tconfirm:\"确认删除这些数据吗？\",\r\n\t\t\t\t\t\t\tafterCall:'refreshTable'\r\n\t\t\t\t\t\t};\r\n\t\t\t\t\t$ajax.ajaxCall(op);\r\n\t\t\t\t} else { $messager.warn(\"请选中需要删除的数据！\");}\r\n\t\t\t});\r\n\t\t},\r\n\t\t/**\r\n\t\t * 通过指定的表单地址在对话框中编辑当前选中列表数据\r\n\t\t */\r\n\t\teditSingleDataDialog:function(options){\r\n\t\t\tvar that = this;\r\n\t\t\trequire([\"app/widgets/window/app-dialog\",\"app/widgets/window/app-messager\"],function($dialog,$messager){\r\n\t\t\t\tvar loadUrl = options[\"url\"];\r\n\t\t\t\tif(!loadUrl){\r\n\t\t\t\t\t$messager.error(\"请指定加载表单数据的服务地址！\");\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tif(!loadUrl.startsWith(\"/\")){\r\n\t\t\t\t\tloadUrl=\"/\"+loadUrl;\r\n\t\t\t\t}\r\n\t\t\t\tloadUrl = _contextPath + loadUrl;\r\n\t\t\t\tvar id=options[\"id\"];\r\n\t\t\t\tif(!id){\r\n\t\t\t\t\t$messager.error(\"参数设置错误！\");\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\toptions[\"params\"]={id:id};\r\n\t\t\t\toptions[\"url\"]=loadUrl;\r\n\t\t\t\t$.openModalDialog(options);\r\n\t\t\t});\r\n\t\t},\r\n\t\t/**\r\n\t\t * 通过指定的表单地址在对话框中编辑当前选中列表数据\r\n\t\t */\r\n\t\tdeleteSingleData:function(options){\r\n\t\t\trequire([\"app/widgets/window/app-messager\",\"app/data/app-ajax\"],function($messager,$ajax){\r\n\t\t\t\tvar delUrl = options[\"url\"];\r\n\t\t\t\tif(!delUrl){\r\n\t\t\t\t\t$messager.error(\"请指定删除数据的服务地址！\");\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tif(!delUrl.startsWith(\"/\")){\r\n\t\t\t\t\tdelUrl=\"/\"+delUrl;\r\n\t\t\t\t}\r\n\t\t\t\tdelUrl = _contextPath + delUrl;\r\n\t\t\t\tvar id=options[\"id\"];\r\n\t\t\t\tif(!id){\r\n\t\t\t\t\t$messager.error(\"参数设置错误！\");\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tvar op = {\r\n\t\t\t\t\ttype:'POST',\r\n\t\t\t\t\turl:delUrl,\r\n\t\t\t\t\tdata:{id:id},\r\n\t\t\t\t\tdataType:\"json\",\r\n\t\t\t\t\tcache: false,\r\n\t\t\t\t\tbeforeCall:'confirmPrompt',\r\n\t\t\t\t\tconfirm:options[confirm]||\"确认删除这些数据吗？\",\r\n\t\t\t\t\tafterCall:'refreshTable'\r\n\t\t\t\t};\r\n\t\t\t\t$ajax.ajaxCall(op);\r\n\t\t\t});\r\n\t\t},\r\n\t\t/**\r\n\t\t *  保存表单对话框\r\n\t\t */\r\n\t\tsaveFormDialog:function(options){\r\n\t\t\tif(typeof options === \"string\"){\r\n\t\t\t\toptions = {formId:options};\r\n\t\t\t}\r\n\t\t\tvar container = $A.getContainer();\r\n\t\t\trequire([\"app/widgets/form/app-form\"],function(){\r\n\t\t\t\tvar formId = options[\"formId\"];\r\n\t\t\t\tif(formId){\r\n\t\t\t\t\t$(\"#\"+options[\"formId\"],container).submitForm(options);\r\n\t\t\t\t}else{\r\n\t\t\t\t\t$(\"form\",container).submitForm(options);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t},\r\n\t\t/**\r\n\t\t * grid列转义 0-->\"\"  1-->√\r\n\t\t */\r\n\t\ttransferGridColumn:function(cellvalue, options, rowObject){\r\n\t\t\t\r\n\t\t\treturn cellvalue == '1' ? \"<font color='green'>√</font>\" : \"\";\r\n\t\t},\r\n\t\ttransferGridColumn2:function(cellvalue, options, rowObject){\r\n\t\t\tif(cellvalue == undefined){\r\n\t\t\t\treturn '';\r\n\t\t\t}else{\r\n\t\t\t\treturn cellvalue == '1' ? \"<font color='green'>√</font>\" : \"<font style='color:red !Important'>╳</font>\";\r\n\t\t\t}\r\n\r\n\t\t},\r\n\t\t/**\r\n\t\t * form列转义 0-->\"\"  1-->√\r\n\t\t */\r\n\t\ttransferFormColumn:function(value){\r\n\t\t\t \r\n\t\t\treturn value == '1' ? \"<font color='green'>√</font>\" : \"\";\r\n\t\t\t \r\n\t\t},\r\n\t\t/**\r\n\t\t * 关闭对话框\r\n\t\t */\r\n\t\tcloseDialog:function(){\r\n\t\t\t$A.dialog.closeCurrent();\r\n\t\t}\r\n\t}\r\n});\n",
    "define(\r\n\t\t'app/app-pagebase',[ \"app/core/app-base\" ],\r\n\t\tfunction(Base){\r\n\t\t\t\r\n\t\t\tPageBase = Base.extend({\r\n\t\t\t\tinitialize:function(){\r\n\t\t\t\t\tPageBase.superclass.initialize.call(this);\r\n\t\t\t\t\tthis.initUIExtConfig();\r\n\t\t\t\t},\r\n\t\t\t\tinit:function(){\r\n\t\t\t\t\tthis.bindEvents();\r\n\t\t\t\t\tthis.initPage(arguments[0]);\r\n\t\t\t\t},\r\n\t\t\t\t/**\r\n\t\t\t\t * @event\r\n\t\t\t\t * 页如初始化\r\n\t\t\t\t */\r\n\t\t\t\tinitPage:function(model){\r\n\t\t\t\t\r\n\t\t\t\t},\r\n\t\t\t\tinitUIExtConfig:function(){},\r\n\t\t\t\tlisteners :{\r\n\t\t\t\t},\r\n\t\t\t\tcontorlType:{\r\n\t\t\t\t\"button\":\"button\",\r\n\t\t\t\t\"form\":\"form\",\r\n\t\t\t\t\"menubutton\":\"menubutton\",\r\n\t\t\t\t\"panel\":\"panel\",\r\n\t\t\t\t\"jqgrid\":\"jqgrid\",\r\n\t\t\t\t\"grid\":\"grid\",\r\n\t\t\t\t\"textbox\":\"textbox\",\r\n\t\t\t\t\"money\":\"money\",\r\n\t\t\t\t\"number\":\"number\",\r\n\t\t\t\t\"typeahead \":\"typeahead\",\r\n\t\t\t\t\"combobox\":\"combobox\",\r\n\t\t\t\t\"combo\":\"combo\",\r\n\t\t\t\t\"comboztree\":\"comboztree\",\r\n\t\t\t\t\"reference\":\"reference\",\r\n\t\t\t\t\"combogrid\":\"combogrid\",\r\n\t\t\t\t\"suggest\":\"suggest\",\r\n\t\t\t\t\"datetime\":\"datetime\",\r\n\t\t\t\t\"checkbox\":\"checkbox\",\r\n\t\t\t\t\"upload\":\"upload\",\r\n\t\t\t\t\"appTabs\":\"appTabs\",\r\n\t\t\t\t\"tabs\":\"tabs\",\r\n\t\t\t\t\"ztree\":\"ztree\",\r\n\t\t\t\t\"xquery\":\"xquery\"\r\n\t\t\t\t},\r\n\t\t\t\t/**\r\n\t\t\t\t * @event\r\n\t\t\t\t * 初始事件绑定\r\n\t\t\t\t */\r\n\t\t\t  \tbindEvents:function(){\r\n\t\t\t  \t\tfor(var key in this.listeners){\r\n\t\t\t  \t\t\r\n\t\t\t  \t\tvar events=this.listeners[key],control=$A(\"#\"+key),findEvent=false,className=\"\";\r\n\t\t\t  \t\t\r\n\t\t\t  \t\t \r\n\t\t\t  \t\t  \tif (!control){\r\n\t\t\t  \t\t  \t\tif (window.console){\r\n\t\t\t  \t\t  \t\t\tconsole.log(\"id:\"+key+\"控件不在在\");\r\n\t\t\t  \t\t  \t\t}\r\n\t\t\t  \t\t  \t}\r\n\t\t\t  \t\t \r\n\t\t\t\t  \t\tif (control.data){\r\n\t\t\t\t  \t\t\tfor(var controlTypeKey in this.contorlType){\r\n\t\t\t\t\t  \t\t\tif (control.data(controlTypeKey)!=undefined){\r\n\t\t\t\t\t  \t\t\t\t className=this.contorlType[controlTypeKey];\r\n\t\t\t\t  \t\t\t\t\t break;\r\n\t\t\t\t\t  \t\t\t}  \r\n\t\t\t\t\t  \t\t} \r\n\t\t\t\t\t  \t\tfor(var eventName in events){\r\n\t\t\t\t\t  \t\t\tif (className){\r\n\t\t\t\t\t\t  \t\t\tvar eventObj={};\r\n\t\t\t\t  \t\t\t\t\teventObj[eventName]=events[eventName];\r\n\t\t\t\t  \t\t\t\t\tcontrol[className](\"unbind\",eventName);\r\n\t\t\t\t  \t\t\t\t\tcontrol[className](\"bind\",eventObj);\r\n\t\t\t\t\t  \t\t\t}else{\r\n\t\t\t\t\t  \t\t\t\tcontrol.off(eventName,events[eventName]);\r\n\t\t\t\t\t  \t\t\t\tcontrol.on(eventName,events[eventName]);\r\n\t\t\t\t\t  \t\t\t\t\r\n\t\t\t\t\t  \t\t\t}\r\n\t\t\t\t\t  \t\t}\r\n\t\t\t\t  \t\t}else if (control.setting){\r\n\t\t\t\t  \t\t\tfor(var eventName in events){\r\n\t\t\t\t  \t\t\t\tcontrol.off(eventName,events[eventName]);\r\n\t\t\t\t  \t\t\t\tcontrol.on(eventName,events[eventName]);\r\n\t\t\t\t\t  \t\t}\r\n\t\t\t\t  \t\t}\r\n\t\t\t  \t\t}\r\n\t\t\t  \t\t/*if (key.indexOf(\"_\")>-1){\r\n\t\t\t  \t\t\tvar eventparams=key.split(\"_\");\r\n\t\t\t  \t\t\tif (eventparams.length==2){\r\n\t\t\t  \t\t\t\tvar id=eventparams[0],eventName=eventparams[1],control=$A(\"#\"+id),findEvent=false;;\r\n\t\t\t  \t\t\t\tfor(var controlTypeKey in this.contorlType){\r\n\t\t\t  \t\t\t\t\tif (control){\r\n\t\t\t  \t\t\t\t\tif (control.data(controlTypeKey)){\r\n\t\t\t  \t\t\t\t\t\tvar className=this.contorlType[controlTypeKey];\r\n\t\t\t  \t\t\t\t\t\tvar eventObj={};\r\n\t\t\t  \t\t\t\t\t\teventObj[eventName]=this.listeners[key];\r\n\t\t\t  \t\t\t\t\t\tcontrol[className](\"bind\",eventObj);\r\n\t\t\t  \t\t\t\t\t\tfindEvent=true;\r\n\t\t\t  \t\t\t\t\t\tbreak;\r\n\t\t\t  \t\t\t\t\t}\r\n\t\t\t  \t\t\t\t\t}\r\n\t\t\t  \t\t\t\t}\r\n\t\t\t  \t\t\t\tif (!findEvent){\r\n\t\t\t  \t\t\t\t\tcontrol.on(eventName,this.listeners[key]);\r\n\t\t\t  \t\t\t\t}\r\n\t\t\t  \r\n\t\t\t  \t\t\t}\r\n\t\t\t  \t\t}*/\r\n\t\t\t  \t\r\n\t\t\t  \t\r\n\t\t\t  \t}\r\n\r\n\t\t       \r\n    \t\t});\r\n\t\t\t\r\n\t\t return PageBase;\r\n\t\t\t\r\n\t\t\r\n});\n",
    "/**\r\n * 系统选项设置\r\n */\r\ndefine('app/widgets/app-frags',[\"app/core/app-core\"],function($A){\r\n\t$A.frags={\r\n\t\t\t//aoo.dialog\r\n\t\t\tdialogFrag:'<div class=\"dialog\" id=\"${dialogId}\" >'\r\n\t\t\t\t\t+'<div class=\"dialog-header\" onselectstart=\"return false;\" oncopy=\"return false;\" onpaste=\"return false;\" oncut=\"return false;\">'\r\n\t\t\t\t\t\t+'<div class=\"closebg\"><a class=\"close\">×</a></div>'\r\n\t\t\t\t\t\t+'<h5>${title}</h5>'\r\n\t\t\t\t\t+'</div>'\r\n\t\t\t\t+'</div>'\r\n\t\t\t,\r\n\t\t\t//app.dialog\r\n\t\t\tdialogNoHeaderFrag:'<div class=\"dialog\" id=\"${dialogId}\" style=\"visibility:hidden;\"></div>'\r\n\t\t\t,\r\n\t\t\t// app.dialog shadow\r\n\t\t\tdialogProxy:'<div id=\"dialogProxy\" class=\"dialog dialogProxy\">'\r\n\t\t\t\t\t\t//+'<div class=\"dialog-header\" >'\r\n\t\t\t\t\t\t//+'<div class=\"closebg\"></div>'\r\n\t\t\t\t\t\t//+'<h5></h5>'\r\n\t\t\t\t\t\t//+'</div>'\r\n\t\t\t\t\t+'</div>'\r\n\t\t\t,\r\n\t\t\t//other  fragment\r\n\t\t\tglobalBodyFrag:'<!--遮盖屏幕-->'\r\n\t\t\t\t+'<div id=\"_alertBackground\" class=\"alertBackground\"></div>'\r\n\t\t\t\t+'<div id=\"_dialogMask\" class=\"dialog-mask\"></div>'\r\n\t\t\t,\r\n\t\t\t//app.alertMsg\r\n\t\t\talertBoxFrag:'<div id=\"_alertMsgBox\" class=\"alert\"><div class=\"alertContent\"><i class=\"${icon}\"></i><span><a href=\"javascript:void(0)\" onclick=\"$A.messager.toggleDetail();\">${message}</a></span><tpl if=\\\"\\'${detail}\\'!=\\'\\'\\\"><div id=\"__alertDetails\" class=\"alertDetail\" style=\\\"display:none;\\\">${detail}</div></tpl></div><div class=\"alertFooter\"><div class=\"btn-toolbar\">${butFragment}</div></div></div>'\r\n\t\t\t,\r\n\t\t\talertBoxFrag_NoDetail:'<div id=\"_alertMsgBox\" class=\"alert\"><div class=\"alertContent\"><i class=\"${icon}\"></i><span>${message}</span><tpl if=\\\"\\'${detail}\\'!=\\'\\'\\\"><div id=\"__alertDetails\" class=\"alertDetail\" style=\\\"display:none;\\\">${detail}</div></tpl></div><div class=\"alertFooter\"><div class=\"btn-toolbar\">${butFragment}</div></div></div>'\r\n\t\t\t,\r\n\t\t\t//tips\r\n\t\t\ttipsBoxFrag:'<div id=\"_tipsMsgBox\" class=\"tips\"><div class=\"tipsContent\"><i class=\"${icon}\"></i><span><a href=\"javascript:void(0)\">${message}</a></span></div></div>'\r\n\t\t\t,\r\n\t\t\talertButFrag:'<a class=\"btn #css#\" rel=\"#callback#\" onclick=\"$A.messager.close()\" href=\"javascript:\">#butMsg#</a>'\r\n\t\t\t,\r\n\t\t\tnavTabCM:'<ul id=\"navTabCM\">'\r\n\t\t\t\t\t+'<li rel=\"reload\">刷新标签页</li>'\r\n\t\t\t\t\t+'<li rel=\"closeCurrent\">关闭标签页</li>'\r\n\t\t\t\t\t+'<li rel=\"closeOther\">关闭其它标签页</li>'\r\n\t\t\t\t\t+'<li rel=\"closeAll\">关闭全部标签页</li>'\r\n\t\t\t\t+'</ul>'\r\n\t\t\t,\r\n\t\t\tdialogCM:'<ul id=\"dialogCM\">'\r\n\t\t\t\t\t+'<li rel=\"closeCurrent\">关闭弹出窗口</li>'\r\n\t\t\t\t\t+'<li rel=\"closeOther\">关闭其它弹出窗口</li>'\r\n\t\t\t\t\t+'<li rel=\"closeAll\">关闭全部弹出窗口</li>'\r\n\t\t\t\t+'</ul>'\r\n\t\t\t,\r\n\t\t\texternalFrag:'iframe src=\"{url}\" style=\"width:100%;height:{height};\" frameborder=\"no\" border=\"0\" marginwidth=\"0\" marginheight=\"0\"></iframe>'\r\n\t\t\t,\r\n\t\t\tstatusCode_503:'服务器当前负载过大或者正在维护!'\r\n\t\t\t,\r\n\t\t\tvalidateFormError:'提交数据不完整，{0}个字段有错误，请改正后再提交!'\r\n\t\t\t,\r\n\t\t\tsessionTimout:'会话超时，请重新登录!'\r\n\t\t\t,\r\n\t\t\talertSelectMsg:'请选择信息!'\r\n\t\t\t,\r\n\t\t\tforwardConfirmMsg:'继续下一步!'\r\n\t\t\t,\r\n\t\t\tmainTabTitle:'我的主页'\r\n\t};\r\n\treturn $A.frags;\r\n});\n",
    "define('app/widgets/window/app-messager',[\"app/core/app-jquery\",\"app/core/app-core\",\"app/widgets/app-frags\",localeFile],function($,$A,$frags,$lang) {\r\n\tvar $msglang = $lang.messager;\r\n\tvar that = null;\r\n\tthat = {\r\n\t\t\t\r\n\t\t/**\r\n\t\t * 消息框id\r\n\t\t */\r\n\t\t_boxId: \"#_alertMsgBox\",\r\n\t\t\r\n\t\t/**\r\n\t\t * Tips框ID\r\n\t\t */\r\n\t\t_tipsId:\"#_tipsMsgBox\",\r\n\t\t\r\n\t\t/**\r\n\t\t * 消息框背景\r\n\t\t */\r\n\t\t_bgId: \"#_alertBackground\",\r\n\t\t\r\n\t\t/**\r\n\t\t * 关闭时长\r\n\t\t */\r\n\t\t_closeTimer: null,\r\n\t\t\r\n\t\t/**\r\n\t\t * 消息类型\r\n\t\t */\r\n\t\t_types: {error:\"error\", info:\"info\", warn:\"warn\", correct:\"correct\", confirm:\"confirm\"},\r\n\r\n\t\t/**\r\n\t\t * 取得消息框标题\r\n\t\t */\r\n\t\t_getTitle: function(key){\r\n\t\t\treturn $msglang[key.toUpperCase()];\r\n\t\t},\r\n\t\t\r\n\t\t/**\r\n\t\t * 按回车键事件\r\n\t\t */\r\n\t\t_keydownOk: function(event){\r\n\t\t\tif (event.keyCode == $A.keyCode.ENTER) event.data.target.trigger(\"click\");\r\n\t\t},\r\n\t\t\r\n\t\t/**\r\n\t\t * 按取消键事件\r\n\t\t */\r\n\t\t_keydownEsc: function(event){\r\n\t\t\tif (event.keyCode == $A.keyCode.ESC||event.keyCode == $A.keyCode.ENTER) event.data.target.trigger(\"click\");\r\n\t\t},\r\n\t\ttoggleDetail:function(){\r\n\t\t\t$('#__alertDetails').toggle();\r\n\t\t\tthis.relayout();\r\n\t\t},\r\n\t\trelayout:function(){\r\n\t\t\tvar $box=$(this._boxId);\r\n\t\t\tvar pos = $box.attr(\"pos\");\r\n\t\t\tif(pos == \"top\"){\r\n\t\t\t\t$box.css( {\"left\":($(window).width() - $box.width())/2 + \"px\",\"top\":\"0px\"});\r\n\t\t\t}else if(pos==\"bottom\"){\r\n\t\t\t\t$box.css( {\"bottom\":\"0px\",\"right\":\"0px\"});\r\n\t\t\t}else{\r\n\t\t\t\t$box.css( {\"left\":($(window).width() - $box.width())/2 + \"px\",\"top\":($(window).height() - $box.height())/2 + \"px\"} );\r\n\t\t\t}\r\n\t\t},\r\n\t\t/**\r\n\t\t * 打开消息框\r\n\t\t * @param {Object} type 消息类型\r\n\t\t * @param {Object} msg 消息内容\r\n\t\t * @param {Object} buttons [button1, button2] 消息按钮\r\n\t\t */\r\n\t\t_open: function(type, msg, buttons,pos){\r\n\t\t\t$(this._boxId).remove();\r\n\t\t\tvar butsHtml = \"\";\r\n\t\t\tif (buttons) {\r\n\t\t\t\tfor (var i = 0; i < buttons.length; i++) {\r\n\t\t\t\t\tvar sRel = buttons[i].call ? \"callback\" : \"\";\r\n\t\t\t\t\tvar css = buttons[i].css ? buttons[i].css : \"\";\r\n\t\t\t\t\tbutsHtml += $frags[\"alertButFrag\"].replace(\"#butMsg#\", buttons[i].name).replace(\"#callback#\", sRel).replace(\"#css#\", css);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tvar msgObj;\r\n\t\t\tif(typeof msg==\"string\"){\r\n\t\t\t\tmsgObj=$A.jsonEval(msg);\r\n\t\t\t}else{\r\n\t\t\t\tmsgObj=msg;\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tif(msgObj.message == null&&msgObj.detail==null){\r\n\t\t\t\tmsgObj={\r\n\t\t\t\t\ttype:type,\r\n\t\t\t\t\ticon:type,\r\n\t\t\t\t\ttitle:this._getTitle(type),\r\n\t\t\t\t\tmessage:msg,\r\n\t\t\t\t\tbutFragment:butsHtml\r\n\t\t\t\t};\r\n\t\t\t}else{\r\n\t\t\t\tmsgObj = $.extend({\r\n\t\t\t\t\ttype:type,\r\n\t\t\t\t\ticon:type,\r\n\t\t\t\t\ttitle:this._getTitle(type),\r\n\t\t\t\t\tbutFragment:butsHtml\r\n\t\t\t\t},msgObj);\r\n\t\t\t}\r\n\t\t\tvar tpl = msgObj.detail?$frags[\"alertBoxFrag\"]:$frags[\"alertBoxFrag_NoDetail\"];\r\n\t\t\t\r\n\t\t\tvar boxHtml = $template(tpl,msgObj);\r\n\t\t\t$(boxHtml).appendTo(\"body\");\r\n\t\t\tvar $box=$(this._boxId);\r\n\t\t\t$box.attr(\"pos\",pos);\r\n\t\t\tthis.relayout();\r\n\t\t\t\r\n\t\t\tif (this._closeTimer) {\r\n\t\t\t\tclearTimeout(this._closeTimer);\r\n\t\t\t\tthis._closeTimer = null;\r\n\t\t\t}\r\n\t\t\tif (this._types.info == type || this._types.correct == type){\r\n\t\t\t\tthis._closeTimer = setTimeout(function(){that.close();}, 3500);\r\n\t\t\t} else {\r\n\t\t\t\t$(this._bgId).show();\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tvar jButs = $(this._boxId).find(\"a.btn\");\r\n\t\t\tvar jCallButs = jButs.filter(\"[rel=callback]\");\r\n\t\t\tvar jDoc = $(document);\r\n\t\t\tfor (var i = 0; i < buttons.length; i++) {\r\n\t\t\t\tif (buttons[i].call) jCallButs.eq(i).click(buttons[i].call);\r\n\t\t\t\tif (buttons[i].keyCode == $A.keyCode.ENTER) {\r\n\t\t\t\t\tjDoc.bind(\"keydown\",{target:jButs.eq(i)}, this._keydownOk);\r\n\t\t\t\t}\r\n\t\t\t\tif (buttons[i].keyCode == $A.keyCode.ESC) {\r\n\t\t\t\t\tjDoc.bind(\"keydown\",{target:jButs.eq(i)}, this._keydownEsc);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn $box;\r\n\t\t},\r\n\t\t\r\n\t\t/**\r\n\t\t * 关系消息框\r\n\t\t */\r\n\t\tclose: function(fadeSpeed){\r\n\t\t\t$(document).unbind(\"keydown\", this._keydownOk).unbind(\"keydown\", this._keydownEsc);\r\n\t\t\t$msgBox = $(this._boxId);\r\n\t\t\t//var pos = $msgBox.attr(\"pos\");\r\n\t\t\tif(fadeSpeed){\r\n\t\t\t\t$msgBox.fadeOut(fadeSpeed,function(){\r\n\t\t\t\t\t$msgBox.remove();\r\n\t\t\t\t});\r\n\t\t\t}else{\r\n\t\t\t\t$msgBox.hide();\r\n\t\t\t\tsetTimeout(function(){\r\n\t\t\t\t\t\t$msgBox.remove();\r\n\t\t\t\t}, 500);\r\n\t\t\t\t$(this._bgId).hide();\r\n\t\t\t}\r\n\t\t\t\r\n\t\t},\r\n\t\t\r\n\t\t/**\r\n\t\t * 打开错误消息框\r\n\t\t */\r\n\t\terror: function(msg, options) {\r\n\t\t\tthis._alert(this._types.error, msg, options);\r\n\t\t},\r\n\t\t\r\n\t\t/**\r\n\t\t * 打开普通消息框\r\n\t\t */\r\n\t\tinfo: function(msg, options) {\r\n\t\t\tthis._alert(this._types.info, msg, options,\"bottom\");\r\n\t\t},\r\n\t\t\r\n\t\t/**\r\n\t\t * 打开警告消息框\r\n\t\t */\r\n\t\twarn: function(msg, options) {\r\n\t\t\tthis._alert(this._types.warn, msg, options);\r\n\t\t},\r\n\t\t\r\n\t\t/**\r\n\t\t * 打开成功消息框\r\n\t\t */\r\n\t\tcorrect: function(msg, options) {\r\n\t\t\tthis._tips(this._types.correct, msg, options,\"center\");\r\n\t\t},\r\n\t\t\r\n\t\t/**\r\n\t\t * 打开消息框\r\n\t\t */\r\n\t\t_alert: function(type, msg, options,pos) {\r\n\t\t\t\r\n\t\t\tvar op = {okName:$msglang.OK, okCall:null,okCss:\"btn-primary singlebtn\"};\r\n\t\t\t$.extend(op, options);\r\n\t\t\tvar buttons = [\r\n\t\t\t\t{name:op.okName, call: op.okCall, keyCode:$A.keyCode.ENTER,css:op.okCss}\r\n\t\t\t];\r\n\t\t\tvar $dlg=this._open(type, msg, buttons,pos);\r\n\t\t\t$(\"a\",$dlg).focus();\r\n\t\t},\r\n\t\t\r\n\t\t_tips:function(type,msg,options,pos){\r\n\t\t\t$(this._tipsId).remove();\r\n\t\t\tvar msgObj = {\r\n\t\t\t\t\t\"icon\":type,\r\n\t\t\t\t\t\"message\":msg\r\n\t\t\t};\r\n\t\t\t\r\n\t\t\toptions = options||{};\r\n\t\t\tvar displayTime = options.displayTime || 1500;//默认两秒\r\n\t\t\tvar fadeSpeed = options.fadeSpeed || 800;//默认两秒\r\n\t\t\t\r\n\t\t\tvar tpl = $frags[\"tipsBoxFrag\"];\r\n\t\t\tvar boxHtml = $template(tpl,msgObj);\r\n\t\t\t\r\n\t\t\t$(boxHtml).appendTo(\"body\");\r\n\t\t\t\r\n\t\t\tvar $box=$(this._tipsId);\r\n\t\t\t$box.show();\r\n\t\t\t$box.attr(\"pos\",pos);\r\n\t\t\tvar pos = $box.attr(\"pos\");\r\n\t\t\tif(pos == \"top\"){\r\n\t\t\t\t$box.css( {\"left\":($(window).width() - $box.width())/2 + \"px\",\"top\":\"0px\"});\r\n\t\t\t}else if(pos==\"bottom\"){\r\n\t\t\t\t$box.css( {\"bottom\":\"0px\",\"right\":\"0px\"});\r\n\t\t\t}else{\r\n\t\t\t\t$box.css( {\"left\":($(window).width() - $box.width())/2 + \"px\",\"top\":45 + \"px\"} );\r\n\t\t\t}\r\n\t\t\t$box.show();\r\n\t\t\tsetTimeout(function(){\r\n/*\t\t\t\t$box.fadeOut(fadeSpeed,function(){\r\n\t\t\t\t\t$box.remove();\r\n\t\t\t\t});*/\r\n\t\t\t\t$box.animate({\r\n\t\t\t\t\t\"top\":\"-=38\",\r\n\t\t\t\t\t\"opacity\":0\r\n\t\t\t\t},fadeSpeed,function(){\r\n\t\t\t\t\t$box.remove();\r\n\t\t\t\t});\r\n\t\t\t\t\r\n\t\t\t},displayTime);\r\n\t\t},\r\n\t\t\r\n\t\t/**\r\n\t\t * 打开确认消息框\r\n\t\t * @param {Object} msg 消息内容\r\n\t\t * @param {Object} options {okName, okCal, cancelName, cancelCall} 按钮\r\n\t\t */\r\n\t\tconfirm: function(msg, options) {\r\n\t\t\tvar op = {okName:$msglang.OK, okCall:null,okCss:\"btn-primary\", cancelName:$msglang.CANCEL, cancelCall:null,button:null};\r\n\t\t\t$.extend(op, options);\r\n\r\n\t\t\tvar _self=this;\r\n\t\t\t/*\r\n\t\t\tvar buttons = [\r\n\t\t\t\t{name:op.okName, call: op.okCall, keyCode:$A.keyCode.ENTER,css:op.okCss},\r\n\t\t\t\t{name:op.cancelName, call: op.cancelCall, keyCode:$A.keyCode.ESC}\r\n\t\t\t];\r\n\t\t\t*/\r\n\t\t\t//暂时去掉热键\r\n\t\t\tvar buttons = [\r\n\t\t\t\t{name:op.okName, call: op.okCall, css:(op.button&&op.button==_self.BUTTONS.OK)?op.okCss:\"\"},\r\n\t\t\t\t{name:op.cancelName, call: op.cancelCall, keyCode:$A.keyCode.ESC,css:((!op.button)||op.button==_self.BUTTONS.CANCEL)?op.okCss:\"\"}\r\n\t\t\t];\r\n\t\t\tthis._open(this._types.confirm, msg, buttons);\r\n\t\t},\r\n\t\tBUTTONS:{\r\n\t\t  OK:'OK',\r\n\t\t  CANCEL:'CANCEL'\r\n\t\t}\r\n\t};\r\n\t$A.messager = that;\r\n\treturn $A.messager;\r\n});\r\n\r\n\n",
    "/**\r\n * 系统选项设置\r\n */\r\ndefine('app/core/app-options',[\"app/core/app-core\",localeFile],function(App,AppLang){\r\n\tApp.options={\r\n\t\t/**\r\n\t\t * app控件的默认值\r\n\t\t */\r\n\t\tappDefaults:{\r\n\t\t\txquery:{\r\n\t\t\t\tclassName: 'xquery'\r\n\t\t\t},\r\n\t\t\tXqueryBox:{\r\n\t\t\t\tclassName: 'app-xquerybox'\r\n\t\t\t},\r\n\t\t\tTextbox: {\r\n\t\t\t\t/**\r\n\t\t\t\t * 隐藏值\r\n\t\t\t\t * @memberof textbox-class\r\n\t\t\t\t * @property {String} [value] 值\r\n\t\t\t\t */\r\n\t\t\t\tvalue: '',\r\n\t\t\t\t/**\r\n\t\t\t\t * 显示值\r\n\t\t\t\t * @memberof textbox-class\r\n\t\t\t\t * @property {String} [text] 显示值\r\n\t\t\t\t */\r\n\t\t\t\ttext: '',\r\n\t\t\t\t/**\r\n\t\t\t\t * 可输入的最长字符数\r\n\t\t\t\t * @memberof textbox-class\r\n\t\t\t\t * @property {Number} [maxLength] 字符数\r\n\t\t\t\t */\r\n\t\t\t\tmaxLength: null,\r\n\t\t\t\t/**\r\n\t\t\t\t * 只读状态\r\n\t\t\t\t * @memberof textbox-class\r\n\t\t\t\t * @property {Boolean} [readonly=false] 只读状态\r\n\t\t\t\t */\r\n\t\t\t\treadonly: false,\r\n\t\t\t\t/**\r\n\t\t\t\t * 禁用状态\r\n\t\t\t\t * @memberof textbox-class\r\n\t\t\t\t * @property {Boolean} [disabled=false] 禁用状态\r\n\t\t\t\t */\r\n\t\t\t\tdisabled: false,\r\n\t\t\t\t/**\r\n\t\t\t\t * 控件的宽度\r\n\t\t\t\t * @property {Number|String} [width] 宽度\r\n\t\t\t\t * @todo 默认由css控制\r\n\t\t\t\t * @todo 可以指定具体像素宽度[px] eg.150px\r\n\t\t\t\t * @todo 也可以指定百分比宽度[%]，百分比宽度为相对于父级元素的宽度 eg.100%\r\n\t\t\t\t * @memberof textbox-class\r\n\t\t\t\t */\r\n\t\t\t\twidth: '',\r\n\t\t\t\t/**\r\n\t\t\t\t * 显示值文本框的css样式\r\n\t\t\t\t * @memberof textbox-class\r\n\t\t\t\t * @property {Style} [style] 显示值文本框的css样式\r\n\t\t\t\t * @example &lt;input &#9;class=\"app-textbox\"\r\n\t\t\t\t * &#9;style=\"color:red;text-align:center;\"\r\n\t\t\t\t * &#9;_options=\"{value:'德国 Germany'}\"\r\n\t\t\t\t * />\r\n\t\t\t\t */\r\n\t\t\t\tstyle: '',\r\n\t\t\t\t/**\r\n\t\t\t\t * 包装器的css样式\r\n\t\t\t\t * @memberof textbox-class\r\n\t\t\t\t * @property {Style} [wrapstyle] 包装器的css样式\r\n\t\t\t\t * @example &lt;input &#9;class=\"app-textbox\"\r\n\t\t\t\t * &#9;wrapstyle=\"height:60px;\"\r\n\t\t\t\t * />\r\n\t\t\t\t */\r\n\t\t\t\twrapstyle: '',\r\n\t\t\t\t/**\r\n\t\t\t\t * 显示值是否为多行文本框\r\n\t\t\t\t * @memberof textbox-class\r\n\t\t\t\t * @property {Boolean} [multiline=false] 多行\r\n\t\t\t\t * @example &lt;input &#9;class=\"app-textbox\"\r\n\t\t\t\t * &#9;wrapstyle=\"height:60px;\"\r\n\t\t\t\t * &#9;multiline=\"true\"\r\n\t\t\t\t * />\r\n\t\t\t\t */\r\n\t\t\t\tmultiline: false,\r\n\t\t\t\t/**\r\n\t\t\t\t * 是否显示清除按钮\r\n\t\t\t\t * <PRE>多选状态 默认为true</PRE>\r\n\t\t\t\t * @memberof textbox-class\r\n\t\t\t\t * @property {Boolean} [clearbtn=false] 显示清除按钮\r\n\t\t\t\t */\r\n\t\t\t\tclearbtn: false,\r\n\t\t\t\t/**\r\n\t\t\t\t * 辅助提示信息\r\n\t\t\t\t * @memberof textbox-class\r\n\t\t\t\t * @property {String} [tips] 辅助提示信息\r\n\t\t\t\t */\r\n\t\t\t\ttips: '',\r\n\t\t\t\t/**\r\n\t\t\t\t * <span class=\"type-signature static\">使用时 需考虑输入法影响键码</span>\r\n\t\t\t\t * 定义如何筛选按下的键，如果为自定义事件 返回false阻止输入\r\n\t\t\t\t * <PRE>内置过滤类型\r\n\t\t\t\t * positiveNumber: 只允许输入 0-9，小数点\r\n\t\t\t\t * number: 只允许输入 0-9，小数点，正负号\r\n\t\t\t\t * 0-9：只允许输入 0-9\r\n\t\t\t\t * all：任意输入\r\n\t\t\t\t * </PRE>\r\n\t\t\t\t * @memberof textbox-class\r\n\t\t\t\t * @property {String|Function} [filter] 键盘输入的过滤器\r\n\t\t\t\t */\r\n\t\t\t\tfilter: null,\r\n\t\t\t\t/**\r\n\t\t\t\t * <span class=\"type-signature static\">该属性与filter属性只能设置一个，当设置forbidWord时，filter失效</span>\r\n\t\t\t\t * 禁止输入的字符\r\n\t\t\t\t * @memberof textbox-class\r\n\t\t\t\t * @property {String} [forbidWord] 禁止输入的字符\r\n\t\t\t\t */\r\n\t\t\t\tforbidWord: null,\r\n\t\t\t\t/**\r\n\t\t\t\t * <span class=\"type-signature static\">该属性与filter属性只能设置一个，当设置permitWord时，filter失效</span>\r\n\t\t\t\t * 允许输入的字符\r\n\t\t\t\t * @memberof textbox-class\r\n\t\t\t\t * @property {String} [permitWord] 允许输入的字符\r\n\t\t\t\t */\r\n\t\t\t\tpermitWord: null,\r\n\t\t\t\t/**\r\n\t\t\t\t * 是否去除前后空格\r\n\t\t\t\t * @memberof textbox-class\r\n\t\t\t\t * @property {Boolean} [trim=true] 去除\r\n\t\t\t\t */\r\n\t\t\t\ttrim: true,\r\n\t\t\t\tclassName: 'app-textbox'\r\n\t\t\t},\r\n\t\t\tCombo: {\r\n\t\t\t\t/**\r\n\t\t\t\t * 数据对象中作为隐藏值的属性名\r\n\t\t\t\t * @memberof combo-class\r\n\t\t\t\t * @property {String} [valuefield=id] 隐藏值属性名\r\n\t\t\t\t */\r\n\t\t\t\tvaluefield: 'id',\r\n\t\t\t\t/**\r\n\t\t\t\t * 数据对象中作为显示值的属性名\r\n\t\t\t\t * @memberof combo-class\r\n\t\t\t\t * @property {String} [textfield=name] 显示值属性名\r\n\t\t\t\t */\r\n\t\t\t\ttextfield: 'name',\r\n\t\t\t\t/**\r\n\t\t\t\t * 查询参数\r\n\t\t\t\t * <PRE>\r\n\t\t\t\t * \t如果值为Function,如果要想置空查询条件，则必须返回{}对象\r\n\t\t\t\t * </PRE>\r\n\t\t\t\t * @memberof combo-class\r\n\t\t\t\t * @property {Json|Function} [parameter] 查询参数\r\n\t\t\t\t * @example &lt;input &#9;class=\"app-combobox\"\r\n\t\t\t\t * &#9;_options=\"{\r\n\t\t\t\t * &#9;&#9;parameter: {param:'paramVal'},\r\n\t\t\t\t * &#9;&#9;valuefield: 'value',\r\n\t\t\t\t * &#9;&#9;textfield: 'text'\r\n\t\t\t\t * &#9;&#9;action: 'html/example/app-input/data/data.valueAndText'\r\n\t\t\t\t * &#9;}\"\r\n\t\t\t\t * />\r\n\t\t\t\t */\r\n\t\t\t\tparameter: null,\r\n\t\t\t\t/**\r\n\t\t\t\t * 自动隐藏打开按钮\r\n\t\t\t\t * @memberof combo-class\r\n\t\t\t\t * @property {Boolean} [autoHideOpenBtn=false] 不自动隐藏\r\n\t\t\t\t */\r\n\t\t\t\tautoHideOpenBtn: false,\r\n\t\t\t\t/**\r\n\t\t\t\t * 是否自动隐藏下拉面板\r\n\t\t\t\t * @memberof combo-class\r\n\t\t\t\t * @property {Boolean} [fadeout=false] 不自动\r\n\t\t\t\t */\r\n\t\t\t\tfadeout: false,\r\n\t\t\t\t/**\r\n\t\t\t\t * 下拉面板的宽度\r\n\t\t\t\t * @todo 宽度默认为空，继承至input组件的宽度\r\n\t\t\t\t * @todo 可以指定具体像素宽度[px] eg.250\r\n\t\t\t\t * @todo 也可以指定百分比宽度[%]，百分比宽度为相对于面板所属的组件宽度 eg. 150%\r\n\t\t\t\t * @memberof combo-class\r\n\t\t\t\t * @property {Number|String} [panelwidth] 下拉面板的宽度\r\n\t\t\t\t */\r\n\t\t\t\tpanelwidth: '',\r\n\t\t\t\t/**\r\n\t\t\t\t * 面板高度\r\n\t\t\t\t * @memberof combo-class\r\n\t\t\t\t * @property {Number} [panelheight=265] 下拉面板的高度\r\n\t\t\t\t */\r\n\t\t\t\tpanelheight: 265,\r\n\t\t\t\t/**\r\n\t\t\t\t * 自定义面板高度\r\n\t\t\t\t * @memberof combo-class\r\n\t\t\t\t * @property {Number} [customPanelHeight=0] 高度\r\n\t\t\t\t */\r\n\t\t\t\tcustomPanelHeight: 0,\r\n\t\t\t\t/**\r\n\t\t\t\t * 自定义面板在主面板的相对位置\r\n\t\t\t\t * top 上边\r\n\t\t\t\t * bottom 下边\r\n\t\t\t\t * @memberof combo-class\r\n\t\t\t\t * @property {String} [customPanelPosition=bottom]\r\n\t\t\t\t */\r\n\t\t\t\tcustomPanelPosition: 'bottom',\r\n\t\t\t\t/**\r\n\t\t\t\t * <span class=\"type-signature static\">override</span>\r\n\t\t\t\t * 是否拥有一个打开按钮\r\n\t\t\t\t * @memberof combo-class\r\n\t\t\t\t * @property {Boolean} [openbtn=true] 拥有打开按钮\r\n\t\t\t\t */\r\n\t\t\t\topenbtn: true,\r\n\t\t\t\t/**\r\n\t\t\t\t * 格式化配置\r\n\t\t\t\t * <PRE>\r\n\t\t\t\t * 函数类型：eg.function(node){ return node.code + '-' + node.name ;}\r\n\t\t\t\t * 通过setSelectedNode方法设置时，调用该函数进行格式化\r\n\t\t\t\t * 该函数接收选中节点作为参数，返回一个字符串作为显示值\r\n\t\t\t\t * 字符串类型：eg. code\r\n\t\t\t\t * 指定一个实体的属性\r\n\t\t\t\t * 表达式类型：eg.{code}-{name}\r\n\t\t\t\t * 使用{}包裹字段并使用实体进行替换\r\n\t\t\t\t * </PRE>\r\n\t\t\t\t * @memberof combo-class\r\n\t\t\t\t * @property {Function|String} [formatter=null] 格式化配置\r\n\t\t\t\t */\r\n\t\t\t\tformatter: null,\r\n\t\t\t\t/**\r\n\t\t\t\t * 打开下拉面板\r\n\t\t\t\t * @memberof combo-class\r\n\t\t\t\t * @property {Array} keyShowPanel=[{keyCode:App.keyCode.DOWN, ctrlKey:true}\r\n\t\t\t\t * \t\t\t\t,{keyCode:App.keyCode.UP, ctrlKey:true}] 按键值数组\r\n\t\t\t\t */\r\n\t\t\t\tkeyShowPanel: [{keyCode:App.keyCode.DOWN, ctrlKey:true}\r\n\t\t\t\t\t\t\t\t,{keyCode:App.keyCode.UP, ctrlKey:true}],\r\n\t\t\t\t/**\r\n\t\t\t\t * 打开下拉面板\r\n\t\t\t\t * @memberof combo-class\r\n\t\t\t\t * @property {Array} keyHidePanel=[App.keyCode.ESC,App.keyCode.TAB] 按键值数组\r\n\t\t\t\t */\r\n\t\t\t\tkeyHidePanel: [App.keyCode.ESC, App.keyCode.TAB],\r\n\t\t\t\t/**\r\n\t\t\t\t * 定位下一个节点\r\n\t\t\t\t * @memberof combo-class\r\n\t\t\t\t * @property {Array} keyNextNode=[App.keyCode.DOWN] 按键值数组\r\n\t\t\t\t */\r\n\t\t\t\tkeyNextNode: [App.keyCode.DOWN],\r\n\t\t\t\t/**\r\n\t\t\t\t * 定位上一个节点\r\n\t\t\t\t * @memberof combo-class\r\n\t\t\t\t * @property {Array} keyPrevNode=[App.keyCode.UP] 按键值数组\r\n\t\t\t\t */\r\n\t\t\t\tkeyPrevNode: [App.keyCode.UP],\r\n\t\t\t\t/**\r\n\t\t\t\t * 选中当前节点\r\n\t\t\t\t * @memberof combo-class\r\n\t\t\t\t * @property {Array} keyPrevNode=[App.keyCode.ENTER] 按键值数组\r\n\t\t\t\t */\r\n\t\t\t\tkeyPickNode: [App.keyCode.ENTER],\r\n\t\t\t\tclassName: 'app-combo'\r\n\t\t\t},\r\n\t\t\tCombobox: {\r\n\t\t\t\t/**\r\n\t\t\t\t * 要加载数据的url，也可以通过action设置\r\n\t\t\t\t * @memberof combobox-class\r\n\t\t\t\t * @property {Url} [url] url数据源\r\n\t\t\t\t */\r\n\t\t\t\turl: '',\r\n\t\t\t\t/**\r\n\t\t\t\t * 是否允许多选\r\n\t\t\t\t * @memberof combobox-class\r\n\t\t\t\t * @property {Boolean} [multiple=false] 多选\r\n\t\t\t\t * />\r\n\t\t\t\t */\r\n\t\t\t\tmultiple: false,\r\n\t\t\t\t/**\r\n\t\t\t\t * 本地数据源，\r\n\t\t\t\t * 当配置该属性时，优先使用该数据源 并忽略action\r\n\t\t\t\t * @memberof combobox-class\r\n\t\t\t\t * @property {Json} [data] 本地数据源\r\n\t\t\t\t */\r\n\t\t\t\tdata: null,\r\n\t\t\t\t/**\r\n\t\t\t\t * <span class=\"type-signature static\">override</span>\r\n\t\t\t\t * 下拉面板高度\r\n\t\t\t\t * @memberof combobox-class\r\n\t\t\t\t * @property {Number} [panelheight=242] 下拉面板的高度\r\n\t\t\t\t */\r\n\t\t\t\tpanelheight: 242,\r\n\t\t\t\t/**\r\n\t\t\t\t * 定位下一个节点\r\n\t\t\t\t * @memberof combobox-class\r\n\t\t\t\t * @property {Array} keyNextNode=[App.keyCode.DOWN,App.keyCode.RIGHT] 按键值数组\r\n\t\t\t\t */\r\n\t\t\t\tkeyNextNode: [App.keyCode.DOWN,App.keyCode.RIGHT],\r\n\t\t\t\t/**\r\n\t\t\t\t * 定位上一个节点\r\n\t\t\t\t * @memberof combobox-class\r\n\t\t\t\t * @property {Array} keyPrevNode=[App.keyCode.UP,App.keyCode.LEFT] 按键值数组\r\n\t\t\t\t */\r\n\t\t\t\tkeyPrevNode: [App.keyCode.UP,App.keyCode.LEFT],\r\n\t\t\t\t/**\r\n\t\t\t\t * 允许联想\r\n\t\t\t\t * @memberof combobox-class\r\n\t\t\t\t * @property {Boolean} [usesuggest=false] 允许联想\r\n\t\t\t\t */\r\n\t\t\t\tusesuggest: false,\r\n\t\t\t\t/**\r\n\t\t\t\t * 是否允许删除节点\r\n\t\t\t\t * @memberof combobox-class\r\n\t\t\t\t * @property {Boolean} [nodeDelete=false] 不允许\r\n\t\t\t\t */\r\n\t\t\t\tnodeDelete: false,\r\n\t\t\t\t/**\r\n\t\t\t\t * 是否允许按键可清除值\r\n\t\t\t\t * @memberof combobox-class\r\n\t\t\t\t * @property {Boolean} [clearable=true] 允许\r\n\t\t\t\t */\r\n\t\t\t\tclearable: true,\r\n\t\t\t\tclassName: 'app-combobox'\r\n\t\t\t},\r\n\t\t\tComboztree: {\r\n\t\t\t\t/**\r\n\t\t\t\t * 要加载数据的url，也可以通过action设置\r\n\t\t\t\t * @memberof comboztree-class\r\n\t\t\t\t * @property {Url} [url] url数据源\r\n\t\t\t\t */\r\n\t\t\t\turl: '',\r\n\t\t\t\t/**\r\n\t\t\t\t * 异步加载子节点的url地址 当[async = true 时生效]\r\n\t\t\t\t * @memberof comboztree-class\r\n\t\t\t\t * @property {Url} [asyncUrl] asyncUrl\r\n\t\t\t\t */\r\n\t\t\t\tasyncUrl: '',\r\n\t\t\t\t/**\r\n\t\t\t\t * 只能选择叶子节点\r\n\t\t\t\t * @memberof comboztree-class\r\n\t\t\t\t * @property {Boolean} [onlyleaf=false] 只能选择叶子节点\r\n\t\t\t\t */\r\n\t\t\t\tonlyleaf: false,\r\n\t\t\t\t/**\r\n\t\t\t\t * 是否独自选择节点 当multiple为true时 有效\r\n\t\t\t\t * @todo 勾选父节点时勾选子节点\r\n\t\t\t\t * @todo 取消勾选父节点时取消勾选子节点\r\n\t\t\t\t * @todo 子节点全部勾选时是勾选父节点\r\n\t\t\t\t * @todo 子节点全部取消勾选时是取消勾选父节点\r\n\t\t\t\t * @memberof comboztree-class\r\n\t\t\t\t * @property {Boolean} [checkBySelf=false] 关联选择\r\n\t\t\t\t */\r\n\t\t\t\tcheckBySelf: false,\r\n\t\t\t\t/**\r\n\t\t\t\t * 远程数据，次级节点异步加载设置\r\n\t\t\t\t * @memberof comboztree-class\r\n\t\t\t\t * @property {Boolean} [async=true] 是否异步加载节点\r\n\t\t\t\t */\r\n\t\t\t\tasync: true,\r\n\t\t\t\t/**\r\n\t\t\t\t * 设置 树 是否显示节点的图标\r\n\t\t\t\t * @memberof comboztree-class\r\n\t\t\t\t * @property {Boolean} [showIcon=false] true / false 分别表示 显示 / 隐藏 图标\r\n\t\t\t\t */\r\n\t\t\t\tshowIcon: false,\r\n\t\t\t\t/**\r\n\t\t\t\t * 是否允许多选\r\n\t\t\t\t * @memberof comboztree-class\r\n\t\t\t\t * @property {Boolean} [multiple=false] 多选\r\n\t\t\t\t */\r\n\t\t\t\tmultiple: false,\r\n\t\t\t\t/**\r\n\t\t\t\t * 节点唯一标识的属性名称\r\n\t\t\t\t * 默认和valuefield相同\r\n\t\t\t\t * @memberof comboztree-class\r\n\t\t\t\t * @property {String} [idfield=null] 节点唯一标识的属性名称\r\n\t\t\t\t */\r\n\t\t\t\tidfield: null,\r\n\t\t\t\t/**\r\n\t\t\t\t * 节点数据中保存其父节点唯一标识的属性名称\r\n\t\t\t\t * @memberof comboztree-class\r\n\t\t\t\t * @property {String} [pidfield=pId] 父节点唯一标识的属性名称\r\n\t\t\t\t */\r\n\t\t\t\tpidfield: 'pId',\r\n\t\t\t\t/**\r\n\t\t\t\t * 用于修正根节点父节点数据，即 pIdKey 指定的属性值\r\n\t\t\t\t * @memberof comboztree-class\r\n\t\t\t\t * @property {String} [rootpidvalue=''] 根节点属性值\r\n\t\t\t\t */\r\n\t\t\t\trootpidvalue: '',\r\n\t\t\t\t/**\r\n\t\t\t\t * 异步加载时需要自动提交父节点属性的参数\r\n\t\t\t\t * @todo 将需要作为参数提交的属性名称，制作成 Array 即可，例如：[\"id\", \"name\"]\r\n\t\t\t\t * @todo 可以设置提交时的参数名称，例如 server 只接受 zId : [\"id=zId\"]\r\n\t\t\t\t * @memberof comboztree-class\r\n\t\t\t\t * @property {String} [rootpidvalue=''] 根节点属性值\r\n\t\t\t\t * @example <PRE>&lt;input &#9;class=\"app-comboztree\"\r\n\t\t\t\t * &#9;_options=\"{\r\n\t\t\t\t * &#9;&#9;action: 'platform/sample/base/ui/treeJson.do',\r\n\t\t\t\t * &#9;&#9;autoparam: 'id,name'\r\n\t\t\t\t * &#9;}\"\r\n\t\t\t\t * /></PRE>  假设 异步加载 父节点(node = {id:1, name:\"test\"}) 的子节点时，将提交参数 id=1&name=test\r\n\t\t\t\t * @example <PRE>&lt;input &#9;class=\"app-comboztree\"\r\n\t\t\t\t * &#9;_options=\"{\r\n\t\t\t\t * &#9;&#9;action: 'platform/sample/base/ui/treeJson.do',\r\n\t\t\t\t * &#9;&#9;autoparam: 'id=zId,name'\r\n\t\t\t\t * &#9;}\"\r\n\t\t\t\t * /></PRE>  假设 异步加载 父节点(node = {id:1, name:\"test\"}) 的子节点时，将提交参数 zId=1&name=test\r\n\t\t\t\t */\r\n\t\t\t\tautoparam: null,\r\n\t\t\t\t/**\r\n\t\t\t\t * 异步加载时子节点时，要提交的静态参数\r\n\t\t\t\t * @memberof comboztree-class\r\n\t\t\t\t * @example <PRE>&lt;input &#9;class=\"app-comboztree\"\r\n\t\t\t\t * &#9;_options=\"{\r\n\t\t\t\t * &#9;&#9;action: 'platform/sample/base/ui/treeJson.do',\r\n\t\t\t\t * &#9;&#9;otherParam: {dataSet: 'bank'}\r\n\t\t\t\t * &#9;}\"\r\n\t\t\t\t * /></PRE>\r\n\t\t\t\t */\r\n\t\t\t\totherParam: null,\r\n\t\t\t\t/**\r\n\t\t\t\t * 允许联想\r\n\t\t\t\t * @memberof comboztree-class\r\n\t\t\t\t * @property {Boolean} [usesuggest=false] 允许联想\r\n\t\t\t\t */\r\n\t\t\t\tusesuggest: false,\r\n\t\t\t\t/**\r\n\t\t\t\t * <span class=\"type-signature static\">override</span>\r\n\t\t\t\t * 下拉面板的高度\r\n\t\t\t\t * @memberof comboztree-class\r\n\t\t\t\t * @property {Number} [panelheight=232] 下拉面板的高度\r\n\t\t\t\t */\r\n\t\t\t\tpanelheight: 232,\r\n\t\t\t\t/**\r\n\t\t\t\t * 对值进行优化，该参数只针对multiple = true 时，有效\r\n\t\t\t\t * @todo 忽略半勾选节点\r\n\t\t\t\t * @todo 并当父节点被全选时，子节点不作为值\r\n\t\t\t\t * @memberof comboztree-class\r\n\t\t\t\t * @property {Boolean} [shrinkValue=true] 默认进行优化值\r\n\t\t\t\t */\r\n\t\t\t\tshrinkValue: true,\r\n\t\t\t\t/**\r\n\t\t\t\t * 忽略半勾选节点\r\n\t\t\t\t * @memberof comboztree-class\r\n\t\t\t\t * @property {Boolean} [ignoreHalfCheck=true] 默认忽略\r\n\t\t\t\t */\r\n\t\t\t\tignoreHalfCheck: true,\r\n\t\t\t\t/**\r\n\t\t\t\t * 进行本地高亮匹配检索时的延迟检索时间(ms)\r\n\t\t\t\t * @memberof comboztree-class\r\n\t\t\t\t * @property {Number} [lazy=300] 延迟检索时间(毫秒)\r\n\t\t\t\t */\r\n\t\t\t\tlazy: 300,\r\n\t\t\t\t/**\r\n\t\t\t\t * 定位到子节点\r\n\t\t\t\t * @memberof comboztree-class\r\n\t\t\t\t * @property {Array} keyChildNode=[App.keyCode.RIGHT] 按键值数组\r\n\t\t\t\t */\r\n\t\t\t\tkeyChildNode: [App.keyCode.RIGHT],\r\n\t\t\t\t/**\r\n\t\t\t\t * 定位到父节点\r\n\t\t\t\t * @memberof comboztree-class\r\n\t\t\t\t * @property {Array} keyParentNode=[App.keyCode.LEFT] 按键值数组\r\n\t\t\t\t */\r\n\t\t\t\tkeyParentNode: [App.keyCode.LEFT],\r\n\t\t\t\tclassName: 'app-comboztree'\r\n\t\t\t},\r\n\t\t\tReference: {\r\n\t\t\t\t/**\r\n\t\t\t\t * 数据对象中作为隐藏值的属性名\r\n\t\t\t\t * @memberof reference-class\r\n\t\t\t\t * @property {String} [valuefield=id] 隐藏值属性名\r\n\t\t\t\t */\r\n\t\t\t\tvaluefield: 'id',\r\n\t\t\t\t/**\r\n\t\t\t\t * 数据对象中作为显示值的属性名\r\n\t\t\t\t * @memberof reference-class\r\n\t\t\t\t * @property {String} [textfield=name] 显示值属性名\r\n\t\t\t\t */\r\n\t\t\t\ttextfield: 'name',\r\n\t\t\t\t/**\r\n\t\t\t\t * 弹出对话框的标题\r\n\t\t\t\t * @memberof reference-class\r\n\t\t\t\t * @property {Boolean} [title=对话框] 标题\r\n\t\t\t\t */\r\n\t\t\t\ttitle: '对话框',\r\n\t\t\t\t/**\r\n\t\t\t\t * 显示标题栏\r\n\t\t\t\t * @memberof reference-class\r\n\t\t\t\t * @property {Boolean} [hasheader=true] 显示标题栏\r\n\t\t\t\t */\r\n\t\t\t\thasheader: true,\r\n\t\t\t\t/**\r\n\t\t\t\t * 对话框的宽度，null则会自适应\r\n\t\t\t\t * @memberof reference-class\r\n\t\t\t\t * @property {Number} [digWidth=null] 宽度\r\n\t\t\t\t */\r\n\t\t\t\tdigWidth: null,\r\n\t\t\t\t/**\r\n\t\t\t\t * 对话框的高度，null则会自适应\r\n\t\t\t\t * @memberof reference-class\r\n\t\t\t\t * @property {Number} [digHeight=null] 高度\r\n\t\t\t\t */\r\n\t\t\t\tdigHeight: null,\r\n\t\t\t\t/**\r\n\t\t\t\t * <span class=\"type-signature static\">override</span>\r\n\t\t\t\t * 是否拥有一个清除按钮\r\n\t\t\t\t * @memberof reference-class\r\n\t\t\t\t * @property {Boolean} [clearbtn=true] 拥有清除按钮\r\n\t\t\t\t */\r\n\t\t\t\tclearbtn: true,\r\n\t\t\t\t/**\r\n\t\t\t\t * <span class=\"type-signature static\">override</span>\r\n\t\t\t\t * 是否拥有一个打开按钮\r\n\t\t\t\t * @memberof reference-class\r\n\t\t\t\t * @property {Boolean} [openbtn=true] 拥有打开按钮\r\n\t\t\t\t */\r\n\t\t\t\topenbtn: true,\r\n\t\t\t\t/**\r\n\t\t\t\t * 对话框的url\r\n\t\t\t\t * @memberof reference-class\r\n\t\t\t\t * @property {URL} [url=null] 对话框的url\r\n\t\t\t\t */\r\n\t\t\t\turl: null,\r\n\t\t\t\tclassName: 'app-reference'\r\n\t\t\t},\r\n\t\t\tSuggest: {\r\n\t\t\t\t/**\r\n\t\t\t\t * <span class=\"type-signature static\">override</span>\r\n\t\t\t\t * 面板高度 该面板为固定高度\r\n\t\t\t\t * @memberof suggest-class\r\n\t\t\t\t * @property {Number} [panelheight=242] 下拉面板的高度\r\n\t\t\t\t */\r\n\t\t\t\tpanelheight: 242,\r\n\t\t\t\t/**\r\n\t\t\t\t * 联想面板内 已选结果面板的高度\r\n\t\t\t\t * @memberof suggest-class\r\n\t\t\t\t * @property {Number} [slt_area=30] 已选框的高度\r\n\t\t\t\t */\r\n\t\t\t\tslt_area: 30,\r\n\t\t\t\t/**\r\n\t\t\t\t * 联想地址，该属性优先于action\r\n\t\t\t\t * @memberof suggest-class\r\n\t\t\t\t * @property {String} [suggest] 联想地址\r\n\t\t\t\t */\r\n\t\t\t\tsuggest: '',\r\n\t\t\t\t/**\r\n\t\t\t\t * 联想过滤时使用的匹配属性，多个属性使用,分隔\r\n\t\t\t\t * <PRE>\r\n\t\t\t\t * 当没有配置该属性时，默认使用textfield\r\n\t\t\t\t * 远程联想时 可以通过_key接收输入的搜索关键字、suggestfield接收该字段的配置\r\n\t\t\t\t * </PRE>\r\n\t\t\t\t * @memberof suggest-class\r\n\t\t\t\t * @property {String} [suggestfield] 匹配属性\r\n\t\t\t\t */\r\n\t\t\t\tsuggestfield: '',\r\n\t\t\t\t/**\r\n\t\t\t\t * 是否远程加载，该属性优先于async\r\n\t\t\t\t * false：第一次根据suggest进行远程加载作为数据源，此后根据本地数据源进行联想匹配\r\n\t\t\t\t * true: 如果为true，则每次根据suggest去后台匹配数据\r\n\t\t\t\t * @memberof suggest-class\r\n\t\t\t\t * @property {Boolean} [remote=false] 每次远程联想\r\n\t\t\t\t */\r\n\t\t\t\tremote: false,\r\n\t\t\t\t/**\r\n\t\t\t\t * 进行联想的延迟检索时间(ms)\r\n\t\t\t\t * @memberof suggest-class\r\n\t\t\t\t * @property {Number} [lazy=500] 远程搜索时间（毫秒）\r\n\t\t\t\t */\r\n\t\t\t\tlazy: 500,\r\n\t\t\t\t/**\r\n\t\t\t\t * 是否允许多选\r\n\t\t\t\t * @memberof suggest-class\r\n\t\t\t\t * @property {Boolean} [multiple=false] 多选\r\n\t\t\t\t */\r\n\t\t\t\tmultiple:false,\r\n\t\t\t\t/**\r\n\t\t\t\t * 接受输入的内容作为值\r\n\t\t\t\t * @memberof suggest-class\r\n\t\t\t\t * @property {Boolean} [acceptText=false] 不接受\r\n\t\t\t\t */\r\n\t\t\t\tacceptText: false,\r\n\t\t\t\t/**\r\n\t\t\t\t * 联想清值，该属性设置只在单选模式生效\r\n\t\t\t\t * @memberof suggest-class\r\n\t\t\t\t * @property {Boolean} [suggestClear=false] 联想时是否清值\r\n\t\t\t\t */\r\n\t\t\t\tsuggestClear: false,\r\n\t\t\t\t/**\r\n\t\t\t\t * 切换到已选区域，定位下一个已选择节点\r\n\t\t\t\t * @memberof suggest-class\r\n\t\t\t\t * @property {Array} keyNextSltNode=[App.keyCode.RIGHT] 按键值数组\r\n\t\t\t\t */\r\n\t\t\t\tkeyNextSltNode: [App.keyCode.RIGHT],\r\n\t\t\t\t/**\r\n\t\t\t\t * 切换到已选区域，定位上一个已选择节点\r\n\t\t\t\t * @memberof suggest-class\r\n\t\t\t\t * @property {Array} keyPrevSltNode=[App.keyCode.LEFT] 按键值数组\r\n\t\t\t\t */\r\n\t\t\t\tkeyPrevSltNode: [App.keyCode.LEFT],\r\n\t\t\t\tclassName: 'app-suggest'\r\n\t\t\t},\r\n\t\t\tTypeahead: {\r\n\t\t\t\t/**\r\n\t\t\t\t * 联想地址\r\n\t\t\t\t * @memberof typeahead-class\r\n\t\t\t\t * @property {String} [suggest] 联想地址\r\n\t\t\t\t */\r\n\t\t\t\tsuggest: '',\r\n\t\t\t\t/**\r\n\t\t\t\t * 是否远程加载\r\n\t\t\t\t * false：第一次根据suggest进行远程加载作为数据源，此后根据本地数据源进行联想匹配\r\n\t\t\t\t * true: 如果为true，则每次根据suggest去后台匹配数据\r\n\t\t\t\t * @memberof typeahead-class\r\n\t\t\t\t * @property {Boolean} [remote=false] 每次远程联想\r\n\t\t\t\t */\r\n\t\t\t\tremote: false,\r\n\t\t\t\t/**\r\n\t\t\t\t * 进行联想的延迟检索时间(ms)\r\n\t\t\t\t * @memberof typeahead-class\r\n\t\t\t\t * @property {Number} [lazy=500] 远程搜索时间（毫秒）\r\n\t\t\t\t */\r\n\t\t\t\tlazy: 500,\r\n\t\t\t\t/**\r\n\t\t\t\t * 定位下一个节点\r\n\t\t\t\t * @memberof typeahead-class-class\r\n\t\t\t\t * @property {Array} keyNextNode=[App.keyCode.DOWN,App.keyCode.RIGHT] 按键值数组\r\n\t\t\t\t */\r\n\t\t\t\tkeyNextNode: [App.keyCode.DOWN,App.keyCode.RIGHT],\r\n\t\t\t\t/**\r\n\t\t\t\t * 定位上一个节点\r\n\t\t\t\t * @memberof typeahead-class-class\r\n\t\t\t\t * @property {Array} keyPrevNode=[App.keyCode.UP,App.keyCode.LEFT] 按键值数组\r\n\t\t\t\t */\r\n\t\t\t\tkeyPrevNode: [App.keyCode.UP,App.keyCode.LEFT],\r\n\t\t\t\tclassName: 'app-typeahead'\r\n\t\t\t},\r\n\t\t\tMoney: {\r\n\t\t\t\t/**\r\n\t\t\t\t * 数值的小数位\r\n\t\t\t\t * @memberof money-class\r\n\t\t\t\t * @property {Number} [precision=2] 保留2位小数\r\n\t\t\t\t */\r\n\t\t\t\tprecision: 2,\r\n\t\t\t\t/**\r\n\t\t\t\t * 格式化函数\r\n\t\t\t\t * <PRE>\r\n\t\t\t\t * 该函数接收当前输入的值，并返回一个字符串作为显示值\r\n\t\t\t\t * 内置格式化方法\r\n\t\t\t\t * 大写金额：chinese\r\n\t\t\t\t * 千分位金额：thousand\r\n\t\t\t\t * </PRE>\r\n\t\t\t\t * @memberof money-class\r\n\t\t\t\t * @property {String|Function} [formatter] 格式化函数\r\n\t\t\t\t */\r\n\t\t\t\tformatter: 'thousand',\r\n\t\t\t\t/**\r\n\t\t\t\t * <span class=\"type-signature static\">override</span>\r\n\t\t\t\t * 定义如何筛选按下的键，返回true接受输入\r\n\t\t\t\t * <PRE>内置过滤类型\r\n\t\t\t\t * positiveNumber: 只允许输入 0-9，小数点\r\n\t\t\t\t * number: 只允许输入 0-9，小数点，正负号\r\n\t\t\t\t * 0-9：只允许输入 0-9\r\n\t\t\t\t * all：任意输入\r\n\t\t\t\t * </PRE>\r\n\t\t\t\t * @memberof money-class\r\n\t\t\t\t * @property {String|Function} [filter='number'] 键盘输入的过滤器\r\n\t\t\t\t */\r\n\t\t\t\tfilter: 'number',\r\n\t\t\t\t/**\r\n\t\t\t\t * 前缀(只针对千分法)\r\n\t\t\t\t * @memberof money-class\r\n\t\t\t\t * @property {String} [prefix=¥] 前缀\r\n\t\t\t\t */\r\n\t\t\t\tprefix: '¥',\r\n\t\t\t\tclassName: 'app-money'\r\n\t\t\t},\r\n\t\t\tNumber: {\r\n\t\t\t\t/**\r\n\t\t\t\t * 最小值  组件允许接受的最小值\r\n\t\t\t\t * @memberof number-class\r\n\t\t\t\t * @property {Number} [min=null] 最小值\r\n\t\t\t\t */\r\n\t\t\t\tmin: null,\r\n\t\t\t\t/**\r\n\t\t\t\t * 最大值  组件允许接受的最大值\r\n\t\t\t\t * @memberof number-class\r\n\t\t\t\t * @property {Number} [max=null] 最大值\r\n\t\t\t\t */\r\n\t\t\t\tmax: null,\r\n\t\t\t\t/**\r\n\t\t\t\t * 不定长精度\r\n\t\t\t\t * <PRE>\r\n\t\t\t\t * \tfalse：为定长的进度，即精度为几位，则保留几位小数\r\n\t\t\t\t * \ttrue：为不定长的进度，即输入的进度为几位，则最大保留到几位，此时precision代表最大精度\r\n\t\t\t\t * </PRE>\r\n\t\t\t\t * @memberof number-class\r\n\t\t\t\t * @property {Number} [varlen=false] 变长精度\r\n\t\t\t\t */\r\n\t\t\t\tvarlen: false,\r\n\t\t\t\t/**\r\n\t\t\t\t * 精度\r\n\t\t\t\t * @memberof number-class\r\n\t\t\t\t * @property {Number} [precision=0] 保留0位小数\r\n\t\t\t\t */\r\n\t\t\t\tprecision: 0,\r\n\t\t\t\t/**\r\n\t\t\t\t * 前缀\r\n\t\t\t\t * @memberof number-class\r\n\t\t\t\t * @property {String} [prefix=''] 前缀\r\n\t\t\t\t */\r\n\t\t\t\tprefix: '',\r\n\t\t\t\t/**\r\n\t\t\t\t * 后缀\r\n\t\t\t\t * @memberof number-class\r\n\t\t\t\t * @property {String} [suffix=''] 后缀\r\n\t\t\t\t */\r\n\t\t\t\tsuffix: '',\r\n\t\t\t\t/**\r\n\t\t\t\t * <span class=\"type-signature static\">override</span>\r\n\t\t\t\t * 定义如何筛选按下的键，返回true接受输入\r\n\t\t\t\t * <PRE>内置过滤类型\r\n\t\t\t\t * number: 只允许输入 0-9，小数点，正负号\r\n\t\t\t\t * 0-9：只允许输入 0-9\r\n\t\t\t\t * all：任意输入\r\n\t\t\t\t * </PRE>\r\n\t\t\t\t * @memberof number-class\r\n\t\t\t\t * @property {String|Function} [filter='number'] 键盘输入的过滤器\r\n\t\t\t\t */\r\n\t\t\t\tfilter: 'number',\r\n\t\t\t\t/**\r\n\t\t\t\t * 定义格式化输出显示值。返回的字符串值，会显示在输入框中\r\n\t\t\t\t * <PRE>内置格式化方法\r\n\t\t\t\t * 大写金额：chinese\r\n\t\t\t\t * 千分位金额：thousand\r\n\t\t\t\t * </PRE>\r\n\t\t\t\t * @memberof number-class\r\n\t\t\t\t * @property {String|Function} [formatter] 格式化函数\r\n\t\t\t\t */\r\n\t\t\t\tformatter: null,\r\n\t\t\t\t/**\r\n\t\t\t\t * 当值为0时 显示为空\r\n\t\t\t\t * @memberof number-class\r\n\t\t\t\t * @property {String|Function} [zeroIsNull=false] 0显示为0\r\n\t\t\t\t */\r\n\t\t\t\tzeroIsNull: false,\r\n\t\t\t\tclassName: 'app-number'\r\n\t\t\t},\r\n\t\t\tDateTime: {\r\n\t\t\t\t/**\r\n\t\t\t\t * <span class=\"type-signature static\">override</span>\r\n\t\t\t\t * 是否拥有一个打开按钮\r\n\t\t\t\t * @memberof datetime-class\r\n\t\t\t\t * @property {Boolean} [openbtn=true] 拥有打开按钮\r\n\t\t\t\t */\r\n\t\t\t\topenbtn: true,\r\n\t\t\t\t/**\r\n\t\t\t\t * 是否只能选择\r\n\t\t\t\t * @memberof datetime-class\r\n\t\t\t\t * @property {Boolean} [onlySelect=false] 可以选择和输入\r\n\t\t\t\t */\r\n\t\t\t\tonlySelect: false,\r\n\t\t\t\t/**\r\n\t\t\t\t * 日期时间框类型\r\n\t\t\t\t * <PRE>\r\n\t\t\t\t * type可选类型：\r\n\t\t\t\t * year: 年  eg. 2014\r\n\t\t\t\t * month: 月  eg. 12\r\n\t\t\t\t * year-month: 年月 eg. 2014-12\r\n\t\t\t\t * date: 年月日  eg. 2014-12-12\r\n\t\t\t\t * datetime: 年月日时分  eg. 2014-12-12 12:12\r\n\t\t\t\t * hour-minute: 时分  eg. 12:12\r\n\t\t\t\t * hour: 时  eg. 12\r\n\t\t\t\t * minute: 分  eg. 12\r\n\t\t\t\t * </PRE>\r\n\t\t\t\t * @memberof datetime-class\r\n\t\t\t\t * @property {String} [type=date] 类型\r\n\t\t\t\t */\r\n\t\t\t\ttype: 'date',\r\n\t\t\t\t/**\r\n\t\t\t\t * 显示值的日期时间格式化串\r\n\t\t\t\t * <PRE>\r\n\t\t\t\t * p, P, h, hh, i, ii, s, ss, d, dd, m, mm, M, MM, yy, yyyy 的任意组合。\r\n\t\t\t\t * p : 小写的 ('am' or 'pm') - 根据区域文件\r\n\t\t\t\t * P : 大写的 ('AM' or 'PM') - 根据区域文件\r\n\t\t\t\t * s : 10以下不用0填充首位的秒数\r\n\t\t\t\t * ss : 2位秒数显示，10以下用0填充首位\r\n\t\t\t\t * i : 10以下不用0填充首位的分数\r\n\t\t\t\t * ii : 2位分数显示，10以下用0填充首位\r\n\t\t\t\t * h : 10以下不用0填充首位的时数 - 24小时制\r\n\t\t\t\t * hh : 2位时数显示，10以下用0填充首位 - 24小时制\r\n\t\t\t\t * H : 10以下不用0填充首位的时数 - 12小时制\r\n\t\t\t\t * HH : 2位时数显示，10以下用0填充首位 - 12小时制\r\n\t\t\t\t * d : 10以下不用0填充首位的日期\r\n\t\t\t\t * dd : 2位日期显示，10以下用0填充首位\r\n\t\t\t\t * m : 10以下不用0填充首位的月份\r\n\t\t\t\t * mm : 2位月份显示，10以下用0填充首位\r\n\t\t\t\t * M : 月份的短文本表示，前三个字母\r\n\t\t\t\t * MM : 月份的全文本表示，如 January or March\r\n\t\t\t\t * yy : 2位年份显示\r\n\t\t\t\t * yyyy : 4位年份显示\r\n\t\t\t\t * </PRE>\r\n\t\t\t\t * @memberof datetime-class\r\n\t\t\t\t * @property {String} [format=yyyy-mm-dd] 格式化串\r\n\t\t\t\t */\r\n\t\t\t\tformat: 'yyyy-mm-dd',\r\n\t\t\t\t/**\r\n\t\t\t\t * 隐藏值的日期时间格式化串，具体方式参照显示值格式化\r\n\t\t\t\t * @memberof datetime-class\r\n\t\t\t\t * @property {String} [valueFormat] 格式化串\r\n\t\t\t\t */\r\n\t\t\t\tvalueFormat: null,\r\n\t\t\t\t/**\r\n\t\t\t\t * 语言\r\n\t\t\t\t * @memberof datetime-class\r\n\t\t\t\t * @property {String} [language=zh_CN] 语言\r\n\t\t\t\t */\r\n\t\t\t\tlanguage: AppLang.locale,\r\n\t\t\t\t/**\r\n\t\t\t\t * 一周从哪一天开始。0（星期日）到6（星期六）\r\n\t\t\t\t * @memberof datetime-class\r\n\t\t\t\t * @property {String} [weekStart=1] 一周从哪一天开始\r\n\t\t\t\t */\r\n\t\t\t\tweekStart: 1,\r\n\t\t\t\t/**\r\n\t\t\t\t * 当选择一个日期之后是否立即关闭此日期时间选择器\r\n\t\t\t\t * @memberof datetime-class\r\n\t\t\t\t * @property {Boolean} [autoclose=true] 自动关闭\r\n\t\t\t\t */\r\n\t\t\t\tautoclose: true,\r\n\t\t\t\t/**\r\n\t\t\t\t * 是否显示今天按钮\r\n\t\t\t\t * <PRE>\r\n\t\t\t\t * 如果此值为true 或 \"linked\"，\r\n\t\t\t\t * \t\t则在日期时间选择器组件的底部显示一个 \"Today\" 按钮用以选择当前日期。\r\n\t\t\t\t * 如果是true的话，\"Today\" 按钮仅仅将视图转到当天的日期.\r\n\t\t\t\t * 如果是\"linked\"，当天日期将会被选中\r\n\t\t\t\t * </PRE>\r\n\t\t\t\t * @memberof datetime-class\r\n\t\t\t\t * @property {Boolean} [todayBtn=true] 显示今天按钮\r\n\t\t\t\t */\r\n\t\t\t\ttodayBtn: true,\r\n\t\t\t\t/**\r\n\t\t\t\t * 高亮当前日期\r\n\t\t\t\t * @memberof datetime-class\r\n\t\t\t\t * @property {Boolean} [todayHighlight=true] 高亮当前日期\r\n\t\t\t\t */\r\n\t\t\t\ttodayHighlight: true,\r\n\t\t\t\t/**\r\n\t\t\t\t * 日期时间选择器打开之后首先显示的视图。\r\n\t\t\t\t * <PRE>可接受的值\r\n\t\t\t\t * 0 小时视图\r\n\t\t\t\t * 1 日期视图\r\n\t\t\t\t * 2 月视图\r\n\t\t\t\t * 3 年视图\r\n\t\t\t\t * 4 十年视图\r\n\t\t\t\t * </PRE>\r\n\t\t\t\t * @memberof datetime-class\r\n\t\t\t\t * @property {Number} [startView=2] 起始视图\r\n\t\t\t\t */\r\n\t\t\t\tstartView: 2,\r\n\t\t\t\t/**\r\n\t\t\t\t * 日期时间选择器所能够提供的最精确的时间选择视图。\r\n\t\t\t\t * <PRE>\r\n\t\t\t\t * 可接受的值\r\n\t\t\t\t * 0 小时视图\r\n\t\t\t\t * 1 日期视图\r\n\t\t\t\t * 2 月视图\r\n\t\t\t\t * 3 年视图\r\n\t\t\t\t * 4 十年视图\r\n\t\t\t\t * </PRE>\r\n\t\t\t\t * @memberof datetime-class\r\n\t\t\t\t * @property {Number} [minView=2] 结束视图\r\n\t\t\t\t */\r\n\t\t\t\tminView: 2,\r\n\t\t\t\tclassName: 'app-datetime'\r\n\t\t\t},\r\n\t\t\tGrid: {\r\n\t\t\t\t/**\r\n\t\t\t\t * 要加载数据的url，也可以通过action设置\r\n\t\t\t\t * @memberof grid-class\r\n\t\t\t\t * @property {Url} [url] url数据源\r\n\t\t\t\t */\r\n\t\t\t\turl: '',\r\n\t\t\t\t/**\r\n\t\t\t\t * 网格的标题\r\n\t\t\t\t * @memberof grid-class\r\n\t\t\t\t * @property {String|Number} [title] 网格标题\r\n\t\t\t\t */\r\n\t\t\t\ttitle: '',\r\n\t\t\t\t/**\r\n\t\t\t\t * 标题行高\r\n\t\t\t\t * @memberof grid-class\r\n\t\t\t\t * @property {Number} [headRowHeight] 标题行高\r\n\t\t\t\t */\r\n\t\t\t\theadRowHeight: 28,\r\n\t\t\t\t/**\r\n\t\t\t\t * 斑马条纹\r\n\t\t\t\t * @memberof grid-class\r\n\t\t\t\t * @property {Boolean} [striped=true] 斑马条纹\r\n\t\t\t\t */\r\n\t\t\t\tstriped: true,\r\n\t\t\t\t/**\r\n\t\t\t\t * 工具条最大高度(px)\r\n\t\t\t\t * @memberof grid-class\r\n\t\t\t\t * @property {Number} [toolbarHeight=33] 工具条最大高度\r\n\t\t\t\t */\r\n\t\t\t\ttoolbarHeight: 33,\r\n\t\t\t\t/**\r\n\t\t\t\t * 工具条\r\n\t\t\t\t * @memberof grid-class\r\n\t\t\t\t * @property {Array} [toolbar] 工具条\r\n\t\t\t\t * @property {String} [toolbar.text] 按钮标题\r\n\t\t\t\t * @property {String} [toolbar.iconCls] 按钮样式\r\n\t\t\t\t * @property {Function} [toolbar.handler] 按钮操作\r\n\t\t\t\t */\r\n\t\t\t\ttoolbar: null,\r\n\t\t\t\t/**\r\n\t\t\t\t * 表格主键\r\n\t\t\t\t * @memberof grid-class\r\n\t\t\t\t * @property {String} [idField=id] 表格主键\r\n\t\t\t\t */\r\n\t\t\t\tidField: 'id',\r\n\t\t\t\t/**\r\n\t\t\t\t * 是否生成隐藏列的内容数据\r\n\t\t\t\t * @todo 不生成内容数据的表格不能使用将初始为隐藏列设置为显示功能\r\n\t\t\t\t * @memberof grid-class\r\n\t\t\t\t * @property {Boolean} [hiddenColumnInit=false] 不生成\r\n\t\t\t\t */\r\n\t\t\t\thiddenColumnInit: false,\r\n\t\t\t\t/**\r\n\t\t\t\t * 网格的宽度\r\n\t\t\t\t * <PRE>宽度默认为空：撑满整个父容器</PRE>\r\n\t\t\t\t * @memberof grid-class\r\n\t\t\t\t * @property {Number} [width] 宽度\r\n\t\t\t\t */\r\n\t\t\t\twidth: null,\r\n\t\t\t\t/**\r\n\t\t\t\t * 网格的高度\r\n\t\t\t\t * <PRE>\r\n\t\t\t\t * 1、高度默认为空：撑满整个父容器\r\n\t\t\t\t * 2、当值为push时，高度随着数据的变化而变化\r\n\t\t\t\t * </PRE>\r\n\t\t\t\t * @memberof grid-class\r\n\t\t\t\t * @property {Number|String} [height] 高度\r\n\t\t\t\t */\r\n\t\t\t\theight: null,\r\n\t\t\t\t/**\r\n\t\t\t\t * 跟随滚动\r\n\t\t\t\t * <PRE>默认all\r\n\t\t\t\t * 可选值\r\n\t\t\t\t * none 不跟随\r\n\t\t\t\t * header 网格头\r\n\t\t\t\t * footer 网格尾\r\n\t\t\t\t * all 网格头和网格尾\r\n\t\t\t\t * </PRE>\r\n\t\t\t\t * @memberof grid-class\r\n\t\t\t\t * @property {String} [follow=all] 表头/尾跟随\r\n\t\t\t\t */\r\n\t\t\t\tfollow: 'all',\r\n\t\t\t\t/**\r\n\t\t\t\t * 是否列标题栏的对齐方式跟随\r\n\t\t\t\t * @todo 当结果为false时，标题头居中\r\n\t\t\t\t * @todo 当结果为true时，标题头与列的对齐方式相同\r\n\t\t\t\t * @memberof grid-class\r\n\t\t\t\t * @property {Boolean} [halign=false] 列标题栏的对齐方式跟随\r\n\t\t\t\t */\r\n\t\t\t\thalign: false,\r\n\t\t\t\t/**\r\n\t\t\t\t * 是否显示复选框\r\n\t\t\t\t * @memberof grid-class\r\n\t\t\t\t * @property {Boolean} [checkbox=false] 是否显示复选框\r\n\t\t\t\t */\r\n\t\t        checkbox: false,\r\n\t\t        /**\r\n\t\t\t\t * 是否显示单选框\r\n\t\t\t\t * @memberof grid-class\r\n\t\t\t\t * @property {Boolean} [radiobox=false] 是否显示单选框\r\n\t\t\t\t */\r\n\t\t        radiobox: false,\r\n\t\t        /**\r\n\t\t\t\t * 是否允许多列排序\r\n\t\t\t\t * @memberof grid-class\r\n\t\t\t\t * @property {Boolean} [multiSort=false] 多列排序\r\n\t\t\t\t */\r\n\t\t        multiSort: false,\r\n\t\t        /**\r\n\t\t\t\t * 是否远程排序\r\n\t\t\t\t * @memberof grid-class\r\n\t\t\t\t * @property {Boolean} [remoteSort=false] 远程排序\r\n\t\t\t\t */\r\n\t\t        remoteSort: false,\r\n\t\t        /**\r\n\t\t\t\t * 行号\r\n\t\t\t\t * <PRE>\r\n\t\t\t\t * 默认none\r\n\t\t\t\t * 可选值\r\n\t\t\t\t * none: 不显示\r\n\t\t\t\t * normal: 普通\r\n\t\t\t\t * repeat: 重复\r\n\t\t\t\t * </PRE>\r\n\t\t\t\t * @memberof grid-class\r\n\t\t\t\t * @property {String} [rownumbers='none'] 行号\r\n\t\t\t\t */\r\n\r\n\t\t        rownumbers: 'none',\r\n\t\t        /**\r\n\t\t\t\t * 视图扩展\r\n\t\t\t\t * <PRE>\r\n\t\t\t\t * view:{type:'CardView'卡片类型,region:'right'//卡片位置,formEl:'表单id',cardWidth:'卡片宽',rowRender:'渲染回调'}\r\n\t\t\t\t * </PRE>\r\n\t\t\t\t * @memberof view\r\n\t\t\t\t * @property{Object} [view=null]\r\n\t\t\t\t */\r\n\t\t\t\tview:{type:'GridView',region:'right',isDefault:false},\r\n\t\t\t\t/**\r\n\t\t\t\t * 是否开启切换视图\r\n\t\t\t\t * <PRE>\r\n\t\t\t\t * 默认false\r\n\t\t\t\t * </PRE>\r\n\t\t\t\t * @memberof grid-class\r\n\t\t\t\t * @property {boolean}\r\n\t\t\t\t */\r\n\t\t\t\tswitchView:false,\r\n\t\t        /**\r\n\t\t         * 是否显示合计行序号\r\n\t\t         * @memberof grid-class\r\n\t\t\t\t * @property {String} [footerRowNumber=false]\r\n\t\t         */\r\n\t\t        footerRowNumber: false,\r\n\t\t        /**\r\n\t\t\t\t * 分页\r\n\t\t\t\t * <PRE>\r\n\t\t\t\t * 默认'none'\r\n\t\t\t\t * 可选值\r\n\t\t\t\t * none: 不分页\r\n\t\t\t\t * up: 上分页\r\n\t\t\t\t * down: 下分页\r\n\t\t\t\t * all: 上下分页\r\n\t\t\t\t * </PRE>\r\n\t\t\t\t * @memberof grid-class\r\n\t\t\t\t * @property {String} [pager=none] 分页\r\n\t\t\t\t */\r\n\t\t        pager: 'none',\r\n\t\t\t\t/**\r\n\t\t\t\t * 分页栏上的打印和导出按钮是否显示\r\n\t\t\t\t * @memberof grid-class\r\n\t\t\t\t * @property {Object} [pagerToolbarIcon] \r\n\t\t\t\t * @property {Boolean} [pagerToolbarIcon.download=false] 不显示下载按钮\r\n\t\t\t\t * @property {Boolean} [pagerToolbarIcon.print=false] 不显示打印按钮\r\n\t\t\t\t */\r\n\t\t        pagerToolbarIcon: {\r\n\t\t        \tdownload: false,\r\n\t\t        \tprint: false\r\n\t\t        },\r\n\t\t        /**\r\n\t\t\t\t * 默认当前页\r\n\t\t\t\t * @memberof grid-class\r\n\t\t\t\t * @property {Number} [pageNumber=1] 默认当前页\r\n\t\t\t\t */\r\n\t\t\t\tpageNumber: 1,\r\n\t\t\t\t/**\r\n\t\t\t\t * 每页默认的结果数\r\n\t\t\t\t * @memberof grid-class\r\n\t\t\t\t * @property {Number} [pageSize=10] 每页默认的结果数\r\n\t\t\t\t */\r\n\t\t\t\tpageSize: 10,\r\n\t\t\t\t/**\r\n\t\t\t\t * 可选择设定的每页结果数\r\n\t\t\t\t * @memberof grid-class\r\n\t\t\t\t * @property {Array} [pageList=10, 15, 20, 50, 100, 200] 可选择设定的每页结果数\r\n\t\t\t\t */\r\n\t\t\t\tpageList: [10, 15, 20, 50, 100, 200],\r\n\t\t\t\t/**\r\n\t\t\t\t * 主视图列\r\n\t\t\t\t * @memberof grid-class\r\n\t\t\t\t * @property {Array<Array>} [columns] 主视图列\r\n\t\t\t\t */\r\n\t\t\t\tcolumns: null,\r\n\t\t\t\t/**\r\n\t\t\t\t * 左固定列\r\n\t\t\t\t * @memberof grid-class\r\n\t\t\t\t * @property {Array<Array>} [frozenColumns] 左固定列\r\n\t\t\t\t */\r\n\t\t\t\tfrozenColumns: null,\r\n\t\t\t\t/**\r\n\t\t\t\t * 右视图列\r\n\t\t\t\t * @memberof grid-class\r\n\t\t\t\t * @property {Array<Array>} [frozenColumnsRight] 右视图列\r\n\t\t\t\t */\r\n\t\t\t\tfrozenColumnsRight: null,\r\n\t\t\t\t/**\r\n\t\t\t\t * 是否对编辑过的数据进行标记\r\n\t\t\t\t * @memberof grid-class\r\n\t\t\t\t * @property {Boolean} [markChange=false] 不标记\r\n\t\t\t\t */\r\n\t\t\t\tmarkChange: false,\r\n\t\t\t\t/**\r\n\t\t\t\t * 网格是否可编辑的总开关\r\n\t\t\t\t * @memberof grid-class\r\n\t\t\t\t * @property {Boolean} [editable=true] 可编辑\r\n\t\t\t\t */\r\n\t\t\t\teditable: true,\r\n\t\t\t\t/**\r\n\t\t\t\t * 设置了如何去解析从Server端传回来的json数据\r\n\t\t\t\t * @memberof grid-class\r\n\t\t\t\t * @property {Object} [jsonReader] json定义\r\n\t\t\t\t * @property {Number} [jsonReader.total=totalRecords] 总记录数字段\r\n\t\t\t\t * @property {Object} [jsonReader.rows=data] 主数据字段\r\n\t\t\t\t * @property {Object} [jsonReader.footer=footer] 合计数据字段\r\n\t\t\t\t */\r\n\t\t\t\tjsonReader: {\r\n\t\t\t\t\t/**\r\n\t\t\t\t\t * 总记录数\r\n\t\t\t\t\t */\r\n\t\t\t\t\ttotal: 'totalRecords',\r\n\t\t\t\t\t/**\r\n\t\t\t\t\t * 表格数据\r\n\t\t\t\t\t */\r\n\t\t\t\t\trows: 'data',\r\n\t\t\t\t\t/**\r\n\t\t\t\t\t * 表格尾数据\r\n\t\t\t\t\t */\r\n\t\t\t\t\tfooter: 'footer'\r\n\t\t\t\t},\r\n\t\t\t\t/**\r\n\t\t\t\t * 初始查询参数\r\n\t\t\t\t * <PRE>\r\n\t\t\t\t * 已用关键字：page、rows、sort、order、__transor\r\n\t\t\t\t * </PRE>\r\n\t\t\t\t * @memberof grid-class\r\n\t\t\t\t * @property {Object} [queryParams] 查询参数\r\n\t\t\t\t */\r\n\t\t\t\tqueryParams: null,\r\n\t\t\t\t/**\r\n\t\t\t\t * 自定义面板的jquery表达式\r\n\t\t\t\t * <PRE>\r\n\t\t\t\t * 组件根据 $A(headerCustom) 取得面板 eg. #query\r\n\t\t\t\t * </PRE>\r\n\t\t\t\t * @memberof grid-class\r\n\t\t\t\t * @property {String} [headerCustom] jquery表达式\r\n\t\t\t\t */\r\n\t\t\t\theaderCustom: null,\r\n\t\t\t\t/**\r\n\t\t\t\t * 初始化网格时 自动加载数据\r\n\t\t\t\t * @memberof grid-class\r\n\t\t\t\t * @property {Boolean} [autoLoad=true] 标志\r\n\t\t\t\t */\r\n\t\t\t\tautoLoad: true,\r\n\t\t\t\t/**\r\n\t\t\t\t * 自适应填充宽度\r\n\t\t\t\t * <PRE>\r\n\t\t\t\t * 默认为N 不自适应\r\n\t\t\t\t * 可选值：\r\n\t\t\t\t * N：[no] 不进行自适应填充\r\n\t\t\t\t * ES: [extend&shrink]将列宽进行伸长/缩短以填充满表格，取消横向滚动\r\n\t\t\t\t * E: [extend]将列框进行伸展以填充满表格，取消横向滚动\r\n\t\t\t\t * </PRE>\r\n\t\t\t\t * @memberof grid-class\r\n\t\t\t\t * @property {Boolean} [fitColumns='N'] 标志\r\n\t\t\t\t */\r\n\t\t\t\tfitColumns: 'E',\r\n\t\t\t\t/**\r\n\t\t         * 自定义合计栏的配置\r\n\t\t         * <PRE>\r\n\t\t         * summary.method 计算的函数，如果函数为空，则使用网格的data进行替换模板\r\n\t\t         * summary.template 模板\r\n\t\t         * </PRE>\r\n\t\t         * @property {Object} [summary] 自定义合计栏的配置\r\n\t\t         * @property {Function} [summary.method] 合计的计算方法\r\n\t\t         * @property {template} summary.template 模板\r\n\t\t         * @memberof grid-class\r\n\t\t         */\r\n\t\t        summary: null,\r\n\t\t      \t/**\r\n\t\t         * 合计栏所在位置 可选值 top bottom\r\n\t\t         * @property {String} [summaryPos=bottom] 合计栏所在位置\r\n\t\t         * @memberof grid-class\r\n\t\t         */\r\n\t\t        summaryPos: 'bottom',\r\n\t\t        /**\r\n\t\t         * 网格列是否可以调整宽度\r\n\t\t         * <PRE>\r\n\t\t\t\t * 1、默认为'true'，可以调整列宽\r\n\t\t\t\t * </PRE>\r\n\t\t         * @property {Boolean} [columnResizable=true] 允许调整列宽\r\n\t\t         * @memberof grid-class\r\n\t\t         */\r\n\t\t        columnResizable: true,\r\n\t\t        /**\r\n\t\t\t\t * 是否点击数据行开始编辑\r\n\t\t\t\t * @memberof grid-class\r\n\t\t\t\t * @property {Boolean} [autoBeginEdit=true] 开始编辑\r\n\t\t\t\t */\r\n\t\t\t\tautoBeginEdit: true,\r\n\t\t\t\t/**\r\n\t\t\t\t * 是否点击非数据行结束编辑\r\n\t\t\t\t * @memberof grid-class\r\n\t\t\t\t * @property {Boolean} [autoEndEdit=true] 结束编辑\r\n\t\t\t\t */\r\n\t\t\t\tautoEndEdit: true,\r\n\t\t\t\t/**\r\n\t\t\t\t * 是否使用编辑器的代理删除按钮\r\n\t\t\t\t * 该参数在有编辑器的情况下生效\r\n\t\t\t\t * @memberof grid-class\r\n\t\t\t\t * @property {Boolean} [editorDelBtn=true] 使用\r\n\t\t\t\t */\r\n\t\t\t\teditorDelBtn: true,\r\n\t\t\t\t/**\r\n\t\t\t\t * 要合并的列名\r\n\t\t\t\t * @memberof grid-class\r\n\t\t\t\t * @property {Array<String>} [mergeColumns] 要自动合并的列\r\n\t\t\t\t */\r\n\t\t\t\tmergeColumns: null,\r\n\t\t\t\t/**\r\n\t\t\t\t * 是否允许进行列的隐藏/显示操作\r\n\t\t\t\t * @memberof grid-class\r\n\t\t\t\t * @property {Boolean} [columnManager=true] 允许\r\n\t\t\t\t */\r\n\t\t\t\tcolumnManager: true,\r\n\t\t\t\t/**\r\n\t\t\t\t * 每次双击必须间隔毫秒数\r\n\t\t\t\t */\r\n\t\t\t\tdblOnce: 1000,\r\n\t\t\t\t/**\r\n\t\t\t\t * 定位编辑器上边的编辑器\r\n\t\t\t\t * @memberof grid-class\r\n\t\t\t\t * @property {Array<Number>} [keyUpEditor=App.keyCode.UP] 按键值数组\r\n\t\t\t\t */\r\n\t\t\t\tkeyUpEditor: [App.keyCode.UP],\r\n\t\t\t\t/**\r\n\t\t\t\t * 定位编辑器下边的编辑器\r\n\t\t\t\t * @memberof grid-class\r\n\t\t\t\t * @property {Array<Number>} [keyDownEditor=App.keyCode.DOWN] 按键值数组\r\n\t\t\t\t */\r\n\t\t\t\tkeyDownEditor: [App.keyCode.DOWN],\r\n\t\t\t\t/**\r\n\t\t\t\t * 定位编辑器左边的编辑器\r\n\t\t\t\t * @memberof grid-class\r\n\t\t\t\t * @property {Array<Number>} [keyLeftEditor=App.keyCode.LEFT] 按键值数组\r\n\t\t\t\t */\r\n\t\t\t\tkeyLeftEditor: [App.keyCode.LEFT],\r\n\t\t\t\t/**\r\n\t\t\t\t * 定位编辑器右边的编辑器\r\n\t\t\t\t * @memberof grid-class\r\n\t\t\t\t * @property {Array<Number>} [keyRightEditor=App.keyCode.RIGHT] 按键值数组\r\n\t\t\t\t */\r\n\t\t\t\tkeyRightEditor: [App.keyCode.RIGHT],\r\n\t\t\t\t/**\r\n\t\t\t\t * 是否启用特殊按键[keyNextEditor、keyPrevEditor、keyAppendRow、keyDeleteRow]\r\n\t\t\t\t * @memberof grid-class\r\n\t\t\t\t * @property {Boolean} [keySpecEnabled=true]\r\n\t\t\t\t */\r\n\t\t\t\tkeySpecEnabled: true,\r\n\t\t\t\t/**\r\n\t\t\t\t * 定位编辑器的下一个编辑器\r\n\t\t\t\t * @memberof grid-class\r\n\t\t\t\t * @property {Array<Number>} [keyNextEditor=[App.keyCode.ENTER, App.keyCode.TAB]] 按键值数组\r\n\t\t\t\t */\r\n\t\t\t\tkeyNextEditor: [App.keyCode.ENTER, App.keyCode.TAB],\r\n\t\t\t\t/**\r\n\t\t\t\t * 定位编辑器的上一个编辑器\r\n\t\t\t\t * @memberof grid-class\r\n\t\t\t\t * @property {Array<Number>} [keyPrevEditor=[{keyCode:App.keyCode.TAB, shiftKey:true}]] 按键值数组\r\n\t\t\t\t */\r\n\t\t\t\tkeyPrevEditor: [{keyCode:App.keyCode.TAB, shiftKey:true}],\r\n\t\t\t\t/**\r\n\t\t\t\t * 追加一行到末尾\r\n\t\t\t\t * @memberof grid-class\r\n\t\t\t\t * @property {Array<Number>} [keyPrevEditor=[{keyCode:App.keyCode.PLUS, ctrlKey:true}]] 按键值数组\r\n\t\t\t\t */\r\n\t\t\t\tkeyAppendRow: [{keyCode:App.keyCode.PLUS, shiftKey:true}],\r\n\t\t\t\t/**\r\n\t\t\t\t * 删除当前编辑行\r\n\t\t\t\t * @memberof grid-class\r\n\t\t\t\t * @property {Array<Number>} [keyPrevEditor=[{keyCode:App.keyCode.MINUS, ctrlKey:true}]] 按键值数组\r\n\t\t\t\t */\r\n\t\t\t\tkeyDeleteRow: [{keyCode:App.keyCode.MINUS, shiftKey:true, ctrlKey:true}]\r\n\r\n\t\t\t},\r\n\t\t\t/**\r\n\t\t\t * 网格的列属性\r\n\t\t\t * @class\r\n\t\t\t * @classdesc 表格\r\n\t\t\t * @name gridColumn\r\n\t\t\t */\r\n\t\t\tColumn: {\r\n\t\t\t\t/**\r\n\t\t\t\t * 列属性\r\n\t\t\t\t * @property {String} field 列属性\r\n\t\t\t\t * @memberof gridColumn\r\n\t\t\t\t */\r\n\t\t\t\tfield: null,\r\n\t\t\t\t/**\r\n\t\t\t\t * 列标题\r\n\t\t\t\t * <PRE>操作列配置按钮，title配置为数字，该数字代表buttons的索引，且按钮不加入数据域</PRE>\r\n\t\t\t\t * @property {String} title 列标题\r\n\t\t\t\t * @memberof gridColumn\r\n\t\t\t\t */\r\n\t\t\t\ttitle: null,\r\n\t\t\t\t/**\r\n\t\t\t\t * 列公式\r\n\t\t\t\t * <PRE>表达式可以直接使用当前行变量\r\n\t\t\t\t * \t表达式内提供下列三个特殊方法功能动态维度列使用\r\n\t\t\t\t * \t\tgetNum(field)\r\n\t\t\t\t * \t\tgetStr(field)\r\n\t\t\t\t * \t\tsumSuffix(suffixStr)</PRE>\r\n\t\t\t\t * @property {String} formula 计算表达式\r\n\t\t\t\t * @memberof gridColumn\r\n\t\t\t\t */\r\n\t\t\t\tformula: null,\r\n\t\t\t\t/**\r\n\t\t\t\t * 合并列\r\n\t\t\t\t * @property {Number} [colspan] 合并列\r\n\t\t\t\t * @memberof gridColumn\r\n\t\t\t\t */\r\n\t\t\t\tcolspan: null,\r\n\t\t\t\t/**\r\n\t\t\t\t * 合并行\r\n\t\t\t\t * @property {Number} [rowspan] 合并行\r\n\t\t\t\t * @memberof gridColumn\r\n\t\t\t\t */\r\n\t\t\t\trowspan: null,\r\n\t\t\t\t/**\r\n\t\t\t\t * 宽度\r\n\t\t\t\t * @property {Number} [Column.width=100] 宽度\r\n\t\t\t\t * @memberof gridColumn\r\n\t\t\t\t */\r\n\t\t\t\twidth: 100,\r\n\t\t\t\t/**\r\n\t\t\t\t * 打印宽度单位mm\r\n\t\t\t\t * @property {Number} [Column.printWidth] 打印宽度\r\n\t\t\t\t * @memberof gridColumn\r\n\t\t\t\t */\r\n\t\t\t\tprintWidth: null,\r\n\t\t\t\t/**\r\n\t\t\t\t * 打印数据类型\r\n\t\t\t\t * <PRE>\r\n\t\t\t\t * String 字符串\r\n\t\t\t\t * Number0 整型的数值\r\n\t\t\t\t * Number1 保留1位小数的数值\r\n\t\t\t\t * Number2 保留2位小数的数值\r\n\t\t\t\t * Number3 保留3位小数的数值\r\n\t\t\t\t * Number4 保留4位小数的数值\r\n\t\t\t\t * Number5 保留5位小数的数值\r\n\t\t\t\t * Number6 保留6位小数的数值\r\n\t\t\t\t * </PRE>\r\n\t\t\t\t * @property {String} [Column.printType=String] 默认为字符串类型\r\n\t\t\t\t * @memberof gridColumn\r\n\t\t\t\t */\r\n\t\t\t\tprintType: 'String',\r\n\t\t\t\t/**\r\n\t\t\t\t * 固定列\r\n\t\t\t\t * 可选值: left, right\r\n\t\t\t\t * @property {String} [Column.frozen] 固定\r\n\t\t\t\t * @memberof gridColumn\r\n\t\t\t\t */\r\n\t\t\t\tfrozen: null,\r\n\t\t\t\t/**\r\n\t\t\t\t * 隐藏\r\n\t\t\t\t * @property {Number} [Column.hidden=false] 隐藏\r\n\t\t\t\t * @memberof gridColumn\r\n\t\t\t\t */\r\n\t\t\t\thidden: false,\r\n\t\t        /**\r\n\t\t\t\t * 对齐方式 可选值 center left right\r\n\t\t\t\t * @property {String} [Column.align=center] 对齐方式\r\n\t\t\t\t * @memberof gridColumn\r\n\t\t\t\t */\r\n\t\t        align: 'center',\r\n\t\t        /**\r\n\t\t         * 可排序\r\n\t\t         * @property {Boolean} [sortable=false] 对齐方式\r\n\t\t         * @memberof gridColumn\r\n\t\t         */\r\n\t\t        sortable: false,\r\n\t\t        /**\r\n\t\t         * 自定义排序函数，用来做局部排序\r\n\t\t         * @property {Function} [sorter] 排序函数\r\n\t\t         * @property {Object} sorter.a 第一个值\r\n\t\t         * @property {Object} sorter.b 第二个值\r\n\t\t         * @example {title: '自定义排序方法',align:'right',field: 'f3',\r\n\t\t         * &#9;sortable:true,\r\n\t\t         * &#9;sorter: function(a,b){\r\n\t\t         * &#9;&#9;return a.f3 - b.f3;\r\n\t\t         * &#9;}\r\n\t\t         * }\r\n\t\t         * @memberof gridColumn\r\n\t\t         */\r\n\t\t        sorter: null,\r\n\t\t        /**\r\n\t\t         * 返回样式字符串定制的单元格样式的函数\r\n\t\t         * @property {Function} [styler] 样式函数\r\n\t\t         * @property {String} styler.val 值\r\n\t\t         * @property {Object} styler.row 行数据对象\r\n\t\t         * @property {index} styler.i 行号\r\n\t\t         * @example {title: '样式修改列',field: 'f2',\r\n\t\t         * &#9;styler:function(val,row,i){\r\n\t\t         * &#9;&#9;var n = parseInt(val.substr(val.lastIndexOf('-')+1));\r\n\t\t         * &#9;&#9;if(n%2==1){\r\n\t\t         * &#9;&#9;&#9;return 'color:green;';\r\n\t\t         * &#9;&#9;}else{\r\n\t\t         * &#9;&#9;&#9;return 'color:red;';\r\n\t\t         * &#9;&#9;}\r\n\t\t         * &#9;}\r\n\t\t         * }\r\n\t\t         * @memberof gridColumn\r\n\t\t         */\r\n\t\t        styler: null,\r\n\t\t        /**\r\n\t\t         * 格式化配置\r\n\t\t         * <PRE>\r\n\t\t         * 1、函数类型： 自定义编写的函数\r\n\t\t         * 该函数接收选中四个参数，分别为该单元格的值，行实体对象，行号，列。函数返回一个字符串作为显示值\r\n\t\t\t\t * 2、数值格式化：指定格式化串 [#,###.00]\r\n\t\t\t\t * 3、字符串连接：使用{}包裹变量\r\n\t\t\t\t * 4、内置格式化方法：内置格式化方法编码\r\n\t\t         * </PRE>\r\n\t\t         * @property {Function|String} [formatter] 格式化\r\n\t\t         * @property {String} formatter.value 值\r\n\t\t         * @property {Object} formatter.row 行数据对象\r\n\t\t         * @property {Number} formatter.rowIndex 行号\r\n\t\t         * @property {GridColumn} formatter.column 列\r\n\t\t         * @example {title: '格式化显示列',align:'left',field: 'f1',\r\n\t\t         * &#9;formatter:function(value,row,rowIndex,column){\r\n\t\t         * &#9;&#9;return '格式化列';\r\n\t\t         * &#9;}\r\n\t\t         * }\r\n\t\t         * @example {title: 'f1显示f2的值',align:'left',field: 'f1', formatter:'[#,###.00]'}\r\n\t\t         * @example {title: 'f1显示f2的值',align:'left',field: 'f1', formatter:'{f1}-{f2}'}\r\n\t\t         * @example {title: 'f1显示f2的值',align:'left',field: 'f1', formatter:'oneYesZeroNo'}\r\n\t\t         * @memberof gridColumn\r\n\t\t         */\r\n\t\t        formatter: null,\r\n\t\t        /**\r\n\t\t         * 编辑器设置\r\n\t\t         * @property {Object} [editor] 格式化函数\r\n\t\t         * @property {String} editor.type 编辑器类型\r\n\t\t         * @property {Object} editor.options 编辑器初始化属性[详见个组件]\r\n\t\t         * @example {\r\n\t\t         * &#9;title : '主列标题2',\r\n\t\t         * &#9;field : 'c2',\r\n\t\t         * &#9;width : 120,\r\n\t\t         * &#9;editor : {\r\n\t\t         * &#9;&#9;type : 'combogrid',\r\n\t\t         * &#9;&#9;options : {\r\n\t\t         * &#9;&#9;&#9;panelwidth: 400,\r\n\t\t         * &#9;&#9;&#9;url: 'platform/sample/base/ui/combogridData.do',\r\n\t\t         * &#9;&#9;&#9;&#9;columns: [[\r\n\t\t         * &#9;&#9;&#9;&#9;{title: 'id列',field: 'id',hidden:true},\r\n\t\t         * &#9;&#9;&#9;&#9;{title: '名称列',field: 'name',width: 100},\r\n\t\t         * &#9;&#9;&#9;&#9;{title: '主列标题3',field: 'c3',width: 150},\r\n\t\t         * &#9;&#9;&#9;&#9;{title: '主列标题4',field: 'c4',width: 200},\r\n\t\t         * &#9;&#9;&#9;&#9;{title: '主列标题5',field: 'c5',width: 250},\r\n\t\t         * &#9;&#9;&#9;&#9;{title: '主列标题6',field: 'c6',width: 500}\r\n\t\t         * &#9;&#9;&#9;]]\r\n\t\t         * &#9;&#9;}\r\n\t\t         * &#9;}\r\n\t\t         * }\r\n\t\t         * @memberof gridColumn\r\n\t\t         */\r\n\t\t        editor: null,\r\n\t\t        /**\r\n\t\t         * 单元格按钮\r\n\t\t         * @property {Array} [buttons] 主数据单元格中的按钮\r\n\t\t      \t * @property {String} [buttons.text] 标题\r\n\t\t\t\t * @property {String} [buttons.iconCls] 样式\r\n\t\t\t\t * @property {Function|Boolean} [buttons.disabled] 是否可用\r\n\t\t\t\t * @property {Function} [buttons.handler] 操作\r\n\t\t\t\t * @property {Object} [buttons.handler.rowData] 行数据\r\n\t\t\t\t * @property {Number} [buttons.handler.rowIndex] 行号\r\n\t\t\t\t * @example {\r\n\t\t\t\t * &#9;title : '操作',\r\n\t\t\t\t * &#9;width : 200,\r\n\t\t\t\t * &#9;buttons:[ {\r\n\t\t\t\t * &#9;&#9;text : '编辑',\r\n\t\t\t\t * &#9;&#9;iconCls : 'btn-edit',\r\n\t\t\t\t * &#9;&#9;disabled : true,\r\n\t\t\t\t * &#9;&#9;handler : function(rowData, rowIndex) {\r\n\t\t\t\t * &#9;&#9;&#9;$('#gridEditorOnClickTr').grid('beginEdit', rowIndex);\r\n\t\t\t\t * &#9;&#9;}\r\n\t\t\t\t * &#9;} , {\r\n\t\t\t\t * &#9;&#9;text : '撤销编辑',\r\n\t\t\t\t * &#9;&#9;iconCls : 'btn-reset',\r\n\t\t\t\t * &#9;&#9;disabled : function(rowData, rowIndex) {\r\n\t\t\t\t * &#9;&#9;&#9;return rowIndex%2==0?true:false;\r\n\t\t\t\t * &#9;&#9;},\r\n\t\t\t\t * &#9;&#9;handler : function(rowData, rowIndex) {\r\n\t\t\t\t * &#9;&#9;&#9;$('#gridEditorOnClickTr').grid('cancelEdit', rowIndex);\r\n\t\t\t\t * &#9;&#9;}\r\n\t\t\t\t * &#9;} , {\r\n\t\t\t\t * &#9;&#9;text : '应用编辑',\r\n\t\t\t\t * &#9;&#9;iconCls : 'btn-start',\r\n\t\t\t\t * &#9;&#9;handler : function(rowData, rowIndex) {\r\n\t\t\t\t * &#9;&#9;&#9;$('#gridEditorOnClickTr').grid('acceptChange', rowIndex);\r\n\t\t\t\t * &#9;&#9;}\r\n\t\t\t\t * &#9;}\r\n\t\t\t\t * }\r\n\t\t         * @memberof gridColumn\r\n\t\t         */\r\n\t\t        buttons: null,\r\n\t\t        /**\r\n\t\t         * 数据列是否提示浮动的title\r\n\t\t         * @property {Boolean} [showTitle=false] 标志\r\n\t\t         * @memberof gridColumn\r\n\t\t         */\r\n\t\t        showTitle: false,\r\n\t\t        /**\r\n\t\t         * 合计值选项\r\n\t\t         * <PRE>\r\n\t\t         * summary.type 可选值：\r\n\t\t         * &#9;&#9;sum: 合计值\r\n\t\t         * &#9;&#9;avg：平均值\r\n\t\t         * &#9;&#9;min：最小值\r\n\t\t         * &#9;&#9;max：最大值\r\n\t\t         * &#9;&#9;count：计数值\r\n\t\t         * summary.text 要输出的值\r\n\t\t         * </PRE>\r\n\t\t         * @property {Object} [summary] 合计值选项\r\n\t\t         * @property {String} [summary.type] 类型\r\n\t\t         * @property {String} [summary.text] 文字\r\n\t\t         * @memberof gridColumn\r\n\t\t         */\r\n\t\t        summary: null,\r\n\t\t        /**\r\n\t\t         * 网格列是否可以调整宽度\r\n\t\t         * @property {Boolean} [resizable=true] 允许调整列宽\r\n\t\t         * @memberof gridColumn\r\n\t\t         */\r\n\t\t        resizable: true,\r\n\t\t        /**\r\n\t\t         * 是否为行头\r\n\t\t         * @property {Boolean} [rowHeader=false] 不是行头\r\n\t\t         * @memberof gridColumn\r\n\t\t         */\r\n\t\t        rowHeader: false,\r\n\t\t        /**\r\n\t\t         * 是否作为 列隐藏/显示树 的节点\r\n\t\t         * @property {Boolean} [showTree=true] 允许\r\n\t\t         * @memberof gridColumn\r\n\t\t         */\r\n\t\t        showTree: true,\r\n\t\t        /**\r\n\t\t         * 是否锁定列隐藏/显示操作，锁定将不允许用户进行列的隐藏/显示操作\r\n\t\t         * @property {Boolean} [lockTree=false] 允许\r\n\t\t         * @memberof gridColumn\r\n\t\t         */\r\n\t\t        lockTree: false\r\n\t\t\t},\r\n\t\t\tCombogrid: {\r\n\t\t\t\t/**\r\n\t\t\t\t * 要加载数据的url，也可以通过action设置\r\n\t\t\t\t * @memberof combogrid-class\r\n\t\t\t\t * @property {Url} [url] url数据源\r\n\t\t\t\t */\r\n\t\t\t\turl: '',\r\n\t\t\t\t/**\r\n\t\t\t\t * <span class=\"type-signature static\">override</span>\r\n\t\t\t\t * 下拉面板的高度\r\n\t\t\t\t * @memberof combogrid-class\r\n\t\t\t\t * @property {Number} [panelheight=297] 下拉面板的高度\r\n\t\t\t\t */\r\n\t\t\t\tpanelheight: 297,\r\n\t\t\t\t/**\r\n\t\t\t\t * 是否允许多选 也可以由checkbox来设置该属性\r\n\t\t\t\t * s.multiple = s.checkbox || s.multiple;\r\n\t\t\t\t * @memberof combogrid-class\r\n\t\t\t\t * @property {Boolean} [multiple=false] 多选\r\n\t\t\t\t */\r\n\t\t\t\tmultiple: false,\r\n\t\t\t\t/**\r\n\t\t\t\t * 联想过滤时使用的匹配属性，多个属性使用,分隔\r\n\t\t\t\t * <PRE style=\"color:red;\">\r\n\t\t\t\t * 当没有配置该属性时，默认使用textfield\r\n\t\t\t\t * 远程联想时 可以通过_key接收输入的搜索关键字、suggestfield接收该字段的配置\r\n\t\t\t\t * </PRE>\r\n\t\t\t\t * @memberof combogrid-class\r\n\t\t\t\t * @property {String} [suggestfield] 匹配属性\r\n\t\t\t\t */\r\n\t\t\t\tsuggestfield: '',\r\n\t\t\t\t/**\r\n\t\t\t\t * 是否允许网格搜索\r\n\t\t\t\t * @todo 当下拉网格不分页时，根据当前页面的数据进行匹配\r\n\t\t\t\t * @todo 当下拉网格存在分页，则根据url进行远程匹配\r\n\t\t\t\t *          远程用 _key 来接受检索关键字，suggestfield来接受检索的匹配属性\r\n\t\t\t\t * </PRE>\r\n\t\t\t\t * @memberof combogrid-class\r\n\t\t\t\t * @property {boolean} [search=false] 允许网格搜索\r\n\t\t\t\t */\r\n\t\t\t\tsearch: false,\r\n\t\t\t\t/**\r\n\t\t\t\t * 延迟搜索时间（毫秒）\r\n\t\t\t\t * @memberof combogrid-class\r\n\t\t\t\t * @property {Object} [lazy=500] 延迟搜索时间（毫秒）\r\n\t\t\t\t */\r\n\t\t\t\tlazy: 500,\r\n\t\t\t\t/**\r\n\t\t\t\t * 允许联想\r\n\t\t\t\t * @memberof combogrid-class\r\n\t\t\t\t * @property {Boolean} [usesuggest=false] 允许联想\r\n\t\t\t\t */\r\n\t\t\t\tusesuggest: false,\r\n\t\t\t\t/**\r\n\t\t\t\t * 下一页\r\n\t\t\t\t * @memberof combogrid-class\r\n\t\t\t\t * @property {Array} keyNextPage=[App.keyCode.RIGHT] 按键值数组\r\n\t\t\t\t */\r\n\t\t\t\tkeyNextPage: [App.keyCode.RIGHT],\r\n\t\t\t\t/**\r\n\t\t\t\t * 上一页\r\n\t\t\t\t * @memberof combogrid-class\r\n\t\t\t\t * @property {Array} keyPrevPage=[App.keyCode.LEFT] 按键值数组\r\n\t\t\t\t */\r\n\t\t\t\tkeyPrevPage: [App.keyCode.LEFT],\r\n\t\t\t\tclassName: 'app-combogrid',\r\n\t\t\t\t/**\r\n\t\t\t\t * <span class=\"type-signature static\">override</span>\r\n\t\t\t\t * 下拉表格内部表格的默认设置\r\n\t\t\t\t * @see {@link grid} 查看grid组件\r\n\t\t\t\t * @memberof combogrid-class\r\n\t\t\t\t * @property {Object} Grid 下拉表格内部表格的默认设置\r\n\t\t\t\t * @property {Boolean} [Grid.pagerToolbar=false] 上分页与标题栏同行\r\n\t\t\t\t * @property {Boolean} [Grid.rownumbers='repeat'] 网格行号\r\n\t\t\t\t * @property {Boolean} [Grid.autoHeight=true] 自动增高模式\r\n\t\t\t\t * @property {Boolean} [Grid.follow=all] 头/尾跟随滚动\r\n\t\t\t\t * @property {Number} [Grid.clickDelay=0] 单击确认毫秒数\r\n\t\t\t\t */\r\n\t\t\t\tGrid:{\r\n\t\t\t\t\t/**\r\n\t\t\t\t\t * 上分页是否与工具栏同行，false则与标题栏同行\r\n\t\t\t\t\t */\r\n\t\t\t        pagerToolbar: false,\r\n\t\t\t\t\t/**\r\n\t\t\t\t\t * 网格行号\r\n\t\t\t\t\t */\r\n\t\t\t\t\trownumbers: 'repeat',\r\n\t\t\t\t\t/**\r\n\t\t\t\t\t * 内置的网格尾固定高度\r\n\t\t\t\t\t * 网格头/尾 不跟随滚动\r\n\t\t\t\t\t */\r\n\t\t\t\t\tfollow: null,\r\n\t\t\t\t\t/**\r\n\t\t\t\t\t * 单击确认毫秒数\r\n\t\t\t\t\t */\r\n\t\t\t\t\tclickDelay: 0\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tCheckbox:{\r\n\t\t\t\t/**\r\n\t\t\t\t * 数据对象中作为隐藏值的属性名\r\n\t\t\t\t * @memberof checkbox-class\r\n\t\t\t\t * @property {String} [valuefield=id] 隐藏值属性名\r\n\t\t\t\t */\r\n\t\t\t\tvaluefield: 'id',\r\n\t\t\t\t/**\r\n\t\t\t\t * 数据对象中作为显示值的属性名\r\n\t\t\t\t * @memberof checkbox-class\r\n\t\t\t\t * @property {String} [textfield=name] 显示值属性名\r\n\t\t\t\t */\r\n\t\t\t\ttextfield: 'name',\r\n\t\t\t\t/**\r\n\t\t\t\t * 可以勾选的个数\r\n\t\t\t\t * @memberof checkbox-class\r\n\t\t\t\t * @property {number} [checkLen=0] 0不做限制\r\n\t\t\t\t */\r\n\t\t\t\tcheckedLen: 0,\r\n\t\t\t\t/**\r\n\t\t\t\t * 布局方式，默认为水平布局，可选为：'horizontal' | 'vertical'\r\n\t\t\t\t * @memberof checkbox-class\r\n\t\t\t\t * @property {Array} orient=[horizontal]\r\n\t\t\t\t */\r\n\t\t\t\torient: 'horizontal'\r\n\t\t\t},\r\n\t\t\tprogressbar: {\r\n\t\t\t\t/**\r\n\t\t\t\t * 宽度 默认与父元素宽度相同\r\n\t\t\t\t * @memberof progressbar-class\r\n\t\t\t\t * @property {String} [width=auto] 进度条的宽度\r\n\t\t\t\t */\r\n\t\t\t\twidth: 'auto',\r\n\t\t\t\t/**\r\n\t\t\t\t * 进度值\r\n\t\t\t\t * @memberof progressbar-class\r\n\t\t\t\t * @property {Number} [value=0] 进度值\r\n\t\t\t\t */\r\n\t\t\t\tvalue : 0,\r\n\t\t\t\t/**\r\n\t\t\t\t * 高度\r\n\t\t\t\t * @memberof progressbar-class\r\n\t\t\t\t * @property {String} [height=20px] 高度\r\n\t\t\t\t */\r\n\t\t\t\theight: '20px',\r\n\t\t\t\t/**\r\n\t\t\t\t * 背景色\r\n\t\t\t\t * @memberof progressbar-class\r\n\t\t\t\t * @property {String} [background-color=#4AAE98] 背景色\r\n\t\t\t\t */\r\n\t\t\t\t'background-color': '#4AAE98',\r\n\t\t\t\t/**\r\n\t\t\t\t * 进度值的前景色\r\n\t\t\t\t * @memberof progressbar-class\r\n\t\t\t\t * @property {String} [color=black] 前景色\r\n\t\t\t\t */\r\n\t\t\t\tcolor: 'black',\r\n\t\t\t\t/**\r\n\t\t\t\t * 是否显示条纹\r\n\t\t\t\t * @memberof progressbar-class\r\n\t\t\t\t * @property {String} [striped=true] 显示条纹\r\n\t\t\t\t */\r\n\t\t\t\tstriped: true,\r\n\t\t\t\t/**\r\n\t\t\t\t * 进度最大值\r\n\t\t\t\t * @memberof progressbar-class\r\n\t\t\t\t * @property {String} [max=100] 进度最大值\r\n\t\t\t\t */\r\n\t\t\t\tmax: 100\r\n\t\t\t},\r\n\t\t\tupload: {\r\n\t\t\t\t/**\r\n\t\t\t\t * 上传的url\r\n\t\t\t\t * @memberof upload-class\r\n\t\t\t\t * @property {url} uploadUrl=attachment/upload.do 上传的url\r\n\t\t\t\t */\r\n\t\t\t\tuploadUrl: 'attachment/upload.do',\r\n\t\t\t\t/**\r\n\t\t\t\t * 是否初始化已上传的文件\r\n\t\t\t\t * @memberof upload-class\r\n\t\t\t\t * @property {Boolean} [requestFile=false] 初始化已上传的文件\r\n\t\t\t\t */\r\n\t\t\t\trequestFile: false,\r\n\t\t\t\t/**\r\n\t\t\t\t * 获取已上传文件的url\r\n\t\t\t\t * @memberof upload-class\r\n\t\t\t\t * @property {url} [fileUrl=attachment/getFiles.do] 获取已上传文件的url\r\n\t\t\t\t */\r\n\t\t\t\tfileUrl: 'attachment/getFiles.do',\r\n\t\t\t\t/**\r\n\t\t\t\t * 删除已上传文件的url\r\n\t\t\t\t * @memberof upload-class\r\n\t\t\t\t * @property {url} [deleteUrl=attachment/delete.do] 删除已上传文件的url\r\n\t\t\t\t */\r\n\t\t\t\tdeleteUrl: 'attachment/delete.do',\r\n\t\t\t\t/**\r\n\t\t\t\t * 工具栏的位置 可选值 top|bottom\r\n\t\t\t\t * @memberof upload-class\r\n\t\t\t\t * @property {Boolean} [toolbarPosition=top] 工具栏的位置\r\n\t\t\t\t */\r\n\t\t\t\ttoolbarPosition: 'top',\r\n\t\t\t\t/**\r\n\t\t\t\t * 顶层的css样式\r\n\t\t\t\t * @memberof upload-class\r\n\t\t\t\t * @property {style} [style] 顶层的css样式\r\n\t\t\t\t */\r\n\t\t\t\tstyle: '',\r\n\t\t\t\t/**\r\n\t\t\t\t * 顶层的class类名\r\n\t\t\t\t * @memberof upload-class\r\n\t\t\t\t * @property {Class} [css] 顶层的class类名\r\n\t\t\t\t */\r\n\t\t\t\tcss: '',\r\n\t\t\t\t/**\r\n\t\t\t\t * 设置宽度后为平铺显示文件\r\n\t\t\t\t * @memberof upload-class\r\n\t\t\t\t * @property {Class} [fileWidth] 文件项的宽度\r\n\t\t\t\t */\r\n\t\t\t\tfileWidth: '',\r\n\t\t\t\t/**\r\n\t\t\t\t * 文件是否可以删除\r\n\t\t\t\t * @memberof upload-class\r\n\t\t\t\t * @property {Class} [canDelete=false] 不能删除文件\r\n\t\t\t\t */\r\n\t\t\t\tcanDelete: false,\r\n\t\t\t\t/**\r\n\t\t\t\t * 文件的扩展名\r\n\t\t\t\t * @memberof upload-class\r\n\t\t\t\t * @property {String} [exts] 文件的扩展名\r\n\t\t\t\t * @example exts=\".zip,.jpg,.rar\"\r\n\t\t\t\t */\r\n\t\t\t\texts: '',\r\n\t\t\t\t/**\r\n\t\t\t\t * 上传文件按钮的文本\r\n\t\t\t\t * @memberof upload-class\r\n\t\t\t\t * @property {String} [uploadBtnText=上传文件] 上传文件按钮的文本\r\n\t\t\t\t */\r\n\t\t\t\tuploadBtnText: '上传文件',\r\n\t\t\t\t/**\r\n\t\t\t\t * 可以上传多个文件\r\n\t\t\t\t * @memberof upload-class\r\n\t\t\t\t * @property {Boolean} [multiple=true] 上传多个文件\r\n\t\t\t\t */\r\n\t\t\t\tmultiple: true\r\n\t\t\t},\r\n\t\t\tButton:{\r\n\t\t\t\t/**\r\n\t\t\t\t * id\r\n\t\t\t\t * @memberof Button\r\n\t\t\t\t * @property {String}\r\n\t\t\t\t */\r\n\t\t\t\tid : null,\r\n\t\t\t\t /**\r\n\t\t\t\t * 是否禁用\r\n\t\t\t\t  * @memberof Button\r\n\t\t\t      * @property {Boolean} [value=false]\r\n\t\t\t\t */\r\n\t\t\t\tdisabled : false,\r\n\t\t\t\t/**\r\n\t\t\t\t * 是否切换元素的可见状态\r\n\t\t\t\t* @memberof Button\r\n\t\t\t \t* @property {Boolean} [value=false]\r\n\t\t\t\t */\r\n\t\t\t\ttoggle : false,\r\n\t\t\t\t/**\r\n\t\t\t\t * 是否选中,当toggle为true有有效\r\n\t\t\t\t * @memberof Button\r\n\t\t\t \t * @property {Boolean} [selected=false]\r\n\t\t\t\t * 是否选中\r\n\t\t\t\t */\r\n\t\t\t\tselected : false,\r\n\t\t\t\t/**\r\n\t\t\t\t * 按钮组.当group值一样时，认为是一组按钮\r\n\t\t\t\t * @memberof Button\r\n\t\t\t \t * @property {String} [group='']\r\n\t\t\t\t */\r\n\t\t\t\tgroup : null,\r\n\t\t\t\tplain : false,\r\n\t\t\t\t/**\r\n\t\t\t\t * @memberof Button\r\n\t\t\t \t * @property {String} [text='']\r\n\t\t\t\t * 按钮文本\r\n\t\t\t\t */\r\n\t\t\t\ttext : \"\",\r\n\t\t\t\t/**\r\n\t\t\t\t * @memberof Button\r\n\t\t\t \t * @property {String} [iconCls='']\r\n\t\t\t\t * ico图标样式\r\n\t\t\t\t */\r\n\t\t\t\ticonCls : null,\r\n\t\t\t\t/**\r\n\t\t\t\t * ico对齐方式\r\n\t\t\t\t * @memberof Button\r\n\t\t\t \t * @property {String} [iconCls='left']\r\n\t\t\t\t */\r\n\t\t\t\ticonAlign : \"left\",\r\n                /**\r\n                 * 按钮大小\r\n                 * @memberof Button\r\n                 * @property {String} [iconCls='small'] 小按钮 small,large\r\n                 */\r\n\t\t\t    size: 'small',\t// small,large\r\n                /**\r\n                 * 按钮点击事件\r\n                 * @event Button#onClick\r\n                 * @property {Function} [onClick=emptyFunction]\r\n                 */\r\n\t\t\t\tonClick: function(){}\r\n\t\t\t},\r\n\t\t\tMenuButton : {\r\n                className:'app-menubutton',\r\n                /**\r\n\t\t\t\t * 禁用启用\r\n\t\t\t\t *  @memberof menututton\r\n\t\t\t \t * @property {Boolean} [disabled=false]\r\n\t\t\t\t */\r\n\t\t\t\tdisabled: false,\r\n\t\t\t\t/**\r\n\t\t\t\t * 是否为平面按钮\r\n\t\t\t\t *  @memberof menututton\r\n\t\t\t \t * @property {Boolean} [plain=false]\r\n\t\t\t\t */\r\n\t\t\t\tplain: true,\r\n\t\t\t\t/**\r\n\t\t\t\t * 绑定的菜单id\r\n\t\t\t\t * @memberof menututton\r\n\t\t\t \t * @property {String} [menu='']\r\n\t\t\t \t * @example menu=\"#menu1\"\r\n\t\t\t\t */\r\n\t\t\t\tmenu: null,\r\n\t\t\t\t/**\r\n\t\t\t\t * 定义了时间以毫秒为单位显示菜单时，悬停按钮\r\n\t\t\t\t * @memberof menututton\r\n\t\t\t \t * @property {Number} [duration=100]\r\n\t\t\t \t * @example duration=100\r\n\t\t\t\t */\r\n\t\t\t\tduration: 100\r\n\t\t\t},\r\n\t\t\tMenu: {\r\n                className:'app-menu',\r\n                zIndex:110000,\r\n\t\t\t\tleft: 0,\r\n\t\t\t\ttop: 0,\r\n\t\t\t\talignTo: null,\r\n\t\t\t\talign: 'left',\r\n\t\t\t\tminWidth: 120,\r\n\t\t\t\tduration: 100,\t// Defines duration time in milliseconds to hide when the mouse leaves the menu.\r\n\t\t\t\thideOnUnhover: true,\t// Automatically hides the menu when mouse exits it\r\n\t\t\t\tonShow: function(){},\r\n\t\t\t\tonHide: function(){},\r\n\t\t\t\tonClick: function(item){}\r\n\t\t\t},\r\n\t\t\tPanel:{\r\n\t\t\t\t/**\r\n\t\t\t\t * @memberof panel\r\n\t\t\t \t * @property {String} [id='']\r\n\t\t\t\t * 面板id\r\n\t\t\t\t */\r\n\t\t\t\tid:null,\r\n\t\t\t\t/**\r\n\t\t\t\t * 面板内间距\r\n\t\t\t\t * @memberof panel\r\n\t\t\t \t * @property {String} [padding='0 0 0 0']\r\n\t\t\t\t */\r\n\t\t\t\tpaddings:\"0 0 0 0\",\r\n\t\t\t\tmargins:\"0 0 0 0\",\r\n\t\t\t\t/**\r\n\t\t\t\t * @memberof panel\r\n\t\t\t \t * @property {String} [title='']\r\n\t\t\t\t * 面板标题\r\n\t\t\t\t */\r\n\t\t\t\ttitle:null,\r\n\t\t\t\t/**\r\n\t\t\t\t * @memberof panel\r\n\t\t\t \t * @property {String} [width='auto']\r\n\t\t\t\t * 面板宽度\r\n\t\t\t\t */\r\n\t\t\t\twidth: 'auto',\r\n\t\t\t\t/**\r\n\t\t\t\t * @memberof panel\r\n\t\t\t \t * @property {String} [height='auto']\r\n\t\t\t\t * 面板高度\r\n\t\t\t\t */\r\n\t\t\t\theight: 'auto',\r\n\t\t\t\t/**\r\n\t\t\t\t * @memberof panel\r\n\t\t\t \t * @property {String} [left=null]\r\n\t\t\t\t * 面板定位横向坐标\r\n\t\t\t\t */\r\n\t\t\t\tleft: null,\r\n\t\t\t\t/**\r\n\t\t\t\t * @memberof panel\r\n\t\t\t \t * @property {String} [top=null]\r\n\t\t\t\t * 面板定位纵向坐标\r\n\t\t\t\t */\r\n\t\t\t\ttop: null,\r\n\t\t\t\t/**\r\n\t\t\t\t * @memberof panel\r\n\t\t\t \t * @property {String} [cls=null]\r\n\t\t\t\t * 面板附加样式\r\n\t\t\t\t */\r\n\t\t\t\tcls: null,\r\n\t\t\t\t/**\r\n\t\t\t\t * @memberof panel\r\n\t\t\t \t * @property {String} [headerCls=null]\r\n\t\t\t\t * 面板头部附加样式名\r\n\t\t\t\t */\r\n\t\t\t\theaderCls: null,\r\n\t\t\t\t/**\r\n\t\t\t\t * @memberof panel\r\n\t\t\t \t * @property {String} [bodyCls=null]\r\n\t\t\t\t * 内容体附加样式名\r\n\t\t\t\t */\r\n\t\t\t\tbodyCls: null,\r\n\t\t\t\t/**\r\n\t\t\t\t * @memberof panel\r\n\t\t\t \t * @property {String} [style={}]\r\n\t\t\t\t * 面板样式\r\n\t\t\t\t */\r\n\t\t\t\tstyle: {},\r\n\t\t\t\t/**\r\n\t\t\t\t * @memberof panel\r\n\t\t\t \t * @property {String} [href=null]\r\n\t\t\t\t * ajax地址\r\n\t\t\t\t */\r\n\t\t\t\thref: null,\r\n\t\t\t\t/**\r\n\t\t\t\t * @memberof panel\r\n\t\t\t \t * @property {String} [cache=true]\r\n\t\t\t\t * 是否缓存\r\n\t\t\t\t */\r\n\t\t\t\tcache: true,\r\n\t\t\t\t/**\r\n\t\t\t\t * @memberof panel\r\n\t\t\t \t * @property {String} [fit=false]\r\n\t\t\t\t * 是否自适应父级控件，放在layout有效\r\n\t\t\t\t */\r\n\t\t\t\tfit: false,\r\n\t\t\t\t/**\r\n\t\t\t\t * @memberof panel\r\n\t\t\t \t * @property {String} [border=true]\r\n\t\t\t\t * 就否显示面板边框\r\n\t\t\t\t */\r\n\t\t\t\tborder: true,\r\n\t\t\t\t/**\r\n\t\t\t\t * @memberof panel\r\n\t\t\t \t * @property {String} [doSize=true]\r\n\t\t\t\t *  true to set size and do layout\r\n\t\t\t\t */\r\n\t\t\t\tdoSize: true,\r\n\t\t\t\t/**\r\n\t\t\t\t * @memberof panel\r\n\t\t\t \t * @property {String} [noheader=false]\r\n\t\t\t\t *  是否显示标题头\r\n\t\t\t\t */\r\n\t\t\t\tnoheader: false,\r\n\t\t\t\t/**\r\n\t\t\t\t * @memberof panel\r\n\t\t\t \t * @property {String} [content=null]\r\n\t\t\t\t * 面板内容体\r\n\t\t\t\t */\r\n\t\t\t\tcontent: null,\t// the body content if specified\r\n\t\t\t\t/**\r\n\t\t\t\t * @memberof panel\r\n\t\t\t \t * @property {String} [collapsible=false]\r\n\t\t\t\t * 是否可收缩\r\n\t\t\t\t */\r\n\t\t\t\tcollapsible: false,\r\n\t\t\t\t/**\r\n\t\t\t\t * @memberof panel\r\n\t\t\t \t * @property {String} [minimizable=false]\r\n\t\t\t\t * 是否最小化\r\n\t\t\t\t */\r\n\t\t\t\tminimizable: false,\r\n\t\t\t\t/**\r\n\t\t\t\t * @memberof panel\r\n\t\t\t \t * @property {String} [maximizable=false]\r\n\t\t\t\t * 是否最大化\r\n\t\t\t\t */\r\n\t\t\t\tmaximizable: false,\r\n\t\t\t\t/**\r\n\t\t\t\t * @memberof panel\r\n\t\t\t \t * @property {String} [closable=false]\r\n\t\t\t\t * 是否可关闭\r\n\t\t\t\t */\r\n\t\t\t\tclosable: false,\r\n\t\t\t\t/**\r\n\t\t\t\t * @memberof panel\r\n\t\t\t \t * @property {String} [collapsed=false]\r\n\t\t\t\t * 收缩状态\r\n\t\t\t\t */\r\n\t\t\t\tcollapsed: false,\r\n\t\t\t\t/**\r\n\t\t\t\t * @memberof panel\r\n\t\t\t \t * @property {String} [minimized=false]\r\n\t\t\t\t * 最小化状态\r\n\t\t\t\t */\r\n\t\t\t\tminimized: false,\r\n\t\t\t\t/**\r\n\t\t\t\t * @memberof panel\r\n\t\t\t \t * @property {String} [maximized=false]\r\n\t\t\t\t * 最大化状态\r\n\t\t\t\t */\r\n\t\t\t\tmaximized: false,\r\n\t\t\t\t/**\r\n\t\t\t\t * @memberof panel\r\n\t\t\t \t * @property {String} [closed=false]\r\n\t\t\t\t * 关闭状态\r\n\t\t\t\t */\r\n\t\t\t\tclosed: false,\r\n\t\t\t\textractor:null,\r\n\t\t\t\tmethod : \"get\",\r\n\t\t\t\t/**\r\n\t\t\t\t * @memberof panel\r\n\t\t\t \t * @property {String} [queryParams={}]\r\n\t\t\t \t * ajax加载参数\r\n\t\t\t\t */\r\n\t\t\t\tqueryParams : {},\r\n\t\t\t\tloader:function(){},\r\n\t\t\t\ttools: [],\r\n\t\t\t\tloadingMessage: 'Loading...',\r\n\t\t\t\t/**\r\n\t\t\t\t * @memberof panel\r\n\t\t\t \t * @fires Panel#onLoad\r\n\t\t\t \t * 打开前事件\r\n\t\t\t\t */\r\n\t\t\t\tonLoad: function(){},\r\n\t\t\t\t/**\r\n\t\t\t\t * @memberof panel\r\n\t\t\t \t * @fires Panel#onBeforeOpen\r\n\t\t\t \t * 打开前事件\r\n\t\t\t\t */\r\n\t\t\t\tonBeforeOpen: function(){},\r\n\t\t\t\t/**\r\n\t\t\t\t * @memberof panel\r\n\t\t\t \t * @event Panel#onOpen\r\n\t\t\t \t * 打开事件\r\n\t\t\t\t */\r\n\t\t\t\tonOpen: function(){},\r\n\t\t\t\t/**\r\n\t\t\t\t * @memberof panel\r\n\t\t\t \t * @event Panel#onBeforeClose\r\n\t\t\t \t * 关闭前事件\r\n\t\t\t\t */\r\n\t\t\t\tonBeforeClose: function(){},\r\n\t\t\t\t/**\r\n\t\t\t\t * @memberof panel\r\n\t\t\t \t * @event Panel#onClose\r\n\t\t\t \t * 关闭事件\r\n\t\t\t\t */\r\n\t\t\t\tonClose: function(){},\r\n\t\t\t\t/**\r\n\t\t\t\t * @memberof panel\r\n\t\t\t \t * @event Panel#onClose\r\n\t\t\t \t * 注销前事件\r\n\t\t\t\t */\r\n\t\t\t\tonBeforeDestroy: function(){},\r\n\t\t\t\t/**\r\n\t\t\t\t * @memberof panel\r\n\t\t\t \t * @event Panel#onClose\r\n\t\t\t \t * 注销事件\r\n\t\t\t\t */\r\n\t\t\t\tonDestroy: function(){},\r\n\t\t\t\t/**\r\n\t\t\t\t * @memberof panel\r\n\t\t\t \t * @event Panel#onResize\r\n\t\t\t \t * @property {Number} width\r\n\t\t\t \t * @property {Number} height\r\n\t\t\t \t * 注销事件\r\n\t\t\t\t */\r\n\t\t\t\tonResize: function(width,height){},\r\n\t\t\t\t/**\r\n\t\t\t\t * @memberof panel\r\n\t\t\t \t * @event Panel#onMove\r\n\t\t\t \t * 移动事件\r\n\t\t\t\t */\r\n\t\t\t\tonMove: function(left,top){},\r\n\t\t\t\t/**\r\n\t\t\t\t * @memberof panel\r\n\t\t\t \t * @event Panel#onMaximize\r\n\t\t\t \t * 最大化事件\r\n\t\t\t\t */\r\n\t\t\t\tonMaximize: function(){},\r\n\t\t\t\t/**\r\n\t\t\t\t * @memberof panel\r\n\t\t\t \t * @event Panel#onRestore\r\n\t\t\t \t * 重置事件\r\n\t\t\t\t */\r\n\t\t\t\tonRestore: function(){},\r\n\t\t\t\t/**\r\n\t\t\t\t * @memberof panel\r\n\t\t\t \t * @event Panel#onMinimize\r\n\t\t\t \t * 最小化事件\r\n\t\t\t\t */\r\n\t\t\t\tonMinimize: function(){},\r\n\t\t\t\t/**\r\n\t\t\t\t * @memberof panel\r\n\t\t\t \t * @event Panel#onMinimize\r\n\t\t\t \t * 收缩前事件\r\n\t\t\t\t */\r\n\t\t\t\tonBeforeCollapse: function(){},\r\n\t\t\t\t/**\r\n\t\t\t\t * @memberof panel\r\n\t\t\t \t * @event Panel#onBeforeExpand\r\n\t\t\t \t * 展开前事件\r\n\t\t\t\t */\r\n\t\t\t\tonBeforeExpand: function(){},\r\n\t\t\t\t/**\r\n\t\t\t\t * @memberof panel\r\n\t\t\t \t * @event Panel#onBeforeExpand\r\n\t\t\t \t * 收缩展开监听\r\n\t\t\t\t */\r\n\t\t\t\tonCollapse: function(){},\r\n\t\t\t\t/**\r\n\t\t\t\t * @memberof panel\r\n\t\t\t \t * @event Panel#onBeforeExpand\r\n\t\t\t \t * 展开事件\r\n\t\t\t\t */\r\n\t\t\t\tonExpand: function(){}\r\n\t\t}\r\n\r\n\t\t},\r\n\t\t/**\r\n\t\t * 统一的zindex定义\r\n\t\t */\r\n\t\tzindexs:{\r\n\t\t\tdroppanel:2000,\r\n\t\t\tdialog:1001,\r\n\t\t\tdialogMask:1000,\r\n\t\t\tdialogBack:999\r\n\t\t},\r\n\t\tdataTable:{\r\n\t\t\tiDisplayLength: 20,\r\n\t\t    aLengthMenu: [[20, 50, 100], [20, 50, 100]],\r\n\t\t\tbServerSide: true,\r\n\t\t\tbProcessing: false,\r\n\t\t\tbDeferRender:false,\r\n\t\t\tsAjaxDataProp:\"data\",\r\n\t\t\tpageListLength:10\r\n\t\t},\r\n\t\tpagination:{\r\n\t\t\tpageSize:20,\r\n\t\t\tlistLength:10,\r\n\t\t\tpageSizeMenu: [20, 50, 100]\r\n\t\t},\r\n\t\tflexigrid:{\r\n\t\t\trpOptions:[20, 50, 100]\r\n\t\t},\r\n\t\tjqgrid:{\r\n\t\t\tpageList:[20, 50, 100]\r\n\t\t},\r\n\t\tsimpletree:{\r\n\t\t\tselected:\"selected\",\r\n\t\t\texp:\"center_expandable\",\r\n\t\t\tcoll:\"center_collapsable\",\r\n\t\t\tfirstExp:\"first_expandable\",\r\n\t\t\tfirstColl:\"first_collapsable\",\r\n\t\t\tlastExp:\"last_expandable\",\r\n\t\t\tlastColl:\"last_collapsable\",\r\n\t\t\texpandIcon:\"icon-folder-close\",\r\n\t\t\tfolderIcon:\"icon-folder-open\",\r\n\t\t\toneExp:\"one_expandable\",\r\n\t\t\toneColl:\"one_collapsable\",\r\n\t\t\tleafIcon:\"icon-file\",\r\n\t\t\tck:\"checked\",\r\n\t\t\tunck:\"unchecked\"\r\n\t\t},\r\n\t\tgetPlugins:function(){\r\n\t\t\tvar plugins=[];\r\n\t\t\tfor(var plugin in this.appDefaults){\r\n\t\t\t\tplugins.push({pluginName:plugin.toLowerCase(),className:this.appDefaults[plugin].className});\r\n\t\t\t}\r\n\t\t\treturn plugins;\r\n\t\t}\r\n\t};\r\n\treturn App.options;\r\n});\n",
    "define('app/widgets/app-widget',[\"app/core/app-base\",'app/core/app-jquery'], function(Base,$) {\r\n    // Widget\r\n    // ---------\r\n    // Widget 是与 DOM 元素相关联的非工具类组件，主要负责 View 层的管理。\r\n    // Widget 组件具有四个要素：描述状态的 attributes 和 properties，描述行为的 events\r\n    // 和 methods。Widget 基类约定了这四要素创建时的基本流程和最佳实践。\r\n    /**\r\n     * Widget 是与 DOM 元素相关联的非工具类组件，主要负责 View 层的管理\r\n     * @class\r\n     * @name Widget\r\n     * @extends Base\r\n     * @classdesc 控件基类。\r\n     */\r\n  var Widget = Base.extend({\r\n        // config 中的这些键值会直接添加到实例上，转换成 properties\r\n  \t\t//, 'template', 'model', 'events'\r\n      \t propsInAttrs: ['element','template', 'model', 'events'],\r\n\r\n        // 与 widget 关联的 DOM 元素\r\n      \telement: null,\r\n\r\n        // 默认模板\r\n        template: '<div></div>',\r\n\r\n        // 默认数据模型\r\n       // model: null,\r\n\r\n        // 事件代理，格式为：\r\n        //   {\r\n        //     'mousedown .title': 'edit',\r\n        //     'click {{attrs.saveButton}}': 'save'\r\n        //     'click .open': function(ev) { ... }\r\n        //   }\r\n        events: null,\r\n\r\n        // 属性列表\r\n        attrs: {\r\n            // 组件的默认父节点\r\n          //  parentNode: document.body,\r\n\r\n            // 默认开启 data-api 解析\r\n            //'data-api': true\r\n        },\r\n        // 初始化方法，确定组件创建时的基本流程：\r\n        // 初始化 attrs --》 初始化 properties --》 初始化 events --》 子类的初始化\r\n        initialize: function(config) {\r\n            //this.cid = uniqueCid();\r\n            // 由 Base 提供\r\n            this.initAttrs(config);\r\n            // 由 Widget 提供\r\n            // 由子类提供\r\n             this.initProps();\r\n             this.setup();\r\n             //this.delegateEvents();\r\n        },\r\n\r\n        // 构建 this.element\r\n        // 构建 this.element\r\n        parseElement: function() {\r\n            var element = this.element;\r\n            if (element) {\r\n                this.element = $(element);\r\n            }\r\n            // 未传入 element 时，从 template 构建\r\n            else if (this.get('template')) {\r\n                this.parseElementFromTemplate();\r\n            }\r\n\r\n            // 如果对应的 DOM 元素不存在，则报错\r\n            if (!this.element || !this.element[0]) {\r\n                throw 'element is invalid';\r\n            }\r\n        },\r\n\r\n        // 从模板中构建 this.element\r\n          // 从模板中构建 this.element\r\n        parseElementFromTemplate: function() {\r\n            this.element = $(this.get('template'));\r\n        },\r\n        // 解析 this.element 中的 data-* 配置，获得 this.dataset\r\n        // 并自动将 data-action 配置转换成事件代理\r\n        _parseDataAttrs: function() {\r\n           \r\n        },\r\n        // 负责 properties 的初始化，提供给子类覆盖\r\n        initProps: function() {\r\n        },\r\n        // 注册事件代理\r\n        delegateEvents: function(events, handler) {\r\n           \r\n        },\r\n        addEvents : function(o){\r\n            var me = this;\r\n            me.events = me.events || {};\r\n            if (typeof o == 'string') {\r\n                var a = arguments,\r\n                    i = a.length;\r\n                while(i--) {\r\n                    me.events[a[i]] = me.events[a[i]] || true;\r\n                \tif (this.get(a[i])){\r\n                \t this.off(a[i]);\r\n                \t this.on(a[i],this.get(a[i]),this);\r\n                \t}\r\n                }\r\n            } else {\r\n            \tfor(var evnetName in o){\r\n            \t\tthis.off(evnetName);\r\n            \t\tthis.on(evnetName,o[evnetName],this);\r\n            \t}\r\n                $.extend(me.events, o);\r\n            }\r\n        },\r\n        // 卸载事件代理\r\n        undelegateEvents: function(eventKey, handler) {\r\n        \t\r\n        \t\r\n        },\r\n        // 提供给子类覆盖的初始化方法\r\n        setup: function() {\r\n        },\r\n        // 将 widget 渲染到页面上\r\n        // 渲染不仅仅包括插入到 DOM 树中，还包括样式渲染等\r\n        // 约定：子类覆盖时，需保持 `return this`\r\n        render: function() {\r\n           \r\n        },\r\n        destroy: function() {\r\n          //  this.undelegateEvents();\r\n            Widget.superclass.destroy.call(this);\r\n        }\r\n    });\r\n\r\n    return Widget;\r\n   \r\n});\r\n\n",
    "define(\t'app/widgets/app-workspace',[\"app/core/app-jquery\", \"app/core/app-core\", \"app/core/app-options\", \"app/widgets/app-widget\"], function($, $A, Opts,\r\n\t\t\t\t Widget) {\r\n\t\r\n\tvar WorkSpace = Widget.extend({\r\n\t\tinitialize : function(el, options) {\r\n\t\t\tif (!options) {\r\n\t\t\t\toptions = {};\r\n\t\t\t}\r\n\t\t\tWorkSpace.superclass.initialize.call(this, options);\r\n\t\t},\r\n\t\tgetActionPage:function(){\r\n\t\t\t\r\n\t\t\treturn null;\r\n\t\t\t\r\n\t\t},\r\n\t\t/**\r\n\t\t * @pageInfo {pageTitle:pageTitle,pageId:pageId,pageUrl:pageUrl}\r\n\t\t */\r\n\t\taddPage:function(pageInfo){\r\n\t\t\t\r\n\t\t\t\r\n\t\t}\r\n\t\t\r\n\r\n\t})\r\n\t\r\n\treturn WorkSpace;\r\n});\n",
    "define('app/core/app-main',[\"app/core/app-jquery\",\"app/core/app-core\",\"app/widgets/app-frags\",\"app/widgets/window/app-messager\",localeFile,\"app/widgets/app-workspace\"],function($,$A,$frags,Messager,locale,AppWorkSpace){\r\n\t\r\n\tvar workSpace=new AppWorkSpace();\r\n\t\r\n\tvar PORTAL={\r\n\t\t\tportalets:[]\r\n\t\t\t\r\n\t}\r\n\t$.extend($A,{\r\n\t\t/**\r\n\t\t * 扩展$A的方法\r\n\t\t */\r\n\t\t_exfn:function(selector, context){\r\n\t\t\tvar $con = this.getContainer();\r\n\t\t\tvar $ctrl;\r\n\t\t\tif(!selector){\r\n\t\t\t\tif(context)\r\n\t\t\t\t\treturn context;\r\n\t\t\t\treturn $con; \r\n\t\t\t}\r\n\t\t\t\t\r\n\t\t\tif(context&&$con.has(context)){\r\n\t\t\t\t$ctrl = $(context,$con).find(selector);\r\n\t\t\t}else{\r\n\t\t\t\t$ctrl = $con.find(selector);\r\n\t\t\t}\r\n\t\t\tif($ctrl.isGrid&& $ctrl.isGrid()){\r\n\t\t\t\treturn $ctrl.getJqGrid();\r\n\t\t\t}else if($ctrl.isZTree&&$ctrl.isZTree()){\r\n\t\t\t\treturn $ctrl.getAppZTree();\r\n\t\t\t}\r\n\t\t\treturn $ctrl;\r\n\t\t}\r\n\t\t,\r\n\t\t\r\n\t\tgetWorkSpace:function(){\r\n\t\t\treturn workSpace;\r\n\t\t},\r\n\t\t\r\n\t\tsetPortal:function(portal){\r\n\t\t\t\r\n\t\t\tPORTAL=portal;\r\n\t\t},\r\n\t\t\r\n\t\tgetPortal:function(){\r\n\t\t\t\r\n\t\t\treturn PORTAL;\r\n\t\t},\r\n\t\t\r\n\t\tgetPortalet:function(code){\r\n\t\r\n\t\t\tif (PORTAL){\t\t\r\n\t\t\r\n\t\tvar portalets=PORTAL[\"portalets\"];\r\n\t\t\tif (portalets){\r\n\t\t\t\tfor(var i=0;i<portalets.length;i++){\r\n\t\t\t\tvar portale=portalets[i];\r\n\t\t\t\tif (portale[\"code\"]==code)\r\n\t\t\t\t\t\r\n\t\t\t\t\treturn portale;\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n               \r\n        /**\r\n         * 取得当前选项卡\r\n        */\r\n       getCurrentNavTab:function(){\r\n    \t   return $A.getWorkSpace().getActionPage();\r\n         },\r\n\t\tregisterWorkSpace:function(workspaceObj){\r\n\t\t\tworkSpace=workspaceObj;\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t * 取得当前对话框对象\r\n\t\t */\r\n\t\tgetCurrentDialog:function(){\r\n\t\t\tif(this.dialog&&this.dialog.getCurrent()){\r\n\t\t\t\treturn this.dialog.getCurrent();\r\n\t\t\t}\r\n\t\t},\r\n\t\t/**\r\n\t\t * 取得当前选项卡\r\n\t\t */\r\n\t\t\r\n\t\t/**\r\n\t\t *  取得当钱所在容器(对话框/选项卡);\r\n\t\t */\r\n\t\tgetContainer:function(){\r\n\t\t\tvar container;\r\n\t\t\tif (this.getCurrentDialog){\r\n\t\t\t\tcontainer= this.getCurrentDialog();\r\n\t\t\t}\r\n\t\t\tif (workSpace){\r\n\t\t\t\tif(!container||container.length==0){\r\n\t\t\t\t\t\r\n\t\t\t\t\t\tcontainer=workSpace.getActionPage();\r\n\t\t\t\t\t\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif(!container||container.length==0){\r\n\t\t\t\tcontainer=$(document.body);\r\n\t\t\t}\r\n\t\t\treturn container;\r\n\t\t},\r\n\t\t/**\r\n\t\t * 查找当前对象所处容器\r\n\t\t * @param 指定jquery selector对象\r\n\t\t */\r\n\t\tfindContainer:function(selector){\r\n\t\t\tvar $o = $(selector);\r\n\t\t\tif($o.size == 0)\r\n\t\t\t\treturn null;\r\n\t\t\tvar $con = null;\r\n\t\t\tif($o.is($(document)) || $o.hasClass(\"dialog\")|| $o.hasClass(\"tabpage\")){\r\n\t\t\t\t$con = $o;\r\n\t\t\t}else{\r\n\t\t\t\t$con = $o.parents(\"(.dialog,.tabpage):first\");\r\n\t\t\t}\r\n\t\t\tif($con.size() == 0){\r\n\t\t\t\t$con = $(document);\r\n\t\t\t}\r\n\t\t\treturn $con;\r\n\t\t},\r\n\t\t/**\r\n\t\t * 添加初始化事件处理\r\n\t\t * @param func{function} 事件处理方法\r\n\t\t * @param target{jquery object} 事件触发对象\r\n\t\t */\r\n\t\tpageLoad:function(func,target){\r\n\t\t\tif(!func || typeof func!=\"function\")\r\n\t\t\t\treturn;\r\n\t\t\tif(!target){\r\n\t\t\t\ttarget = this.getContainer();\r\n\t\t\t}\r\n\t\t\tif($(target).is(document)){\r\n\t\t\t\t$(document).ready(func);\r\n\t\t\t}else{\r\n\t\t\t\t$(target).on(this.eventType.pageLoad,func);\r\n\t\t\t}\r\n\t\t},\r\n\t\tloadLogin:function(){\r\n\t\t\twindow.location=_contextPath+\"/login.do\";\r\n\t\t}\r\n\t});\r\n\r\n\t\r\n\t$A.regInitMethod(\"appmain\",function(){\r\n\t\t$(\"body\").append($frags[\"globalBodyFrag\"]);\r\n\t\tif ($.browser.msie && /6.0/.test(navigator.userAgent) ) {\r\n\t\t\ttry {\r\n\t\t\t\tdocument.execCommand(\"BackgroundImageCache\", false, true);\r\n\t\t\t}catch(e){}\r\n\t\t}\r\n\t\t//清理浏览器内存,只对IE起效\r\n\t\tif ($.browser.msie) {\r\n\t\t\twindow.setInterval(\"CollectGarbage();\", 10000);\r\n\t\t}\r\n\t\t\r\n\r\n\t\t\r\n\t\t$A.regInitMethod(\"appmain\");\r\n\t});\r\n\t\r\n\t\r\n\t/**\r\n\t *兼容2.0网格单元框事件绑定\r\n\t */\r\n\t$(document).on('click',\"a[target=function]\", function (e) {\r\n\t\te.preventDefault();\r\n\t\tvar $this = $(this);\r\n\t\tvar param = $this.getJsonAttr(\"data_funcparam\");\r\n\t\tvar func = $this.getJsonAttr(\"data_funcname\");\r\n\t\tif(typeof(func)=='function'){\r\n\t\t\tfunc(param);\r\n\t\t}\r\n\t});\r\n\treturn $A;\r\n\t\r\n\t\r\n});\r\n\r\n\r\n\n",
    "/**\r\n * 本地存储\r\n * @author Mr.T\r\n */\r\ndefine('app/util/app-localstorage',[], function() {\r\n\tvar Storage = function(opts){\r\n\t\tthis.opts = opts;\r\n\t\tif(!opts.key){\r\n\t\t\tthrow new Error('为设置key值，无法初始化LocalStorage');\r\n\t\t}\r\n\t\tthis.key = opts.key;\r\n\t};\r\n\tStorage.prototype = {\r\n\t\tget: function(){\r\n\t\t\tvar innerObj = this._get();\r\n\t\t\tif(innerObj){\r\n\t\t\t\treturn innerObj.data;\r\n\t\t\t}\r\n\t\t\treturn;\r\n\t\t},\r\n\t\t_get: function(){\r\n\t\t\tvar val = localStorage.getItem(this.key);\r\n\t\t\tif(!val){\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\treturn JSON.parse(val);\r\n\t\t},\r\n\t\tput: function(val){\r\n\t\t\tif(!val){\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tvar innerObj = this._get()\r\n\t\t\t\t,dataType = $.isArray(val) ? typeof val[0]: typeof val; \r\n\t\t\tif(!innerObj){\r\n\t\t\t\tinnerObj = {type: dataType, data: []};\r\n\t\t\t}\r\n\t\t\tif(innerObj.type != dataType){\r\n\t\t\t\tthrow new Error('与已存储的数据类型不匹配，无法完成存储');\r\n\t\t\t}\r\n\t\t\tvar nodes = val\r\n\t\t\t\t,keyField = null;\r\n\t\t\tif(dataType == 'object'){\r\n\t\t\t\tnodes = val.data;\r\n\t\t\t\tkeyField = val.keyField;\r\n\t\t\t}\r\n\t\t\tif($.isArray(nodes)){\r\n\t\t\t\tfor(var i = 0; i < nodes.length; i++){\r\n\t\t\t\t\tthis._put(innerObj, nodes[i], keyField);\t\r\n\t\t\t\t}\r\n\t\t\t}else{\r\n\t\t\t\tthis._put(innerObj, nodes, keyField);\t\r\n\t\t\t}\r\n\t\t\tlocalStorage.setItem(this.key, JSON.stringify(innerObj));\r\n\t\t},\r\n\t\t_put: function(innerObj, node, keyField){\r\n\t\t\tvar arr = innerObj.data;\r\n\t\t\tif(this._contain(arr, node, keyField)){\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tif(arr.length >= 20){\r\n\t\t\t\tarr.pop();\r\n\t\t\t}\r\n\t\t\tarr.unshift(node);\r\n\t\t},\r\n\t\t_contain: function(arr, node, keyField){\r\n\t\t\tif(keyField){\r\n\t\t\t\tfor(var i = 0; i < arr.length; i++){\r\n\t\t\t\t\tif(arr[i][keyField] == node[keyField]){\r\n\t\t\t\t\t\treturn true;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}else{\r\n\t\t\t\tfor(var i = 0; i < arr.length; i++){\r\n\t\t\t\t\tif(arr[i] == node){\r\n\t\t\t\t\t\treturn true;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn false;\r\n\t\t}\r\n\t};\r\n\treturn Storage;\r\n});\n",
    "/**\r\n * 文本框控件\r\n * @author Mr.T\r\n */\r\ndefine('app/widgets/form/app-textbox',['app/core/app-jquery', 'app/core/app-core', 'app/core/app-options', \r\n    'app/core/app-base', 'app/util/app-localstorage'],\r\n\tfunction($, App, Options, Base, LocalStorage) {\r\n\t\r\n\t'use strict';\r\n\t/**\r\n\t * @abstract\r\n\t * @class \r\n\t * @classdesc 文本框组件，基础组件\r\n\t * @name textbox-class\r\n\t * @desc 文本框的初始化方法\r\n\t * <PRE style=\"color:red;\">组件的属性来源分为三种\r\n\t * &#9;1、初始化组件时传入的options设置属性\r\n\t * &#9;2、来源于input的_options的json串配置的属性\r\n\t * &#9;3、来源于input的属性配置（不建议使用-后期考虑废弃）[无法配置拥有大小写的属性]\r\n\t * 属性的优先顺序为 1>2>3>默认值，options传入的属性优先使用\r\n\t * @param {DOMElement} input 要渲染的input组件\r\n\t * @param {Object} options 组件的选项设置 \r\n\t * @author Mr.T\r\n\t * @see {@link combo-class} 继承该组件\r\n\t * @see {@link number-class} 继承该组件\r\n\t * @see {@link datetime-class} 继承该组件\r\n\t * @see {@link reference-class} 继承该组件\r\n\t * @example &lt;input &#9;class=\"app-textbox\"\r\n\t * &#9;_options=\"{\r\n\t * &#9;&#9;readonly: true,\r\n\t * &#9;&#9;clearbtn: true,\r\n\t * &#9;&#9;value: '中国 China',\r\n\t * &#9;&#9;tips: '请输入...',\r\n\t * &#9;&#9;onChange:function(newVal,oldVal){\r\n\t * &#9;&#9;&#9;logOnChange('textboxLog',newVal,oldVal);\r\n\t * &#9;&#9;}\r\n\t * &#9;}\"\r\n\t * />\r\n\t * @example $('#demo').textbox({\r\n\t * &#9;clearbtn: true,\r\n\t * &#9;value: '中国 China',\r\n\t * &#9;tips: '请输入...',\r\n\t * &#9;onChange:function(newVal,oldVal){\r\n\t * &#9;&#9;logOnChange('textboxLog',newVal,oldVal);\r\n\t * &#9;}\r\n\t * });\r\n\t */\r\n\tvar Textbox = Base.extend({\r\n\t\tinitialize: function(input, options) {\r\n          \tif(!options){\r\n\t\t\t\toptions = {};\r\n\t\t\t}\r\n\t\t\toptions._ = $.extend({}, Options.appDefaults.Textbox, options._);\r\n\t\t\tthis.$input = $(input);\r\n\t\t\tthis.$input.data('context', this);\r\n\t\t\tthis.options = options;\r\n\t\t\tthis._baseInit();\r\n        },\r\n        /**\r\n\t\t * 初始化\r\n\t\t */\r\n\t\t_baseInit: function(){\r\n\t\t\tthis._baseInitOptions();\r\n\t\t\tthis._baseEventRegister();\r\n\t\t\tthis._wrapByDiv();\r\n\t\t\tthis.$element = this.$input.parent();\r\n\t\t\tthis.$element.data('context', this);\r\n\t\t\tthis.$text = this.$element.find('[type=showValue]');\r\n\t\t\tthis.$value = this.$input;\r\n\t\t\tthis.$clearBtn = this.$element.find('.wrapper-clear');\r\n\t\t\tthis.$openBtn = this.$element.find('.wrapper-open');\r\n\t\t\tthis._registWrapperEvents();\r\n\t\t\tvar s = this.setting;\r\n\t\t\tthis.setValue(s.value, true);\r\n\t\t\tif(s.text){\r\n\t\t\t\tthis.setText(s.text);\r\n\t\t\t}\r\n\t\t\tif(s.disabled){\r\n\t\t\t\tthis.disable();\r\n\t\t\t}\r\n\t\t\tif(s.readonly){\r\n\t\t\t\tthis.readonly();\r\n\t\t\t}\r\n\t\t\tif(s.autoHideOpenBtn){\r\n\t\t\t\tthis.$openBtn.hide();\r\n\t\t\t}\r\n\t\t\tthis._textChangeEvent();\r\n\t\t\tvar formatter = s.formatter; \r\n\t\t\tif(formatter){\r\n\t\t\t\tif(typeof(formatter) == 'string' && formatter.indexOf('{') >= 0){\r\n\t\t\t\t\ts.template = new Template(formatter);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tthis._afterRender();\r\n\t\t},\r\n\t\t/**\r\n\t\t * 显示值改变事件\r\n\t\t */\r\n\t\t_textChangeEvent: function(){\r\n\t\t\tvar that = this;\r\n\t\t\tthis.$text.on('change.textbox.api',function(){\r\n\t\t\t\tvar text = this.value\r\n\t\t\t\t\t,pos = that.$text.getCurPos(); \r\n\t\t\t\tif(that.setting.trim){\r\n\t\t\t\t\ttext = $.trim(text); \t\t\t\t\t\r\n\t\t\t\t}\r\n\t\t\t\tif(that.forbidReg){\r\n\t\t\t\t\tvar forbidRegMatch = text.match(that.forbidReg);\r\n\t\t\t\t\tif(forbidRegMatch){\r\n\t\t\t\t\t\tpos = text.indexOf(forbidRegMatch[0]);\r\n\t\t\t\t\t}\r\n\t\t\t\t\ttext = text.replace(that.forbidReg, '');\r\n\t\t\t\t}\r\n\t\t\t\tif(that.permitReg){\r\n\t\t\t\t\tvar permitRegMatch = text.match(that.permitReg);\r\n\t\t\t\t\tif(permitRegMatch){\r\n\t\t\t\t\t\tpos = text.indexOf(permitRegMatch[0]);\r\n\t\t\t\t\t}\r\n\t\t\t\t\ttext = text.replace(that.permitReg, '');\r\n\t\t\t\t}\r\n\t\t\t\tthat.$text.val(text);\r\n\t\t\t\tthat.setValue(text);\r\n\t\t\t\tif(pos !== null){\r\n\t\t\t\t\tthat.$text.setCurPos(pos);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t},\r\n\t\t/**\r\n\t\t * 显示提示信息\r\n\t\t */\r\n\t\t_showTips: function(){\r\n\t\t\tvar tips = this.setting.tips\r\n\t\t\t\t,text = this.getText();\r\n\t\t\tif(!tips){\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tif(text == ''){\r\n\t\t\t\tthis.$text.addClass('wrapper-tips');\r\n\t\t\t\tthis.$text.val(tips);\r\n\t\t\t}else{\r\n\t\t\t\tthis.$text.removeClass('wrapper-tips');\r\n\t\t\t}\r\n\t\t},\r\n\t\t/**\r\n\t\t * 初始化尝试\r\n\t\t */\r\n\t\t_baseInitOptions: function(){\r\n\t\t\tvar customSetting = $.extend(App.getAttrFromElement(this.$input), this.options);\r\n\t\t\tif($.isFunction(customSetting.beforeRender)){\r\n\t\t\t\tcustomSetting.beforeRender.call(this, customSetting);\r\n\t\t\t}\r\n\t\t\tthis.customSetting = customSetting;\r\n\t\t\tif(customSetting.multiple){\r\n\t\t\t\tthis.options._.clearbtn = true;\r\n\t\t\t}\r\n\t\t\tif(isNaN(customSetting.panelheight)){\r\n\t\t\t\tdelete customSetting.panelheight;\r\n\t\t\t}\r\n\t\t\tthis.setting = $.extend({}, this.options._, customSetting);\r\n\t\t\tdelete this.options._;\r\n\t\t\tif(!this.setting.url){\r\n\t\t\t\tthis.setting.url = this.setting.action;\r\n\t\t\t}\r\n\t\t\t//初始化查询参数\r\n\t\t\tif(this.setting.parameter){\r\n\t\t\t\tvar parameter = this.setting.parameter;\r\n\t\t\t\tif(typeof(parameter) == 'string'){\r\n\t\t\t\t\tparameter = App.jsonEval(this.setting.parameter);\t\t\t\t\t\r\n\t\t\t\t}\r\n\t\t\t\tthis.setParameter(parameter);\r\n\t\t\t}\r\n\t\t\tif(this.setting.otherParam){\r\n\t\t\t\tif(typeof(this.setting.otherParam) == 'string'){\r\n\t\t\t\t\tthis.setting.otherParam = App.jsonEval(this.setting.otherParam);\t\t\t\t\t\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif(this.setting.forbidWord){\r\n\t\t\t\tthis.forbidReg = new RegExp('[' + this.setting.forbidWord + ']', 'g');\r\n\t\t\t}\r\n\t\t\tif(this.setting.permitWord){\r\n\t\t\t\tthis.permitReg = new RegExp('[^' + this.setting.permitWord + ']', 'g');\r\n\t\t\t}else{\r\n\t\t\t\tvar filter = this.setting.filter; \r\n\t\t\t\tvar reg = '';\r\n\t\t\t\tif(filter == '0-9'){\r\n\t\t\t\t\treg = '0-9';\r\n\t\t\t\t}else if(filter == 'number'){\r\n\t\t\t\t\treg = '0123456789\\\\-\\\\+\\\\.';\r\n\t\t\t\t}else if(filter == 'positiveNumber'){\r\n\t\t\t\t\treg = '0123456789\\\\.';\r\n\t\t\t\t}\r\n\t\t\t\tif(reg){\r\n\t\t\t\t\tthis.permitReg = new RegExp('[^' + reg + ']', 'g');\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif(this.setting.historyKey){\r\n\t\t\t\tthis._localStorage = new LocalStorage({key: this.setting.historyKey, expire: 7});\r\n\t\t\t}\r\n\t\t},\r\n\t\t/**\r\n\t\t * 事件的注册器\r\n\t\t */\r\n\t\t_baseEventRegister: function(){\r\n\t\t\tvar s = this.setting;\r\n\t\t\tif($.isFunction(s.afterRender)){\r\n\t\t\t\tthis.on('afterRender', s.afterRender);\r\n\t\t\t}\r\n\t\t\tif($.isFunction(s.onBlur)){\r\n\t\t\t\tthis.on('onBlur', s.onBlur);\r\n\t\t\t}\r\n\t\t\tif($.isFunction(s.onChange)){\r\n\t\t\t\tthis.on('onChange', s.onChange);\r\n\t\t\t}\r\n\t\t\tif($.isFunction(s.onClearValue)){\r\n\t\t\t\tthis.on('onClearValue', s.onClearValue);\r\n\t\t\t}\r\n\t\t\tif($.isFunction(s.onClickOpen)){\r\n\t\t\t\tthis.on('onClickOpen', s.onClickOpen);\r\n\t\t\t}\r\n\t\t\tif($.isFunction(s.onFocus)){\r\n\t\t\t\tthis.on('onFocus', s.onFocus);\r\n\t\t\t}\r\n\t\t\tif($.isFunction(s.onReadonlyClick)){\r\n\t\t\t\tthis.on('onReadonlyClick', s.onReadonlyClick);\r\n\t\t\t}\r\n\t\t\tif($.isFunction(s.enterKeyDown)){\r\n\t\t\t\tthis.on('enterKeyDown', s.enterKeyDown);\r\n\t\t\t}\r\n\t\t},\r\n\t\t/**\r\n\t\t * 注册控件事件\r\n\t\t */\r\n\t\t_registWrapperEvents: function(){\r\n\t\t\tthis.$element.on('mouseover.textbox.api', ':not(.wrapper-readonly-mask,.wrapper-readonly-mask *)'\r\n\t\t\t\t\t\t\t\t\t, $.proxy(this._mouseover$element, this));\r\n\t\t\tthis.$element.on('mouseout.textbox.api', $.proxy(this._mouseout$element, this));\r\n\t\t\tthis.$element.on('click.textbox.api', function(e){e.stopPropagation();});\r\n\t\t\tthis.$element.on('mousedown.textbox.api', '.wrapper-btn.wrapper-open', function(e){\r\n\t\t\t\te.stopPropagation();\r\n\t\t\t\te.preventDefault();\r\n\t\t\t});\r\n\t\t\tthis.$clearBtn.on('click.textbox.api', $.proxy(this._click$clearBtn, this));\r\n\t\t\tthis.$openBtn.on('mousedown.textbox.api', $.proxy(this._mousedown$openBtn, this));\r\n\t\t\tthis.$text.on('click.textbox.api', $.proxy(this._click$text, this));\r\n\t\t\tthis.$text.on('focus.textbox.api', $.proxy(this._focus$text, this));\r\n\t\t\tthis.$text.on('blur.textbox.api', $.proxy(this._blur$text, this));\r\n\t\t\tthis.$text.on('keydown.' + this.setting.className + '.api', $.proxy(this._keyManager, this));\r\n\t\t\tif(this.forbidReg || this.permitReg){\r\n\t\t\t\tif(window.applicationCache){\r\n\t\t\t\t\tthis.$text.on('input.' + this.setting.className + '.api', $.proxy(this._keyUpManager, this));\r\n\t\t\t\t}else{\r\n\t\t\t\t\tthis.$text.on('keyup.' + this.setting.className + '.api', $.proxy(this._keyUpManager, this));\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\t/**\r\n\t\t * 顶层元素的mouseover事件\r\n\t\t */\r\n\t\t_mouseover$element: function(){\r\n\t\t\tthis.$element.addClass('app-wrapper-hover');\r\n\t\t\tthis._autoShowOpenBtn();\r\n\t\t\tif(this.setting.clearbtn){\r\n\t\t\t\tif(this.getText() || this.getValue()){\r\n\t\t\t\t\tvar right = 28 * this.$element.find('a.wrapper-btn:visible').length;\r\n\t\t\t\t\tthis.$clearBtn.css({display: 'block',right: right});\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tthis.trigger('onMouseOver');\r\n\t\t},\r\n\t\t/**\r\n\t\t * 顶层元素的mouseout事件\r\n\t\t */\r\n\t\t_mouseout$element: function(){\r\n\t\t\tthis.$clearBtn.css('display','none');\r\n\t\t\tthis.$element.removeClass('app-wrapper-hover');\r\n\t\t\tthis._autoHideOpenBtn();\r\n\t\t\tthis.trigger('onMouseOut');\r\n\t\t},\r\n\t\t/**\r\n\t\t * 清除按钮点击事件\r\n\t\t */\r\n\t\t_click$clearBtn: function(){\r\n\t\t\tthis.clearValue();\r\n\t\t\t/**\r\n\t\t\t * 删除按钮点击事件\r\n\t\t\t * @event textbox-class#onClearValue\r\n\t\t\t */\r\n\t\t\tthis.trigger('onClearValue');\r\n\t\t},\r\n\t\t/**\r\n\t\t * 打开按钮mousedown事件\r\n\t\t */\r\n\t\t_mousedown$openBtn: function(){\r\n\t\t\tif(this.togglePanel){ this.togglePanel(); }\r\n\t\t\tthis.focus();\r\n\t\t\t/**\r\n\t\t\t * 打开按钮点击事件\r\n\t\t\t * @event textbox-class#onClickOpen\r\n\t\t\t */\r\n\t\t\tthis.trigger('onClickOpen');\r\n\t\t},\r\n\t\t/**\r\n\t\t * 显示文本点击事件\r\n\t\t */\r\n\t\t_click$text: function(){\r\n\t\t\tthis._setCursorSign();\r\n\t\t\tif(!this._isEditable()){\r\n\t\t\t\tif(this.togglePanel){ this.togglePanel(); }\r\n\t\t\t}\r\n\t\t},\r\n\t\t/**\r\n\t\t * 显示值的focus事件\r\n\t\t */\r\n\t\t_focus$text: function(){\r\n\t\t\tthis._attchCounterTimer();\r\n\t\t\tthis._setCursorSign();\r\n\t\t\tthis.$element.addClass('app-wrapper-active');\r\n\t\t\tif(this.$text.val() == this.setting.tips){\r\n\t\t\t\tthis.$text.val('')\r\n\t\t\t\tthis.$text.removeClass('wrapper-tips');\r\n\t\t\t}\r\n\t\t\tthis._autoShowOpenBtn();\r\n\t\t\t/**\r\n\t\t\t * onFocus事件\r\n\t\t\t * @event textbox-class#onFocus\r\n\t\t\t */\r\n\t\t\tthis.trigger('onFocus');\r\n\t\t},\r\n\t\t/**\r\n\t\t * 计算字符的间隔器\r\n\t\t */\r\n\t\t_attchCounterTimer: function(){\r\n\t\t\tvar $text = this.$text\r\n\t\t\t\t,maxLen = this.setting.maxLength; \r\n\t\t\tif(maxLen > 0){\r\n\t\t\t\tvar i = 0\r\n\t\t\t\t\t,that = this;\r\n\t\t\t\tthis.counterTimer = setInterval(function(){\r\n\t\t\t\t\tvar text = $text.val();\r\n\t\t\t\t\tif (maxLen - text.length >= 0){\r\n\t\t\t\t\t\t$text.off('keypress.textbox.counter.api');\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\t$text.on('keypress.textbox.counter.api', function(e){\r\n\t\t\t\t\t\t\tif(8 !== e.keyCode) return false;\t\t\t\t\t\t\r\n\t\t\t\t\t\t});\r\n\t\t\t\t   \t}\r\n\t\t\t\t   \tsetTimeout(function(){\r\n\t\t\t\t   \t\tvar text = $text.val();\r\n\t\t\t\t\t\tif (maxLen - text.length < 0){\r\n\t\t\t\t\t\t\tthat.showError('已按最大长度'+maxLen+'进行截取',1200);\r\n\t\t\t\t\t\t\t$text.val($text.val().substring(0, maxLen));\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}, 0);\r\n\t\t\t\t}, 500);\r\n\t\t\t}\r\n\t\t},\r\n\t\t/**\r\n\t\t * 显示值的blur事件\r\n\t\t */\r\n\t\t_blur$text: function(){\r\n\t\t\tthis._detachCounterTimer();\r\n\t\t\tthis.$element.removeClass('app-wrapper-active');\r\n\t\t\tif(this.getText() == '' && this.setting.tips){\r\n\t\t\t\tthis.setText(this.setting.tips);\r\n\t\t\t\tthis.$text.addClass('wrapper-tips');\r\n\t\t\t}\r\n\t\t\tthis._autoHideOpenBtn();\r\n\t\t\t/**\r\n\t\t\t * onBlur事件\r\n\t\t\t * @event textbox-class#onBlur\r\n\t\t\t */\r\n\t\t\tthis.trigger('onBlur');\r\n\t\t},\r\n\t\t/**\r\n\t\t * 清除计算字符的间隔器\r\n\t\t */\r\n\t\t_detachCounterTimer: function(){\r\n\t\t\tif(this.counterTimer){\r\n\t\t\t\tclearInterval(this.counterTimer);\r\n\t\t\t}\r\n\t\t},\r\n\t\t/**\r\n\t\t * 自动显示按钮\r\n\t\t */\r\n\t\t_autoShowOpenBtn: function(){\r\n\t\t\tif(this.setting.autoHideOpenBtn){\r\n\t\t\t\tthis.$openBtn.show();\r\n\t\t\t}\r\n\t\t},\r\n\t\t/**\r\n\t\t * 自动隐藏按钮\r\n\t\t */\r\n\t\t_autoHideOpenBtn: function(){\r\n\t\t\tif(this.setting.autoHideOpenBtn){\r\n\t\t\t\tif(!this.isActive()){\r\n\t\t\t\t\tthis.$openBtn.hide();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\t/**\r\n\t\t * 按键事件\r\n\t\t */\r\n\t\t_keyManager: function(e){\r\n\t\t\tthis._keyCursorPos(e);\r\n\t\t},\r\n\t\t_keyUpManager: function(){\r\n\t\t\tvar that = this;\r\n\t\t\tsetTimeout(function(){\r\n\t\t\t\tthat.$text.trigger('change');\r\n\t\t\t}, 100);\r\n\t\t},\r\n\t\t/**\r\n\t\t * 处理特殊作用的按键\r\n\t\t * @return true 则为被处理的特殊件\r\n\t\t */\r\n\t\t_dealSysKey: function(e){\r\n\t\t\tif(e.keyCode == App.keyCode.TAB){\r\n\t\t\t\tif(this._mainDivIsVisiable()){\r\n\t\t\t\t\tthis.hidePanel();\r\n\t\t\t\t}\r\n\t\t\t\treturn true;\r\n\t\t\t}else if(e.ctrlKey && (e.keyCode == App.keyCode.DELETE \r\n\t\t\t\t\t|| e.keyCode == App.keyCode.BACKSPACE) && this.setting.clearable !== false){\r\n\t\t\t\tthis.clearValue();\r\n\t\t\t\treturn true;\r\n\t\t\t}else if(e.keyCode == App.keyCode.DELETE \r\n\t\t\t\t\t|| e.keyCode == App.keyCode.BACKSPACE){\r\n\t\t\t\tif(!this._isEditable() && this.setting.clearable !== false){\r\n\t\t\t\t\tthis.clearValue();\r\n\t\t\t\t\treturn true;\r\n\t\t\t\t}\r\n\t\t\t}else if(e.ctrlKey && e.keyCode == App.keyCode.Z){\r\n\t\t\t\te.preventDefault();\r\n\t\t\t\treturn true;\r\n\t\t\t}else if(e.keyCode == App.keyCode.PgUp){\r\n\t\t\t\tif(this.$dropPanel){\r\n\t\t\t\t\tthis.$dropPanel.scrollTop(this.$dropPanel.scrollTop() - this.$dropPanel.outerHeight());\r\n\t\t\t\t\treturn true;\r\n\t\t\t\t}\r\n\t\t\t}else if(e.keyCode == App.keyCode.PgDn){\r\n\t\t\t\tif(this.$dropPanel){\r\n\t\t\t\t\tthis.$dropPanel.scrollTop(this.$dropPanel.scrollTop() + this.$dropPanel.outerHeight());\r\n\t\t\t\t\treturn true;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif(e.keyCode == App.keyCode.ENTER && !e.shiftKey){\r\n\t\t\t\tvar $target = $(e.target)\r\n\t\t\t\t\t,timeStamp = $target.data('enterKeyTimeStamp');\r\n\t\t\t\tif(!timeStamp || (timeStamp && e.timeStamp - timeStamp > 1000) ){\r\n\t\t\t\t\tif(!this._mainDivIsVisiable()){\r\n\t\t\t\t\t\t$target.data('enterKeyTimeStamp', e.timeStamp);\r\n\t\t\t\t\t\tthis.trigger('enterKeyDown');\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\t\t\treturn false;\r\n\t\t},\r\n\t\t/**\r\n\t\t * 代理光标在文本中移动的操作\r\n\t\t */\r\n\t\t_keyCursorPos: function(e){\r\n\t\t\tif(this._dealSysKey(e)){\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tvar keyCode = e.keyCode;\r\n\t\t\tif(this._isKeyCursorPos(keyCode)){\r\n\t\t\t\tif(e.ctrlKey){\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tswitch(keyCode){\r\n\t\t\t\t\tcase App.keyCode.LEFT: \r\n\t\t\t\t\tcase App.keyCode.HOME:\r\n\t\t\t\t\tcase App.keyCode.UP:\r\n\t\t\t\t\t\tif(this._isEditable()){\r\n\t\t\t\t\t\t\tthis._setCursorSign();\r\n\t\t\t\t\t\t\tif(!this._beforeFirstChar){\r\n\t\t\t\t\t\t\t\te.stopPropagation();\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase App.keyCode.RIGHT: \r\n\t\t\t\t\tcase App.keyCode.END:\r\n\t\t\t\t\tcase App.keyCode.DOWN:\r\n\t\t\t\t\t\tvar len = this.getText().length;\r\n\t\t\t\t\t\tif(this._isEditable()){\r\n\t\t\t\t\t\t\tthis._setCursorSign();\r\n\t\t\t\t\t\t\tif(!this._afterLastChar){\r\n\t\t\t\t\t\t\t\te.stopPropagation();\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t}else{\r\n\t\t\t\tif(this.setting.filter){\r\n\t\t\t\t\tthis._filterKeyDown(e);\r\n\t\t\t\t}\r\n\t\t\t\tthis._setCursorSign();\r\n\t\t\t}\r\n\t\t},\r\n\t\t/**\r\n\t\t * 是否为控制光标位置的按键\r\n\t\t */\r\n\t\t_isKeyCursorPos: function(keyCode){\r\n\t\t\tif(keyCode == App.keyCode.LEFT || keyCode == App.keyCode.RIGHT\r\n\t\t\t\t|| keyCode == App.keyCode.HOME || keyCode == App.keyCode.END){\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\t\t\treturn false;\r\n\t\t},\r\n\t\t/**\r\n\t\t * 延迟设置是否要继续冒泡的标志\r\n\t\t */\r\n\t\t_setCursorSign: function(){\r\n\t\t\tvar that = this;\r\n\t\t\tsetTimeout(function(){\r\n\t\t\t\tvar pos = that._getSelection();\r\n\t\t\t\tif(pos.start == 0){\r\n\t\t\t\t\tthat._beforeFirstChar = true;\r\n\t\t\t\t}else{\r\n\t\t\t\t\tthat._beforeFirstChar = false;\r\n\t\t\t\t}\r\n\t\t\t\tif(pos.end == that.getText().length){\r\n\t\t\t\t\tthat._afterLastChar = true;\r\n\t\t\t\t}else{\r\n\t\t\t\t\tthat._afterLastChar = false;\r\n\t\t\t\t}\r\n\t\t\t},0);\r\n\t\t},\r\n\t\t/**\r\n\t\t * 获取当前选中文本的起始位置\r\n\t\t */\r\n\t\t_getSelection: function() {\r\n\t\t\tvar el = this.$text[0]\r\n\t\t\t\t,result = {};\r\n\t\t\tif ('selectionStart' in el) {\r\n\t\t\t\tresult.start = el.selectionStart;\r\n\t\t\t\tresult.end = el.selectionEnd;\r\n\t\t\t}else if('selection' in document) {\r\n\t\t\t\tvar val = el.value,\r\n\t\t\t\trange = document.selection.createRange().duplicate();\r\n\t\t\t\trange.moveEnd('character', val.length);\r\n\t\t\t\tresult.start = range.text == '' ? val.length:val.lastIndexOf(range.text);\r\n\t\t\t\trange = document.selection.createRange().duplicate();\r\n\t\t\t\trange.moveStart('character', -val.length);\r\n\t\t\t\tresult.end = range.text.length;\r\n\t\t\t}\r\n\t\t\treturn result;\r\n\t\t},\r\n\t\t/**\r\n\t\t * 键盘过滤事件\r\n\t\t * @param e\r\n\t\t */\r\n\t\t_filterKeyDown: function(e){\r\n\t\t\tvar filter = this.setting.filter\r\n\t\t\t\t,keyCode = e.keyCode;\r\n\t\t\tif($.isFunction(filter)){\r\n\t\t\t\tif(filter(e) === false){\r\n\t\t\t\t\te.preventDefault();\r\n\t\t\t\t}\r\n\t\t\t}else if(typeof(filter) == 'string'){\r\n\t\t\t\tif(keyCode == App.keyCode.DELETE || keyCode == App.keyCode.BACKSPACE){\r\n\t\t\t\t\treturn ;\r\n\t\t\t\t}\r\n\t\t\t\tif(filter == 'number'){\r\n\t\t\t\t\tif(keyCode >= 48 && keyCode <= 57){//横排数字\r\n\t\t\t\t\t\r\n\t\t\t\t\t}else if(keyCode >= 96 && keyCode <= 105){//小键盘数字\r\n\t\t\t\t\t\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\te.preventDefault();\r\n\t\t\t\t\t\tif(keyCode == App.keyCode.PLUS || keyCode == App.keyCode.PLUS1){\r\n\t\t\t\t\t\t\tthis._setNumberSign('');\r\n\t\t\t\t\t\t}else if(keyCode == App.keyCode.MINUS || keyCode == App.keyCode.MINUS1){\r\n\t\t\t\t\t\t\tthis._setNumberSign('-');\r\n\t\t\t\t\t\t}else if(keyCode == App.keyCode.POINT || keyCode == App.keyCode.POINT1){\r\n\t\t\t\t\t\t\tthis._setNumberPoint();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}else if(filter == 'positiveNumber'){\r\n\t\t\t\t\tif(keyCode >= 48 && keyCode <= 57){//横排数字\r\n\t\t\t\t\t\r\n\t\t\t\t\t}else if(keyCode >= 96 && keyCode <= 105){//小键盘数字\r\n\t\t\t\t\t\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\te.preventDefault();\r\n\t\t\t\t\t\tif(keyCode == App.keyCode.POINT || keyCode == App.keyCode.POINT1){\r\n\t\t\t\t\t\t\tthis._setNumberPoint();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}else if(filter == '0-9'){\r\n\t\t\t\t\tif(keyCode >= 48 && keyCode <= 57){//横排数字\r\n\t\t\t\t\t\r\n\t\t\t\t\t}else if(keyCode >= 96 && keyCode <= 105){//小键盘数字\r\n\t\t\t\t\t\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\te.preventDefault();\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\t/**\r\n\t\t * 数值对正负号的控制\r\n\t\t */\r\n\t\t_setNumberSign: function(sign){\r\n\t\t\tvar text = '';\r\n\t\t\tif(hasSelectedText()){\r\n\t\t\t\ttext = '';\r\n\t\t\t\tthis.setText(text);\r\n\t\t\t}else{\r\n\t\t\t\ttext = this.getText()\r\n\t\t\t}\r\n\t\t\tif(text.indexOf('-') == 0){\r\n\t\t\t\tthis.setText(sign + text.substring(1));\r\n\t\t\t}else{\r\n\t\t\t\tthis.setText(sign + text);\r\n\t\t\t}\r\n\t\t\tsetCusor(this.$text[0]);\r\n\t\t\tfunction setCusor(input){\r\n\t\t\t\tif(input.createTextRange){\r\n\t\t\t\t\tvar range = input.createTextRange();\r\n\t\t\t        range.collapse(true);\r\n\t\t\t        var pos = input.value.length;\r\n\t\t\t        range.moveEnd('character', pos);\r\n\t\t\t        range.moveStart('character', pos);\r\n\t\t\t        range.select();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tfunction hasSelectedText(){\r\n\t\t\t\tif(window.getSelection) {\r\n\t            \treturn window.getSelection().toString() != '';\r\n\t            }else if(document.selection && document.selection.createRange) {\r\n\t\t            return document.selection.createRange().text != '';\r\n\t\t        }\r\n\t\t        return false;\r\n\t\t\t}\r\n\t\t},\r\n\t\t/**\r\n\t\t * 数值对小数点的控制\r\n\t\t */\r\n\t\t_setNumberPoint: function(){\r\n\t\t\tvar text = this.getText();\r\n\t\t\tif(text.indexOf('.') == -1){\r\n\t\t\t\tif(text.length == 0){\r\n\t\t\t\t\tthis.setText('0.');\r\n\t\t\t\t}else{\r\n\t\t\t\t\tthis.setText(text + '.');\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\t/**\r\n\t\t * 禁用组件\r\n\t\t * @todo 使用一个遮罩将组件屏蔽住\r\n\t\t * @example $('#demo').textbox('disable');\r\n\t\t * @memberof textbox-class\r\n\t\t * @instance\r\n\t\t */\r\n\t\tdisable: function(){\r\n\t\t\tthis._outReadonly();\r\n\t\t\tvar $mask = this.$element.find('.wrapper-disabled-mask');\r\n\t\t\tif($mask.length > 0){\r\n\t\t\t\tthis.$disabledMask = $mask;\r\n\t\t\t\tthis._setLabelText();\r\n\t\t\t\tthis.$disabledMask.show();\r\n\t\t\t}else if(this.$disabledMask == undefined){\r\n\t\t\t\tthis.$disabledMask = $('<div class=\"wrapper-disabled-mask\"><label></label></div>');\r\n\t\t\t\tthis.$element.append(this.$disabledMask);\r\n\t\t\t\tthis._setLabelText();\r\n\t\t\t}else{\r\n\t\t\t\tthis.$disabledMask.show();\r\n\t\t\t}\r\n\t\t\tthis.$text.attr('tabindex', -1);\r\n\t\t\tthis.$element.addClass('wrapper-disabled');\r\n\t\t},\r\n\t\t/**\r\n\t\t * 启用组件\r\n\t\t * @todo 将遮罩移除\r\n\t\t * @example $('#demo').textbox('enable');\r\n\t\t * @memberof textbox-class\r\n\t\t * @instance\r\n\t\t */\r\n\t\tenable: function(){\r\n\t\t\tif(this.$disabledMask){\r\n\t\t\t\tthis.$disabledMask.hide();\r\n\t\t\t}\r\n\t\t\tthis.$text.removeAttr('tabindex');\r\n\t\t\tthis.$element.removeClass('wrapper-disabled');\r\n\t\t},\r\n\t\t/**\r\n\t\t * 获取组件的是否可用状态\r\n\t\t * <PRE>\r\n\t\t * \ttrue：可用\r\n\t\t * \tfalse：禁用\r\n\t\t * </PRE>\r\n\t\t * @returns {Boolean} enable 可用状态\r\n\t\t * @example $('#demo').textbox('isEnabled');\r\n\t\t * @memberof textbox-class\r\n\t\t * @instance\r\n\t\t */\r\n\t\tisEnabled: function(){\r\n\t\t\tif(this.$disabledMask && this.$disabledMask.is(':visible')){\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t\treturn true;\r\n\t\t},\r\n\t\t/**\r\n\t\t * 设置是否可以输入\r\n\t\t * @param {Boolean} [editable=true] 允许编辑  \r\n\t\t */\r\n\t\t_editable: function(editable){\r\n\t\t\tif(editable == undefined || editable == true){\r\n\t\t\t\tthis.$text.removeAttr('readonly');\r\n\t\t\t}else{\r\n\t\t\t\tthis.$text.attr('readonly', 'readonly');\r\n\t\t\t}\r\n\t\t},\r\n\t\t/**\r\n\t\t * 是否可以输入\r\n\t\t */\r\n\t\t_isEditable: function(){\r\n\t\t\tvar editable = this.$text.attr('readonly');\r\n\t\t\tif(editable){\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t\treturn true;\r\n\t\t},\r\n\t\t/**\r\n\t\t * 切换可用状态\r\n\t\t * @memberof textbox-class\r\n\t\t * @instance\r\n\t\t */\r\n\t\ttoggleEnable: function(){\r\n\t\t\tif(this.$disabledMask && this.$disabledMask.is(':visible')){\r\n\t\t\t\tthis.enable();\r\n\t\t\t}else{\r\n\t\t\t\tthis.disable();\r\n\t\t\t}\r\n\t\t},\r\n\t\t/**\r\n\t\t * 设置是否只读\r\n\t\t * @param {Boolean} [readonly=true] 允许编辑  \r\n\t\t * @example $('#demo').textbox('readonly');\r\n\t\t * @example $('#demo').textbox('readonly', false);\r\n\t\t * @example $('#demo').textbox('readonly', true);\r\n\t\t * @memberof textbox-class\r\n\t\t * @instance\r\n\t\t */\r\n\t\treadonly: function(readonly){\r\n\t\t\tif(readonly == undefined || readonly == true\r\n\t\t\t\t\t|| readonly == 'true'){\r\n\t\t\t\tthis._intoReadonly();\r\n\t\t\t}else{\r\n\t\t\t\tthis._outReadonly();\r\n\t\t\t}\r\n\t\t},\r\n\t\t/**\r\n\t\t * 只读状态\r\n\t\t * @returns {Boolean} readonly 只读状态\r\n\t\t * @memberof textbox-class\r\n\t\t * @instance\r\n\t\t */\r\n\t\tisReadonly: function(){\r\n\t\t\tif(this.$readonlyMask && this.$readonlyMask.is(':visible')){\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\t\t\treturn false;\r\n\t\t},\r\n\t\t/**\r\n\t\t * 进入只读状态\r\n\t\t */\r\n\t\t_intoReadonly: function(){\r\n\t\t\tthis.enable();\r\n\t\t\tvar $mask = this.$element.find('.wrapper-readonly-mask');\r\n\t\t\tif($mask.length > 0){\r\n\t\t\t\tthis.$readonlyMask = $mask;\r\n\t\t\t\tthis._setLabelText();\r\n\t\t\t\tthis.$readonlyMask.show();\r\n\t\t\t}else if(this.$readonlyMask == undefined){\r\n\t\t\t\tvar style = '';\r\n\t\t\t\tif(this.setting.style){\r\n\t\t\t\t\tstyle = 'style=\"text-align:left;' + this.setting.style + ';display:block;\"';\r\n\t\t\t\t}\r\n\t\t\t\tthis.$readonlyMask = $('<div class=\"wrapper-readonly-mask\" ' + style + '><label></label></div>');\r\n\t\t\t\tthis.$element.append(this.$readonlyMask);\r\n\t\t\t\tthis._setLabelText();\r\n\t\t\t\t/**\r\n\t\t\t\t * 只读状态下 内容点击\r\n\t\t\t\t * @event textbox-class#onReadonlyClick\r\n\t\t\t\t * @param {Jquery} $label 内容元素\r\n\t\t\t\t */\r\n\t\t\t\tvar click = this.setting.onReadonlyClick;\r\n\t\t\t\tif($.isFunction(click)){\r\n\t\t\t\t\tclick(this.$readonlyMask.find('>label'));\r\n\t\t\t\t}\r\n\t\t\t}else{\r\n\t\t\t\tthis.$readonlyMask.show();\r\n\t\t\t}\r\n\t\t\tthis.$element.addClass('wrapper-readonly');\r\n\t\t\tthis.$text.attr('tabindex', -1);\r\n\t\t},\r\n\t\t/**\r\n\t\t * 离开只读状态\r\n\t\t */\r\n\t\t_outReadonly: function(){\r\n\t\t\tif(this.$readonlyMask){\r\n\t\t\t\tthis.$readonlyMask.hide();\r\n\t\t\t}\r\n\t\t\tthis.$element.removeClass('wrapper-readonly');\r\n\t\t\tthis.$text.removeAttr('tabindex');\r\n\t\t},\r\n\t\t/**\r\n\t\t * 切换只读状态\r\n\t\t * @memberof textbox-class\r\n\t\t * @instance\r\n\t\t */\r\n\t\ttoggleReadonly: function(){\r\n\t\t\tthis.readonly(!this.isReadonly());\r\n\t\t},\r\n\t\t/**\r\n\t\t * 设置标签的值\r\n\t\t */\r\n\t\t_setLabelText: function(){\r\n\t\t\tif(this.$readonlyMask){\r\n\t\t\t\tvar text = this.getText();\r\n\t\t\t\tthis.$readonlyMask.find('label').html(text).attr('title', text);\r\n\t\t\t}\r\n\t\t\tif(this.$disabledMask){\r\n\t\t\t\tvar text = this.getText();\r\n\t\t\t\tthis.$disabledMask.find('label').html(text).attr('title', text);\r\n\t\t\t}\r\n\t\t},\r\n\t\t/**\r\n\t\t * 将焦点聚焦到组件\r\n\t\t * @memberof textbox-class\r\n\t\t * @instance\r\n\t\t */\r\n\t\tfocus: function(){\r\n\t\t\tif(this.isReadonly() || !this.isEnabled()){\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tthis.$text.focus();\r\n\t\t},\r\n\t\t/**\r\n\t\t * 使得组件失去焦点\r\n\t\t * @memberof textbox-class\r\n\t\t * @instance\r\n\t\t */\r\n\t\tblur: function(handle){\r\n\t\t\tif(this.isReadonly() || !this.isEnabled()){\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tthis.$text.one('blur.textbox-one.api', handle);\r\n\t\t\tthis.$text.blur();\r\n\t\t},\r\n\t\t/**\r\n\t\t * 该组件是否为活动状态\r\n\t\t * @memberof textbox-class\r\n\t\t * @instance\r\n\t\t */\r\n\t\tisActive: function(){\r\n\t\t\treturn this.$element.hasClass('app-wrapper-active');\r\n\t\t},\r\n\t\t/**\r\n\t\t * 设置请求远程数据时的查询参数\r\n\t\t * @param {object} param 查询参数\r\n\t\t * @example $('#demo').textbox('setParameter',{year:2014});\r\n\t\t * @memberof textbox-class\r\n\t\t * @instance\r\n\t\t */\r\n\t\tsetParameter: function(param){\r\n\t\t\tif(!param){\r\n\t\t\t\tparam = {};\r\n\t\t\t}\r\n\t\t\tthis.$input.data('_parameter', param);\r\n\t\t},\r\n\t\t/**\r\n\t\t * 获取请求数据的查询参数\r\n\t\t * @returns {object} param 查询参数\r\n\t\t * @example $('#demo').textbox('getParameter');\r\n\t\t * @memberof textbox-class\r\n\t\t * @instance\r\n\t\t */\r\n\t\tgetParameter: function(){\r\n\t\t\tvar parameter = this.$input.data('_parameter');\r\n\t\t\tif($.isFunction(parameter)){\r\n\t\t\t\treturn parameter();\r\n\t\t\t}\r\n\t\t\treturn parameter;\r\n\t\t},\r\n\t\t/**\r\n\t\t * 设置隐藏值和显示值\r\n\t\t * @param {String} val 值\r\n\t\t * @param {boolean} [noTrigger] 是否触发change\r\n\t\t * @todo 如果noTrigger不为true，则触发change事件\r\n\t\t * @example $('#demo').textbox('setValue','val');\r\n\t\t * @memberof textbox-class\r\n\t\t * @instance\r\n\t\t */\r\n\t\tsetValue: function(val, noTrigger){\r\n\t\t\tthis.setText(val);\r\n\t\t\tthis._setValue(val, noTrigger);\r\n\t\t},\r\n\t\t/**\r\n\t\t * 设置隐藏值和显示值，不触发onChange事件\r\n\t\t * @param {String} val 值\r\n\t\t * @example $('#demo').textbox('setValueNoChange','val');\r\n\t\t * @memberof textbox-class\r\n\t\t * @instance\r\n\t\t */\r\n\t\tsetValueNoChange: function(val){\r\n\t\t\tthis.setValue(val, true);\r\n\t\t},\r\n\t\t/**\r\n\t\t * 设置隐藏值\r\n\t\t */\r\n\t\t_setValue: function(val, noTrigger){\r\n\t\t\tthis.$value.val(val);\r\n\t\t\t//强制触发onchange事件，验证框架使用change事件机制进行验证\r\n\t\t\tif(!noTrigger){\r\n\t\t\t\tthis.$value.trigger('change');\r\n\t\t\t}\r\n\t\t\tthis._triggerOnChange(val, noTrigger);\r\n\t\t},\r\n\t\t/**\r\n\t\t * 获取隐藏值\r\n\t\t * @returns {String} String 隐藏值\r\n\t\t * @example alert('隐藏值:' + $('#demo').textbox('getValue'));\r\n\t\t * @memberof textbox-class\r\n\t\t * @instance\r\n\t\t */\r\n\t\tgetValue: function(){\r\n\t\t\treturn this.$value.val();\r\n\t\t},\r\n\t\t/**\r\n\t\t * 设置显示值\r\n\t\t * @example $('#demo').textbox('setText','text');\r\n\t\t * @memberof textbox-class\r\n\t\t * @instance\r\n\t\t */\r\n\t\tsetText: function(text){\r\n\t\t\tthis.$text.val(text);\r\n\t\t\tthis._setLabelText();\r\n\t\t\tthis._showTips();\r\n\t\t},\r\n\t\t/**\r\n\t\t * 获取显示值\r\n\t\t * @returns {String} String 显示值\r\n\t\t * @example alert('显示值:' + $('#demo').textbox('getText'));\r\n\t\t * @memberof textbox-class\r\n\t\t * @instance\r\n\t\t */\r\n\t\tgetText: function(){\r\n\t\t\tvar text = this.$text.val();\r\n\t\t\tif(text == this.setting.tips){\r\n\t\t\t\ttext = '';\r\n\t\t\t}\r\n\t\t\treturn text;\r\n\t\t},\r\n\t\t/**\r\n\t\t * 设置提示信息\r\n\t\t * @example $('#demo').textbox('setTips', '提示信息');\r\n\t\t * @memberof textbox-class\r\n\t\t * @instance\r\n\t\t */\r\n\t\tsetTips: function(title){\r\n\t\t\tthis.$element.off('mouseenter.textbox-tips.api')\r\n\t\t\t\t.off('mouseleave.textbox-tips.api')\r\n\t\t\t\t.off('mousemove.textbox-tips.api');\r\n\t\t\tif(!title){\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tvar that = this;\r\n\t\t\tthis.$element.on('mouseenter.textbox-tips.api', function(e){\r\n\t\t\t \tthat.$tooltip = $('<div class=\"panel-tooltip\">'+ title +'</div>');\r\n\t\t        $.$appPanelContainer.append(that.$tooltip);\r\n\t\t        that.$tooltip.css({\r\n\t\t        \ttop: (e.pageY + 20) + 'px',\r\n\t\t        \tleft: (e.pageX + 10)  + 'px',\r\n\t\t        \t'z-index': Options.zindexs.droppanel+1\r\n\t\t        }).show('fast');\r\n\t\t\t}).on('mouseleave.textbox-tips.api', function(e){\r\n\t\t\t\tif(that.$tooltip){\r\n\t\t        \tthat.$tooltip.remove();\r\n\t\t\t\t}\r\n\t\t\t}).on('mousemove.textbox-tips.api', function(e){\r\n\t\t\t\tif(that.$tooltip){\r\n\t\t        \tthat.$tooltip.css({\r\n\t\t                top: (e.pageY + 20) + 'px',\r\n\t\t                left: (e.pageX + 10)  + 'px'\r\n\t\t            });\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t},\r\n\t\t/**\r\n\t\t * 清除值\r\n\t\t * @todo 清除显示值\r\n\t\t * @todo 清除隐藏值\r\n\t\t * @example $('#demo').textbox('clearValue');\r\n\t\t * @memberof textbox-class\r\n\t\t * @instance\r\n\t\t */\r\n\t\tclearValue: function(){\r\n\t\t\tthis.setText('');\r\n\t\t\tthis.setValue('');\r\n\t\t},\r\n\t\t/**\r\n\t\t * 销毁组件\r\n\t\t * @todo 清除dom元素，如果有\r\n\t\t * @memberof textbox-class\r\n\t\t * @instance\r\n\t\t */\r\n\t\tdestroy: function(){\r\n\t\t\tif(this.$dropPanel){\r\n\t\t\t\tthis.$dropPanel.remove();\r\n\t\t\t}\r\n\t\t\tthis._detachCounterTimer();\r\n\t\t\tvar $errprWrapper = this.$element.data('errorWrapper');\r\n\t\t\tif($errprWrapper){\r\n\t\t\t\t$errprWrapper.remove();\r\n\t\t\t}\r\n\t\t\tthis.$element.remove();\r\n\t\t\tif(this.setting.usesuggest && this._suggest){\r\n\t\t\t\tthis._suggest.$dropPanel.remove();\r\n\t\t\t}\r\n\t\t\tthis.$input.removeData(this.setting.className.substr(4));\r\n\t\t},\r\n\t\t/**\r\n\t\t * 触发onChange事件\r\n\t\t * @param newVal 新值\r\n\t\t */\r\n\t\t_triggerOnChange: function(newVal, noTrigger){\r\n\t\t\tvar oldVal = this.$input.data('oldVal'); \r\n\t\t\tif( oldVal == newVal){\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tthis._makeHistory();\r\n\t\t\tthis.$input.data('oldVal', newVal);\r\n\t\t\tif(noTrigger){\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\t/**\r\n\t\t\t * onChange事件\r\n\t\t\t * \t\t新设置的值与原值不同时，触发onChange事件\r\n\t\t\t * @event textbox-class#onChange\r\n\t\t\t * @param {String} newNode 新值\r\n\t\t\t * @param {String} oldVal 旧值\r\n\t\t\t */\r\n\t\t\tif(this.hasBindEvent('onChange')){\r\n\t\t\t\tthis.trigger('onChange', newVal, oldVal);\r\n\t\t\t}\r\n\t\t},\r\n\t\t_makeHistory: function(){\r\n\t\t\tif(!this._localStorage){\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tvar curr = null;\r\n\t\t\tif($.isFunction(this.getSelectedNode)){\r\n\t\t\t\tcurr = this.getSelectedNode();\r\n\t\t\t}else{\r\n\t\t\t\tcurr = this.getValue();\r\n\t\t\t}\r\n\t\t\tif(!curr){\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tif(typeof curr){\r\n\t\t\t\tcurr = {\r\n\t\t\t\t\tdata: curr,\r\n\t\t\t\t\tkeyField: this.setting.valuefield\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tthis._localStorage.put(curr);\r\n\t\t},\r\n\t\t/**\r\n\t\t * 将input渲染成自定义控件\r\n\t\t * @param $input 原始input元素\r\n\t\t * @param opts 渲染参数\r\n\t\t */\r\n\t\t_wrapByDiv: function(opts){\r\n\t\t\tif(this.$input.parent().hasClass('app-wrapper')){\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tif(!this.$input.is('input')){\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tvar $input = this.$input\r\n\t\t\t\t,s = this.setting;\r\n\t\t\tvar innerHtml = this._initInnerHtml()\r\n\t\t\t\t,style = '';\r\n\t\t\tif(s.width){\r\n\t\t\t\tvar width = s.width + '';\r\n\t\t\t\tif(width.charAt(width.length-1) == '%'){\r\n\t\t\t\t\tstyle = 'width:' + width +';';\r\n\t\t\t\t}else{\r\n\t\t\t\t\tstyle = 'width:' + parseInt(width) +'px;';\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif(s.wrapstyle){\r\n\t\t\t\tstyle += s.wrapstyle;\r\n\t\t\t}\r\n\t\t\tif(s.hiddencomp){\r\n\t\t\t\tstyle = 'display:none;';\r\n\t\t\t}\r\n\t\t\tif(style){\r\n\t\t\t\tstyle = 'style=\"' + style +'\"';\r\n\t\t\t}\r\n\t\t\t$input.css('display','none');\r\n\t\t\t$input.removeClass(s.className);\r\n\t\t\t$input.wrap('<div class=\"app-wrapper ' + s.className + '\" ' + style + '></div>').parent().append(innerHtml);\r\n\t\t},\r\n\t\t/**\r\n\t\t * 生成控件内部的html\r\n\t\t * @param $input\r\n\t\t * @param opts\r\n\t\t * @returns {String}\r\n\t\t */\r\n\t\t_initInnerHtml: function(){\r\n\t\t\tvar result =''\r\n\t\t\t\t,exp = ''\r\n\t\t\t\t,imeStyle = ''\r\n\t\t\t\t,s = this.setting;\r\n\t\t\tif(s.text){\r\n\t\t\t\texp += 'value=\"' + s.text +'\" ';\r\n\t\t\t}\r\n\t\t\tif(s.showfield){\r\n\t\t\t\texp += ' name=\"' + s.showfield + '\" field=\"' + s.showfield + '\" ';\r\n\t\t\t}\r\n\t\t\tif(s.filter == 'number'\r\n\t\t\t\t|| s.filter == '0-9'){\r\n\t\t\t\tif(s.style){\r\n\t\t\t\t\ts.style = 'ime-mode: disabled;' + s.style;\r\n\t\t\t\t}else{\r\n\t\t\t\t\ts.style = 'ime-mode: disabled;';\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif(s.style){\r\n\t\t\t\texp += ' style=\"' + s.style + '\"';\r\n\t\t\t}\r\n\t\t\tif(s.multiline){\r\n\t\t\t\tresult = '<textarea type=\"showValue\" autocomplete=\"off\" ' + exp + '/>';\r\n\t\t\t}else{\r\n\t\t\t\tresult = '<input type=\"showValue\" autocomplete=\"off\" ' + exp + '/>';\r\n\t\t\t}\r\n\t\t\tresult += '<span class=\"wrapper-btn wrapper-clear\"><i></i></span>';\r\n\t\t\tif(s.openbtn){\r\n\t\t\t\tresult += '<a class=\"wrapper-btn wrapper-open\" tabindex=\"-1\"><i></i></a>';\r\n\t\t\t}\r\n\t\t\treturn result;\r\n\t\t},\r\n\t\t/**\r\n\t\t * 查看下拉面板是否已显示\r\n\t\t * @returns true 为显示\r\n\t\t */\r\n\t\t_mainDivIsVisiable: function(){\r\n\t\t\treturn this.$dropPanel && this.$dropPanel.is(':visible');\r\n\t\t},\r\n\t\t_afterRender: function(){\r\n\t\t\tvar that = this\r\n\t\t\t\t,className = this.setting.className.substring(4);\r\n\t\t\tif(this.$element.hasClass(this.setting.className)){\r\n\t\t\t\tvar t = setInterval(function(){\r\n\t\t\t\t\tif(that.$input.data(className)){\r\n\t\t\t\t\t\tclearInterval(t);\r\n\t\t\t\t\t\t/**\r\n\t\t\t\t\t\t * afterRender事件\r\n\t\t\t\t\t\t * @event textbox-class#afterRender\r\n\t\t\t\t\t\t */\r\n\t\t\t\t\t\tthat.trigger('afterRender');\r\n\t\t\t\t\t}\r\n\t\t\t\t}, 1);\r\n\t\t\t}\r\n\t\t},\r\n\t\t/**\r\n\t\t * 隐藏错误信息\r\n\t\t * @memberof textbox-class\r\n\t\t * @instance\r\n\t\t */\r\n\t\thideError: function(){\r\n\t\t\tvar $e = this.$element;\r\n\t\t\t$e.removeClass('errorTarger');\r\n\t\t\tvar $wrap = $e.data('errorWrapper');\r\n\t\t\tif($wrap){\r\n\t\t\t\t$wrap.hide();\r\n\t\t\t\t$e.data('errorWrapper', null);\r\n\t\t\t\t$wrap.remove();\r\n\t\t\t\t$e.off('mouseenter.textbox.err.api mouseleave.textbox.err.api');\r\n\t\t\t}\r\n\t\t},\r\n\t\t/**\r\n\t\t * 显示错误信息\r\n\t\t * @param {String} errorMsg 错误信息\r\n\t\t * @param {int} delay 延迟关闭(不设置则不关闭)\r\n\t\t * @memberof textbox-class\r\n\t\t * @instance\r\n\t\t */\r\n\t\tshowError: function(errorMsg, delay){\r\n\t\t\tvar $e = this.$element;\r\n\t\t\t$e.addClass('errorTarger');\r\n\t\t\tvar $wrap = $e.data('errorWrapper');\r\n\t\t\tif(!$wrap){\r\n\t\t\t\tvar $wrapper = $('<div class=\\\"errorWrapper\\\"><div><div></div></div></div>');\r\n\t\t\t\t$wrapper.css('width',$e.outerWidth());\r\n\t\t\t\t$wrapper.appendTo($.$appPanelContainer);\r\n\t\t\t\t$e.data('errorWrapper', $wrapper);\r\n\t\t\t\tvar $label = $('<span for=\"' + this.setting.id + '\" generated=\"true\" class=\"help-inline\">' + errorMsg + '</span>');\r\n\t\t\t\t$label.insertBefore($wrapper.find('div div'));\r\n\t\t\t\t$e.on('mouseenter.textbox.err.api', function(){\r\n\t\t\t\t\tshowError($(this));\r\n\t\t\t\t}).on('mouseleave.textbox.err.api', function(){\r\n\t\t\t\t\thideError($(this));\r\n\t\t\t\t});\r\n\t\t\t}else{\r\n\t\t\t\t$wrap.find('div>span').text(errorMsg);\r\n\t\t\t}\r\n\t\t\tshowError($e);\r\n\t\t\tif(delay){\r\n\t\t\t\tvar that = this;\r\n\t\t\t\tsetTimeout(function(){\r\n\t\t\t\t\tthat.hideError();\r\n\t\t\t\t},delay);\r\n\t\t\t}\r\n\t\t\treturn $wrap;\r\n\t\t\tfunction showError($e){\r\n\t\t\t\tvar $wrapper = $e.data('errorWrapper');\r\n\t\t\t\tif($wrapper && $wrapper.text()){\r\n\t\t\t\t\t$e.addClass('errorTarger');\r\n\t\t\t\t\tvar css = $e.offset()\r\n\t\t\t\t\t\t,$thisTop = $e.offset().top;\r\n\t\t\t\t\tcss.display = 'block';\r\n\t\t\t\t\tif($thisTop < $wrapper.outerHeight()){\r\n\t\t\t\t\t\tcss.top = css.top + $e.outerHeight();\r\n\t\t\t\t\t\t$wrapper.addClass('up');\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\tcss.top = css.top -  $wrapper.outerHeight();\r\n\t\t\t\t\t\t$wrapper.removeClass('up');\r\n\t\t\t\t\t}\r\n\t\t\t\t\t$wrapper.css(css);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tfunction hideError($e){\r\n\t\t\t\t$e.removeClass('errorTarger');\r\n\t\t\t\tvar $wrapper = $e.data('errorWrapper');\r\n\t\t\t\tif($wrapper){\r\n\t\t\t\t\t$wrapper.hide();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t});\r\n\t\r\n\t$.fn.textbox = function (option, value) {\r\n\t\tvar methodReturn = undefined\r\n\t\t\t,args = arguments\r\n\t\t\t,componentName = 'textbox';\r\n\t\tthis.each(function(){\r\n\t\t\tvar $this = $(this);\r\n\t\t\tif(!$this.is('input')){\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\t\t\tvar component = App.getComponent($this, componentName);\r\n\t\t\tif(!component){\r\n\t\t\t\tvar opts = option;\r\n\t\t\t\tif(typeof option === 'string'){\r\n\t\t\t\t\topts = false;\r\n\t\t\t\t}\r\n\t\t\t\tcomponent = new Textbox(this, opts);\r\n\t\t\t\t$this.data(componentName, component);\r\n\t\t\t}\r\n\t\t\tif(typeof option === 'string'){\r\n\t\t\t\tvar methodArgs = Array.prototype.slice.call(args, 1);\r\n\t\t\t\tmethodReturn = App.componentMethodApply(component, option, methodArgs);\r\n\t\t\t}\r\n\t\t});\r\n\t\treturn methodReturn;\r\n\t};\r\n\t/**\r\n\t * jquery对象\r\n\t * @namespace jquery\r\n\t */\r\n\t$.fn.extend({\r\n\t\t/**\r\n\t\t * 获取当前光标位置的方法\r\n\t\t * @memberof jquery\r\n\t\t * @instance\r\n\t\t */\r\n\t\tgetCurPos:function() {\r\n\t\t\tif(!$(this).is(\":focus\")){\r\n\t\t\t\treturn null;\r\n\t\t\t} \r\n\t\t\tvar curCurPos = '';\r\n\t\t\tvar all_range = '';\r\n\t\t\tif (navigator.userAgent.indexOf(\"MSIE\") > -1) { //IE\r\n\t\t\t\tif( $(this).get(0).tagName == \"TEXTAREA\" ){ \r\n\t\t\t\t\t// 根据body创建textRange\r\n\t\t\t\t\tall_range = document.body.createTextRange();\r\n\t\t\t\t\t// 让textRange范围包含元素里所有内容\r\n\t\t\t\t\tall_range.moveToElementText($(this).get(0));\r\n\t\t\t\t} else {\r\n\t\t\t\t\t// 根据当前输入元素类型创建textRange\r\n\t\t\t\t\tall_range = $(this).get(0).createTextRange();\r\n\t\t\t\t}\r\n\t\t\t\t// 输入元素获取焦点\r\n\t\t\t\t$(this).focus();\r\n\t\t\t\t// 获取当前的textRange,如果当前的textRange是一个具体位置而不是范围,textRange的范围从start到end.此时start等于end\r\n\t\t\t\tvar cur_range = document.selection.createRange();\r\n\t\t\t\t// 将当前的textRange的end向前移\"选中的文本.length\"个单位.保证start=end\r\n\t\t\t\tcur_range.moveEnd('character',-cur_range.text.length)\r\n\t\t\t\t// 将当前textRange的start移动到之前创建的textRange的start处, 此时当前textRange范围变为整个内容的start处到当前范围end处\r\n\t\t\t\tcur_range.setEndPoint(\"StartToStart\",all_range);\r\n\t\t\t\t// 此时当前textRange的Start到End的长度,就是光标的位置\r\n\t\t\t\tcurCurPos = cur_range.text.length;\r\n\t\t\t} else {\r\n\t\t\t\t// 文本框获取焦点\r\n\t\t\t\t$(this).focus();\r\n\t\t\t\t// 获取当前元素光标位置\r\n\t\t\t\tcurCurPos = $(this).get(0).selectionStart;\r\n\t\t\t}\r\n\t\t\t// 返回光标位置\r\n\t\t\treturn curCurPos;\r\n\t\t},\r\n\t\t/**\r\n\t\t * 设置当前光标位置方法\r\n\t\t * @memberof jquery\r\n\t\t * @instance\r\n\t\t */\r\n\t\tsetCurPos:function(start,end) {\r\n\t\t\tif(end === undefined){\r\n\t\t\t\tend = start;\r\n\t\t\t}\r\n\t\t\tif(navigator.userAgent.indexOf(\"MSIE\") > -1){\r\n\t\t\t\tvar all_range = '';\r\n\t\t\t\tif( $(this).get(0).tagName == \"TEXTAREA\" ){ \r\n\t\t\t\t\t// 根据body创建textRange\r\n\t\t\t\t\tall_range = document.body.createTextRange();\r\n\t\t\t\t\t// 让textRange范围包含元素里所有内容\r\n\t\t\t\t\tall_range.moveToElementText($(this).get(0));\r\n\t\t\t\t} else {\r\n\t\t\t\t\t// 根据当前输入元素类型创建textRange\r\n\t\t\t\t\tall_range = $(this).get(0).createTextRange();\r\n\t\t\t\t}\r\n\t\t\t\t$(this).focus();\r\n\t\t\t\t// 将textRange的start设置为想要的start\r\n\t\t\t\tall_range.moveStart('character',start);\r\n\t\t\t\t// 将textRange的end设置为想要的end. 此时我们需要的textRange长度=end-start; 所以用总长度-(end-start)就是新end所在位置\r\n\t\t\t\tall_range.moveEnd('character',-(all_range.text.length-(end-start)));\r\n\t\t\t\t// 选中从start到end间的文本,若start=end,则光标定位到start处\r\n\t\t\t\tall_range.select();\r\n\t\t\t}else{\r\n\t\t\t\t// 文本框获取焦点\r\n\t\t\t\t$(this).focus();\r\n\t\t\t\t// 选中从start到end间的文本,若start=end,则光标定位到start处\r\n\t\t\t\t$(this).get(0).setSelectionRange(start,end);\r\n\t\t\t}\r\n\t\t}\r\n\t});\r\n\t/** \r\n\t * 初始化下拉面板容器\r\n\t */\r\n\tfunction initPanelContainer(){\r\n\t\tvar $container = $('body').find('.appPanelContainer');\r\n\t\tif($container.length == 0){\r\n\t\t\t$container = $('<div class=\"appPanelContainer\" />');\r\n\t\t\t$('body').append($container);\r\n\t\t}\r\n\t\t$.$appPanelContainer = $container;\r\n\t}\r\n\tinitPanelContainer();\r\n\treturn Textbox;\r\n});\n",
    "define('app/core/app-register',[\"app/core/app-jquery\",\"app/core/app-core\",localeFile,\r\n        'app/core/app-options','app/widgets/form/app-textbox'],function($,App,AppLang,Options){\r\n\t//add by tw\r\n\tApp.regInitMethod(function($box){\r\n\t\t/*if ($(\"#_pageBar\").length>0){\r\n\t\t\t\r\n\t\t\t\r\n\t\t}\r\n\t\t$(\"body\").append(\"<div  id=\\\"_pageBar\\\" class=\\\"page-bar\\\" style=\\\"display: none;\\\"></div>\")*/\r\n\t\t\r\n\t\tvar filter = \":not(.tab-content .lazy *)\";//add by tw（对于指定懒加载且不显示的元素不初始化）\r\n\t\tvar initObjs = {},requires=[];\r\n\t\t\r\n\t\tvar $jqgrids = $('.jqgrid[init!=true]',$box).filter(filter);\r\n\t\tif($jqgrids.length>0){\r\n\t\t\tinitObjs[\"initJqGrid\"] = $jqgrids;\r\n\t\t\trequires.push(\"app/widgets/app-jqgrid\");\r\n\t\t}\r\n\t\t\r\n\t\t//add by tw\r\n\t\t\r\n\t\t\r\n\t\t\r\n\t\tvar $portlets = $(\".app-portlet\",$box);\r\n\t\tif($portlets.length>0){\r\n\t\t\tinitObjs[\"portlet\"] = $portlets;\r\n\t\t\trequires.push(\"app/widgets/portlet/app-portlet\");\r\n\t\t}\r\n\t\t\r\n\t\t/*文本框*/\r\n\t\tvar $textbox = $(\".app-textbox\",$box).filter(filter);\r\n\t\tif($textbox.length > 0){\r\n\t\t\tinitObjs[\"textbox\"] = $textbox;\r\n\t\t\trequires.push(\"app/widgets/form/app-textbox\");\r\n\t\t}\r\n\t\t/*金额控件*/\r\n\t\tvar $money = $(\".app-money\",$box).filter(filter);\r\n\t\tif($money.length > 0){\r\n\t\t\tinitObjs[\"money\"] = $money;\r\n\t\t\trequires.push(\"app/widgets/form/app-money\");\r\n\t\t}\r\n\t\t/*数值控件*/\r\n\t\tvar $number = $(\".app-number\",$box).filter(filter);\r\n\t\tif($number.length > 0){\r\n\t\t\tinitObjs[\"number\"] = $number;\r\n\t\t\trequires.push(\"app/widgets/form/app-number\");\r\n\t\t}\r\n\t\t/*预输入*/\r\n\t\tvar $typeahead = $(\".app-typeahead\",$box).filter(filter);\r\n\t\tif($typeahead.length > 0){\r\n\t\t\tinitObjs[\"typeahead\"] = $typeahead;\r\n\t\t\trequires.push(\"app/widgets/form/app-typeahead\");\r\n\t\t}\r\n\t\t/*下拉面板*/\r\n\t\tvar $combo = $(\".app-combo\",$box).filter(filter);\r\n\t\tif($combo.length > 0){\r\n\t\t\tinitObjs[\"combo\"] = $combo;\r\n\t\t\trequires.push(\"app/widgets/form/app-combo\");\r\n\t\t}\r\n\t\t/*下拉框*/\r\n\t\tvar $combobox = $(\".app-combobox\",$box).filter(filter);\r\n\t\tif($combobox.length > 0){\r\n\t\t\tinitObjs[\"combobox\"] = $combobox;\r\n\t\t\trequires.push(\"app/widgets/form/app-combobox\");\r\n\t\t}\r\n\t\t/*下拉树*/\r\n\t\tvar $comboztree = $(\".app-comboztree\",$box).filter(filter);\r\n\t\tif($comboztree.length > 0){\r\n\t\t\tinitObjs[\"comboztree\"] = $comboztree;\r\n\t\t\trequires.push(\"app/widgets/form/app-comboztree\");\r\n\t\t}\r\n\t\t/*引用框*/\r\n\t\tvar $references = $(\".app-reference\",$box).filter(filter);\r\n\t\tif($references.length > 0){\r\n\t\t\tinitObjs[\"reference\"] = $references;\r\n\t\t\trequires.push(\"app/widgets/form/app-reference\");\r\n\t\t}\r\n\t\t/*下拉表格组件*/\r\n\t\tvar $combogrid = $(\".app-combogrid\",$box).filter(filter);\r\n\t\tif($combogrid.length > 0){\r\n\t\t\tinitObjs[\"combogrid\"] = $combogrid;\r\n\t\t\trequires.push(\"app/widgets/form/app-combogrid\");\r\n\t\t}\r\n\t\t/*联想框*/\r\n\t\tvar $suggest = $(\".app-suggest\",$box).filter(filter);\r\n\t\tif($suggest.length > 0){\r\n\t\t\tinitObjs[\"suggest\"] = $suggest;\r\n\t\t\trequires.push(\"app/widgets/form/app-suggest\");\r\n\t\t}\r\n\t\t/*日期框*/\r\n\t\tvar $datetimes = $(\"input.app-datetime\",$box).filter(filter);\r\n\t\tif($datetimes.length > 0){\r\n\t\t\tinitObjs[\"datetime\"] = $datetimes;\r\n\t\t\trequires.push(\"app/widgets/form/app-datetime\");\r\n\t\t}\r\n\t\t/*复选框*/\r\n\t\tvar $checkbox = $(\"input.app-checkbox\",$box).filter(filter);\r\n\t\tif($checkbox.length > 0){\r\n\t\t\tinitObjs[\"checkbox\"] = $checkbox;\r\n\t\t\trequires.push(\"app/widgets/form/app-checkbox\");\r\n\t\t}\r\n\t\t/*上传组件*/\r\n\t\tvar $upload = $(\".app-upload\",$box).filter(filter);\r\n\t\tif($upload.length > 0){\r\n\t\t\tinitObjs[\"upload\"] = $upload;\r\n\t\t\trequires.push(\"app/widgets/form/app-upload\");\r\n\t\t}\r\n\t\t\r\n\t\tvar $dropdowns = $(\"[data-toggle=dropdown]\", $box).filter(filter);\r\n\t\tif($dropdowns.length > 0){\r\n\t\t\trequires.push(\"bootstrap/bootstrap-dropdown\");\r\n\t\t}\r\n\t\t\r\n\t\t/* Tab组件 */\r\n\t\tvar $appTabs = $(\".app-tabs\", $box).filter(filter);\r\n\t\tif($appTabs.length > 0){\r\n\t\t\tinitObjs[\"tabs\"] = $appTabs;\r\n\t\t\trequires.push(\"app/widgets/tabs/app-tabs\");\r\n\t\t}\r\n\t\t/* xquerybox */\r\n\t\tvar $xquerybox = $(\".app-xquerybox\", $box).filter(filter);\r\n\t\tif($xquerybox.length > 0){\r\n\t\t\tinitObjs[\"xquerybox\"] = $xquerybox;\r\n\t\t\trequires.push(\"app/widgets/form/app-xquerybox\");\r\n\t\t}\r\n\t\t/* Tab组件 \r\n\t\tvar $tabcontents = $(\".tab-container\", $box).filter(filter);\r\n\t\tif($tabcontents.length > 0){\r\n\t\t\tinitObjs[\"appTabs\"] = $tabcontents;\r\n\t\t\trequires.push(\"app/widgets/tabs/app-tab\");\r\n\t\t}\r\n*/\r\n\t\t/* ZTREE组件 */\r\n\t\tvar $ztrees = $('.apptree',$box).filter(filter);\r\n\t\tif($ztrees.length>0){\r\n\t\t\tinitObjs[\"initZTree\"] = $ztrees;\r\n\t\t\trequires.push(\"app/widgets/tree/app-ztree\");\r\n\t\t}\r\n\t\t/* 查询组件 */\r\n\t\tvar $xquerys = $('.xquery',$box).filter(filter);\r\n\t\tif($xquerys.length>0){\r\n\t\t\tinitObjs[\"initXquery\"] = $xquerys;\r\n\t\t\trequires.push(\"app/widgets/form/app-xquery\");\r\n\t\t}\r\n\t\tvar appdatagrid = $('.app-datagrid',$box).filter(filter);\r\n\t\tif(appdatagrid.length>0){\r\n\t\t\tinitObjs[\"datagrid\"] = appdatagrid;\r\n\t\t\trequires.push(\"app/widgets/treegrid/app-datagrid\");\r\n\t\t}\r\n\t\tvar apptreegrid = $('.app-treegrid',$box).filter(filter);\r\n\t\tif(apptreegrid.length>0){\r\n\t\t\tinitObjs[\"treegrid\"] = apptreegrid;\r\n\t\t\trequires.push(\"app/widgets/treegrid/app-treegrid\");\r\n\t\t}\r\n\t\t\r\n\t\t/*表单校验*/\r\n\t\tvar $form = $(\"form.required-validate\", $box).filter(filter);\r\n\t\tif($form.length > 0 \r\n\t\t\t\t&& $form.find('input[validations]').length > 0){\r\n\t\t\t$form.each(function(){\r\n\t\t\t\t$(this).validate({\r\n\t\t\t\t\tdebug: true,\r\n\t\t\t\t\tsuccess: \"valid\",\r\n\t\t\t\t\tsubmitHandler : function() {\r\n\t\t\t\t\t\talert(\"验证通过!\");\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t});\r\n\t\t}\r\n\t\t\r\n\t\t/*注册表单提交*/\r\n\t\tvar $forms = $(\"div.form>form\",$box).filter(filter);\r\n\t\tif($forms.length>0){\r\n\t\t\tinitObjs[\"initForm\"] = $forms;\r\n\t\t\trequires.push(\"app/widgets/form/app-form\");\r\n\t\t}\r\n\t\t/*联动规则*/\r\n\t\tvar $gearRules = $(\"[gearRules]\", $box).filter(filter);\r\n\t\tif($gearRules.length > 0 ){\r\n\t\t\trequires.push(\"app/widgets/form/app-rule\");\r\n\t\t\tinitObjs[\"gearRule\"] = $gearRules;\r\n\t\t}\r\n\t\t/*按钮状态*/\r\n\t\tvar $buttonStates = $(\".btnarea>div.button-state\", $box).filter(filter);\r\n\t\tif($buttonStates.length > 0 ){\r\n\t\t\trequires.push(\"app/widgets/button/app-buttons\");\r\n\t\t\tinitObjs[\"initButtonState\"] = $buttonStates;\r\n\t\t}\r\n\t\tvar $buttons= $(\".app-button\", $box).filter(filter);\r\n\t\tif($buttons.length > 0 ){\r\n\t\t\trequires.push(\"app/widgets/button/app-button\");\r\n\t\t\tinitObjs[\"button\"] = $buttons;\r\n\t\t}\r\n\t\tvar $menubutton= $(\".app-menubutton\", $box).filter(filter);\r\n\t\tif($menubutton.length > 0 ){\r\n\t\t\trequires.push(\"app/widgets/button/app-menubutton\");\r\n\t\t\tinitObjs[\"menubutton\"] = $menubutton;\r\n\t\t}\r\n\t\t\r\n\t\tvar $layout= $(\".app-layout\", $box).filter(filter);\r\n\t\tif($layout.length > 0 ){\r\n\t\t\trequires.push(\"app/widgets/layout/app-layout2\");\r\n\t\t\tinitObjs[\"layout\"] = $layout;\r\n\t\t}\t\r\n\t\tvar $panel= $(\".app-vboxLayout\", $box).filter(filter);\r\n\t\tif($panel.length > 0 ){\r\n\t\t\trequires.push(\"app/widgets/layout/app-boxlayout\");\r\n\t\t\tinitObjs[\"VBoxLayout\"] = $panel;\r\n\t\t}\r\n\t\t\r\n\t\tvar $panel= $(\".app-hboxLayout\", $box).filter(filter);\r\n\t\tif($panel.length > 0 ){\r\n\t\t\trequires.push(\"app/widgets/layout/app-boxlayout\");\r\n\t\t\tinitObjs[\"HBoxLayout\"] = $panel;\r\n\t\t}\r\n\t\t\r\n\t\tvar $panel= $(\".app-panel\", $box).filter(filter);\r\n\t\tif($panel.length > 0 ){\r\n\t\t\trequires.push(\"app/widgets/panel/app-panel\");\r\n\t\t\tinitObjs[\"panel\"] = $panel;\r\n\t\t}\r\n\t\t/*表格组件*/\r\n\t\tvar $grid = $(\".app-grid\",$box).filter(filter);\r\n\t\tif($grid.length > 0){\r\n\t\t\tinitObjs[\"grid\"] = $grid;\r\n\t\t\trequires.push(\"app/widgets/grid/app-grid\");\r\n\t\t}\r\n\t\tvar $menus= $(\".app-menu\", $box).filter(filter);\r\n\t\tif($menus.length > 0 ){\r\n\t\t\trequires.push(\"app/widgets/menu/app-menu\");\r\n\t\t\tinitObjs[\"menu\"] = $menus;\r\n\t\t}\r\n\t\t\r\n\t\t//console.log($buttons)\r\n\t\t/*滚动页签*/\r\n\t\tvar $scrollspys = $(\".scrollspy\", $box).filter(filter);\r\n\t\tif($scrollspys.length > 0 ){\r\n\t\t\trequires.push(\"app/app-scroll\");\r\n\t\t\tinitObjs[\"scrollspy\"] = $scrollspys;\r\n\t\t}\r\n\t\tinitObjs[\"initEvent\"]=function(){\r\n\t\t\t$(\"[handle][handleType=JS]\",$box).filter(filter).each(function(){\r\n\t\t\t\tvar $this = $(this);\r\n\t\t\t\tvar handle = $this.attr(\"handle\");\r\n\t\t\t\t$this.removeAttr(\"handle\");\r\n\t\t\t\tif(!handle)\r\n\t\t\t\t\treturn;\r\n\t\t\t\tvar func=null;\r\n\t\t\t\ttry{\r\n\t\t\t\t\tfunc = $box.getJsFunction(handle);\r\n\t\t\t\t}catch(e){\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\t$this.click(function(e){\r\n\t\t\t\t\tif($this.isTag(\"a\"))\r\n\t\t\t\t\t\te.preventDefault();\r\n\t\t\t\t\tif($this.attr(\"disabled\")||$this.hasClass(\"disabled\"))\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\tfunc.call($this);\r\n\t\t\t\t});\r\n\t\t\t});\r\n\t\t\t$(\"[events][eventSelf!=true]\",$box).filter(filter).each(function(){\r\n\t\t\t\t$this = $(this);\r\n\t\t\t\tvar evts = $this.attr(\"events\");\r\n\t\t\t\tif(!evts)\r\n\t\t\t\t\treturn;\r\n\t\t\t\tvar es = $this.getJsEvent(evts);\r\n\t\t\t\t$this.on(es);\r\n\t\t\t});\r\n\t\t};\r\n\t\t/*统一初始化*/\r\n\t\tif(requires.length>0){\r\n\t\t\trequire(requires,function(){\r\n\t\t\t\t$.each(initObjs,function(key){\r\n\t\t\t\t\ttry{\r\n\t\t\t\t\tvar o = initObjs[key];\r\n\t\t\t\t\tif($.isFunction(o)){\r\n\t\t\t\t\t\to();\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\to[key]();\r\n\t\t\t\t\t}\r\n\t\t\t\t\t}catch(ex){\r\n\t\t\t\t\t\tif (window.console){\r\n\t\t\t\t\t\t\tconsole.log(ex);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t/*\t\tconsole.log($box);\r\n\t\t\t\tconsole.log($A.eventType.pageLoad)*/\r\n\t\t\t\t$box.triggerHandler($A.eventType.pageLoad);\r\n\t\t\t\t\r\n\t\t\t\t//setTimeout(function(){\r\n\t\t\t\t\t$(\"#_tabmask\").hide();\r\n\t\t\t\t//\t$(\"#_tabmask\").remove();\r\n\t\t\t\t//},100);\r\n\t\t\t\t\r\n//\t\t\t\tinitKey();\r\n\t\t\t});\r\n\t\t}else{\r\n\t\t\t$.each(initObjs,function(key){\r\n\t\t\t\ttry{\r\n\t\t\t\tvar o = initObjs[key];\r\n\t\t\t\tif($.isFunction(o)){\r\n\t\t\t\t\to();\r\n\t\t\t\t}else{\r\n\t\t\t\t\to[key]();\r\n\t\t\t\t}\r\n\t\t\t\t}catch(ex){\r\n\t\t\t\t\tif (window.console){\r\n\t\t\t\t\t\tconsole.log(ex);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t});\r\n//\t\t\tinitKey();\r\n\t\t\t$box.triggerHandler($A.eventType.pageLoad);\r\n\t\t\t/*$(\"#_tabmask\").hide(function(){$(\"#_tabmask\").remove();});*/\r\n\t\t\t//setTimeout(function(){\r\n\t\t\t\t$(\"#_tabmask\").hide();\r\n\t\t\t\r\n\t\t\t\t//$(\"#_tabmask\").remove();\r\n\t\t\t//}, 100);\r\n\t\t}\r\n\t\t\r\n\t});\r\n\t\r\n//\t function initKey() {\r\n//\t\t$A(':input:text:first:enabled:visible').focus();\r\n//\t\t$A(':input:enabled:visible').addClass('enterIndex');\r\n//\t\t// get only input tags with class data-entry\r\n//\t\ttextboxes = $('.enterIndex');\r\n//\t\t// now we check to see which browser is being used\r\n//\t\tif ($.browser.mozilla) {\r\n//\t\t\t$A(textboxes).unbind('keypress.formkey',CheckForEnter)\r\n//\t\t\t$A(textboxes).bind('keypress.formkey', CheckForEnter);\r\n//\t\t} else {\r\n//\t\t\t$A(textboxes).unbind('keydown.formkey',CheckForEnter)\r\n//\r\n//\t\t\t$A(textboxes).bind('keydown.formkey', CheckForEnter);\r\n//\t\t}\r\n//\r\n//\t\tfunction CheckForEnter(event) {\r\n//\t\t\tif (event.keyCode == 13 && $A(this).attr('type') != 'button'\r\n//\t\t\t\t\t&& $A(this).attr('type') != 'submit'\r\n//\t\t\t\t\t&& $A(this).attr('type') != 'textarea'\r\n//\t\t\t\t\t&& $A(this).attr('type') != 'reset') {\r\n//\t\t\t\tvar i = $A('.enterIndex').index($A(this));\r\n//\t\t\t\tvar n = $A('.enterIndex').length;\r\n//\t\t\t\tif (i < n - 1) {\r\n//\t\t\t\t\tif ($A(this).attr('type') != 'radio') {\r\n//\t\t\t\t\t\tNextDOM($A('.enterIndex'), i);\r\n//\t\t\t\t\t} else {\r\n//\t\t\t\t\t\tvar last_radio = $A('.enterIndex')\r\n//\t\t\t\t\t\t\t\t.index($A('.enterIndex[type=radio][name='\r\n//\t\t\t\t\t\t\t\t\t\t+ $A(this).attr('name')\r\n//\t\t\t\t\t\t\t\t\t\t+ ']:last'));\r\n//\t\t\t\t\t\tNextDOM($A('.enterIndex'), last_radio);\r\n//\t\t\t\t\t}\r\n//\t\t\t\t}\r\n//\t\t\t\treturn false;\r\n//\t\t\t}\r\n//\t\t}\r\n//\t\tfunction NextDOM(myjQueryObjects, counter) {\r\n//\t\t\tif (myjQueryObjects.eq(counter + 1)[0].disabled) {\r\n//\t\t\t\tNextDOM(myjQueryObjects, counter + 1);\r\n//\t\t\t} else {\r\n//\t\t\t\tmyjQueryObjects.eq(counter + 1).trigger('focus');\r\n//\t\t\t}\r\n//\t\t}\r\n//\t}\r\n});\n",
    "define('app/util/app-number-format',[], function(){\r\n\t/**\r\n\t * @class\r\n\t * @classdesc 数字工具类\r\n\t * @name NumberFormat-class\r\n\t * @desc 提供数字的格式化方法\r\n\t */\r\n\tvar NumberFormat = {};\r\n\t/**\r\n\t * 格式化数值\r\n\t * @param num 数值\r\n\t * @param pattern 格式化串\r\n\t * <PRE>\r\n\t * 1、格式化串以;;#结束 则说明0不显示\r\n\t * 2、如果格式化串数字部分以%结束 则说明进行百分比显示 \r\n\t * <PRE>\r\n\t * @returns {String}\r\n\t * @example $A.NumberFormat.format(1234, '#,###.##');->1,234\r\n\t * @example $A.NumberFormat.format(1234, '#,###.00');->1,234.00\r\n\t * @example $A.NumberFormat.format(0, '#,###.00');->0.00\r\n\t * @example $A.NumberFormat.format(0, '#,###.00;;#');->\r\n\t * @example $A.NumberFormat.format('', '#,###.00;;#');->\r\n\t * @example $A.NumberFormat.format(null, '#,###.00;;#');->\r\n\t * @example $A.NumberFormat.format(14, '#,###.00%');->1,400.00%\r\n\t * @memberof NumberFormat-class\r\n\t * @instance\r\n\t */\r\n\tNumberFormat.format = function(num, pattern) {\r\n\t\tif(num == undefined){\r\n\t\t\treturn '';\r\n\t\t}\r\n\t\tvar result = '';\r\n\t\tif(pattern.indexOf(';;#') == pattern.length-3){\r\n\t\t\tif(num == 0){\r\n\t\t\t\treturn '';\r\n\t\t\t}\r\n\t\t\tpattern = pattern.substr(0, pattern.length-3);\r\n\t\t}\r\n\t\tvar hasPercent = pattern.indexOf('%') == pattern.length - 1; \r\n\t\tif(hasPercent){\r\n\t\t\tnum = num*100;\r\n\t\t\tpattern = pattern.substr(0, pattern.length-1);\r\n\t\t}\r\n\t\tvar strarr = num ? num.toString().split('.') : [ '0' ]\r\n\t\t\t,fmtarr = pattern ? pattern.split('.') : [ '' ]\r\n\t\t\t,intStr = formatInteger(strarr, fmtarr)\r\n\t\t\t,decimalStr = formatDecimal(strarr, fmtarr)\r\n\t\t\t,result = '';\r\n\t\tif(decimalStr){\r\n\t\t\tresult = intStr + '.' + decimalStr;\r\n\t\t}else{\r\n\t\t\tresult = intStr;\r\n\t\t}\r\n\t\tif(hasPercent){\r\n\t\t\tresult += '%';\r\n\t\t}\r\n\t\treturn result;\r\n\t\tfunction formatInteger(strarr, fmtarr){\r\n\t\t\tvar result = ''\r\n\t\t\t\t,str = strarr[0]\r\n\t\t\t\t,fmt = fmtarr[0]\r\n\t\t\t\t,i = str.length - 1\r\n\t\t\t\t,comma = false;\r\n\t\t\tfor (var f = fmt.length - 1; f >= 0; f--) {\r\n\t\t\t\tswitch (fmt.substr(f, 1)) {\r\n\t\t\t\tcase '#':\r\n\t\t\t\t\tif (i >= 0)\r\n\t\t\t\t\t\tresult = str.substr(i--, 1) + result;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase '0':\r\n\t\t\t\t\tif (i >= 0)\r\n\t\t\t\t\t\tresult = str.substr(i--, 1) + result;\r\n\t\t\t\t\telse\r\n\t\t\t\t\t\tresult = '0' + result;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase ',':\r\n\t\t\t\t\tcomma = true;\r\n\t\t\t\t\tresult = ',' + result;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif (i >= 0) {\r\n\t\t\t\tif (comma) {\r\n\t\t\t\t\tvar l = str.length;\r\n\t\t\t\t\tfor (; i >= 0; i--) {\r\n\t\t\t\t\t\tresult = str.substr(i, 1) + result;\r\n\t\t\t\t\t\tif (i > 0 && ((l - i) % 3) == 0)\r\n\t\t\t\t\t\t\tresult = ',' + result;\r\n\t\t\t\t\t}\r\n\t\t\t\t} else\r\n\t\t\t\t\tresult = str.substr(0, i + 1) + result;\r\n\t\t\t}\r\n\t\t\treturn result.replace(/^,+/,'').replace(/^(-,)/,'-');\r\n\t\t}\r\n\t\tfunction formatDecimal(strarr, fmtarr){\r\n\t\t\tvar str = strarr.length > 1 ? strarr[1] : ''\r\n\t\t\t\t,fmt = fmtarr.length > 1 ? fmtarr[1] : ''\r\n\t\t\t\t,i = 0\r\n\t\t\t\t,result = '';\r\n\t\t\tfor (var f = 0; f < fmt.length; f++) {\r\n\t\t\t\tswitch (fmt.substr(f, 1)) {\r\n\t\t\t\tcase '#':\r\n\t\t\t\t\tif (i < str.length)\r\n\t\t\t\t\t\tresult += str.substr(i++, 1);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase '0':\r\n\t\t\t\t\tif (i < str.length)\r\n\t\t\t\t\t\tresult += str.substr(i++, 1);\r\n\t\t\t\t\telse\r\n\t\t\t\t\t\tresult += '0';\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn result;\r\n\t\t}\r\n\t};\r\n\t/**\r\n\t * 三位一个逗号隔开的展现，保留s为小数\r\n\t * @param num 数值\r\n\t * @param precision 保留小数位\r\n\t * @param ixMax 是否按原数值的最大小数位\r\n\t * @returns {String}\r\n\t */\r\n\tNumberFormat.toThousands = function(num, precision, isMax){\r\n\t\tvar pattern = '#,##0';\r\n\t\tif(precision > 0){\r\n\t\t\tvar decimalPattern = '';\r\n\t\t\tfor(var i = 0; i < precision; i++){\r\n\t\t\t\tif(isMax){\r\n\t\t\t\t\tdecimalPattern += '#';\r\n\t\t\t\t}else{\r\n\t\t\t\t\tdecimalPattern += '0';\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tpattern += '.' + decimalPattern;\r\n\t\t}\r\n\t\treturn NumberFormat.format(num, pattern);\r\n\t};\r\n\t/**\r\n\t * 转换为大写金额\r\n\t * @param num 数值\r\n\t * @returns {String}\r\n\t */\r\n\tNumberFormat.toChinese = function(num){\r\n\t\tif (isNaN(num))\r\n\t\t\treturn '';\r\n\t\tif(num > Math.pow(10, 12)){\r\n\t\t\treturn '还未处理这么大的值';\r\n\t\t}\r\n\t\tvar cn = '零壹贰叁肆伍陆柒捌玖'\r\n\t\t\t,unit = new Array('拾佰仟', '分角')\r\n\t\t\t,unit1 = new Array('万亿', '')\r\n\t\t\t,numArray = num.toString().split('.')\r\n\t\t\t,start = new Array(numArray[0].length - 1, 2);\r\n\t\tfor ( var i = 0; i < numArray.length; i++) {\r\n\t\t\tvar tmp = '';\r\n\t\t\tfor ( var j = 0; j * 4 < numArray[i].length; j++) {\r\n\t\t\t\tvar strIndex = numArray[i].length - (j + 1) * 4\r\n\t\t\t\t\t,str = numArray[i].substring(strIndex, strIndex + 4)\r\n\t\t\t\t\t,start = i ? 2 : str.length - 1\r\n\t\t\t\t\t,tmp1 = getChinese(str, i);\r\n\t\t\t\ttmp1 = tmp1.replace(/(零.)+/g, '零').replace(/零+$/,'');\r\n\t\t\t\ttmp = (tmp1 + (tmp1 ? unit1[i].charAt(j - 1) : '')) + tmp;\r\n\t\t\t}\r\n\t\t\tnumArray[i] = tmp;\r\n\t\t}\r\n\t\tnumArray[1] = numArray[1] ? numArray[1] : '';\r\n\t\tnumArray[0] = numArray[0] ? numArray[0] + '元' : numArray[0];\r\n\t\tnumArray[1] = numArray[1].match(/分/) ? numArray[1] : numArray[1] + '整';\r\n\t\treturn numArray[0] + numArray[1];\r\n\t\t/**\r\n\t\t * 转换为大写\r\n\t\t * @param num 数字\r\n\t\t * @param 数字所在索引\r\n\t\t * @returns {String} 大写值\r\n\t\t */\r\n\t\tfunction getChinese(num, index) {\r\n\t\t\tnum = num.replace(/\\d/g, function($1) {\r\n\t\t\t\treturn cn.charAt($1)+ unit[index].charAt(start-- % 4 ? start % 4: -1);\r\n\t\t\t});\r\n\t\t\treturn num;\r\n\t\t}\r\n\t};\r\n\treturn NumberFormat;\r\n});\n",
    "define('app/util/app-xss-utils',[], function() {\r\n\r\n\tvar REGX_DECODE = /&\\w+;|&#(\\d+);/g;\r\n\r\n\tvar DECODE = {\r\n\t\t\"&lt;\" : \"<\",\r\n\t\t\"&gt;\" : \">\",\r\n\t\t\"&amp;\" : \"&\",\r\n\t\t\"&nbsp;\" : \" \",\r\n\t\t\"&quot;\" : \"\\\"\"\r\n\t\t// Add more\r\n\t};\r\n\r\n\tString.prototype.xssDecode = function(s) {\r\n\t\ts = (s != undefined) ? s : this.toString();\r\n\t\treturn (typeof s != \"string\") ? s : s.replace(REGX_DECODE,\r\n\t\t\t\tfunction($0, $1) {\r\n\t\t\t\t\tvar c = DECODE[$0];\r\n\t\t\t\t\tif (c == undefined) {\r\n\t\t\t\t\t\tif (!isNaN($1)) {\r\n\t\t\t\t\t\t\tc = String.fromCharCode(($1 == 160) ? 32 : $1);\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tc = $0;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn c;\r\n\t\t\t\t});\r\n\t};\r\n});\n",
    "define('app/util/app-utils',[\"app/core/app-jquery\",\"app/core/app-core\", \r\n        'app/util/app-number-format', 'app/util/app-xss-utils'], function ($, App, NumberFormat){\r\n\t\r\n\tvar DEFAULT_DATE_PATTERN = \"yyyy-MM-dd\";\r\n\t\r\n\tvar IDCARD1_PATTERN = /^[1-9]\\d{7}((0\\d)|(1[0-2]))(([0|1|2]\\d)|3[0-1])\\d{3}$/;\r\n\t\r\n\tvar IDCARD2_PATTERN = /^[1-9]\\d{5}[1-9]\\d{3}((0\\d)|(1[0-2]))(([0|1|2]\\d)|3[0-1])\\d{4}$/;\r\n\t\r\n\tvar _PrivateFuncs = {\r\n\t\t\t\"formatDateNum\":function(num,len){\r\n\t\t\t\tvar v = num.toString();\r\n\t\t\t\tif(v.length<len){\r\n\t\t\t\t\tvar tmp = [len-v.length];\r\n\t\t\t\t\tfor(var i=0;i<tmp.length;i++){\r\n\t\t\t\t\t\ttmp[i] = \"0\";\r\n\t\t\t\t\t}\r\n\t\t\t\t\tv = tmp.join(\"\")+v;\r\n\t\t\t\t}else if(v.length>len){\r\n\t\t\t\t\tv = v.substring(v.length-len,v.length);\r\n\t\t\t\t}\r\n\t\t\t\treturn v;\r\n\t\t\t}\r\n\t};\r\n\t\r\n\t/**\r\n\t * 定义工具方法\r\n\t */\r\n\tApp.utils={\r\n\t\t/**\r\n\t\t * 过滤特殊的html和js标签\r\n\t\t */\r\n\t\thtmlencode: function(s){  \r\n\t\t    var div = document.createElement('div');  \r\n\t\t    div.appendChild(document.createTextNode(s));  \r\n\t\t    return div.innerHTML;  \r\n\t\t},\r\n\t\t/**\r\n\t\t * 收集指定html元素指定属性，生成选项对象\r\n\t\t */\r\n\t\tcollectOptions:function(el,opNames){\r\n\t\t\tif(!opNames||!jQuery.isArray(opNames))\r\n\t\t\t\treturn null;\r\n\t\t\t$el = $(el);\r\n\t\t\tvar options = {};\r\n\t\t\tfor(var i=0; i< opNames.length;i++){\r\n\t\t\t\tvar val,name = opNames[i];\r\n\t\t\t\tif(name.indexOf(\":\")>-1){\r\n\t\t\t\t\tvar t = name.split(\":\");\r\n\t\t\t\t\tval=$el.attr(t[0]);\r\n\t\t\t\t\tname=t[1];\r\n\t\t\t\t}else{\r\n\t\t\t\t\tval = $el.attr(name);\r\n\t\t\t\t}\r\n\t\t\t\tif(val){\r\n\t\t\t\t\tif(val.isInteger()){\r\n\t\t\t\t\t\toptions[name] = parseInt(val,10);\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\toptions[name] = val;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn options;\r\n\t\t},\r\n\t\t/**\r\n\t\t * 转换元素属性中的模板变量\r\n\t\t */\r\n\t\tevalElementAttr:function(el,attrName){\r\n\t\t\tvar $el = $(el),attr=attrName||\"href\";\r\n\t\t\tvar val = this.attr($el,attr);\r\n\t\t\tif(!val || val.isFinishedTm())\r\n\t\t\t\treturn val;\r\n\t\t\tval = val.evalTemplate(el);\r\n\t\t\treturn val;\r\n\t\t},\r\n\t\t\r\n\t\t/**\r\n\t\t * 取得当前元素的指定属性值包括val text html属性\r\n\t\t */\r\n\t\tattr:function(el,attr){\r\n\t\t\tif(!attr)\r\n\t\t\t\treturn null;\r\n\t\t\treturn attr=='text'?$(el).text():(attr=='html'?$(el).html():(attr=='val'||attr=='value'?$(el).val():$(el).attr(attr)));\r\n\t\t},\r\n\t\t/**\r\n\t\t * 格式化消息串\r\n\t\t */\r\n\t\tformat:function(msg,args){\r\n\t\t\targs = args || [];\r\n\t\t\tvar result = msg;\r\n\t\t\tfor (var i = 0; i < args.length; i++){\r\n\t\t\t\tresult = result.replace(new RegExp(\"\\\\{\" + i + \"\\\\}\", \"g\"), args[i]);\r\n\t\t\t}\r\n\t\t\treturn result;\r\n\t\t},\r\n\t\t/**\r\n\t\t * 获取传入日期的月份范围，月份的第一天到最后一天\r\n\t\t * @param date\r\n\t\t * @result {begin,end}\r\n\t\t */\r\n\t\tgetMonthRange: function(date){\r\n\t\t\tvar year = date.getFullYear()\r\n\t\t\t\t,month = date.getMonth()\r\n\t\t\t\t,days = new Date(year, month + 1, 0).getDate()\r\n\t\t\t\t,begin = new Date(year,month,1)\r\n\t\t\t\t,end = new Date(year,month,days); \r\n\t\t\treturn {begin:begin,end:end};\r\n\t\t},\r\n\t\t/**\r\n\t\t * 获取传入年度的范围，年度的第一天到最后一天\r\n\t\t * @param year\r\n\t\t * @result {begin,end}\r\n\t\t */\r\n\t\tgetYearRange: function(year){\r\n\t\t\tvar begin = new Date(year,0,1)\r\n\t\t\t\t,end = new Date(year,11,31); \r\n\t\t\treturn {begin:begin,end:end};\r\n\t\t},\r\n\t\t/**\r\n\t\t * 获取传入日期所在季度的范围，季度第一天和最后一天\r\n\t\t * @param date\r\n\t\t * @returns {string} begin,end\r\n\t\t */\r\n\t\tgetSeasonRange: function(date){\r\n\t\t\tvar year = date.getFullYear()\r\n\t\t\t\t,month = date.getMonth()\r\n\t\t\t\t,season = getMonth_Season(month + 1)\r\n\t\t\t\t,firstMonth = 0\r\n\t\t\t\t,lastMonth = 0;\r\n\t\t\tswitch (season) {\r\n\t\t\tcase 1:\r\n\t\t\t\tfirstMonth = 1;\r\n\t\t\t\tlastMonth = 3;\r\n\t\t\t\tbreak;\r\n\t\t\tcase 2:\r\n\t\t\t\tfirstMonth = 4;\r\n\t\t\t\tlastMonth = 6;\r\n\t\t\t\tbreak;\r\n\t\t\tcase 3:\r\n\t\t\t\tfirstMonth = 7;\r\n\t\t\t\tlastMonth = 9;\r\n\t\t\t\tbreak;\r\n\t\t\tcase 4:\r\n\t\t\t\tfirstMonth = 10;\r\n\t\t\t\tlastMonth = 12;\r\n\t\t\t\tbreak;\r\n\t\t\tdefault:\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t\tvar lastDate = new Date(year, lastMonth, 0).getDate()\r\n\t\t\t\t,begin = new Date(year, firstMonth - 1, 1)\r\n\t\t\t\t,end = new Date(year, lastMonth - 1, lastDate);\r\n\t\t\treturn {begin:begin,end:end};\r\n\t\t\t/**\r\n\t\t\t * 返回当前的日期为第几季度\r\n\t\t\t * @param date\r\n\t\t\t * @returns {Number}\r\n\t\t\t */\r\n\t\t\tfunction getMonth_Season(month){\r\n\t\t\t\tvar result = 0;\r\n\t\t\t\tif(month <= 3){\r\n\t\t\t\t\tresult = 1;\r\n\t\t\t\t}else if(month <= 6){\r\n\t\t\t\t\tresult = 2;\r\n\t\t\t\t}else if(month <= 9){\r\n\t\t\t\t\tresult = 3;\r\n\t\t\t\t}else if(month <= 12){\r\n\t\t\t\t\tresult = 4;\r\n\t\t\t\t}\r\n\t\t\t\treturn result;\r\n\t\t\t}\r\n\t\t},\r\n\t\t/**\r\n\t\t * 三位一个逗号隔开的展现，保留s为小数\r\n\t\t * @param s 数值\r\n\t\t * @param n 保留小数位(默认保留2位)\r\n\t\t * @returns {String}\r\n\t\t */\r\n\t\tformatNumber: function(s, n){\r\n\t\t\tif(n == undefined || typeof n != 'number'){\r\n\t\t\t\tn = 2;\r\n\t\t\t}\r\n\t\t\treturn NumberFormat.toThousands(s, n);\r\n\t\t},\r\n\t\t/**\r\n\t\t * 三位一个逗号隔开展现，最大保留x为小数\r\n\t\t * @param s 数值\r\n\t\t * @param x 最大保留小数位\r\n\t\t */\r\n\t\tformatNumberSpc: function(s, n){\r\n\t\t\treturn NumberFormat.toThousands(s, n, true);\r\n\t\t},\r\n\t\t/**\r\n\t\t * 转换为大写金额\r\n\t\t * @param n 数值\r\n\t\t * @returns {String}\r\n\t\t */\r\n\t\tformatChinese: function(n){\r\n\t\t\treturn NumberFormat.toChinese(n);\r\n\t\t},\r\n\t\t/**\r\n\t\t * 解析一个字符串变成Date对象\r\n\t\t * @param str\r\n\t\t * @param pattern\r\n\t\t * @returns {Date}\r\n\t\t */\r\n\t\t\"parseDate\" : function(str,pattern){\r\n\t\t\tif(!str){\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tif(!pattern){\r\n\t\t\t\tpattern = DEFAULT_DATE_PATTERN;\r\n\t\t\t}\r\n\t\t\tvar tmp = [],nms = [];\r\n\t\t\tvar r = pattern.replace(/[y|M|d|H|m|s]+/g,function($0){\r\n\t\t\t\ttmp.push($0);\r\n\t\t\t\treturn \"(\\\\d+)\";\r\n\t\t\t});\r\n\t\t\tvar reg = new RegExp(r,\"g\");\r\n\t\t\tif(!reg.test(str)){\r\n\t\t\t\talert(\"解析日期时间出错\");\r\n\t\t\t\treturn  null;\r\n\t\t\t}\r\n\t\t\tstr.replace(reg,function(){\r\n\t\t\t\tnms = $.makeArray(arguments).slice(1,tmp.length+1);\r\n\t\t\t});\r\n\t\t\tvar date = new Date();\r\n\t\t\tfor(var i=0;i<tmp.length;i++){\r\n\t\t\t\tvar k = tmp[i];\r\n\t\t\t\tvar n = parseInt(nms[i],10);\r\n\t\t\t\tswitch(k.charAt(0)){\r\n\t\t\t\t\tcase 'y':{date.setFullYear(n);break;}\r\n\t\t\t\t\tcase 'M':{date.setMonth(n-1);break;}\r\n\t\t\t\t\tcase 'd':{date.setDate(n);break;}\r\n\t\t\t\t\tcase 'H':{date.setHours(n);break;}\r\n\t\t\t\t\tcase 'm':{date.setMinutes(n);break;}\r\n\t\t\t\t\tcase 's':{date.setSeconds(n);break;}\r\n\t\t\t\t\tcase 'S':{date.setMilliseconds(n);break;}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn date;\r\n\t\t},\r\n\t\t\r\n\t\t/**\r\n\t\t * 格式化Date\r\n\t\t * @param {date} date\r\n\t\t * @param {string} pattern\r\n\t\t * @return {string}\r\n\t\t */\r\n\t\t\"formatDate\" : function(date,pattern){\r\n\t\t\tif(!date){\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tif(!pattern){\r\n\t\t\t\tpattern = DEFAULT_DATE_PATTERN;\r\n\t\t\t}\r\n\t\t\tvar result = pattern.replace(/[y|M|d|H|m|s]+/g,function($0){\r\n\t\t\t\tvar value=\"\",len = $0.length,c=$0.charAt(0);\r\n\t\t\t\tswitch(c){\r\n\t\t\t\t\tcase 'y':{value = date.getFullYear();break;}\r\n\t\t\t\t\tcase 'M':{value = date.getMonth()+1;break;}\r\n\t\t\t\t\tcase 'd':{value = date.getDate();break;}\r\n\t\t\t\t\tcase 'H':{value = date.getHours();break;}\r\n\t\t\t\t\tcase 'm':{value = date.getMinutes();break;}\r\n\t\t\t\t\tcase 's':{value = date.getSeconds();break;}\r\n\t\t\t\t\tcase 'S':{value = date.getMilliseconds();break;}\r\n\t\t\t\t}\r\n\t\t\t\treturn _PrivateFuncs.formatDateNum(value,len);\r\n\t\t\t});\r\n\t\t\treturn result;\r\n\t\t},\r\n\t\t/**\r\n\t\t * 是否是身份证\r\n\t\t */\r\n\t\t\"isIDCard\":function(idCard){\r\n\t\t\treturn /^((1[1-5])|(2[1-3])|(3[1-7])|(4[1-6])|(5[0-4])|(6[1-5])|71|(8[12])|91)\\d{4}((19\\d{2}(0[13-9]|1[012])(0[1-9]|[12]\\d|30))|(19\\d{2}(0[13578]|1[02])31)|(19\\d{2}02(0[1-9]|1\\d|2[0-8]))|(19([13579][26]|[2468][048]|0[48])0229))\\d{3}(\\d|X|x)?$/.test(idCard);\r\n\t\t},\r\n\t\t/**\r\n\t\t * 判断是否是正整数\r\n\t\t * @param {string}\r\n\t\t * @returns {Boolean}\r\n\t\t */\r\n\t\t\"isPlusInteger\" : function(str){\r\n\t\t\t//包括零\r\n\t\t\treturn /^(0|[1-9][0-9]*)$/.test(str) && str.length<11;\r\n\t\t},\r\n\t\t/**\r\n\t\t * 判断是否是座机号码\r\n\t\t * @param {string}phoneNum\r\n\t\t * @return {boolean}\r\n\t\t */\r\n\t\t\"isPhone\":function (phoneNum){\r\n\t\t\treturn /^(\\d{3,4}-?)?[1-9]\\d{6,7}([-|转]\\d{2,4})?$/.test(phoneNum);\r\n\t\t\t//return (new RegExp(/^((\\(\\d{3}\\))|(\\d{3}\\-))?(\\(0\\d{2,3}\\)|0\\d{2,3}-)?[1-9]\\d{6,7}$/)).test(phoneNum);\r\n\t\t},\r\n\t\t/**\r\n\t\t * 是否是手机号码\r\n\t\t */\r\n\t\t\"isMobile\":function (mobileNum){\r\n\t\t\treturn (new RegExp(/^((\\(\\d{3}\\))|(\\d{3}\\-))?1[358]\\d{9}$/)).test(mobileNum);\r\n\t\t},\r\n\t\t/**\r\n\t\t * 是否是邮件\r\n\t\t */\r\n\t\t\"isMail\" : function (mail){\r\n\t\t\treturn (new RegExp(/^\\w+((-\\w+)|(\\.\\w+))*\\@[A-Za-z0-9]+((\\.|-)[A-Za-z0-9]+)*\\.[A-Za-z0-9]+$/)).test(mail);\r\n\t\t},\r\n\t\t/**\r\n\t\t * 是否是URL\r\n\t\t */\r\n\t\t\"isURL\":function (u){\r\n\t\t\treturn (new RegExp(/^http:\\/\\/[A-Za-z0-9]+\\.[A-Za-z0-9]+[\\/=\\?%\\-&_~`@[\\]\\':+!]*([^<>\\\"\\\"])*$/)).test(u);\r\n\t\t},\r\n\t\t/**\r\n\t\t * 是否是邮编\r\n\t\t */\r\n\t\t\"isZipCode\":function (zipCode){\r\n\t\t\treturn (new RegExp(/^[1-9]\\d{5}$/)).test(zipCode);\r\n\t\t},\r\n\t\t//校验只能是数字\r\n\t\t\"isDigits\" : function(field) {\r\n\t\t\treturn (new RegExp(/^[0-9]*$/)).test(field)&& field.length<=32;\r\n\t\t},\r\n        /**\r\n\t\t *\r\n\t\t * @param {array|function}\r\n\t\t * @description 快速排序\r\n\t\t *\r\n         */\r\n\t\tsort:function (array,fn) {\r\n\t\t\tvar len = array.length;\r\n\t\t\tif(len<=1){\r\n\t\t\t\treturn array;\r\n\t\t\t}\r\n\t\t\tvar middleIndex = Math.floor(len/2);\r\n\t\t\tvar middleVal = array[middleIndex];\r\n\t\t\tvar leftArray = [],rightArray = [];\r\n\t\t\t$(array).each(function (index,item) {\r\n                var r = fn(middleVal,item);\r\n\t\t\t\tif(r>=1){\r\n\t\t\t\t\tleftArray.push(item);\r\n\t\t\t\t}else if(r<0){\r\n                   \trightArray.push(item);\r\n\t\t\t\t}else if(r==0&&index>middleIndex){\r\n                    rightArray.push(item);\r\n\t\t\t\t}else if(r==0&&index<middleIndex){\r\n                    leftArray.push(item);\r\n                }\r\n            })\r\n\t\t\treturn App.utils.sort(leftArray,fn).concat(middleVal,App.utils.sort(rightArray,fn));\r\n        }\r\n\t};\r\n\r\n\r\n\r\n\t/**\r\n\t * 扩展jQuery匹配表达式\r\n\t */\r\n\tfunction innerTextExactMatch(elem, text) {\r\n\t\treturn (elem.textContent || elem.innerText || $(elem).text() || '').toLowerCase() === (text || '').toLowerCase();\r\n\t}\r\n\t\r\n\t$.expr[':'].innerTextExactMatch = $.expr.createPseudo?\r\n\t\t$.expr.createPseudo(function (text) {\r\n\t\t\treturn function (elem) {\r\n\t\t\t\treturn innerTextExactMatch(elem, text);\r\n\t\t\t};\r\n\t\t}) :\r\n\t\tfunction (elem, i, match) {\r\n\t\t\treturn innerTextExactMatch(elem, match[3]);\r\n\t};\r\n\t/**\r\n\t * 获取字符串长度(英文占1个字符，中文汉字占2个字符)\r\n\t */\r\n\tString.prototype.gblen = function(){    \r\n\t    var len = 0;    \r\n\t    for (var i=0; i<this.length; i++) {    \r\n\t        if (this.charCodeAt(i)>127 || this.charCodeAt(i)==94) {    \r\n\t             len += 2;    \r\n\t         } else {    \r\n\t             len ++;    \r\n\t         }    \r\n\t     }    \r\n\t    return len;    \r\n\t}\r\n\tApp.NumberFormat = NumberFormat;\r\n\tApp.utils.addTreeBtn = function(node, btn){\r\n\t\tvar nodeId = node.tId\r\n\t\t\t,btnId = nodeId + '_' +btn.id;\r\n\t\tif ($('#' + btnId).length>0) return;\r\n\t\tvar $btn = $('<span class=\"button ' + btn.icon + '\" id=\"' + \r\n\t\t\t\tbtnId + '\" title=\"' + btn.title +\r\n\t\t\t\t'\"></span>'); \r\n\t\t$btn.on('click', function(e){\r\n\t\t\tbtn.handler(node);\r\n\t\t\te.stopPropagation();\r\n\t\t});\r\n\t\t$('#' + nodeId + '_span').after($btn);\r\n\t};\r\n\treturn App.utils;\r\n});\n",
    "/**\r\n * @class JsonResult\r\n * <p>此类封装服务调用返回信息</p>\r\n * @constructor\r\n * @param {Object} src JSON格式的源数据\r\n * @param {Object} onlyData 仅含数据(没有调用结果等信息)\r\n * @return {XY.data.JsonResult} 创建的对象\r\n */\r\ndefine('app/data/app-json-result',[\"jquery\"],function($){\r\nvar JsonResult = function(src, onlyData) {\r\n\tvar o = null, status = null;\r\n\r\n\tif ($.type(src) === \"string\") {\r\n\t\to = $.parseJSON(src);\r\n\t} else if ($.isPlainObject(src) && src.responseText) {\r\n\t\to = $.parseJSON(src.responseText);\r\n\t} else {\r\n\t\to = src;\r\n\t}\r\n\r\n\tif (onlyData) {\r\n\t\tstatus = {code : JsonResult.SUCCESS, message : null};\r\n\t} else {\r\n\t\tstatus={code:o.statusCode,message:o.message}\r\n\t\t\r\n\t}\r\n\r\n\t//private\r\n\t//TODO : 不需要暴露这些属性\r\n\tthis.code = parseInt(status.code, 10);\r\n\tthis.message = status.message\r\n\tthis.translator=o[\"translator\"];\r\n\tthis.translateBodys=o[\"translateBodys\"];\r\n\tthis.data = null;\r\n\r\n\t/*\r\n\t * 读取数据部分\r\n\t * 1.如果 onlyData == true, 则整个对象就是数据\r\n\t *   否则认为对象中的 result 属性为数据\r\n\t * 2.上述所得数据可能为对象，也可能为基本类型的数据\r\n\t */\r\n\tvar data = onlyData ? o : o.data;\r\n\tif ($.isPlainObject(data)) {\r\n\t\tthis.data = {};\r\n\t\t$.extend(this.data, data);\r\n\t} else {\r\n\t\tthis.data = data;\r\n\t}\r\n};\r\n\r\nJsonResult.prototype = {\r\n\r\n\t/**\r\n\t * 返回运行结果代码\r\n\t * @return {Number} 代码\r\n\t */\r\n\tgetCode : function(){\r\n\t\treturn this.code;\r\n\t},\r\n\r\n\t/**\r\n\t * 返回运行结果消息\r\n\t * @return {String} 消息\r\n\t */\r\n\tgetMessage : function(){\r\n\t\treturn this.message;\r\n\t},\r\n\r\n\t/**\r\n\t * 返回原始数据\r\n\t * @param {String} name 属性名，支持多级(a.b.c)\r\n\t * @return {Object} 对象中对应的属性\r\n\t */\r\n\tgetRawData : function(name){\r\n\t\tvar o = this.data;\r\n\r\n\t\t// o 为基本类型时, 应该直接返回\r\n\t\tif ($.isPlainObject(o) && (name!=\"\"&&name!=null&&name!=undefined)) {\r\n\t\t\tvar d = name.split(\".\"),\r\n\t\t\t    len = d.length;\r\n\r\n\t\t\tfor (var i = 0; i < len; i++) {\r\n\t\t\t\to = o[d[i]];\r\n\t\t\t\tif (o === null || o === undefined) break;\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t\treturn o;\r\n\t},\r\n\r\n\t/**\r\n\t * 返回有类型的数据\r\n\t * 如果没有定义类型，则返回原始数据\r\n\t * @param {String} name 属性名，支持多级(a.b.c)\r\n\t * @return {Object} 对象中对应的属性\r\n\t */\r\n\tgetData : function(name){\r\n\t\tvar data = this.getRawData(name);\r\n\r\n\t\tif ($.isPlainObject(data)) {\r\n\t\t\tif (data[\"totalPage\"]){\r\n\t\t\t\tdata[\"translator\"]=this.translator;\r\n\t\t\t\tdata[\"dicts\"]=this.translateBodys;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn data;\r\n\t}\r\n\r\n};\r\n/**\r\n * 服务调用返回值 : 成功\r\n * @property SUCCESS\r\n * @type {Number}\r\n */\r\nJsonResult.SUCCESS = 200;\r\n/**\r\n * 服务调用返回值 : 失败\r\n * @property FAILURE\r\n * @type {Number}\r\n */\r\nJsonResult.FAILURE = -1;\r\n/**\r\n * 服务调用返回值 : 警告\r\n * @property WARN\r\n * @type {Number}\r\n */\r\nJsonResult.WARN = 1;\r\n/**\r\n * 服务调用返回值 : 未认证\r\n * @property UN_AUTHED\r\n * @type {Number}\r\n */\r\nJsonResult.UN_AUTHED = -999;\r\nreturn JsonResult;\r\n});\r\n\n",
    "/**\r\n * 针对jquery增加ajax的扩展\r\n */\r\ndefine('app/data/app-ajax',[\"app/core/app-jquery\",\"app/core/app-core\",\"app/util/app-utils\",\r\n        \"app/widgets/window/app-messager\",\"app/core/app-options\",\r\n        \"app/data/app-json-result\"],\r\n        function($,$A,$utils,$messager,$options,JsonResult) {\r\n\t\r\n\t\r\n\tvar _ajaxProgressBar = $(\"#_ajaxProgressBar\");\r\n\t\r\n\tif (_ajaxProgressBar.length==0){\r\n\t\r\n\t\t$(\"body\").prepend('<div id=\"_ajaxProgressBar\" class=\"ajaxProgressBar\" style=\"display:none;\"><!--<div class=\"ajaxProgressBarText\">数据处理中..</div>--></div>')\r\n\t\t_ajaxProgressBar= $(\"#_ajaxProgressBar\");\r\n\t}\r\n\t\r\n\t$(document).ajaxStart(function(){\r\n\t\t_ajaxProgressBar.show();\r\n\t}).ajaxStop(function(){\r\n\t\t_ajaxProgressBar.hide();\r\n\t}).ajaxError(function(){\r\n\t\t_ajaxProgressBar.hide();\r\n\t})\r\n\t$A.loadLogin=function(){\r\n\t\t\r\n\t\t//\twindow.location.href=\"main.do\";\r\n\t\t\twindow.location.reload();\t\r\n\t\t}\r\n\t\r\n\t/**\r\n\t * 回调用方法列表\r\n\t */\r\n\tfunction _callback(funcs,json,$toggle){\r\n\t\tif(funcs == null)\r\n\t\t\treturn;\r\n\t\tif(typeof funcs === \"string\")\r\n\t\t\tfuncs = funcs.split(\",\");\r\n\t\tif(!$.isArray(funcs))\r\n\t\t\treturn\r\n\t\tfor(var i = 0; i < funcs.length; i++){\r\n\t\t\tif($.isFunction($A.ajax.callbackFunctions[funcs[i]])){\r\n\t\t\t\t$A.ajax.callbackFunctions[funcs[i]](json,$toggle);\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\t/**\r\n\t * ajax之前调用的方法\r\n\t * @param $toggle 触发元素\r\n\t * @param options ajax选项\r\n\t * @returns 是否可以继续调用\r\n\t */\r\n\tfunction _breforeCall(options){\r\n\t\tvar $toggle=options.toggle\r\n\t\t\t,funcs = options.beforeCall||($toggle?$toggle.attr(\"ajax-before\"):null);\r\n\t\tif(!funcs)\r\n\t\t\treturn true;\r\n\t\tfuncs = funcs.split(\",\");\r\n\t\tvar i = options['_beforeCallIndex']||0;\r\n\t\tfor(;i < funcs.length; i++){\r\n\t\t\tvar fn = $A.ajax.beforeCallFunctions[funcs[i]];\r\n\t\t\toptions['_beforeCallIndex'] = i+1;\r\n\t\t\tif(!$.isFunction(fn))\r\n\t\t\t\tcontinue;\r\n\t\t\tif(!fn(options))\r\n\t\t\t\treturn false;\r\n\t\t}\r\n\t\treturn true;\r\n\t}\r\n\t\r\n/**\r\n\t * 表单提交后的方法处理\r\n\t */\r\n\tvar that = {\r\n\t\tcallbackFunctions:{\r\n\t\t\t/**\r\n\t\t\t * 刷新表格对象\r\n\t\t\t */\r\n\t\t\trefreshTable:function(json,options){\r\n\t\t\t\tvar $toggle = options.toggle;\r\n\t\t\t\tif($toggle && $toggle.attr(\"refreshTable\")){\r\n\t\t\t\t\t$A($toggle.attr(\"refreshTable\")).bsgrid(\"reload\");\r\n\t\t\t\t}else if(options[\"refreshTable\"]){\r\n\t\t\t\t\t$A(options[\"refreshTable\"]).bsgrid(\"reload\");\r\n\t\t\t\t}else{\r\n\t\t\t\t\t$A(\".jqgrid\").bsgrid(\"reload\");\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t/**\r\n\t\t\t * 刷新表格对象\r\n\t\t\t */\r\n\t\t\trefreshMainDetail:function(json,options){\r\n\t\t\t\tvar params = json.params;\r\n\t\t\t\tif(!params)\r\n\t\t\t\t\treturn;\r\n\t\t\t\t$(params).each(function(key,value){\r\n\t\t\t\t\tvar $ctrl = $A(key);\r\n\t\t\t\t\tif($ctrl.length == 0)\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\tif($ctrl.isForm()){\r\n\t\t\t\t\t\t$ctrl.refreshFormData(value);\r\n\t\t\t\t\t}else if($ctrl.isGrid()){\r\n\t\t\t\t\t\tif(!value)\r\n\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\tif(options.submitMode==\"all\"){\r\n\t\t\t\t\t\t\t$ctrl.bsgrid(\"refreshAllData\",value);\r\n\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\t$ctrl.bsgrid(\"refreshEditData\",value);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\t/**\r\n\t\t\t * 通过ajax方式刷新当前页面\r\n\t\t\t */\r\n\t\t\trefreshAjaxPage:function(json,options){\r\n\t\t\t\tvar $toggle = options.toggle;\r\n\t\t\t\tvar box = json.refreshBox||options['refreshBox']||$toggle.attr('refreshBox')||$toggle.attr('data-target')\r\n\t\t\t\t\t,$box=$(box)\r\n\t\t\t\t\t,url = json.url||options['refreshUrl']||$toggle.attr('refreshUrl')||$box.attr(\"url\");\r\n\t\t\t\tif(url && $box.length>0)\r\n\t\t\t\t\t$box.htmlAJAX({url:url});\r\n\t\t\t},\r\n\t\t\t/**\r\n\t\t\t * 刷新当前页面\r\n\t\t\t */\r\n\t\t\trefreshPage:function(json,options){\r\n\t\t\t\twindow.location.reload();\r\n\t\t\t},\r\n\t\t\t/**\r\n\t\t\t * 刷新数据加载器\r\n\t\t\t */\r\n\t\t\treloadDataLoader:function(json,options){\r\n\t\t\t\tvar $toggle = options.toggle;\r\n\t\t\t\tvar target = json.dataloader||options[\"dataloader\"]||($toggle?$toggle.attr(\"dataloader\"):null);\r\n\t\t\t\t$(target).dataloader(\"load\");\r\n\t\t\t},\r\n\t\t\t/**\r\n\t\t\t * 跳转到其他页面\r\n\t\t\t */\r\n\t\t\tforwardUrl:function(json,options){\r\n\t\t\t\tvar $toggle = options.toggle;\r\n\t\t\t\tvar url=json.forwardUrl||options[\"forwardUrl\"]||($toggle?$toggle.attr(\"forwardUrl\"):null);\r\n\t\t\t\tif(window.location.href == url)\r\n\t\t\t\t\treturn;\r\n\t\t\t\twindow.location=url;\r\n\t\t\t},\r\n\t\t\t/**\r\n\t\t\t * 关闭自己\r\n\t\t\t */\r\n\t\t\tcloseSelf:function(json,options){\r\n\t\t\t\tvar $dialog = $A.getCurrentDialog();\r\n\t\t\t\tif($dialog&&$dialog.length>0){\r\n\t\t\t\t\t$A.dialog.close($dialog);\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\t$A.navTab.closeCurrentTab();\r\n\t\t\t},\r\n\t\t\t/**\r\n\t\t\t * 切换页签\r\n\t\t\t */\r\n\t\t\tswitchTab:function(json,options){\r\n\t\t\t\tvar tabId=json.tabId||options.tabId;\r\n\t\t\t\tvar $tab = $(\"#\"+tabId,$A.getContainer());\r\n\t\t\t\t$tab.tab(\"show\");\r\n\t\t\t},\r\n\t\t\t/**\r\n\t\t\t * 回调方法\r\n\t\t\t */\r\n\t\t\tcallMethod:function(json,options){\r\n\t\t\t\tvar $toggle = options.toggle;\r\n\t\t\t\tvar method = json.method||options[\"callMethod\"]||($toggle?$toggle.attr(\"callMethod\"):null);\r\n\t\t\t\tif(method){\r\n\t\t\t\t\tmethod = decodeURIComponent(method);\r\n\t\t\t\t\tsetTimeout(new Function(methodName), 100);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\tbeforeCallFunctions:{\r\n\t\t\t/**\r\n\t\t\t * 收集数据并作为参数\r\n\t\t\t * @param options ajax调用选项\r\n\t\t\t */\r\n\t\t\tcollectData:function(options){\r\n\t\t\t\tvar $toggle=options.toggle\r\n\t\t\t\t\t,finder = options.collectFinder||($toggle?$toggle.attr(\"collectFinder\"):null)\r\n\t\t\t\t\t,valAttr = options.collectAttr||($toggle?$toggle.attr(\"collectAttr\"):'value')\r\n\t\t\t\t\t,param = options.collectParam||($toggle?$toggle.attr(\"collectParam\"):'checkId')\r\n\t\t\t\t\t,box = options.collectBox||($toggle?$toggle.attr(\"collectBox\"):document)\r\n\t\t\t\t\t,$box = $(box);\r\n\t\t\t\tif(!finder)\r\n\t\t\t\t\treturn true;\r\n\t\t\t\tvar paramVal = [];\r\n\t\t\t\t$(finder,$box).each(function(){\r\n\t\t\t\t\tparamVal.push($(this).attr(valAttr));\r\n\t\t\t\t});\r\n\t\t\t\tif(paramVal.length>0){\r\n\t\t\t\t\tif(paramVal.length == 1)\r\n\t\t\t\t\t\tparamVal = paramVal[0];\r\n\t\t\t\t\tvar data = options['data'];\r\n\t\t\t\t\tif(!data){\r\n\t\t\t\t\t\tdata = options['data'] = {};\r\n\t\t\t\t\t}\r\n\t\t\t\t\tdata[param]=paramVal;\r\n\t\t\t\t}\r\n\t\t\t\treturn true;\r\n\t\t\t},\r\n\t\t\t/**\r\n\t\t\t * 调用前确认提示\r\n\t\t\t */\r\n\t\t\tconfirmPrompt:function(options){\r\n\t\t\t\tvar $toggle=options.toggle\r\n\t\t\t\t\t,prompt=options.confirm||($toggle?$toggle.attr(\"confirm\"):null);\r\n\t\t\t\tif (prompt) {\r\n\t\t\t\t\tprompt = prompt.evalTemplate($toggle);\r\n\t\t\t\t\tif(!prompt)\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t$messager.confirm(prompt, {\r\n\t\t\t\t\t\tokCall: function(ok){\r\n\t\t\t\t\t\t\treturn ok&&$A.ajax.ajaxCall(options);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\t\t},\r\n\t\t/**\r\n\t\t * ajax成功后调用的方法\r\n\t\t */\r\n\t\tsuccessCall:function(json,options){\r\n\t\t\t/*that.ajaxSuccess(json);\r\n\t\t\tif (json.statusCode != null&&json.statusCode != $A.statusCode.ok)\r\n\t\t\t\treturn;\r\n\t\t\tvar $toggle = options.toggle;\r\n\t\t\t_callback(json.callbackType,json,options);\r\n\t\t\tvar cb = options.afterCall;\r\n\t\t\tif(cb){\r\n\t\t\t\t_callback(cb,json,options);\r\n\t\t\t}\r\n\t\t\tif($toggle && $toggle.length>0)\r\n\t\t\t\t_callback($toggle.attr(\"callback\"),json,options);\r\n\t\t\tif(options.callback){\r\n\t\t\t\toptions.callback(json,options);\r\n\t\t\t}*/\r\n\t\t},\r\n\t\t\r\n\t\trespToResult:function(src){\r\n\t    \tvar o=null;\r\n\t    \tvar reuslt\r\n\t    \tif ($.type(src) === \"string\") {\r\n\t    \t\ttry{\r\n\t    \t\t\t\r\n\t    \t\t o = $.parseJSON(src);\r\n\t    \t\t}catch(ex){\r\n\t    \t\t\to=src;\r\n\t    \t\t}\r\n\t    \t} else if ($.isPlainObject(src) && src.responseText) {\r\n\t    \t\ttry{\r\n\t    \t\to = $.parseJSON(src.responseText);\r\n\t    \t\t}catch(ex){\r\n\t    \t\t\ttry{\r\n\t    \t\t\to = $A.jsonEval(src.responseText);\r\n\t    \t\t\t\r\n\t    \t\t\t\r\n\t    \t\t\t}\r\n\t    \t\t\tcatch(ex){\r\n\t    \t\t\t\to=src.responseText;\r\n\t    \t\t\t}\r\n\t    \t\t}\r\n\t    \t} else {\r\n\t    \t\to = src;\r\n\t    \t}\r\n\t    \tif (o && o[\"type\"]&&o[\"type\"]==\"__bosssoft\"){\r\n\t    \t\treuslt = new JsonResult(o);\r\n\t    \t}else{\r\n\t    \t\treuslt=o;\r\n\t    \t}\r\n\t    \treturn reuslt;\r\n\t    },\r\n\t\t/**\r\n\t\t * ajax 远程调用\r\n\t\t */\r\n\t\tajaxCall:function(config){\r\n\t\t\tvar _self=this;\r\n\t\t\tvar options = $.extend({\r\n\t\t\t\ttype:'POST',\r\n\t\t\t\tdataType:\"json\",\r\n\t\t\t\tcache: false,\r\n\t\t\t\tfailure : function(data,jr) {\r\n\t\t\t\t\t$messager.error(jr.getMessage());\r\n\t\t\t\t}\r\n\t\t\t},config);\r\n\t\t\t\r\n\t\t\tif (options.success || options.failure) {\r\n\t\t\t\tvar processSuccess = options.success||options.callback;\r\n\t\t\t\tvar processFailure = options.failure;\r\n                processSuccess = $.isFunction(processSuccess)?processSuccess:$.noop;\r\n                processFailure = $.isFunction(processFailure)?processFailure:$.noop;\r\n                options.success = function(resp, opts) {\r\n\t\t\t\t\t\r\n\t\t\t\t\ttry{\r\n\t\t\t\t\tvar json=_self.respToResult(resp);\r\n\t\t\t\t\t_self.ajaxSuccess(json, opts)\r\n\t\t\t\t\tif (json instanceof JsonResult){\r\n\t\t\t\t\t\tcode = json.getCode();\r\n\t\t\t\t\t\tmessage = json.getMessage();\r\n\t\t\t\t\t\tif (code === JsonResult.SUCCESS) {\r\n\t\t\t\t\t\t\tprocessSuccess(json.getData(),json, opts);\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tprocessFailure(json.getData(),json, opts);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\tprocessSuccess(json, opts);\r\n\t\t\t\t\t}\r\n\t\t\t\t\t}catch(ex){\r\n\t\t\t\t\t\tif (window.console){\r\n\t\t\t\t\t\t\twindow.console.log(ex);\r\n\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\t$messager.error('系统繁忙！请稍后重试...');\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tajaxDebugInfo(options, resp, opts);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tif (options.error) {\r\n\t\t\t\tvar processError=options.error;\r\n\t\t\t\toptions.error=function(xhr, ajaxOptions, thrownError, options){\r\n\t\t\t\t\t\tvar json=_self.respToResult(xhr);\r\n\t\t\t\t\t\tprocessError(json,xhr, ajaxOptions, thrownError, options)\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t}else{\r\n\t\t\t\toptions.error=that.ajaxError;\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tif(!_breforeCall(options))\r\n\t\t\t\treturn;\r\n\t\t\tif (options.data){\r\n\t\t\tif('object' == $.type(options)){//Mr.T 如果为对象 则将对象按照请求类型进行字符串拼接\r\n\t\t\t\tif((options.contentType && options.contentType.indexOf('application/json') > -1)){\r\n\t\t\t\t\toptions.data = JSON.stringify(options.data);\r\n\t\t\t\t}else{\r\n\t\t\t\t\toptions.data = $.param(options.data, true);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t}\r\n\t\t\tvar result = $.ajax(options);\r\n\t\t\t//如果為同步代碼，验证返回是否\r\n\t\t\tif(options.async==false){\r\n\t\t\t\ttry{\r\n                    result = eval(result);\r\n                    if($.type(result)==='object'){\r\n                        result.statusCode&&$A.ajax.ajaxSuccess(result);\r\n                    }\r\n                }catch(e) {\r\n\t\t\t\t\t//TODO\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\t\t\treturn result;\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t * ajax访问错误处理\r\n\t\t */\r\n\t\tajaxError:function (xhr, ajaxOptions, thrownError, op){\r\n\t\t\tif(xhr.status==\"401\"){\r\n\t\t\t\t//$A.ajaxLogin();\r\n\t\t\t}else if(xhr.status==\"405\"){\r\n\t\t\t\t\r\n\t\t\t}else if(xhr.status==\"404\"){\r\n\t\t\t\t$messager.error(\"找不到对应的URL地址\");\r\n\t\t\t}\r\n\t\t\telse{\r\n\t\t\t\tvar json=that.respToResult(xhr);\r\n\t\t\t\tif (json instanceof JsonResult){\r\n\t\t\t\t\t$messager.error(json.getMessage());\r\n\t\t\t\t}else{\r\n\t\t\t\t\tvar message=json[\"message\"]||\"网络异常,请求出错!\"\r\n\t\t\t\t\t$messager.error(message);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t\t/**\r\n\t\t\t\t$messager.error(\"<div>Http status: \" + xhr.status + \" \" + xhr.statusText + \"</div>\" \r\n\t\t\t\t\t\t+ \"<div>ajaxOptions: \"+ajaxOptions + \"</div>\"\r\n\t\t\t\t\t\t+ \"<div>thrownError: \"+thrownError + \"</div>\"\r\n\t\t\t\t\t\t+ \"<div>\"+xhr.responseText+\"</div>\");\r\n\t\t\t\t\t\t**/\r\n//\t\t\t}else{\r\n//\t\t\t\t$messager.error(\"系统发生异常,请联系管理员\");\r\n//\t\t\t}\r\n\t\t\tif( this.errorHandle && $.isFunction(this.errorHandle)){\r\n\t\t\t\tthis.errorHandle();\r\n\t\t\t}\r\n\t\t},\r\n\t\t/**\r\n\t\t * ajax访问成功后的处理\r\n\t\t */\r\n\t\tajaxSuccess:function (json){\r\n\t\t\tif(json.statusCode == $A.statusCode.error || json.statusCode == $A.statusCode.internalError|| json.statusCode == $A.statusCode.notFound) {\r\n\t\t\t\tif(json.message)\r\n\t\t\t\t\t$messager.error(json.message);\r\n\t\t\t} else if (json.statusCode == $A.statusCode.timeout) {\r\n\t\t\t\t\r\n\t\t\t\t\t$messager.error(json.message, {okCall:$A.loadLogin});\r\n\t\t\t\r\n\t\t\t} else {\r\n\t\t\t\tif(json.message)\r\n\t\t\t\t\t$messager.correct(json.message);\r\n\t\t\t};\r\n\t\t}\r\n\t};\r\n\t$A.ajax = that;\r\n\t$.fn.extend({\r\n\t\t/**\r\n\t\t * 通过ajax请求向元素内部增加请求结果html\r\n\t\t * @url{string}请求的地址\r\n\t\t * @data{object}请求数据\r\n\t\t * @callback{function}回调方法\r\n\t\t */\r\n\t\tloadUrl: function(url,data,callback){\r\n\t\t\t$(this).htmlAJAX({url:url, data:data, callback:callback});\r\n\t\t},\r\n\t\t/**\r\n\t\t * 当前容器加载URL内容\r\n\t\t * @param options 加载选项\r\n\t\t * {\r\n\t\t * \t\ttype:请求方式POST/GET默认POST\r\n\t\t * \t\tcache:是否缓存true/false默认false \r\n\t\t * \t\tasync:是否异步true/false默认true\r\n\t\t * \t\tglobal:是否为全局请求(是否会触发ajaxStart和ajaxEnd的事件)默认为true\r\n\t\t * \t\tsuccess:请求成功时的方法处理\r\n\t\t * \t\terror:请求失败的方法处理\r\n\t\t * \t\toperator:加载内容后内容处理append/prepend/before/after/inner，默认设置为当前元素的内容\r\n\t\t * \t\tinit:是否进行界面初始化，默认为true\r\n\t\t * \t\thistory:true\r\n\t\t * }\r\n\t\t * \r\n\t\t */\r\n\t\tloadAppURL: function(options){\r\n\t\t\tvar $this = $(this);\r\n\t\t\t\r\n\t\t\tif ($.fn.xheditor) {\r\n\t\t\t\t$(\"textarea.editor\", $this).xheditor(false);\r\n\t\t\t}\r\n\t\t\tvar op = {\r\n\t\t\t\ttype:'POST',\r\n\t\t\t\tcache:false,\r\n\t\t\t\tasync:true,\r\n\t\t\t\tinit:true,\r\n\t\t\t\thistory:false,\r\n\t\t\t\ttitle:window.title,\r\n\t\t\t\t\r\n\t\t\t\tcomplete:function(response,flag,responses, responseHeaders ){\r\n\t\t\t\t\tif (response.status==\"404\"){\r\n\t\t\t\t\t\t$messager.error(\"找不到对应的URL地址\");\r\n\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\r\n\t\t\t\t},\r\n\t\t\t\tsuccess:function(response,flag,xhr){\r\n\t\t\t\t\tvar loadMask;\r\n\t\t\t\t\tif(op.history){\r\n\t\t\t\t\t\tvar title=this.title;\r\n\t\t\t\t\t\tvar url=this.url;\r\n\t\t\t\t\t\tHistory.pushState({title:title,url:url},title,url);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tvar json = $A.jsonEval(response);\r\n\t\t\t\t\tif (json.statusCode==$A.statusCode.timeout){\r\n\t\t\t\t\t\t/*session超时处理*/\r\n\t\t\t\t\t\tif(json.message) \r\n\t\t\t\t\t\t\t$messager.error(json.message, {okCall:$A.loadLogin});\r\n\t\t\t\t\t\telse\r\n\t\t\t\t\t\t\t$A.loadLogin();\r\n\t\t\t\t\t} else if (json.statusCode==$A.statusCode.error|| json.statusCode == $A.statusCode.internalError|| json.statusCode == $A.statusCode.notFound){\r\n\t\t\t\t\t\t/*错误处理*/\r\n\t\t\t\t\t\tif(json.message)\r\n\t\t\t\t\t\t\t$messager.error(json);\r\n\t\t\t\t\t\t\tif (options.error&&$.isFunction(options.error)){\r\n\t\t\t\t\t\r\n\t\t\t\t\t\t\toptions.error.call(this,arguments)\r\n\t\t\t\t\t\r\n\t\t\t\t\t}\r\n\t\t\t\t\t} else {\r\n//\t\t\t\t\t\tvar funcId = xhr.getResponseHeader(\"funcid\");\r\n//\t\t\t\t\t\tvar menuId = xhr.getResponseHeader(\"menuid\");\r\n//\t\t\t\t\t\tvar subSysId = xhr.getResponseHeader(\"subSysId\");\r\n//\t\t\t\t\t\tif(funcId&&menuId){\r\n//\t\t\t\t\t\t\t$this.data(\"__funcid\",funcId);\r\n//\t\t\t\t\t\t\t$this.data(\"__menuid\",menuId);\r\n//\t\t\t\t\t\t\t$this.data(\"__subsysid\",subSysId);\r\n//\t\t\t\t\t\t}\r\n\t\t\t\t\t\t$this.css('visibility','hidden');\r\n\t\t\t\t\t\tswitch(this.operator){\r\n\t\t\t\t\t\tcase \"append\":\r\n\t\t\t\t\t\t\t$this.append(response);\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\tcase \"prepend\":\r\n\t\t\t\t\t\t\t$this.prepend(response);\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\tcase \"before\":\r\n\t\t\t\t\t\t\t$this.before(response);\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\tcase \"after\":\r\n\t\t\t\t\t\t\t$this.after(response);\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\tcase \"replace\":\r\n\t\t\t\t\t\t\t$this=$this.replaceWith(response);\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\tdefault:\t\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tif(op.loading){\r\n\t\t\t\t\t\t    loadMask=$(\"<div class=\\\"loadingPage-mask\\\"></div>\");\r\n\t\t\t\t\t\t    $this.html(response)\r\n\t\t\t\t\t\t    loadMask.height( $this.innerHeight());\r\n\t\t\t\t\t    \tloadMask.width( $this.innerWidth());\r\n\t\t\t\t\t\t   \t$this.prepend(loadMask);\r\n\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\t $this.html(response)\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tif ($.isFunction(this.beforePageInit)){\r\n\t\t\t\t\t\t\t$A.resolveUiPageModel($this);\r\n\t\t\t\t\t\t\tthis.beforePageInit($this, model);\r\n\t\t\t\t\t\t}\r\n                        if(this.onPageLoad){\r\n                            $this.one($A.eventType.pageLoad,{\"pageLoadFunc\":this.onPageLoad,\"uiPageModel\":$this.data(\"uiPageModel\")},function(e){\r\n                                e.data[\"pageLoadFunc\"]($this.data(\"uiPageModel\"));\r\n                                if (loadMask){\r\n                                    loadMask.remove();\r\n                                }\r\n                                $this.css('visibility', '');\r\n                            });\r\n                        }else {\r\n                            $this.one($A.eventType.pageLoad, function () {\r\n                                if (loadMask) {\r\n                                    loadMask.remove();\r\n                                }\r\n                                $this.css('visibility', '');\r\n                            })\r\n                        }\r\n                        // 如果可能页面没js 执行速度回比较快，执行不到监听回调  $this.one($A.eventType.pageLoad\r\n                        if(options.init !==false){\r\n                            $this.initPageUI();\r\n                        }\r\n                        if ($.isFunction(this.callback)){\r\n\t\t\t\t\t\t\t//add by tw\r\n\t\t\t\t\t\t\tthis.callback(response,$this.data(\"uiPageModel\"));\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\t$this.fadeIn();\r\n\t\t\t\t},\r\n\t\t\t\terror:function (xhr, ajaxOptions, thrownError){\r\n\t\t\t\t\tif (options.error&&$.isFunction(options.error)){\r\n\t\t\t\t\t\r\n\t\t\t\t\t\t\toptions.error.call(this,arguments)\r\n\t\t\t\t\t\r\n\t\t\t\t\t}\r\n\t\t\t\t\t//that.ajaxError(xhr, ajaxOptions, thrownError);\r\n\t\t\t\t\tif(xhr.status==\"401\"){\r\n\t\t\t\t\t\t//$A.ajaxLogin();\r\n\t\t\t\t\t}else if(xhr.status==\"405\"){\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\tthis.success(xhr.responseText);\r\n\t\t\t\t\t\t$this.fadeIn();\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t};\r\n\t\t\top = $.extend(op,$options.ajax,options);\r\n\t\t\t//如果是ie，url进行中文 encodeURI\r\n\t\t\tif (!$.browser.webkit){\r\n\t\t\t\tif (op.url){\r\n\t\t\t\t\top.url=encodeURI(op.url)\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t$.ajax(op);\r\n\t\t},\r\n\t\tappendAJAX:function(options){\r\n\t\t\toptions.operator='append';\r\n\t\t\t$(this).loadAppURL(options);\r\n\t\t},\r\n\t\tprependAJAX:function(options){\r\n\t\t\toptions.operator='prepend';\r\n\t\t\t$(this).loadAppURL(options);\r\n\t\t},\r\n\t\tbreforeAJAX:function(options){\r\n\t\t\toptions.operator='before';\r\n\t\t\t$(this).loadAppURL(options);\r\n\t\t},\r\n\t\tafterAJAX:function(options){\r\n\t\t\toptions.operator='after';\r\n\t\t\t$(this).loadAppURL(options);\r\n\t\t},\r\n\t\treplaceAJAX:function(options){\r\n\t\t\toptions.operator='replace';\r\n\t\t\t$(this).loadAppURL(options);\r\n\t\t},\r\n\t\thtmlAJAX:function(options){\r\n\t\t\toptions.operator=null;\r\n\t\t\t$(this).loadAppURL(options);\r\n\t\t}\r\n\r\n\t});\r\n\t$(\"body\").on(\"click.data-api\",\"[ajax-toggle='ajax']\", function(event){\r\n\t\tevent.preventDefault();\r\n\t\tvar $this = $(this)\r\n\t\t\t,url = $utils.evalElementAttr($this);\r\n\t\tif (!url) {\r\n\t\t\treturn false;\r\n\t\t}\r\n\t\tthat.ajaxCall({url:url,toggle:$this});\r\n\t});\r\n\treturn that;\r\n\t/**\r\n\t * ajax请求回执处理异常信息打印\r\n\t */\r\n\tfunction ajaxDebugInfo(options, resp, status){\r\n\t\tif(window.debugModel){\r\n\t\t\tvar msg = ['请求地址：' + options.url];\r\n\t\t\tmsg.push('请求处理状态：' + status);\r\n\t\t\tmsg.push('请求处理结果：' + resp);\r\n\t\t\talert(msg.join('。'));\r\n\t\t}\r\n\t}\r\n});\n",
    ";\ndefine(\"app/data/app-result\", function(){});\n\n",
    "define('app/widgets/app-download',[],function() {\r\n\t\r\n\tvar result = {\r\n\t\t\t\r\n\t\t\tdownload:function(url,params,_blank){\r\n\t\t\t\tvar $form = $(\"<form style=\\\"display:none;\\\"></form>\").attr(\"action\",url).attr(\"method\",\"post\");\r\n\t\t\t\tif(_blank){\r\n\t\t\t\t\t$form.attr(\"target\",\"_blank\");\r\n\t\t\t\t}\r\n\t\t\t\tfor(var key in params){\r\n\t\t\t\t\t$(\"<input type=\\\"hidden\\\" />\").attr(\"name\",key).val(params[key]).appendTo($form);\r\n\t\t\t\t}\r\n\t\t\t\t$(\"body\").append($form);\r\n\t\t\t\t$form.submit();\r\n\t\t\t\t$form.remove();\r\n\t\t\t}\r\n\t\t\t\r\n\t};\r\n\treturn result;\r\n\t\r\n});\n",
    "/**\r\n * 按钮控件\r\n * \r\n * @author sjq\r\n */\r\ndefine('app/widgets/button/app-button',[\"app/core/app-jquery\", \"app/core/app-core\", \"app/core/app-options\",\"app/widgets/app-widget\"], function($, $A,\r\n\t\tOptions,Widget) {\r\n    /**\r\n     *\r\n     * @class\r\n     * @extends Widget\r\n     * @classdesc 按钮控件。\r\n     * @name Button\r\n     * @example\r\n     * //html\r\n     *  //<a class=\"app-button\" id=\"btn1\">btn1</a>\r\n     * //javascript\r\n     *  //var btn1=$(\"#btn1\").button({})\r\n     *\r\n     */\r\n\tvar Button = Widget.extend({\r\n\t\t\t\tinitialize : function(options) {\r\n\t\t\t\t\tif (!options) {\r\n\t\t\t\t\t\toptions = {};\r\n\t\t\t\t\t}\r\n\t\t\t\t\tButton.superclass.initialize.call(this, options);\r\n\t\t\t\t\tthis.attrs=$.extend({},\r\n\t\t\t\t\t\t\t\t\t\tOptions.appDefaults.Button, \r\n\t\t\t\t\t\t\t\t\t\tthis.parseOptions(),options);\r\n\t\t\t\t\t/*$.data(el, \"linkbutton\", {\r\n\t\t\t\t\t\t\t\toptions : $.extend({},\r\n\t\t\t\t\t\t\t\t\t\tOptions.appDefaults.Button, options,\r\n\t\t\t\t\t\t\t\t\t\tthis.parseOptions())\r\n\t\t\t\t\t\t\t});*/\r\n\t\t\t\t  this.createButton();\r\n\r\n\t\t\t\t},\r\n\t\t\t\tparseOptions : function() {\r\n\t\t\t\t\tvar t = $(this.element);\r\n\t\t\t\t\treturn $.extend({}, t.parseOptions(this.element, [\"id\",\r\n\t\t\t\t\t\t\t\t\t\t\t\"iconCls\", \"iconAlign\", \"group\", {\r\n\t\t\t\t\t\t\t\t\t\t\t\tplain : \"boolean\",\r\n\t\t\t\t\t\t\t\t\t\t\t\ttoggle : \"boolean\",\r\n\t\t\t\t\t\t\t\t\t\t\t\tselected : \"boolean\"\r\n\t\t\t\t\t\t\t\t\t\t\t}]), {\r\n\t\t\t\t\t\t\t\tdisabled : (t.attr(\"disabled\")\r\n\t\t\t\t\t\t\t\t\t\t? true\r\n\t\t\t\t\t\t\t\t\t\t: undefined),\r\n\t\t\t\t\t\t\t\ttext : $.trim(t.html()),\r\n\t\t\t\t\t\t\t\ticonCls : (t.attr(\"icon\") || t.attr(\"iconCls\"))\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t},\r\n\t\t\t\tcreateButton : function() {\r\n\t\t\t\t\tvar _self=this;\r\n\t\t\t\t\tvar opts =this.attrs;\r\n\t\t\t\t\tvar target=this.element\r\n\t\t\t\t\tvar t = $(target).empty();\r\n\t\t\t\t\tt.addClass('l-btn').removeClass('l-btn-plain l-btn-selected l-btn-plain-selected');\r\n\t\t\t\t\tt.removeClass('l-btn-small l-btn-medium l-btn-large').addClass('l-btn-' + opts.size);\r\n\t\t\t\t\tif (opts.plain) {\r\n\t\t\t\t\t\tt.addClass('l-btn-plain')\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (opts.selected) {\r\n\t\t\t\t\t\tt.addClass(opts.plain\r\n\t\t\t\t\t\t\t\t? 'l-btn-selected l-btn-plain-selected'\r\n\t\t\t\t\t\t\t\t: 'l-btn-selected');\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (opts.disabled) {\r\n\t\t\t\t\t\t$(target).attr(\"disabled\", opts.disabled);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tt.attr('group', opts.group || '');\r\n\t\t\t\t\tt.attr('id', opts.id || '');\r\n\r\n\t\t\t\t\tvar inner = $('<span class=\"l-btn-left\"></span>')\r\n\t\t\t\t\t\t\t.appendTo(t);\r\n\t\t\t\t\tif (opts.text) {\r\n\t\t\t\t\t\t$('<span class=\"l-btn-text\"></span>').html(opts.text)\r\n\t\t\t\t\t\t\t\t.appendTo(inner);\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\t$('<span class=\"l-btn-text l-btn-empty\">&nbsp;</span>')\r\n\t\t\t\t\t\t\t\t.appendTo(inner);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (opts.iconCls) {\r\n\t\t\t\t\t\t$('<i class=\"l-btn-icon\">&nbsp;</i>')\r\n\t\t\t\t\t\t\t\t.addClass(opts.iconCls).appendTo(inner);\r\n\t\t\t\t\t\tinner.addClass('l-btn-icon-' + opts.iconAlign);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (opts.onClick) {\r\n\t\t\t\t\t\t_self.on(\"click\",opts.onClick,target);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tt.unbind('.linkbutton').bind('focus.linkbutton',\r\n\t\t\t\t\t\t\tfunction() {\r\n\t\t\t\t\t\t\t\tif (!opts.disabled) {\r\n\t\t\t\t\t\t\t\t\t$(this).addClass('l-btn-focus');\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}).bind('blur.linkbutton', function() {\r\n\t\t\t\t\t\t\t\t$(this).removeClass('l-btn-focus');\r\n\t\t\t\t\t\t\t}).bind('click.linkbutton', function() {\r\n\t\t\t\t\t\tif (!opts.disabled) {\r\n\t\t\t\t\t\t\tif (opts.toggle) {\r\n\t\t\t\t\t\t\t\tif (opts.selected) {\r\n\t\t\t\t\t\t\t\t\t$(this).linkbutton('unselect');\r\n\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\t$(this).linkbutton('select');\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t_self.trigger(\"click\");\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t// return false;\r\n\t\t\t\t\t\t});\r\n\r\n\t\t\t\t\tthis._setSelected(opts.selected)\r\n\t\t\t\t\tthis._setDisabled(opts.disabled);\r\n\t\t\t\t},\r\n\t\t\t\toptions : function() {\r\n\t\t\t\t\treturn this.attrs;\r\n\t\t\t\t},\r\n\t\t\t\t_setDisabled : function(disabled) {\r\n\t\t\t\t\tvar target=this.element;\r\n\t\t\t\t\tvar opts =this.attrs;\r\n\t\t\t\t\t$(target)\r\n\t\t\t\t\t\t\t.removeClass(\"l-btn-disabled l-btn-plain-disabled\");\r\n\t\t\t\t\tif (disabled) {\r\n\t\t\t\t\t\topts.disabled = true;\r\n\t\t\t\t\t\tvar href = $(target).attr(\"href\");\r\n\t\t\t\t\t\tif (href) {\r\n\t\t\t\t\t\t\tthis.href = href;\r\n\t\t\t\t\t\t\t$(target).attr(\"href\", \"javascript:void(0)\");\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t/*if (target.onclick) {\r\n\t\t\t\t\t\t\tthis.onclick = target.onclick;\r\n\t\t\t\t\t\t\ttarget.onclick = null;\r\n\t\t\t\t\t\t}*/\r\n\t\t\t\t\t\topts.plain\r\n\t\t\t\t\t\t\t\t? $(target)\r\n\t\t\t\t\t\t\t\t\t\t.addClass(\"l-btn-disabled l-btn-plain-disabled\")\r\n\t\t\t\t\t\t\t\t: $(target).addClass(\"l-btn-disabled\");\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\topts.disabled = false;\r\n\t\t\t\t\t\tif (this.href) {\r\n\t\t\t\t\t\t\t$(target).attr(\"href\", this.href);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t/*\tif (this.onclick) {\r\n\t\t\t\t\t\t\ttarget.onclick = this.onclick;\r\n\t\t\t\t\t\t};\r\n\t\t\t\t\t};*/\r\n\t\t\t\t\t$(target).attr(\"disabled\", opts.disabled);\r\n\t\t\t\t}},\r\n                /**\r\n                 * 启用按钮\r\n                 * @memberof Button\r\n                 * @example\r\n                 * // html <a class=\"app-button\" id=\"btn1\">btn1</a>\r\n                 * //$(\"#btn1\").button(\"enable\");\r\n                 */\r\n\t\t\t\tenable : function(jq) {\r\n\t\t\t\t\tthis._setDisabled(false);\r\n\t\t\t\t},\r\n                /**\r\n                 * 禁用按钮\r\n                 * @memberof Button\r\n                 * @example\r\n                 * // html <a class=\"app-button\" id=\"btn1\">btn1</a>\r\n                 * //$(\"#btn1\").button(\"disable\");\r\n                 */\r\n\t\t\t\tdisable : function(jq) {\r\n\t\t\t\t\tthis._setDisabled(true);\r\n\t\t\t\t},\r\n                /**\r\n                 * 选中按钮，当设置group有效\r\n                 * @memberof Button\r\n                 * @example\r\n                 * // html <a class=\"app-button\" id=\"btn1\">btn1</a>\r\n                 * //$(\"#btn1\").button(\"select\");\r\n                 */\r\n\t\t\t\tselect : function() {\r\n\t\t\t\t\t this._setSelected(true);\r\n\t\t\t\t\r\n\t\t\t\t},\r\n                /**\r\n                 *\r\n                 * 取消按钮选中，当设置group有效\r\n                 * @memberof Button\r\n                 * @example\r\n                 * // html <a class=\"app-button\" id=\"btn1\">btn1</a>\r\n                 * //$(\"#btn1\").button(\"select\");\r\n                 */\r\n\t\t\t\tunselect : function() {\r\n\t\t\t\t\tthis._setSelected(this, false);\r\n\t\t\t\t},\r\n\t\t\t\t\r\n\t\t\t\t_setSelected : function(selected) {\r\n\t\t\t\t\tvar opts = this.attrs;\r\n\t\t\t\t\tvar target=this.element;\r\n\t\t\t\t\tif (selected) {\r\n\t\t\t\t\t\tif (opts.group) {\r\n\t\t\t\t\t\t\t$('a.l-btn[group=\"' + opts.group + '\"]').each(\r\n\t\t\t\t\t\t\t\t\tfunction() {\r\n\t\t\t\t\t\t\t\t\t\tvar o = $(this).linkbutton('options');\r\n\t\t\t\t\t\t\t\t\t\tif (o.toggle) {\r\n\t\t\t\t\t\t\t\t\t\t\t$(this)\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t.removeClass('l-btn-selected l-btn-plain-selected');\r\n\t\t\t\t\t\t\t\t\t\t\to.selected = false;\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t$(target).addClass(opts.plain\r\n\t\t\t\t\t\t\t\t? 'l-btn-selected l-btn-plain-selected'\r\n\t\t\t\t\t\t\t\t: 'l-btn-selected');\r\n\t\t\t\t\t\topts.selected = true;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tif (!opts.group) {\r\n\t\t\t\t\t\t\t$(target)\r\n\t\t\t\t\t\t\t\t\t.removeClass('l-btn-selected l-btn-plain-selected');\r\n\t\t\t\t\t\t\topts.selected = false;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t$.fn.button = function(option, param) {\r\n\t\tvar methodReturn = undefined;\r\n\t\r\n\t\tvar $set = this.each(function() {\r\n\t\t\t\t\tvar $this = $(this);\r\n\t\t\t\t\tvar data = $this.data('button');\r\n\t\t\t\t\tvar state = $this.data('linkbutton');\r\n\t\t\t\t\tvar options = typeof option === 'object' && option;\r\n\t\t\t\t\tif (!data) {\r\n\t\t\t\t\t\toptions=$.extend(options,{element:this});\r\n\t\t\t\t\t\t$this.data('button', (data = new Button(options)));\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t$(this).removeAttr('disabled');\r\n\t\t\t\t\t\t/*$(this).bind('_resize', function(e, force) {\r\n\t\t\t\t\t\t\t\t\tif ($(this).hasClass('app-fluid')\r\n\t\t\t\t\t\t\t\t\t\t\t|| force) {\r\n\t\t\t\t\t\t\t\t\t\tdata.setSize(this);\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t\t\t\t});*/\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\t$.extend(data.attrs, options);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (typeof option === 'string')\r\n\t\t\t\t\t\tmethodReturn = data[option]($this,param);\r\n\t\t\t\t});\r\n\t\treturn (methodReturn === undefined) ? $set : methodReturn;\r\n\r\n\t};\r\n\r\n\t$.fn.button.Constructor = Button;\r\n\treturn Button;\r\n\r\n});\n",
    "/**\r\n * 数值控件--继承Textbox\r\n * @author Mr.T\r\n */\r\ndefine('app/widgets/form/app-number',['app/core/app-jquery', 'app/core/app-core', 'app/core/app-options', 'app/widgets/form/app-textbox',\r\n        'app/util/app-utils'], function($, App, Options, Textbox, Utils) {\r\n\t'use strict';\r\n\t/**\r\n\t * @class \r\n\t * @classdesc 数值框\r\n\t * <span class=\"type-signature static\">extend</span>textbox\r\n\t * @see {@link textbox-class} number继承至textbox\r\n\t * @name number-class\r\n\t * @desc 数值框的初始化方法\r\n\t * @param {DOMElement} input 要渲染的input组件\r\n\t * @param {Object} options 组件的选项设置 \r\n\t * @author Mr.T\r\n\t * @example &lt;input &#9;class=\"app-number\" />\r\n\t * @example $('#demo').number({});\r\n\t */\r\n\tvar Number = Textbox.extend({\r\n\t\tinitialize: function(input, options) {\r\n\t\t\tif(!options){\r\n\t\t\t\toptions = {};\r\n\t\t\t}\r\n\t\t\toptions._ = $.extend({}, Options.appDefaults.Number, options._); \r\n\t\t\tNumber.superclass.initialize.call(this, input, options);\r\n\t\t\tthis._init();\r\n\t\t},\r\n\t\t/**\r\n\t\t * 初始化\r\n\t\t */\r\n\t\t_init: function(){\r\n\t\t\tvar s = this.setting\r\n\t\t\t\t,us = this.customSetting;\r\n\t\t\tif(s.formatter == 'chinese'){\r\n\t\t\t\tif(us.prefix === undefined){\r\n\t\t\t\t\ts.prefix = '';\r\n\t\t\t\t}\r\n\t\t\t\tif(us.suffix === undefined){\r\n\t\t\t\t\ts.suffix = '';\r\n\t\t\t\t}\r\n\t\t\t\tif(us.precision === undefined){\r\n\t\t\t\t\ts.precision = 2;\r\n\t\t\t\t}\r\n\t\t\t}else if(this.setting.formatter == 'thousand'){\r\n\t\t\t\tif(us.precision === undefined){\r\n\t\t\t\t\ts.precision = 2;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tthis._editable();\r\n\t\t\tthis._registEvents();\r\n\t\t\tvar val = this.getValue();\r\n\t\t\tif(val != ''){\r\n\t\t\t\tvar text = this._formatValue(val); \r\n\t\t\t\tthis.setText(text);\r\n\t\t\t}\r\n\t\t},\r\n\t\t/**\r\n\t\t * 覆盖父类的绑定方法\r\n\t\t */\r\n\t\t_textChangeEvent: function(){},\r\n\t\t/**\r\n\t\t * 获取数值框的数值\r\n\t\t * @returns {Number} Number 隐藏值\r\n\t\t * @example alert('隐藏值:' + $('#demo').number('getNumber'));\r\n\t\t * @memberof number-class\r\n\t\t * @instance\r\n\t\t */\r\n\t\tgetNumber: function(){\r\n\t\t\treturn parseFloat(this.$input.val());\r\n\t\t},\r\n\t\t/**\r\n\t\t * <span class=\"type-signature static\">override</span>\r\n\t\t * 设置金额\r\n\t\t * @param {Number} val 金额\r\n\t\t * @param {boolean} [noTrigger] 是否触发change\r\n\t\t * @see textbox-class#setValue\r\n\t\t * @todo 设置隐藏值，并根据隐藏值尝试设置显示值\r\n\t\t * @example $('#demo').number('setValue',123.1);\r\n\t\t * @memberof number-class\r\n\t\t * @instance\r\n\t\t */\r\n\t\tsetValue: function(val, noTrigger){\r\n\t\t\tif(typeof(val) == 'string' && val == ''){\r\n\t\t\t\tthis.setText('');\r\n\t\t\t\tthis._setValue('', noTrigger);\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tvar value = this._parseNumber(val);\r\n\t\t\tif(!isNaN(value)){\r\n\t\t\t\tif(this.setting.min !== null && value < this.setting.min){\r\n\t\t\t\t\tthis.setValue(this.getValue(), true);\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tif(this.setting.max !== null && value > this.setting.max){\r\n\t\t\t\t\tthis.setValue(this.getValue(), true);\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tvar text = this._formatValue(value);\r\n\t\t\t\tthis.setText(text);\r\n\t\t\t\tif(value == 0 && this.setting.zeroIsNull){\r\n\t\t\t\t\tvalue = '';\r\n\t\t\t\t}\r\n\t\t\t\tthis._setValue(value, noTrigger);\r\n\t\t\t}else{\r\n\t\t\t\tthis.setText('');\r\n\t\t\t\tthis._setValue('', true);\r\n\t\t\t}\r\n\t\t},\r\n\t\t/**\r\n\t\t * 字符串转为数值\r\n\t\t * @param val\r\n\t\t * @returns {Number} [valid] 如果格式化无法转为数值，则返回undefined\r\n\t\t */\r\n\t\t_parseNumber: function(val){\r\n\t\t\tif(isNaN(val)){\r\n\t\t\t\tif(val){\r\n\t\t\t\t\tval = val.replaceAll(',','');\r\n\t\t\t\t\tif(isNaN(val)){\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\t\t\t\t}else{\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tvar s = this.setting\r\n\t\t\t\t,valStr = new String(val);\r\n\t\t\tif(s.varlen){\r\n\t\t\t\tvar r = valStr.split('.')[1];\r\n\t\t\t\tif(r && r.length > s.precision){\r\n\t\t\t\t\treturn parseFloat(valStr).toFixed(s.precision);\r\n\t\t\t\t}else{\r\n\t\t\t\t\treturn parseFloat(valStr);\r\n\t\t\t\t}\r\n\t\t\t}else{\r\n\t\t\t\treturn parseFloat(valStr).toFixed(s.precision);\r\n\t\t\t}\r\n\t\t},\r\n\t\t/**\r\n\t\t * 格式化显示值\r\n\t\t * @param {Number} val\r\n\t\t * @returns {String} result\r\n\t\t */\r\n\t\t_formatValue: function(val){\r\n\t\t\tif(val == 0 && this.setting.zeroIsNull){\r\n\t\t\t\treturn '';\r\n\t\t\t}\r\n\t\t\tvar s = this.setting\r\n\t\t\t\t,format = s.formatter\r\n\t\t\t\t,result = val;\r\n\t\t\tif(!format){\r\n\t\t\t\tresult = this._parseNumber(val);\r\n\t\t\t}else if($.isFunction(format)){\r\n\t\t\t\tresult = format(val);\r\n\t\t\t}else if(typeof(format) == 'string'){\r\n\t\t\t\tif(format == 'chinese'){\r\n\t\t\t\t\tresult = Utils.formatChinese(val);\r\n\t\t\t\t}else if(format == 'thousand'){\r\n\t\t\t\t\tresult = Utils.formatNumber(val, s.precision);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif(s.prefix){\r\n\t\t\t\tresult = s.prefix + result;\r\n\t\t\t}\r\n\t\t\tif(s.suffix){\r\n\t\t\t\tresult = result + s.suffix;\r\n\t\t\t}\r\n\t\t\treturn result;\r\n\t\t},\r\n\t\t/**\r\n\t\t * 注册控件事件\r\n\t\t */\r\n\t\t_registEvents: function(){\r\n\t\t\tvar number = this;\r\n\t\t\tthis.$text.on('blur.number.api',function(e){\r\n\t\t\t\tnumber.setValue(this.value);\r\n\t\t\t});\r\n\t\t\tthis.$text.on('focus.number.api',function(e){\r\n\t\t\t\tthis.value = number.getValue();\r\n\t\t\t\tif(this.value == 0 && number.setting.zeroIsNull){\r\n\t\t\t\t\tthis.value = '';\r\n\t\t\t\t}else{\r\n\t\t\t\t\tthis.select();\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\t});\r\n\t$.fn.number = function (option, value) {\r\n\t\tvar methodReturn = undefined\r\n\t\t\t,args = arguments\r\n\t\t\t,componentName = 'number';\r\n\t\tthis.each(function () {\r\n\t\t\tvar $this = $(this);\r\n\t\t\tif(!$this.is('input')){\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\t\t\tvar component = App.getComponent($this, componentName);\r\n\t\t\tif(typeof option === 'string'){\r\n\t\t\t\ttry{\r\n\t\t\t\t\tvar methodArgs = Array.prototype.slice.call(args, 1);\r\n\t\t\t\t\tmethodReturn = App.componentMethodApply(component, option, methodArgs);\r\n\t\t\t\t}catch(e){\r\n\t\t\t\t\tApp.throwCompMethodError($this, componentName, option, e);\r\n\t\t\t\t}\r\n\t\t\t}else{\r\n\t\t\t\tif(!component){\r\n\t\t\t\t\tcomponent = new Number(this, option);\r\n\t\t\t\t\t$this.data(componentName, component);\r\n\t\t\t\t}else{\r\n\t\t\t\t\tApp.throwCompInitError($this, componentName);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\t\treturn methodReturn;\r\n\t};\r\n\r\n\treturn Number;\r\n});\n",
    "/**\r\n * 金额控件--继承Textbox\r\n * @author Mr.T\r\n */\r\ndefine('app/widgets/form/app-money',['app/core/app-jquery', 'app/core/app-core', 'app/core/app-options', 'app/widgets/form/app-number',\r\n        'app/util/app-utils'], function($, App, Options, Number, Utils) {\r\n\t'use strict';\r\n\t\r\n\t/**\r\n\t * @class \r\n\t * @classdesc 金额框\r\n\t * <span class=\"type-signature static\">extend</span>number\r\n\t * @see {@link number-class} money继承至number\r\n\t * @name money-class\r\n\t * @desc 金额框的初始化方法\r\n\t * @param {DOMElement} input 要渲染的input组件\r\n\t * @param {Object} options 组件的选项设置 \r\n\t * @author Mr.T\r\n\t * @example &lt;input &#9;class=\"app-money\" />\r\n\t * @example $('#demo').money({});\r\n\t */\r\n\tvar Money = Number.extend({\r\n\t\tinitialize: function (input, options) {\r\n\t\t\tif(!options){\r\n\t\t\t\toptions = {};\r\n\t\t\t}\r\n\t\t\toptions._ = Options.appDefaults.Money;\r\n\t\t\tMoney.superclass.initialize.call(this, input, options);\r\n\t\t}\t\r\n\t});\r\n\t$.fn.money = function (option, value) {\r\n\t\tvar methodReturn = undefined\r\n\t\t\t,args = arguments\r\n\t\t\t,componentName = 'money';\r\n\t\tthis.each(function () {\r\n\t\t\tvar $this = $(this);\r\n\t\t\tif(!$this.is('input')){\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\t\t\tvar component = App.getComponent($this, componentName);\r\n\t\t\tif(typeof option === 'string'){\r\n\t\t\t\ttry{\r\n\t\t\t\t\tvar methodArgs = Array.prototype.slice.call(args, 1);\r\n\t\t\t\t\tmethodReturn = App.componentMethodApply(component, option, methodArgs);\r\n\t\t\t\t}catch(e){\r\n\t\t\t\t\tApp.throwCompMethodError($this, componentName, option, e);\r\n\t\t\t\t}\r\n\t\t\t}else{\r\n\t\t\t\tif(!component){\r\n\t\t\t\t\tcomponent = new Money(this, option);\r\n\t\t\t\t\t$this.data(componentName, component);\r\n\t\t\t\t}else{\r\n\t\t\t\t\tApp.throwCompInitError($this, componentName);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\t\treturn methodReturn;\r\n\t};\r\n\treturn Money;\r\n});\n",
    "/**\r\n * 下拉面板的工具类\r\n * @author Mr.T\r\n */\r\ndefine('app/widgets/drag/app-droppanel',['app/core/app-jquery', 'app/core/app-core', 'app/core/app-options', 'app/core/app-class'],\r\n\t\tfunction($, App, Options, Class) {\r\n\t\r\n\t'use strict';\r\n\t\r\n\tvar DropPanel = Class.create({\r\n\t\t/**\r\n\t\t * 关闭当前显示的面板\r\n\t\t */\r\n\t\t_closeVisiblePanel: function(){\r\n\t\t\tvar $panels = $.$appPanelContainer.find('>.drop-panel:visible,>.datetimepicker:visible');\r\n\t\t\tif($panels.length == 0){\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tvar $parentPanel = null;\r\n\t\t\tif(event){\r\n\t\t\t\tvar curElement = event.currentTarget;\r\n\t\t\t\tif(!curElement){\r\n\t\t\t\t\tcurElement = event.srcElement;\r\n\t\t\t\t}\r\n\t\t\t\t$parentPanel = $(curElement).closest('.drop-panel:visible,.datetimepicker:visible');\r\n\t\t\t}\r\n\t\t\t$panels.each(function(i, item){\r\n\t\t\t\tvar $panel = $(item)\r\n\t\t\t\tif($parentPanel && $panel.is($parentPanel)){\r\n\t\t\t\t\treturn true;\r\n\t\t\t\t}\r\n\t\t\t\tvar context = $panel.data('context');\r\n\t\t\t\tif(context){\r\n\t\t\t\t\tcontext.hidePanel();\r\n\t\t\t\t}else{\r\n\t\t\t\t\t$panel.hide();\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t},\r\n\t\t/** \r\n\t\t * 获取下拉面板距离页面的top值\r\n\t\t * @param {Jquery} [$dropPanel] 下拉面板，当下拉面板为空，则引用组件本身的$dropPanel\r\n\t\t * @returns {Number} top 返回距离上边的高度Number\r\n\t\t */\r\n\t\t_getDropPanelTop: function($dropPanel){\r\n\t\t\tif($dropPanel === undefined){\r\n\t\t\t\t$dropPanel = this.$dropPanel;\r\n\t\t\t}\r\n\t\t\tvar oriTop = this.$element.offset().top\r\n\t\t\t\t,height = this.$element.outerHeight()\r\n\t\t\t\t,panelHeight = parseInt($dropPanel.css('height'))\r\n\t\t\t\t,bottomLine = oriTop + height + panelHeight;\r\n\t\t\tif(bottomLine < getPageHeight()){\r\n\t\t\t\treturn oriTop + height - 1;\r\n\t\t\t}else{\r\n\t\t\t\treturn oriTop - panelHeight + 1;\r\n\t\t\t}\r\n\t\t},\r\n\t\t/** \r\n\t\t * 获取下拉面板距离页面的top值\r\n\t\t * @param {Jquery} [$dropPanel] 下拉面板，当下拉面板为空，则引用组件本身的$dropPanel\r\n\t\t * @returns {Number} top 返回距离上边的高度Number\r\n\t\t */\r\n\t\t_getDropPanelLeft: function($dropPanel){\r\n\t\t\tif($dropPanel === undefined){\r\n\t\t\t\t$dropPanel = this.$dropPanel;\r\n\t\t\t}\r\n\t\t\tvar oriLeft = this.$element.offset().left\r\n\t\t\t\t,width = $dropPanel.outerWidth()\r\n\t\t\t\t,rightLine = oriLeft + width;\r\n\t\t\tif(rightLine <= getPageWidth()){\r\n\t\t\t\treturn oriLeft;\r\n\t\t\t}else{\r\n\t\t\t\tvar eleWidth = this.$element.outerWidth();\r\n\t\t\t\treturn oriLeft - width + eleWidth + 1;\r\n\t\t\t}\r\n\t\t},\r\n\t\t/** \r\n\t\t * 下拉面板是显示在组件上方还是下方\r\n\t\t * @param {Jquery} [$dropPanel] 下拉面板，当下拉面板为空，则引用组件本身的$dropPanel\r\n\t\t * @returns {Boolean} isUpside true为上拉\r\n\t\t */\r\n\t\t_isDropPanelUpside: function($element, $dropPanel){\r\n\t\t\tif($element === undefined){\r\n\t\t\t\t$element = this.$element;\r\n\t\t\t}\r\n\t\t\tif($dropPanel === undefined){\r\n\t\t\t\t$dropPanel = this.$dropPanel;\r\n\t\t\t}\r\n\t\t\tvar oriTop = $element.offset().top\r\n\t\t\t\t,height = $element.outerHeight()\r\n\t\t\t\t,panelHeight = parseInt($dropPanel.css('height'))\r\n\t\t\t\t,bottomLine = oriTop + height + panelHeight;\r\n\t\t\tif(bottomLine < getPageHeight()){\r\n\t\t\t\treturn true;\r\n\t\t\t}else{\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t},\r\n\t\t/**\r\n\t\t * 面板可以调整宽度高度\r\n\t\t */\r\n\t\t_onPanelResize: function(){\r\n\t\t\tvar combo = this;\r\n\t\t\tthis.$dropPanel.on('mousemove.combo.api', $.proxy(this._r_$targetMouseMove, this));\r\n\t\t\tthis.$dropPanel.on('mousedown.combo.api', function(e){\r\n                e.stopPropagation();\r\n                if(combo._r_dir){\r\n                    combo._r_startDrag(e);\r\n                }\r\n            });\r\n\t\t},\r\n\t\t/**\r\n\t\t * 面板自动隐藏\r\n\t\t */\r\n\t\t_onPanelFadeOut: function(){\r\n\t\t\tif(!this.setting.fadeout){\r\n            \treturn;\r\n            }\r\n\t\t\tthis.$dropPanel.on('mouseleave.combo.api', $.proxy(this._fadeOut$DropPanel, this));\r\n\t\t\tthis.$dropPanel.on('mouseenter.combo.api', $.proxy(this._fadeIn$DropPanel, this));\r\n\t\t\tthis.$element.on('mouseout.combo.api', $.proxy(this._fadeOut$DropPanel, this));\r\n\t\t\tthis.$element.on('mouseover.combo.api', $.proxy(this._fadeIn$DropPanel, this));\r\n\t\t},\r\n\t\t/**\r\n\t\t * 渐渐隐藏\r\n\t\t */\r\n\t\t_fadeOut$DropPanel: function(){\r\n\t\t\tif(!this._mainDivIsVisiable()){\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tvar opacity = 10\r\n\t\t\t\t,combo = this;\r\n\t\t\tthis._hideTimer = setInterval(function(){\r\n\t\t\t\topacity -= 1;\r\n\t\t\t\tcombo.$dropPanel.css('opacity', 0.1*opacity);\r\n\t\t\t\tif(opacity == 0){\r\n\t\t\t\t\tclearInterval(combo._hideTimer);\r\n\t\t\t\t\tcombo.hidePanel();\r\n\t\t\t\t\tcombo.$dropPanel.css('opacity', 1);\r\n\t\t\t\t}\r\n\t\t\t}, 130);\r\n\t\t},\r\n\t\t/**\r\n\t\t * 停止渐渐隐藏 并显示\r\n\t\t */\r\n\t\t_fadeIn$DropPanel: function(){\r\n\t\t\tthis.$dropPanel.css('opacity', 1)\r\n\t\t\tclearInterval(this._hideTimer);\r\n\t\t},\r\n\t\t/**\r\n\t\t * 设置鼠标的样式\r\n\t\t */\r\n\t\t_r_$targetMouseMove: function(e){\r\n\t\t\tthis._r_dir = this._r_getDragDir(e);\r\n            if(this._r_dir)\r\n                this.$dropPanel.css('cursor', this._r_dir + '-resize');\r\n            else if(this.$dropPanel.css('cursor').indexOf('-resize') > 0)\r\n                this.$dropPanel.css('cursor', 'default');\r\n\t\t},\r\n\t\t/**\r\n\t\t * 获取鼠标要进行拉动的方向\r\n\t\t */\r\n\t\t_r_getDragDir: function(e){\r\n            var dir = ''\r\n\t\t\t\t,xy = this.$dropPanel.offset()\r\n\t\t\t\t,width = this.$dropPanel.outerWidth()\r\n\t\t\t\t,height = this.$dropPanel.outerHeight()\r\n\t\t\t\t,scope = 5\r\n\t\t\t\t,pageX = e.pageX || e.screenX\r\n\t\t\t\t,pageY = e.pageY || e.screenY;\r\n            if (pageY >= xy.top && pageY < xy.top + scope){\r\n                dir += 'n';\r\n            }else if (pageY <= xy.top + height && pageY > xy.top + height - scope){\r\n                dir += 's';\r\n            }\r\n            if (pageX >= xy.left && pageX < xy.left + scope){\r\n                dir += 'w';\r\n            }else if (pageX <= xy.left + width && pageX > xy.left + width - scope){\r\n                dir += 'e';\r\n            }\r\n            if ($.inArray(dir, this._r_getAllowDragDir()) != -1) return dir;\r\n            return '';\r\n\t\t},\r\n\t\t/**\r\n\t\t * 获取拖动大小的方向\r\n\t\t */\r\n\t\t_r_getAllowDragDir: function(){\r\n\t\t\tif(this.$dropPanel.offset().top > this.$text.offset().top){\r\n\t\t\t\treturn ['s', 'se', 'e'];\r\n\t\t\t}else{\r\n\t\t\t\treturn ['n', 'ne', 'e'];\r\n\t\t\t}\r\n\t\t},\r\n\t\t/**\r\n\t\t * 开始拖动大小\r\n\t\t */\r\n\t\t_r_startDrag: function(e){\r\n            this._r_create$proxy();\r\n            this.$resizeProxy.css({\r\n                left: this.$dropPanel.offset().left,\r\n                top: this.$dropPanel.offset().top,\r\n                position: 'absolute'\r\n            });\r\n            this._r_current = {\r\n                dir: this._r_dir,\r\n                left: this.$dropPanel.offset().left,\r\n                top: this.$dropPanel.offset().top,\r\n                startX: e.pageX || e.screenX,\r\n                startY: e.pageY || e.clientY,\r\n                width: this.$dropPanel.outerWidth(),\r\n                height: this.$dropPanel.outerHeight()\r\n            };\r\n\t\t\tvar that = this;\r\n            $(document).bind(\"selectstart.resizable\", function(){ return false; });\r\n            $(document).bind('mouseup.resizable', function(){\r\n                that._r_stop.apply(that, arguments);\r\n            });\r\n            $(document).bind('mousemove.resizable', function(){\r\n                that._r_drag.apply(that, arguments);\r\n            });\r\n            this.$resizeProxy.show();\r\n\t\t},\r\n\t\t/**\r\n\t\t * 生成一个代理拖动的层\r\n\t\t */\r\n\t\t_r_create$proxy: function(){\r\n            this.$resizeProxy = $('<div class=\"panel-resize-proxy\"></div>');\r\n            this.$resizeProxy.width(this.$dropPanel.outerWidth()).height(this.$dropPanel.outerHeight());\r\n            this.$resizeProxy.appendTo('body');\r\n\t\t},\r\n\t\t/**\r\n\t\t * 生成代理拖动的层\r\n\t\t */\r\n\t\t _r_remove$Proxy: function(){\r\n            if(this.$resizeProxy){\r\n                this.$resizeProxy.remove();\r\n                this.$resizeProxy = null;\r\n            }\r\n        },\r\n\t\t/**\r\n\t\t * 拖动时计算大小\r\n\t\t */\r\n\t\t_r_drag: function(e){\r\n            if(!this._r_current) return;\r\n            if(!this.$resizeProxy) return;\r\n            this.$resizeProxy.css('cursor', this._r_current.dir == '' ? 'default' : this._r_current.dir + '-resize');\r\n            var pageX = e.pageX || e.screenX\r\n\t\t\t\t,pageY = e.pageY || e.screenY;\r\n            this._r_current.diffX = pageX - this._r_current.startX;\r\n            this._r_current.diffY = pageY - this._r_current.startY;\r\n            this._r_applyResize(this.$resizeProxy);\r\n        },\r\n        /**\r\n         * 停止拖动，将大小应用到目标\r\n         */\r\n        _r_stop: function(e){\r\n            this._r_applyResize();\r\n            this._r_remove$Proxy();\r\n            $(document).unbind(\"selectstart.resizable\");\r\n            $(document).unbind('mousemove.resizable');\r\n            $(document).unbind('mouseup.resizable');\r\n            if(this._endResize){\r\n            \tthis._endResize();\r\n            }\r\n        },\r\n        /**\r\n         * 拖动改变的方向\r\n         */\r\n        _r_changeBy: {\r\n            t: ['n', 'ne', 'nw'],\r\n            l: ['w', 'sw', 'nw'],\r\n            w: ['w', 'sw', 'nw', 'e', 'ne', 'se'],\r\n            h: ['n', 'ne', 'nw', 's', 'se', 'sw']\r\n        },\r\n        /**\r\n         * 将设置信息应用到目标中\r\n         */\r\n        _r_applyResize: function($resizeProxy){\r\n            var that = this\r\n            \t,cur = {\r\n\t                left: this._r_current.left,\r\n\t                top: this._r_current.top,\r\n\t                width: this._r_current.width,\r\n\t                height: this._r_current.height\r\n\t            }\r\n\t\t\t\t,applyToTarget = false;\r\n            if(!$resizeProxy){\r\n                $resizeProxy = this.$dropPanel;\r\n                applyToTarget = true;\r\n                if(!isNaN(parseInt(this.$dropPanel.css('top')))){\r\n                    cur.top = parseInt(this.$dropPanel.css('top'));\r\n                }else{\r\n                    cur.top = 0;\r\n                }\r\n                if(!isNaN(parseInt(this.$dropPanel.css('left')))){\r\n                    cur.left = parseInt(this.$dropPanel.css('left'));\r\n                }else{\r\n                    cur.left = 0;\r\n                }\r\n            }\r\n            if($.inArray(this._r_current.dir, this._r_changeBy.l) > -1){\r\n                cur.left += this._r_current.diffX;\r\n                this._r_current.diffLeft = this._r_current.diffX;\r\n            }else if(applyToTarget){\r\n                delete cur.left;\r\n            }\r\n            if($.inArray(this._r_current.dir, this._r_changeBy.t) > -1){\r\n                cur.top += this._r_current.diffY;\r\n                this._r_current.diffTop = this._r_current.diffY;\r\n            }else if(applyToTarget){\r\n                delete cur.top;\r\n            }\r\n            if($.inArray(this._r_current.dir, this._r_changeBy.w) > -1){\r\n                cur.width += (this._r_current.dir.indexOf('w') == -1 ? 1 : -1) * this._r_current.diffX;\r\n                this._r_current.newWidth = cur.width;\r\n            }else if(applyToTarget){\r\n                delete cur.width;\r\n            }\r\n            if($.inArray(this._r_current.dir, this._r_changeBy.h) > -1){\r\n                cur.height += (this._r_current.dir.indexOf('n') == -1 ? 1 : -1) * this._r_current.diffY;\r\n                this._r_current.newHeight = cur.height;\r\n            }else if(applyToTarget){\r\n                delete cur.height;\r\n            }\r\n            $resizeProxy.css(cur);\r\n        }\r\n\t});\r\n\tfunction getPageHeight(){\r\n\t\tif($.browser.msie){ \r\n\t\t\treturn document.compatMode == 'CSS1Compat'? document.documentElement.clientHeight : \r\n\t\t\tdocument.body.clientHeight; \r\n\t\t}else{ \r\n\t\t\treturn window.innerHeight; \r\n\t\t}\r\n\t};\r\n\tfunction getPageWidth(){\r\n\t\tif($.browser.msie){ \r\n\t\t\treturn document.compatMode == 'CSS1Compat'? document.documentElement.clientWidth : \r\n\t\t\tdocument.body.clientWidth; \r\n\t\t}else{ \r\n\t\t\treturn window.innerWidth; \r\n\t\t}\r\n\t}\r\n\treturn DropPanel;\r\n});\n",
    "/**\r\n * 下拉面板控件--继承Textbox\r\n * @author Mr.T\r\n */\r\ndefine('app/widgets/form/app-combo',['app/core/app-jquery', 'app/core/app-core', 'app/core/app-options',\r\n        'app/data/app-ajax', 'app/widgets/form/app-textbox', 'app/widgets/drag/app-droppanel'], \r\n        function($, App, Options, AppAjax, Textbox, Expandable) {\r\n\t\r\n\t'use strict';\r\n\t\r\n\t/**\r\n\t * @class \r\n\t * @classdesc 下拉面板\r\n\t * <span class=\"type-signature static\">extend</span>textbox\r\n\t * @name combo-class\r\n\t * @desc 下拉面板的初始化方法\r\n\t * @param {DOMElement} input 要渲染的input组件\r\n\t * @param {Object} options 组件的选项设置 \r\n\t * @author Mr.T\r\n\t * @see {@link textbox-class} combo继承至textbox\r\n\t * @see {@link typeahead-class} 继承该组件\r\n\t * @see {@link suggest-class} 继承该组件\r\n\t * @see {@link combobox-class} 继承该组件\r\n\t * @see {@link comboztree-class} 继承该组件\r\n\t * @see {@link combogrid-class} 继承该组件\r\n\t */\r\n\tvar Combo = Textbox.extend({\r\n\t\tImplements: Expandable,\r\n\t\tinitialize: function(input, options){\r\n\t\t\tif(!options){\r\n\t\t\t\toptions = {};\r\n\t\t\t}\r\n\t\t\toptions._ = $.extend({}, Options.appDefaults.Combo, options._); \r\n\t\t\tCombo.superclass.initialize.call(this, input, options);\r\n\t\t\tthis._comboInit();\r\n\t\t\tthis._comboEventRegister();\r\n\t\t},\r\n\t\t/**\r\n\t\t * 初始化\r\n\t\t */\r\n\t\t_comboInit: function(){\r\n\t\t\tif(this.setting.rowHeight){\r\n\t\t\t\tthis._rowHeight = this.setting.rowHeight;\r\n\t\t\t}\r\n\t\t\tthis._editable(false);\r\n\t\t\tthis._initDropPanel();\r\n\t\t\tthis.$dropPanel.data('context', this);\r\n\t\t\tif(this.setting.selectednode){\r\n\t\t\t\tthis.setSelectedNode(this.setting.selectednode);\r\n\t\t\t}\r\n\t\t\tthis._onPanelResize();\r\n\t\t\tthis._onPanelFadeOut();\r\n\t\t},\r\n\t\t/**\r\n\t\t * 事件注册器\r\n\t\t */\r\n\t\t_comboEventRegister: function(){\r\n\t\t\tvar s = this.setting;\r\n\t\t\tif(s.afterDataRender){\r\n\t\t\t\tthis.on('afterDataRender', s.afterDataRender);\r\n\t\t\t}\r\n\t\t\tif(s.beforeLoad){\r\n\t\t\t\tthis.on('beforeLoad', s.beforeLoad);\r\n\t\t\t}\r\n\t\t\tif(s.beforeShowPanel){\r\n\t\t\t\tthis.on('beforeShowPanel', s.beforeShowPanel);\r\n\t\t\t}\r\n\t\t\tif(s.onHidePanel){\r\n\t\t\t\tthis.on('onHidePanel', s.onHidePanel);\r\n\t\t\t}\r\n\t\t\tif(s.onShowPanel){\r\n\t\t\t\tthis.on('onShowPanel', s.onShowPanel);\r\n\t\t\t}\r\n\t\t},\r\n\t\t/**\r\n\t\t * 覆盖父类的绑定方法\r\n\t\t */\r\n\t\t_textChangeEvent: function(){},\r\n\t\t/**\r\n\t\t * 初始化下拉面板\r\n\t\t */\r\n\t\t_initDropPanel: function(){\r\n\t\t\tvar s = this.setting;\r\n\t\t\tvar $dropPanel = $('<div class=\"drop-panel\">' +\r\n\t\t\t\t\t\t\t\t'<div class=\"drop-panel-main\">' +\r\n\t\t\t\t\t\t\t\t\t'<div class=\"drop-panel-loading\">正在努力加载中...</div>' + \r\n\t\t\t\t\t\t\t\t\t'<div class=\"drop-panel-empty\">无符合条件的记录。</div>' + \r\n\t\t\t\t\t\t\t\t'</div>' + \r\n\t\t\t\t\t\t\t\t'<div class=\"drop-panel-custom\"></div>' + \r\n\t\t\t\t\t\t\t'</div>');\r\n\t\t\t$dropPanel.appendTo($.$appPanelContainer);\r\n\t\t\tthis.$dropPanel = $dropPanel;\r\n\t\t\tthis.$dropPanelMain = $dropPanel.find('.drop-panel-main');\r\n\t\t\tthis.$dropPanelCustom = $dropPanel.find('.drop-panel-custom');\r\n\t\t\tthis.$dropPanelLoading = $dropPanel.find('.drop-panel-loading');\r\n\t\t\tthis.$dropPanelEmpty = $dropPanel.find('.drop-panel-empty');\r\n\t\t\tthis.$dropPanelMain.on('mousewheel.combo.api', $.proxy($dropPanelMainOnMouseWheel, this))\r\n\t\t\tthis.$dropPanelMain.on('scroll.combo.api', $.proxy($dropPanelMainScroll, this));\r\n\t\t},\r\n\t\t/**\r\n\t\t * 显示或隐藏下拉面板，该方法已绑定在组件的右边按钮中\r\n\t\t * @todo 判断当前面板是否可见：\r\n\t\t * @todo 1如果不可见，则打开面板\r\n\t\t * @todo 2如果可见，则关闭面板\r\n\t\t * @example $('#demo').combo('togglePanel');\r\n\t\t * @memberof combo-class\r\n\t\t * @instance\r\n\t\t */\r\n\t\ttogglePanel: function(){\r\n\t\t\tif(this._mainDivIsVisiable()){\r\n\t\t\t\tthis.hidePanel();\r\n\t\t\t}else{\r\n\t\t\t\tthis._showPanel();\r\n\t\t\t}\r\n\t\t},\r\n\t\t/**\r\n\t\t * 显示当前对象的下拉面板\r\n\t\t * \t\t1、显示前先关闭其他所有打开的下拉面板面板\r\n\t\t * \t\t2、开启mousedown.droppanel.api事件，点击html代理关闭该面板的操作\r\n\t\t * @param callback\r\n\t\t */\r\n\t\t_showPanel: function(callback){\r\n\t\t\tinitDropPanel.call(this);\r\n\t\t\t/**\r\n\t\t\t * 面板展示前事件，返回false不显示面板\r\n\t\t\t * @event combo-class#beforeShowPanel\r\n\t\t\t */\r\n\t\t\tif(this.trigger('beforeShowPanel') === false){\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tthis._closeVisiblePanel();\r\n\t\t\tthis.$dropPanel.show();\r\n\t\t\tthis.place();\r\n\t\t\tif($.isFunction(callback)){\r\n\t\t\t\tcallback.call(this);\r\n\t\t\t}\r\n\t\t\t/**\r\n\t\t\t * 面板展示事件\r\n\t\t\t * @event combo-class#onShowPanel\r\n\t\t\t */\r\n\t\t\tthis.trigger('onShowPanel');\r\n\t\t},\r\n\t\t/**\r\n\t\t * 设置下拉框的位置\r\n\t\t */\r\n\t\tplace: function(){\r\n\t\t\tvar mainCss = {\r\n\t\t\t\t\ttop: this._getDropPanelTop(),\r\n\t\t\t\t\tleft: this._getDropPanelLeft(),\r\n\t\t\t\t\t'z-index': Options.zindexs.droppanel++\r\n\t\t\t\t};\r\n\t\t\tthis.$dropPanel.css(mainCss);\r\n\t\t\t$(document).on('mousedown.droppanel.api', $.proxy(this.hidePanel,this));\r\n\t\t},\r\n\t\t/**\r\n\t\t * 关闭组件对象的下拉面板\r\n\t\t * @todo 关闭当前下拉面板\r\n\t\t * @todo 关闭点击html代理的click.combo.api的事件\r\n\t\t * @example $('#demo').combo('hidePanel');\r\n\t\t * @memberof combo-class\r\n\t\t * @instance\r\n\t\t */\r\n\t\thidePanel: function(){\r\n\t\t\tvar fireHideEvent = this._mainDivIsVisiable();\r\n\t\t\tthis.$dropPanel.hide();\r\n\t\t\tif(!$.$appPanelContainer.find('.drop-panel,.datetimepicker').is(':visible')){\r\n\t\t\t\t$(document).off('mousedown.droppanel.api');\r\n\t\t\t}\r\n\t\t\tif(fireHideEvent){\r\n\t\t\t\t/**\r\n\t\t\t\t * 面板关闭事件\r\n\t\t\t\t * @event combo-class#onHidePanel\r\n\t\t\t\t */\r\n\t\t\t\tthis.trigger('onHidePanel');\r\n\t\t\t}\r\n\t\t},\r\n\t\t/**\r\n\t\t * <span class=\"type-signature static\">override</span>\r\n\t\t * 将焦点聚焦到组件\r\n\t\t * @memberof combo-class\r\n\t\t * @instance\r\n\t\t */\r\n\t\tfocus: function(){\r\n\t\t\tthis.$text.focus();\r\n\t\t},\r\n\t\t/**\r\n\t\t * 是否阻止联想组件的行为\r\n\t\t * @param flag true为阻止\r\n\t\t */\r\n\t\t_stopSuggest: function(flag){\r\n\t\t\tvar suggest = this.$element.data('suggest');\r\n\t\t\tif(suggest){\r\n\t\t\t\tsuggest.stopKeyEvent = flag;\r\n\t\t\t}\r\n\t\t},\r\n\t\t/**\r\n\t\t * 是否为联想框来控制按键操作\r\n\t\t */\r\n\t\t_isSuggestContext: function(){\r\n\t\t\tvar context = this\r\n\t\t\t\t,suggest = this._suggest;\r\n\t\t\tif(suggest){\r\n\t\t\t\tsuggest.stopKeyEvent = false;\r\n\t\t\t\tif(suggest._mainDivIsVisiable()){\r\n\t\t\t\t\tsetTimeout(function(){\r\n\t\t\t\t\t\tif(suggest.getText() == ''){//联想时 关键字为空 则切换到主控件的下拉面板\r\n\t\t\t\t\t\t\tsuggest.stopKeyEvent = true;\r\n\t\t\t\t\t\t\tcontext.showPanel();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},10);\r\n\t\t\t\t\treturn true;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn false;\r\n\t\t},\r\n\t\t/**\r\n\t\t * 要进行联想的按键\r\n\t\t * true进行联想\r\n\t\t */\r\n\t\t_keyFilterSuggest: function(e){\r\n\t\t\tvar keyCode = e.keyCode\r\n\t\t\t\t,result = false;\r\n\t\t\tif(keyCode >= 48 && keyCode <= 90){//0-1 a-z A-Z\r\n\t\t\t\tresult = true;\r\n\t\t\t}else if(keyCode >= 96 && keyCode <= 105){//小键盘数字\r\n\t\t\t\tresult = true;\r\n\t\t\t}else{\r\n\t\t\t\t//299 拼音输入法特殊按键\r\n\t\t\t\tvar keys = [App.keyCode.BACKSPACE, App.keyCode.ENTER, App.keyCode.DELETE, 229];\r\n\t\t\t\tresult = $.inArray(keyCode, keys) > -1;\r\n\t\t\t}\r\n\t\t\treturn result;\r\n\t\t},\r\n\t\t/**\r\n\t\t * 按键显示面板\r\n\t\t */\r\n\t\t_keyShowPanel: function(e){\r\n\t\t\tvar keyCode = e.keyCode\r\n\t\t\t\t,s = this.setting;\r\n\t\t\tif(!this._mainDivIsVisiable()){\r\n\t\t\t\tthis.showPanel();\r\n\t\t\t\te.preventDefault();\r\n\t\t\t\te.stopPropagation();\r\n\t\t\t}\r\n\t\t},\r\n\t\t/**\r\n\t\t * 隐藏面板\r\n\t\t */\r\n\t\t_keyHidePanel: function(e){\r\n\t\t\te.preventDefault();\r\n\t\t\tthis._stopSuggest(true);\r\n\t\t\tif(this._mainDivIsVisiable()){\r\n\t\t\t\tthis.hidePanel();\r\n\t\t\t}\r\n\t\t},\r\n\t\t/**\r\n\t\t * 根据输入内容进行延迟联想\r\n\t\t */\r\n\t\tsuggest: function(){\r\n\t\t\tvar suggest = this._suggest;\r\n\t\t\tif(suggest){\r\n\t\t\t\tsetTimeout(function(){\r\n\t\t\t\t\tif(suggest && suggest.getText() != ''){\r\n\t\t\t\t\t\tsuggest.suggest();\r\n\t\t\t\t\t}\r\n\t\t\t\t},10);\r\n\t\t\t}\r\n\t\t},\r\n\t\t/**\r\n\t\t * 根据隐藏值检索显示值\r\n\t\t * @param value 隐藏值\r\n\t\t * @returns 名称\r\n\t\t */\r\n\t\t_findTextByValue: function(value){\r\n\t\t\tif(value === undefined || value === ''){\r\n\t\t\t\treturn '';\r\n\t\t\t}\r\n\t\t\tvar result = undefined\r\n\t\t\t\t,data = this.setting.data\r\n\t\t\t\t,textField = this.setting.textfield\r\n\t\t\t\t,valueField = this.setting.valuefield;\r\n\t\t\tfor ( var i = 0; i < data.length; i++) {\r\n\t\t\t\tif(data[i][valueField] == value){\r\n\t\t\t\t\tresult = data[i][textField];\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn result;\r\n\t\t},\r\n\t\t/**\r\n\t\t * 加载数据前事件\r\n\t\t */\r\n\t\t_onBeforeLoad: function(){\r\n\t\t\t/**\r\n\t\t\t * 加载数据前事件，如果返回false 则不进行加载数据\r\n\t\t\t * @event combo-class#beforeLoad\r\n\t\t\t */\r\n\t\t\tif(this.hasBindEvent('beforeLoad')){\r\n\t\t\t\treturn this.trigger('beforeLoad', this.getParameter());\r\n\t\t\t}\r\n\t\t},\r\n\t\t/**\r\n\t\t * 数据加载方法\r\n\t\t * @param url 加载的参数\r\n\t\t * @param callback 加载完成事件\r\n\t\t */\r\n\t\t_ajax: function(url, callback){\r\n\t\t\tif(!url){\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tif(this._onBeforeLoad() === false){\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tthis.$dropPanelLoading.show();\r\n\t\t\tthis.$dropPanelEmpty.hide();\r\n\t\t\tvar that = this;\r\n\t\t\tAppAjax.ajaxCall({\r\n\t\t\t\turl: url,\r\n\t\t\t\tdata: this.getParameter(), \r\n\t\t\t\tdataType: 'json',\r\n\t\t\t\ttype: 'POST',\r\n\t\t\t\tsuccess: function(data){\r\n\t\t\t\t\tthat.$dropPanelLoading.hide();\r\n\t\t\t\t\tthat._onLoadSuccess(data);\r\n\t\t\t\t\tcallback.call(that, data);\r\n\t\t\t\t}\r\n\t\t\t});\t\r\n\t\t},\r\n\t\t/**\r\n\t\t * 初始化数据源\r\n\t\t */\r\n\t\t_initData: function(){\r\n\t\t\tvar currParam = this.getParameter();\r\n\t\t\tif(this.setting.url && currParam){\r\n\t\t\t\tif(this.lastParam != JSON.stringify(currParam)){\r\n\t\t\t\t\tthis.reload(this.setting.url);\r\n\t\t\t\t}\r\n\t\t\t\tthis.lastParam = JSON.stringify(currParam);\r\n\t\t\t}else if(!this.onceRender){\r\n\t\t\t\tif($.isArray(this.setting.data)){\r\n\t\t\t\t\tthis.loadData(this.setting.data);\r\n\t\t\t\t}else{\r\n\t\t\t\t\tthis.reload(this.setting.url, this.firstLoadSuccess);\r\n\t\t\t\t}\r\n\t\t\t\tthis.onceRender = true;\r\n\t\t\t}\r\n\t\t},\r\n\t\t/**\r\n\t\t * 数据载入完成事件\r\n\t\t */\r\n\t\t_onLoadSuccess: function(data){\r\n\t\t\t/**\r\n\t\t\t * 远程数据加载完成事件\r\n\t\t\t * <PRE>\r\n\t\t\t * \t该事件传入加载的数据，可以通过该函数对数据进一步加工\r\n\t\t\t * </PRE>\r\n\t\t\t * @event combo-class#onLoadSuccess\r\n\t\t\t * @param {Object} data 加载的数据\r\n\t\t\t */\r\n\t\t\tthis.trigger('onLoadSuccess', data);\r\n\t\t},\r\n\t\t/**\r\n\t\t * 获取选中节点，单选时为一个节点对象，多选时为一个节点数组\r\n\t\t * @returns {Object|Array} selectedNode\r\n\t\t * @example $('#demo').textbox('getSelectedNode');\r\n\t\t * @memberof combo-class\r\n\t\t * @instance\r\n\t\t */\r\n\t\tgetSelectedNode: function(){\r\n\t\t\tvar node = this.$input.data('selectNode');\r\n\t\t\tif(!node){\r\n\t\t\t\tnode = null;\r\n\t\t\t}\r\n\t\t\treturn node;\r\n\t\t},\r\n\t\t/**\r\n\t\t * 设置一个选中节点\r\n\t\t * @todo 根据节点设置value和text值\r\n\t\t * @param {Object|Array} node 数据节点 \r\n\t\t * @example $('#demo').textbox('setSelectNode', {value:'隐藏值',text:'显示值',cusField:'自定义字段'});\r\n\t\t * @memberof textbox\r\n\t\t * @instance\r\n\t\t */\r\n\t\tsetSelectedNode: function(node, noSet){\r\n\t\t\tthis.$input.data('selectNode', node);\r\n\t\t\tif(noSet == true){\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tthis._setValueAndTextByNodes();\r\n\t\t},\r\n\t\t/**\r\n\t\t * 根据节点设置隐藏值和显示值\r\n\t\t * @param node\r\n\t\t */\r\n\t\t_setValueAndTextByNodes: function(){\r\n\t\t\tvar nodes = this.getSelectedNode()\r\n\t\t\t\t,value = ''\r\n\t\t\t\t,text = ''\r\n\t\t\t\t,vf = this.setting.valuefield\r\n\t\t\t\t,tf = this.setting.textfield\r\n\t\t\t\t,formatter = this.setting.formatter;\r\n\t\t\tif(nodes){\r\n\t\t\t\tif($.isArray(nodes)){\r\n\t\t\t\t\tfor(var i = 0; i < nodes.length; i++){\r\n\t\t\t\t\t\tvalue += nodes[i][vf] + ',';\r\n\t\t\t\t\t\ttext += this._formatter(nodes[i], formatter, tf) + ',';\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif(text.length > 0 ) text = text.substring(0, text.length-1);\r\n\t\t\t\t\tif(value.length > 0 ) value = value.substring(0, value.length-1);\r\n\t\t\t\t}else{\r\n\t\t\t\t\tvalue = nodes[vf] ? nodes[vf] : '';\r\n\t\t\t\t\ttext = this._formatter(nodes, formatter, tf);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tthis.setText(text);\r\n\t\t\tthis._setValue(value);\r\n\t\t\tif(!this.setting.acceptText && this.isActive()){\r\n\t\t\t\tthis.$text[0].select();\r\n\t\t\t}\r\n\t\t},\r\n\t\t/**\r\n\t\t * 格式化显示值\r\n\t\t */\r\n\t\t_formatter: function(node, formatter, tf){\r\n\t\t\tvar text = '';\r\n\t\t\tif(formatter){\r\n\t\t\t\tif($.isFunction(formatter)){\r\n\t\t\t\t\ttext = formatter(node);\r\n\t\t\t\t}else if(typeof(formatter) == 'string'){\r\n\t\t\t\t\tif(this.setting.template){\r\n\t\t\t\t\t\ttext = this.setting.template.apply(node);\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\ttext = node[formatter];\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}else{\r\n\t\t\t\ttext = node[tf];\r\n\t\t\t}\r\n\t\t\treturn text;\r\n\t\t},\r\n\t\t/**\r\n\t\t * <span class=\"type-signature static\">override</span>\r\n\t\t * 设置隐藏值，并尝试设置显示值\r\n\t\t * @param {String} val 隐藏值\r\n\t\t * @see textbox#setValue\r\n\t\t * @todo 当隐藏值为空时，显示值也为空\r\n\t\t * @todo 当数据源为本地数据源时，且找到显示值的情况下设置显示值\r\n\t\t * @todo 清空选中节点的值 setSelectedNode(null)\r\n\t\t * @example $('#demo').combobox('setValue','val');\r\n\t\t * @memberof combobox\r\n\t\t * @instance\r\n\t\t */\r\n\t\tsetValue: function(val, noTrigger){\r\n\t\t\tthis._setValue(val, noTrigger);\r\n\t\t\tthis._setTextByValue(val);\r\n\t\t\tthis.setSelectedNode(null, true);\r\n\t\t},\r\n\t\t/**\r\n\t\t * 根据隐藏值设置显示值\r\n\t\t * 1、当隐藏值为空时，显示值也为空\r\n\t\t * 2、当数据源为本地数据源时，且找到显示值的情况下设置显示值\r\n\t\t * @param value\r\n\t\t */\r\n\t\t_setTextByValue: function(value){\r\n\t\t\tif(!value){\r\n\t\t\t\tthis.setText('');\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tif(!this.setting.data){\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tvar text = '';\r\n\t\t\tif(this.setting.multiple && value){\r\n\t\t\t\tvar vs = value.split(',');\r\n\t\t\t\tfor ( var i = 0; i < vs.length; i++) {\r\n\t\t\t\t\ttext += this._findTextByValue(vs[i]) + ',';\r\n\t\t\t\t}\r\n\t\t\t\ttext = text.substr(0, text.length - 1);\r\n\t\t\t}else{\r\n\t\t\t\ttext = this._findTextByValue(value);\r\n\t\t\t}\r\n\t\t\tif(text != undefined && text != ''){\r\n\t\t\t\tthis.setText(text);\r\n\t\t\t}\r\n\t\t},\r\n\t\t/**\r\n\t\t * 数据渲染完成事件\r\n\t\t */\r\n\t\t_afterDataRender: function(){\r\n\t\t\t/**\r\n\t\t\t * 数据渲染完成事件\r\n\t\t\t * @event combo-class#afterDataRender\r\n\t\t\t */\r\n\t\t\tthis.trigger('afterDataRender');\r\n\t\t},\r\n\t\t/**\r\n\t\t * 获取选择面板的自定义区域\r\n\t\t * @example $('#demo').combobox('getCustomPanel');\r\n\t\t * @memberof combobox\r\n\t\t * @instance\r\n\t\t */\r\n\t\tgetCustomPanel: function(){\r\n\t\t\treturn this.$dropPanelCustom;\r\n\t\t},\r\n\t\t/**\r\n\t\t * 获取联想面板的自定义区域\r\n\t\t * @example $('#demo').combobox('getSuggestCustomPanel');\r\n\t\t * @memberof combobox\r\n\t\t * @instance\r\n\t\t */\r\n\t\tgetSuggestCustomPanel: function(){\r\n\t\t\tvar context = this.$input.data('context'); \r\n\t\t\tif(context && context.setting.className == 'app-suggest'){\r\n\t\t\t\treturn this.getCustomPanel();\r\n\t\t\t}else if(this._suggest){\r\n\t\t\t\treturn this._suggest.getCustomPanel();\r\n\t\t\t}\r\n\t\t},\r\n\t\t/**\r\n\t\t * 获取数据集\r\n\t\t * @example $('#demo').combobox('getData');\r\n\t\t * @memberof combobox\r\n\t\t * @instance\r\n\t\t */\r\n\t\tgetData: function(){\r\n\t\t\treturn this.setting.data;\r\n\t\t},\r\n\t\t_resetPanelHeight: function(len){\r\n\t\t\tvar listHeight = len * getRowHeight.call(this)\r\n\t\t\t\t,customHeight = this.$dropPanelCustom.height()\r\n\t\t\t\t,panelHeight = listHeight + customHeight;\r\n\t\t\tif(panelHeight > this.setting.panelheight){\r\n\t\t\t\tpanelHeight = this.setting.panelheight;\r\n\t\t\t}else{\r\n\t\t\t\tpanelHeight += getMainPanelScrollBarWidth(this.$dropPanelMain);\r\n\t\t\t}\r\n\t\t\tthis.$dropPanel.height(panelHeight);\r\n\t\t\tfunction getMainPanelScrollBarWidth($dropPanelMain){\r\n\t\t\t\tvar result = 0\r\n\t\t\t\t\t,scrollWidth = $dropPanelMain[0].scrollWidth\r\n\t\t\t\t\t,width = $dropPanelMain.width();\r\n\t\t\t\tif(scrollWidth > width){\r\n\t\t\t\t\tresult += 18;\r\n\t\t\t\t}\r\n\t\t\t\treturn result;\r\n\t\t\t}\r\n\t\t},\r\n\t\t_resetPanelWidth: function($dropPanelMain){\r\n\t\t\tvar panelWidth = this.setting.panelwidth;\r\n\t\t\tif(panelWidth){\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tif(!$dropPanelMain){\r\n\t\t\t\t$dropPanelMain = this.$dropPanelMain;\r\n\t\t\t}\r\n\t\t\tvar mainWidth = getMainPanelWidth($dropPanelMain)\r\n\t\t\t\t,inputWidth = this.$element.outerWidth();\r\n\t\t\tif(mainWidth < inputWidth){\r\n\t\t\t\treturn;\r\n\t\t\t}else if(mainWidth < inputWidth*1.5){\r\n\t\t\t\tpanelWidth = mainWidth + 15;\r\n\t\t\t}else{\r\n\t\t\t\tpanelWidth = inputWidth*1.5;\r\n\t\t\t}\r\n\t\t\tthis.$dropPanel.width(panelWidth);\r\n\t\t\tfunction getMainPanelWidth($dropPanelMain){\r\n\t\t\t\tvar result = $dropPanelMain[0].scrollWidth\r\n\t\t\t\t\t,scrollHeight = $dropPanelMain[0].scrollHeight\r\n\t\t\t\t\t,height = $dropPanelMain.height();\r\n\t\t\t\tif(scrollHeight > height){\r\n\t\t\t\t\tresult += 18;\r\n\t\t\t\t}\r\n\t\t\t\treturn result;\r\n\t\t\t}\r\n\t\t}\r\n\t});\r\n\t\r\n\t\r\n\t$.fn.combo = function(option, value) {\r\n\t\tvar methodReturn = undefined\r\n\t\t\t,args = arguments\r\n\t\t\t,componentName = 'combo';\r\n\t\tthis.each(function() {\r\n\t\t\tvar $this = $(this);\r\n\t\t\tif(!$this.is('input')){\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\t\t\tvar component = App.getComponent($this, componentName);\r\n\t\t\tif(typeof option === 'string'){\r\n\t\t\t\ttry{\r\n\t\t\t\t\tvar methodArgs = Array.prototype.slice.call(args, 1);\r\n\t\t\t\t\tmethodReturn = App.componentMethodApply(component, option, methodArgs);\r\n\t\t\t\t}catch(e){\r\n\t\t\t\t\tApp.throwCompMethodError($this, componentName, option, e);\r\n\t\t\t\t}\r\n\t\t\t}else{\r\n\t\t\t\tif(!component){\r\n\t\t\t\t\tcomponent = new Combo(this, option);\r\n\t\t\t\t\t$this.data(componentName, component);\r\n\t\t\t\t}else{\r\n\t\t\t\t\tApp.throwCompInitError($this, componentName);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\t\treturn methodReturn;\r\n\t};\r\n\tfunction initDropPanel(){\r\n\t\tif(this.hasInitDropPanel){\r\n            return;\r\n        }\r\n\t\tthis.hasInitDropPanel = true;\r\n\t\tvar s = this.setting;\r\n\t\tvar dropPanelCss = {\r\n\t\t\theight: s.panelheight\r\n\t\t};\r\n\t\tif(s.customPanelHeight && !isNaN(s.customPanelHeight)){\r\n\t\t\tvar customCss = {};\r\n\t\t\tcustomCss.height = s.customPanelHeight;\r\n\t\t\tif(s.customPanelPosition == 'bottom'){\r\n\t\t\t\tcustomCss.bottom = 0;\r\n\t\t\t\tcustomCss['border-top-width'] = 1;\r\n\t\t\t\tdropPanelCss['padding-bottom'] = s.customPanelHeight;\r\n\t\t\t}else{\r\n\t\t\t\tcustomCss.top = 0;\r\n\t\t\t\tcustomCss['border-bottom-width'] = 1;\r\n\t\t\t\tdropPanelCss['padding-top'] = s.customPanelHeight;\r\n\t\t\t}\r\n\t\t\tthis.$dropPanelCustom.css(customCss);\r\n\t\t\tdropPanelCss['min-height'] = Number(s.customPanelHeight) + 30;\r\n\t\t}else{\r\n\t\t\tdropPanelCss['min-height'] = 30;\r\n\t\t}\r\n\t\t//设置面板宽度\r\n\t\tvar panelWidth = this.setting.panelwidth; \r\n\t\tif(panelWidth != ''){\r\n\t\t\tif(typeof(panelWidth) == 'string' && panelWidth.charAt(panelWidth.length-1) == '%'){\r\n\t\t\t\tpanelWidth = this.$element.outerWidth() * parseFloat(panelWidth) / 100;\r\n\t\t\t}\r\n\t\t\tdropPanelCss.width = panelWidth;\r\n\t\t}else{\r\n\t\t\tdropPanelCss.width = this.$element.outerWidth();\r\n\t\t}\r\n\t\tthis.$dropPanel.css(dropPanelCss);\r\n\t\tthis.$dropPanel.on('click.combo.api', $.proxy(this.focus, this));\r\n\t};\r\n\tfunction $dropPanelMainOnMouseWheel(event, delta, deltaX, deltaY){\r\n\t\tvar rowHeight = getRowHeight.call(this)\r\n\t\t\t,scrollTop = this.$dropPanelMain.scrollTop()\r\n\t\t\t,scrollIndex = parseInt(scrollTop/rowHeight);\r\n\t\tif(delta < 0){\r\n\t\t\tthis.$dropPanelMain.scrollTop((scrollIndex + 1) * rowHeight);\r\n\t\t}else{\r\n\t\t\tthis.$dropPanelMain.scrollTop((scrollIndex - 1) * rowHeight);\r\n\t\t}\r\n\t};\r\n\tfunction $dropPanelMainScroll(){\r\n\t\tvar ele = this.$dropPanelMain[0]\r\n\t\t\t,scrollTop = ele.scrollTop\r\n\t\t\t,scrollHeight = ele.scrollHeight\r\n\t\t\t,clientHeight = ele.clientHeight;\r\n\t\tif(scrollTop == 0){\r\n\t\t\tthis.$dropPanelMain.scrollTop(0);\r\n\t\t\treturn;     \r\n\t\t}\r\n\t\tvar scrollTop = this.$dropPanelMain.scrollTop()\r\n\t\t\t,rowHeight = getRowHeight.call(this);\r\n\t\tif(scrollTop + clientHeight > rowHeight * (this.$dropPanelMain.find('li:visible').length-0.5)){\r\n\t\t\tscrollTop =  scrollHeight - clientHeight;\r\n\t\t}else{\r\n\t\t\tscrollTop = parseInt(scrollTop/rowHeight) * rowHeight;\r\n\t\t}\r\n\t\tthis.$dropPanelMain.scrollTop(scrollTop);\r\n\t};\r\n\tfunction getRowHeight(){\r\n\t\tif(!this._rowHeight){\r\n\t\t\tif(this.setting.className == 'app-comboztree'){\r\n\t\t\t\tvar $temp = $('<li style=\"visibility: hidden;\"><a class=\"level0\"><span></span></a></li>');\r\n\t\t\t\tthis.$dropPanelMain.find('.ztree').append($temp);\r\n\t\t\t\tthis._rowHeight = $temp.outerHeight();\r\n\t\t\t\t$temp.remove();\r\n\t\t\t}else{\r\n\t\t\t\tthis._rowHeight = this.$dropPanelMain.find('li:first').outerHeight();\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn this._rowHeight;\r\n\t};\r\n\treturn Combo;\r\n});\n",
    "/**\r\n * 联想框控件--继承Combo\r\n * @author Mr.T\r\n */\r\ndefine('app/widgets/form/app-suggest',['app/core/app-jquery', 'app/core/app-core', 'app/core/app-options', 'app/data/app-ajax',\r\n        'app/widgets/form/app-combo'], function($, App, Options, AppAjax, Combo) {\r\n\t\r\n\t'use strict';\r\n\r\n\t/**\r\n\t * @class \r\n\t * @classdesc 联想框\r\n\t * <span class=\"type-signature static\">extend</span>combo\r\n\t * @see {@link combo-class} suggest继承至combo\r\n\t * @name suggest-class\r\n\t * @desc 联想框的初始化方法\r\n\t * @param {DOMElement} input 要渲染的input组件\r\n\t * @param {Object} options 组件的选项设置 \r\n\t * @author Mr.T\r\n\t * @example &lt;input &#9;class=\"app-suggest\"\r\n\t * &#9;_options=\"{\r\n\t * &#9;&#9;suggest: 'html/example/app-input/data/data.idAndName'\r\n\t * &#9;}\"\r\n\t * />\r\n\t * @example $('#demo').suggest({\r\n\t * &#9;suggest: 'html/example/app-input/data/data.idAndName'\r\n\t * });\r\n\t */\r\n\tvar Suggest = Combo.extend({\r\n\t\tinitialize: function (input, options) {\r\n\t\t\tif(!options){\r\n\t\t\t\toptions = {};\r\n\t\t\t}\r\n\t\t\toptions._ = Options.appDefaults.Suggest;\r\n\t\t\tSuggest.superclass.initialize.call(this, input, options);\r\n\t\t\tthis._init();\r\n\t\t},\r\n\t\t/**\r\n\t\t * 初始化\r\n\t\t */\r\n\t\t_init: function(){\r\n\t\t\tthis._editable();\r\n\t\t\tthis._initOptions();\r\n\t\t\tthis._initPanelContent();\r\n\t\t\tthis._registEvents();\r\n\t\t\tthis._eventRegister();\r\n\t\t},\r\n\t\t/**\r\n\t\t * 初始化设置\r\n\t\t */\r\n\t\t_initOptions: function(){\r\n\t\t\tvar s = this.setting;\r\n\t\t\t//如果没有设置suggest地址，则使用url\r\n\t\t\tif((s.suggest == '' || s.suggest == true)\r\n\t\t\t\t\t&& s.url){\r\n\t\t\t\ts.suggest = s.url;\r\n\t\t\t}\r\n\t\t\tif(s.suggest == false){\r\n\t\t\t\ts.suggest = '';\r\n\t\t\t}\r\n\t\t\t//远程加载，可以是remote 或 async\r\n\t\t\tif(!s.remote && s.async){\r\n\t\t\t\ts.remote = true; \r\n\t\t\t}\r\n\t\t\tif(s.textfield == s.valuefield){\r\n\t\t\t\tthis.setText(s.value);\r\n\t\t\t}\r\n\t\t\tif(!s.suggestfield){\r\n\t\t\t\ts.suggestfield = s.textfield;\r\n\t\t\t}\r\n\t\t\tif(s.suggestClear && !s.multiple){\r\n\t\t\t\ts.suggestClear = true;\r\n\t\t\t}else{\r\n\t\t\t\ts.suggestClear = false;\r\n\t\t\t}\r\n\t\t},\r\n\t\t/**\r\n\t\t * 初始化下拉面板的内容\r\n\t\t */\r\n\t\t_initPanelContent: function(){\r\n\t\t\tinitCustomPanel.call(this);\r\n\t\t\tthis.$dropPanelMain.append('<div class=\"suggest-list\">' +\r\n\t\t\t\t      \t\t\t\t'<ul></ul>' +\t\t\r\n\t\t\t\t      \t\t\t'</div>');\r\n\t\t\tthis.$suggest = this.$dropPanel.find('.suggest-list');\r\n\t\t\tthis.$suggestList = this.$suggest.find('>ul');\r\n\t\t\tinitSelectPanel.call(this);\r\n\t\t\tfixPosition.call(this);\r\n\t\t\tfunction initCustomPanel(){\r\n\t\t\t\tvar s = this.setting;\r\n\t\t\t\tif(s.customPanelHeight && !isNaN(s.customPanelHeight)){\r\n\t\t\t\t\tvar customCss = {};\r\n\t\t\t\t\tcustomCss.height = s.customPanelHeight;\r\n\t\t\t\t\tif(s.customPanelPosition == 'bottom'){\r\n\t\t\t\t\t\tcustomCss.bottom = 0;\r\n\t\t\t\t\t\tcustomCss['border-top-width'] = 1;\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\tcustomCss.top = 0;\r\n\t\t\t\t\t\tcustomCss['border-bottom-width'] = 1;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tthis.$dropPanelCustom.css(customCss);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tfunction initSelectPanel(){\r\n\t\t\t\tthis.$dropPanelCustom.before('<div class=\"selected-list\"></div>');\r\n\t\t\t\tthis.$selectedList = this.$dropPanel.find('.selected-list');\r\n\t\t\t\tvar slt_height = 0\r\n\t\t\t\t\t,s = this.setting;\r\n\t\t\t\tif(s.acceptText){\r\n\t\t\t\t\tslt_height = 0;\r\n\t\t\t\t}else if(s.slt_area){\r\n\t\t\t\t\tslt_height = parseInt(s.slt_area);\r\n\t\t\t\t\tif(isNaN(slt_height)){\r\n\t\t\t\t\t\tslt_height = 0;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tthis.$selectedList.css('height', slt_height);\r\n\t\t\t}\r\n\t\t\tfunction fixPosition(){\r\n\t\t\t\tvar customHeight = this.$dropPanelCustom.height()\r\n\t\t\t\t\t,sltHeight = this.$selectedList.height()\r\n\t\t\t\t\t,dropPanelCss = {};\r\n\t\t\t\tdropPanelCss['min-height'] = customHeight + sltHeight + 30;\r\n\t\t\t\tif(this.setting.customPanelPosition == 'bottom'){\r\n\t\t\t\t\tthis.$dropPanel.css('padding-bottom', customHeight + sltHeight);\r\n\t\t\t\t\tthis.$selectedList.css('bottom', customHeight);\r\n\t\t\t\t}else{\r\n\t\t\t\t\tthis.$dropPanel.css('padding-bottom', sltHeight);\r\n\t\t\t\t\tthis.$dropPanel.css('padding-top', customHeight);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\t/**\r\n\t\t * 事件注册器\r\n\t\t */\r\n\t\t_eventRegister: function(){\r\n\t\t\tvar s = this.setting;\r\n\t\t\tif($.isFunction(s.afterSelected)){\r\n\t\t\t\tthis.on('afterSelected', s.afterSelected);\r\n\t\t\t}\r\n\t\t\tif($.isFunction(s.beforeSelected)){\r\n\t\t\t\tthis.on('beforeSelected', s.beforeSelected);\r\n\t\t\t}\r\n\t\t},\r\n\t\t/**\r\n\t\t * 注册控件事件\r\n\t\t */\r\n\t\t_registEvents: function(){\r\n\t\t\tthis.$text.on('focus.suggest.api', $.proxy(this._textFocusEvent, this));\r\n\t\t\tvar that = this;\r\n\t\t\t//当联想框作为单独的主体控件\r\n\t\t\tif(this.$element.hasClass('app-suggest')){\r\n\t\t\t\tthis.$openBtn.off('click.textbox.api');\r\n\t\t\t\tthis.$openBtn.on('click.suggest.api', function(e){\r\n\t\t\t\t\tthat.$text.focus();\r\n\t\t\t\t});\r\n\t\t\t}else{\r\n\t\t\t\tthis.$element.data('suggest', this);\r\n\t\t\t}\r\n\t\t\tthis.$suggestList.on('click.suggest.api', 'li', function(){\r\n\t\t\t\tthat._suggestItemActive($(this));\r\n\t\t\t});\r\n\t\t\tthis._onSelectedNodeDeleteEvent();\r\n\t\t\tthis._bindShowHistory();\r\n\t\t},\r\n\t\t/**\r\n\t\t * 覆盖父类的绑定方法\r\n\t\t */\r\n\t\t_textChangeEvent: function(){\r\n\t\t\tif(this.setting.acceptText){\r\n\t\t\t\tvar that = this;\r\n\t\t\t\tthis.$text.on('change.textbox.api',function(){\r\n\t\t\t\t\tvar selectedNode = that.getSelectedNode()\r\n\t\t\t\t\t\t,nodeText = that._getSelectedNodeText(selectedNode)\r\n\t\t\t\t\t\t,text = that.getText()\r\n\t\t\t\t\t\t,pos = that.$text.getCurPos(); \r\n\t\t\t\t\tif(that.setting.trim){\r\n\t\t\t\t\t\ttext = $.trim(text); \t\t\t\t\t\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif(that.forbidReg){\r\n\t\t\t\t\t\tvar forbidRegMatch = text.match(that.forbidReg);\r\n\t\t\t\t\t\tif(forbidRegMatch){\r\n\t\t\t\t\t\t\tpos = text.indexOf(forbidRegMatch[0]);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\ttext = text.replace(that.forbidReg, '');\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif(that.permitReg){\r\n\t\t\t\t\t\tvar permitRegMatch = text.match(that.permitReg);\r\n\t\t\t\t\t\tif(permitRegMatch){\r\n\t\t\t\t\t\t\tpos = text.indexOf(permitRegMatch[0]);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\ttext = text.replace(that.permitReg, '');\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif(nodeText != text){\r\n\t\t\t\t\t\tselectedNode = that._createSelectedNode(text);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tthat.setSelectedNode(selectedNode);\r\n\t\t\t\t\tif(pos !== null){\r\n\t\t\t\t\t\tthat.$text.setCurPos(pos);\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t},\r\n\t\t/**\r\n\t\t * 显示值文本框获得焦点事件\r\n\t\t */\r\n\t\t_textFocusEvent: function(){\r\n\t\t\tvar $text = this.$text;\r\n\t\t\t$text.data('oriText', $text.val());\r\n\t\t},\r\n\t\t_bindShowHistory: function(){\r\n\t\t\tif(!this._localStorage){\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tvar that = this;\r\n\t\t\tthis.$text.on('fucus.suggest.api click.suggest.api', function(){\r\n\t\t\t\tif($.trim(that.getText())){\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tthat._showHistory();\r\n\t\t\t}).on('keyup.suggest.api', function(e){\r\n\t\t\t\tif(that._mainDivIsVisiable()){\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tif(e.keyCode == App.keyCode.DOWN){\r\n\t\t\t\t\tthat._showHistory();\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tif($.trim(that.getText())){\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tthat._showHistory();\r\n\t\t\t});\r\n\t\t},\r\n\t\t_showHistory: function(){\r\n\t\t\tvar nodes = this._localStorage.get();\r\n\t\t\tif(!nodes){\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tthis._render$SuggestNode(nodes);\r\n\t\t\tthis._showPanel();\r\n\t\t},\r\n\t\t/**\r\n\t\t * 设置已选项的删除按钮事件\r\n\t\t */\r\n\t\t_onSelectedNodeDeleteEvent: function(){\r\n\t\t\tvar that = this;\r\n\t\t\tthis.$selectedList.on('click.suggest.api', '.sd-close-btn', function(){\r\n\t\t\t\tvar $selectedNode = $(this).parent()\r\n\t\t\t\t\t,node = that._getNode($selectedNode);\r\n\t\t\t\tthat.$suggestList.find('.selected[_v=\"' + node[that.setting.valuefield] + '\"]').removeClass('selected');\r\n\t\t\t\t$selectedNode.remove();\r\n\t\t\t\tthat._setSelectedNodeBySltArea();\r\n\t\t\t});\r\n\t\t},\r\n\t\t/**\r\n\t\t * 按键事件\r\n\t\t * 1、联想\r\n\t\t * 2、导航\r\n\t\t */\r\n\t\t_keyManager: function(e){\r\n\t\t\tif(this.stopKeyEvent){\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tif(this._dealSysKey(e)){\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tif(this._mainDivIsVisiable()){\r\n\t\t\t\tthis._keyForVisiblePanel(e);\r\n\t\t\t}else{\r\n\t\t\t\tthis._keyForHiddenPanel(e);\r\n\t\t\t}\r\n\t\t},\r\n\t\t/**\r\n\t\t * 面板可见状态下的按键事件处理\r\n\t\t */\r\n\t\t_keyForVisiblePanel: function(e){\r\n\t\t\tvar keyCode = e.keyCode\r\n\t\t\t\t,s = this.setting;\r\n\t\t\te.stopPropagation();\r\n\t\t\tif(App.containKeyCode(e, s.keyNextNode)){\r\n\t\t\t\tthis._keyNextNode(e);\r\n\t\t\t}else if(App.containKeyCode(e, s.keyPrevNode)){\r\n\t\t\t\tthis._keyPrevNode(e);\r\n\t\t\t}else if(App.containKeyCode(e, s.keyPickNode)){\r\n\t\t\t\tthis._keyPickNode(e);\r\n\t\t\t}else if(App.containKeyCode(e, s.keyNextSltNode)){\r\n\t\t\t\tthis._keyNextSltNode(e);\r\n\t\t\t}else if(App.containKeyCode(e, s.keyPrevSltNode)){\r\n\t\t\t\tthis._keyPrevSltNode(e);\r\n\t\t\t}else if(App.containKeyCode(e, s.keyHidePanel)){\r\n\t\t\t\tthis._keyHidePanel(e);\r\n\t\t\t}else if(this._keyFilterSuggest(e)){\r\n\t\t\t\tthis.suggest();\r\n\t\t\t}\r\n\t\t},\r\n\t\t/**\r\n\t\t * 面板不可见状态下的按键事件处理\r\n\t\t */\r\n\t\t_keyForHiddenPanel: function(e){\r\n\t\t\tvar keyCode = e.keyCode;\r\n\t\t\tif(this._isKeyCursorPos(keyCode)){\r\n\t\t\t\tthis._keyCursorPos(e);\r\n\t\t\t}else if(this._keyFilterSuggest(e)){\r\n\t\t\t\tthis.suggest();\r\n\t\t\t}\r\n\t\t},\r\n\t\t/**\r\n\t\t * 切换到联想项区域\r\n\t\t *    并从当前滚动到的可视选项中开始导航\r\n\t\t */\r\n\t\t_switchSuggest: function(){\r\n\t\t\tvar $c = this.$selectedList.find('.selected-item.current');\r\n\t\t\tif($c.length > 0){\r\n\t\t\t\t$c.removeClass('current');\r\n\t\t\t\tvar top = this.$suggest.scrollTop()\r\n\t\t\t\t\t,$nodes = this.$suggestList.find('>li')\r\n\t\t\t\t\t,h = $($nodes[0]).outerHeight()\r\n\t\t\t\t\t,index =  Math.floor(top/h);\r\n\t\t\t\t$($nodes[index]).addClass('current');\r\n\t\t\t}\r\n\t\t},\r\n\t\t/**\r\n\t\t * 切换到联想区域，定位上一个节点\r\n\t\t */\r\n\t\t_keyPrevNode: function(e){\r\n\t\t\te.preventDefault();\r\n\t\t\tvar $l = this.$suggestList;\r\n\t\t\tif($l.find('>li').length == 0){\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tvar $c = $l.find('.current')\r\n\t\t\t\t,$n = $c.prev();\r\n\t\t\tif($n.length == 0){\r\n\t\t\t\t$n = $l.find('li:last-child');\r\n\t\t\t}\r\n\t\t\tthis._switchSuggest();\r\n\t\t\t$c.removeClass('current');\r\n\t\t\t$n.addClass('current');\r\n\t\t\tthis._locateSuggest();\r\n\t\t},\r\n\t\t/**\r\n\t\t * 切换到联想区域，并定位下一个节点\r\n\t\t */\r\n\t\t_keyNextNode: function(e){\r\n\t\t\te.preventDefault();\r\n\t\t\tthis._locateNextNode();\r\n\t\t},\r\n\t\t/**\r\n\t\t * 定位下一个节点\r\n\t\t */\r\n\t\t_locateNextNode: function(){\r\n\t\t\tvar $l = this.$suggestList;\r\n\t\t\tif($l.find('>li').length == 0){\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tvar $c = $l.find('.current')\r\n\t\t\t\t,$n = $c.next();\r\n\t\t\tif($n.length == 0){\r\n\t\t\t\t$n = $l.find('li:first-child');\r\n\t\t\t}\r\n\t\t\tthis._switchSuggest();\r\n\t\t\t$c.removeClass('current');\r\n\t\t\t$n.addClass('current');\r\n\t\t\tthis._locateSuggest();\r\n\t\t},\r\n\t\t/**\r\n\t\t * 选中一个节点\r\n\t\t */\r\n\t\t_keyPickNode: function(e){\r\n\t\t\te.preventDefault();\r\n\t\t\tvar $c = this.$dropPanel.find('.current');\r\n\t\t\tif($c.length == 0){\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tif($c.hasClass('selected-item')){\r\n\t\t\t\t$c.find('.sd-close-btn').click();\r\n\t\t\t\tthis._keyNextSltNode(e);\r\n\t\t\t}else{\r\n\t\t\t\tthis._suggestItemActive($c);\r\n\t\t\t\tthis._locateNextNode();\r\n\t\t\t}\r\n\t\t},\r\n\t\t/**\r\n\t\t * 联想项的定位到当前项\r\n\t\t */\r\n\t\t_locateSuggest: function(){\r\n\t\t\tvar $c = this.$suggestList.find('li.current');\r\n\t\t\tif($c.length != 1){\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tvar top = $c.offset().top + $c.outerHeight() - this.$suggestList.offset().top\r\n\t\t\t\t,containerHeight = this.$suggest.outerHeight() -2\r\n\t\t\t\t,scrollTop = this.$suggest.scrollTop();\r\n\t\t\tif(top <= scrollTop){\r\n\t\t\t\tthis.$suggest.scrollTop(top - $c.outerHeight());\r\n\t\t\t}else if(top >= scrollTop + containerHeight){\r\n\t\t\t\tthis.$suggest.scrollTop(top - containerHeight);\r\n\t\t\t}\r\n\t\t},\r\n\t\t/**\r\n\t\t * 切换到已选项区域\r\n\t\t */\r\n\t\t_switchSelected: function(){\r\n\t\t\tthis.$suggestList.find('li.current').removeClass('current');\r\n\t\t},\r\n\t\t/**\r\n\t\t * 切换到已选区域，定位上一个已选择节点\r\n\t\t */\r\n\t\t_keyPrevSltNode: function(e){\r\n\t\t\te.preventDefault();\r\n\t\t\tvar $slts = this.$selectedList.find('>div');\r\n\t\t\tif($slts.length == 0){\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tvar $c = this.$selectedList.find('>div.current')\r\n\t\t\t\t,$n = $c.prev();\r\n\t\t\tif($n.length == 0){\r\n\t\t\t\t$n = $($slts[$slts.length-1]);\r\n\t\t\t}\r\n\t\t\tthis._switchSelected();\r\n\t\t\t$c.removeClass('current');\r\n\t\t\t$n.addClass('current');\r\n\t\t\tthis._locateSelected();\r\n\t\t},\r\n\t\t/**\r\n\t\t * 切换到已选区域，定位下一个已选择节点\r\n\t\t */\r\n\t\t_keyNextSltNode: function(e){\r\n\t\t\tvar $slts = this.$selectedList.find('>div');\r\n\t\t\tif($slts.length == 0){\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tvar $c = this.$selectedList.find('>div.current')\r\n\t\t\t\t,$n = $c.next();\r\n\t\t\tif($n.length == 0){\r\n\t\t\t\t$n = $($slts[0]);\r\n\t\t\t}\r\n\t\t\tthis._switchSelected();\r\n\t\t\t$c.removeClass('current');\r\n\t\t\t$n.addClass('current');\r\n\t\t\tthis._locateSelected();\r\n\t\t},\r\n\t\t/**\r\n\t\t * 选择项的定位\r\n\t\t */\r\n\t\t_locateSelected: function(){\r\n\t\t\tvar $c = this.$selectedList.find('>div.current');\r\n\t\t\tif($c.length != 1){\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tvar t = $c.offset().top - $c.parent().offset().top;\r\n\t\t\tthis.$selectedList.scrollTop(t);\r\n\t\t},\r\n\t\t/**\r\n\t\t * 根据输入内容进行延迟联想\r\n\t\t */\r\n\t\tsuggest: function(){\r\n\t\t\tvar that = this;\r\n\t\t\tif(!this.hasBlur){\r\n\t\t\t\tthis.$text.one('blur.suggest.api',function(){\r\n\t\t\t\t\tvar selectedNode = that.getSelectedNode();\r\n \t\t\t\t\tthat.setSelectedNode(selectedNode);\r\n\t\t\t\t});\r\n\t\t\t\tthat.hasBlur = true;\r\n\t\t\t}\r\n\t\t\t//保持延迟时间内只触发一次联想操作\r\n\t\t\tclearTimeout(this.timeout);\r\n\t\t\tthis.timeout = \r\n\t\t\t\tsetTimeout(function(){\t\r\n\t\t\t\t\tthat.$text.off('blur.suggest.api');\r\n\t\t\t\t\tthat.hasBlur = false;\r\n\t\t\t\t\tthat._suggestFunc();\r\n\t\t\t\t}, this.setting.lazy);\r\n\t\t},\r\n\t\t/**\r\n\t\t * 根据输入的值进行联想\r\n\t\t * \t保持联想面板打开状态\r\n\t\t */\r\n\t\t_suggestFunc: function(){\r\n\t\t\tif(this.stopKeyEvent){\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tif(this.setting.suggestClear){\r\n\t\t\t\tthis.setSelectedNode(null, true);\r\n\t\t\t\tthis._setValue('');\r\n\t\t\t}\r\n\t\t\tif(!this.isActive()){\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\t//如果联想面板不是打开状态，则打开渲染。否则只进行联想\r\n \t\t\tif(!this._mainDivIsVisiable() && !this.setting.acceptText){\r\n \t\t\t\tthis.showPanel();\r\n \t\t\t}\r\n\t\t\tif(this._preventSuggest()){\r\n\t\t\t\tthis._selected$SuggestNode();\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tif(this.setting.acceptText){\r\n\t\t\t\tthis.$selectedList.html('');\r\n\t\t\t}\r\n\t\t\tif(this._onBeforeLoad() === false){\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tthis.refreshSuggest();\r\n\t\t},\r\n\t\tisSuggesting: function(){\r\n\t\t\treturn this._mainDivIsVisiable(); \r\n\t\t},\r\n\t\trefreshSuggest: function(){\r\n\t\t\tif(this.setting.remote){\r\n\t\t\t\tthis._suggestByRemote();\r\n\t\t\t}else{\r\n\t\t\t\tthis._suggestByLocal();\r\n\t\t\t}\r\n\t\t},\r\n\t\t/**\r\n\t\t * 阻止联想事件\r\n\t\t * 1、当联想的关键字为空\r\n\t\t * 2、当联想的关键字与上次联想的相同\r\n\t\t * 3、当上次联想为空 且这次的关键字以上次的关键字开头\r\n\t\t * @returns true 进行阻止\r\n\t\t */\r\n\t\t_preventSuggest: function(){\r\n\t\t\tvar key = this.getText()\r\n\t\t\t\t,stop = false;\r\n\t\t\tif(!$.trim(key)){\r\n\t\t\t\tstop = true;\r\n\t\t\t}else if(!this.prevKey){\r\n\t\t\t\t\r\n\t\t\t}else if(!this.setting.acceptText \r\n\t\t\t\t\t&& this.prevKey == key \r\n\t\t\t\t\t&& this.prevParameter == JSON.stringify(this.getParameter())){\r\n\t\t\t\tstop = true;\r\n\t\t\t}\r\n\t\t\tthis.prevParameter = JSON.stringify(this.getParameter());\r\n\t\t\tthis.prevKey = key;\r\n\t\t\treturn stop;\r\n\t\t},\r\n\t\t/**\r\n\t\t * 根据远程设置地址进行联想\r\n\t\t * @param sugest 联想框全局对象\r\n\t\t */\r\n\t\t_suggestByRemote: function(){\r\n\t\t\tvar url = this.setting.suggest\r\n\t\t\t\t,onlyleaf = this.setting.onlyleaf\r\n\t\t\t\t,that = this;\r\n\t\t\tif(url){\r\n\t\t\t\tvar queryParams = $.extend({}, this.getParameter());\r\n\t\t\t\tqueryParams._key = this.getText();\r\n\t\t\t\tqueryParams.suggestfield = this.setting.suggestfield;\r\n\t\t\t\tthis.$dropPanelLoading.show();\r\n\t\t\t\tAppAjax.ajaxCall({\r\n\t\t\t\t\turl: url,\r\n\t\t\t\t\tdata: queryParams,\r\n\t\t\t\t\tdataType: 'json',\r\n\t\t\t\t\ttype: 'POST',\r\n\t\t\t\t\tsuccess: function(data){\r\n\t\t\t\t\t\tthat.$dropPanelLoading.hide();\r\n\t\t\t\t\t\tvar result = [];\r\n\t\t\t\t\t\tif(onlyleaf){\r\n\t\t\t\t\t\t\tfor(var i = 0; i < data.length; i ++){\r\n\t\t\t\t\t\t\t\tif(that._isLeaf(data, data[i]))\r\n\t\t\t\t\t\t\t\t\tresult.push(data[i]);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}else\r\n\t\t\t\t\t\t\tresult = data;\r\n\t\t\t\t\t\tthat._render$SuggestNode(result);\r\n\t\t\t\t\t}\r\n\t\t\t\t});\t\r\n\t\t\t}\r\n\t\t},\r\n\t\t/**\r\n\t\t * 根据本地数据源进行匹配\r\n\t\t * 1、如果存在本地数据源则直接进行匹配\r\n\t\t * 2、如果不存在，本地数据源，则根据suggest资源地址初始化数据源后，再进行匹配\r\n\t\t */\r\n\t\t_suggestByLocal: function(){\r\n\t\t\tthis._initDataByParameter();\r\n\t\t\tif(this.setting.data != undefined){\r\n\t\t\t\tvar suggestData = this._filterByKey();\r\n\t\t\t\tthis._render$SuggestNode(suggestData);\r\n\t\t\t}else{\r\n\t\t\t\tvar url = this.setting.suggest\r\n\t\t\t\t\t,that = this;\r\n\t\t\t\tif(url){\r\n\t\t\t\t\tthis.$dropPanelLoading.show();\r\n\t\t\t\t\tAppAjax.ajaxCall({\r\n\t\t\t\t\t\turl: url,\r\n\t\t\t\t\t\tdata: this.getParameter(),\r\n\t\t\t\t\t\tdataType: 'json',\r\n\t\t\t\t\t\ttype: 'POST',\r\n\t\t\t\t\t\tsuccess: function(data){\r\n\t\t\t\t\t\t\tthat.$dropPanelLoading.hide();\r\n\t\t\t\t\t\t\tthat.setting.data = data;\r\n\t\t\t\t\t\t\tthat._suggestByLocal();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\t\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\t\r\n\t\t/**\r\n\t\t * 根据查询参数重置联想框的数据源\r\n\t\t */\r\n\t\t_initDataByParameter: function(){\r\n\t\t\tvar currParam = this.getParameter();\r\n\t\t\tif(currParam){\r\n\t\t\t\tif(JSON.stringify(this.lastParam) != JSON.stringify(currParam)){\r\n\t\t\t\t\tthis.setting.data = undefined;\r\n\t\t\t\t}\r\n\t\t\t\tthis.lastParam = currParam;\r\n\t\t\t}\r\n\t\t},\r\n\t\t/**\r\n\t\t * 根据数据源按照key模糊匹配节点，并设置联想项\r\n\t\t * @param data 节点数据源数组\r\n\t\t * @param key 匹配关键字\r\n\t\t * @returns {Array} 匹配的节点数组\r\n\t\t */\r\n\t\t_filterByKey: function(){\r\n\t\t\tvar data = this.setting.data\r\n\t\t\t\t,key = this.getText().toUpperCase()\r\n\t\t\t\t,field = this.setting.suggestfield\r\n\t\t\t\t,onlyleaf = this.setting.onlyleaf\r\n\t\t\t\t,result = [];\r\n\t\t\tif(!field){\r\n\t\t\t\tfield = this.setting.textfield;\r\n\t\t\t}\r\n\t\t\tvar fs = field.split(',');\r\n\t\t\tfor(var i = 0; i < data.length; i++){\r\n\t\t\t\tfor ( var j = 0; j < fs.length; j++) {\r\n\t\t\t\t\tvar val = data[i][fs[j]];\r\n\t\t\t\t\tif(val){\r\n\t\t\t\t\t\tval = val.toUpperCase();\t\t\t\t\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\tif(val.indexOf(key) != -1){\r\n\t\t\t\t\t\t\tif(onlyleaf && !this._isLeaf(data, data[i])){\r\n\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tresult.push(data[i]);\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn result;\r\n\t\t},\r\n\t\t/**\r\n\t\t * 当只能选择叶子节点时，判断传入的该节点是否为叶子节点，否则返回true\r\n\t\t * @param id\r\n\t\t */\r\n\t\t_isLeaf: function(data, node){\r\n\t\t\tvar pidfield = this.setting.pidfield\r\n\t\t\t\t,valuefield = this.setting.valuefield;\r\n\t\t\tif(node['isParent'] == 'true' || node['isParent'] == true)\r\n\t\t\t\treturn false;\r\n\t\t\tfor(var i = 0; i < data.length; i++){\r\n\t\t\t\tif(data[i][pidfield] == node[valuefield])\r\n\t\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t\treturn true;\r\n\t\t},\r\n\t\t/**\r\n\t\t * 渲染联想项列表\r\n\t\t */\r\n\t\t_render$SuggestNode: function(data){\r\n\t\t\tthis.$suggestList.html('');\r\n\t\t\tvar vf = this.setting.valuefield\r\n\t\t\t\t,tf = this.setting.textfield\r\n\t\t\t\t,key = this.getText();\r\n\t\t\tif(data.length == 0){\r\n\t\t\t\tthis.$dropPanelEmpty.show();\r\n\t\t\t}else{\r\n\t\t\t\tthis.$dropPanelEmpty.hide();\r\n\t\t\t}\r\n\t\t\tfor ( var i = 0; i < data.length; i++) {\r\n\t\t\t\tvar node = data[i]\r\n\t\t\t\t\t,$suggestItem = $('<li _v=\"' + node[vf] + '\"><i class=\"icon-ok\"></i>' + \r\n\t\t\t\t\t\t\t\t\tthis._getSuggestText(node[tf], key) + '</li>');\r\n\t\t\t\tthis.$suggestList.append($suggestItem);\r\n\t\t\t\tthis._setNode($suggestItem, node);\r\n\t\t\t}\r\n\t\t\tthis._selected$SuggestNode();\r\n\t\t\tif(data.length == 1){\r\n\t\t\t\tthis._locateNextNode();\r\n\t\t\t}\r\n\t\t\tif(this.setting.acceptText){\r\n\t\t\t\tif(data.length == 0){\r\n\t\t\t\t\tthis.hidePanel();\r\n\t\t\t\t}else{\r\n\t\t\t\t\tthis.showPanel();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tthis._resetPanelWidth();\r\n\t\t},\r\n\t\t/**\r\n\t\t * 获取显示名称\r\n\t\t * @param text\r\n\t\t * @param key\r\n\t\t * @returns {String}\r\n\t\t */\r\n\t\t_getSuggestText: function(text, key){\r\n\t\t\tif(key == ''){\r\n\t\t\t\treturn text;\r\n\t\t\t}\r\n\t\t\tvar index = text.indexOf(key);\r\n\t\t\tif(index == -1){\r\n\t\t\t\tindex = text.toUpperCase().indexOf(key.toUpperCase());\r\n\t\t\t\tif(index == -1){\r\n\t\t\t\t\treturn text;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tvar keyLen = key.length;\r\n\t\t\treturn text.substring(0,index) +\r\n\t\t\t\t'<em>' + text.substring(index, index+keyLen) +'</em>' +\r\n\t\t\t\ttext.substring(keyLen + index);\r\n\t\t},\r\n\t\t/**\r\n\t\t * 按照已选节点进行渲染联想项\r\n\t\t */\r\n\t\t_selected$SuggestNode: function(){\r\n\t\t\tvar selectedNode = this.getSelectedNode()\r\n\t\t\t\t,vf = this.setting.valuefield\r\n\t\t\t\t,that = this;\r\n\t\t\tif(!selectedNode){\r\n\t\t\t\tselectedNode = [];\r\n\t\t\t}else{\r\n\t\t\t\tif(!$.isArray(selectedNode)){\r\n\t\t\t\t\tselectedNode = [selectedNode];\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tfor(var i = 0; i < selectedNode.length; i++){\r\n\t\t\t\tvar $select = this.$suggestList.find('li[_v=\"' + selectedNode[i][vf] + '\"]');\r\n\t\t\t\t$select.addClass('selected');\r\n\t\t\t}\r\n\t\t},\r\n\t\t/**\r\n\t\t * <span class=\"type-signature static\">override</span>\r\n\t\t * 显示或隐藏下拉面板，该方法已绑定在组件的右边按钮中\r\n\t\t */\r\n\t\ttogglePanel: function(){\r\n\t\t\t\r\n\t\t},\r\n\t\t/**\r\n\t\t * 显示当前对象的联想面板\r\n\t\t * 1、关闭其他可见的联想面板\r\n\t\t * 2、根据隐藏值进行渲染选择项\r\n\t\t * 3、开启点击html关闭该面板的操作\r\n\t\t */\r\n\t\tshowPanel: function(){\r\n\t\t\tif(this.context && !this.setting.suggestCustomPanel){\r\n\t\t\t\tthis.$dropPanelCustom.hide();\r\n\t\t\t\tthis.$dropPanel.append(this.context.$dropPanelCustom);\r\n\t\t\t}\r\n\t\t\tthis._render$SelectedNode();\r\n\t\t\tthis._showPanel();\r\n\t\t},\r\n\t\t/**\r\n\t\t * 根据隐藏值进行渲染选择项\r\n\t\t * 1、如果已设置显示值，则根据显示值结合隐藏值进行匹配设置，\r\n\t\t * \t\t如果显示值和隐藏值不匹配，则无法完成渲染\r\n\t\t * 2、如果没有设置显示值，而使用本地数据源，则根据隐藏值匹配出显示值，并渲染选择项\r\n\t\t */\r\n\t\t_render$SelectedNode: function(){\r\n\t\t\tthis._resetRender();\r\n\t\t\tthis._reset$SelectedNode();\r\n\t\t\tvar selectedNode = this.getSelectedNode();\r\n\t\t\tif(!selectedNode){\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tif($.isArray(selectedNode)){\r\n\t\t\t\tfor (var i = 0; i < selectedNode.length; i++) {\r\n\t\t\t\t\tthis._appendSelectedItem(selectedNode[i]);\r\n\t\t\t\t}\r\n\t\t\t}else{\r\n\t\t\t\tthis._appendSelectedItem(selectedNode);\r\n\t\t\t}\r\n\t\t},\r\n\t\t/**\r\n\t\t * 设置选中节点\r\n\t\t */\r\n\t\t_reset$SelectedNode: function(){\r\n\t\t\tvar node = this.getSelectedNode();\r\n\t\t\tif(node){\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tvar value = this.getValue();\r\n\t\t\tif(!value){\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tvar vs = value.split(',')\r\n\t\t\t\t,text = this.$text.data('oriText')\r\n\t\t\t\t,vf = this.setting.valuefield\r\n\t\t\t\t,tf = this.setting.textfield\r\n\t\t\t\t,multiple = this.setting.multiple\r\n\t\t\t\t,selectedNode = [];\r\n\t\t\tif(text){\r\n\t\t\t\tvar ts = text.split(',');\r\n\t\t\t\tfor ( var i = 0; i < vs.length; i++) {\r\n\t\t\t\t\tvar node = {};\r\n\t\t\t\t\tnode[vf] = vs[i];\r\n\t\t\t\t\tnode[tf] = ts[i];\r\n\t\t\t\t\tselectedNode.push(node);\r\n\t\t\t\t}\r\n\t\t\t}else if(this._isLocalSuggest()){\r\n\t\t\t\tselectedNode = this._getSelectedNodeByValue(vs);\r\n\t\t\t}\r\n\t\t\tif(multiple){\r\n\t\t\t\tthis.setSelectedNode(selectedNode, true);\r\n\t\t\t}else{\r\n\t\t\t\tthis.setSelectedNode(selectedNode[0], true);\r\n\t\t\t}\r\n\t\t},\r\n\t\t/**\r\n\t\t * 根据隐藏值匹配数据源，并生成选择项数据\r\n\t\t * @param vs 隐藏值数组\r\n\t\t */\r\n\t\t_getSelectedNodeByValue: function(vs){\r\n\t\t\tvar result = []\r\n\t\t\t\t,data = this.setting.data\r\n\t\t\t\t,valueField = this.setting.valuefield;\r\n\t\t\tfor ( var i = 0; i < vs.length; i++) {\r\n\t\t\t\tfor(var j =0; j < data.length; j++){\r\n\t\t\t\t\tif(vs[i] == data[j][valueField]){\r\n\t\t\t\t\t\tresult.push(data[j]);\r\n\t\t\t\t\t\tcontinue;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn result;\r\n\t\t},\r\n\t\t/**\r\n\t\t * 判断是否为本地数据源联想\r\n\t\t * @returns true\r\n\t\t */\r\n\t\t_isLocalSuggest: function(suggest){\r\n\t\t\tif(this.setting.data != undefined \r\n\t\t\t\t\t&& !this.setting.async){\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\t\t\treturn false;\r\n\t\t},\r\n\t\t/**\r\n\t\t * 隐藏联想框\r\n\t\t * 1、关闭html的click.suggest.api事件代理\r\n\t\t * 2、根据当前选择项设置联想框的显示值和隐藏值\r\n\t\t */\r\n\t\thidePanel: function(){\r\n\t\t\tif(this._mainDivIsVisiable()){\r\n\t\t\t\tthis.$dropPanel.hide();\r\n\t\t\t\t$(document).off('click.combo.api');\r\n\t\t\t\tif(!this.setting.acceptText){\r\n\t\t\t\t\tthis.setSelectedNode(this.getSelectedNode());\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\t/**\r\n\t\t * 根据文本生成一个固定节点\r\n\t\t */\r\n\t\t_createSelectedNode: function(text){\r\n\t\t\tvar selectedNode = {};\r\n\t\t\tselectedNode[this.setting.textfield] = text;\r\n\t\t\tselectedNode[this.setting.valuefield] = text;\r\n\t\t\treturn selectedNode;\r\n\t\t},\r\n\t\t/**\r\n\t\t * 获取以选中节点的文本\r\n\t\t */\r\n\t\t_getSelectedNodeText: function(nodes){\r\n\t\t\tif(!nodes){\r\n\t\t\t\treturn '';\r\n\t\t\t}\r\n\t\t\tvar text = ''\r\n\t\t\t\t,tf = this.setting.textfield;\r\n\t\t\tif($.isArray(nodes)){\r\n\t\t\t\tfor(var i = 0; i < nodes.length; i++){\r\n\t\t\t\t\ttext += nodes[i][tf] + ',';\r\n\t\t\t\t}\r\n\t\t\t\tif (text.length > 0 ) text = text.substring(0, text.length-1);\r\n\t\t\t}else{\r\n\t\t\t\ttext = nodes[tf] ? nodes[tf] : '';\r\n\t\t\t}\r\n\t\t\treturn text;\r\n\t\t},\r\n\t\t/**\r\n\t\t * 载入数据，并根据数据渲染下拉面板\r\n\t\t * @param {Array.<Node>} data 载入的数据列表\r\n\t\t * @todo 根据数据渲染下拉面板的内容\r\n\t\t * @todo 设置联想为本地联想\r\n\t\t * @example $('#demo').suggest('loadData',[{id:1,name:'是'},{id:0,name:'否'}]);\r\n\t\t * @memberof suggest-class\r\n\t\t * @instance\r\n\t\t */\r\n\t\tloadData: function(data){\r\n\t\t\tthis.setting.data = data;\r\n\t\t\tthis.setting.remote = false; \r\n\t\t},\r\n\t\t/**\r\n\t\t * 根据url载入数据源作为联想的数据源\r\n\t\t * @param {url} url 要加载的url\r\n\t\t * @todo 根据数据渲染下拉面板的内容\r\n\t\t * @todo 设置联想为本地联想\r\n\t\t * @example $('#demo').combobox('reload','a.do');\r\n\t\t * @memberof suggest-class\r\n\t\t * @instance\r\n\t\t */\r\n\t\treload: function(url){\r\n\t\t\tif(url){\r\n\t\t\t\tvar that = this;\r\n\t\t\t\tthis.$dropPanelLoading.show();\r\n\t\t\t\tAppAjax.ajaxCall({\r\n\t\t\t\t\turl: url,\r\n\t\t\t\t\tdata: this.getParameter(),\r\n\t\t\t\t\tdataType: 'json',\r\n\t\t\t\t\ttype: 'POST',\r\n\t\t\t\t\tsuccess: function(data){\r\n\t\t\t\t\t\tthat.$dropPanelLoading.hide();\r\n\t\t\t\t\t\tthat.loadData(data);\r\n\t\t\t\t\t}\r\n\t\t\t\t});\t\r\n\t\t\t}\r\n\t\t},\r\n\t\t/**\r\n\t\t * <span class=\"type-signature static\">override</span>\r\n\t\t * 清除值\r\n\t\t * @todo 清除隐藏值\r\n\t\t * @todo 清除显示值\r\n\t\t * @todo 清除面板的选择项\r\n\t\t * @memberof suggest-class\r\n\t\t * @instance\r\n\t\t */\r\n\t\tclearValue: function(){\r\n\t\t\tthis.setText('');\r\n\t\t\tthis.setValue('');\r\n\t\t\tthis._resetRender();\r\n\t\t\tthis.setSelectedNode(null);\r\n\t\t},\r\n\t\t/**\r\n\t\t * 重置当前联想项列表的选中状态和已选项项节点\r\n\t\t */\r\n\t\t_resetRender: function(){\r\n\t\t\tthis.$suggestList.find('li.selected').removeClass('selected');\r\n\t\t\tthis.$selectedList.html('');\r\n\t\t},\r\n\t\t/**\r\n\t\t * 根据已选框的选项设置组件的已选节点\r\n\t\t */\r\n\t\t_setSelectedNodeBySltArea: function(){\r\n\t\t\tvar $selectedNodes = this.$selectedList.children()\r\n\t\t\t\t,selectedNode = [];\r\n\t\t\tfor(var i = 0; i< $selectedNodes.length; i++){\r\n\t\t\t\tselectedNode.push(this._getNode($($selectedNodes[i])));\r\n\t\t\t}\r\n\t\t\tif(!this.setting.multiple){\r\n\t\t\t\tselectedNode = selectedNode[0];\r\n\t\t\t\tif(selectedNode == undefined){\r\n\t\t\t\t\tselectedNode = null;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tthis.setSelectedNode(selectedNode, !this.setting.acceptText);\r\n\t\t},\r\n\t\t/**\r\n\t\t * 联想被激发\r\n\t\t * 1、如果存在自定义选择前事件，先执行该事件，如果返回false 则结束选择，否则执行2\r\n\t\t * 2、单选则设值当前选择项为值，并关闭下拉框；多选则追加当前选择项为值\r\n\t\t * 3、如果存在自定义选择后事件，则执行该事件\r\n\t\t * @param $node 被激发的联想项\r\n\t\t */\r\n\t\t_suggestItemActive: function($node){\r\n\t\t\tif(this._isSelected($node)){\r\n\t\t\t\tthis._unselect$SuggestNode($node);\r\n\t\t\t\tthis._setSelectedNodeBySltArea();\r\n\t\t\t}else{\r\n\t\t\t\tthis._select$SuggestNode($node);\r\n\t\t\t}\r\n\t\t},\r\n\t\t/**\r\n\t\t * 判断该节点是否已经被选中\r\n\t\t */\r\n\t\t_isSelected: function($node){\r\n\t\t\treturn $node.hasClass('selected');\r\n\t\t},\r\n\t\t/**\r\n\t\t * 将节点设置为选中的样式\r\n\t\t */\r\n\t\t_select$SuggestNode: function($node){\r\n\t\t\t/**\r\n\t\t\t * 节点被选择前事件，并返回一个值，当为false时取消选择操作\r\n\t\t\t * @event suggest-class#beforeSelected\r\n\t\t\t * @param {Node} node 被选择的节点\r\n\t\t\t * @returns {Boolean} boolean 返回值为false 取消选择\r\n\t\t\t */\r\n\t\t\tif(this._active$NodeEvent('beforeSelected', $node) === false){\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tvar node = this._getNode($node);\r\n\t\t\tif(this.setting.multiple){\r\n\t\t\t\t$node.addClass('selected');\r\n\t\t\t\tthis._appendSelectedItem(node);\r\n\t\t\t\tthis._setSelectedNodeBySltArea();\r\n\t\t\t}else{\r\n\t\t\t\tthis.$suggestList.find('li.selected').removeClass('selected');\r\n\t\t\t\tthis.$selectedList.html('');\r\n\t\t\t\t$node.addClass('selected');\r\n\t\t\t\tthis._appendSelectedItem(node);\r\n\t\t\t\tthis._setSelectedNodeBySltArea();\r\n\t\t\t\tthis.hidePanel();\r\n\t\t\t}\r\n\t\t\t/**\r\n\t\t\t * 节点选择后事件\r\n\t\t\t * @event suggest-class#afterSelected\r\n\t\t\t * @param {Node} node 被选择的节点\r\n\t\t\t */\r\n\t\t\tthis._active$NodeEvent('afterSelected', $node);\r\n\t\t},\r\n\t\t/**\r\n\t\t * 将节点设置为未选中的样式\r\n\t\t */\r\n\t\t_unselect$SuggestNode: function($node){\r\n\t\t\t$node.removeClass('selected');\r\n\t\t\tvar node = this._getNode($node);\r\n\t\t\tthis.$selectedList.find('.selected-item[_v=\"' + node[this.setting.valuefield] + '\"]').remove();\r\n\t\t},\r\n\t\t/**\r\n\t\t * 执行自定义选择前事件\r\n\t\t * @param $node 当前被点击的选择项\r\n\t\t * @returns {Boolean} false 结束点击事件\r\n\t\t */\r\n\t\t_active$NodeEvent: function(eventName, $node){\r\n\t\t\tif(this.hasBindEvent(eventName)){\r\n\t\t\t\treturn this.trigger(eventName, this._getNode($node));\r\n\t\t\t}\r\n\t\t},\r\n\t\t/**\r\n\t\t * 根据Li选择项获取当前节点\r\n\t\t * @param li Li选择项\r\n\t\t * @returns {}\r\n\t\t */\r\n\t\t_getNode: function ($node){\r\n\t\t\treturn $node.data('node');\r\n\t\t},\r\n\t\t/**\r\n\t\t * 设置Li选择项获取当前节点\r\n\t\t * @param li Li选择项\r\n\t\t * @returns {}\r\n\t\t */\r\n\t\t_setNode: function ($node, node){\r\n\t\t\t$node.data('node', node);\r\n\t\t},\r\n\t\t/**\r\n\t\t * 追加选择项到已选面板\r\n\t\t * @param node 节点数据\r\n\t\t */\r\n\t\t_appendSelectedItem: function(node){\r\n\t\t\tif(this.$selectedList.find('.selected-item[_v=\"' + node[this.setting.valuefield] + '\"]').length == 0){\r\n\t\t\t\tvar $selectedNode = $('<div class=\"selected-item\" _v=\"' + node[this.setting.valuefield] + '\">' + \r\n\t\t\t\t\t\tnode[this.setting.textfield] + '<span class=\"sd-close-btn\"></span></div>');\r\n\t\t\t\tthis._setNode($selectedNode, node);\r\n\t\t\t\tthis.$selectedList.append($selectedNode);\r\n\t\t\t}\r\n\t\t}\r\n\t});\r\n\t\r\n\t$.fn.suggest = function (option, value) {\r\n\t\tvar methodReturn = undefined\r\n\t\t\t,args = arguments\r\n\t\t\t,componentName = 'suggest';\r\n\t\tthis.each(function () {\r\n\t\t\tvar $this = $(this);\r\n\t\t\tif(!$this.is('input')){\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\t\t\tvar component = App.getComponent($this, componentName);\r\n\t\t\tif(typeof option === 'string'){\r\n\t\t\t\ttry{\r\n\t\t\t\t\tvar methodArgs = Array.prototype.slice.call(args, 1);\r\n\t\t\t\t\tmethodReturn = App.componentMethodApply(component, option, methodArgs);\r\n\t\t\t\t}catch(e){\r\n\t\t\t\t\tApp.throwCompMethodError($this, componentName, option, e);\r\n\t\t\t\t}\r\n\t\t\t}else{\r\n\t\t\t\tif(!component){\r\n\t\t\t\t\tcomponent = new Suggest(this, option);\r\n\t\t\t\t\t$this.data(componentName, component);\r\n\t\t\t\t}else{\r\n\t\t\t\t\tApp.throwCompInitError($this, componentName);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\t\treturn methodReturn;\r\n\t};\r\n\r\n\treturn Suggest;\r\n});\n",
    "/**\r\n * 下拉框控件--继承Combo\r\n * @author Mr.T\r\n */\r\ndefine('app/widgets/form/app-combobox',['app/core/app-jquery', 'app/core/app-core', \r\n        'app/widgets/form/app-combo', 'app/core/app-options', 'app/widgets/form/app-suggest'],\r\n        function($, App, Combo, Options, Suggest) {\r\n\t'use strict';\r\n\t/**\r\n\t * @class \r\n\t * @classdesc 下拉框\r\n\t * <span class=\"type-signature static\">extend</span>combo\r\n\t * @see {@link combo-class} 查看combo组件\r\n\t * @name combobox-class\r\n\t * @desc 下拉框的初始化方法\r\n\t * @param {DOMElement} input 要渲染的input组件\r\n\t * @param {Object} options 组件的选项设置 \r\n\t * @author Mr.T\r\n\t * @example &lt;input &#9;class=\"app-combobox\"\r\n\t * &#9;_options=\"{\r\n\t * &#9;&#9;action: 'platform/sample/base/ui/suggestData.do',\r\n\t * &#9;&#9;panelheight: 200,\r\n\t * &#9;&#9;tips: '请选择...',\r\n\t * &#9;&#9;formatter: '{code}+{name}',\r\n\t * &#9;&#9;onChange: function(newVal,oldVal){\r\n\t * &#9;&#9;&#9;logOnChange('comboboxLog',newVal,oldVal);\r\n\t * &#9;&#9;}\r\n\t * &#9;}\"\r\n\t * />\r\n\t * @example $('#demo').combobox({\r\n\t * &#9;action: 'platform/sample/base/ui/suggestData.do',\r\n\t * &#9;panelheight: 200,\r\n\t * &#9;tips: '请选择...',\r\n\t * &#9;formatter: '{code}+{name}',\r\n\t * &#9;onChange: function(newVal,oldVal){\r\n\t * &#9;&#9;logOnChange('comboboxLog',newVal,oldVal);\r\n\t * &#9;}\r\n\t * });\r\n\t */\r\n\tvar Combobox = Combo.extend({\r\n\t\tinitialize: function(input, options){\r\n\t\t\tif(!options){\r\n\t\t\t\toptions = {};\r\n\t\t\t}\r\n\t\t\toptions._ = Options.appDefaults.Combobox;\r\n\t\t\tCombobox.superclass.initialize.call(this, input, options);\r\n\t\t\tthis._init();\r\n\t\t},\r\n\t\t/** \r\n\t\t * 初始化\r\n\t\t */\r\n\t\t_init: function(){\r\n\t\t\tthis._initPanelContent();\r\n\t\t\tthis._registEvents();\r\n\t\t\tthis.mapData = {};\r\n\t\t\tif(this.setting.usesuggest){\r\n\t\t\t\tthis._suggest = new Suggest(this.$input, this.options);\r\n\t\t\t\tthis._suggest.context = this;\r\n\t\t\t}\r\n\t\t\tthis._eventRegister();\r\n\t\t\tthis.$input.data('context', this);\r\n\t\t\t/**\r\n\t\t\t * 节点删除事件，当存在该事件时，节点末尾跟随一个删除按钮\r\n\t\t\t * @event combobox-class#onDeleteNode\r\n\t\t\t * @param {Node} node 被选择的节点\r\n\t\t\t */\r\n\t\t\tif($.isFunction(this.setting.onDeleteNode)){\r\n\t\t\t\tthis.setting.nodeDelete = true;\r\n\t\t\t}\r\n\t\t},\r\n\t\t/**\r\n\t\t * 事件注册器\r\n\t\t */\r\n\t\t_eventRegister: function(){\r\n\t\t\tvar s = this.setting;\r\n\t\t\tif($.isFunction(s.afterSelected)){\r\n\t\t\t\tthis.on('afterSelected', s.afterSelected);\r\n\t\t\t}\r\n\t\t\tif($.isFunction(s.beforeSelected)){\r\n\t\t\t\tthis.on('beforeSelected', s.beforeSelected);\r\n\t\t\t}\r\n\t\t\tif($.isFunction(s.onDeleteBtnRender)){\r\n\t\t\t\tthis.on('onDeleteBtnRender', s.onDeleteBtnRender);\r\n\t\t\t}\r\n\t\t\tif($.isFunction(s.onDeleteNode)){\r\n\t\t\t\tthis.on('onDeleteNode', s.onDeleteNode);\r\n\t\t\t}\r\n\t\t\tif($.isFunction(s.onLoadSuccess)){\r\n\t\t\t\tthis.on('onLoadSuccess', s.onLoadSuccess);\r\n\t\t\t}\r\n\t\t\tif($.isFunction(s.addDiyDom)){\r\n\t\t\t\tthis.on('addDiyDom', s.addDiyDom);\r\n\t\t\t}\r\n\t\t\tif($.isFunction(s.addHoverDom)){\r\n\t\t\t\tthis.on('addHoverDom', s.addHoverDom);\r\n\t\t\t}\r\n\t\t\tif($.isFunction(s.removeHoverDom)){\r\n\t\t\t\tthis.on('removeHoverDom', s.removeHoverDom);\r\n\t\t\t}\r\n\t\t},\r\n\t\t/**\r\n\t\t * 注册控件事件\r\n\t\t */\r\n\t\t_registEvents: function(){\r\n\t\t\tvar that = this;\r\n\t\t\tthis.$list.on('click.combobox.api', 'li', function(){\r\n\t\t\t\tthat._clickActive$Node($(this));\r\n\t\t\t});\r\n\t\t\tthis.$list.on('click.combobox-delete.api', '>li>.btn-delete', function(e){\r\n\t\t\t\tthat._clickDelete$Node($(this).parent());\r\n\t\t\t\te.stopPropagation();\r\n\t\t\t});\r\n\t\t\tthis.$list.on('mouseover', '>li', function(e){\r\n\t\t\t\tif(that.hasBindEvent('addHoverDom')){\r\n\t\t\t\t\tvar $this = $(this);\r\n\t\t\t\t\t/**\r\n\t\t\t\t\t * 用于当鼠标移动到节点上时，显示用户自定义控件\r\n\t\t\t\t\t * @todo 请务必与 removeHoverDom 同时使用\r\n\t\t\t\t\t * @event combobox-class#addHoverDom\r\n\t\t\t\t\t * @param {Jquery} $node 下拉项DOM\r\n\t\t\t\t\t * @param {Object} node 下拉项数据\r\n\t\t\t\t\t */\r\n\t\t\t\t\tthat.trigger('addHoverDom', $this, that._getNode($this));\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\tthis.$list.on('mouseout', '>li', function(e){\r\n\t\t\t\tif(that.hasBindEvent('removeHoverDom')){\r\n\t\t\t\t\tvar $this = $(this);\r\n\t\t\t\t\tif($(e.toElement).closest('li').is($this)){\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif($this.hasClass('selected') || $this.hasClass('current')){\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\t\t\t\t\t/**\r\n\t\t\t\t\t * 用于当鼠标移出节点时，隐藏用户自定义控件\r\n\t\t\t\t\t * @todo 请务必与 addHoverDom 同时使用\r\n\t\t\t\t\t * @event combobox-class#removeHoverDom\r\n\t\t\t\t\t * @param {Jquery} $node 下拉项DOM\r\n\t\t\t\t\t * @param {Object} node 下拉项数据\r\n\t\t\t\t\t */\r\n\t\t\t\t\tthat.trigger('removeHoverDom', $this, that._getNode($this));\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t},\r\n\t\t/**\r\n\t\t * 初始化下拉面板的内容\r\n\t\t */\r\n\t\t_initPanelContent: function(){\r\n\t\t\tvar $list = $('<ul class=\"combo-list\"></ul>');\r\n\t\t\t$list.appendTo(this.$dropPanelMain);\r\n\t\t\tthis.$list = $list;\r\n\t\t},\r\n\t\t/**\r\n\t\t * 按键导航事件\r\n\t\t */\r\n\t\t_keyManager: function(e){\r\n\t\t\tif(this._dealSysKey(e)){\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tif(this._isSuggestContext()){//联想框主控 则返回\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tif(this._mainDivIsVisiable()){\r\n\t\t\t\tthis._keyForVisiblePanel(e);\r\n\t\t\t}else{\r\n\t\t\t\tthis._keyForHiddenPanel(e);\r\n\t\t\t}\r\n\t\t},\r\n\t\t/**\r\n\t\t * 面板可见状态下的按键事件处理\r\n\t\t */\r\n\t\t_keyForVisiblePanel: function(e){\r\n\t\t\tvar keyCode = e.keyCode\r\n\t\t\t\t,s = this.setting;\r\n\t\t\te.stopPropagation();\r\n\t\t\tif(App.containKeyCode(e, s.keyNextNode)){\r\n\t\t\t\tthis._keyNextNode(e);\r\n\t\t\t}else if(App.containKeyCode(e, s.keyPrevNode)){\r\n\t\t\t\tthis._keyPrevNode(e);\r\n\t\t\t}else if(App.containKeyCode(e, s.keyPickNode)){\r\n\t\t\t\tthis._keyPickNode(e);\r\n\t\t\t}else if(App.containKeyCode(e, s.keyHidePanel)){\r\n\t\t\t\tthis._keyHidePanel(e);\r\n\t\t\t}else if(this._keyFilterSuggest(e)){\r\n\t\t\t\tthis.suggest();\r\n\t\t\t}\r\n\t\t},\r\n\t\t/**\r\n\t\t * 面板不可见状态下的按键事件处理\r\n\t\t */\r\n\t\t_keyForHiddenPanel: function(e){\r\n\t\t\tvar keyCode = e.keyCode\r\n\t\t\t\t,s = this.setting;\r\n\t\t\tif(App.containKeyCode(e, s.keyShowPanel)){\r\n\t\t\t\tthis._keyShowPanel(e);\r\n\t\t\t}else if(this._isKeyCursorPos(keyCode)){\r\n\t\t\t\tthis._keyCursorPos(e);\r\n\t\t\t}else if(this._keyFilterSuggest(e)){\r\n\t\t\t\tthis.suggest();\r\n\t\t\t}\r\n\t\t},\r\n\t\t/**\r\n\t\t * 定位上一个节点\r\n\t\t */\r\n\t\t_keyPrevNode: function(e){\r\n\t\t\te.preventDefault();\r\n\t\t\tthis._stopSuggest(true);\r\n\t\t\tvar $l = this.$list;\r\n\t\t\tif($l.find('>li').length == 0){\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tvar $c = $l.find('.current')\r\n\t\t\t\t,$n = $c.prev();\r\n\t\t\tif($n.length == 0){\r\n\t\t\t\t$n = $l.find('li:last-child');\r\n\t\t\t}\r\n\t\t\t$c.removeClass('current');\r\n\t\t\t$n.addClass('current');\r\n\t\t\tthis.trigger('addHoverDom', $n, this._getNode($n));\r\n\t\t\tif(!$c.hasClass('selected') && !$c.hasClass('current')){\r\n\t\t\t\tthis.trigger('removeHoverDom', $c, this._getNode($c));\r\n\t\t\t}\r\n\t\t\tthis._locateCurrent();\r\n\t\t},\r\n\t\t/**\r\n\t\t * 定位下一个节点\r\n\t\t */\r\n\t\t_keyNextNode: function(e){\r\n\t\t\te.preventDefault();\r\n\t\t\tthis._stopSuggest(true);\r\n\t\t\tvar $l = this.$list;\r\n\t\t\tif($l.find('>li').length == 0){\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tvar $c = $l.find('.current')\r\n\t\t\t\t,$n = $c.next();\r\n\t\t\tif($n.length == 0){\r\n\t\t\t\t$n = $l.find('li:first-child');\r\n\t\t\t}\r\n\t\t\t$c.removeClass('current');\r\n\t\t\t$n.addClass('current');\r\n\t\t\tthis.trigger('addHoverDom', $n, this._getNode($n));\r\n\t\t\tif(!$c.hasClass('selected') && !$c.hasClass('current')){\r\n\t\t\t\tthis.trigger('removeHoverDom', $c, this._getNode($c));\r\n\t\t\t}\r\n\t\t\tthis._locateCurrent();\r\n\t\t},\r\n\t\t/**\r\n\t\t * 选中一个节点\r\n\t\t */\r\n\t\t_keyPickNode: function(e){\r\n\t\t\te.preventDefault();\r\n\t\t\tthis._stopSuggest(true);\r\n\t\t\tvar $c = this.$list.find('.current');\r\n\t\t\tif($c.length == 0){\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tif(this.setting.multiple){\r\n\t\t\t\tthis._keyNextNode(e);\r\n\t\t\t}\r\n\t\t\tthis._clickActive$Node($c);\r\n\t\t},\r\n\t\t/**\r\n\t\t * 联想项的定位到当前项\r\n\t\t */\r\n\t\t_locateCurrent: function(){\r\n\t\t\tvar $c = this.$list.find('li.current');\r\n\t\t\tif($c.length != 1){\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tvar top = $c.offset().top + $c.outerHeight() - this.$list.offset().top\r\n\t\t\t\t,containerHeight = this.$dropPanel.outerHeight() -2\r\n\t\t\t\t,scrollTop = this.$dropPanel.scrollTop();\r\n\t\t\tif(top <= scrollTop){\r\n\t\t\t\tthis.$dropPanel.scrollTop(top - $c.outerHeight());\r\n\t\t\t}else if(top >= scrollTop + containerHeight){\r\n\t\t\t\tthis.$dropPanel.scrollTop(top - containerHeight);\r\n\t\t\t}\r\n\t\t},\r\n\t\t/**\r\n\t\t * 显示下拉面板\r\n\t\t * @todo 填充下拉面板内容\r\n\t\t * @todo 根据隐藏值渲染选择项\r\n\t\t * @todo 显示面板，根据面板内容进行面板位置的调整\r\n\t\t * @example $('#demo').combobox('showPanel');\r\n\t\t * @memberof combobox-class\r\n\t\t * @instance\r\n\t\t */\r\n\t\tshowPanel: function(){\r\n\t\t\tif(this._suggest){\r\n\t\t\t\tthis.$dropPanel.append(this.$dropPanelCustom);\r\n\t\t\t}\r\n\t\t\tthis._showPanel(function(){\r\n\t\t\t\tthis._initData();\r\n\t\t\t\tthis._rendSelectedItems();\r\n\t\t\t});\r\n\t\t},\r\n\t\t/**\r\n\t\t * <span class=\"type-signature static\">override</span>\r\n\t\t * 显示或隐藏下拉面板，该方法已绑定在组件的右边按钮中\r\n\t\t * @todo 判断当前面板是否可见：\r\n\t\t * @todo 1如果不可见，调用showPanel\r\n\t\t * @todo 2如果可见，则关闭面板\r\n\t\t * @example $('#demo').combobox('togglePanel');\r\n\t\t * @memberof combobox-class\r\n\t\t * @instance\r\n\t\t */\r\n\t\ttogglePanel: function(){\r\n\t\t\tif(this._mainDivIsVisiable()){\r\n\t\t\t\tthis.hidePanel();\r\n\t\t\t}else{\r\n\t\t\t\tthis.showPanel();\r\n\t\t\t}\r\n\t\t},\r\n\t\t/**\r\n\t\t * 载入数据，并根据数据渲染面板中的列表项\r\n\t\t * @param {Array.<Node>} data 载入的数据列表\r\n\t\t * @todo 根据数据渲染下拉面板的内容\r\n\t\t * @todo 如果下拉面板为打开状态，则重新打开面板（由于面板内容改变，可能导致面板高度改变，用于矫正位置）\r\n\t\t * @example $('#demo').combobox('loadData',[{id:1,name:'是'},{id:0,name:'否'}]);\r\n\t\t * @memberof combobox-class\r\n\t\t * @instance\r\n\t\t */\r\n\t\tloadData: function(data){\r\n\t\t\tthis.setting.data = data;\r\n\t\t\tif(this._suggest){\r\n\t\t\t\tthis._suggest.setting.data = data;\r\n\t\t\t\tif(this._suggest.isSuggesting()){\r\n\t\t\t\t\tthis._suggest.refreshSuggest();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tthis._renderData();\r\n\t\t\t//内容填充后，显示面板，重新定位\r\n\t\t\tif(this._mainDivIsVisiable()){\r\n\t\t\t\tthis.place();\r\n\t\t\t}\r\n\t\t},\r\n\t\t/**\r\n\t\t * 在列表末尾加入一个节点\r\n\t\t * @example $('#demo').combobox('appendNode', {id:2, name:'不确定'});\r\n\t\t * @memberof combobox-class\r\n\t\t * @instance\r\n\t\t */\r\n\t\tappendNode: function(node){\r\n\t\t\tif(!node || $.isArray(node)){\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tthis.$dropPanelEmpty.hide();\r\n\t\t\tvar $node = this._create$Node(node);\r\n\t\t\tthis.$list.append($node);\r\n\t\t\tif(this.setting.data){\r\n\t\t\t\t$.merge(this.setting.data, [node]);\r\n\t\t\t}else{\r\n\t\t\t\tthis.setting.data = [node];\r\n\t\t\t}\r\n\t\t\tif(this._suggest && this._suggest.setting){\r\n\t\t\t\tif(this._suggest.setting.data){\r\n\t\t\t\t\t$.merge(this._suggest.setting.data, [node]);\r\n\t\t\t\t}else{\r\n\t\t\t\t\tthis._suggest.setting.data = [node];\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t//内容填充后，显示面板，重新定位\r\n\t\t\tif(this._mainDivIsVisiable()){\r\n\t\t\t\tthis.place();\r\n\t\t\t}\r\n\t\t},\r\n\t\t/**\r\n\t\t * 渲染数据\r\n\t\t */\r\n\t\t_renderData: function(){\r\n\t\t\tvar data = this.setting.data == undefined ? [] : this.setting.data;\r\n\t\t\tthis.$list.empty();\r\n\t\t\tfor ( var i = 0; i < data.length; i++) {\r\n\t\t\t\tvar $node = $(this._create$Node(data[i]));\r\n\t\t\t\tthis.$list.append($node);\r\n\t\t\t\t/**\r\n\t\t\t\t * 用于在节点上固定显示用户自定义控件\r\n\t\t\t\t * @event combobox-class#addDiyDom\r\n\t\t\t\t * @param {Jquery} $node 下拉项DOM\r\n\t\t\t\t * @param {Object} node 下拉项数据\r\n\t\t\t\t */\r\n\t\t\t\tthis.trigger('addDiyDom', $node, data[i]);\r\n\t\t\t}\r\n\t\t\tif(data.length == 0){\r\n\t\t\t\tthis.$dropPanelEmpty.show();\r\n\t\t\t}else{\r\n\t\t\t\tthis.$dropPanelEmpty.hide();\r\n\t\t\t}\r\n\t\t\tthis._resetPanelHeight(data.length);\r\n\t\t\tthis._resetPanelWidth();\r\n\t\t\tthis._rendSelectedItems();\r\n\t\t\tthis._afterDataRender();\r\n\t\t},\r\n\t\t/**\r\n\t\t * 生成一个node节点\r\n\t\t */\r\n\t\t_create$Node: function(node){\r\n\t\t\tvar itemId = App.uuid();\r\n\t\t\tthis.mapData[itemId] = node;\r\n\t\t\treturn '<li id=\"' + itemId + '\" _v=\"' + node[this.setting.valuefield] +\r\n\t\t\t\t\t'\"><i class=\"icon-ok\"></i>' + node[this.setting.textfield] +\r\n\t\t\t\t\t this._create$DeleteNode(node)+ '</li>';\r\n\t\t},\r\n\t\t/**\r\n\t\t * 根据回调过滤节点\r\n\t\t */\r\n\t\t_create$DeleteNode: function(node){\r\n\t\t\tvar html = '';\r\n\t\t\tif(this.hasBindEvent('onDeleteBtnRender')){\r\n\t\t\t\t/**\r\n\t\t\t\t * 节点的删除按钮过滤器\r\n\t\t\t\t * @event combobox-class#onDeleteBtnRender\r\n\t\t\t\t * @param {Node} node 要渲染的节点\r\n\t\t\t\t * @returns {Boolean} boolean 返回值为true 需要一个删除按钮\r\n\t\t\t\t */\r\n\t\t\t\tif(this.trigger('onDeleteBtnRender', node) === true){\r\n\t\t\t\t\thtml = '<i class=\"btn-delete\"></i>';\r\n\t\t\t\t}\r\n\t\t\t}else{\r\n\t\t\t\thtml = this.hasBindEvent('onDeleteNode')?'<i class=\"btn-delete\"></i>':'';\r\n\t\t\t}\r\n\t\t\treturn html;\r\n\t\t},\r\n\t\t/**\r\n\t\t * 选择项点击事件\r\n\t\t * 1、如果存在自定义选中前事件，先执行该事件，如果返回false则结束选择，否则执行2\r\n\t\t * 2、单选则设值当前选择项为值，并关闭下拉框；多选则追加当前选择项为值\r\n\t\t * 3、如果存在自定义选中后事件，则执行该事件\r\n\t\t * @param $node\r\n\t\t */\r\n\t\t_clickActive$Node: function($node){\r\n\t\t\tif(this._isSelected($node) && this.setting.multiple){\r\n\t\t\t\tthis._unselect$Node($node);\r\n\t\t\t\tthis._setSelectedNodeBy$Node();\r\n\t\t\t}else{\r\n\t\t\t\t/**\r\n\t\t\t\t * 节点选择前事件，并返回一个值，当为false时取消选择操作\r\n\t\t\t\t * @event combobox-class#beforeSelected\r\n\t\t\t\t * @param {Node} node 被选择的节点\r\n\t\t\t\t * @returns {Boolean} boolean 返回值为false 取消选择\r\n\t\t\t\t */\r\n\t\t\t\tif(this._activeItemEvent('beforeSelected', $node) === false){\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tthis._select$Node($node);\r\n\t\t\t\tthis._setSelectedNodeBy$Node();\r\n\t\t\t\t/**\r\n\t\t\t\t * 节点选择后事件\r\n\t\t\t\t * @event combobox-class#afterSelected\r\n\t\t\t\t * @param {Node} node 被选择的节点\r\n\t\t\t\t */\r\n\t\t\t\tthis._activeItemEvent('afterSelected', $node);\r\n\t\t\t}\r\n\t\t},\r\n\t\t/**\r\n\t\t * 激活节点点击事件\r\n\t\t * @param li 当前被点击的选择项\r\n\t\t * @returns {Boolean} false 结束点击事件\r\n\t\t */\r\n\t\t_activeItemEvent: function(eventName, $node){\r\n\t\t\tif(this.hasBindEvent(eventName)){\r\n\t\t\t\treturn this.trigger(eventName, this._getNode($node));\r\n\t\t\t}\r\n\t\t},\r\n\t\t/**\r\n\t\t * 判断该节点是否已经被选中\r\n\t\t */\r\n\t\t_isSelected: function($node){\r\n\t\t\treturn $node.hasClass('selected');\r\n\t\t},\r\n\t\t/**\r\n\t\t * 点击删除按钮\r\n\t\t */\r\n\t\t_clickDelete$Node: function($node){\r\n\t\t\tif(this.hasBindEvent('onDeleteNode')){\r\n\t\t\t\tthis.trigger('onDeleteNode', this._getNode($node), $node.index());\r\n\t\t\t}\r\n\t\t},\r\n\t\t/**\r\n\t\t * 根据行号删除节点\r\n\t\t * @param {Number} index 已删除的行号\r\n\t\t * @example $('#demo').combobox('deleteNode', 1);\r\n\t\t * @memberof combobox-class\r\n\t\t * @instance\r\n\t\t */\r\n\t\tdeleteNode: function(index){\r\n\t\t\tvar type = typeof(index)\r\n\t\t\t\t,exp = '';\r\n\t\t\tif(!isNaN(index)){\r\n\t\t\t\texp = '>li:eq(' + index + ')';\r\n\t\t\t}else if(type == 'string'){\r\n\t\t\t\texp = '>li[_v=\"' + index + '\"]';\r\n\t\t\t}else if(type == 'object'){\r\n\t\t\t\texp = '>li[_v=\"' + index[this.setting.valuefield] + '\"]';\r\n\t\t\t}\r\n\t\t\tvar $node = this.$list.find(exp);\r\n\t\t\tif($node.length == 1){\r\n\t\t\t\tthis._delete$Node($node);\r\n\t\t\t}\r\n\t\t\tif(this.$list.find('li').length == 0){\r\n\t\t\t\tthis.$dropPanelEmpty.show();\r\n\t\t\t}\r\n\t\t},\r\n\t\t/**\r\n\t\t * 删除节点\r\n\t\t */\r\n\t\t_delete$Node: function($node){\r\n\t\t\tif(this._isSelected($node)){\r\n\t\t\t\tthis._unselect$Node($node);\r\n\t\t\t\tthis._setSelectedNodeBy$Node();\r\n\t\t\t}\r\n\t\t\tvar node = this.mapData[$node.attr('id')]\r\n\t\t\t\t,vf = this.setting.valuefield;\r\n\t\t\tif(this._suggest){\r\n\t\t\t\tvar data = this._suggest.setting.data;\r\n\t\t\t\tfor(var i = 0; i < data.length; i++){\r\n\t\t\t\t\tif(data[i][vf] == node[vf]){\r\n\t\t\t\t\t\tdata.splice(i, 1);\r\n\t\t\t\t\t\tthis._suggest.prevKey = undefined;//清除关键字 重新开始搜索\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tdelete this.mapData[$node.attr('id')];\r\n\t\t\t$node.remove();\r\n\t\t},\r\n\t\t/**\r\n\t\t * 将节点设置为选中的样式\r\n\t\t */\r\n\t\t_select$Node: function($node){\r\n\t\t\tif(this.setting.multiple){\r\n\t\t\t\t$node.addClass('selected');\r\n\t\t\t}else{\r\n\t\t\t\tvar $selectedNode = this.$list.find('li.selected');\r\n\t\t\t\t$selectedNode.removeClass('selected');\r\n//\t\t\t\tif($selectedNode.attr('id') != $node.attr('id')){\r\n\t\t\t\t\t$node.addClass('selected');\r\n\t\t\t\t\tthis.hidePanel();\r\n//\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\t/**\r\n\t\t * 将节点设置为未选中的样式\r\n\t\t */\r\n\t\t_unselect$Node: function($node){\r\n\t\t\t$node.removeClass('selected');\r\n\t\t},\r\n\t\t/**\r\n\t\t * 根据已选的节点设置选中的项\r\n\t\t */\r\n\t\t_setSelectedNodeBy$Node: function(){\r\n\t\t\tvar result = null\r\n\t\t\t\t,nodes = []\r\n\t\t\t\t,$nodes = this.$list.find('li.selected');\r\n\t\t\tfor(var i = 0,l = $nodes.length; i < l; i++){\r\n\t\t\t\tvar node = this._getNode($($nodes[i]));\r\n\t\t\t\tnodes.push(node);\r\n\t\t\t}\r\n\t\t\tif(this.setting.multiple){\r\n\t\t\t\tresult = nodes;\r\n\t\t\t}else{\r\n\t\t\t\tresult = nodes[0];\r\n\t\t\t\tif(result == undefined){\r\n\t\t\t\t\tresult = null;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tthis.setSelectedNode(result);\r\n\t\t},\r\n\t\t/**\r\n\t\t * 根据选择项获取当前节点\r\n\t\t * @param $node 选择项\r\n\t\t * @returns {}\r\n\t\t */\r\n\t\t_getNode: function($node){\r\n\t\t\treturn this.mapData[$node.attr('id')];\r\n\t\t},\r\n\t\t/**\r\n\t\t * 根据当前下拉框的隐藏值查询出相关的选择项，\r\n\t\t * 渲染选择项为选中状态，并根据值设置显示值\r\n\t\t */\r\n\t\t_rendSelectedItems: function(){\r\n\t\t\tthis._clearSelectedItems();\r\n\t\t\tthis._render$NodeByValue();\r\n\t\t},\r\n\t\t/**\r\n\t\t * 根据value等值匹配出选择项\r\n\t\t * @result 值属于value的选择项\r\n\t\t */\r\n\t\t_render$NodeByValue: function(){\r\n\t\t\tvar vs = this.getValue().split(',');\r\n\t\t\tfor ( var i = 0; i < vs.length; i++) {\r\n\t\t\t\tthis.$list.find('li[_v=\"' + vs[i] + '\"]').addClass('selected');\r\n\t\t\t}\r\n\t\t},\r\n\t\t/**\r\n\t\t * 根据传入的url进行远程加载数据并渲染\r\n\t\t * @param {url} url 要载入的url\r\n\t\t * @todo 请求时并加入parameter参数，获取到数据后调用loadData\r\n\t\t * @example $('#demo').combobox('reload','a.do');\r\n\t\t * @memberof combobox-class\r\n\t\t * @instance\r\n\t\t */\r\n\t\treload: function(url){\r\n\t\t\tthis._ajax(url, function(data){\r\n\t\t\t\tthis.loadData(data);\r\n\t\t\t});\r\n\t\t},\r\n\t\t/**\r\n\t\t * <span class=\"type-signature static\">override</span>\r\n\t\t * 清除值\r\n\t\t * @todo 清除隐藏值\r\n\t\t * @todo 清除显示值\r\n\t\t * @todo 清除下拉面板的选择项\r\n\t\t * @memberof combobox-class\r\n\t\t * @instance\r\n\t\t */\r\n\t\tclearValue: function(){\r\n\t\t\tthis.setText('');\r\n\t\t\tthis.setValue('');\r\n\t\t\tthis._clearSelectedItems();\r\n\t\t},\r\n\t\t/**\r\n\t\t * 清除选择项的样式\r\n\t\t */\r\n\t\t_clearSelectedItems: function(){\r\n\t\t\tthis.$list.find('li.selected').removeClass('selected');\r\n\t\t}\r\n\t});\r\n\t$.fn.combobox = function (option, value) {\r\n\t\tvar methodReturn = undefined\r\n\t\t\t,args = arguments\r\n\t\t\t,componentName = 'combobox';\r\n\t\tthis.each(function () {\r\n\t\t\tvar $this = $(this);\r\n\t\t\tif(!$this.is('input')){\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\t\t\tvar component = App.getComponent($this, componentName);\r\n\t\t\tif(typeof option === 'string'){\r\n\t\t\t\ttry{\r\n\t\t\t\t\tvar methodArgs = Array.prototype.slice.call(args, 1);\r\n\t\t\t\t\tmethodReturn = App.componentMethodApply(component, option, methodArgs);\r\n\t\t\t\t\t\r\n\t\t\t\t\tif(option == 'on' && component._suggest){\r\n\t\t\t\t\t\tcomponent._suggest.on.apply(component._suggest, methodArgs);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif(option == 'bind' && component._suggest){\r\n\t\t\t\t\t\tcomponent._suggest.bind.apply(component._suggest, methodArgs);\r\n\t\t\t\t\t}\r\n\t\t\t\t}catch(e){\r\n\t\t\t\t\tApp.throwCompMethodError($this, componentName, option, e);\r\n\t\t\t\t}\r\n\t\t\t}else{\r\n\t\t\t\tif(!component){\r\n\t\t\t\t\tcomponent = new Combobox(this, option);\r\n\t\t\t\t\t$this.data(componentName, component);\r\n\t\t\t\t}else{\r\n\t\t\t\t\tApp.throwCompInitError($this, componentName);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\t\treturn methodReturn;\r\n\t};\r\n\treturn $;\r\n});\n",
    "/* =========================================================\r\n * bootstrap-datetimepicker.js\r\n * =========================================================\r\n * Copyright 2012 Stefan Petre\r\n * Improvements by Andrew Rowls\r\n * Improvements by Sébastien Malot\r\n * Improvements by Yun Lai\r\n * Project URL : http://www.malot.fr/bootstrap-datetimepicker\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n * http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n * ========================================================= */\r\n\r\n/*\r\n * Improvement by CuGBabyBeaR @ 2013-09-12\r\n * \r\n * Make it work in bootstrap v3\r\n */\r\n\r\n!function ($) {\r\n\r\n\tfunction UTCDate() {\r\n\t\treturn new Date(Date.UTC.apply(Date, arguments));\r\n\t}\r\n\r\n\tfunction UTCToday() {\r\n\t\tvar today = new Date();\r\n\t\treturn UTCDate(today.getUTCFullYear(), today.getUTCMonth(), today.getUTCDate(), today.getUTCHours(), today.getUTCMinutes(), today.getUTCSeconds(), 0);\r\n\t}\r\n\r\n\t// Picker object\r\n\r\n\tvar Datetimepicker = function (element, options) {\r\n\t\tvar that = this;\r\n\r\n\t\t\r\n\t\tthis.element = $(element);\r\n\t\tif (options._datetime){\r\n\t\t\t\r\n\t\t\tthis._datetime=options._datetime;\r\n\t\t}\r\n\t\t\r\n\t\tthis.language = options.language || this.element.data('date-language') || \"en\";\r\n\t\tthis.language = this.language in dates ? this.language : \"en\";\r\n\t\tthis.isRTL = dates[this.language].rtl || false;\r\n\t\tthis.formatType = options.formatType || this.element.data('format-type') || 'standard';\r\n\t\tthis.format = DPGlobal.parseFormat(options.format || this.element.data('date-format') || dates[this.language].format || DPGlobal.getDefaultFormat(this.formatType, 'input'), this.formatType);\r\n\t\tthis.isInline = false;\r\n\t\tthis.isVisible = false;\r\n\t\tthis.isInput = this.element.is('input');\r\n\r\n\t\tthis.bootcssVer = this.isInput ? (this.element.is('.form-control') ? 3 : 2) : ( this.bootcssVer = this.element.is('.input-group') ? 3 : 2 );\r\n\r\n\t\tthis.component = this.element.is('.date') ? ( this.bootcssVer == 3 ? this.element.find('.input-group-addon .glyphicon-th, .input-group-addon .glyphicon-time, .input-group-addon .glyphicon-calendar').parent() : this.element.find('.add-on .icon-th, .add-on .icon-time, .add-on .icon-calendar').parent()) : false;\r\n\t\tthis.componentReset = this.element.is('.date') ? ( this.bootcssVer == 3 ? this.element.find('.input-group-addon .glyphicon-remove').parent() : this.element.find('.add-on .icon-remove').parent()) : false;\r\n\t\tthis.hasInput = this.component && this.element.find('input').length;\r\n\t\tif (this.component && this.component.length === 0) {\r\n\t\t\tthis.component = false;\r\n\t\t}\r\n\t\tthis.linkField = options.linkField || this.element.data('link-field') || false;\r\n\t\tthis.linkFormat = DPGlobal.parseFormat(options.linkFormat || this.element.data('link-format') || DPGlobal.getDefaultFormat(this.formatType, 'link'), this.formatType);\r\n\t\tthis.minuteStep = options.minuteStep || this.element.data('minute-step') || 5;\r\n\t\tthis.pickerPosition = options.pickerPosition || this.element.data('picker-position') || 'bottom-right';\r\n\t\tthis.showMeridian = options.showMeridian || this.element.data('show-meridian') || false;\r\n\t\tthis.initialDate = options.initialDate || new Date();\r\n\r\n\t\tthis._attachEvents();\r\n\r\n\t\tthis.formatViewType = \"datetime\";\r\n\t\tif ('formatViewType' in options) {\r\n\t\t\tthis.formatViewType = options.formatViewType;\r\n\t\t} else if ('formatViewType' in this.element.data()) {\r\n\t\t\tthis.formatViewType = this.element.data('formatViewType');\r\n\t\t}\r\n\r\n\t\tthis.minView = 0;\r\n\t\tif ('minView' in options) {\r\n\t\t\tthis.minView = options.minView;\r\n\t\t} else if ('minView' in this.element.data()) {\r\n\t\t\tthis.minView = this.element.data('min-view');\r\n\t\t}\r\n\t\tthis.minView = DPGlobal.convertViewMode(this.minView);\r\n\r\n\t\tthis.maxView = DPGlobal.modes.length - 1;\r\n\t\tif ('maxView' in options) {\r\n\t\t\tthis.maxView = options.maxView;\r\n\t\t} else if ('maxView' in this.element.data()) {\r\n\t\t\tthis.maxView = this.element.data('max-view');\r\n\t\t}\r\n\t\tthis.maxView = DPGlobal.convertViewMode(this.maxView);\r\n\r\n\t\tthis.wheelViewModeNavigation = false;\r\n\t\tif ('wheelViewModeNavigation' in options) {\r\n\t\t\tthis.wheelViewModeNavigation = options.wheelViewModeNavigation;\r\n\t\t} else if ('wheelViewModeNavigation' in this.element.data()) {\r\n\t\t\tthis.wheelViewModeNavigation = this.element.data('view-mode-wheel-navigation');\r\n\t\t}\r\n\r\n\t\tthis.wheelViewModeNavigationInverseDirection = false;\r\n\r\n\t\tif ('wheelViewModeNavigationInverseDirection' in options) {\r\n\t\t\tthis.wheelViewModeNavigationInverseDirection = options.wheelViewModeNavigationInverseDirection;\r\n\t\t} else if ('wheelViewModeNavigationInverseDirection' in this.element.data()) {\r\n\t\t\tthis.wheelViewModeNavigationInverseDirection = this.element.data('view-mode-wheel-navigation-inverse-dir');\r\n\t\t}\r\n\r\n\t\tthis.wheelViewModeNavigationDelay = 100;\r\n\t\tif ('wheelViewModeNavigationDelay' in options) {\r\n\t\t\tthis.wheelViewModeNavigationDelay = options.wheelViewModeNavigationDelay;\r\n\t\t} else if ('wheelViewModeNavigationDelay' in this.element.data()) {\r\n\t\t\tthis.wheelViewModeNavigationDelay = this.element.data('view-mode-wheel-navigation-delay');\r\n\t\t}\r\n\r\n\t\tthis.startViewMode = 2;\r\n\t\tif ('startView' in options) {\r\n\t\t\tthis.startViewMode = options.startView;\r\n\t\t} else if ('startView' in this.element.data()) {\r\n\t\t\tthis.startViewMode = this.element.data('start-view');\r\n\t\t}\r\n\t\tthis.startViewMode = DPGlobal.convertViewMode(this.startViewMode);\r\n\t\tthis.viewMode = this.startViewMode;\r\n\r\n\t\tthis.viewSelect = this.minView;\r\n\t\tif ('viewSelect' in options) {\r\n\t\t\tthis.viewSelect = options.viewSelect;\r\n\t\t} else if ('viewSelect' in this.element.data()) {\r\n\t\t\tthis.viewSelect = this.element.data('view-select');\r\n\t\t}\r\n\t\tthis.viewSelect = DPGlobal.convertViewMode(this.viewSelect);\r\n\r\n\t\tthis.forceParse = true;\r\n\t\tif ('forceParse' in options) {\r\n\t\t\tthis.forceParse = options.forceParse;\r\n\t\t} else if ('dateForceParse' in this.element.data()) {\r\n\t\t\tthis.forceParse = this.element.data('date-force-parse');\r\n\t\t}\r\n\r\n\t\tthis.picker = $((this.bootcssVer == 3) ? DPGlobal.templateV3 : DPGlobal.template)\r\n\t\t\t.appendTo(this.isInline ? this.element : 'body>.appPanelContainer')//将面板移动到appPanelContainer元素中 统一管理 Mr.T2014年11月20日15:52:17\r\n\t\t\t.on({\r\n\t\t\t\tclick:     $.proxy(this.click, this),\r\n\t\t\t\tmousedown: $.proxy(this.mousedown, this)\r\n\t\t\t});\r\n\r\n\t\tif (this.wheelViewModeNavigation) {\r\n\t\t\tif ($.fn.mousewheel) {\r\n\t\t\t\tthis.picker.on({mousewheel: $.proxy(this.mousewheel, this)});\r\n\t\t\t} else {\r\n\t\t\t\tconsole.log(\"Mouse Wheel event is not supported. Please include the jQuery Mouse Wheel plugin before enabling this option\");\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif (this.isInline) {\r\n\t\t\tthis.picker.addClass('datetimepicker-inline');\r\n\t\t} else {\r\n\t\t\tthis.picker.addClass('datetimepicker-dropdown-' + this.pickerPosition + ' dropdown-menu');\r\n\t\t}\r\n\t\tif (this.isRTL) {\r\n\t\t\tthis.picker.addClass('datetimepicker-rtl');\r\n\t\t\tif (this.bootcssVer == 3) {\r\n\t\t\t\tthis.picker.find('.prev span, .next span')\r\n\t\t\t\t\t.toggleClass('glyphicon-arrow-left glyphicon-arrow-right');\r\n\t\t\t} else {\r\n\t\t\t\tthis.picker.find('.prev i, .next i')\r\n\t\t\t\t\t.toggleClass('icon-arrow-left icon-arrow-right');\r\n\t\t\t}\r\n\t\t\t;\r\n\r\n\t\t}\r\n\t\t$(document).on('mousedown', function (e) {\r\n\t\t\t// Clicked outside the datetimepicker, hide it\r\n\t\t\tif ($(e.target).closest('.datetimepicker').length === 0) {\r\n\t\t\t\tthat.hide();\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\tthis.autoclose = false;\r\n\t\tif ('autoclose' in options) {\r\n\t\t\tthis.autoclose = options.autoclose;\r\n\t\t} else if ('dateAutoclose' in this.element.data()) {\r\n\t\t\tthis.autoclose = this.element.data('date-autoclose');\r\n\t\t}\r\n\r\n\t\tthis.keyboardNavigation = true;\r\n\t\tif ('keyboardNavigation' in options) {\r\n\t\t\tthis.keyboardNavigation = options.keyboardNavigation;\r\n\t\t} else if ('dateKeyboardNavigation' in this.element.data()) {\r\n\t\t\tthis.keyboardNavigation = this.element.data('date-keyboard-navigation');\r\n\t\t}\r\n\r\n\t\tthis.todayBtn = (options.todayBtn || this.element.data('date-today-btn') || false);\r\n\t\tthis.todayHighlight = (options.todayHighlight || this.element.data('date-today-highlight') || false);\r\n\r\n\t\tthis.weekStart = ((options.weekStart || this.element.data('date-weekstart') || dates[this.language].weekStart || 0) % 7);\r\n\t\tthis.weekEnd = ((this.weekStart + 6) % 7);\r\n\t\tthis.startDate = -Infinity;\r\n\t\tthis.endDate = Infinity;\r\n\t\tthis.daysOfWeekDisabled = [];\r\n\t\tthis.setStartDate(options.startDate || this.element.data('date-startdate'));\r\n\t\tthis.setEndDate(options.endDate || this.element.data('date-enddate'));\r\n\t\tthis.setDaysOfWeekDisabled(options.daysOfWeekDisabled || this.element.data('date-days-of-week-disabled'));\r\n\t\tthis.fillDow();\r\n\t\tthis.fillMonths();\r\n\t\tthis.update();\r\n\t\tthis.showMode();\r\n\r\n\t\tif (this.isInline) {\r\n\t\t\tthis.show();\r\n\t\t}\r\n\t};\r\n\r\n\tDatetimepicker.prototype = {\r\n\t\tconstructor: Datetimepicker,\r\n\r\n\t\t_events:       [],\r\n\t\t_attachEvents: function () {\r\n\t\t\tthis._detachEvents();\r\n\t\t\tif (this.isInput) { // single input\r\n\t\t\t\tthis._events = [\r\n\t\t\t\t\t[this.element, {\r\n\t\t\t\t\t\tfocus:   $.proxy(this.show, this),\r\n\t\t\t\t\t\tkeyup:   $.proxy(this.update, this),\r\n\t\t\t\t\t\tkeydown: $.proxy(this.keydown, this)\r\n\t\t\t\t\t}]\r\n\t\t\t\t];\r\n\t\t\t}\r\n\t\t\telse if (this.component && this.hasInput) { // component: input + button\r\n\t\t\t\tthis._events = [\r\n\t\t\t\t\t// For components that are not readonly, allow keyboard nav\r\n\t\t\t\t\t[this.element.find('input'), {\r\n\t\t\t\t\t\tfocus:   $.proxy(this.show, this),\r\n\t\t\t\t\t\tkeyup:   $.proxy(this.update, this),\r\n\t\t\t\t\t\tkeydown: $.proxy(this.keydown, this)\r\n\t\t\t\t\t}],\r\n\t\t\t\t\t[this.component, {\r\n\t\t\t\t\t\tclick: $.proxy(this.show, this)\r\n\t\t\t\t\t}]\r\n\t\t\t\t];\r\n\t\t\t\tif (this.componentReset) {\r\n\t\t\t\t\tthis._events.push([\r\n\t\t\t\t\t\tthis.componentReset,\r\n\t\t\t\t\t\t{click: $.proxy(this.reset, this)}\r\n\t\t\t\t\t]);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\telse if (this.element.is('div')) {  // inline datetimepicker\r\n\t\t\t\tthis.isInline = true;\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tthis._events = [\r\n\t\t\t\t\t[this.element, {\r\n\t\t\t\t\t\tclick: $.proxy(this.show, this)\r\n\t\t\t\t\t}]\r\n\t\t\t\t];\r\n\t\t\t}\r\n\t\t\tfor (var i = 0, el, ev; i < this._events.length; i++) {\r\n\t\t\t\tel = this._events[i][0];\r\n\t\t\t\tev = this._events[i][1];\r\n\t\t\t\tel.on(ev);\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\t_detachEvents: function () {\r\n\t\t\tfor (var i = 0, el, ev; i < this._events.length; i++) {\r\n\t\t\t\tel = this._events[i][0];\r\n\t\t\t\tev = this._events[i][1];\r\n\t\t\t\tel.off(ev);\r\n\t\t\t}\r\n\t\t\tthis._events = [];\r\n\t\t},\r\n\r\n\t\tshow: function (e) {\r\n\t\t\tthis.picker.show();\r\n\t\t\tthis.height = this.component ? this.component.outerHeight() : this.element.outerHeight();\r\n\t\t\tif (this.forceParse) {\r\n\t\t\t\tthis.update();\r\n\t\t\t}\r\n\t\t\tthis.place();\r\n\t\t\t$(window).on('resize', $.proxy(this.place, this));\r\n\t\t\tif (e) {\r\n\t\t\t\te.stopPropagation();\r\n\t\t\t\te.preventDefault();\r\n\t\t\t}\r\n\t\t\tthis.isVisible = true;\r\n\t\t\tthis.element.trigger({\r\n\t\t\t\ttype: 'show',\r\n\t\t\t\tdate: this.date\r\n\t\t\t});\r\n\t\t},\r\n\r\n\t\thide: function (e) {\r\n\t\t\tif (!this.isVisible) return;\r\n\t\t\tif (this.isInline) return;\r\n\t\t\tthis.picker.hide();\r\n\t\t\t$(window).off('resize', this.place);\r\n\t\t\tthis.viewMode = this.startViewMode;\r\n\t\t\tthis.showMode();\r\n\t\t\tif (!this.isInput) {\r\n\t\t\t\t$(document).off('mousedown', this.hide);\r\n\t\t\t}\r\n\r\n\t\t\tif (\r\n\t\t\t\tthis.forceParse &&\r\n\t\t\t\t\t(\r\n\t\t\t\t\t\tthis.isInput && this.element.val() ||\r\n\t\t\t\t\t\t\tthis.hasInput && this.element.find('input').val()\r\n\t\t\t\t\t\t)\r\n\t\t\t\t)\r\n\t\t\t\tthis.setValue();\r\n\t\t\tthis.isVisible = false;\r\n\t\t\tthis.element.trigger({\r\n\t\t\t\ttype: 'hide',\r\n\t\t\t\tdate: this.date,\r\n\t\t\t\tisPropagationStopped:function(){return true}\r\n\t\t\t});\r\n\t\t},\r\n\r\n\t\tremove: function () {\r\n\t\t\tthis._detachEvents();\r\n\t\t\tthis.picker.remove();\r\n\t\t\tdelete this.picker;\r\n\t\t\tdelete this.element.data().datetimepicker;\r\n\t\t},\r\n\r\n\t\tgetDate: function () {\r\n\t\t\tvar d = this.getUTCDate();\r\n\t\t\treturn new Date(d.getTime() + (d.getTimezoneOffset() * 60000));\r\n\t\t},\r\n\r\n\t\tgetUTCDate: function () {\r\n\t\t\treturn this.date;\r\n\t\t},\r\n\r\n\t\tsetDate: function (d) {\r\n\t\t\tthis.setUTCDate(new Date(d.getTime() - (d.getTimezoneOffset() * 60000)));\r\n\t\t},\r\n\r\n\t\tsetUTCDate: function (d) {\r\n\t\t\tif (d >= this.startDate && d <= this.endDate) {\r\n\t\t\t\tthis.date = d;\r\n\t\t\t\tthis.setValue();\r\n\t\t\t\tthis.viewDate = this.date;\r\n\t\t\t\tthis.fill();\r\n\t\t\t} else {\r\n\t\t\t\tthis.element.trigger({\r\n\t\t\t\t\ttype:      'outOfRange',\r\n\t\t\t\t\tdate:      d,\r\n\t\t\t\t\tstartDate: this.startDate,\r\n\t\t\t\t\tendDate:   this.endDate\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\tsetFormat: function (format) {\r\n\t\t\tthis.format = DPGlobal.parseFormat(format, this.formatType);\r\n\t\t\tvar element;\r\n\t\t\tif (this.isInput) {\r\n\t\t\t\telement = this.element;\r\n\t\t\t} else if (this.component) {\r\n\t\t\t\telement = this.element.find('input');\r\n\t\t\t}\r\n\t\t\tif (element && element.val()) {\r\n\t\t\t\tthis.setValue();\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\tsetValue: function () {\r\n\t\t\tvar formatted = this.getFormattedDate();\r\n\t\t\tif (!this.isInput) {\r\n\t\t\t\tif (this.component) {\r\n\t\t\t\t\tthis.element.find('input').val(formatted);\r\n\t\t\t\t}\r\n\t\t\t\tthis.element.data('date', formatted);\r\n\t\t\t} else {\r\n\t\t\t\tthis.element.val(formatted);\r\n\t\t\t}\r\n\t\t\tif (this.linkField) {\r\n\t\t\t\t$('#' + this.linkField).val(this.getFormattedDate(this.linkFormat));\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\tgetFormattedDate: function (format) {\r\n\t\t\tif (format == undefined) format = this.format;\r\n\t\t\treturn DPGlobal.formatDate(this.date, format, this.language, this.formatType);\r\n\t\t},\r\n\r\n\t\tsetStartDate: function (startDate) {\r\n\t\t\tthis.startDate = startDate || -Infinity;\r\n\t\t\tif (this.startDate !== -Infinity) {\r\n\t\t\t\tthis.startDate = DPGlobal.parseDate(this.startDate, this.format, this.language, this.formatType);\r\n\t\t\t}\r\n\t\t\tthis.update();\r\n\t\t\tthis.updateNavArrows();\r\n\t\t},\r\n\r\n\t\tsetEndDate: function (endDate) {\r\n\t\t\tthis.endDate = endDate || Infinity;\r\n\t\t\tif (this.endDate !== Infinity) {\r\n\t\t\t\tthis.endDate = DPGlobal.parseDate(this.endDate, this.format, this.language, this.formatType);\r\n\t\t\t}\r\n\t\t\tthis.update();\r\n\t\t\tthis.updateNavArrows();\r\n\t\t},\r\n\r\n\t\tsetDaysOfWeekDisabled: function (daysOfWeekDisabled) {\r\n\t\t\tthis.daysOfWeekDisabled = daysOfWeekDisabled || [];\r\n\t\t\tif (!$.isArray(this.daysOfWeekDisabled)) {\r\n\t\t\t\tthis.daysOfWeekDisabled = this.daysOfWeekDisabled.split(/,\\s*/);\r\n\t\t\t}\r\n\t\t\tthis.daysOfWeekDisabled = $.map(this.daysOfWeekDisabled, function (d) {\r\n\t\t\t\treturn parseInt(d, 10);\r\n\t\t\t});\r\n\t\t\tthis.update();\r\n\t\t\tthis.updateNavArrows();\r\n\t\t},\r\n\r\n\t\tplace: function () {\r\n\t\t\tif (this.isInline) return;\r\n\r\n\t\t\tvar index_highest = 0;\r\n\t\t\t$('div').each(function () {\r\n\t\t\t\tvar index_current = parseInt($(this).css(\"zIndex\"), 10);\r\n\t\t\t\tif (index_current > index_highest) {\r\n\t\t\t\t\tindex_highest = index_current;\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\tvar zIndex = index_highest + 10;\r\n\r\n\t\t\tvar offset, top, left;\r\n\t\t\tif (this.component) {\r\n\t\t\t\toffset = this.component.offset();\r\n\t\t\t\tleft = offset.left;\r\n\t\t\t\tif (this.pickerPosition == 'bottom-left' || this.pickerPosition == 'top-left') {\r\n\t\t\t\t\tleft += this.component.outerWidth() - this.picker.outerWidth();\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\toffset = this.element.offset();\r\n\t\t\t\tleft = offset.left;\r\n\t\t\t}\r\n\t\t\tif (this.pickerPosition == 'top-left' || this.pickerPosition == 'top-right') {\r\n\t\t\t\ttop = offset.top - this.picker.outerHeight();\r\n\t\t\t} else {\r\n\t\t\t\ttop = offset.top + this.height;\r\n\t\t\t}\r\n\t\t\tthis.picker.css({\r\n\t\t\t\ttop:    top,\r\n\t\t\t\tleft:   left,\r\n\t\t\t\tzIndex: zIndex\r\n\t\t\t});\r\n\t\t},\r\n\r\n\t\tupdate: function () {\r\n\t\t\tvar date, fromArgs = false;\r\n\t\t\tif (arguments && arguments.length && (typeof arguments[0] === 'string' || arguments[0] instanceof Date)) {\r\n\t\t\t\tdate = arguments[0];\r\n\t\t\t\tfromArgs = true;\r\n\t\t\t} else {\r\n\t\t\t\tdate = this.element.data('date') || (this.isInput ? this.element.val() : this.element.find('input').val()) || this.initialDate;\r\n\t\t\t\tif (typeof date == 'string' || date instanceof String) {\r\n\t\t\t\t  date = date.replace(/^\\s+|\\s+$/g,'');\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tif (!date) {\r\n\t\t\t\tdate = new Date();\r\n\t\t\t\tfromArgs = false;\r\n\t\t\t}\r\n\r\n\t\t\tthis.date = DPGlobal.parseDate(date, this.format, this.language, this.formatType);\r\n\r\n\t\t\tif (fromArgs) this.setValue();\r\n\r\n\t\t\tif (this.date < this.startDate) {\r\n\t\t\t\tthis.viewDate = new Date(this.startDate);\r\n\t\t\t} else if (this.date > this.endDate) {\r\n\t\t\t\tthis.viewDate = new Date(this.endDate);\r\n\t\t\t} else {\r\n\t\t\t\t//设置相应的日期 Mr.T 2014年10月25日\r\n\t\t\t\tthis._setDateConvenient();\r\n\t\t\t\tthis.viewDate = new Date(this.date);\r\n\t\t\t}\r\n\t\t\tthis.fill();\r\n\t\t},\r\n\r\n\t\tfillDow: function () {\r\n\t\t\tvar dowCnt = this.weekStart,\r\n\t\t\t\thtml = '<tr>';\r\n\t\t\twhile (dowCnt < this.weekStart + 7) {\r\n\t\t\t\thtml += '<th class=\"dow\">' + dates[this.language].daysMin[(dowCnt++) % 7] + '</th>';\r\n\t\t\t}\r\n\t\t\thtml += '</tr>';\r\n\t\t\tthis.picker.find('.datetimepicker-days thead').append(html);\r\n\t\t},\r\n\r\n\t\tfillMonths: function () {\r\n\t\t\tvar html = '',\r\n\t\t\t\ti = 0;\r\n\t\t\twhile (i < 12) {\r\n\t\t\t\thtml += '<span class=\"month\">' + dates[this.language].monthsShort[i++] + '</span>';\r\n\t\t\t}\r\n\t\t\tthis.picker.find('.datetimepicker-months td').html(html);\r\n\t\t},\r\n\r\n\t\tfill: function () {\r\n\t\t\tif (this.date == null || this.viewDate == null) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tvar d = new Date(this.viewDate),\r\n\t\t\t\tyear = d.getUTCFullYear(),\r\n\t\t\t\tmonth = d.getUTCMonth(),\r\n\t\t\t\tdayMonth = d.getUTCDate(),\r\n\t\t\t\thours = d.getUTCHours(),\r\n\t\t\t\tminutes = d.getUTCMinutes(),\r\n\t\t\t\tstartYear = this.startDate !== -Infinity ? this.startDate.getUTCFullYear() : -Infinity,\r\n\t\t\t\tstartMonth = this.startDate !== -Infinity ? this.startDate.getUTCMonth() : -Infinity,\r\n\t\t\t\tendYear = this.endDate !== Infinity ? this.endDate.getUTCFullYear() : Infinity,\r\n\t\t\t\tendMonth = this.endDate !== Infinity ? this.endDate.getUTCMonth() : Infinity,\r\n\t\t\t\tcurrentDate = (new UTCDate(this.date.getUTCFullYear(), this.date.getUTCMonth(), this.date.getUTCDate())).valueOf(),\r\n\t\t\t\ttoday = new Date();\r\n\t\t\tthis.picker.find('.datetimepicker-days thead th:eq(1)')\r\n\t\t\t\t.text(dates[this.language].months[month] + ' ' + year);\r\n\t\t\tif (this.formatViewType == \"time\") {\r\n\t\t\t\tvar hourConverted = hours % 12 ? hours % 12 : 12;\r\n\t\t\t\tvar hoursDisplay = (hourConverted < 10 ? '0' : '') + hourConverted;\r\n\t\t\t\tvar minutesDisplay = (minutes < 10 ? '0' : '') + minutes;\r\n\t\t\t\tvar meridianDisplay = dates[this.language].meridiem[hours < 12 ? 0 : 1];\r\n\t\t\t\tthis.picker.find('.datetimepicker-hours thead th:eq(1)')\r\n\t\t\t\t\t.text(hoursDisplay + ':' + minutesDisplay + ' ' + meridianDisplay.toUpperCase());\r\n\t\t\t\tthis.picker.find('.datetimepicker-minutes thead th:eq(1)')\r\n\t\t\t\t\t.text(hoursDisplay + ':' + minutesDisplay + ' ' + meridianDisplay.toUpperCase());\r\n\t\t\t} else {\r\n\t\t\t\tthis.picker.find('.datetimepicker-hours thead th:eq(1)')\r\n\t\t\t\t\t.text(dayMonth + ' ' + dates[this.language].months[month] + ' ' + year);\r\n\t\t\t\tthis.picker.find('.datetimepicker-minutes thead th:eq(1)')\r\n\t\t\t\t\t.text(dayMonth + ' ' + dates[this.language].months[month] + ' ' + year);\r\n\t\t\t}\r\n\t\t\tthis.picker.find('tfoot th.today')\r\n\t\t\t\t.text(dates[this.language].today)\r\n\t\t\t\t.toggle(this.todayBtn !== false);\r\n\t\t\tthis.updateNavArrows();\r\n\t\t\tthis.fillMonths();\r\n\t\t\t/*var prevMonth = UTCDate(year, month, 0,0,0,0,0);\r\n\t\t\t prevMonth.setUTCDate(prevMonth.getDate() - (prevMonth.getUTCDay() - this.weekStart + 7)%7);*/\r\n\t\t\tvar prevMonth = UTCDate(year, month - 1, 28, 0, 0, 0, 0),\r\n\t\t\t\tday = DPGlobal.getDaysInMonth(prevMonth.getUTCFullYear(), prevMonth.getUTCMonth());\r\n\t\t\tprevMonth.setUTCDate(day);\r\n\t\t\tprevMonth.setUTCDate(day - (prevMonth.getUTCDay() - this.weekStart + 7) % 7);\r\n\t\t\tvar nextMonth = new Date(prevMonth);\r\n\t\t\tnextMonth.setUTCDate(nextMonth.getUTCDate() + 42);\r\n\t\t\tnextMonth = nextMonth.valueOf();\r\n\t\t\tvar html = [];\r\n\t\t\tvar clsName;\r\n\t\t\twhile (prevMonth.valueOf() < nextMonth) {\r\n\t\t\t\tif (prevMonth.getUTCDay() == this.weekStart) {\r\n\t\t\t\t\thtml.push('<tr>');\r\n\t\t\t\t}\r\n\t\t\t\tclsName = '';\r\n\t\t\t\tif (prevMonth.getUTCFullYear() < year || (prevMonth.getUTCFullYear() == year && prevMonth.getUTCMonth() < month)) {\r\n\t\t\t\t\tclsName += ' old';\r\n\t\t\t\t} else if (prevMonth.getUTCFullYear() > year || (prevMonth.getUTCFullYear() == year && prevMonth.getUTCMonth() > month)) {\r\n\t\t\t\t\tclsName += ' new';\r\n\t\t\t\t}\r\n\t\t\t\t// Compare internal UTC date with local today, not UTC today\r\n\t\t\t\tif (this.todayHighlight &&\r\n\t\t\t\t\tprevMonth.getUTCFullYear() == today.getFullYear() &&\r\n\t\t\t\t\tprevMonth.getUTCMonth() == today.getMonth() &&\r\n\t\t\t\t\tprevMonth.getUTCDate() == today.getDate()) {\r\n\t\t\t\t\tclsName += ' today';\r\n\t\t\t\t}\r\n\t\t\t\tif (prevMonth.valueOf() == currentDate) {\r\n\t\t\t\t\tclsName += ' active';\r\n\t\t\t\t}\r\n\t\t\t\tif ((prevMonth.valueOf() + 86400000) <= this.startDate || prevMonth.valueOf() > this.endDate ||\r\n\t\t\t\t\t$.inArray(prevMonth.getUTCDay(), this.daysOfWeekDisabled) !== -1) {\r\n\t\t\t\t\tclsName += ' disabled';\r\n\t\t\t\t}\r\n\t\t\t\thtml.push('<td class=\"day' + clsName + '\">' + prevMonth.getUTCDate() + '</td>');\r\n\t\t\t\tif (prevMonth.getUTCDay() == this.weekEnd) {\r\n\t\t\t\t\thtml.push('</tr>');\r\n\t\t\t\t}\r\n\t\t\t\tprevMonth.setUTCDate(prevMonth.getUTCDate() + 1);\r\n\t\t\t}\r\n\t\t\tthis.picker.find('.datetimepicker-days tbody').empty().append(html.join(''));\r\n\r\n\t\t\thtml = [];\r\n\t\t\tvar txt = '', meridian = '', meridianOld = '';\r\n\t\t\tfor (var i = 0; i < 24; i++) {\r\n\t\t\t\tvar actual = UTCDate(year, month, dayMonth, i);\r\n\t\t\t\tclsName = '';\r\n\t\t\t\t// We want the previous hour for the startDate\r\n\t\t\t\tif ((actual.valueOf() + 3600000) <= this.startDate || actual.valueOf() > this.endDate) {\r\n\t\t\t\t\tclsName += ' disabled';\r\n\t\t\t\t} else if (hours == i) {\r\n\t\t\t\t\tclsName += ' active';\r\n\t\t\t\t}\r\n\t\t\t\tif (this.showMeridian && dates[this.language].meridiem.length == 2) {\r\n\t\t\t\t\tmeridian = (i < 12 ? dates[this.language].meridiem[0] : dates[this.language].meridiem[1]);\r\n\t\t\t\t\tif (meridian != meridianOld) {\r\n\t\t\t\t\t\tif (meridianOld != '') {\r\n\t\t\t\t\t\t\thtml.push('</fieldset>');\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\thtml.push('<fieldset class=\"hour\"><legend>' + meridian.toUpperCase() + '</legend>');\r\n\t\t\t\t\t}\r\n\t\t\t\t\tmeridianOld = meridian;\r\n\t\t\t\t\ttxt = (i % 12 ? i % 12 : 12);\r\n\t\t\t\t\thtml.push('<span class=\"hour' + clsName + ' hour_' + (i < 12 ? 'am' : 'pm') + '\">' + txt + '</span>');\r\n\t\t\t\t\tif (i == 23) {\r\n\t\t\t\t\t\thtml.push('</fieldset>');\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\ttxt = i + ':00';\r\n\t\t\t\t\thtml.push('<span class=\"hour' + clsName + '\">' + txt + '</span>');\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tthis.picker.find('.datetimepicker-hours td').html(html.join(''));\r\n\r\n\t\t\thtml = [];\r\n\t\t\ttxt = '', meridian = '', meridianOld = '';\r\n\t\t\tfor (var i = 0; i < 60; i += this.minuteStep) {\r\n\t\t\t\tvar actual = UTCDate(year, month, dayMonth, hours, i, 0);\r\n\t\t\t\tclsName = '';\r\n\t\t\t\tif (actual.valueOf() < this.startDate || actual.valueOf() > this.endDate) {\r\n\t\t\t\t\tclsName += ' disabled';\r\n\t\t\t\t} else if (Math.floor(minutes / this.minuteStep) == Math.floor(i / this.minuteStep)) {\r\n\t\t\t\t\tclsName += ' active';\r\n\t\t\t\t}\r\n\t\t\t\tif (this.showMeridian && dates[this.language].meridiem.length == 2) {\r\n\t\t\t\t\tmeridian = (hours < 12 ? dates[this.language].meridiem[0] : dates[this.language].meridiem[1]);\r\n\t\t\t\t\tif (meridian != meridianOld) {\r\n\t\t\t\t\t\tif (meridianOld != '') {\r\n\t\t\t\t\t\t\thtml.push('</fieldset>');\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\thtml.push('<fieldset class=\"minute\"><legend>' + meridian.toUpperCase() + '</legend>');\r\n\t\t\t\t\t}\r\n\t\t\t\t\tmeridianOld = meridian;\r\n\t\t\t\t\ttxt = (hours % 12 ? hours % 12 : 12);\r\n\t\t\t\t\t//html.push('<span class=\"minute'+clsName+' minute_'+(hours<12?'am':'pm')+'\">'+txt+'</span>');\r\n\t\t\t\t\thtml.push('<span class=\"minute' + clsName + '\">' + txt + ':' + (i < 10 ? '0' + i : i) + '</span>');\r\n\t\t\t\t\tif (i == 59) {\r\n\t\t\t\t\t\thtml.push('</fieldset>');\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\ttxt = i + ':00';\r\n\t\t\t\t\t//html.push('<span class=\"hour'+clsName+'\">'+txt+'</span>');\r\n\t\t\t\t\thtml.push('<span class=\"minute' + clsName + '\">' + hours + ':' + (i < 10 ? '0' + i : i) + '</span>');\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tthis.picker.find('.datetimepicker-minutes td').html(html.join(''));\r\n\r\n\t\t\tvar currentYear = this.date.getUTCFullYear();\r\n\t\t\tvar months = this.picker.find('.datetimepicker-months')\r\n\t\t\t\t.find('th:eq(1)')\r\n\t\t\t\t.text(year)\r\n\t\t\t\t.end()\r\n\t\t\t\t.find('span').removeClass('active');\r\n\t\t\tif (currentYear == year) {\r\n\t\t\t\tmonths.eq(this.date.getUTCMonth()).addClass('active');\r\n\t\t\t}\r\n\t\t\tif (year < startYear || year > endYear) {\r\n\t\t\t\tmonths.addClass('disabled');\r\n\t\t\t}\r\n\t\t\tif (year == startYear) {\r\n\t\t\t\tmonths.slice(0, startMonth).addClass('disabled');\r\n\t\t\t}\r\n\t\t\tif (year == endYear) {\r\n\t\t\t\tmonths.slice(endMonth + 1).addClass('disabled');\r\n\t\t\t}\r\n\r\n\t\t\thtml = '';\r\n\t\t\tyear = parseInt(year / 10, 10) * 10;\r\n\t\t\tvar yearCont = this.picker.find('.datetimepicker-years')\r\n\t\t\t\t.find('th:eq(1)')\r\n\t\t\t\t.text(year + '-' + (year + 9))\r\n\t\t\t\t.end()\r\n\t\t\t\t.find('td');\r\n\t\t\tyear -= 1;\r\n\t\t\tfor (var i = -1; i < 11; i++) {\r\n\t\t\t\thtml += '<span class=\"year' + (i == -1 || i == 10 ? ' old' : '') + (currentYear == year ? ' active' : '') + (year < startYear || year > endYear ? ' disabled' : '') + '\">' + year + '</span>';\r\n\t\t\t\tyear += 1;\r\n\t\t\t}\r\n\t\t\tyearCont.html(html);\r\n\t\t\tthis.place();\r\n\t\t},\r\n\r\n\t\tupdateNavArrows: function () {\r\n\t\t\tvar d = new Date(this.viewDate),\r\n\t\t\t\tyear = d.getUTCFullYear(),\r\n\t\t\t\tmonth = d.getUTCMonth(),\r\n\t\t\t\tday = d.getUTCDate(),\r\n\t\t\t\thour = d.getUTCHours();\r\n\t\t\tswitch (this.viewMode) {\r\n\t\t\t\tcase 0:\r\n\t\t\t\t\tif (this.startDate !== -Infinity && year <= this.startDate.getUTCFullYear()\r\n\t\t\t\t\t\t&& month <= this.startDate.getUTCMonth()\r\n\t\t\t\t\t\t&& day <= this.startDate.getUTCDate()\r\n\t\t\t\t\t\t&& hour <= this.startDate.getUTCHours()) {\r\n\t\t\t\t\t\tthis.picker.find('.prev').css({visibility: 'hidden'});\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tthis.picker.find('.prev').css({visibility: 'visible'});\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (this.endDate !== Infinity && year >= this.endDate.getUTCFullYear()\r\n\t\t\t\t\t\t&& month >= this.endDate.getUTCMonth()\r\n\t\t\t\t\t\t&& day >= this.endDate.getUTCDate()\r\n\t\t\t\t\t\t&& hour >= this.endDate.getUTCHours()) {\r\n\t\t\t\t\t\tthis.picker.find('.next').css({visibility: 'hidden'});\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tthis.picker.find('.next').css({visibility: 'visible'});\r\n\t\t\t\t\t}\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 1:\r\n\t\t\t\t\tif (this.startDate !== -Infinity && year <= this.startDate.getUTCFullYear()\r\n\t\t\t\t\t\t&& month <= this.startDate.getUTCMonth()\r\n\t\t\t\t\t\t&& day <= this.startDate.getUTCDate()) {\r\n\t\t\t\t\t\tthis.picker.find('.prev').css({visibility: 'hidden'});\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tthis.picker.find('.prev').css({visibility: 'visible'});\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (this.endDate !== Infinity && year >= this.endDate.getUTCFullYear()\r\n\t\t\t\t\t\t&& month >= this.endDate.getUTCMonth()\r\n\t\t\t\t\t\t&& day >= this.endDate.getUTCDate()) {\r\n\t\t\t\t\t\tthis.picker.find('.next').css({visibility: 'hidden'});\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tthis.picker.find('.next').css({visibility: 'visible'});\r\n\t\t\t\t\t}\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 2:\r\n\t\t\t\t\tif (this.startDate !== -Infinity && year <= this.startDate.getUTCFullYear()\r\n\t\t\t\t\t\t&& month <= this.startDate.getUTCMonth()) {\r\n\t\t\t\t\t\tthis.picker.find('.prev').css({visibility: 'hidden'});\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tthis.picker.find('.prev').css({visibility: 'visible'});\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (this.endDate !== Infinity && year >= this.endDate.getUTCFullYear()\r\n\t\t\t\t\t\t&& month >= this.endDate.getUTCMonth()) {\r\n\t\t\t\t\t\tthis.picker.find('.next').css({visibility: 'hidden'});\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tthis.picker.find('.next').css({visibility: 'visible'});\r\n\t\t\t\t\t}\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 3:\r\n\t\t\t\tcase 4:\r\n\t\t\t\t\tif (this.startDate !== -Infinity && year <= this.startDate.getUTCFullYear()) {\r\n\t\t\t\t\t\tthis.picker.find('.prev').css({visibility: 'hidden'});\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tthis.picker.find('.prev').css({visibility: 'visible'});\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (this.endDate !== Infinity && year >= this.endDate.getUTCFullYear()) {\r\n\t\t\t\t\t\tthis.picker.find('.next').css({visibility: 'hidden'});\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tthis.picker.find('.next').css({visibility: 'visible'});\r\n\t\t\t\t\t}\r\n\t\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\tmousewheel: function (e) {\r\n\r\n\t\t\te.preventDefault();\r\n\t\t\te.stopPropagation();\r\n\r\n\t\t\tif (this.wheelPause) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tthis.wheelPause = true;\r\n\r\n\t\t\tvar originalEvent = e.originalEvent;\r\n\r\n\t\t\tvar delta = originalEvent.wheelDelta;\r\n\r\n\t\t\tvar mode = delta > 0 ? 1 : (delta === 0) ? 0 : -1;\r\n\r\n\t\t\tif (this.wheelViewModeNavigationInverseDirection) {\r\n\t\t\t\tmode = -mode;\r\n\t\t\t}\r\n\r\n\t\t\tthis.showMode(mode);\r\n\r\n\t\t\tsetTimeout($.proxy(function () {\r\n\r\n\t\t\t\tthis.wheelPause = false\r\n\r\n\t\t\t}, this), this.wheelViewModeNavigationDelay);\r\n\r\n\t\t},\r\n\r\n\t\tclick: function (e) {\r\n\t\t\te.stopPropagation();\r\n\t\t\te.preventDefault();\r\n\t\t\tvar target = $(e.target).closest('span, td, th, legend');\r\n\t\t\tif (target.length == 1) {\r\n\t\t\t\tif (target.is('.disabled')) {\r\n\t\t\t\t\tthis.element.trigger({\r\n\t\t\t\t\t\ttype:      'outOfRange',\r\n\t\t\t\t\t\tdate:      this.viewDate,\r\n\t\t\t\t\t\tstartDate: this.startDate,\r\n\t\t\t\t\t\tendDate:   this.endDate\r\n\t\t\t\t\t});\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tswitch (target[0].nodeName.toLowerCase()) {\r\n\t\t\t\t\tcase 'th':\r\n\t\t\t\t\t\tswitch (target[0].className) {\r\n\t\t\t\t\t\t\tcase 'switch':\r\n\t\t\t\t\t\t\t\tthis.showMode(1);\r\n\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\tcase 'prev':\r\n\t\t\t\t\t\t\tcase 'next':\r\n\t\t\t\t\t\t\t\tvar dir = DPGlobal.modes[this.viewMode].navStep * (target[0].className == 'prev' ? -1 : 1);\r\n\t\t\t\t\t\t\t\tswitch (this.viewMode) {\r\n\t\t\t\t\t\t\t\t\tcase 0:\r\n\t\t\t\t\t\t\t\t\t\tthis.viewDate = this.moveHour(this.viewDate, dir);\r\n\t\t\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\t\t\tcase 1:\r\n\t\t\t\t\t\t\t\t\t\tthis.viewDate = this.moveDate(this.viewDate, dir);\r\n\t\t\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\t\t\tcase 2:\r\n\t\t\t\t\t\t\t\t\t\tthis.viewDate = this.moveMonth(this.viewDate, dir);\r\n\t\t\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\t\t\tcase 3:\r\n\t\t\t\t\t\t\t\t\tcase 4:\r\n\t\t\t\t\t\t\t\t\t\tthis.viewDate = this.moveYear(this.viewDate, dir);\r\n\t\t\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tthis.fill();\r\n\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\tcase 'today':\r\n\t\t\t\t\t\t\t\tvar date = new Date();\r\n\t\t\t\t\t\t\t\tdate = UTCDate(date.getFullYear(), date.getMonth(), date.getDate(), date.getHours(), date.getMinutes(), date.getSeconds(), 0);\r\n\r\n\t\t\t\t\t\t\t\t// Respect startDate and endDate.\r\n\t\t\t\t\t\t\t\tif (date < this.startDate) date = this.startDate;\r\n\t\t\t\t\t\t\t\telse if (date > this.endDate) date = this.endDate;\r\n\r\n\t\t\t\t\t\t\t\tthis.viewMode = this.startViewMode;\r\n\t\t\t\t\t\t\t\tthis.showMode(0);\r\n\t\t\t\t\t\t\t\tthis._setDate(date);\r\n\t\t\t\t\t\t\t\tthis.fill();\r\n\t\t\t\t\t\t\t\tif (this.autoclose) {\r\n\t\t\t\t\t\t\t\t\tthis.hide();\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase 'span':\r\n\t\t\t\t\t\tif (!target.is('.disabled')) {\r\n\t\t\t\t\t\t\tvar year = this.viewDate.getUTCFullYear(),\r\n\t\t\t\t\t\t\t\tmonth = this.viewDate.getUTCMonth(),\r\n\t\t\t\t\t\t\t\tday = this.viewDate.getUTCDate(),\r\n\t\t\t\t\t\t\t\thours = this.viewDate.getUTCHours(),\r\n\t\t\t\t\t\t\t\tminutes = this.viewDate.getUTCMinutes(),\r\n\t\t\t\t\t\t\t\tseconds = this.viewDate.getUTCSeconds();\r\n\r\n\t\t\t\t\t\t\tif (target.is('.month')) {\r\n\t\t\t\t\t\t\t\tthis.viewDate.setUTCDate(1);\r\n\t\t\t\t\t\t\t\tmonth = target.parent().find('span').index(target);\r\n\t\t\t\t\t\t\t\tday = this.viewDate.getUTCDate();\r\n\t\t\t\t\t\t\t\tthis.viewDate.setUTCMonth(month);\r\n\t\t\t\t\t\t\t\tthis.element.trigger({\r\n\t\t\t\t\t\t\t\t\ttype: 'changeMonth',\r\n\t\t\t\t\t\t\t\t\tdate: this.viewDate\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\tif (this.viewSelect >= 3) {\r\n\t\t\t\t\t\t\t\t\tthis._setDate(UTCDate(year, month, day, hours, minutes, seconds, 0));\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t} else if (target.is('.year')) {\r\n\t\t\t\t\t\t\t\tthis.viewDate.setUTCDate(1);\r\n\t\t\t\t\t\t\t\tyear = parseInt(target.text(), 10) || 0;\r\n\t\t\t\t\t\t\t\tthis.viewDate.setUTCFullYear(year);\r\n\t\t\t\t\t\t\t\tthis.element.trigger({\r\n\t\t\t\t\t\t\t\t\ttype: 'changeYear',\r\n\t\t\t\t\t\t\t\t\tdate: this.viewDate\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\tif (this.viewSelect >= 4) {\r\n\t\t\t\t\t\t\t\t\tthis._setDate(UTCDate(year, month, day, hours, minutes, seconds, 0));\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t} else if (target.is('.hour')) {\r\n\t\t\t\t\t\t\t\thours = parseInt(target.text(), 10) || 0;\r\n\t\t\t\t\t\t\t\tif (target.hasClass('hour_am') || target.hasClass('hour_pm')) {\r\n\t\t\t\t\t\t\t\t\tif (hours == 12 && target.hasClass('hour_am')) {\r\n\t\t\t\t\t\t\t\t\t\thours = 0;\r\n\t\t\t\t\t\t\t\t\t} else if (hours != 12 && target.hasClass('hour_pm')) {\r\n\t\t\t\t\t\t\t\t\t\thours += 12;\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tthis.viewDate.setUTCHours(hours);\r\n\t\t\t\t\t\t\t\tthis.element.trigger({\r\n\t\t\t\t\t\t\t\t\ttype: 'changeHour',\r\n\t\t\t\t\t\t\t\t\tdate: this.viewDate\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\tif (this.viewSelect >= 1) {\r\n\t\t\t\t\t\t\t\t\tthis._setDate(UTCDate(year, month, day, hours, minutes, seconds, 0));\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t} else if (target.is('.minute')) {\r\n\t\t\t\t\t\t\t\tminutes = parseInt(target.text().substr(target.text().indexOf(':') + 1), 10) || 0;\r\n\t\t\t\t\t\t\t\tthis.viewDate.setUTCMinutes(minutes);\r\n\t\t\t\t\t\t\t\tthis.element.trigger({\r\n\t\t\t\t\t\t\t\t\ttype: 'changeMinute',\r\n\t\t\t\t\t\t\t\t\tdate: this.viewDate\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\tif (this.viewSelect >= 0) {\r\n\t\t\t\t\t\t\t\t\tthis._setDate(UTCDate(year, month, day, hours, minutes, seconds, 0));\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tif (this.viewMode != 0) {\r\n\t\t\t\t\t\t\t\tvar oldViewMode = this.viewMode;\r\n\t\t\t\t\t\t\t\tthis.showMode(-1);\r\n\t\t\t\t\t\t\t\tthis.fill();\r\n\t\t\t\t\t\t\t\tif (oldViewMode == this.viewMode && this.autoclose) {\r\n\t\t\t\t\t\t\t\t\tthis.hide();\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tthis.fill();\r\n\t\t\t\t\t\t\t\tif (this.autoclose) {\r\n\t\t\t\t\t\t\t\t\tthis.hide();\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase 'td':\r\n\t\t\t\t\t\tif (target.is('.day') && !target.is('.disabled')) {\r\n\t\t\t\t\t\t\tvar day = parseInt(target.text(), 10) || 1;\r\n\t\t\t\t\t\t\tvar year = this.viewDate.getUTCFullYear(),\r\n\t\t\t\t\t\t\t\tmonth = this.viewDate.getUTCMonth(),\r\n\t\t\t\t\t\t\t\thours = this.viewDate.getUTCHours(),\r\n\t\t\t\t\t\t\t\tminutes = this.viewDate.getUTCMinutes(),\r\n\t\t\t\t\t\t\t\tseconds = this.viewDate.getUTCSeconds();\r\n\t\t\t\t\t\t\tif (target.is('.old')) {\r\n\t\t\t\t\t\t\t\tif (month === 0) {\r\n\t\t\t\t\t\t\t\t\tmonth = 11;\r\n\t\t\t\t\t\t\t\t\tyear -= 1;\r\n\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\tmonth -= 1;\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t} else if (target.is('.new')) {\r\n\t\t\t\t\t\t\t\tif (month == 11) {\r\n\t\t\t\t\t\t\t\t\tmonth = 0;\r\n\t\t\t\t\t\t\t\t\tyear += 1;\r\n\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\tmonth += 1;\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tthis.viewDate.setUTCFullYear(year);\r\n\t\t\t\t\t\t\tthis.viewDate.setUTCMonth(month, day);\r\n\t\t\t\t\t\t\tthis.element.trigger({\r\n\t\t\t\t\t\t\t\ttype: 'changeDay',\r\n\t\t\t\t\t\t\t\tdate: this.viewDate\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\tif (this.viewSelect >= 2) {\r\n\t\t\t\t\t\t\t\tthis._setDate(UTCDate(year, month, day, hours, minutes, seconds, 0));\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tvar oldViewMode = this.viewMode;\r\n\t\t\t\t\t\tthis.showMode(-1);\r\n\t\t\t\t\t\tthis.fill();\r\n\t\t\t\t\t\tif (oldViewMode == this.viewMode && this.autoclose) {\r\n\t\t\t\t\t\t\tthis.hide();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\t_setDate: function (date, which) {\r\n\t\t\tif (!which || which == 'date')\r\n\t\t\t\tthis.date = date;\r\n\t\t\tif (!which || which == 'view')\r\n\t\t\t\tthis.viewDate = date;\r\n\t\t\tthis.fill();\r\n\t\t\tthis.setValue();\r\n\t\t\tvar element;\r\n\t\t\tif (this.isInput) {\r\n\t\t\t\telement = this.element;\r\n\t\t\t} else if (this.component) {\r\n\t\t\t\telement = this.element.find('input');\r\n\t\t\t}\r\n\t\t\tif (element) {\r\n\t\t\t\telement.change();\r\n\t\t\t\tif (this.autoclose && (!which || which == 'date')) {\r\n\t\t\t\t\t//this.hide();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tthis.element.trigger({\r\n\t\t\t\ttype: 'changeDate',\r\n\t\t\t\tdate: this.date\r\n\t\t\t});\r\n\t\t},\r\n\r\n\t\tmoveMinute: function (date, dir) {\r\n\t\t\tif (!dir) return date;\r\n\t\t\tvar new_date = new Date(date.valueOf());\r\n\t\t\t//dir = dir > 0 ? 1 : -1;\r\n\t\t\tnew_date.setUTCMinutes(new_date.getUTCMinutes() + (dir * this.minuteStep));\r\n\t\t\treturn new_date;\r\n\t\t},\r\n\r\n\t\tmoveHour: function (date, dir) {\r\n\t\t\tif (!dir) return date;\r\n\t\t\tvar new_date = new Date(date.valueOf());\r\n\t\t\t//dir = dir > 0 ? 1 : -1;\r\n\t\t\tnew_date.setUTCHours(new_date.getUTCHours() + dir);\r\n\t\t\treturn new_date;\r\n\t\t},\r\n\r\n\t\tmoveDate: function (date, dir) {\r\n\t\t\tif (!dir) return date;\r\n\t\t\tvar new_date = new Date(date.valueOf());\r\n\t\t\t//dir = dir > 0 ? 1 : -1;\r\n\t\t\tnew_date.setUTCDate(new_date.getUTCDate() + dir);\r\n\t\t\treturn new_date;\r\n\t\t},\r\n\r\n\t\tmoveMonth: function (date, dir) {\r\n\t\t\tif (!dir) return date;\r\n\t\t\tvar new_date = new Date(date.valueOf()),\r\n\t\t\t\tday = new_date.getUTCDate(),\r\n\t\t\t\tmonth = new_date.getUTCMonth(),\r\n\t\t\t\tmag = Math.abs(dir),\r\n\t\t\t\tnew_month, test;\r\n\t\t\tdir = dir > 0 ? 1 : -1;\r\n\t\t\tif (mag == 1) {\r\n\t\t\t\ttest = dir == -1\r\n\t\t\t\t\t// If going back one month, make sure month is not current month\r\n\t\t\t\t\t// (eg, Mar 31 -> Feb 31 == Feb 28, not Mar 02)\r\n\t\t\t\t\t? function () {\r\n\t\t\t\t\treturn new_date.getUTCMonth() == month;\r\n\t\t\t\t}\r\n\t\t\t\t\t// If going forward one month, make sure month is as expected\r\n\t\t\t\t\t// (eg, Jan 31 -> Feb 31 == Feb 28, not Mar 02)\r\n\t\t\t\t\t: function () {\r\n\t\t\t\t\treturn new_date.getUTCMonth() != new_month;\r\n\t\t\t\t};\r\n\t\t\t\tnew_month = month + dir;\r\n\t\t\t\tnew_date.setUTCMonth(new_month);\r\n\t\t\t\t// Dec -> Jan (12) or Jan -> Dec (-1) -- limit expected date to 0-11\r\n\t\t\t\tif (new_month < 0 || new_month > 11)\r\n\t\t\t\t\tnew_month = (new_month + 12) % 12;\r\n\t\t\t} else {\r\n\t\t\t\t// For magnitudes >1, move one month at a time...\r\n\t\t\t\tfor (var i = 0; i < mag; i++)\r\n\t\t\t\t\t// ...which might decrease the day (eg, Jan 31 to Feb 28, etc)...\r\n\t\t\t\t\tnew_date = this.moveMonth(new_date, dir);\r\n\t\t\t\t// ...then reset the day, keeping it in the new month\r\n\t\t\t\tnew_month = new_date.getUTCMonth();\r\n\t\t\t\tnew_date.setUTCDate(day);\r\n\t\t\t\ttest = function () {\r\n\t\t\t\t\treturn new_month != new_date.getUTCMonth();\r\n\t\t\t\t};\r\n\t\t\t}\r\n\t\t\t// Common date-resetting loop -- if date is beyond end of month, make it\r\n\t\t\t// end of month\r\n\t\t\twhile (test()) {\r\n\t\t\t\tnew_date.setUTCDate(--day);\r\n\t\t\t\tnew_date.setUTCMonth(new_month);\r\n\t\t\t}\r\n\t\t\treturn new_date;\r\n\t\t},\r\n\r\n\t\tmoveYear: function (date, dir) {\r\n\t\t\treturn this.moveMonth(date, dir * 12);\r\n\t\t},\r\n\r\n\t\tdateWithinRange: function (date) {\r\n\t\t\treturn date >= this.startDate && date <= this.endDate;\r\n\t\t},\r\n\r\n\t\tkeydown: function (e) {\r\n\t\t\tif (this.picker.is(':not(:visible)')) {\r\n\t\t\t\tif (e.keyCode == 27) // allow escape to hide and re-show picker\r\n\t\t\t\t\tthis.show();\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tvar dateChanged = false,\r\n\t\t\t\tdir, day, month,\r\n\t\t\t\tnewDate, newViewDate;\r\n\t\t\tswitch (e.keyCode) {\r\n\t\t\t\tcase 27: // escape\r\n\t\t\t\t\tthis.hide();\r\n\t\t\t\t\te.preventDefault();\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 37: // left\r\n\t\t\t\tcase 39: // right\r\n\t\t\t\t\tif (!this.keyboardNavigation) break;\r\n\t\t\t\t\tdir = e.keyCode == 37 ? -1 : 1;\r\n\t\t\t\t\tviewMode = this.viewMode;\r\n\t\t\t\t\tif (e.ctrlKey) {\r\n\t\t\t\t\t\tviewMode += 2;\r\n\t\t\t\t\t} else if (e.shiftKey) {\r\n\t\t\t\t\t\tviewMode += 1;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (viewMode == 4) {\r\n\t\t\t\t\t\tnewDate = this.moveYear(this.date, dir);\r\n\t\t\t\t\t\tnewViewDate = this.moveYear(this.viewDate, dir);\r\n\t\t\t\t\t} else if (viewMode == 3) {\r\n\t\t\t\t\t\tnewDate = this.moveMonth(this.date, dir);\r\n\t\t\t\t\t\tnewViewDate = this.moveMonth(this.viewDate, dir);\r\n\t\t\t\t\t} else if (viewMode == 2) {\r\n\t\t\t\t\t\tnewDate = this.moveDate(this.date, dir);\r\n\t\t\t\t\t\tnewViewDate = this.moveDate(this.viewDate, dir);\r\n\t\t\t\t\t} else if (viewMode == 1) {\r\n\t\t\t\t\t\tnewDate = this.moveHour(this.date, dir);\r\n\t\t\t\t\t\tnewViewDate = this.moveHour(this.viewDate, dir);\r\n\t\t\t\t\t} else if (viewMode == 0) {\r\n\t\t\t\t\t\tnewDate = this.moveMinute(this.date, dir);\r\n\t\t\t\t\t\tnewViewDate = this.moveMinute(this.viewDate, dir);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (this.dateWithinRange(newDate)) {\r\n\t\t\t\t\t\tthis.date = newDate;\r\n\t\t\t\t\t\tthis.viewDate = newViewDate;\r\n\t\t\t\t\t\tthis.setValue();\r\n\t\t\t\t\t\tthis.update();\r\n\t\t\t\t\t\te.preventDefault();\r\n\t\t\t\t\t\tdateChanged = true;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 38: // up\r\n\t\t\t\tcase 40: // down\r\n\t\t\t\t\tif (!this.keyboardNavigation) break;\r\n\t\t\t\t\tdir = e.keyCode == 38 ? -1 : 1;\r\n\t\t\t\t\tviewMode = this.viewMode;\r\n\t\t\t\t\tif (e.ctrlKey) {\r\n\t\t\t\t\t\tviewMode += 2;\r\n\t\t\t\t\t} else if (e.shiftKey) {\r\n\t\t\t\t\t\tviewMode += 1;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (viewMode == 4) {\r\n\t\t\t\t\t\tnewDate = this.moveYear(this.date, dir);\r\n\t\t\t\t\t\tnewViewDate = this.moveYear(this.viewDate, dir);\r\n\t\t\t\t\t} else if (viewMode == 3) {\r\n\t\t\t\t\t\tnewDate = this.moveMonth(this.date, dir);\r\n\t\t\t\t\t\tnewViewDate = this.moveMonth(this.viewDate, dir);\r\n\t\t\t\t\t} else if (viewMode == 2) {\r\n\t\t\t\t\t\tnewDate = this.moveDate(this.date, dir * 7);\r\n\t\t\t\t\t\tnewViewDate = this.moveDate(this.viewDate, dir * 7);\r\n\t\t\t\t\t} else if (viewMode == 1) {\r\n\t\t\t\t\t\tif (this.showMeridian) {\r\n\t\t\t\t\t\t\tnewDate = this.moveHour(this.date, dir * 6);\r\n\t\t\t\t\t\t\tnewViewDate = this.moveHour(this.viewDate, dir * 6);\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tnewDate = this.moveHour(this.date, dir * 4);\r\n\t\t\t\t\t\t\tnewViewDate = this.moveHour(this.viewDate, dir * 4);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t} else if (viewMode == 0) {\r\n\t\t\t\t\t\tnewDate = this.moveMinute(this.date, dir * 4);\r\n\t\t\t\t\t\tnewViewDate = this.moveMinute(this.viewDate, dir * 4);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (this.dateWithinRange(newDate)) {\r\n\t\t\t\t\t\tthis.date = newDate;\r\n\t\t\t\t\t\tthis.viewDate = newViewDate;\r\n\t\t\t\t\t\tthis.setValue();\r\n\t\t\t\t\t\tthis.update();\r\n\t\t\t\t\t\te.preventDefault();\r\n\t\t\t\t\t\tdateChanged = true;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 13: // enter\r\n\t\t\t\t\tif (this.viewMode != 0) {\r\n\t\t\t\t\t\tvar oldViewMode = this.viewMode;\r\n\t\t\t\t\t\tthis.showMode(-1);\r\n\t\t\t\t\t\tthis.fill();\r\n\t\t\t\t\t\tif (oldViewMode == this.viewMode && this.autoclose) {\r\n\t\t\t\t\t\t\tthis.hide();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tthis.fill();\r\n\t\t\t\t\t\tif (this.autoclose) {\r\n\t\t\t\t\t\t\tthis.hide();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\te.preventDefault();\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 9: // tab\r\n\t\t\t\t\tthis.hide();\r\n\t\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t\tif (dateChanged) {\r\n\t\t\t\tvar element;\r\n\t\t\t\tif (this.isInput) {\r\n\t\t\t\t\telement = this.element;\r\n\t\t\t\t} else if (this.component) {\r\n\t\t\t\t\telement = this.element.find('input');\r\n\t\t\t\t}\r\n\t\t\t\tif (element) {\r\n\t\t\t\t\telement.change();\r\n\t\t\t\t}\r\n\t\t\t\tthis.element.trigger({\r\n\t\t\t\t\ttype: 'changeDate',\r\n\t\t\t\t\tdate: this.date\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\tshowMode: function (dir) {\r\n\t\t\tif (dir) {\r\n\t\t\t\tvar newViewMode = Math.max(0, Math.min(DPGlobal.modes.length - 1, this.viewMode + dir));\r\n\t\t\t\tif (newViewMode >= this.minView && newViewMode <= this.maxView) {\r\n\t\t\t\t\tthis.element.trigger({\r\n\t\t\t\t\t\ttype:        'changeMode',\r\n\t\t\t\t\t\tdate:        this.viewDate,\r\n\t\t\t\t\t\toldViewMode: this.viewMode,\r\n\t\t\t\t\t\tnewViewMode: newViewMode\r\n\t\t\t\t\t});\r\n\r\n\t\t\t\t\tthis.viewMode = newViewMode;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t/*\r\n\t\t\t vitalets: fixing bug of very special conditions:\r\n\t\t\t jquery 1.7.1 + webkit + show inline datetimepicker in bootstrap popover.\r\n\t\t\t Method show() does not set display css correctly and datetimepicker is not shown.\r\n\t\t\t Changed to .css('display', 'block') solve the problem.\r\n\t\t\t See https://github.com/vitalets/x-editable/issues/37\r\n\r\n\t\t\t In jquery 1.7.2+ everything works fine.\r\n\t\t\t */\r\n\t\t\t//this.picker.find('>div').hide().filter('.datetimepicker-'+DPGlobal.modes[this.viewMode].clsName).show();\r\n\t\t\tthis.picker.find('>div').hide().filter('.datetimepicker-' + DPGlobal.modes[this.viewMode].clsName).css('display', 'block');\r\n\t\t\tthis.updateNavArrows();\r\n\t\t},\r\n\r\n\t\treset: function (e) {\r\n\t\t\tthis._setDate(null, 'date');\r\n\t\t}\r\n\t};\r\n\r\n\t$.fn.datetimepicker = function (option) {\r\n\t\tvar args = Array.apply(null, arguments);\r\n\t\targs.shift();\r\n\t\treturn this.each(function () {\r\n\t\t\tvar $this = $(this),\r\n\t\t\t\tdata = $this.data('datetimepicker'),\r\n\t\t\t\toptions = typeof option == 'object' && option;\r\n\t\t\tif (!data) {\r\n\t\t\t\t$this.data('datetimepicker', (data = new Datetimepicker(this, $.extend({}, $.fn.datetimepicker.defaults, options))));\r\n\t\t\t}\r\n\t\t\tif (typeof option == 'string' && typeof data[option] == 'function') {\r\n\t\t\t\tdata[option].apply(data, args);\r\n\t\t\t}\r\n\t\t});\r\n\t};\r\n\r\n\t$.fn.datetimepicker.defaults = {\r\n\t};\r\n\t$.fn.datetimepicker.Constructor = Datetimepicker;\r\n\tvar dates = $.fn.datetimepicker.dates = {\r\n\t\ten: {\r\n\t\t\tdays:        [\"Sunday\", \"Monday\", \"Tuesday\", \"Wednesday\", \"Thursday\", \"Friday\", \"Saturday\", \"Sunday\"],\r\n\t\t\tdaysShort:   [\"Sun\", \"Mon\", \"Tue\", \"Wed\", \"Thu\", \"Fri\", \"Sat\", \"Sun\"],\r\n\t\t\tdaysMin:     [\"Su\", \"Mo\", \"Tu\", \"We\", \"Th\", \"Fr\", \"Sa\", \"Su\"],\r\n\t\t\tmonths:      [\"January\", \"February\", \"March\", \"April\", \"May\", \"June\", \"July\", \"August\", \"September\", \"October\", \"November\", \"December\"],\r\n\t\t\tmonthsShort: [\"Jan\", \"Feb\", \"Mar\", \"Apr\", \"May\", \"Jun\", \"Jul\", \"Aug\", \"Sep\", \"Oct\", \"Nov\", \"Dec\"],\r\n\t\t\tmeridiem:    [\"am\", \"pm\"],\r\n\t\t\tsuffix:      [\"st\", \"nd\", \"rd\", \"th\"],\r\n\t\t\ttoday:       \"Today\"\r\n\t\t}\r\n\t};\r\n\r\n\tvar DPGlobal = {\r\n\t\tmodes:            [\r\n\t\t\t{\r\n\t\t\t\tclsName: 'minutes',\r\n\t\t\t\tnavFnc:  'Hours',\r\n\t\t\t\tnavStep: 1\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\tclsName: 'hours',\r\n\t\t\t\tnavFnc:  'Date',\r\n\t\t\t\tnavStep: 1\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\tclsName: 'days',\r\n\t\t\t\tnavFnc:  'Month',\r\n\t\t\t\tnavStep: 1\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\tclsName: 'months',\r\n\t\t\t\tnavFnc:  'FullYear',\r\n\t\t\t\tnavStep: 1\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\tclsName: 'years',\r\n\t\t\t\tnavFnc:  'FullYear',\r\n\t\t\t\tnavStep: 10\r\n\t\t\t}\r\n\t\t],\r\n\t\tisLeapYear:       function (year) {\r\n\t\t\treturn (((year % 4 === 0) && (year % 100 !== 0)) || (year % 400 === 0))\r\n\t\t},\r\n\t\tgetDaysInMonth:   function (year, month) {\r\n\t\t\treturn [31, (DPGlobal.isLeapYear(year) ? 29 : 28), 31, 30, 31, 30, 31, 31, 30, 31, 30, 31][month]\r\n\t\t},\r\n\t\tgetDefaultFormat: function (type, field) {\r\n\t\t\tif (type == \"standard\") {\r\n\t\t\t\tif (field == 'input')\r\n\t\t\t\t\treturn 'yyyy-mm-dd hh:ii';\r\n\t\t\t\telse\r\n\t\t\t\t\treturn 'yyyy-mm-dd hh:ii:ss';\r\n\t\t\t} else if (type == \"php\") {\r\n\t\t\t\tif (field == 'input')\r\n\t\t\t\t\treturn 'Y-m-d H:i';\r\n\t\t\t\telse\r\n\t\t\t\t\treturn 'Y-m-d H:i:s';\r\n\t\t\t} else {\r\n\t\t\t\tthrow new Error(\"Invalid format type.\");\r\n\t\t\t}\r\n\t\t},\r\n\t\tvalidParts:       function (type) {\r\n\t\t\tif (type == \"standard\") {\r\n\t\t\t\treturn /hh?|HH?|p|P|ii?|ss?|dd?|DD?|mm?|MM?|yy(?:yy)?/g;\r\n\t\t\t} else if (type == \"php\") {\r\n\t\t\t\treturn /[dDjlNwzFmMnStyYaABgGhHis]/g;\r\n\t\t\t} else {\r\n\t\t\t\tthrow new Error(\"Invalid format type.\");\r\n\t\t\t}\r\n\t\t},\r\n\t\tnonpunctuation:   /[^ -\\/:-@\\[-`{-~\\t\\n\\rTZ]+/g,\r\n\t\tparseFormat:      function (format, type) {\r\n\t\t\t// IE treats \\0 as a string end in inputs (truncating the value),\r\n\t\t\t// so it's a bad format delimiter, anyway\r\n\t\t\tvar separators = format.replace(this.validParts(type), '\\0').split('\\0'),\r\n\t\t\t\tparts = format.match(this.validParts(type));\r\n\t\t\tif (!separators || !separators.length || !parts || parts.length == 0) {\r\n\t\t\t\tthrow new Error(\"Invalid date format.\");\r\n\t\t\t}\r\n\t\t\treturn {separators: separators, parts: parts};\r\n\t\t},\r\n\t\tparseDate:        function (date, format, language, type) {\r\n\t\t\tif (date instanceof Date) {\r\n\t\t\t\tvar dateUTC = new Date(date.valueOf() - date.getTimezoneOffset() * 60000);\r\n\t\t\t\tdateUTC.setMilliseconds(0);\r\n\t\t\t\treturn dateUTC;\r\n\t\t\t}\r\n\t\t\tif (/^\\d{4}\\-\\d{1,2}\\-\\d{1,2}$/.test(date)) {\r\n\t\t\t\tformat = this.parseFormat('yyyy-mm-dd', type);\r\n\t\t\t}\r\n\t\t\tif (/^\\d{4}\\-\\d{1,2}\\-\\d{1,2}[T ]\\d{1,2}\\:\\d{1,2}$/.test(date)) {\r\n\t\t\t\tformat = this.parseFormat('yyyy-mm-dd hh:ii', type);\r\n\t\t\t}\r\n\t\t\tif (/^\\d{4}\\-\\d{1,2}\\-\\d{1,2}[T ]\\d{1,2}\\:\\d{1,2}\\:\\d{1,2}[Z]{0,1}$/.test(date)) {\r\n\t\t\t\tformat = this.parseFormat('yyyy-mm-dd hh:ii:ss', type);\r\n\t\t\t}\r\n\t\t\tif (/^[-+]\\d+[dmwy]([\\s,]+[-+]\\d+[dmwy])*$/.test(date)) {\r\n\t\t\t\tvar part_re = /([-+]\\d+)([dmwy])/,\r\n\t\t\t\t\tparts = date.match(/([-+]\\d+)([dmwy])/g),\r\n\t\t\t\t\tpart, dir;\r\n\t\t\t\tdate = new Date();\r\n\t\t\t\tfor (var i = 0; i < parts.length; i++) {\r\n\t\t\t\t\tpart = part_re.exec(parts[i]);\r\n\t\t\t\t\tdir = parseInt(part[1]);\r\n\t\t\t\t\tswitch (part[2]) {\r\n\t\t\t\t\t\tcase 'd':\r\n\t\t\t\t\t\t\tdate.setUTCDate(date.getUTCDate() + dir);\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\tcase 'm':\r\n\t\t\t\t\t\t\tdate = Datetimepicker.prototype.moveMonth.call(Datetimepicker.prototype, date, dir);\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\tcase 'w':\r\n\t\t\t\t\t\t\tdate.setUTCDate(date.getUTCDate() + dir * 7);\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\tcase 'y':\r\n\t\t\t\t\t\t\tdate = Datetimepicker.prototype.moveYear.call(Datetimepicker.prototype, date, dir);\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\treturn UTCDate(date.getUTCFullYear(), date.getUTCMonth(), date.getUTCDate(), date.getUTCHours(), date.getUTCMinutes(), date.getUTCSeconds(), 0);\r\n\t\t\t}\r\n\t\t\tvar parts = date && date.match(this.nonpunctuation) || [],\r\n\t\t\t\tdate = new Date(0, 0, 0, 0, 0, 0, 0),\r\n\t\t\t\tparsed = {},\r\n\t\t\t\tsetters_order = ['hh', 'h', 'ii', 'i', 'ss', 's', 'yyyy', 'yy', 'M', 'MM', 'm', 'mm', 'D', 'DD', 'd', 'dd', 'H', 'HH', 'p', 'P'],\r\n\t\t\t\tsetters_map = {\r\n\t\t\t\t\thh:   function (d, v) {\r\n\t\t\t\t\t\treturn d.setUTCHours(v);\r\n\t\t\t\t\t},\r\n\t\t\t\t\th:    function (d, v) {\r\n\t\t\t\t\t\treturn d.setUTCHours(v);\r\n\t\t\t\t\t},\r\n\t\t\t\t\tHH:   function (d, v) {\r\n\t\t\t\t\t\treturn d.setUTCHours(v == 12 ? 0 : v);\r\n\t\t\t\t\t},\r\n\t\t\t\t\tH:    function (d, v) {\r\n\t\t\t\t\t\treturn d.setUTCHours(v == 12 ? 0 : v);\r\n\t\t\t\t\t},\r\n\t\t\t\t\tii:   function (d, v) {\r\n\t\t\t\t\t\treturn d.setUTCMinutes(v);\r\n\t\t\t\t\t},\r\n\t\t\t\t\ti:    function (d, v) {\r\n\t\t\t\t\t\treturn d.setUTCMinutes(v);\r\n\t\t\t\t\t},\r\n\t\t\t\t\tss:   function (d, v) {\r\n\t\t\t\t\t\treturn d.setUTCSeconds(v);\r\n\t\t\t\t\t},\r\n\t\t\t\t\ts:    function (d, v) {\r\n\t\t\t\t\t\treturn d.setUTCSeconds(v);\r\n\t\t\t\t\t},\r\n\t\t\t\t\tyyyy: function (d, v) {\r\n\t\t\t\t\t\tif(v < 10000){\r\n\t\t\t\t\t\t\treturn d.setUTCFullYear(v);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t\tyy:   function (d, v) {\r\n\t\t\t\t\t\treturn d.setUTCFullYear(2000 + v);\r\n\t\t\t\t\t},\r\n\t\t\t\t\tm:    function (d, v) {\r\n\t\t\t\t\t\tv -= 1;\r\n\t\t\t\t\t\twhile (v < 0) v += 12;\r\n\t\t\t\t\t\tv %= 12;\r\n\t\t\t\t\t\td.setUTCMonth(v);\r\n\t\t\t\t\t\twhile (d.getUTCMonth() != v)\r\n\t\t\t\t\t\t\td.setUTCDate(d.getUTCDate() - 1);\r\n\t\t\t\t\t\treturn d;\r\n\t\t\t\t\t},\r\n\t\t\t\t\td:    function (d, v) {\r\n\t\t\t\t\t\treturn d.setUTCDate(v);\r\n\t\t\t\t\t},\r\n\t\t\t\t\tp:    function (d, v) {\r\n\t\t\t\t\t\treturn d.setUTCHours(v == 1 ? d.getUTCHours() + 12 : d.getUTCHours());\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\tval, filtered, part;\r\n\t\t\tsetters_map['M'] = setters_map['MM'] = setters_map['mm'] = setters_map['m'];\r\n\t\t\tsetters_map['dd'] = setters_map['d'];\r\n\t\t\tsetters_map['P'] = setters_map['p'];\r\n\t\t\tdate = UTCDate(date.getFullYear(), date.getMonth(), date.getDate(), date.getHours(), date.getMinutes(), date.getSeconds());\r\n\t\t\tif (parts.length == format.parts.length) {\r\n\t\t\t\tfor (var i = 0, cnt = format.parts.length; i < cnt; i++) {\r\n\t\t\t\t\tval = parseInt(parts[i], 10);\r\n\t\t\t\t\tpart = format.parts[i];\r\n\t\t\t\t\tif (isNaN(val)) {\r\n\t\t\t\t\t\tswitch (part) {\r\n\t\t\t\t\t\t\tcase 'MM':\r\n\t\t\t\t\t\t\t\tfiltered = $(dates[language].months).filter(function () {\r\n\t\t\t\t\t\t\t\t\tvar m = this.slice(0, parts[i].length),\r\n\t\t\t\t\t\t\t\t\t\tp = parts[i].slice(0, m.length);\r\n\t\t\t\t\t\t\t\t\treturn m == p;\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\tval = $.inArray(filtered[0], dates[language].months) + 1;\r\n\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\tcase 'M':\r\n\t\t\t\t\t\t\t\tfiltered = $(dates[language].monthsShort).filter(function () {\r\n\t\t\t\t\t\t\t\t\tvar m = this.slice(0, parts[i].length),\r\n\t\t\t\t\t\t\t\t\t\tp = parts[i].slice(0, m.length);\r\n\t\t\t\t\t\t\t\t\treturn m == p;\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\tval = $.inArray(filtered[0], dates[language].monthsShort) + 1;\r\n\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\tcase 'p':\r\n\t\t\t\t\t\t\tcase 'P':\r\n\t\t\t\t\t\t\t\tval = $.inArray(parts[i].toLowerCase(), dates[language].meridiem);\r\n\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tparsed[part] = val;\r\n\t\t\t\t}\r\n\t\t\t\tfor (var i = 0, s; i < setters_order.length; i++) {\r\n\t\t\t\t\ts = setters_order[i];\r\n\t\t\t\t\tif (s in parsed && !isNaN(parsed[s]))\r\n\t\t\t\t\t\tsetters_map[s](date, parsed[s])\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn date;\r\n\t\t},\r\n\t\tformatDate:       function (date, format, language, type) {\r\n\t\t\tif (date == null) {\r\n\t\t\t\treturn '';\r\n\t\t\t}\r\n\t\t\tvar val;\r\n\t\t\tif (type == 'standard') {\r\n\t\t\t\tval = {\r\n\t\t\t\t\t// year\r\n\t\t\t\t\tyy:   date.getUTCFullYear().toString().substring(2),\r\n\t\t\t\t\tyyyy: date.getUTCFullYear(),\r\n\t\t\t\t\t// month\r\n\t\t\t\t\tm:    date.getUTCMonth() + 1,\r\n\t\t\t\t\tM:    dates[language].monthsShort[date.getUTCMonth()],\r\n\t\t\t\t\tMM:   dates[language].months[date.getUTCMonth()],\r\n\t\t\t\t\t// day\r\n\t\t\t\t\td:    date.getUTCDate(),\r\n\t\t\t\t\tD:    dates[language].daysShort[date.getUTCDay()],\r\n\t\t\t\t\tDD:   dates[language].days[date.getUTCDay()],\r\n\t\t\t\t\tp:    (dates[language].meridiem.length == 2 ? dates[language].meridiem[date.getUTCHours() < 12 ? 0 : 1] : ''),\r\n\t\t\t\t\t// hour\r\n\t\t\t\t\th:    date.getUTCHours(),\r\n\t\t\t\t\t// minute\r\n\t\t\t\t\ti:    date.getUTCMinutes(),\r\n\t\t\t\t\t// second\r\n\t\t\t\t\ts:    date.getUTCSeconds()\r\n\t\t\t\t};\r\n\r\n\t\t\t\tif (dates[language].meridiem.length == 2) {\r\n\t\t\t\t\tval.H = (val.h % 12 == 0 ? 12 : val.h % 12);\r\n\t\t\t\t}\r\n\t\t\t\telse {\r\n\t\t\t\t\tval.H = val.h;\r\n\t\t\t\t}\r\n\t\t\t\tval.HH = (val.H < 10 ? '0' : '') + val.H;\r\n\t\t\t\tval.P = val.p.toUpperCase();\r\n\t\t\t\tval.hh = (val.h < 10 ? '0' : '') + val.h;\r\n\t\t\t\tval.ii = (val.i < 10 ? '0' : '') + val.i;\r\n\t\t\t\tval.ss = (val.s < 10 ? '0' : '') + val.s;\r\n\t\t\t\tval.dd = (val.d < 10 ? '0' : '') + val.d;\r\n\t\t\t\tval.mm = (val.m < 10 ? '0' : '') + val.m;\r\n\t\t\t} else if (type == 'php') {\r\n\t\t\t\t// php format\r\n\t\t\t\tval = {\r\n\t\t\t\t\t// year\r\n\t\t\t\t\ty: date.getUTCFullYear().toString().substring(2),\r\n\t\t\t\t\tY: date.getUTCFullYear(),\r\n\t\t\t\t\t// month\r\n\t\t\t\t\tF: dates[language].months[date.getUTCMonth()],\r\n\t\t\t\t\tM: dates[language].monthsShort[date.getUTCMonth()],\r\n\t\t\t\t\tn: date.getUTCMonth() + 1,\r\n\t\t\t\t\tt: DPGlobal.getDaysInMonth(date.getUTCFullYear(), date.getUTCMonth()),\r\n\t\t\t\t\t// day\r\n\t\t\t\t\tj: date.getUTCDate(),\r\n\t\t\t\t\tl: dates[language].days[date.getUTCDay()],\r\n\t\t\t\t\tD: dates[language].daysShort[date.getUTCDay()],\r\n\t\t\t\t\tw: date.getUTCDay(), // 0 -> 6\r\n\t\t\t\t\tN: (date.getUTCDay() == 0 ? 7 : date.getUTCDay()),       // 1 -> 7\r\n\t\t\t\t\tS: (date.getUTCDate() % 10 <= dates[language].suffix.length ? dates[language].suffix[date.getUTCDate() % 10 - 1] : ''),\r\n\t\t\t\t\t// hour\r\n\t\t\t\t\ta: (dates[language].meridiem.length == 2 ? dates[language].meridiem[date.getUTCHours() < 12 ? 0 : 1] : ''),\r\n\t\t\t\t\tg: (date.getUTCHours() % 12 == 0 ? 12 : date.getUTCHours() % 12),\r\n\t\t\t\t\tG: date.getUTCHours(),\r\n\t\t\t\t\t// minute\r\n\t\t\t\t\ti: date.getUTCMinutes(),\r\n\t\t\t\t\t// second\r\n\t\t\t\t\ts: date.getUTCSeconds()\r\n\t\t\t\t};\r\n\t\t\t\tval.m = (val.n < 10 ? '0' : '') + val.n;\r\n\t\t\t\tval.d = (val.j < 10 ? '0' : '') + val.j;\r\n\t\t\t\tval.A = val.a.toString().toUpperCase();\r\n\t\t\t\tval.h = (val.g < 10 ? '0' : '') + val.g;\r\n\t\t\t\tval.H = (val.G < 10 ? '0' : '') + val.G;\r\n\t\t\t\tval.i = (val.i < 10 ? '0' : '') + val.i;\r\n\t\t\t\tval.s = (val.s < 10 ? '0' : '') + val.s;\r\n\t\t\t} else {\r\n\t\t\t\tthrow new Error(\"Invalid format type.\");\r\n\t\t\t}\r\n\t\t\tvar date = [],\r\n\t\t\t\tseps = $.extend([], format.separators);\r\n\t\t\tfor (var i = 0, cnt = format.parts.length; i < cnt; i++) {\r\n\t\t\t\tif (seps.length) {\r\n\t\t\t\t\tdate.push(seps.shift());\r\n\t\t\t\t}\r\n\t\t\t\tdate.push(val[format.parts[i]]);\r\n\t\t\t}\r\n\t\t\tif (seps.length) {\r\n\t\t\t\tdate.push(seps.shift());\r\n\t\t\t}\r\n\t\t\treturn date.join('');\r\n\t\t},\r\n\t\tconvertViewMode:  function (viewMode) {\r\n\t\t\tswitch (viewMode) {\r\n\t\t\t\tcase 4:\r\n\t\t\t\tcase 'decade':\r\n\t\t\t\t\tviewMode = 4;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 3:\r\n\t\t\t\tcase 'year':\r\n\t\t\t\t\tviewMode = 3;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 2:\r\n\t\t\t\tcase 'month':\r\n\t\t\t\t\tviewMode = 2;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 1:\r\n\t\t\t\tcase 'day':\r\n\t\t\t\t\tviewMode = 1;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 0:\r\n\t\t\t\tcase 'hour':\r\n\t\t\t\t\tviewMode = 0;\r\n\t\t\t\t\tbreak;\r\n\t\t\t}\r\n\r\n\t\t\treturn viewMode;\r\n\t\t},\r\n\t\theadTemplate:     '<thead>' +\r\n\t\t\t\t\t\t\t  '<tr>' +\r\n\t\t\t\t\t\t\t  '<th class=\"prev\"><i class=\"icon-arrow-left\"/></th>' +\r\n\t\t\t\t\t\t\t  '<th colspan=\"5\" class=\"switch\"></th>' +\r\n\t\t\t\t\t\t\t  '<th class=\"next\"><i class=\"icon-arrow-right\"/></th>' +\r\n\t\t\t\t\t\t\t  '</tr>' +\r\n\t\t\t'</thead>',\r\n\t\theadTemplateV3:   '<thead>' +\r\n\t\t\t\t\t\t\t  '<tr>' +\r\n\t\t\t\t\t\t\t  '<th class=\"prev\"><i class=\"glyphicon glyphicon-arrow-left\"></i> </th>' +\r\n\t\t\t\t\t\t\t  '<th colspan=\"5\" class=\"switch\"></th>' +\r\n\t\t\t\t\t\t\t  '<th class=\"next\"><i class=\"glyphicon glyphicon-arrow-right\"></i> </th>' +\r\n\t\t\t\t\t\t\t  '</tr>' +\r\n\t\t\t'</thead>',\r\n\t\tcontTemplate:     '<tbody><tr><td colspan=\"7\"></td></tr></tbody>',\r\n\t\tfootTemplate:     '<tfoot><tr><th colspan=\"7\" class=\"today\"></th></tr></tfoot>'\r\n\t};\r\n\tDPGlobal.template = '<div class=\"datetimepicker\">' +\r\n\t\t'<div class=\"datetimepicker-minutes\">' +\r\n\t\t'<table class=\" table-condensed\">' +\r\n\t\tDPGlobal.headTemplate +\r\n\t\tDPGlobal.contTemplate +\r\n\t\tDPGlobal.footTemplate +\r\n\t\t'</table>' +\r\n\t\t'</div>' +\r\n\t\t'<div class=\"datetimepicker-hours\">' +\r\n\t\t'<table class=\" table-condensed\">' +\r\n\t\tDPGlobal.headTemplate +\r\n\t\tDPGlobal.contTemplate +\r\n\t\tDPGlobal.footTemplate +\r\n\t\t'</table>' +\r\n\t\t'</div>' +\r\n\t\t'<div class=\"datetimepicker-days\">' +\r\n\t\t'<table class=\" table-condensed\">' +\r\n\t\tDPGlobal.headTemplate +\r\n\t\t'<tbody></tbody>' +\r\n\t\tDPGlobal.footTemplate +\r\n\t\t'</table>' +\r\n\t\t'</div>' +\r\n\t\t'<div class=\"datetimepicker-months\">' +\r\n\t\t'<table class=\"table-condensed\">' +\r\n\t\tDPGlobal.headTemplate +\r\n\t\tDPGlobal.contTemplate +\r\n\t\tDPGlobal.footTemplate +\r\n\t\t'</table>' +\r\n\t\t'</div>' +\r\n\t\t'<div class=\"datetimepicker-years\">' +\r\n\t\t'<table class=\"table-condensed\">' +\r\n\t\tDPGlobal.headTemplate +\r\n\t\tDPGlobal.contTemplate +\r\n\t\tDPGlobal.footTemplate +\r\n\t\t'</table>' +\r\n\t\t'</div>' +\r\n\t\t'</div>';\r\n\tDPGlobal.templateV3 = '<div class=\"datetimepicker\">' +\r\n\t\t'<div class=\"datetimepicker-minutes\">' +\r\n\t\t'<table class=\" table-condensed\">' +\r\n\t\tDPGlobal.headTemplateV3 +\r\n\t\tDPGlobal.contTemplate +\r\n\t\tDPGlobal.footTemplate +\r\n\t\t'</table>' +\r\n\t\t'</div>' +\r\n\t\t'<div class=\"datetimepicker-hours\">' +\r\n\t\t'<table class=\" table-condensed\">' +\r\n\t\tDPGlobal.headTemplateV3 +\r\n\t\tDPGlobal.contTemplate +\r\n\t\tDPGlobal.footTemplate +\r\n\t\t'</table>' +\r\n\t\t'</div>' +\r\n\t\t'<div class=\"datetimepicker-days\">' +\r\n\t\t'<table class=\" table-condensed\">' +\r\n\t\tDPGlobal.headTemplateV3 +\r\n\t\t'<tbody></tbody>' +\r\n\t\tDPGlobal.footTemplate +\r\n\t\t'</table>' +\r\n\t\t'</div>' +\r\n\t\t'<div class=\"datetimepicker-months\">' +\r\n\t\t'<table class=\"table-condensed\">' +\r\n\t\tDPGlobal.headTemplateV3 +\r\n\t\tDPGlobal.contTemplate +\r\n\t\tDPGlobal.footTemplate +\r\n\t\t'</table>' +\r\n\t\t'</div>' +\r\n\t\t'<div class=\"datetimepicker-years\">' +\r\n\t\t'<table class=\"table-condensed\">' +\r\n\t\tDPGlobal.headTemplateV3 +\r\n\t\tDPGlobal.contTemplate +\r\n\t\tDPGlobal.footTemplate +\r\n\t\t'</table>' +\r\n\t\t'</div>' +\r\n\t\t'</div>';\r\n\t$.fn.datetimepicker.DPGlobal = DPGlobal;\r\n\r\n\t/* DATETIMEPICKER NO CONFLICT\r\n\t * =================== */\r\n\r\n\t$.fn.datetimepicker.noConflict = function () {\r\n\t\t$.fn.datetimepicker = old;\r\n\t\treturn this;\r\n\t};\r\n\r\n\t/* DATETIMEPICKER DATA-API\r\n\t * ================== */\r\n\r\n\t$(document).on(\r\n\t\t'focus.datetimepicker.data-api click.datetimepicker.data-api',\r\n\t\t'[data-provide=\"datetimepicker\"]',\r\n\t\tfunction (e) {\r\n\t\t\tvar $this = $(this);\r\n\t\t\tif ($this.data('datetimepicker')) return;\r\n\t\t\te.preventDefault();\r\n\t\t\t// component click requires us to explicitly show it\r\n\t\t\t$this.datetimepicker('show');\r\n\t\t}\r\n\t);\r\n\t$(function () {\r\n\t\t$('[data-provide=\"datetimepicker-inline\"]').datetimepicker();\r\n\t});\r\n\r\n}(window.jQuery);\r\n\ndefine(\"bootstrap/bootstrap-datetimepicker\", function(){});\n\n",
    "/**\r\n * 日期本地化初始化方法\r\n * @author Mr.T\r\n */\r\ndefine('app/widgets/form/app-datetime',['app/core/app-jquery', 'app/core/app-core', localeFile, 'app/widgets/form/app-textbox',\r\n        'app/util/app-utils','app/core/app-options', 'app/widgets/drag/app-droppanel', 'bootstrap/bootstrap-datetimepicker'],\r\n        function($, App, AppLang, Textbox, Utils, Options, Expandable){\r\n\t\r\n\t'use strict';\r\n\r\n\t/**\r\n\t * @class \r\n\t * @classdesc 日期时间框\r\n\t * <span class=\"type-signature static\">extend</span>textbox\r\n\t * @see {@link textbox-class} datetime继承至textbox\r\n\t * @name datetime-class\r\n\t * @desc 日期时间框的初始化方法\r\n\t * @param {DOMElement} input 要渲染的input组件\r\n\t * @param {Object} options 组件的选项设置 \r\n\t * @author Mr.T\r\n\t */\r\n\tvar Datetime = Textbox.extend({\r\n\t\tImplements: Expandable,\r\n\t\tinitialize: function(input, options) {\r\n\t\t\tif(!options){\r\n\t\t\t\toptions = {};\r\n\t\t\t}\r\n\t\t\toptions._ = $.extend({}, Options.appDefaults.Combo, Options.appDefaults.DateTime);\r\n\t\t\tDatetime.superclass.initialize.call(this, input, options);\r\n\t\t\tvar that = this;\r\n\t\t\tsetTimeout(function(){\r\n\t\t\t\tthat._init();\r\n\t\t\t\tif(that.tempStartDate){\r\n                    that.datetimepicker.setStartDate(that.tempStartDate);\r\n                    delete that.tempStartDate;\r\n                }\r\n                if(that.tempEndDate){\r\n                    that.datetimepicker.setEndDate(that.tempEndDate);\r\n                    delete that.tempEndDate;\r\n                }\r\n                if(that.tempValue){\r\n                    that.setValue(that.tempValue, that.tempNoTrigger);\r\n                    delete that.tempValue;\r\n                    delete that.tempNoTrigger;\r\n                }\r\n                if(that.tempDate){\r\n                    that.setDate(that.tempDate);\r\n                    delete that.tempDate;\r\n                }\r\n\t\t\t}, 1);\r\n\t\t},\r\n\t\t/**\r\n\t\t * 初始化\r\n\t\t */\r\n\t\t_init: function(){\r\n\t\t\tif(this.setting.onlySelect){\r\n\t\t\t\tthis._editable(false);\r\n\t\t\t}\r\n\t\t\tthis._translator();\r\n\t\t\tthis._setType();\r\n\t\t\tthis.setting._datetime = this;\r\n\t\t\tthis.$text.datetimepicker(this.setting);\r\n\t\t\tthis.datetimepicker = this.$text.data('datetimepicker');\r\n\t\t\tthis.datetimepicker._datetime = this;\r\n\t\t\tthis.$dropPanel = this.datetimepicker.picker;\r\n\t\t\tthis.$dropPanel.on('mousedown.datetime.api',function (e){e.stopPropagation();});\r\n\t\t\tthis.$dropPanel.on('click.datetime.api', $.proxy(this.focus, this));\r\n\t\t\tif(!this.setting.custom){\r\n\t\t\t\tthis.setting.custom = this.$input.getJsonAttr('custom');\r\n\t\t\t}\r\n\t\t\tthis._initDateRange();\r\n\t\t\tif(this.setting.value){\r\n\t\t\t\tthis.setValue(this.setting.value, true);\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tthis._onPanelFadeOut();\r\n\t\t},\r\n\t\t/**\r\n\t\t * 根据类型更改默认属性\r\n\t\t */\r\n\t\t_setType: function(){\r\n\t\t\tvar c = this.customSetting\r\n\t\t\t\t,s = this.setting;\r\n\t\t\tswitch (s.type) {\r\n\t\t\tcase 'year':\r\n\t\t\t\ts.startView = 4;\r\n\t\t\t\ts.minView = 4;\r\n\t\t\t\ts.format = 'yyyy';\r\n\t\t\t\ts.todayBtn = false;\r\n\t\t\t\tbreak;\r\n\t\t\tcase 'year-month':\r\n\t\t\t\tif(!c.startView){\r\n\t\t\t\t\ts.startView = 3;\r\n\t\t\t\t}\r\n\t\t\t\ts.minView = 3;\r\n\t\t\t\tif(!c.format){\r\n\t\t\t\t\ts.format = 'yyyy-mm';\r\n\t\t\t\t}\r\n\t\t\t\ts.todayBtn = false;\r\n\t\t\t\tbreak;\r\n\t\t\tcase 'month':\r\n\t\t\t\ts.startView = 3;\r\n\t\t\t\ts.minView = 3;\r\n\t\t\t\ts.format = 'mm';\r\n\t\t\t\ts.todayBtn = false;\r\n\t\t\t\tbreak;\r\n\t\t\tcase 'date':\r\n\t\t\t\tif(!c.startView){\r\n\t\t\t\t\ts.startView = 2;\r\n\t\t\t\t}\r\n\t\t\t\ts.minView = 2;\r\n\t\t\t\tif(!c.format){\r\n\t\t\t\t\ts.format = 'yyyy-mm-dd';\r\n\t\t\t\t}\r\n\t\t\t\tbreak;\r\n\t\t\tcase 'datetime':\r\n\t\t\t\tif(!c.startView){\r\n\t\t\t\t\ts.startView = 2;\r\n\t\t\t\t}\r\n\t\t\t\ts.minView = 0;\r\n\t\t\t\tif(!c.format){\r\n\t\t\t\t\ts.format = 'yyyy-mm-dd hh:ii';\r\n\t\t\t\t}\r\n\t\t\t\tbreak;\r\n\t\t\tcase 'hour-minute':\r\n\t\t\t\tif(!c.startView){\r\n\t\t\t\t\ts.startView = 1;\r\n\t\t\t\t}\r\n\t\t\t\ts.minView = 0;\r\n\t\t\t\tif(!c.format){\r\n\t\t\t\t\ts.format = 'hh:ii';\r\n\t\t\t\t}\r\n\t\t\t\ts.todayBtn = false;\r\n\t\t\t\tbreak;\r\n\t\t\tcase 'hour':\r\n\t\t\t\tif(!c.startView){\r\n\t\t\t\t\ts.startView = 1;\r\n\t\t\t\t}\r\n\t\t\t\ts.minView = 1;\r\n\t\t\t\tif(!c.format){\r\n\t\t\t\t\ts.format = 'hh';\r\n\t\t\t\t}\r\n\t\t\t\ts.todayBtn = false;\r\n\t\t\t\tbreak;\r\n\t\t\tcase 'minute':\r\n\t\t\t\tif(!c.startView){\r\n\t\t\t\t\ts.startView = 0;\r\n\t\t\t\t}\r\n\t\t\t\ts.minView = 0;\r\n\t\t\t\tif(!c.format){\r\n\t\t\t\t\ts.format = 'ii';\r\n\t\t\t\t}\r\n\t\t\t\ts.todayBtn = false;\r\n\t\t\t\tbreak;\r\n\t\t\tdefault:\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t},\r\n\t\t/**\r\n\t\t * 将属性翻译为datetimepicker的属性\r\n\t\t */\r\n\t\t_translator: function(){\r\n\t\t\tvar s = this.setting;\r\n\t\t\tif(s['weekstart'] != null){\r\n\t\t\t\ts.weekStart = s['weekstart'];\r\n\t\t\t}\r\n\t\t\tif(s['todaybtn'] != null){\r\n\t\t\t\ts.todayBtn = s['todaybtn'];\r\n\t\t\t}\r\n\t\t\tif(s['todayhighlight'] != null){\r\n\t\t\t\ts.todayHighlight = s['todayhighlight'];\r\n\t\t\t}\r\n\t\t\tif(s['startview'] != null){\r\n\t\t\t\ts.startView = parseFloat(s['startview']);\r\n\t\t\t}\r\n\t\t\tif(s['minview'] != null){\r\n\t\t\t\ts.minView = parseFloat(s['minview']);\r\n\t\t\t}\r\n\t\t\tif(s['forceparse'] != null){\r\n\t\t\t\ts.forceParse = s['forceparse'];\r\n\t\t\t}\r\n\t\t\tif(s['minutestep'] != null){\r\n\t\t\t\ts.minuteStep = s['minutestep'];\r\n\t\t\t}\r\n\t\t\tif(s['pickerposition'] != null){\r\n\t\t\t\ts.pickerPosition = s['pickerposition'];\r\n\t\t\t}\r\n\t\t},\r\n\t\t/**\r\n\t\t * 初始化日期范围选择\r\n\t\t */\r\n\t\t_initDateRange: function(){\r\n\t\t\tvar begin = this.setting['datebegin']\r\n\t\t\t\t,end = this.setting['dateend'];\r\n\t\t\tif(begin || end){\r\n\t\t\t\tthis.$rangeBtn = $('<a class=\"wrapper-btn wrapper-range\" tabindex=\"-1\"><i></i></a>');\r\n\t\t\t\tthis.$openBtn.addClass('wrapper-date');\r\n\t\t\t\tthis.$rangeBtn.insertBefore(this.$openBtn);\r\n\t\t\t\tvar custom = this.setting.custom;\r\n\t\t\t\tif(custom && custom.onlyCustom){\r\n\t\t\t\t\tthis.$dateRange = $('<div class=\"drop-panel\"><ul class=\"date-range\">' +\r\n\t\t\t\t\t\t\tthis._getCustomRangeHtml() +\r\n\t\t\t\t\t'</ul></div>').appendTo($.$appPanelContainer);\r\n\t\t\t\t\t\r\n\t\t\t\t}else{\r\n\t\t\t\t\tthis.$dateRange = $('<div class=\"drop-panel\"><ul class=\"date-range\">' +\r\n\t\t\t\t\t\t\t'<li>昨天</li>' +\r\n\t\t\t\t\t\t\t'<li>上月</li>' +\r\n\t\t\t\t\t\t\t'<li>去年</li>' +\r\n\t\t\t\t\t\t\t'<li>当天</li>' +\r\n\t\t\t\t\t\t\t'<li>本月</li>' +\r\n\t\t\t\t\t\t\t'<li>本季</li>' +\r\n\t\t\t\t\t\t\t'<li>本年</li>' +\r\n\t\t\t\t\t\t\tthis._getCustomRangeHtml() +\r\n\t\t\t\t\t'</ul></div>').appendTo($.$appPanelContainer);\r\n\t\t\t\t}\r\n\t\t\t\tvar that = this;\r\n\t\t\t\tthis.$rangeBtn.on('click.datetime.api',function(e){\r\n\t\t\t\t\tthat.toggleDateRange();\r\n\t\t\t\t});\r\n\t\t\t\tthis.$dateRange.on('click.datetime-range.api', 'li', $.proxy(this._rangeClick,this));\r\n\t\t\t\tthis.$dateRange.on('click.datetime-range.api', function(e){e.stopPropagation();});\r\n\t\t\t\tif(!this.setting.fadeout){\r\n\t            \treturn;\r\n\t            }\r\n\t\t\t\tthis.$dateRange.on('mouseleave.datetime-range.api', $.proxy(this._fadeOut$DateRange, this));\r\n\t\t\t\tthis.$dateRange.on('mouseenter.datetime-range.api', $.proxy(this._fadeIn$DateRange, this));\r\n\t\t\t\tthis.$element.on('mouseout.datetime-range.api', $.proxy(this._fadeOut$DateRange, this));\r\n\t\t\t\tthis.$element.on('mouseover.datetime-range.api', $.proxy(this._fadeIn$DateRange, this));\r\n\t\t\t}\r\n\t\t},\r\n\t\t/**\r\n\t\t * 渐渐隐藏\r\n\t\t */\r\n\t\t_fadeOut$DateRange: function(){\r\n\t\t\tif(!this.$dateRange.is(':visible')){\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tvar opacity = 10\r\n\t\t\t\t,that = this;\r\n\t\t\tthis._hideTimer1 = setInterval(function(){\r\n\t\t\t\topacity -= 1;\r\n\t\t\t\tthat.$dateRange.css('opacity', 0.1*opacity);\r\n\t\t\t\tif(opacity == 0){\r\n\t\t\t\t\tclearInterval(that._hideTimer1);\r\n\t\t\t\t\tthat._hideRange();\r\n\t\t\t\t\tthat.$dateRange.css('opacity', 1);\r\n\t\t\t\t}\r\n\t\t\t}, 130);\r\n\t\t},\r\n\t\t/**\r\n\t\t * 停止渐渐隐藏 并显示\r\n\t\t */\r\n\t\t_fadeIn$DateRange: function(){\r\n\t\t\tthis.$dateRange.css('opacity', 1)\r\n\t\t\tclearInterval(this._hideTimer1);\r\n\t\t},\r\n\t\t/**\r\n\t\t * 获取自定义日期\r\n\t\t */\r\n\t\t_getCustomRangeHtml: function(){\r\n\t\t\tvar custom = this.setting.custom\r\n\t\t\t\t,result = '';\r\n\t\t\tif(custom){\r\n\t\t\t\tresult +=  '<div/>';\r\n\t\t\t\tthis.customHander = custom.handle;\r\n\t\t\t\tvar arr = custom.text.split(',');\r\n\t\t\t\tfor ( var i = 0; i < arr.length; i++) {\r\n\t\t\t\t\tresult += '<li>' + arr[i] + '</li>';\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn result;\r\n\t\t},\r\n\t\t/**\r\n\t\t * <span class=\"type-signature static\">override</span>\r\n\t\t * 设置隐藏值，根据隐藏值格式化函数格式化隐藏值\r\n\t\t * @param {String} val 隐藏值\r\n\t\t * @see textbox-class#setValue\r\n\t\t * @todo 当隐藏值为空时，显示值也为空\r\n\t\t * @example $('#demo').datetime('setValue','20151212');\r\n\t\t * @memberof datetime-class\r\n\t\t * @instance\r\n\t\t */\r\n\t\tsetValue: function(val, noTrigger){\r\n\t\t\tval = $.trim(val);\r\n\t\t\tif(!val){\r\n\t\t\t\tthis.setText('');\r\n\t\t\t\tthis._setValue('', noTrigger);\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tvar text = val\r\n\t\t\t\t,value = val;\r\n\t\t\tvar picker = this.datetimepicker;\r\n\t\t\tif(picker){\r\n\t\t\t\tvar DPGlobal = $.fn.datetimepicker.DPGlobal;\r\n\t\t\t\tpicker._setDateConvenient(val);\r\n\t\t\t\tvar text = picker.getFormattedDate()\r\n\t\t\t\t\t,value = text;\r\n\t\t\t\tif(this.setting.valueFormat){\r\n\t\t\t\t\tvar vf = DPGlobal.parseFormat(this.setting.valueFormat, picker.formatType);\r\n\t\t\t\t\tvalue = picker.getFormattedDate(vf);\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t}else{\r\n                this.tempValue = val;\r\n                this.tempNoTrigger = noTrigger;\r\n                noTrigger = true;\r\n\t\t\t}\r\n\t\t\tthis.setText(text);\r\n\t\t\tthis._setValue(value, noTrigger);\r\n\t\t},\r\n\t\t/**\r\n\t\t * 设置一个日期 \r\n\t\t * @param {Date} date 设置的日期\r\n\t\t * @todo 判断为日期类型，则设置日期\r\n\t\t * @example $('#demo').datetime('setDate',new Date());\r\n\t\t * @memberof datetime-class\r\n\t\t * @instance\r\n\t\t */\r\n\t\tsetDate: function(date){\r\n\t\t\tif(date instanceof Date){\r\n\t\t\t\tif(this.datetimepicker){\r\n\t\t\t\t\tthis.datetimepicker.viewDate = date;\r\n\t\t\t\t\tthis.datetimepicker.setValue();\r\n\t\t\t\t}else{\r\n                    this.tempDate = date;\r\n                }\r\n\t\t\t}else{\r\n\t\t\t\tthrow new Error('请设置日期对象');\r\n\t\t\t}\r\n\t\t},\r\n\t\t/**\r\n\t\t * 显示或隐藏日期面板，该方法已绑定在组件的右边按钮中\r\n\t\t * @todo 判断当前面板是否可见：\r\n\t\t * @todo 1如果不可见，调用showPanel\r\n\t\t * @todo 2如果可见，则关闭面板\r\n\t\t * @example $('#demo').datetime('togglePanel');\r\n\t\t * @memberof datetime-class\r\n\t\t * @instance\r\n\t\t */\r\n\t\ttogglePanel: function(){\r\n\t\t\tif(this._mainDivIsVisiable()){\r\n\t\t\t\tthis.hidePanel();\r\n\t\t\t}else{\r\n\t\t\t\tthis.showPanel();\r\n\t\t\t}\r\n\t\t},\r\n\t\t/**\r\n\t\t * 显示组件的日期时间面板\r\n\t\t * @todo 判断当前面板是否可见：\r\n\t\t * @todo 1如果不可见，调用showPanel\r\n\t\t * @todo 2如果可见，则关闭面板\r\n\t\t * @example $('#demo').datetime('showPanel');\r\n\t\t * @memberof datetime-class\r\n\t\t * @instance\r\n\t\t */\r\n\t\tshowPanel: function(){\r\n\t\t\tthis._closeVisiblePanel();\r\n\t\t\tthis.datetimepicker.show();\r\n\t\t\t$(document).on('mousedown.droppanel.api', $.proxy(this.hidePanel,this));\r\n\t\t\tlimitDate(this);\r\n\t\t},\r\n\t\t/**\r\n\t\t * 关闭组件的日期时间面板\r\n\t\t * @example $('#demo').datetime('hidePanel');\r\n\t\t * @memberof datetime-class\r\n\t\t * @instance\r\n\t\t */\r\n\t\thidePanel: function(){\r\n\t\t\tthis.datetimepicker.hide();\r\n\t\t\t$(document).off('mousedown.droppanel.api');\r\n\t\t\tlimitDate(this);\r\n\t\t},\r\n\t\t/**\r\n\t\t * 显示或关闭日期范围选择面板\r\n\t\t * @todo 关闭其他显示的下拉面板\r\n\t\t * @example $('#demo').datetime('toggleDateRange');\r\n\t\t * @memberof datetime-class\r\n\t\t * @instance\r\n\t\t */\r\n\t\ttoggleDateRange: function(){\r\n\t\t\tif(!this.$dateRange.is(':visible')){\r\n\t\t\t\tthis._showRange();\r\n\t\t\t}else{\r\n\t\t\t\tthis._hideRange();\r\n\t\t\t}\r\n\t\t},\r\n\t\t/**\r\n\t\t * 显示时间范围选择面板\r\n\t\t */\r\n\t\t_showRange: function(){\r\n\t\t\tthis._closeVisiblePanel();\r\n\t\t\tvar mainCss = {\r\n\t\t\t\t\ttop: this._getDropPanelTop(this.$dateRange),\r\n\t\t\t\t\tleft: this.$element.outerWidth() + this.$element.offset().left - this.$dateRange.outerWidth(),\r\n\t\t\t\t\tdisplay: 'block'\r\n\t\t\t\t};\r\n\t\t\tmainCss['z-index'] = Options.zindexs.droppanel++;\r\n\t\t\tthis.$dateRange.css(mainCss);\r\n\t\t\t$(document).on('click.date-range.api', $.proxy(this._hideRange,this));\r\n\t\t},\r\n\t\t/**\r\n\t\t * 隐藏时间范围选择面板\r\n\t\t */\r\n\t\t_hideRange: function(){\r\n\t\t\tthis.$dateRange.hide();\r\n\t\t\t$(document).off('click.date-range.api');\r\n\t\t},\r\n\t\t/**\r\n\t\t * 日期范围点击事件\r\n\t\t */\r\n\t\t_rangeClick: function(e){\r\n\t\t\tvar begin = this.setting['datebegin']\r\n\t\t\t\t,end = this.setting['dateend']\r\n\t\t\t\t,text = e.currentTarget.innerText\r\n\t\t\t\t,today = new Date()\r\n\t\t\t\t,range = undefined;\r\n\t\t\tif(!this._dateBegin){\r\n\t\t\t\tif(begin){\r\n\t\t\t\t\tthis._dateBegin = $A('#' + begin).data('datetime');\r\n\t\t\t\t\tthis._dateEnd = this;\r\n\t\t\t\t}else{\r\n\t\t\t\t\tthis._dateBegin = this;\r\n\t\t\t\t\tthis._dateEnd = $A('#' + end).data('datetime');\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tvar custom = this.setting.custom;\r\n\t\t\tif(custom && custom.onlyCustom){\r\n\t\t\t\trange = this.customHander(text);\r\n\t\t\t}else{\r\n\t\t\t\tswitch (text) {\r\n\t\t\t\tcase '昨天':\r\n\t\t\t\t\tvar yesterday = new Date(today.setDate(today.getDate() - 1));\r\n\t\t\t\t\trange = {begin:today,end:yesterday};\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase '上月':\r\n\t\t\t\t\tvar lastMonth = new Date(today.setMonth(today.getMonth() - 1));\r\n\t\t\t\t\trange = Utils.getMonthRange(lastMonth);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase '去年':\r\n\t\t\t\t\tvar lastYear= today.getFullYear() - 1;\r\n\t\t\t\t\trange = Utils.getYearRange(lastYear);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase '当天':\r\n\t\t\t\t\trange = {begin:today,end:today};\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase '本月':\r\n\t\t\t\t\tvar currentMonth = new Date(today.setMonth(today.getMonth()));\r\n\t\t\t\t\trange = Utils.getMonthRange(currentMonth);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase '本季':\r\n\t\t\t\t\trange = Utils.getSeasonRange(today);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase '本年':\r\n\t\t\t\t\tvar currentYear= today.getFullYear();\r\n\t\t\t\t\trange = Utils.getYearRange(currentYear);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tdefault:\r\n\t\t\t\t\trange = this.customHander(text);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tthis._hideRange();\r\n\t\t\trange.begin.setHours(8);\r\n\t\t\trange.end.setHours(8);\r\n\t\t\tthis._dateBegin.setDate(range.begin);\r\n\t\t\tif(this._dateEnd){\r\n\t\t\t\tthis._dateEnd.setDate(range.end);\r\n\t\t\t}\r\n\t\t},\r\n\t\t/**\r\n\t\t * 设置最小日期值\r\n\t\t * @example $('#demo').datetime('setStartDate', new Date());\r\n\t\t * @memberof datetime-class\r\n\t\t * @instance\r\n\t\t */\r\n\t\tsetStartDate: function(startDate, force){\r\n\t\t\tvar val = '';\r\n\t\t\tif(force){\r\n\t\t\t\tval = startDate;\r\n\t\t\t\tthis.setting.startDate = startDate;\r\n\t\t\t}else{\r\n\t\t\t\tif(startDate){\r\n\t\t\t\t\tval = startDate;\r\n\t\t\t\t}else{\r\n\t\t\t\t\tval = this.setting.startDate;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif(this.datetimepicker){\r\n            \tthis.datetimepicker.setStartDate(val);\r\n            }else{\r\n                this.tempStartDate = startDate;\r\n            }\r\n\t\t},\r\n\t\t/**\r\n\t\t * 设置最大日期值\r\n\t\t * @example $('#demo').datetime('setEndDate', new Date());\r\n\t\t * @memberof datetime-class\r\n\t\t * @instance\r\n\t\t */\r\n\t\tsetEndDate: function(endDate, force){\r\n\t\t\tvar val = '';\r\n\t\t\tif(force){\r\n\t\t\t\tval = endDate;\r\n\t\t\t\tthis.setting.endDate = endDate;\r\n\t\t\t}else{\r\n\t\t\t\tif(endDate){\r\n\t\t\t\t\tval = endDate;\r\n\t\t\t\t}else{\r\n\t\t\t\t\tval = this.setting.endDate;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif(this.datetimepicker){\r\n            \tthis.datetimepicker.setEndDate(val);\r\n            }else{\r\n                this.tempEndDate = val;\r\n            }\r\n\t\t},\r\n\t\tdestroy: function(){\r\n\t\t\tif(this.$dropPanel){\r\n\t\t\t\tthis.$dropPanel.remove();\r\n\t\t\t}\r\n\t\t\tif(this.$dateRange){\r\n\t\t\t\tthis.$dateRange.remove();\r\n\t\t\t}\r\n\t\t\tthis.$element.remove();\r\n\t\t\tthis.$input.removeData('datetime');\r\n\t\t}\t\r\n\t});\r\n\t$.fn.datetime = function (option, value) {\r\n\t\tvar methodReturn = undefined\r\n\t\t\t,args = arguments\r\n\t\t\t,componentName = 'datetime';\r\n\t\tthis.each(function () {\r\n\t\t\tvar $this = $(this);\r\n\t\t\tif(!$this.is('input')){\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\t\t\tvar component = App.getComponent($this, componentName);\r\n\t\t\tif(typeof option === 'string'){\r\n\t\t\t\ttry{\r\n\t\t\t\t\tvar methodArgs = Array.prototype.slice.call(args, 1);\r\n\t\t\t\t\tmethodReturn = App.componentMethodApply(component, option, methodArgs);\r\n\t\t\t\t}catch(e){\r\n\t\t\t\t\tApp.throwCompMethodError($this, componentName, option, e);\r\n\t\t\t\t}\r\n\t\t\t}else{\r\n\t\t\t\tif(!component){\r\n\t\t\t\t\tcomponent = new Datetime(this, option);\r\n\t\t\t\t\t$this.data(componentName, component);\r\n\t\t\t\t}else{\r\n\t\t\t\t\tApp.throwCompInitError($this, componentName);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\t\treturn methodReturn;\r\n\t};\r\n\t$.fn.datetimepicker.dates[AppLang.locale] = AppLang.datetimepicker;\r\n\t/**\r\n\t * DatetimePicker对象\r\n\t * @namespace DatetimePicker\r\n\t */\r\n\r\n\tvar exDpPrototype = {\r\n\t\t_attachEvents: function () {\r\n\t\t\tthis._detachEvents();\r\n\t\t\tif (this.isInput) {\r\n\t\t\t\tthis._events = [\r\n\t\t\t\t\t[this.element, {\r\n\t\t\t\t\t\t//单控件下 禁止聚焦时 展开面板事件 Mr.T\r\n//\t\t\t\t\t\tfocus:   $.proxy(this.show, this),\r\n\t\t\t\t\t\tkeyup:   $.proxy(this.update, this),\r\n\t\t\t\t\t\tkeydown: $.proxy(this.keydown, this),\r\n\t\t\t\t\t\tblur:  $.proxy(this._myblur, this)//焦点失去事件 Mr.T\r\n\t\t\t\t\t}]\r\n\t\t\t\t];\r\n\t\t\t}\r\n\t\t\telse if (this.component && this.hasInput) { // component: input + button\r\n\t\t\t\tthis._events = [\r\n\t\t\t\t\t// For components that are not readonly, allow keyboard nav\r\n\t\t\t\t\t[this.element.find('input'), {\r\n\t\t\t\t\t\tfocus:   $.proxy(this.show, this),\r\n\t\t\t\t\t\tkeyup:   $.proxy(this.update, this),\r\n\t\t\t\t\t\tkeydown: $.proxy(this.keydown, this)\r\n\t\t\t\t\t}],\r\n\t\t\t\t\t[this.component, {\r\n\t\t\t\t\t\tclick: $.proxy(this.show, this)\r\n\t\t\t\t\t}]\r\n\t\t\t\t];\r\n\t\t\t\tif (this.componentReset) {\r\n\t\t\t\t\tthis._events.push([\r\n\t\t\t\t\t\tthis.componentReset,\r\n\t\t\t\t\t\t{click: $.proxy(this.reset, this)}\r\n\t\t\t\t\t]);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\telse if (this.element.is('div')) {  // inline datetimepicker\r\n\t\t\t\tthis.isInline = true;\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tthis._events = [\r\n\t\t\t\t\t[this.element, {\r\n\t\t\t\t\t\tclick: $.proxy(this.show, this)\r\n\t\t\t\t\t}]\r\n\t\t\t\t];\r\n\t\t\t}\r\n\t\t\tfor (var i = 0, el, ev; i < this._events.length; i++) {\r\n\t\t\t\tel = this._events[i][0];\r\n\t\t\t\tev = this._events[i][1];\r\n\t\t\t\tel.on(ev);\r\n\t\t\t}\r\n\t\t},\r\n\t\t/** \r\n\t\t * 重写设置值的方法\r\n\t\t * <PRE>\r\n\t\t * 当设置值的时候，有存在_datetime的属性，则调用datetime.setValue(formatted)进行赋值\r\n\t\t * </PRE>\r\n\t\t * @memberof DatetimePicker\r\n\t\t * @function setValue\r\n\t\t */\r\n\t\tsetValue: function () {\r\n//\t\t\tvar formatted = this.getFormattedDate();\r\n\t\t\t//使用视图日期代替控件原日期设置值\r\n\t\t\tvar formatted = $.fn.datetimepicker.DPGlobal.formatDate(this.viewDate, this.format, this.language, this.formatType);\r\n\t\t\tif (!this.isInput) {\r\n\t\t\t\tif (this.component) {\r\n\t\t\t\t\tthis.element.find('input').val(formatted);\r\n\t\t\t\t}\r\n\t\t\t\tthis.element.data('date', formatted);\r\n\t\t\t} else {\r\n\t\t\t\tthis.element.val(formatted);\r\n\t\t\t\tif(this._datetime){\r\n\t\t\t\t\tthis._datetime.setValue(formatted);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif (this.linkField) {\r\n\t\t\t\t$('#' + this.linkField).val(this.getFormattedDate(this.linkFormat));\r\n\t\t\t}\r\n\t\t},\r\n\t\t/** \r\n\t\t * 重写弹出框的位置方法\r\n\t\t * <PRE>\r\n\t\t * 每次弹出框都计算下弹出框的位置\r\n\t\t * </PRE>\r\n\t\t * @memberof DatetimePicker\r\n\t\t * @function place\r\n\t\t */\r\n\t\tplace: function () {\r\n\t\t\tif (this.isInline) return;\r\n\r\n\t\t\t/**\r\n\t\t\t * 显示日期时间面板\r\n\t\t\t * 1、计算本身加面板高度是否大于当前的body的高度\r\n\t\t\t * 2、不大于则下拉，否则上拉\r\n\t\t\t */\r\n\t\t\tvar dropDown = Expandable.prototype._isDropPanelUpside(this.element,this.picker);\r\n\t\t\tif(dropDown){\r\n\t\t\t\tthis.pickerPosition = 'bottom-left';\r\n\t\t\t}else{\r\n\t\t\t\tthis.pickerPosition = 'top-left';\r\n\t\t\t}\r\n\t\t\t\r\n//\t\t\tvar index_highest = 0;\r\n//\t\t\t$('div').each(function () {\r\n//\t\t\t\tvar index_current = parseFloat($(this).css(\"zIndex\"), 10);\r\n//\t\t\t\tif (index_current > index_highest) {\r\n//\t\t\t\t\tindex_highest = index_current;\r\n//\t\t\t\t}\r\n//\t\t\t});\r\n//\t\t\tvar zIndex = index_highest + 10;\r\n\t\t\t//使用已管理的zindexs代替动态计算  2015年1月6日17:15:28 Mr.T\r\n\t\t\tvar zIndex = Options.zindexs.droppanel++;\r\n\t\t\tvar offset, top, left;\r\n\t\t\tif (this.component) {\r\n\t\t\t\toffset = this.component.offset();\r\n\t\t\t\tleft = offset.left;\r\n\t\t\t\tif (this.pickerPosition == 'bottom-left' || this.pickerPosition == 'top-left') {\r\n\t\t\t\t\tleft += this.component.outerWidth() - this.picker.outerWidth();\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\toffset = this.element.offset();\r\n\t\t\t\tleft = offset.left;\r\n\t\t\t}\r\n\t\t\tif (this.pickerPosition == 'top-left' || this.pickerPosition == 'top-right') {\r\n\t\t\t\ttop = offset.top - this.picker.outerHeight();\r\n\t\t\t} else {\r\n\t\t\t\ttop = offset.top + this.height;\r\n\t\t\t}\r\n\t\t\tthis.picker.css({\r\n\t\t\t\ttop:    top,\r\n\t\t\t\tleft:   left,\r\n\t\t\t\tzIndex: zIndex\r\n\t\t\t});\r\n\t\t},\r\n\t\t/** \r\n\t\t * 重写按键事件方法\r\n\t\t * <PRE>\r\n\t\t * 对简单字符的输入进行日期格式化\r\n\t\t * </PRE>\r\n\t\t * @memberof DatetimePicker\r\n\t\t * @function keydown\r\n\t\t */\r\n\t\tkeydown: function (e) {\r\n\t\t\tvar keyCode = e.keyCode;\r\n\t\t\tif(this._datetime._dealSysKey(e)){\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tif (this.picker.is(':not(:visible)')) {\r\n\t\t\t\t//按键操作打开面板 Mr.T2014年11月21日17:50:19\r\n\t\t\t\tif(keyCode >= 48 && keyCode <= 57){\r\n\t\t\t\t\tthis._datetime.showPanel();\r\n\t\t\t\t}else if(keyCode >= 96 && keyCode <= 105){//小键盘数字\r\n\t\t\t\t\tthis._datetime.showPanel();\r\n\t\t\t\t}else if(App.containKeyCode(e, this._datetime.setting.keyShowPanel)){\r\n\t\t\t\t\tthis._datetime.showPanel();\r\n\t\t\t\t\te.stopPropagation();\r\n\t\t\t\t}else if($.inArray(keyCode, [App.keyCode.LEFT, App.keyCode.RIGHT, App.keyCode.UP, App.keyCode.DOWN]) != -1){\r\n\t\t\t\t\t\r\n\t\t\t\t}else if(keyCode == App.keyCode.DELETE \r\n\t\t\t\t\t\t|| keyCode == App.keyCode.BACKSPACE){\r\n\t\t\t\t\tif(!this._datetime._isEditable()){\r\n\t\t\t\t\t\tthis._datetime.clearValue();\r\n\t\t\t\t\t}\r\n\t\t\t\t}else if((keyCode == 67 || keyCode == 86)// ctrl+C, ctrl+V\r\n\t\t\t\t\t\t&& e.ctrlKey == true){\r\n\t\t\t\t\t\r\n\t\t\t\t}else{\r\n\t\t\t\t\te.preventDefault();\r\n\t\t\t\t}\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tvar dateChanged = false,\r\n\t\t\t\tdir, viewMode,\r\n\t\t\t\tnewDate = '', newViewDate = '';\r\n\t\t\tswitch (keyCode) {\r\n\t\t\t\tcase App.keyCode.ESC: // escape\r\n\t\t\t\t\t//关闭前 先设置日期\r\n\t\t\t\t\tthis._setDateConvenient();\r\n\t\t\t\t\tthis.hide();\r\n\t\t\t\t\te.preventDefault();\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase App.keyCode.LEFT: // left\r\n\t\t\t\tcase App.keyCode.RIGHT: // right\r\n\t\t\t\t\tif (!this.keyboardNavigation) break;\r\n\t\t\t\t\tdir = keyCode == 37 ? -1 : 1;\r\n\t\t\t\t\tviewMode = this.viewMode;\r\n\t\t\t\t\tif (e.ctrlKey) {\r\n\t\t\t\t\t\tviewMode += 2;\r\n\t\t\t\t\t} else if (e.shiftKey) {\r\n\t\t\t\t\t\tviewMode += 1;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (viewMode == 4) {\r\n\t\t\t\t\t\tnewDate = this.moveYear(this.date, dir);\r\n\t\t\t\t\t\tnewViewDate = this.moveYear(this.viewDate, dir);\r\n\t\t\t\t\t} else if (viewMode == 3) {\r\n\t\t\t\t\t\tnewDate = this.moveMonth(this.date, dir);\r\n\t\t\t\t\t\tnewViewDate = this.moveMonth(this.viewDate, dir);\r\n\t\t\t\t\t} else if (viewMode == 2) {\r\n\t\t\t\t\t\tnewDate = this.moveDate(this.date, dir);\r\n\t\t\t\t\t\tnewViewDate = this.moveDate(this.viewDate, dir);\r\n\t\t\t\t\t} else if (viewMode == 1) {\r\n\t\t\t\t\t\tnewDate = this.moveHour(this.date, dir);\r\n\t\t\t\t\t\tnewViewDate = this.moveHour(this.viewDate, dir);\r\n\t\t\t\t\t} else if (viewMode == 0) {\r\n\t\t\t\t\t\tnewDate = this.moveMinute(this.date, dir);\r\n\t\t\t\t\t\tnewViewDate = this.moveMinute(this.viewDate, dir);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (this.dateWithinRange(newDate)) {\r\n\t\t\t\t\t\tthis.date = newDate;\r\n\t\t\t\t\t\tthis.viewDate = newViewDate;\r\n\t\t\t\t\t\tthis.setValue();\r\n\t\t\t\t\t\tthis.update();\r\n\t\t\t\t\t\te.preventDefault();\r\n\t\t\t\t\t\tdateChanged = true;\r\n\t\t\t\t\t}\r\n\t\t\t\t\te.stopPropagation();\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase App.keyCode.UP: // up\r\n\t\t\t\tcase App.keyCode.DOWN: // down\r\n\t\t\t\t\tif (!this.keyboardNavigation) break;\r\n\t\t\t\t\tdir = keyCode == 38 ? -1 : 1;\r\n\t\t\t\t\tviewMode = this.viewMode;\r\n\t\t\t\t\tif (e.ctrlKey) {\r\n\t\t\t\t\t\tviewMode += 2;\r\n\t\t\t\t\t} else if (e.shiftKey) {\r\n\t\t\t\t\t\tviewMode += 1;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (viewMode == 4) {\r\n\t\t\t\t\t\tnewDate = this.moveYear(this.date, dir);\r\n\t\t\t\t\t\tnewViewDate = this.moveYear(this.viewDate, dir);\r\n\t\t\t\t\t} else if (viewMode == 3) {\r\n\t\t\t\t\t\tnewDate = this.moveMonth(this.date, dir);\r\n\t\t\t\t\t\tnewViewDate = this.moveMonth(this.viewDate, dir);\r\n\t\t\t\t\t} else if (viewMode == 2) {\r\n\t\t\t\t\t\tnewDate = this.moveDate(this.date, dir * 7);\r\n\t\t\t\t\t\tnewViewDate = this.moveDate(this.viewDate, dir * 7);\r\n\t\t\t\t\t} else if (viewMode == 1) {\r\n\t\t\t\t\t\tif (this.showMeridian) {\r\n\t\t\t\t\t\t\tnewDate = this.moveHour(this.date, dir * 6);\r\n\t\t\t\t\t\t\tnewViewDate = this.moveHour(this.viewDate, dir * 6);\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tnewDate = this.moveHour(this.date, dir * 4);\r\n\t\t\t\t\t\t\tnewViewDate = this.moveHour(this.viewDate, dir * 4);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t} else if (viewMode == 0) {\r\n\t\t\t\t\t\tnewDate = this.moveMinute(this.date, dir * 4);\r\n\t\t\t\t\t\tnewViewDate = this.moveMinute(this.viewDate, dir * 4);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (this.dateWithinRange(newDate)) {\r\n\t\t\t\t\t\tthis.date = newDate;\r\n\t\t\t\t\t\tthis.viewDate = newViewDate;\r\n\t\t\t\t\t\tthis.setValue();\r\n\t\t\t\t\t\tthis.update();\r\n\t\t\t\t\t\te.preventDefault();\r\n\t\t\t\t\t\tdateChanged = true;\r\n\t\t\t\t\t}\r\n\t\t\t\t\te.stopPropagation();\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase App.keyCode.ENTER: // enter\r\n\t\t\t\t\tif (this.viewMode != 0) {\r\n\t\t\t\t\t\tvar oldViewMode = this.viewMode;\r\n\t\t\t\t\t\tthis.showMode(-1);\r\n\t\t\t\t\t\tthis.fill();\r\n\t\t\t\t\t\tif (oldViewMode == this.viewMode && this.autoclose) {\r\n\t\t\t\t\t\t\t//关闭前 先设置日期\r\n\t\t\t\t\t\t\tthis._setDateConvenient();\r\n\t\t\t\t\t\t\tthis.hide();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tthis.fill();\r\n\t\t\t\t\t\tif (this.autoclose) {\r\n\t\t\t\t\t\t\t//关闭前 先设置日期\r\n\t\t\t\t\t\t\tthis._setDateConvenient();\r\n\t\t\t\t\t\t\tthis.hide();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\te.preventDefault();\r\n\t\t\t\t\te.stopPropagation();\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase App.keyCode.TAB: // tab\r\n\t\t\t\t\t//关闭前 先设置日期\r\n\t\t\t\t\tthis._setDateConvenient();\r\n\t\t\t\t\tthis.hide();\r\n\t\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t\tif (dateChanged) {\r\n\t\t\t\tvar element = undefined;\r\n\t\t\t\tif (this.isInput) {\r\n\t\t\t\t\telement = this.element;\r\n\t\t\t\t} else if (this.component) {\r\n\t\t\t\t\telement = this.element.find('input');\r\n\t\t\t\t}\r\n\t\t\t\tif (element) {\r\n\t\t\t\t\telement.change();\r\n\t\t\t\t}\r\n\t\t\t\tthis.element.trigger({\r\n\t\t\t\t\ttype: 'changeDate',\r\n\t\t\t\t\tdate: this.date\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t},\r\n\t\t/**\r\n\t\t * 失去焦点 重新设置一遍值，清除无效数据\r\n\t\t */\r\n\t\t_myblur: function(){\r\n\t\t\tvar text = this.element.val();\r\n\t\t\tif(!text){\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tvar textDate = this._parseDate(text)\r\n\t\t\t\t,valueDate = this._parseDate(this._datetime.getValue());\r\n\t\t\tif(textDate && valueDate \r\n\t\t\t\t&& textDate.toString() == valueDate.toString()){\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tif(text == this._datetime.setting.tips){\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tthis._setDateConvenient(text);\r\n\t\t\tthis.setValue();\r\n\t\t\t//修复日期年度月份类型进行格式化时 需要点击两次才能设置值的bug\r\n\t\t\t//每次视图值会根据显示框的值进行更新 从而导致需要两次点击\r\n//\t\t\tthis.update();\r\n\t\t\t\r\n\t\t},\r\n\t\t/**\r\n\t\t * 设置日期值\r\n\t\t */\r\n\t\t_setDateConvenient: function(text){\r\n\t\t\tif(text === undefined){\r\n\t\t\t\ttext = this.element.val();\r\n\t\t\t}\r\n\t\t\tif(!this._datetime){\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tif(text == $.trim(this._datetime.setting.tips)){\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tvar d = this._parseDate(text);\r\n\t\t\tif(d){\r\n\t\t\t\tthis.date = d;\r\n\t\t\t\tthis.viewDate = d;\r\n\t\t\t}\r\n\t\t},\r\n\t\t/**\r\n\t\t * 将字符串类型转换为日期类型\r\n\t\t */\r\n\t\t_parseDate: function(text){\r\n\t\t\ttext = $.trim(text);\r\n\t\t\tif(!text){\r\n\t\t\t\treturn null;\r\n\t\t\t}\r\n\t\t\tvar date = new Date();\r\n\t\t\tvar infos = this._specialCase(text,date.getFullYear()+'');\r\n\t\t\tcomputeDate(date,infos);\r\n\t\t\treturn date;\r\n            /**\r\n             * 将时间按照日期信息进行计算\r\n             * @param date\r\n             * @param obj\r\n             */\r\n            function computeDate(date,obj){\r\n                if(!obj){\r\n                    return;\r\n                }\r\n                if(obj.year && obj.year < 10000){\r\n                    date.setFullYear(obj.year);\r\n                }\r\n                date.setDate(1);\r\n                if(obj.month){\r\n                    date.setMonth(obj.month-1);\r\n                }\r\n                if(obj.date){\r\n                    date.setDate(obj.date);\r\n                }\r\n                if(obj.hours){\r\n                    date.setHours(obj.hours);\r\n                }\r\n                if(obj.minute){\r\n                    date.setMinutes(obj.minute);\r\n                }\r\n                date.setHours(date.getHours() + 8);//组件datetimepicker 使用utc时间输出\r\n            }\r\n\t\t},\r\n\t\t/**\r\n\t\t * 几种特殊的格式\r\n\t\t * 1、纯数字格式  yyyymmdd 或 yyyymmddhhii 或大于12位格式的数字截取前12位\r\n\t\t * 2、用分割符分割后，按分割的数组arr长度\r\n\t\t * \t\t一：长度为2，如果arr[1]长度为4，则推断arr[1]为时间（hhii），arr[0]为日期\r\n\t\t * \t\t\t\t\t如果分割符为 :，则推断为时间，arr[0]为时，arr[1]为分\r\n\t\t * \t\t二：长度为4，如果同时满足arr[0]长度<5，arr[1]长度<3，arr[2]长度<3\r\n\t\t * \t\t\t\t则推断 arr[0]为年，arr[1]为月，arr[2]为日，arr[3]为时间\r\n\t\t * \t\t三：长度为5，如果同时满足arr[0]长度<5，arr[1]长度<3，arr[2]长度<3\r\n\t\t * \t\t\t\t则推断 arr[0]为年，arr[1]为月，arr[2]为日，arr[3]为时，arr[4]为分\r\n\t\t */\r\n\t\t_specialCase: function(text,currYear){\r\n\t\t\tif(!isNaN(text)){//[d+] 纯数字的格式\r\n\t\t\t\treturn this._getDateInfos(text.substr(0,8),currYear);\r\n\t\t\t}else{//[*分隔符*] 分割符[可以使用任何非数字]格式\r\n                var rs = {}\r\n                    ,vs = parseArray(text);\r\n                switch (vs.length) {\r\n                case 1:\r\n\t\t\t\t\treturn rs;\r\n\t\t\t\tcase 2://日期+时 或 日期\r\n\t\t\t\t\tvar v0 = parseFloat(vs[0])\r\n\t\t\t\t\t,v1 = parseFloat(vs[1]);\r\n\t\t\t\t\tif(isNaN(v0) && !isNaN(v1)){\r\n\t\t\t\t\t\trs.date = v1;\r\n\t\t\t\t\t}else if(!isNaN(v0) && isNaN(v1)){\r\n\t\t\t\t\t\trs.month = v0;\r\n\t\t\t\t\t}else if(vs[1].length == 4){//[*分隔符XXXX]  日期(X)  + 时间(时+分[hhii])\r\n\t\t\t\t\t\t$.extend(rs,this._getDateInfos(vs[0].substr(0,8),currYear));\r\n\t\t\t\t\t\trs.hours = parseFloat(vs[1].substr(0,2));\r\n\t\t\t\t\t\trs.minute = parseFloat(vs[1].substr(2,2));\r\n\t\t\t\t\t}else if(text.indexOf(':') > -1){//[XX:XX] 时+分\r\n\t\t\t\t\t\trs.hours = parseFloat(vs[0]);\r\n\t\t\t\t\t\trs.minute = parseFloat(vs[1]);\r\n\t\t\t\t\t}else if(vs[0].length == 4){//[XXXX分隔符*] 月日 + 时 或  年(yyyy) + 月\r\n\t\t\t\t\t\tvar v00 = parseFloat(vs[0].substr(0,2))\r\n\t\t\t\t\t\t,v01 = parseFloat(vs[0].substr(2,2)),\r\n\t\t\t\t\t\tv1 =  parseFloat(vs[1]);\r\n\t\t\t\t\t\tif(v00 <= 12 && v01 <= 31 && v1 <= 24){\r\n\t\t\t\t\t\t\trs.month = v00;\r\n\t\t\t\t\t\t\trs.date = v01;\r\n\t\t\t\t\t\t\trs.hours = v1;\r\n\t\t\t\t\t\t}else if(v1 <= 12){\r\n\t\t\t\t\t\t\trs.year = parseFloat(vs[0]);\r\n\t\t\t\t\t\t\trs.month = v1;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}else{//[*分隔符*] 月+日\r\n\t\t\t\t\t\trs.month = parseFloat(vs[0]);\r\n\t\t\t\t\t\trs.date = parseFloat(vs[1]);\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn rs;\r\n\t\t\t\tcase 3://[*分隔符*分隔符*]年+月+日\r\n\t\t\t\t\tif(vs[0].length <= 4 && vs[1].length <= 2 && vs[2].length <= 2){\r\n\t\t\t\t\t\tvar dateStr = vs[0] +fitZero(vs[1]) + fitZero(vs[2]);\r\n\t\t\t\t\t\t$.extend(rs,this._getDateInfos(dateStr,currYear));\r\n\t\t\t\t\t\treturn rs;\r\n\t\t\t\t\t}\r\n\t\t\t\tcase 4://[*分隔符*分隔符*分隔符*] 年+月+日+时\r\n\t\t\t\t\tif(vs[0].length <= 4 && vs[1].length <= 2 && vs[2].length <= 2){\r\n\t\t\t\t\t\tvar dateStr = vs[0] +fitZero(vs[1]) + fitZero(vs[2]);\r\n\t\t\t\t\t\t$.extend(rs,this._getDateInfos(dateStr,currYear));\r\n\t\t\t\t\t\tif(vs[3].length <= 2){\r\n\t\t\t\t\t\t\trs.hours = parseFloat(vs[3]);\r\n\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\trs.hours = parseFloat(vs[3].substr(0,2));\r\n\t\t\t\t\t\t\trs.minute = parseFloat(vs[3].substr(2,2));\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\treturn rs;\r\n\t\t\t\t\t}\r\n\t\t\t\tdefault://[*分隔符*分隔符*分隔符*分隔符*] 年+月+日+时+分\r\n\t\t\t\t\tif(vs[0].length <= 4 && vs[1].length <= 2 && vs[2].length <= 2){\r\n\t\t\t\t\t\tvar dateStr = vs[0] +fitZero(vs[1]) + fitZero(vs[2]);\r\n\t\t\t\t\t\t$.extend(rs,this._getDateInfos(dateStr,currYear));\r\n\t\t\t\t\t\trs.hours = parseFloat(vs[3]);\r\n\t\t\t\t\t\trs.minute = parseFloat(vs[4]);\r\n\t\t\t\t\t\treturn rs;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n            /**\r\n             * 将文本按照非数值进行分割并返回数组\r\n             */\r\n            function parseArray(text){\r\n                var rs = [];\r\n                var temp = '';\r\n                for(var i = 0; i < text.length; i++){\r\n                    if(!isNaN(text[i]) && text[i] != ' '){\r\n                        temp += text[i];\r\n                    }else if($.trim(temp)){\r\n                        rs.push(temp);\r\n                        temp = '';\r\n                    }\r\n                }\r\n                rs.push(temp);\r\n                return rs;\r\n            };\r\n\t\t\t/**\r\n\t\t\t * 如果长度为1，则在前面补一个0\r\n\t\t\t */\r\n\t\t\tfunction fitZero(t){\r\n\t\t\t\tif(t.length == 1)\r\n\t\t\t\t\treturn '0' + t;\r\n\t\t\t\treturn t;\r\n\t\t\t}\r\n\t\t},\r\n\t\t/**\r\n\t\t * 根据输入字符串获取日期的年月日准确值\r\n\t\t */\r\n\t\t_getDateInfos: function(dateStr,currYearStr){\r\n            var format = this._datetime.setting.format;\r\n            if(format == 'i' || format == 'ii'){\r\n                return {minute: parseFloat(dateStr)};\r\n            }else if(format == 'h' || format == 'hh'){\r\n                return {hours: parseFloat(dateStr)};\r\n            }else if(format == 'dd' || format == 'd'){\r\n                return {date: parseFloat(dateStr)};\r\n            }else if(format == 'm' || format == 'mm'){\r\n                return {month: parseFloat(dateStr)};\r\n            }else if(format == 'yyyy'){\r\n                var year = 0\r\n                    ,len = dateStr.length;\r\n                if(len <= 4){\r\n                    year = parseFloat(currYearStr.substr(0,4-len) + dateStr);\r\n                }else{\r\n                    year = parseFloat(dateStr.substr(0,4));\r\n                }\r\n                return {year: year};\r\n            }\r\n            var rs = {}\r\n                ,minView = this._datetime.setting.minView;\r\n            switch (dateStr.length) {\r\n            case 1://d or m\r\n                var x = parseFloat(dateStr);\r\n                if(minView == 3){\r\n                    rs.month = x;\r\n                }else{\r\n                    rs.date = x;\r\n                }\r\n                return rs;\r\n            case 2://dd or mm\r\n                var x = parseFloat(dateStr);\r\n                if(minView == 3){\r\n                    rs.month = x;\r\n                }else{\r\n                    rs.date = x;\r\n                }\r\n                return rs;\r\n\t\t\tcase 3://ymm or mdd\r\n                if(minView == 3){\r\n                    rs.year = parseFloat(currYearStr.substr(0,3) + dateStr.substr(0,1));\r\n                    rs.month = parseFloat(dateStr.substr(1,2));\r\n                }else{\r\n                    rs.month = parseFloat(dateStr.substr(0,1));\r\n                    rs.date = parseFloat(dateStr.substr(1,2));\r\n                }\r\n\t\t\t\treturn rs;\r\n\t\t\tcase 4://mmdd or yyyy or yymm\r\n                if(parseFloat(dateStr.substr(0,2)) > 12){\r\n\t\t\t\t\trs.year = parseFloat(dateStr);\r\n                }else{\r\n\t\t\t\t\tvar v0 = parseFloat(dateStr.substr(0,2))\r\n\t\t\t\t\t,v1 = parseFloat(dateStr.substr(2,2));\r\n\t\t\t\t\tif(v0 <= 12){\r\n\t\t\t\t\t\trs.month = v0;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif(v1 <= 31){\r\n\t\t\t\t\t\trs.date = v1;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\treturn rs;\r\n\t\t\tcase 5://yyyym\r\n                rs.year = parseFloat(dateStr.substr(0,4));\r\n                rs.month = parseFloat(dateStr.substr(4,1));\r\n\t\t\t\treturn rs;\r\n\t\t\tcase 6://yyyymm\r\n                rs.year = parseFloat(dateStr.substr(0,4));\r\n                rs.month = parseFloat(dateStr.substr(4,2));\r\n\t\t\t\treturn rs;\r\n\t\t\tcase 7://yyyymmd\r\n                rs.year = parseFloat(dateStr.substr(0,4));\r\n                rs.month = parseFloat(dateStr.substr(4,2));\r\n                rs.date = parseFloat(dateStr.substr(6,1));\r\n\t\t\t\treturn rs;\r\n            default://yyyymmdd\r\n\t\t\t\trs.year = parseFloat(dateStr.substr(0,4));\r\n\t\t\t\trs.month = parseFloat(dateStr.substr(4,2));\r\n\t\t\t\trs.date = parseFloat(dateStr.substr(6,2));\r\n\t\t\t\treturn rs;\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\t$.extend($.fn.datetimepicker.Constructor.prototype,exDpPrototype);\r\n\treturn Datetime;\r\n\tfunction limitDate(that){\r\n\t\tvar $date = null\r\n\t\t\t,val = null\r\n\t\t\t,date = null;\r\n\t\tif(that.setting.datebegin){\r\n\t\t\t$date = $A('#' + that.setting.datebegin).data('datetime');\r\n\t\t\tval = $date.getText();\r\n\t\t\tif(val){\r\n\t\t\t\tdate = $date.datetimepicker.getDate();\r\n\t\t\t}\r\n\t\t\tthat.setStartDate(date);\r\n\t\t}else if(that.setting.dateend){\r\n\t\t\t$date = $A('#' + that.setting.dateend).data('datetime');\r\n\t\t\tval = $date.getText();\r\n\t\t\tif(val){\r\n\t\t\t\tdate = $date.datetimepicker.getDate();\r\n\t\t\t}\r\n\t\t\tthat.setEndDate(date);\r\n\t\t}\r\n\t};\r\n});\r\n\n",
    "define('app/widgets/grid/app-grid-headerContextMenu',['app/core/app-class', 'app/core/app-jquery', 'app/core/app-options', \r\n\t'app/core/app-core', 'jquery/jquery.ztree'], function(Class, $, Options, App) {\r\n\t\r\n\t'use strict';\r\n\t\r\n\t/**\r\n\t * 导出网格的扩展方法\r\n\t */\r\n\tvar GridHeaderContextMenu = Class.create({\r\n\t\t/**\r\n\t\t * 初始化网格的导出模块\r\n\t\t */\r\n\t\t_initContextMenu: function(){\r\n\t\t\tif(!this.setting.columnManager){\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tvar $headerContextMenu = $('<div class=\"grid-column-tree\" oncontextmenu=\"return false\"><div>' +\r\n\t\t\t\t\t\t\t\t\t       '<ul id=\"' + App.uuid('app_ztree_') + '\" class=\"ztree\"></ul>' +\r\n\t\t\t\t\t\t\t\t\t   '</div></div>').appendTo($.$appPanelContainer)\r\n\t\t\t\t,$headerContextMsg = $('<div class=\"grid-tree-msg\">主视图区域至少保留一个列</div>').appendTo($.$appPanelContainer);\r\n\t\t\tthis.$headerContextMenu = $headerContextMenu;\r\n\t\t\tthis.$headerContextMsg = $headerContextMsg;\r\n\t\t\tvar context = this;\r\n\t\t\tthis.$tableHeader.on('mouseup.grid.api', '>div,td', function(e){\r\n\t\t\t\tif(e.button !== 2){\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tvar pageX = e.pageX || e.screenX\r\n\t\t\t\t\t,pageY = e.pageY || e.screenY\r\n\t\t        \t,pos = {left:pageX-1, top: pageY-1, 'z-index': Options.zindexs.droppanel++, display: 'block'}\r\n\t\t\t\t$headerContextMenu.css(pos);\r\n\t\t\t\tinitContextMenu(context);\r\n\t\t\t});\r\n\t\t\tthis.$headerContextMenu.on('mouseleave.grid-context-menu.api', function(e){\r\n\t\t\t\tvar opacity = 10\r\n\t\t\t\t$headerContextMenu.hideTimer = setInterval(function(){\r\n\t\t\t\t\topacity -= 1;\r\n\t\t\t\t\t$headerContextMenu.css('opacity', 0.1*opacity);\r\n\t\t\t\t\tif(opacity == 0){\r\n\t\t\t\t\t\t$headerContextMenu.hide();\r\n\t\t\t\t\t\tclearInterval($headerContextMenu.hideTimer);\r\n\t\t\t\t\t}\r\n\t\t\t\t}, 130);\r\n\t\t\t});\r\n\t\t\tthis.$headerContextMenu.on('mouseenter.grid-context-menu.api', function(e){\r\n\t\t\t\tclearInterval($headerContextMenu.hideTimer);\r\n\t\t\t\t$headerContextMenu.css('opacity', 1);\r\n\t\t\t});\r\n\t\t}\r\n\t});\r\n\t/**\r\n\t * 初始化网格列菜单\r\n\t */\r\n\tfunction initContextMenu(context){\r\n\t\tif(!context._contextMenuZtree){\r\n\t\t\tvar treeList = context.getColumnTree()\r\n\t\t\t\t,$ul = context.$headerContextMenu.find('>div>ul')\r\n\t\t\t\t,data = [];\r\n\t\t\tfor(var i = 0 ; i < treeList.length; i++){\r\n\t\t\t\tpushCol(treeList[i], data);\r\n\t\t\t}\r\n\t\t\t$.fn.zTree.init($ul, getZtreeSetting(context), data);\r\n\t\t\tcontext._contextMenuZtree = $.fn.zTree.getZTreeObj($ul.attr('id'));\r\n\t\t}\r\n\t}\r\n\t/**\r\n\t * 递归放入表格列\r\n\t */\r\n\tfunction pushCol(col, list){\r\n\t\tif(col.sysCol){\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tif(!col.showTree){\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tvar node = {}; \r\n\t\tnode.chkDisabled = col.lockTree;\r\n\t\tnode.checked = !col.hidden;\r\n\t\tnode.id = col._cid;\r\n\t\tif(col.parentColumn){\r\n\t\t\tnode.parent = col.parentColumn._cid;\r\n\t\t}\r\n\t\tnode.name = col.title;\r\n\t\tnode.open = true;\r\n\t\tnode.viewPos = col.viewPos;\r\n\t\tlist.push(node);\r\n\t\tvar children = col.children;\r\n\t\tif(children){\r\n\t\t\tfor(var i = 0; i < children.length; i++){\r\n\t\t\t\tpushCol(children[i], list);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\t/**\r\n\t * 获取树的设置参数\r\n\t */\r\n\tfunction getZtreeSetting(context){\r\n\t\tvar s = context.setting;\r\n\t\tvar setting = {\r\n\t\t\tview: {\r\n\t\t\t\tselectedMulti: false,\r\n\t\t\t\tdblClickExpand: true,\r\n\t\t\t\tshowLine: true,\r\n\t\t\t\tshowIcon: false\t\t\t\t\t\r\n\t\t\t},\r\n\t\t\tdata:{\r\n\t\t\t\tkey:{\r\n\t\t\t\t\tname: 'name'\r\n\t\t\t\t},\r\n\t\t\t\tsimpleData: {\r\n\t\t\t\t\tenable: true,\r\n\t\t\t\t\tidKey: 'id',\r\n\t\t\t\t\tpIdKey: 'parent',\r\n\t\t\t\t\trootPId: ''\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tcheck: {\r\n\t\t\t\tenable: true\r\n\t\t\t},\r\n\t\t\tcallback: {\r\n\t\t\t\tonClick: function(event, treeId, treeNode){\r\n\t\t\t\t\tcontext._contextMenuZtree.checkNode(treeNode, !treeNode.checked, true, true);\r\n\t\t\t\t},\r\n\t\t\t\tonCheck: function(event, treeId, treeNode){\r\n\t\t\t\t\tif(treeNode.checked){\r\n\t\t\t\t\t\tshowColumn(treeNode.id, context);\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\thideColumn(treeNode.id, context);\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\tbeforeCheck: function(treeId, treeNode){\r\n\t\t\t\t\tvar level = treeNode.level\r\n\t\t\t\t\t\t,mainNodes = context._contextMenuZtree.getNodesByFilter(function(node){\r\n\t\t\t\t\t\t\treturn node.level == level && node.viewPos == 'main' && node.checked;\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\tif(treeNode.viewPos == 'main' && mainNodes.length == 1 && treeNode.checked){\r\n\t\t\t\t\t\tvar rect = $('#' + treeNode.tId + '_a')[0].getBoundingClientRect();\r\n\t\t\t\t\t\tcontext.$headerContextMsg.css({left: rect.left+ rect.width, top:rect.top});\r\n\t\t\t\t\t\tcontext.$headerContextMsg.show();\r\n\t\t\t\t\t\tsetTimeout(function(){\r\n\t\t\t\t\t\t\tcontext.$headerContextMsg.hide(500);\r\n\t\t\t\t\t\t}, 2000);\r\n\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\treturn true;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t};\r\n\t\treturn setting;\r\n\t}\r\n\t/**\r\n\t * 根据内部列id显示列\r\n\t * @param cid\r\n\t */\r\n\tfunction showColumn(cid, context){\r\n\t\tvar column = context._column[cid];\r\n\t\tif(column.children){\r\n\t\t\tvar children = column.children;\r\n\t\t\tfor(var i = 0 ; i < children.length; i++){\r\n\t\t\t\tvar child = children[i]; \r\n\t\t\t\tif(child.children){\r\n\t\t\t\t\tshowColumn(child._cid, context);\r\n\t\t\t\t}else{\r\n\t\t\t\t\tcontext.showColumn(child.field);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}else{\r\n\t\t\tcontext.showColumn(column.field);\r\n\t\t}\r\n\t}\r\n\t/**\r\n\t * 根据内部列id隐藏列\r\n\t * @param cid\r\n\t */\r\n\tfunction hideColumn(cid, context){\r\n\t\tvar column = context._column[cid];\r\n\t\tif(column.children){\r\n\t\t\tvar children = column.children;\r\n\t\t\tfor(var i = 0 ; i < children.length; i++){\r\n\t\t\t\tvar child = children[i]; \r\n\t\t\t\tif(child.children){\r\n\t\t\t\t\thideColumn(child._cid, context);\r\n\t\t\t\t}else{\r\n\t\t\t\t\tcontext.hideColumn(child.field);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}else{\r\n\t\t\tcontext.hideColumn(column.field);\r\n\t\t}\r\n\t}\r\n\treturn GridHeaderContextMenu;\r\n});\n",
    "define('app/widgets/grid/app-grid-editor',['app/core/app-class', 'app/core/app-jquery', 'app/core/app-options', 'app/core/app-core'], function(Class, $, Options, App) {\r\n\t\r\n\t'use strict';\r\n\t\r\n\t/**\r\n\t * 网格编辑的扩展方法\r\n\t */\r\n\tvar GridEditor = Class.create({\r\n\t\t/**\r\n\t\t * 初始行编辑器\r\n\t\t */\r\n\t\t_initEditor: function(){\r\n\t\t\tvar s = this.setting\r\n\t\t\t\t,requestFiles = []\r\n\t\t\t\t,editorMap = this.editor\r\n\t\t\t\t,grid = this;\r\n\t\t\tthis._gatherViewEditor(s.frozenColumns);\r\n\t\t\tthis._gatherViewEditor(s.frozenColumnsRight);\r\n\t\t\tthis._gatherViewEditor(s.columns);\r\n\t\t\t\r\n\t\t\tfor(var editorField in editorMap){\r\n\t\t\t\tvar fileName = 'app/widgets/form/app-' + editorMap[editorField].type;\r\n\t\t\t\tif($.inArray(fileName, requestFiles) == -1){\r\n\t\t\t\t\trequestFiles.push(fileName);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\trequire(requestFiles,function(){\r\n\t\t\t\tfor(var editorField in editorMap){\r\n\t\t\t\t\tvar editorInfo = editorMap[editorField];\r\n\t\t\t\t\teditorInfo.$editor[editorInfo.type](editorInfo.options);\r\n\t\t\t\t\teditorInfo.editor = editorInfo.$editor.data(editorInfo.type);\r\n\t\t\t\t}\r\n\t\t\t\tgrid._linkEditor();\r\n\t\t\t});\r\n\t\t\tthis._registEditorEvent();\r\n\t\t},\r\n\t\t/**\r\n\t\t * 收集编辑器组件的信息\r\n\t\t * @param viewColumns 视图列\r\n\t\t */\r\n\t\t_gatherViewEditor: function(viewColumns){\r\n\t\t\tfor ( var i = 0; i < viewColumns.length; i++) {\r\n\t\t\t\tfor(var j = 0; j < viewColumns[i].length; j++){\r\n\t\t\t\t\tvar col = viewColumns[i][j]\r\n\t\t\t\t\t\t,editor = col.editor;\r\n\t\t\t\t\tif(editor){\r\n\t\t\t\t\t\tthis._initEditorOptions(editor, col);\r\n\t\t\t\t\t\tthis.$rowEditor.append(editor.$editor);\r\n\t\t\t\t\t\tthis.editor[col.field] = editor;\t\t\t\t\t\r\n\t\t\t\t\t\tthis.setting.hasEditor = true;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\t/**\r\n\t\t * 生成编辑器的默认参数\r\n\t\t */\r\n\t\t_initEditorOptions: function(editor, col){\r\n\t\t\teditor.$editor = $('<input/>');\r\n\t\t\teditor.column = col;\r\n\t\t\tif(!editor.type){ editor.type = 'textbox'; }\r\n\t\t\tif(!editor.options){ editor.options = {}; }\r\n\t\t\tif(editor.type == 'combobox' && !editor.options.panelwidth){\r\n\t\t\t\teditor.options.panelwidth = '100%';\r\n\t\t\t}\r\n\t\t\tvar grid = this;\r\n\t\t\teditor.options.editorField = col.field;\r\n\t\t\teditor.options.onFocus = function(){\r\n\t\t\t\tvar field = this.setting.editorField;\r\n\t\t\t\tvar $td = grid.$tableHeaderMain.find('[field=' + field + ']');\r\n\t\t\t\tif($td.length == 0){\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tvar containerWidth = grid.$tableHeaderMain.outerWidth()  + 3\r\n\t\t\t\t\t,scrollLeft = grid.$tableHeaderMain.scrollLeft()\r\n\t\t\t\t\t,leftBorder = $td.offset().left - grid.$tableHeaderMain.offset().left + scrollLeft\r\n\t\t\t\t\t,rightBorder = leftBorder +  $td.outerWidth();\r\n\t\t\t\tif(leftBorder <= scrollLeft){\r\n\t\t\t\t\tgrid.$xProxyScroll.scrollLeft(leftBorder);\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tif(rightBorder >= scrollLeft + containerWidth){\r\n\t\t\t\t\tgrid.$xProxyScroll.scrollLeft(rightBorder - containerWidth);\r\n\t\t\t\t}\r\n\t\t\t};\r\n\t\t\tif(this.setting.editorDelBtn){\r\n\t\t\t\teditor.options.onMouseOver = function(){\r\n\t\t\t\t\tif(this.$proxyDelBtn == undefined){\r\n\t\t\t\t\t\tvar proxy = this;\r\n\t\t\t\t\t\tthis.$proxyDelBtn = $('<span class=\"proxy-delete-btn\"><i></i></span>');\r\n\t\t\t\t\t\tthis.$proxyDelBtn.on('mouseup', function(e){\r\n\t\t\t\t\t\t\tproxy.clearValue();\r\n\t\t\t\t\t\t\te.stopPropagation();\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\tthis.$proxyDelBtn.on('mouseover', function(e){\r\n\t\t\t\t\t\t\t$(this).show();\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\tthis.$proxyDelBtn.on('mouseout', function(e){\r\n\t\t\t\t\t\t\t$(this).hide();\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\tthis.$proxyDelBtn.appendTo(grid.$absoluteComp);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif(this.getValue() || this.getText()){\r\n\t\t\t\t\t\tvar pos = this.$element.position();\r\n\t\t\t\t\t\tpos.left += this.$element.outerWidth();\r\n\t\t\t\t\t\tthis.$proxyDelBtn.css(pos);\r\n\t\t\t\t\t\tthis.$proxyDelBtn.show();\r\n\t\t\t\t\t}\r\n\t\t\t\t};\r\n\t\t\t\teditor.options.onMouseOut =function(){\r\n\t\t\t\t\tif(this.$proxyDelBtn){\r\n\t\t\t\t\t\tthis.$proxyDelBtn.hide();\r\n\t\t\t\t\t}\r\n\t\t\t\t};\r\n\t\t\t}\r\n\t\t},\r\n\t\t/**\r\n\t\t * 将网格的编辑器按双向链表连接起来，并构成环状\r\n\t\t */\r\n\t\t_linkEditor: function(){\r\n\t\t\tif(!this.setting.hasEditor){\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tvar leftEdts = this._linkEditorForView(this.frozenColumns)\r\n\t\t\t\t,mainEdts = this._linkEditorForView(this.columns)\r\n\t\t\t\t,rightEdts = this._linkEditorForView(this.frozenColumnsRight);\r\n\t\t\t\r\n\t\t\tif(!leftEdts && !mainEdts && !rightEdts){\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tif(leftEdts && !mainEdts && !rightEdts){\r\n\t\t\t\tlinkOne(leftEdts);\r\n\t\t\t\treturn;\r\n\t\t\t}else if(mainEdts && !leftEdts && !rightEdts){\r\n\t\t\t\tlinkOne(mainEdts);\r\n\t\t\t\treturn;\r\n\t\t\t}else if(rightEdts && !leftEdts && !mainEdts){\r\n\t\t\t\tlinkOne(rightEdts);\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tif(leftEdts && mainEdts){\r\n\t\t\t\tleftEdts.lastEditor._next = mainEdts.firstEditor;\r\n\t\t\t\tmainEdts.firstEditor._prev = leftEdts.lastEditor;\r\n\t\t\t}\r\n\t\t\tif(mainEdts && rightEdts){\r\n\t\t\t\tmainEdts.lastEditor._next = rightEdts.firstEditor;\r\n\t\t\t\trightEdts.firstEditor._prev = mainEdts.lastEditor;\r\n\t\t\t}\r\n\t\t\tif(leftEdts && rightEdts){\r\n\t\t\t\tleftEdts.firstEditor._next = rightEdts.lastEditor;\r\n\t\t\t\trightEdts.lastEditor._prev = leftEdts.firstEditor;\r\n\t\t\t}else if(leftEdts && mainEdts){\r\n\t\t\t\tleftEdts.firstEditor._prev = mainEdts.lastEditor;\r\n\t\t\t\tmainEdts.lastEditor._next = leftEdts.firstEditor;\r\n\t\t\t}else if(mainEdts && rightEdts){\r\n\t\t\t\tmainEdts.firstEditor._prev = rightEdts.lastEditor;\r\n\t\t\t\trightEdts.lastEditor._next = mainEdts.firstEditor;\r\n\t\t\t}\r\n\t\t\tfunction linkOne(edts){\r\n\t\t\t\tedts.lastEditor._next = edts.firstEditor;\r\n\t\t\t\tedts.firstEditor._prev = edts.lastEditor;\r\n\t\t\t}\r\n\t\t},\r\n\t\t/**\r\n\t\t * 将视图内的编辑器按双向链表连接起来，并返回视图内第一个和最后一个编辑器\r\n\t\t */\r\n\t\t_linkEditorForView: function(cols){\r\n\t\t\tvar firstEditor = null\r\n\t\t\t\t,lastEditor = null;\r\n\t\t\tfor(var i=0; i< cols.length; i++){\r\n\t\t\t\tvar currEditor = cols[i].editor; \r\n\t\t\t\tif(currEditor){\r\n\t\t\t\t\tvar nextEditor = this._getNextEditor(cols, i+1);\r\n\t\t\t\t\tif(nextEditor){\r\n\t\t\t\t\t\tcurrEditor._next = nextEditor;\r\n\t\t\t\t\t\tnextEditor._prev = currEditor; \r\n\t\t\t\t\t}\r\n\t\t\t\t\tif(firstEditor == null){\r\n\t\t\t\t\t\tfirstEditor = currEditor;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tlastEditor = currEditor;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif(firstEditor){\r\n\t\t\t\treturn {firstEditor:firstEditor, lastEditor:lastEditor};\r\n\t\t\t}else{\r\n\t\t\t\treturn null;\r\n\t\t\t}\r\n\t\t},\r\n\t\t/**\r\n\t\t * 获取下一个编辑器\r\n\t\t * @param cols\r\n\t\t * @param index\r\n\t\t */\r\n\t\t_getNextEditor: function(cols, index){\r\n\t\t\tvar nextEditor = null;\r\n\t\t\tfor(var i = index; i < cols.length; i++){\r\n\t\t\t\tnextEditor = cols[i].editor; \r\n\t\t\t\tif(nextEditor){\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn nextEditor;\r\n\t\t},\r\n\t\t/**\r\n\t\t * 注册编辑器相关事件\r\n\t\t */\r\n\t\t_registEditorEvent: function(){\r\n\t\t\tif(this.setting._hasOperator){\r\n\t\t\t\tthis.$tableHeader.on('click.grid.operator.api', 'td>div>.rowBtn', $.proxy(this._onRowOperatorBtnClick, this));\r\n\t\t\t\tthis.$tableBody.on('click.grid.operator.api', 'td>div>.rowBtn', $.proxy(this._onRowOperatorBtnClick, this));\r\n\t\t\t}\r\n\t\t\tif(this.setting.hasEditor){\r\n\t\t\t\tthis.$tableBody.on('click.grid-edit.api', 'td', $.proxy(this._onAutoBeginEdit, this));\r\n\t\t\t\tthis.$element.on('mouseup.grid-edit.api', $.proxy(this._onAutoEndEdit, this));\r\n\t\t\t\tthis.$tableBody.on('keydown.grid-edit.api', 'td', $.proxy(this._onTdKeyDown, this));\r\n\t\t\t}\r\n\t\t},\r\n\t\t/**\r\n\t\t * 点击数据行开始编辑\r\n\t\t */\r\n\t\t_onAutoBeginEdit: function(e){\r\n\t\t\tif(e.target.tagName == 'A'){\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tvar\t$td = $(e.currentTarget)\r\n\t\t\t\t,rowIndex = $td.parent().index();\r\n\t\t\tif(this.setting.autoBeginEdit){\r\n\t\t\t\tthis.beginEdit(rowIndex);\r\n\t\t\t\tvar field = $td.attr('field')\r\n\t\t\t\t\t,editorInfo = this.editor[field];\r\n\t\t\t\tif(editorInfo){\r\n\t\t\t\t\teditorInfo.editor.focus();\t\t\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\t/**\r\n\t\t * 点击非数据行结束编辑\r\n\t\t */\r\n\t\t_onAutoEndEdit: function(e){\r\n\t\t\tif($(e.target).closest('.grid-body-content').length > 0){\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tif(this.setting.autoEndEdit){\r\n\t\t\t\tif(this._currentEditRowId){\r\n\t\t\t\t\tvar rowIndex = this._convertRowIdToRowIndex(this._currentEditRowId);\r\n\t\t\t\t\tthis.endEdit(rowIndex);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\t/**\r\n\t\t * 单元格接受按键按下的事件 控制编辑器的焦点切换\r\n\t\t */\r\n\t\t_onTdKeyDown: function(e){\r\n\t\t\tvar s = this.setting;\r\n\t\t\tif(App.containKeyCode(e, s.keyLeftEditor)){\r\n\t\t\t\tthis._keyLeftEditor(e);\r\n\t\t\t}else if(App.containKeyCode(e, s.keyRightEditor)){\r\n\t\t\t\tthis._keyRightEditor(e);\r\n\t\t\t}else if(App.containKeyCode(e, s.keyUpEditor)){\r\n\t\t\t\tthis._keyUpEditor(e);\r\n\t\t\t}else if(App.containKeyCode(e, s.keyDownEditor)){\r\n\t\t\t\tthis._keyDownEditor(e);\r\n\t\t\t}\r\n\t\t\tif(s.keySpecEnabled){\r\n\t\t\t\tif(App.containKeyCode(e, s.keyPrevEditor)){\r\n\t\t\t\t\tthis._keyPrevEditor(e);\r\n\t\t\t\t}else if(App.containKeyCode(e, s.keyNextEditor)){\r\n\t\t\t\t\tthis._keyNextEditor(e);\r\n\t\t\t\t}else if(App.containKeyCode(e, s.keyAppendRow)){\r\n\t\t\t\t\tthis._keyAppendRow(e);\r\n\t\t\t\t}else if(App.containKeyCode(e, s.keyDeleteRow)){\r\n\t\t\t\t\tthis._keyDeleteRow(e);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\t/**\r\n\t\t * 让编辑器失去焦点\r\n\t\t */\r\n\t\t_editorBlur: function(activeEditor, handle){\r\n\t\t\tactiveEditor.editor.blur(handle);\r\n\t\t},\r\n\t\t/**\r\n\t\t * 让编辑器获取焦点\r\n\t\t */\r\n\t\t_editorFocus: function(activeEditor){\r\n\t\t\tvar that = this;\r\n\t\t\tsetTimeout(function(){\r\n\t\t\t\tif(!activeEditor.editor.isActive()){\r\n\t\t\t\t\tactiveEditor.editor.focus();\r\n\t\t\t\t}\r\n\t\t\t}, 0);\r\n\t\t},\r\n\t\t/**\r\n\t\t * 聚焦左边一个编辑器\r\n\t\t */\r\n\t\t_keyLeftEditor: function(e){\r\n\t\t\tvar editor = this.editor[$(e.currentTarget).attr('field')]\r\n\t\t\t\t,grid = this;\r\n\t\t\tthis._editorBlur(editor, function(){\r\n\t\t\t\tvar activeEditor = editor._prev;\r\n\t\t\t\twhile(true){\r\n\t\t\t\t\tif(!activeEditor.editor.isReadonly() && activeEditor.editor.isEnabled()\r\n\t\t\t\t\t\t&& grid.columnIsVisible(activeEditor.column.field)){\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tactiveEditor = activeEditor._prev;\r\n\t\t\t\t}\r\n\t\t\t\tgrid._editorFocus(activeEditor);\r\n\t\t\t});\r\n\t\t\te.preventDefault();\r\n\t\t},\r\n\t\t/**\r\n\t\t * 聚焦右边一个编辑器\r\n\t\t */\r\n\t\t_keyRightEditor: function(e){\r\n\t\t\tvar editor = this.editor[$(e.currentTarget).attr('field')]\r\n\t\t\t\t,grid = this;\r\n\t\t\tthis._editorBlur(editor, function(){\r\n\t\t\t\tvar activeEditor = editor._next;\r\n\t\t\t\twhile(true){\r\n\t\t\t\t\tif(!activeEditor.editor.isReadonly() && activeEditor.editor.isEnabled()\r\n\t\t\t\t\t\t\t&& grid.columnIsVisible(activeEditor.column.field)){\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tactiveEditor = activeEditor._next;\r\n\t\t\t\t}\r\n\t\t\t\tgrid._editorFocus(activeEditor);\r\n\t\t\t});\r\n\t\t\te.preventDefault();\r\n\t\t},\r\n\t\t/**\r\n\t\t * 聚焦上边一个编辑器\r\n\t\t */\r\n\t\t_keyUpEditor: function(e){\r\n\t\t\tvar editor = this.editor[$(e.currentTarget).attr('field')]\r\n\t\t\t\t,rowIndex = this.getCurrentEditRowIndex()\r\n\t\t\t\t,prevRowIndex = this._getPrevVisibleRowIndex(rowIndex)\r\n\t\t\t\t,grid = this;\r\n\t\t\tthis._editorBlur(editor, function(){\r\n\t\t\t\tgrid.beginEdit(prevRowIndex);\r\n\t\t\t\tgrid.locateRow(grid._currentEditRowId);\r\n\t\t\t\tgrid._editorFocus(editor);\r\n\t\t\t});\r\n\t\t\te.preventDefault();\r\n\t\t},\r\n\t\t/**\r\n\t\t * 聚焦下边一个编辑器\r\n\t\t */\r\n\t\t_keyDownEditor: function(e){\r\n\t\t\tvar editor = this.editor[$(e.currentTarget).attr('field')]\r\n\t\t\t\t,rowIndex = this.getCurrentEditRowIndex()\r\n\t\t\t\t,nextRowIndex = this._getNextVisibleRowIndex(rowIndex)\r\n\t\t\t\t,grid = this;\r\n\t\t\tthis._editorBlur(editor, function(){\r\n\t\t\t\tgrid.beginEdit(nextRowIndex);\r\n\t\t\t\tgrid.locateRow(grid._currentEditRowId);\r\n\t\t\t\tgrid._editorFocus(editor);\r\n\t\t\t});\r\n\t\t\te.preventDefault();\r\n\t\t},\r\n\t\t/**\r\n\t\t * 聚焦下一个编辑器\r\n\t\t */\r\n\t\t_keyNextEditor: function(e){\r\n\t\t\tvar editor = this.editor[$(e.currentTarget).attr('field')]\r\n\t\t\t\t,grid = this;\r\n\t\t\tthis._editorBlur(editor, function(){\r\n\t\t\t\tif(grid._isLastEditor(editor)){\r\n\t\t\t\t\tvar rowIndex = grid.getCurrentEditRowIndex()\r\n\t\t\t\t\t,totalRowLen = grid.$tableBodyMain.find('tr').length;\r\n\t\t\t\t\tif(rowIndex == totalRowLen - 1){\r\n\t\t\t\t\t\tgrid.appendRow();\r\n\t\t\t\t\t\tgrid.beginEdit(totalRowLen);\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\tvar nextRowIndex = grid._getNextVisibleRowIndex(rowIndex);\r\n\t\t\t\t\t\tgrid.beginEdit(nextRowIndex);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tgrid._keyRightEditor(e);\r\n\t\t\t});\r\n\t\t},\r\n\t\t/**\r\n\t\t * 聚焦上一个编辑器\r\n\t\t */\r\n\t\t_keyPrevEditor: function(e){\r\n\t\t\tvar editor = this.editor[$(e.currentTarget).attr('field')]\r\n\t\t\t\t,grid = this;\r\n\t\t\tthis._editorBlur(editor, function(){\r\n\t\t\t\tif(grid._isFirstEditor(editor)){\r\n\t\t\t\t\tvar rowIndex = grid.getCurrentEditRowIndex()\r\n\t\t\t\t\t\t,prevRowIndex = grid._getPrevVisibleRowIndex(rowIndex);\r\n\t\t\t\t\tgrid.beginEdit(prevRowIndex);\r\n\t\t\t\t}\r\n\t\t\t\tgrid._keyLeftEditor(e);\r\n\t\t\t});\r\n\t\t},\r\n\t\t/**\r\n\t\t * 在末尾追加一行并进入编辑状态\r\n\t\t */\r\n\t\t_keyAppendRow: function(e){\r\n\t\t\tvar editor = this.editor[$(e.currentTarget).attr('field')]\r\n\t\t\t\t,grid = this;\r\n\t\t\tthis._editorBlur(editor, function(){\r\n\t\t\t\tvar totalRowLen = grid.$tableBodyMain.find('tr').length;\r\n\t\t\t\tgrid.appendRow();\r\n\t\t\t\tgrid.beginEdit(totalRowLen);\r\n\t\t\t\tgrid._editorFocus(editor);\r\n\t\t\t});\r\n\t\t\te.preventDefault();\r\n\t\t},\r\n\t\t/**\r\n\t\t * 删除当前编辑的行\r\n\t\t */\r\n\t\t_keyDeleteRow: function(e){\r\n\t\t\tvar editor = this.editor[$(e.currentTarget).attr('field')]\r\n\t\t\t\t,rowIndex = this.getCurrentEditRowIndex()\r\n\t\t\t\t,nextRowIndex = -1\r\n\t\t\t\t,grid = this;\r\n\t\t\tthis._editorBlur(editor, function(){\r\n\t\t\t\tif(grid.setting.markChange){\r\n\t\t\t\t\tnextRowIndex = grid._getNextVisibleRowIndex(rowIndex);\r\n\t\t\t\t}else{\r\n\t\t\t\t\tif(grid._isLastEditorRow(rowIndex)){\r\n\t\t\t\t\t\tnextRowIndex = grid._getPrevVisibleRowIndex(rowIndex);\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\tnextRowIndex = grid._getNextVisibleRowIndex(rowIndex);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tgrid.beginEdit(nextRowIndex);\r\n\t\t\t\tgrid.deleteRow(rowIndex);\r\n\t\t\t\tgrid._editorFocus(editor);\r\n\t\t\t});\r\n\t\t\te.preventDefault();\r\n\t\t},\r\n\t\t/**\r\n\t\t * 从当前行向下按顺序获取一个可视行，\r\n\t\t * \t当到结尾还没取到则从第一行开始向下搜索可视行，\r\n\t\t * 如果没有取到则返回本行\r\n\t\t */\r\n\t\t_getNextVisibleRowIndex: function(rowIndex){\r\n\t\t\tvar result = rowIndex + 1\r\n\t\t\t\t,lenTr = this.$tableBodyMain.find('tr').length;\r\n\t\t\twhile(result != lenTr){\r\n\t\t\t\tvar $tr = this.$tableBodyMain.find('tr:eq(' + result + '):visible'); \r\n\t\t\t\tif($tr.length == 1){\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t\tresult++;\r\n\t\t\t};\r\n\t\t\tif(result == lenTr){\r\n\t\t\t\tresult = 0;\r\n\t\t\t\twhile(result != rowIndex){\r\n\t\t\t\t\tvar $tr = this.$tableBodyMain.find('tr:eq(' + result + '):visible'); \r\n\t\t\t\t\tif($tr.length == 1){\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tresult++;\r\n\t\t\t\t};\r\n\t\t\t}\r\n\t\t\treturn result;\r\n\t\t},\r\n\t\t/**\r\n\t\t * 从当前行向上按顺序获取一个可视行，\r\n\t\t * \t当到第一行还没取到则从末尾开始往上搜索可视行，\r\n\t\t * 如果没有取到则返回本行\r\n\t\t */\r\n\t\t_getPrevVisibleRowIndex: function(rowIndex){\r\n\t\t\tvar result = rowIndex - 1\r\n\t\t\t\t,lenTr = this.$tableBodyMain.find('tr').length;\r\n\t\t\twhile(result != -1){\r\n\t\t\t\tvar $tr = this.$tableBodyMain.find('tr:eq(' + result + '):visible'); \r\n\t\t\t\tif($tr.length == 1){\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t\tresult--;\r\n\t\t\t};\r\n\t\t\tif(result == -1){\r\n\t\t\t\tresult = lenTr;\r\n\t\t\t\twhile(result != rowIndex){\r\n\t\t\t\t\tvar $tr = this.$tableBodyMain.find('tr:eq(' + result + '):visible'); \r\n\t\t\t\t\tif($tr.length == 1){\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tresult--;\r\n\t\t\t\t};\r\n\t\t\t}\r\n\t\t\treturn result;\r\n\t\t},\r\n\t\t/**\r\n\t\t * 判断编辑器是否在网格的最末尾\r\n\t\t */\r\n\t\t_isLastEditor: function(editor){\r\n\t\t\tvar $lastEditorWrapper = this.$tableBody.find('.app-wrapper:not(.wrapper-disabled):not(.wrapper-readonly):last');\r\n\t\t\tif(editor.editor.$element.is($lastEditorWrapper)){\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\t\t\treturn false;\r\n\t\t},\r\n\t\t/**\r\n\t\t * 判断编辑器是否在网格的最前边\r\n\t\t */\r\n\t\t_isFirstEditor: function(editor){\r\n\t\t\tvar $firstEditorWrapper = this.$tableBody.find('.app-wrapper:not(.wrapper-disabled):not(.wrapper-readonly):first');\r\n\t\t\tif(editor.editor.$element.is($firstEditorWrapper)){\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\t\t\treturn false;\r\n\t\t},\r\n\t\t/**\r\n\t\t * 是否为最后一行编辑器\r\n\t\t */\r\n\t\t_isLastEditorRow: function(rowIndex){\r\n\t\t\tvar $row = this.$tableBodyMain.find('tr:visible:last');\r\n\t\t\tif($row.index() == rowIndex){\r\n\t\t\t\treturn true;\r\n\t\t\t}else{\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t},\r\n\t\t/**\r\n\t\t * 将行下索引转为行id\r\n\t\t */\r\n\t\t_convertRowIndexToRowId: function(rowIndex){\r\n\t\t\tif(isNaN(rowIndex)){\r\n\t\t\t\treturn rowIndex;\t\t\t\t\r\n\t\t\t}\r\n\t\t\treturn this.$tableBodyMain.find('tr:eq(' + rowIndex + ')').attr('id');\r\n\t\t},\r\n\t\t/**\r\n\t\t * 将行Id转为行下索引\r\n\t\t */\r\n\t\t_convertRowIdToRowIndex: function(rowId){\r\n\t\t\tif(!isNaN(rowId)){\r\n\t\t\t\treturn rowId;\t\t\t\t\r\n\t\t\t}\r\n\t\t\treturn this.$tableBodyMain.find('tr#' + rowId + '').index();\r\n\t\t},\r\n\t\t/**\r\n\t\t * 开始编辑行（一个网格只保持一行编辑状态）\r\n\t\t * <PRE>\r\n\t\t * 1、如果rowIndex为空或超过当前行号，则不处理\r\n\t\t * 2、如果rowIndex编辑的行号正在编辑，则不处理\r\n\t\t * </PRE>\r\n\t\t * @param {Number} rowIndex 行号\r\n\t\t * @todo 当已有行正在进行编辑时，则调用{@link geid#endEdit}关闭编辑\r\n\t\t * @todo 将本行进入编辑状态\r\n\t\t * @fires grid-class#beforeBeginEdit\r\n\t\t * @fires grid-class#onBeginEdit\r\n\t\t * @memberof grid-class\r\n\t\t * @instance\r\n\t\t */\r\n\t\tbeginEdit: function(rowIndex){\r\n\t\t\tif(this.setting.editable == false){\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tvar rowId = this._convertRowIndexToRowId(rowIndex);\r\n\t\t\tif(rowId == undefined){\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tif(rowId == this._currentEditRowId){\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tvar g = this\r\n\t\t\t\t,exp = this._getRowExpr(rowId)\r\n\t\t\t\t,$trs = this.$tableBody.find(exp)\r\n\t\t\t\t,oriRowData = this._rowData[rowId]\r\n\t\t\t\t,rowData = this._getUpdateRowForBegin(rowId, oriRowData);\r\n\t\t\tif(!rowData){\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tif(this._currentEditRowId != null){\r\n\t\t\t\tif(this.endEdit(this._currentEditRowId) != true){\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tthis._resetEditorValue();\r\n\t\t\t/**\r\n\t\t\t * 编辑行前事件\r\n\t\t\t * @event grid-class#beforeBeginEdit\r\n\t\t\t * @param {Object} rowData 行数据\r\n\t\t\t * @param {Number} rowIndex 行号\r\n\t\t\t * @returns {Boolean} boolean 返回值为false 取消编辑\r\n\t\t\t */\r\n\t\t\tif(this.trigger('beforeBeginEdit', rowData, rowIndex) === false){\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tthis._currentEditRowId = rowId;\r\n\t\t\tfor(var i = 0; i < $trs.length; i++){\r\n\t\t\t\tvar $tr = $($trs[i])\r\n\t\t\t\t\t,$tds = $tr.find('>td');\r\n\t\t\t\tfor(var j = 0; j < $tds.length; j++){\r\n\t\t\t\t\tg._cellIntoEdit($($tds[j]), rowData);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tsetHiddenEditor.call(this, rowData);\r\n            this._fixXProxyScroll();\r\n            this.$tableBodyMain.find(exp).addClass('currEdit');\r\n\t\t\t/**\r\n\t\t\t * 当行变为编辑模式时触发的事件\r\n\t\t\t * @event grid-class#onBeginEdit\r\n\t\t\t * @param {Object} rowData 行数据\r\n\t\t\t * @param {Number} rowIndex 行号\r\n\t\t\t */\r\n\t\t\tthis.trigger('onBeginEdit', rowData, rowIndex);\r\n\t\t\t/**\r\n\t\t\t * 设置隐藏编辑器的值\r\n\t\t\t */\r\n\t\t\tfunction setHiddenEditor(rowData){\r\n\t\t\t\tvar editors = this.editor;\r\n\t\t\t\tfor(var field in editors){\r\n\t\t\t\t\tif(editors[field].hasSet){\r\n\t\t\t\t\t\tcontinue;\r\n\t\t\t\t\t};\r\n\t\t\t\t\teditors[field].hasSet = true;\r\n\t\t\t\t\teditors[field].editor.setValue(rowData[field], true);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\t/**\r\n\t\t * 获取编辑对象\r\n\t\t */\r\n\t\t_getUpdateRowForBegin: function(rowId, oriRowData){\r\n\t\t\tvar result = this._newData.updated[rowId];\r\n\t\t\tif(result){\r\n\t\t\t\treturn result;\r\n\t\t\t}\r\n\t\t\tvar result = this._newData.inserted[rowId];\r\n\t\t\tif(result){\r\n\t\t\t\treturn result;\r\n\t\t\t}\r\n\t\t\treturn oriRowData;\r\n\t\t},\r\n\t\t/**\r\n\t\t * 将单元格转入编辑状态\r\n\t\t * @param {Jquery} $td 要被编辑的单元格\r\n\t\t * @param {Object} rowData 被编辑的行数据\r\n\t\t */\r\n\t\t_cellIntoEdit: function($td, rowData){\r\n\t\t\tvar col = this._column[$td.attr('_cid')]\r\n\t\t\t\t,field = col.field\r\n\t\t\t\t,editorInfo = this.editor[field];\r\n\t\t\tif(col && editorInfo){\r\n\t\t\t\tvar editor = editorInfo.editor;\r\n\t\t\t\tvar $inner = $td.find('>div:first-child');\r\n\t\t\t\t$inner.css('display', 'none');\r\n\t\t\t\t$td.css('width', $inner.outerWidth());\r\n\t\t\t\tvar text = $.trim($td.text())\r\n\t\t\t\t\t,val = rowData[field];\r\n\t\t\t\teditor.setValue(val, true);\r\n\t\t\t\teditor.setText(text);\r\n\t\t\t\teditorInfo.hasSet = true;\r\n\t\t\t\tif($.isFunction(editor.setSelectedNode) && val){\r\n\t\t\t\t\tvar node = {};\r\n\t\t\t\t\tif($.isFunction(editor.setting.createNode)){\r\n\t\t\t\t\t\tnode = editor.setting.createNode(rowData, text);\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\tnode[editor.setting.valuefield] = val;\r\n\t\t\t\t\t\tnode[editor.setting.textfield] = text;\r\n\t\t\t\t\t}\r\n\t\t\t\t\teditor.setSelectedNode(node, true);\r\n\t\t\t\t}\r\n\t\t\t\t$td.append(editor.$element);\r\n\t\t\t}\r\n\t\t},\r\n\t\t/**\r\n\t\t * 结束编辑行，如果该行数据未被修改 不触发{@link grid-class#onEndEdit}\r\n\t\t * <PRE>\r\n\t\t * 1、如果传入的rowIndex不是正在编辑的行号，则不处理\r\n\t\t * 2、如果传入的rowIndex为undefined，则认为是上一次编辑的行号\r\n\t\t * </PRE>\r\n\t\t * @param {Number} [rowIndex] 行号\r\n\t\t * @fires grid-class#beforeEndEdit\r\n\t\t * @fires grid-class#onEndEdit\r\n\t\t * @returns {boolean} result true完成结束编辑\r\n\t\t * @memberof grid-class\r\n\t\t * @instance\r\n\t\t */\r\n\t\tendEdit: function(rowIndex){\r\n\t\t\t$(document).trigger('mousedown.droppanel.api');\r\n\t\t\tif(this.setting.editable == false){\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tvar rowId;\r\n\t\t\tif(rowIndex === undefined){\r\n\t\t\t\tif(this._currentEditRowId == null){\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\trowId = this._currentEditRowId;\r\n\t\t\t}else{\r\n\t\t\t\trowId = this._convertRowIndexToRowId(rowIndex);\r\n\t\t\t\tif(rowId != this._currentEditRowId){\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t}\r\n            var rowExp = this._getRowExpr(rowId);\r\n            if(!this.$tableBodyMain.find(rowExp).hasClass('currEdit')){\r\n                return;\r\n            }\r\n\t\t\tif(this._beforeEndEdit(rowId) === false){\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tvar editInfo = {\r\n\t\t\t\t$trs: this.$tableBody.find(this._getRowExpr(rowId))\r\n\t\t\t};\r\n\t\t\tvar oriRowData = this._rowData[rowId]\r\n\t\t\t\t,triggerEnd = true;\r\n\t\t\teditInfo.oriRowData = oriRowData;\r\n\t\t\teditInfo.newRowData = this._getUpdateRowForEnd(rowId, oriRowData);\r\n\t\t\tif(oriRowData){//编辑原始行\r\n\t\t\t\tthis._endEditOri(editInfo);\r\n\t\t\t\tif(!editInfo.realChange){\r\n\t\t\t\t\tthis._cancelUpdateRow(rowId);\r\n\t\t\t\t\ttriggerEnd = false;\r\n\t\t\t\t}\r\n\t\t\t}else{//编辑新增行\r\n\t\t\t\tthis._endEditNew(editInfo);\r\n\t\t\t}\r\n\t\t\tthis._restoreEditor();\r\n\t\t\tthis.trigger('onDataChange');\r\n            this.$tableBodyMain.find(rowExp).removeClass('currEdit');\r\n\t\t\tif(triggerEnd){\r\n\t\t\t\tthis._onEndEdit(rowIndex, oriRowData, editInfo.newRowData);\r\n\t\t\t}\r\n\t\t\tthis._currentEditRowId = null;\r\n\t\t\t$(document).off('mousedown.grid-edit.api');\r\n\t\t\treturn true;\r\n\t\t},\r\n\t\t/**\r\n\t\t * 编辑前事件\r\n\t\t */\r\n\t\t_beforeEndEdit: function(rowId){\r\n\t\t\tvar rowIndex = this._convertRowIdToRowIndex(rowId)\r\n\t\t\t\t,rowData = this._rowData[rowId];\r\n\t\t\tif(!rowData)\r\n\t\t\t\trowData = this._newData[rowId];\r\n\t\t\t/**\r\n\t\t\t * 编辑行前事件\r\n\t\t\t * @event grid-class#beforeEndEdit\r\n\t\t\t * @param {Object} rowData 行数据\r\n\t\t\t * @param {Number} rowIndex 行号\r\n\t\t\t * @returns {Boolean} boolean 返回值为false 取消选择\r\n\t\t\t */\r\n\t\t\treturn this.trigger('beforeEndEdit', rowData, rowIndex);\r\n\t\t},\r\n\t\t/**\r\n\t\t * 编辑事件\r\n\t\t */\r\n\t\t_onEndEdit: function(rowIndex, rowData, newData){\r\n\t\t\t/**\r\n\t\t\t * 当行变为编辑模式时触发的事件，新增行则rowData和newData相同\r\n\t\t\t * @event grid-class#onEndEdit\r\n\t\t\t * @param {Object} rowData 行数据\r\n\t\t\t * @param {Object} newData 编辑后的数据\r\n\t\t\t * @param {Number} rowIndex 行号\r\n\t\t\t */\r\n\t\t\tthis.trigger('onEndEdit', rowData, newData, rowIndex);\r\n\t\t},\r\n\t\t/**\r\n\t\t * 还原编辑器的值\r\n\t\t */\r\n\t\t_resetEditorValue: function(){\r\n\t\t\tvar editors = this.editor;\r\n\t\t\tfor(var field in editors){\r\n\t\t\t\tvar editor = editors[field].editor;\r\n\t\t\t\teditor.setValue('', true);\r\n\t\t\t\teditor.setText('');\r\n\t\t\t\teditors[field].hasSet = false;\r\n\t\t\t\tif(editor.setSelectedNode){\r\n\t\t\t\t\teditor.setSelectedNode(null, true);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\t/**\r\n\t\t * 还原编辑器到编辑器容器\r\n\t\t */\r\n\t\t_restoreEditor: function(){\r\n\t\t\tvar editors = this.editor;\r\n\t\t\tfor(var field in editors){\r\n\t\t\t\tif(editors[field].editor){\r\n\t\t\t\t\tvar $editor = editors[field].editor.$element;\r\n\t\t\t\t\t$editor.parent().css('width', 'auto');\r\n\t\t\t\t\tthis.$rowEditor.append($editor);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\t/**\r\n\t\t * 获取要编辑的编辑对象\r\n\t\t * \t1、如果编辑对象为空，且存在源对象，则复制源对象为编辑对象\r\n\t\t *  2、如果编辑对象为空，且不存在源对象，则源对象为新增的行\r\n\t\t */\r\n\t\t_getUpdateRowForEnd: function(rowId, oriRowData){\r\n\t\t\tvar result = this._newData.updated[rowId];\r\n\t\t\tif(result){\r\n\t\t\t\t\r\n\t\t\t}else if(oriRowData){\r\n\t\t\t\tresult = this._newData.updated[rowId] = $.extend({}, oriRowData);\r\n\t\t\t}else{\r\n\t\t\t\tresult = this._newData.inserted[rowId];\r\n\t\t\t}\r\n\t\t\treturn result;\r\n\t\t},\r\n\t\t/**\r\n\t\t * 搜集编辑行数据 并标记编辑的单元格\r\n\t\t */\r\n\t\t_endEditOri: function(editInfo){\r\n\t\t\tvar $trs = editInfo.$trs\r\n\t\t\t\t,grid = this;\r\n\t\t\teditInfo.realChange = false;\r\n\t\t\teditInfo.callback = function(e){\r\n\t\t\t\te.newRowData[e.col.field] = e.value;\r\n\t\t\t\tif(e.value != e.oriRowData[e.col.field]){\r\n\t\t\t\t\tgrid._markEditDisplay(e.$td);\r\n\t\t\t\t\te.realChange = true;\r\n\t\t\t\t}\r\n\t\t\t};\r\n\t\t\tthis._cellApplyEdit(editInfo);\r\n\t\t},\r\n\t\t/**\r\n\t\t * 搜集新增行数据\r\n\t\t */\r\n\t\t_endEditNew: function(editInfo){\r\n\t\t\tvar $trs = editInfo.$trs;\r\n\t\t\teditInfo.callback = function(e){\r\n\t\t\t\te.newRowData[e.col.field] = e.value;\r\n\t\t\t};\r\n\t\t\tthis._cellApplyEdit(editInfo);\r\n\t\t},\r\n\t\t/**\r\n\t\t * 对修改的单元格进行标记\r\n\t\t * @param {JQuery} $td 单元格\r\n\t\t */\r\n\t\t_markEditDisplay: function($td){\r\n\t\t\tif(this.setting.markChange){\r\n\t\t\t\t$td.addClass('updated');\r\n\t\t\t}\r\n\t\t},\r\n\t\t/**\r\n\t\t * 应用编辑的修改\r\n\t\t * @param {Jquery} $td 被编辑的单元格\r\n\t\t * @param {Object} oriRowData 编辑前的行数据\r\n\t\t * @param {Object} newRowData 编辑后的行数据\r\n\t\t * @param {callback} callback 回调函数\r\n\t\t */\r\n\t\t_cellApplyEdit: function(editInfo){\r\n\t\t\tvar editors = this.editor;\r\n\t\t\tfor(var field in editors){\r\n\t\t\t\tvar editor = editors[field]\r\n\t\t\t\t\t,text = editor.editor.getText()\r\n\t\t\t\t\t,val = editor.editor.getValue()\r\n\t\t\t\t\t,$td = editInfo.$trs.find('td[_cid=' + editor.column._cid +']');\r\n\t\t\t\tif($td.length == 1){\r\n\t\t\t\t\tvar $innerDiv = $td.find('>div:first-child');\r\n\t\t\t\t\t$innerDiv.text(text);\r\n\t\t\t\t\t$innerDiv.css('display', 'block');\r\n\t\t\t\t\teditInfo.$td = $td;\r\n\t\t\t\t}\r\n\t\t\t\teditInfo.col = editor.column;\r\n\t\t\t\teditInfo.value = val;\r\n\t\t\t\tif(editInfo.callback)\r\n\t\t\t\t\teditInfo.callback(editInfo);\r\n\t\t\t}\r\n\t\t},\r\n\t\t/**\r\n\t\t * 撤销编辑行数据，恢复编辑前的状态\r\n\t\t * @param {Number} rowIndex 行号\r\n\t\t * @memberof grid-class\r\n\t\t * @instance\r\n\t\t */\r\n\t\tcancelEdit: function(rowIndex){\r\n\t\t\tif(this.setting.editable == false){\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tvar rowId = this._convertRowIndexToRowId(rowIndex);\r\n\t\t\tif(rowId == this._currentEditRowId){\r\n\t\t\t\tthis._restoreEditor();\r\n\t\t\t\tthis._currentEditRowId = null;\r\n\t\t\t}\r\n\t\t\tthis._cancelUpdateRow(rowId);\r\n\t\t\tthis._cancelEditDisplay(rowId);\r\n\t\t},\r\n\t\t/**\r\n\t\t * 还原行的展现\r\n\t\t * @param {String} rowId\r\n\t\t */\r\n\t\t_cancelEditDisplay: function(rowId){\r\n\t\t\tvar rowData = this._rowData[rowId];\r\n\t\t\tif(!rowData){\r\n\t\t\t\trowData = this._newData.inserted[rowId];\r\n\t\t\t}\r\n\t\t\tthis._applyRowEditDisplay(rowId, rowData);\r\n            this.$tableBodyMain.find(this._getRowExpr(rowId)).removeClass('currEdit');\r\n\t\t},\r\n\t\t/**\r\n\t\t * 应用行的展现\r\n\t\t * @param {String} rowId 行id\r\n\t\t * @param {Object} rowData 要应用的行数据\r\n\t\t */\r\n\t\t_applyRowEditDisplay: function(rowId, rowData){\r\n\t\t\tvar exp = this._getRowExpr(rowId)\r\n\t\t\t\t,$trs = this.$tableBody.find(exp)\r\n\t\t\t\t,rowIndex = this._convertRowIdToRowIndex(rowId);\r\n\t\t\tfor(var i = 0; i < $trs.length; i++){\r\n\t\t\t\tvar $tr = $($trs[i])\r\n\t\t\t\t\t,$tds = $tr.find('>td');\r\n\t\t\t\tfor(var j = 0; j < $tds.length; j++){\r\n\t\t\t\t\tthis._applyCellEditDisplay($($tds[j]), rowData, rowIndex);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\t/**\r\n\t\t * 还原单元格的展现\r\n\t\t * @param {Jquery} $td 要取消编辑的单元格\r\n\t\t * @param {Object} rowData 要应用的行数据\r\n\t\t * @param {Number} rowIndex 行号\r\n\t\t */\r\n\t\t_applyCellEditDisplay: function($td, rowData, rowIndex){\r\n\t\t\tvar col = this._column[$td.attr('_cid')]\r\n\t\t\t\t,editor = this.editor[col.field];\r\n\t\t\tif(col && editor){\r\n\t\t\t\tvar $tdInner = $td.find('>div:first-child')\r\n\t\t\t\t\t,text = this._getFormatText(col, rowData, rowIndex);\r\n\t\t\t\t$tdInner.text(text);\r\n\t\t\t\t$tdInner.css('display', 'block');\r\n\t\t\t\tthis._unmarkEditDisplay($td);\r\n\t\t\t}\r\n\t\t},\r\n\t\t/**\r\n\t\t * 取消对修改的单元格进行标记\r\n\t\t * @param {JQuery} $td 单元格\r\n\t\t */\r\n\t\t_unmarkEditDisplay: function($td){\r\n\t\t\tif(this.setting.markChange){\r\n\t\t\t\t$td.removeClass('updated');\r\n\t\t\t}\r\n\t\t},\r\n\t\t/**\r\n\t\t * 取消被编辑的行的数据\r\n\t\t */\r\n\t\t_cancelUpdateRow: function(rowId){\r\n\t\t\tdelete this._newData.updated[rowId];\r\n\t\t},\r\n\t\t/**\r\n\t\t * 获取编辑器\r\n\t\t * @param {String} field 列属性\r\n\t\t * @returns {JQuery} $editor 编辑器的Jquery元素\r\n\t\t * @example {\r\n\t\t * &#9;title : '格式化显示列',\r\n\t\t * &#9;align : 'left',\r\n\t\t * &#9;field : 'f1',\r\n\t\t * &#9;editor : {\r\n\t\t * &#9;&#9;type : 'combobox',\r\n\t\t * &#9;&#9;options : {\r\n\t\t * &#9;&#9;&#9;valuefield : 'value',\r\n\t\t * &#9;&#9;&#9;textfield : 'text',\r\n\t\t * &#9;&#9;&#9;data : data,\r\n\t\t * &#9;&#9;&#9;afterSelected: function(node){\r\n\t\t * &#9;&#9;&#9;&#9;var $f2 = $('#gridEditorOnClickTr').grid('getEditor','f2');\r\n\t\t * &#9;&#9;&#9;&#9;var $f3 = $('#gridEditorOnClickTr').grid('getEditor','f3');\r\n\t\t * &#9;&#9;&#9;&#9;$f2.combobox('setValue', node.value);\r\n\t\t * &#9;&#9;&#9;&#9;$f2.combobox('setText', node.text);\r\n\t\t * &#9;&#9;&#9;&#9;$f3.combobox('setValue', node.value);\r\n\t\t * &#9;&#9;&#9;&#9;$f3.combobox('setText', node.text);\r\n\t\t * &#9;&#9;&#9;}\r\n\t\t * &#9;&#9;}\r\n\t\t * &#9;}\r\n\t\t * }\r\n\t\t * @memberof grid-class\r\n\t\t * @instance\r\n\t\t */\r\n\t\tgetEditor: function(field){\r\n\t\t\treturn this.editor[field].$editor;\r\n\t\t},\r\n\t\t/**\r\n\t\t * 允许编辑\r\n\t\t * @memberof grid-class\r\n\t\t * @instance\r\n\t\t */\r\n\t\tenableEdit: function(){\r\n\t\t\tthis.setting.editable = true;\r\n\t\t},\r\n\t\t/**\r\n\t\t * 允许编辑\r\n\t\t * @memberof grid-class\r\n\t\t * @instance\r\n\t\t */\r\n\t\tdisableEdit: function(){\r\n\t\t\tthis.setting.editable = false;\r\n\t\t},\r\n\t\t/**\r\n\t\t * 允许编辑\r\n\t\t * @memberof grid-class\r\n\t\t * @instance\r\n\t\t */\r\n\t\tgetEditable: function(){\r\n\t\t\treturn this.setting.editable;\r\n\t\t},\r\n\t\t/**\r\n\t\t * 允许编辑\r\n\t\t * @memberof grid-class\r\n\t\t * @instance\r\n\t\t */\r\n\t\ttoggleEdit: function(){\r\n\t\t\tif(this.setting.editable == false){\r\n\t\t\t\tthis.setting.editable = true;\r\n\t\t\t}else{\r\n\t\t\t\tthis.setting.editable = false;\r\n\t\t\t}\r\n\t\t},\r\n\t\t/**\r\n\t\t * 搜集新增行数据\r\n\t\t * @param rowId\r\n\t\t * @param rowData\r\n\t\t */\r\n\t\t_insertRow: function(rowId, rowData){\r\n\t\t\tthis._newData.inserted[rowId] = rowData;\r\n\t\t\tthis.trigger('onDataChange');\r\n\t\t},\r\n\t\t/**\r\n\t\t * 删除行\r\n\t\t * <PRE>\r\n\t\t * 1、当该行为原网格数据时，则只标记改行为删除行\r\n\t\t * 2、当该行为新增的网格数据时，则直接移除该行\r\n\t\t * </PRE>\r\n\t\t * @param {Number} rowIndex 行号\r\n\t\t * @example $('#demo').grid('deleteRow',0);\r\n\t\t * @memberof grid-class\r\n\t\t * @instance\r\n\t\t */\r\n\t\tdeleteRow: function(rowIndex){\r\n\t\t\tif(this.setting.editable == false){\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tvar rowId = this._convertRowIndexToRowId(rowIndex);\r\n\t\t\tthis._deleteRow(rowId);\r\n\t\t\tthis._toggleMessage();\r\n\t\t},\r\n\t\t/**\r\n\t\t * 对删除的行展现进行标记\r\n\t\t * @param {String} exp 行搜索串\r\n\t\t */\r\n\t\t_markDeleteDisplay: function(exp){\r\n\t\t\tif(this.setting.markChange){\r\n\t\t\t\tthis.$tableBodyLeft.find(exp).addClass('deleted');\r\n\t\t\t\tthis.$tableBodyMain.find(exp).addClass('deleted');\r\n\t\t\t\tthis.$tableBodyRight.find(exp).addClass('deleted');\r\n\t\t\t}else{\r\n\t\t\t\tthis.$tableBodyLeft.find(exp).hide();\r\n\t\t\t\tthis.$tableBodyMain.find(exp).hide();\r\n\t\t\t\tthis.$tableBodyRight.find(exp).hide();\r\n\t\t\t}\r\n\t\t},\r\n\t\t/**\r\n\t\t * 搜集删除行数据\r\n\t\t * @param rowId\r\n\t\t */\r\n\t\t_deleteRow: function(rowId){\r\n\t\t\tvar oriRowData = this._rowData[rowId];\r\n\t\t\tif(oriRowData){\r\n\t\t\t\tthis._newData.deleted[rowId] = this._rowData[rowId];\t\r\n\t\t\t}else{\r\n\t\t\t\tthis._cancleInsertRow[rowId];\r\n\t\t\t}\r\n\t\t\tthis._deleteRowDisplay(rowId);\r\n\t\t\tthis.trigger('onDataChange');\r\n\t\t},\r\n\t\t/**\r\n\t\t * 删除行\r\n\t\t * @param rowIndex\r\n\t\t */\r\n\t\t_deleteRowDisplay: function(rowId){\r\n\t\t\tvar exp = this._getRowExpr(rowId);\r\n\t\t\tif(this._newData.inserted[rowId] != null){\r\n\t\t\t\tif(rowId == this._currentEditRowId){\r\n\t\t\t\t\tthis._restoreEditor();\r\n\t\t\t\t}\r\n\t\t\t\tthis.$tableBodyLeft.find(exp).remove();\r\n\t\t\t\tthis.$tableBodyMain.find(exp).remove();\r\n\t\t\t\tthis.$tableBodyRight.find(exp).remove();\r\n\t\t\t\tthis._footerFollow();\r\n\t\t\t\tthis._fixYProxyScrollHeight();\r\n\t\t\t}else{\r\n\t\t\t\tthis._markDeleteDisplay(exp);\r\n\t\t\t}\r\n\t\t\tif(rowId == this._currentEditRowId){\r\n\t\t\t\tdelete this._currentEditRowId;\r\n\t\t\t}\r\n\t\t\tthis._reOrderNumber();\r\n\t\t\tthis._pagerDeleteRow();\r\n\t\t},\r\n\t\t/**\r\n\t\t * 撤销新增行\r\n\t\t * @param rowId\r\n\t\t */\r\n\t\t_cancleInsertRow: function(rowId){\r\n\t\t\tdelete this._newData.inserted[rowId];\r\n\t\t},\r\n\t\t/**\r\n\t\t * 撤销删除行\r\n\t\t * @param {Number} rowIndex 行号\r\n\t\t * @example $('#demo').grid('deleteRow',0);\r\n\t\t * @memberof grid-class\r\n\t\t * @instance\r\n\t\t */\r\n\t\tcancelDelete: function(rowIndex){\r\n\t\t\tvar rowId = this._convertRowIndexToRowId(rowIndex);\r\n\t\t\tthis._unmarkDeleteDisplay(rowId);\r\n\t\t\tthis._cancelDeleteRow(rowId);\r\n\t\t},\r\n\t\t/**\r\n\t\t * 取消对删除的行展现标记\r\n\t\t * @param rowId\r\n\t\t */\r\n\t\t_unmarkDeleteDisplay: function(rowId){\r\n\t\t\tvar exp = this._getRowExpr(rowId);\r\n\t\t\tif(this.setting.markChange){\r\n\t\t\t\tthis.$tableBodyLeft.find(exp).removeClass('deleted');\r\n\t\t\t\tthis.$tableBodyMain.find(exp).removeClass('deleted');\r\n\t\t\t\tthis.$tableBodyRight.find(exp).removeClass('deleted');\r\n\t\t\t}else{\r\n\t\t\t\tthis.$tableBodyLeft.find(exp).show();\r\n\t\t\t\tthis.$tableBodyMain.find(exp).show();\r\n\t\t\t\tthis.$tableBodyRight.find(exp).show();\r\n\t\t\t}\r\n\t\t},\r\n\t\t/**\r\n\t\t * 撤销删除行\r\n\t\t * @param rowId\r\n\t\t */\r\n\t\t_cancelDeleteRow: function(rowId){\r\n\t\t\tdelete this._newData.deleted[rowId];\r\n\t\t},\r\n\t\t/**\r\n\t\t * 应用所有的改变\r\n\t\t * @memberof grid-class\r\n\t\t * @instance\r\n\t\t */\r\n\t\tacceptChanges: function(){\r\n\t\t\tvar changeds = this.getChanges()\r\n\t\t\t\t,deleted = changeds.deleted\r\n\t\t\t\t,inserted = changeds.inserted\r\n\t\t\t\t,updated = changeds.updated;\r\n\t\t\tif(deleted){\r\n\t\t\t\tfor(var rowId in deleted){\r\n\t\t\t\t\tvar rowIndex = this._convertRowIdToRowIndex(rowId);\r\n\t\t\t\t\tthis.acceptChange(rowIndex);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif(inserted){\r\n\t\t\t\tfor(var rowId in inserted){\r\n\t\t\t\t\tvar rowIndex = this._convertRowIdToRowIndex(rowId);\r\n\t\t\t\t\tthis.acceptChange(rowIndex);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif(updated){\r\n\t\t\t\tfor(var rowId in updated){\r\n\t\t\t\t\tvar rowIndex = this._convertRowIdToRowIndex(rowId);\r\n\t\t\t\t\tthis.acceptChange(rowIndex);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\t/**\r\n\t\t * 根据类型获取更改的行数据，当类型参数未指定，返回所有更改的行\r\n\t\t * <PRE>\r\n\t\t * type的可选参数:\r\n\t\t * 新增：inserted\r\n\t\t * 删除：deleted\r\n\t\t * 新增：updated\r\n\t\t * </PRE>\r\n\t\t * @param {String} [type] 更改类型\r\n\t\t * @returns 被改变的数据\r\n\t\t * @memberof grid-class\r\n\t\t * @instance\r\n\t\t */\r\n\t\tgetChanges: function(type){\r\n\t\t\tif(type){\r\n\t\t\t\treturn $.extend({}, this._newData[type]);\r\n\t\t\t}else{\r\n\t\t\t\treturn $.extend({}, this._newData);\r\n\t\t\t}\r\n\t\t},\r\n\t\t/**\r\n\t\t * 应用改变\r\n\t\t * <span style=\"color:red;\">当改行被编辑 又被删除时，删除操作优先于编辑操作</span>\r\n\t\t * @param {Number} rowIndex\r\n\t\t * @memberof grid-class\r\n\t\t * @instance\r\n\t\t */\r\n\t\tacceptChange: function(rowIndex){\r\n\t\t\tvar changed = this.getChange(rowIndex);\r\n\t\t\tif(changed){\r\n\t\t\t\tswitch(changed.type){\r\n\t\t\t\t\tcase('updated'):\r\n\t\t\t\t\t\tthis._acceptUpdated(rowIndex, changed.data);\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase('inserted'):\r\n\t\t\t\t\t\tthis._acceptInserted(rowIndex, changed.data);\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase('deleted'):\r\n\t\t\t\t\t\tthis._acceptDeleted(rowIndex, changed.data);\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\t/**\r\n\t\t * 获取改变后的数据\r\n\t\t * @param {Number} rowIndex\r\n\t\t * @returns {Object} result 被改变的数据\r\n\t\t * @property {String} returns.type 改变类型\r\n\t\t * @property {Object} returns.data 改变数据\r\n\t\t * @memberof grid-class\r\n\t\t * @instance\r\n\t\t */\r\n\t\tgetChange: function(rowIndex){\r\n\t\t\tvar rowId = this._convertRowIndexToRowId(rowIndex);\r\n\t\t\tif(rowId == this._currentEditRowId){\r\n\t\t\t\tthis.endEdit(rowId);\r\n\t\t\t}\r\n\t\t\tvar changed = this._newData.deleted[rowId]\r\n\t\t\t\t,result = {};\r\n\t\t\tif(changed){\r\n\t\t\t\tresult.type = 'deleted';\r\n\t\t\t\tresult.data = $.extend({}, changed);\r\n\t\t\t\treturn result;\r\n\t\t\t}\r\n\t\t\tchanged = this._newData.updated[rowId];\r\n\t\t\tif(changed){\r\n\t\t\t\tresult.type = 'updated';\r\n\t\t\t\tresult.data = $.extend({}, changed);\r\n\t\t\t\treturn result;\r\n\t\t\t}\r\n\t\t\tchanged = this._newData.inserted[rowId];\r\n\t\t\tif(changed){\r\n\t\t\t\tresult.type = 'inserted';\r\n\t\t\t\tresult.data = $.extend({}, changed);\r\n\t\t\t\treturn result;\r\n\t\t\t}\r\n\t\t\treturn result;\r\n\t\t},\r\n\t\t/**\r\n\t\t * 应用修改后的数据\r\n\t\t * @param rowIndex\r\n\t\t * @param rowData\r\n\t\t */\r\n\t\t_acceptUpdated: function(rowIndex, rowData){\r\n\t\t\tvar rowId = this._convertRowIndexToRowId(rowIndex);\r\n\t\t\t$.extend(this._rowData[rowId], rowData);\r\n\t\t\tthis._applyRowEditDisplay(rowId, rowData);\r\n\t\t\tthis._cancelUpdateRow(rowId);\r\n\t\t},\r\n\t\t/**\r\n\t\t * 应用新增后的数据\r\n\t\t * @param rowIndex\r\n\t\t * @param rowData\r\n\t\t */\r\n\t\t_acceptInserted: function(rowIndex, rowData){\r\n\t\t\tvar rowId = this._convertRowIndexToRowId(rowIndex);\r\n\t\t\tif(rowIndex == 0){\r\n\t\t\t\tthis.getRows().unshift(rowData);\r\n\t\t\t}else{\r\n\t\t\t\tthis.getRows()[rowIndex] = rowData;\r\n\t\t\t}\r\n\t\t\tthis._rowData[rowId] = rowData;\r\n\t\t\tthis._cancleInsertRow(rowId);\r\n\t\t\tthis._acceptInsertDisplay(rowId);\r\n\t\t},\r\n\t\t/**\r\n\t\t * 应用新增后的数据的展现\r\n\t\t * @param rowId\r\n\t\t */\r\n\t\t_acceptInsertDisplay: function(rowId){\r\n\t\t\tif(this.setting.markChange){\r\n\t\t\t\tvar exp = this._getRowExpr(rowId);\r\n\t\t\t\tthis.$tableBody.find(exp).removeClass('inserted');\r\n\t\t\t}\r\n\t\t},\r\n\t\t/**\r\n\t\t * 应用删除后的数据\r\n\t\t * @param rowIndex\r\n\t\t * @param rowData\r\n\t\t */\r\n\t\t_acceptDeleted: function(rowIndex, rowData){\r\n\t\t\tvar rowId = this._convertRowIndexToRowId(rowIndex);\r\n\t\t\tthis.getRows().splice(rowIndex, 1);\r\n\t\t\tdelete this._rowData[rowId];\r\n\t\t\tthis._cancelDeleteRow(rowId);\r\n\t\t\tthis._cancelUpdateRow(rowId);\r\n\t\t\tthis._acceptDeletedDisplay(rowId);\r\n\t\t},\r\n\t\t/**\r\n\t\t * 应用删除后的展现\r\n\t\t * @param rowIndex\r\n\t\t */\r\n\t\t_acceptDeletedDisplay: function(rowId){\r\n\t\t\tvar exp = this._getRowExpr(rowId);\r\n\t\t\tthis.$tableBody.find(exp).remove();\r\n\t\t\tthis._reOrderNumber();\r\n\t\t\tthis._footerFollow();\r\n\t\t\tthis._fixYProxyScrollHeight();\r\n\t\t},\r\n\t\t/**\r\n\t\t * 对单元格为无效数据\r\n\t\t * @param {Object} info 单元格信息\r\n\t\t * @param {Number} info.rowIndex 第几行\r\n\t\t * @param {String} info.field 列名\r\n\t\t * @param {String} info.msg 提示信息\r\n\t\t * @example $('#grid').grid('setCellInvalid');\r\n\t\t * @memberof grid-class\r\n\t\t * @instance\r\n\t\t */\r\n\t\tsetCellInvalid: function(info){\r\n\t\t\tvar $td = this._findTdByInfo(info);\r\n\t\t\t$td.addClass('invalid');\r\n\t\t\tthis._initInvalidMsg($td, info.msg);\r\n\t\t},\r\n\t\t/**\r\n\t\t * 根据info查询td\r\n\t\t * @param info（rowIndex,field）\r\n\t\t */\r\n\t\t_findTdByInfo: function(info){\r\n\t\t\tvar $td = this.$tableBodyMain.find('tr:eq(' + info.rowIndex + ') td[field=\"' + info.field +'\"]');\r\n\t\t\tif($td.length == 0){\r\n\t\t\t\t$td = this.$tableBodyLeft.find('tr:eq(' + info.rowIndex + ') td[field=\"' + info.field +'\"]');\r\n\t\t\t\tif($td.length == 0){\r\n\t\t\t\t\t$td = this.$tableBodyRight.find('tr:eq(' + info.rowIndex + ') td[field=\"' + info.field +'\"]');\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn $td;\r\n\t\t},\r\n\t\t/**\r\n\t\t * 清除单元格的无效信息\r\n\t\t * @param {Object} info 单元格信息\r\n\t\t * @param {Number} info.rowIndex 第几行\r\n\t\t * @param {String} info.field 列名\r\n\t\t * @example $('#grid').grid('setCellValid');\r\n\t\t * @memberof grid-class\r\n\t\t * @instance\r\n\t\t */\r\n\t\tsetCellValid: function(info){\r\n\t\t\tvar $td = this._findTdByInfo(info);\r\n\t\t\t$td.removeClass('invalid');\r\n\t\t\tthis._hideInvalidMsg($td);\r\n\t\t},\r\n\t\t/**\r\n\t\t * 隐藏提示框\r\n\t\t * @param $target\r\n\t\t */\r\n\t\t_hideInvalidMsg: function($target){\r\n\t\t\tif($target.length == 1){\r\n\t\t\t\tvar $msg = $target.data('invalidMsg');\r\n\t\t\t\tif($msg){\r\n\t\t\t\t\t$msg.hide();\r\n\t\t\t\t}\r\n\t\t\t}else{\r\n\t\t\t\t$target.each(function(){\r\n\t\t\t\t\tvar $msg = $(this).data('invalidMsg');\r\n\t\t\t\t\tif($msg){\r\n\t\t\t\t\t\t$msg.hide();\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t},\r\n\t\t/**\r\n\t\t * 设置一行数据为无效数据\r\n\t\t * @param {Object} info 单元格信息\r\n\t\t * @param {Number} info.rowIndex 第几行\r\n\t\t * @param {String} info.msg 提示信息\r\n\t\t * @example $('#grid').grid('setRowInvalid', 0);\r\n\t\t * @memberof grid-class\r\n\t\t * @instance\r\n\t\t */\r\n\t\tsetRowInvalid: function(info){\r\n\t\t\tvar rowIndex = info.rowIndex\r\n\t\t\t\t,$left = this.$tableBodyLeft.find('tr:eq(' + rowIndex + ')')\r\n\t\t\t\t,$main = this.$tableBodyMain.find('tr:eq(' + rowIndex + ')')\r\n\t\t\t\t,$right = this.$tableBodyRight.find('tr:eq(' + rowIndex + ')');\r\n\t\t\t$left.addClass('invalid');\r\n\t\t\t$main.addClass('invalid');\r\n\t\t\t$right.addClass('invalid');\r\n\t\t\tthis._initInvalidMsg($main, info.msg);\r\n\t\t\t$left.data('invalidMsg',$main.data('invalidMsg'));\r\n\t\t\t$right.data('invalidMsg',$main.data('invalidMsg'));\r\n\t\t},\r\n\t\t/**\r\n\t\t * 清除一行的无效信息，该行上设置的单元格无效信息也会被清除\r\n\t\t * @param {Object} info 行号\r\n\t\t * @example $('#grid').grid('setRowInvalid', 0);\r\n\t\t * @example $('#grid').grid('setRowInvalid', {rowIndex:0});\r\n\t\t * @memberof grid-class\r\n\t\t * @instance\r\n\t\t */\r\n\t\tsetRowValid: function(info){\r\n\t\t\tvar rowIndex = info;\r\n\t\t\tif(isNaN(info)){\r\n\t\t\t\trowIndex = info.rowIndex;\r\n\t\t\t}\r\n\t\t\tvar $leftTr = this.$tableBodyLeft.find('tr:eq(' + rowIndex + ')')\r\n\t\t\t\t,$mainTr = this.$tableBodyMain.find('tr:eq(' + rowIndex + ')')\r\n\t\t\t\t,$rightTr = this.$tableBodyRight.find('tr:eq(' + rowIndex + ')')\r\n\t\t\t\t,$leftTd = this.$tableBodyLeft.find('tr:eq(' + rowIndex + ')>td.invalid')\r\n\t\t\t\t,$mainTd = this.$tableBodyMain.find('tr:eq(' + rowIndex + ')>td.invalid')\r\n\t\t\t\t,$rightTd = this.$tableBodyRight.find('tr:eq(' + rowIndex + ')>td.invalid');\r\n\t\t\t$leftTr.removeClass('invalid');\r\n\t\t\t$mainTr.removeClass('invalid');\r\n\t\t\t$rightTr.removeClass('invalid');\r\n\t\t\t$leftTd.removeClass('invalid');\r\n\t\t\t$mainTd.removeClass('invalid');\r\n\t\t\t$rightTd.removeClass('invalid');\r\n\t\t\tthis._hideInvalidMsg($mainTr);\r\n\t\t\tthis._hideInvalidMsg($leftTd);\r\n\t\t\tthis._hideInvalidMsg($mainTd);\r\n\t\t\tthis._hideInvalidMsg($rightTd);\r\n\t\t},\r\n\t\t/**\r\n\t\t * 清除全部的无效标志\r\n\t\t * @param {Number} rowIndex 行号\r\n\t\t * @example $('#grid').grid('setRowInvalid', 0);\r\n\t\t * @memberof grid-class\r\n\t\t * @instance\r\n\t\t */\r\n\t\tclearAllInvalid: function(){\r\n\t\t\tthis.$tableBody.find('tr.invalid').removeClass('invalid');\r\n\t\t\tthis.$tableBody.find('td.invalid').removeClass('invalid');\r\n\t\t\tthis.$absoluteComp.find('>div').hide();\r\n\t\t},\r\n\t\t/**\r\n\t\t * 生成一个错误信息的显示框\r\n\t\t */\r\n\t\t_initInvalidMsg: function($target, msg){\r\n\t\t\tvar $msg = $target.data('invalidMsg');\r\n\t\t\tif($msg){\r\n\t\t\t\t$msg.find('>div>span').html(msg);\r\n\t\t\t\t$msg.show();\r\n\t\t\t}else{\r\n\t\t\t\t$msg = $('<div class=\"errorWrapper\"><div><span>' + msg + '</span><div></div></div></div>');\r\n\t\t\t\tthis.$absoluteComp.append($msg);\r\n\t\t\t\tthis._initInvalidMsgCss($target, $msg);\r\n\t\t\t\t$target.data('invalidMsg', $msg); \r\n\t\t\t}\r\n\t\t},\r\n\t\t/**\r\n\t\t * 错误信息的初始样式\r\n\t\t */\r\n\t\t_initInvalidMsgCss: function($target, $msg){\r\n\t\t\tvar position = $target.position()\r\n\t\t\t\t,css = {display: 'block', left: position.left, top: position.top - 42};\r\n\t\t\t$msg.css(css);\r\n\t\t\t/**\r\n\t\t\t * 修复提示信息的位置\r\n\t\t\t */\r\n\t\t\tif(this.$element.offset().top > $msg.offset().top){\r\n\t\t\t\tcss.top += ($target.outerHeight() + $msg.outerHeight());\r\n\t\t\t\t$msg.css(css);\r\n\t\t\t\t$msg.addClass('up');\r\n\t\t\t}else{\r\n\t\t\t\t$msg.removeClass('up');\r\n\t\t\t}\r\n\t\t},\r\n\t\t/**\r\n\t\t * 绑定错误信息的显示事件\r\n\t\t */\r\n\t\t_bindInvalidMsgEvent: function(){\r\n\t\t\tvar g = this;\r\n\t\t\tthis.$tableBody.on('mousemove.grid.api', 'td.invalid,tr.invalid>td', function(e){\r\n\t\t\t\tvar $this = $(this)\r\n\t\t\t\t\t,position = $this.position()\r\n\t\t\t\t\t,$msg = null;\r\n\t\t\t\tif($this.find('div>.rowBtn').length > 0){\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tif($this.hasClass('invalid')){\r\n\t\t\t\t\t$msg = $this.data('invalidMsg');\r\n\t\t\t\t}else{\r\n\t\t\t\t\t$msg = $this.parent().data('invalidMsg');\r\n\t\t\t\t}\r\n                if($msg){\r\n                \tg._initInvalidMsgCss($this, $msg);\r\n                }\r\n\t\t\t});\r\n\t\t\tthis.$tableBody.on('mouseout.grid.api', '.invalid', function(e){\r\n\t\t\t\tvar errMsg = $(this).data('invalidMsg');\r\n                if(errMsg){\r\n                \terrMsg.hide();\r\n                }\r\n\t\t\t});\r\n\t\t},\r\n\t\t/**\r\n\t\t * 保存（新增、修改、删除）行数据\r\n\t\t * <PRE>\r\n\t\t * infos为一个对象\r\n\t\t * infos.command: 删除[del]、新增[add]、修改[update]，新增修改时 可以无需指定command，由rowData的主键进行判断\r\n\t\t * infos.rowIndex: 要操作的行号\r\n\t\t * infos.rowData: 要执行的行对象数据\r\n\t\t * 1、当该表格有设置主键时，可以根据rowData推算出rowIndex，即rowIndex可以不需要指明\r\n\t\t * 2、当该表格没有设置主键时，必须指明更新第几行 即该对象 存在两个属性：rowIndex 和 rowData\r\n\t\t * </PRE>\r\n\t\t * @todo 优先使用指定的rowIndx属性作为更新的行号，当没有指定rowIndex时，尝试根据主键搜索rowIndex\r\n\t\t * @todo 如果根据信息能够计算出rowIndex，则认为是更新行，否则认为是追加行\r\n\t\t * @param {Object|RowData} infos 保存信息\r\n\t\t * @param {String} [infos.command] 命令\r\n\t\t * @param {Number} [infos.rowIndex] 行号\r\n\t\t * @param {Object} [infos.rowData] 行数据\r\n\t\t * @example $('#grid').grid('saveRow', {id:'idVal',......}); \r\n\t\t * 有主键 直接传入rowData 对象，如果网格存在该id的行，则进行更新，不存在则进行追加\r\n\t\t * @example $('#grid').grid('saveRow', {rowData:{id:'idVal'}, command:'del'}); \r\n\t\t * 删除操作，必须指定command为del，有主键 可以只指定rowData，如果网格存在该id的行，则进行删除操作\r\n\t\t * @example $('#grid').grid('saveRow', {rowData:{id:'idVal'}, command:'del'}); \r\n\t\t * 删除操作，必须指定command为del，没有主键 可以指定rowIndex\r\n\t\t * @example $('#grid').grid('saveRow', {rowIndex:2, rowData:{} }); \r\n\t\t * 没有主键 必须指明rowIndex，并将行数据设置在rowData属性上\r\n\t\t * @example $('#grid').grid('saveRow', {rowIndex:2, command:'del'}); \r\n\t\t * 没有主键 必须指明rowIndex，指定命令del\r\n\t\t * @memberof grid-class\r\n\t\t * @instance\r\n\t\t */\r\n\t\tsaveRow: function(infos){\r\n\t\t\tvar rowIndex = infos.rowIndex\r\n\t\t\t\t,command = infos.command\r\n\t\t\t\t,rowData = null\r\n\t\t\t\t,idField = this.setting.idField;\r\n\t\t\tif(infos.rowData && typeof(infos.rowData) == 'object'){\r\n\t\t\t\trowData = infos.rowData;\r\n\t\t\t}else{\r\n\t\t\t\trowData = infos;\r\n\t\t\t}\r\n\t\t\tif(rowIndex == undefined){\r\n\t\t\t\tif(rowData[idField] != undefined){\r\n\t\t\t\t\trowIndex = this.$tableBodyMain.find('tr[_v=\"' + rowData[idField] + '\"]').index();\r\n\t\t\t\t\trowIndex = rowIndex == -1 ? undefined : rowIndex;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tvar totalRows = this.$tableBodyMain.find('tr').length - 1;\r\n\t\t\tif(rowIndex == undefined \r\n\t\t\t\t|| rowIndex > totalRows){\r\n\t\t\t\tthis.appendRow(rowData);\r\n\t\t\t\tif(!infos.manualCommit){\r\n\t\t\t\t\tthis.acceptChange(totalRows + 1);\r\n\t\t\t\t}\r\n\t\t\t}else{\r\n\t\t\t\tif(command == 'del'){\r\n\t\t\t\t\tvar rowId = this._convertRowIndexToRowId(rowIndex);\r\n\t\t\t\t\tthis._deleteRow(rowId);\r\n\t\t\t\t\tif(!infos.manualCommit){\r\n\t\t\t\t\t\tthis.acceptChange(rowIndex);\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\t\r\n\t\t\t\t}else{\r\n\t\t\t\t\tthis._updateRow(rowIndex, rowData);\r\n\t\t\t\t\tif(!infos.manualCommit){\r\n\t\t\t\t\t\tthis.acceptChange(rowIndex);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\t/**\r\n\t\t * 更新行\r\n\t\t * @param rowIndex\r\n\t\t * @param rowData\r\n\t\t */\r\n\t\t_updateRow: function(rowIndex, rowData){\r\n\t\t\tvar rows = this.data[this.setting.jsonReader.rows];\r\n\t\t\tif(rows.length < rowIndex){\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\trows[rowIndex] = rowData;\r\n\t\t\tvar rowId = this._convertRowIndexToRowId(rowIndex);\r\n\t\t\tthis._newData.updated[rowId] = rowData;\t\r\n\t\t\tthis._updateRowDisplay(rowIndex, rowData);\r\n\t\t\tthis.trigger('onDataChange');\r\n\t\t},\r\n\t\t/**\r\n\t\t * 更新展现\r\n\t\t */\r\n\t\t_updateRowDisplay: function(rowIndex, rowData){\r\n\t\t\tvar columns = this._column\r\n\t\t\t\t,that = this;\r\n\t\t\tupdate$tr(this.$tableBodyLeft.find('tr:eq(' + rowIndex + ')'));\r\n\t\t\tupdate$tr(this.$tableBodyMain.find('tr:eq(' + rowIndex + ')'));\r\n\t\t\tupdate$tr(this.$tableBodyRight.find('tr:eq(' + rowIndex + ')'));\r\n\t\t\tfunction update$tr($tr){\r\n\t\t\t\tif($.isFunction(that.setting.rowCheckable)){\r\n\t\t\t\t\tif(that.setting.rowCheckable(rowData, rowIndex) === false){\r\n\t\t\t\t\t\t$tr.addClass('row-uncheckable');\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\t$tr.removeClass('row-uncheckable');\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tvar $tds = $tr.find('td');\r\n\t\t\t\t$tds.each(function(){\r\n\t\t\t\t\tupdate$td($(this));\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t\tfunction update$td($td){\r\n\t\t\t\tvar col = columns[$td.attr('_cid')];\r\n\t\t\t\tif(!col){\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tif(col.field == '_rownumbers'){\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tif(col._html){\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tif($td.find('.app-wrapper').length == 1){\r\n\t\t\t\t\tcol.editor.editor.setValue(rowData[col.field]);\t\r\n\t\t\t\t}\r\n\t\t\t\tvar html = '';\r\n\t\t\t\tif(col.buttons){\r\n\t\t\t\t\thtml = that._getBtnHtml(col, rowData);\r\n\t\t\t\t}else{\r\n\t\t\t\t\thtml = that._getFormatText(col, rowData);\r\n\t\t\t\t}\r\n\t\t\t\tif(typeof($td.attr('title')) != 'undefined'){\r\n\t\t\t\t\tvar title = html;\r\n\t\t\t\t\tif(typeof html == 'string'){\r\n\t\t\t\t\t\tvar $html = $('<div>' + html + '</div>');\r\n\t\t\t\t\t\tif($html.children().length != 0){\r\n\t\t\t\t\t\t\ttitle = $html.text();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\t$td.attr('title', title);\r\n\t\t\t\t}\r\n\t\t\t\t$td.find('div:first').html(html);\r\n\t\t\t\tvar css = '';\r\n\t\t\t\tif($.isFunction(col.styler)){\r\n\t\t\t\t\tcss = col.styler(rowData[col.field], rowData);\r\n\t\t\t\t}else if(col.styler){\r\n\t\t\t\t\tcss = col.styler;\t\r\n\t\t\t\t}\r\n\t\t\t\tif(css){\r\n\t\t\t\t\t$td.attr('style', css);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\t\t\r\n\t});\r\n\treturn GridEditor;\r\n});\n",
    "/**\r\n * 格式化函数库\r\n * @author Mr.T\r\n */\r\ndefine('app/widgets/grid/app-grid-formatter',['app/util/app-utils'], function(Utils) {\r\n\t/**\r\n\t * 格式化管理器\r\n\t */\r\n\tvar FormatterManager = function(){\r\n\t\tthis.formatterPool = {};\r\n\t};\r\n\tFormatterManager.prototype = {\r\n\t\t/**\r\n\t\t * 添加格式化函数\r\n\t\t * @param formatterCode 格式化函数编码\r\n\t\t */\r\n\t\tadd: function(formatterCode, formatterFunc, formatterName){\r\n\t\t\tif(this.formatterPool[formatterCode]){\r\n\t\t\t\tthrow new Error('已经存在编码为[' + formatterCode + ']的格式化函数，请更换编码');\r\n\t\t\t}\r\n\t\t\tthis.formatterPool[formatterCode] = {\r\n\t\t\t\tname: formatterName,\r\n\t\t\t\tfunc: formatterFunc\r\n\t\t\t};\r\n\t\t},\r\n\t\t/**\r\n\t\t * 移除格式化函数\r\n\t\t */\r\n\t\tremove: function(formatterCode){\r\n\t\t\tthis.formatterPool[formatterCode];\r\n\t\t},\r\n\t\t/**\r\n\t\t * 获取格式化方法\r\n\t\t */\r\n\t\tget: function(formatterCode){\r\n\t\t\tvar format = this.formatterPool[formatterCode];\r\n\t\t\tif(format && $.isFunction(format.func)){\r\n\t\t\t\treturn format.func;\r\n\t\t\t}\r\n\t\t\treturn null;\r\n\t\t},\r\n\t\t/**\r\n\t\t * 格式化\r\n\t\t */\r\n\t\tformatter: function(formatterCode, text, row, rowIndex, col){\r\n\t\t\tvar func = this.get(formatterCode);\r\n\t\t\tif(func){\r\n\t\t\t\ttext = func(text, row, rowIndex, col);\r\n\t\t\t}else{\r\n\t\t\t\ttext = row[formatterCode];\r\n\t\t\t}\r\n\t\t\treturn text;\r\n\t\t},\r\n\t\t/**\r\n\t\t * 获取格式化名称的列表\r\n\t\t */\r\n\t\tgetNameList: function(){\r\n\t\t\tvar list = []\r\n\t\t\t\t,pool = this.formatterPool;\r\n\t\t\tfor(var code in pool){\r\n\t\t\t\tvar name = pool[code].name;\r\n\t\t\t\tif(name){\r\n\t\t\t\t\tlist.push({name:name,id:code});\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn list;\r\n\t\t}\r\n\t};\r\n\tvar formatterManager = new FormatterManager();\r\n\t/**\r\n\t * 千分数值\r\n\t */\r\n\tformatterManager.add('thousandsFormatter', function(text, row, index){\r\n\t\treturn $A.NumberFormat.format(text, '#,##0.00;;#');\r\n\t}, '千分格式化(0不显示)');\r\n\t/**\r\n\t * 千分数值\r\n\t */\r\n\tformatterManager.add('thousand', function(text, row, index){\r\n\t\treturn $A.NumberFormat.format(text, '#,##0.00');\r\n\t}, '千分格式化');\r\n\t/**\r\n\t * 整数千分数值\r\n\t */\r\n\tformatterManager.add('###,###(0)', function(text, row, index){\r\n\t\treturn $A.NumberFormat.format(text, '#,##0;;#');\r\n\t}, '###,###(0不显示)');\r\n\tformatterManager.add('yyyy-MM-dd', function(text, row, index){\r\n\t\tif(text){\r\n\t\t\tif(text.length == 8){\r\n\t\t\t\treturn text.substr(0,4) + '-' + text.substr(4,2) + '-' + text.substr(6,2);\r\n\t\t\t}else{\r\n\t\t\t\treturn text;\r\n\t\t\t}\r\n\t\t}else{\r\n\t\t\treturn '';\r\n\t\t}\r\n\t}, 'yyyy-MM-dd');\r\n\tformatterManager.add('yyyy年MM月dd日', function(text, row, index){\r\n\t\tif(text){\r\n\t\t\tif(text.length == 8){\r\n\t\t\t\treturn text.substr(0,4) + '年' + text.substr(4,2) + '月' + text.substr(6,2) + '日';\r\n\t\t\t}else{\r\n\t\t\t\treturn text;\r\n\t\t\t}\r\n\t\t}else{\r\n\t\t\treturn '';\r\n\t\t}\r\n\t}, 'yyyy年MM月dd日');\r\n\tformatterManager.add('oneYesZeroNo', function(text, row, index){\r\n\t\tif(text == '1'){\r\n\t\t\treturn '是';\r\n\t\t}else{\r\n\t\t\treturn '否';\r\n\t\t}\r\n\t}, '1是0否');\r\n\tformatterManager.add('numberFormatter', function(text, row, index, col){\r\n\t\tif(col.formatPattern){\r\n\t\t\treturn $A.NumberFormat.format(text, col.formatPattern);\r\n\t\t}else{\r\n\t\t\treturn text;\r\n\t\t}\r\n\t});\r\n\treturn formatterManager;\r\n});\n",
    "\r\ndefine('bs-http-plugin/config-ext',[\"app/core/app-core\",],function ($A) {\r\n    var config = {\r\n        \"bs-client-config\":{\r\n            //控件下载地址\r\n            downloadUrl:$A.getHostUrl()+'resources/bsnetfun/bosssoft-assistant-v1.5.4.exe',\r\n            //前端控件实例初始化时更新，如果客户端未启动，会在启动成功后再发一次更新请求\r\n            initUpdate:true,\r\n            //客户端更新地址，initUpdate为true时才起作用\r\n            updateUrl:$A.getHostUrl()\r\n\r\n        }\r\n    }\r\n    return config;\r\n});\n",
    "/**\r\n * Created by qiu.yong on 2017/5/16.\r\n */\r\ndefine('bs-http-plugin/config',[\"app/core/app-jquery\",\"app/core/app-core\",\"bs-http-plugin/config-ext\"], function (AppCore,$A,GlobalConfig) {\r\n\r\n    var Config = {\r\n        version:'1.0',\r\n        url:'http://127.0.0.1:13526/',\r\n        guardUrl:'http://127.0.0.1:13528/controlMainApp',\r\n        heartbeat:'heart',\r\n        update:'update',\r\n        startUrl:'BosssoftAssistant://',\r\n        cookies: window._cookies||'no-cookies',\r\n        timeout:2000,\r\n        sliceSize:1024\r\n    }\r\n    var gcfg = GlobalConfig[\"bs-client-config\"];\r\n    if(gcfg){\r\n        $.extend(Config,gcfg);\r\n    }\r\n    return Config;\r\n});\n",
    "//https://github.com/kelektiv/node-uuid\r\n\r\ndefine('bs-http-plugin/util/uuid',[],function () {\r\n    var uuid = null;\r\n\r\n    !function(e){uuid=e()}(function(){return function e(n,r,o){function t(f,u){if(!r[f]){if(!n[f]){var a=\"function\"==typeof require&&require;if(!u&&a)return a(f,!0);if(i)return i(f,!0);var d=new Error(\"Cannot find module '\"+f+\"'\");throw d.code=\"MODULE_NOT_FOUND\",d}var s=r[f]={exports:{}};n[f][0].call(s.exports,function(e){var r=n[f][1][e];return t(r?r:e)},s,s.exports,e,n,r,o)}return r[f].exports}for(var i=\"function\"==typeof require&&require,f=0;f<o.length;f++)t(o[f]);return t}({1:[function(e,n,r){var o=e(\"./v1\"),t=e(\"./v4\"),i=t;i.v1=o,i.v4=t,n.exports=i},{\"./v1\":4,\"./v4\":5}],2:[function(e,n,r){function o(e,n){var r=n||0,o=t;return o[e[r++]]+o[e[r++]]+o[e[r++]]+o[e[r++]]+\"-\"+o[e[r++]]+o[e[r++]]+\"-\"+o[e[r++]]+o[e[r++]]+\"-\"+o[e[r++]]+o[e[r++]]+\"-\"+o[e[r++]]+o[e[r++]]+o[e[r++]]+o[e[r++]]+o[e[r++]]+o[e[r++]]}for(var t=[],i=0;i<256;++i)t[i]=(i+256).toString(16).substr(1);n.exports=o},{}],3:[function(e,n,r){(function(e){var r,o=e.crypto||e.msCrypto;if(o&&o.getRandomValues){var t=new Uint8Array(16);r=function(){return o.getRandomValues(t),t}}if(!r){var i=new Array(16);r=function(){for(var e,n=0;n<16;n++)0===(3&n)&&(e=4294967296*Math.random()),i[n]=e>>>((3&n)<<3)&255;return i}}n.exports=r}).call(this,\"undefined\"!=typeof global?global:\"undefined\"!=typeof self?self:\"undefined\"!=typeof window?window:{})},{}],4:[function(e,n,r){function o(e,n,r){var o=n&&r||0,t=n||[];e=e||{};var f=void 0!==e.clockseq?e.clockseq:a,l=void 0!==e.msecs?e.msecs:(new Date).getTime(),c=void 0!==e.nsecs?e.nsecs:s+1,v=l-d+(c-s)/1e4;if(v<0&&void 0===e.clockseq&&(f=f+1&16383),(v<0||l>d)&&void 0===e.nsecs&&(c=0),c>=1e4)throw new Error(\"uuid.v1(): Can't create more than 10M uuids/sec\");d=l,s=c,a=f,l+=122192928e5;var p=(1e4*(268435455&l)+c)%4294967296;t[o++]=p>>>24&255,t[o++]=p>>>16&255,t[o++]=p>>>8&255,t[o++]=255&p;var y=l/4294967296*1e4&268435455;t[o++]=y>>>8&255,t[o++]=255&y,t[o++]=y>>>24&15|16,t[o++]=y>>>16&255,t[o++]=f>>>8|128,t[o++]=255&f;for(var b=e.node||u,w=0;w<6;++w)t[o+w]=b[w];return n?n:i(t)}var t=e(\"./lib/rng\"),i=e(\"./lib/bytesToUuid\"),f=t(),u=[1|f[0],f[1],f[2],f[3],f[4],f[5]],a=16383&(f[6]<<8|f[7]),d=0,s=0;n.exports=o},{\"./lib/bytesToUuid\":2,\"./lib/rng\":3}],5:[function(e,n,r){function o(e,n,r){var o=n&&r||0;\"string\"==typeof e&&(n=\"binary\"==e?new Array(16):null,e=null),e=e||{};var f=e.random||(e.rng||t)();if(f[6]=15&f[6]|64,f[8]=63&f[8]|128,n)for(var u=0;u<16;++u)n[o+u]=f[u];return n||i(f)}var t=e(\"./lib/rng\"),i=e(\"./lib/bytesToUuid\");n.exports=o},{\"./lib/bytesToUuid\":2,\"./lib/rng\":3}]},{},[1])(1)});\r\n\r\n    return uuid;\r\n})\r\n;\n",
    "/**\r\n * Created by qiu.yong on 2017/5/24.\r\n */\r\n\r\ndefine('bs-http-plugin/data-transmit/message',[\"jquery\"], function ($) {\r\n    var Message = function () {\r\n        var _self = this;\r\n        _self.msgStack = {};\r\n        $(window).on('message', function (event) {\r\n            var data = event.originalEvent.data;\r\n            data = $.parseJSON(data);\r\n            var callback = _self.get(data.id);\r\n            if (!!callback) {\r\n                callback.call({}, data);\r\n            }\r\n        });\r\n    };\r\n    Message.prototype = {\r\n        constructor:Message,\r\n        set: function (id, callback) {\r\n            this.msgStack[id] = callback;\r\n        },\r\n        get: function (id) {\r\n            var callback = this.msgStack[id];\r\n            if (!!callback) {\r\n                delete this.msgStack[id];\r\n            }\r\n            return callback;\r\n        }\r\n    };\r\n    return new Message();\r\n});\n",
    "/*\r\n * Dotpl-JS v1.0\r\n * http://code.google.com/p/dotpl-js/\r\n * (c) 2012 by Chunzhan.He. All rights reserved.\r\n * chunzhan.he@gmail.com\r\n */\r\n// alert(dotpl.diving(\"data\", {data:{data1:{val:\"evolution\"}}}));\r\n// alert(dotpl.diving(\"data.data1\", {data:{data1:{val:\"evolution\"}}}));\r\n// alert(dotpl.diving(\"data.data1.val\", {data:{data1:{val:\"evolution\"}}}));\r\n// alert(dotpl.applyTpl(\"hello ${val}\", {val:\"world\"}));\r\n// alert(dotpl.applyTpl(\"hello ${val} ${val2}\", {val:\"world\",val1:\"wide-web\",val2:\"good\"}, function(k,v,kv){\r\n// if(k=='val') return kv['val']+\"-\"+kv['val1'];\r\n// }));\r\n// alert(dotpl.applyTpl(\"hello ${data.val}\", {data:{val:\"freedom\"}}));\r\n// alert(dotpl.applyTpl(\"hello ${data.val} nothing ${none}\", {data:{val:\"freedom\"}}));\r\n// alert(dotpl.applyTpl(\"hello ${data.data1.val}\", {data:{data1:{val:\"evolution\"}}}));\r\n// alert(dotpl.applyTpl(\"hello ${val},i ${action} you\", {val:\"town\", action:'love'}));\r\n// alert(dotpl.applyTpl(\"hello ${val},<tpl if=\\\"'${action}'=='love'\\\">i ${action} you</tpl>\", {val:\"town\", action:'love'}));\r\n// alert(dotpl.applyTpl(\"hello ${val},if false<tpl if=\\\"'${action}'=='love'\\\">i ${action} you</tpl>\", {val:\"town\", action:'like'}));\r\n// alert(dotpl.applyTpl(\"list:\\n<tpl for=\\\".\\\">${__offset} hello ${key} ${val}\\n</tpl>\", [{key:\"world\", val:'like'},{key:\"town\", val:'freedom'}]));\r\n// alert(dotpl.applyTpl(\"list:\\n<tpl for=\\\"data\\\">${__offset} hello ${key} ${val}\\n</tpl>\", {data:[{key:\"world\", val:'like'},{key:\"town\", val:'freedom'}]}));\r\n// alert(dotpl.applyTpl(\"list:\\n<tpl for=\\\"data\\\">${__offset} hello ${__val} \\n</tpl>\", {data:[1,2,4]}));\r\n// alert(dotpl.applyTpl(\"list:\\n<tpl for=\\\"data\\\">${__offset} hello ${__val} \\n</tpl>\", {data:[\"s1\",\"s2\",\"s3\"]}));\r\n// alert(dotpl.applyTpl(\"list:\\n<tpl for=\\\"data\\\">${__offset} hello ${key} ${val}\\n</tpl>list2:\\n<tpl for=\\\"data\\\">${__offset} 1024 ${key} ${val}\\n</tpl>\", {data:[{key:\"world\", val:'like'},{key:\"town\", val:'freedom'}]}));\r\n// alert(dotpl.applyTpl(\"<tpl for=\\\".\\\">list${__offset} \\n <ul><tpl0 for=\\\"data\\\"><li>${__offset} \\n ${key} ${val}</li></tpl0></ul></tpl>\", [{data:[{key:\"world\", val:'like'},{key:\"town\", val:'freedom'}]},{data:[{key:\"world1\", val:'like1'},{key:\"town1\", val:'freedom1'}]}]));\r\n// dotpl.applyRTpl(\"/display.tpl\",{key:'hellow world'},function(view){alert(view);});\r\ndefine('base/dotpl-js',[],function () {\r\n    var dotpl = function() {\r\n        function _diving(key,kv) {\r\n            var keys = key.split(\"\\.\");\r\n            var i = 0;\r\n            do {\r\n                kv = kv[keys[i++]];\r\n                if(kv==null) break;\r\n            } while(i<keys.length&&typeof(kv)=='object');\r\n            return kv;\r\n        }\r\n        function _applyMapTpl(tpl, values, renderer, pk, parent) {\r\n            var re = /\\${1}\\{([^\\}]+?)\\}/ig;\r\n            var view = tpl.replace(re, function($0,$1) {\r\n                try {\r\n                    var val = _diving($1,values);\r\n                    val = (val==null?\"\":val);\r\n                    if(typeof renderer=='function') {\r\n                        var tmp = renderer.call(this, $1, val, values, pk, parent);\r\n                        return tmp==null?val:tmp;\r\n                    }\r\n                    return val;\r\n                } catch(e){ alert($1||e.message||e);return null;}\r\n            });\r\n            return view;\r\n        }\r\n        function _request(url,cb,sync) {\r\n            var xmlhttp = null;\r\n            if (window.XMLHttpRequest){// code for IE7+, Firefox, Chrome, Opera, Safari\r\n                xmlhttp=new XMLHttpRequest();\r\n            } else {// code for IE6, IE5\r\n                xmlhttp=new ActiveXObject(\"Microsoft.XMLHTTP\");\r\n            }\r\n            xmlhttp.onreadystatechange=function() {\r\n                if (xmlhttp.readyState==4) {\r\n                    try {\r\n                        cb.call(this, xmlhttp.responseText,xmlhttp.status);\r\n                    } catch(e){ alert(e.message||e);return null;}\r\n                }\r\n            }\r\n            try {\r\n                xmlhttp.open('GET',url,!!sync);\r\n                xmlhttp.send();\r\n            } catch(e){ alert(e.message||e);return null;}\r\n            return xmlhttp;\r\n        }\r\n        function _applyTpl(tpl, data, renderer, pk, parent){\r\n            var regx = /<(tpl\\d?)\\s+(\\w+)\\s*=\\s*(['|\"]{1})([^\\3]+?)\\3\\s*>([\\s\\S]+?)<\\/\\1>/ig;\r\n            if(regx.test(tpl)) {\r\n                tpl = tpl.replace(regx, function($0,$1,$2,$3,$4,$5){\r\n                    var output = \"\";\r\n                    if($2!=null) {\r\n                        if($2.toUpperCase()==\"FOR\") {\r\n                            var arr = data;\r\n                            if($4!=\".\") {\r\n                                arr = _diving($4,data);\r\n                            }\r\n                            for(var i=0;arr!=null&&i<arr.length;i++) {\r\n                                var item = {};\r\n                                if(typeof(arr[i])!='object') {\r\n                                    item.__val = arr[i];\r\n                                } else {\r\n                                    item = arr[i];\r\n                                }\r\n                                item.__offset = i;\r\n                                output+=_applyTpl($5,item,renderer,$4,arr);\r\n                            }\r\n                        } else if($2.toUpperCase()==\"IF\") {\r\n                            try {\r\n                                if(eval(applyTpl($4,data))) {\r\n                                    return _applyTpl($5, data, renderer, pk, parent);\r\n                                }\r\n                            } catch(e) {\r\n                                alert($4||e.message||e);\r\n                            }\r\n                        }\r\n                    }\r\n                    return output;\r\n                });\r\n            }\r\n            return _applyMapTpl(tpl, data, renderer, pk, parent);\r\n        }\r\n        return function(){\r\n            this.diving=_diving;\r\n            this.applyTpl=_applyTpl;\r\n            //remote template\r\n            this.applyRTpl=function(url, data, cb, renderer){\r\n                _request(url, function(tpl, status){\r\n                    if(status==200) {\r\n                        cb.call(this, _applyTpl(tpl, data, renderer));\r\n                    } else {\r\n                        alert(\"Error \"+status+\":\"+url);\r\n                    }\r\n                });\r\n            };\r\n            return this;\r\n        };\r\n    }()();\r\n    window.dotpl = dotpl;\r\n    return dotpl;\r\n});\n",
    "/*\r\n * $Id: base64.js,v 2.15 2014/04/05 12:58:57 dankogai Exp dankogai $\r\n *\r\n *  Licensed under the BSD 3-Clause License.\r\n *    http://opensource.org/licenses/BSD-3-Clause\r\n *\r\n *  References:\r\n *    http://en.wikipedia.org/wiki/Base64\r\n */\r\n\r\n(function(global) {\r\n    'use strict';\r\n    // existing version for noConflict()\r\n    var _Base64 = global.Base64;\r\n    var version = \"2.1.9\";\r\n    // if node.js, we use Buffer\r\n    var buffer;\r\n    if (typeof module !== 'undefined' && module.exports) {\r\n        try {\r\n            buffer = require('buffer').Buffer;\r\n        } catch (err) {}\r\n    }\r\n    // constants\r\n    var b64chars\r\n        = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/';\r\n    var b64tab = function(bin) {\r\n        var t = {};\r\n        for (var i = 0, l = bin.length; i < l; i++) t[bin.charAt(i)] = i;\r\n        return t;\r\n    }(b64chars);\r\n    var fromCharCode = String.fromCharCode;\r\n    // encoder stuff\r\n    var cb_utob = function(c) {\r\n        if (c.length < 2) {\r\n            var cc = c.charCodeAt(0);\r\n            return cc < 0x80 ? c\r\n                : cc < 0x800 ? (fromCharCode(0xc0 | (cc >>> 6))\r\n                                + fromCharCode(0x80 | (cc & 0x3f)))\r\n                : (fromCharCode(0xe0 | ((cc >>> 12) & 0x0f))\r\n                   + fromCharCode(0x80 | ((cc >>>  6) & 0x3f))\r\n                   + fromCharCode(0x80 | ( cc         & 0x3f)));\r\n        } else {\r\n            var cc = 0x10000\r\n                + (c.charCodeAt(0) - 0xD800) * 0x400\r\n                + (c.charCodeAt(1) - 0xDC00);\r\n            return (fromCharCode(0xf0 | ((cc >>> 18) & 0x07))\r\n                    + fromCharCode(0x80 | ((cc >>> 12) & 0x3f))\r\n                    + fromCharCode(0x80 | ((cc >>>  6) & 0x3f))\r\n                    + fromCharCode(0x80 | ( cc         & 0x3f)));\r\n        }\r\n    };\r\n    var re_utob = /[\\uD800-\\uDBFF][\\uDC00-\\uDFFFF]|[^\\x00-\\x7F]/g;\r\n    var utob = function(u) {\r\n        return u.replace(re_utob, cb_utob);\r\n    };\r\n    var cb_encode = function(ccc) {\r\n        var padlen = [0, 2, 1][ccc.length % 3],\r\n        ord = ccc.charCodeAt(0) << 16\r\n            | ((ccc.length > 1 ? ccc.charCodeAt(1) : 0) << 8)\r\n            | ((ccc.length > 2 ? ccc.charCodeAt(2) : 0)),\r\n        chars = [\r\n            b64chars.charAt( ord >>> 18),\r\n            b64chars.charAt((ord >>> 12) & 63),\r\n            padlen >= 2 ? '=' : b64chars.charAt((ord >>> 6) & 63),\r\n            padlen >= 1 ? '=' : b64chars.charAt(ord & 63)\r\n        ];\r\n        return chars.join('');\r\n    };\r\n    var btoa = global.btoa ? function(b) {\r\n        return global.btoa(b);\r\n    } : function(b) {\r\n        return b.replace(/[\\s\\S]{1,3}/g, cb_encode);\r\n    };\r\n    var _encode = buffer ? function (u) {\r\n        return (u.constructor === buffer.constructor ? u : new buffer(u))\r\n        .toString('base64')\r\n    }\r\n    : function (u) { return btoa(utob(u)) }\r\n    ;\r\n    var encode = function(u, urisafe) {\r\n        return !urisafe\r\n            ? _encode(String(u))\r\n            : _encode(String(u)).replace(/[+\\/]/g, function(m0) {\r\n                return m0 == '+' ? '-' : '_';\r\n            }).replace(/=/g, '');\r\n    };\r\n    var encodeURI = function(u) { return encode(u, true) };\r\n    // decoder stuff\r\n    var re_btou = new RegExp([\r\n        '[\\xC0-\\xDF][\\x80-\\xBF]',\r\n        '[\\xE0-\\xEF][\\x80-\\xBF]{2}',\r\n        '[\\xF0-\\xF7][\\x80-\\xBF]{3}'\r\n    ].join('|'), 'g');\r\n    var cb_btou = function(cccc) {\r\n        switch(cccc.length) {\r\n        case 4:\r\n            var cp = ((0x07 & cccc.charCodeAt(0)) << 18)\r\n                |    ((0x3f & cccc.charCodeAt(1)) << 12)\r\n                |    ((0x3f & cccc.charCodeAt(2)) <<  6)\r\n                |     (0x3f & cccc.charCodeAt(3)),\r\n            offset = cp - 0x10000;\r\n            return (fromCharCode((offset  >>> 10) + 0xD800)\r\n                    + fromCharCode((offset & 0x3FF) + 0xDC00));\r\n        case 3:\r\n            return fromCharCode(\r\n                ((0x0f & cccc.charCodeAt(0)) << 12)\r\n                    | ((0x3f & cccc.charCodeAt(1)) << 6)\r\n                    |  (0x3f & cccc.charCodeAt(2))\r\n            );\r\n        default:\r\n            return  fromCharCode(\r\n                ((0x1f & cccc.charCodeAt(0)) << 6)\r\n                    |  (0x3f & cccc.charCodeAt(1))\r\n            );\r\n        }\r\n    };\r\n    var btou = function(b) {\r\n        return b.replace(re_btou, cb_btou);\r\n    };\r\n    var cb_decode = function(cccc) {\r\n        var len = cccc.length,\r\n        padlen = len % 4,\r\n        n = (len > 0 ? b64tab[cccc.charAt(0)] << 18 : 0)\r\n            | (len > 1 ? b64tab[cccc.charAt(1)] << 12 : 0)\r\n            | (len > 2 ? b64tab[cccc.charAt(2)] <<  6 : 0)\r\n            | (len > 3 ? b64tab[cccc.charAt(3)]       : 0),\r\n        chars = [\r\n            fromCharCode( n >>> 16),\r\n            fromCharCode((n >>>  8) & 0xff),\r\n            fromCharCode( n         & 0xff)\r\n        ];\r\n        chars.length -= [0, 0, 2, 1][padlen];\r\n        return chars.join('');\r\n    };\r\n    var atob = global.atob ? function(a) {\r\n        return global.atob(a);\r\n    } : function(a){\r\n        return a.replace(/[\\s\\S]{1,4}/g, cb_decode);\r\n    };\r\n    var _decode = buffer ? function(a) {\r\n        return (a.constructor === buffer.constructor\r\n                ? a : new buffer(a, 'base64')).toString();\r\n    }\r\n    : function(a) { return btou(atob(a)) };\r\n    var decode = function(a){\r\n        return _decode(\r\n            String(a).replace(/[-_]/g, function(m0) { return m0 == '-' ? '+' : '/' })\r\n                .replace(/[^A-Za-z0-9\\+\\/]/g, '')\r\n        );\r\n    };\r\n    var noConflict = function() {\r\n        var Base64 = global.Base64;\r\n        global.Base64 = _Base64;\r\n        return Base64;\r\n    };\r\n    // export Base64\r\n    global.Base64 = {\r\n        VERSION: version,\r\n        atob: atob,\r\n        btoa: btoa,\r\n        fromBase64: decode,\r\n        toBase64: encode,\r\n        utob: utob,\r\n        encode: encode,\r\n        encodeURI: encodeURI,\r\n        btou: btou,\r\n        decode: decode,\r\n        noConflict: noConflict\r\n    };\r\n    // if ES5 is available, make Base64.extendString() available\r\n    if (typeof Object.defineProperty === 'function') {\r\n        var noEnum = function(v){\r\n            return {value:v,enumerable:false,writable:true,configurable:true};\r\n        };\r\n        global.Base64.extendString = function () {\r\n            Object.defineProperty(\r\n                String.prototype, 'fromBase64', noEnum(function () {\r\n                    return decode(this)\r\n                }));\r\n            Object.defineProperty(\r\n                String.prototype, 'toBase64', noEnum(function (urisafe) {\r\n                    return encode(this, urisafe)\r\n                }));\r\n            Object.defineProperty(\r\n                String.prototype, 'toBase64URI', noEnum(function () {\r\n                    return encode(this, true)\r\n                }));\r\n        };\r\n    }\r\n    // that's it!\r\n    if (global['Meteor']) {\r\n        Base64 = global.Base64; // for normal export in Meteor.js\r\n    }\r\n    if (typeof module !== 'undefined' && module.exports) {\r\n        module.exports.Base64 = global.Base64;\r\n    }\r\n    if (typeof define === 'function' && define.amd) {\r\n        // AMD. Register as an anonymous module.\r\n        define('base/base64',[], function(){ return global.Base64 });\r\n    }\r\n})(typeof self !== 'undefined' ? self\r\n : typeof window !== 'undefined' ? window\r\n : typeof global !== 'undefined' ? global\r\n : this\r\n);\n",
    "/**\r\n * 跨域http数据传输\r\n * Created by qiu.yong on 2017/5/15.\r\n */\r\n\r\ndefine('bs-http-plugin/data-transmit/socket',[\"jquery\",\r\n    \"bs-http-plugin/util/uuid\",\r\n    \"bs-http-plugin/config\",\r\n    \"bs-http-plugin/data-transmit/message\",\r\n    \"base/dotpl-js\",\r\n    \"base/base64\"\r\n], function ($,uuid,config,msg) {\r\n\r\n    //切割默认大小\r\n    var sliceSize = config.sliceSize;\r\n    //url最大长度 TODO 根据浏览器设置\r\n    var urlMaxLen = 2000;\r\n    var sendByIframeTimeout = 5*60*1000;\r\n    //状态\r\n    var STATE = {\r\n        pending:{\r\n            code:0,\r\n            name:'pending',\r\n            msg:'准备阶段'\r\n        },\r\n        sendData:{\r\n            code:1,\r\n            name:'sendData',\r\n            msg:'发送数据'\r\n        },\r\n        sendDataCompleted:{\r\n            code:2,\r\n            name:'sendDataCompleted',\r\n            msg:'发送数据完成'\r\n        },\r\n        invoking:{\r\n            code:3,\r\n            name:'invoking',\r\n            msg:'dll调用'\r\n        },\r\n        invoked:{\r\n            code:4,\r\n            name:'invoked',\r\n            msg:'dll调用完成并返回结果'\r\n        },\r\n        state:function(name,op){\r\n            return $.extend(true,{},STATE[name],op);\r\n        },\r\n        //注册事件\r\n        register:function (obj,fn) {\r\n            if($.type(obj)==='undefined'){\r\n                obj = {};\r\n            }\r\n            //注册状态事件\r\n            var $eventObj = $(obj);\r\n            var stateChange = $.isFunction(fn)?fn:$.noop;\r\n            $eventObj.on('stateChange',stateChange);\r\n            $eventObj.trigger('stateChange',[STATE.state('pending')]);\r\n            return $eventObj;\r\n        },\r\n        //触发\r\n        trigger:function ($eventObj,state,args) {\r\n            if($.type(args)==='undefined'){\r\n                args = [];\r\n            }\r\n            $eventObj.trigger('stateChange',[STATE.state(state)].concat([].slice.call(args,0)));\r\n        }\r\n    };\r\n\r\n    var getRs = function () {\r\n      return this.ret.ret_msg;\r\n    };\r\n    var Socket = function () {\r\n    };\r\n    Socket.prototype = {\r\n        constructor:Socket,\r\n        /**\r\n         * 通过get跨域发送数据 后端给实现jsonp返回执行函数包裹结果集\r\n         * @param op\r\n         * {\r\n         *  url:'xxx',\r\n         *  sliceSize:500,//切割大小\r\n         *  data:{\r\n         *      xx:d,\r\n         *      xx2:d2,\r\n         *      payload:d3   //只有这个属性会被拆分编码\r\n         *      },\r\n         *  success:function(){\r\n         *\r\n         *  },\r\n         *  error:function(){\r\n         *\r\n         *  },\r\n         *  stateChange:function(){\r\n         *\r\n         *  }\r\n         *  }\r\n         */\r\n        get: function (op) {\r\n            var _self = this;\r\n            //注册状态事件\r\n            var $eventObj = STATE.register({},op.stateChange);\r\n            //参数初始化\r\n            op.success = $.isFunction(op.success)?op.success:$.noop;\r\n            op.error = $.isFunction(op.error)?op.error:$.noop;\r\n            //payload 初始化\r\n            var payload = op.data;\r\n            payload = $.type(payload)==='undefined'?{}:payload;\r\n            // $.extend(op.data,{id:uuid.v4().replace(/-/g,'')});\r\n\r\n            payload = JSON.stringify(payload);\r\n            payload = _self.encodeURI(payload);\r\n            var size = op.sliceSize?op.sliceSize:sliceSize;\r\n            //校验url长度是否超标\r\n            var _op = $.extend(true,{},op);\r\n            delete _op.data.payload;\r\n            var urlLen = op.url.length + JSON.stringify(_op.data).length+size;\r\n            if(urlLen>urlMaxLen){\r\n                throw new Error('url 长度超过超过可发送最大长度，请重新设置sliceSize!');\r\n            }\r\n            //切割\r\n            var fragements = _self.sliceData(payload,size);\r\n            //生成调用列表\r\n            var ajaxRS = _self.generateAjaxArray(op,fragements);\r\n            var dataSendCompletedAjaxConfig = ajaxRS.dataSendCompletedAjaxConfig;\r\n            var ajaxConfig = ajaxRS.ajaxConfig;\r\n            var deferreds = ajaxRS.deferreds;\r\n\r\n\r\n            //发送数据包\r\n            $(ajaxConfig).each(function (index,item) {\r\n               $.ajax(item).done(item.success).fail(item.error);\r\n            });\r\n            STATE.trigger($eventObj,'sendData');\r\n            var retDef = $.Deferred();\r\n            //获取操作结果\r\n            $.when.apply($,deferreds).done(function() {\r\n                retDef.resolve.apply($,arguments);\r\n                STATE.trigger($eventObj,'sendDataCompleted');\r\n                dataSendCompletedAjaxConfig.success = function (data) {\r\n                    STATE.trigger($eventObj,'invoked',arguments);\r\n                    op.success.apply(op,arguments);\r\n                };\r\n                dataSendCompletedAjaxConfig.error = function (data) {\r\n                    STATE.trigger($eventObj,'invoked',arguments);\r\n                    op.error.apply(op,arguments);\r\n                }\r\n                //$.ajax(dataSendCompletedAjaxConfig);\r\n                STATE.trigger($eventObj,'invoking');\r\n            }).fail(function() {\r\n                retDef.reject.apply($,arguments);\r\n                STATE.trigger($eventObj,'invoked',arguments);\r\n                op.error.apply(op,arguments);\r\n            })\r\n            return retDef;\r\n        },\r\n        /**\r\n         * 通过post跨域发送，后端返回头部给添加相应跨域设置\r\n         *\r\n         * Access-Control-Allow-Origin 为允许哪些Origin发起跨域请求. 这里设置为”*”表示允许所有，通常设置为所有并不安全，最好指定一下。\r\n         * Access-Control-Allow-Methods 为允许请求的方法.\r\n         * Access-Control-Max-Age 表明在多少秒内，不需要再发送预检验请求，可以缓存该结果\r\n         * Access-Control-Allow-Headers 表明它允许跨域请求包含content-type头，这里设置的x-requested-with ，表示ajax请求\r\n         *\r\n         * resp.setHeader( \"Access-Control-Allow-Origin\", \"http://localhost:8080\" );\r\n         * resp.setHeader( \"Access-Control-Allow-Headers\", \"x-requested-with\" );\r\n         * resp.setHeader( \"Access-Control-Allow-Methods\", \"POST\" );\r\n         * resp.setHeader( \"Access-Control-Max-Age\", \"3628800\" );\r\n         * @param op\r\n         */\r\n        post:function (op) {\r\n            var _self = this;\r\n            //注册状态事件\r\n            var $eventObj = STATE.register({},op.stateChange);\r\n            //参数初始化\r\n            op.success = $.isFunction(op.success)?op.success:$.noop;\r\n            op.error = $.isFunction(op.error)?op.error:$.noop;\r\n            //payload 初始化\r\n            var payload = op.data;\r\n            payload = $.type(payload)==='undefined'?{}:payload;\r\n            op.data = {id:uuid.v4().replace(/-/g,'')};\r\n            payload = JSON.stringify(payload);\r\n            payload = _self.base64Encode(payload);\r\n            op.crossDomain = true;\r\n            op.data.payload = payload;\r\n            op.contentType = \"application/x-www-form-urlencoded; charset=utf-8\";\r\n            op.dataType = \"json\";\r\n            op.type = \"POST\";\r\n\r\n            $.support.cors = true;\r\n            //获取操作结果\r\n            $.when($.ajax(op)).done(function() {\r\n                STATE.trigger($eventObj,'invoked',arguments);\r\n                op.success.apply(op,arguments);\r\n            }).fail(function() {\r\n                STATE.trigger($eventObj,'invoked',arguments);\r\n                op.error.apply(op,arguments);\r\n            });\r\n            STATE.trigger($eventObj,'invoking');\r\n        },\r\n        send:function (op) {\r\n            if(op.data){\r\n                op.data = {\r\n                    id:uuid.v4().replace(/-/g,''),\r\n                    payload:JSON.stringify(op.data)\r\n                }\r\n                op.id = op.data.id;\r\n            }\r\n            return this.sendByIframe(op);\r\n        },\r\n        /**\r\n         * 通过 form iframe post跨域发送数据 后端给实现window.parent.postMessage()返回执行执行\r\n         * @param op\r\n         * {\r\n         *  url:'xxx',\r\n         *  timeout:30000, //default 30000\r\n         *  base64:true, //default true\r\n         *  data:{\r\n         *      xx:d,\r\n         *      xx2:d2,\r\n         *      payload:d3\r\n         *      },\r\n         *  success:function(){\r\n         *\r\n         *  },\r\n         *  error:function(){\r\n         *\r\n         *  },\r\n         *  stateChange:function(){\r\n         *\r\n         *  }\r\n         *  }\r\n         */\r\n        sendByIframe:function (op) {\r\n            var operateDefer = op['-operateDefer'];\r\n            if($.type(operateDefer)==='undefined'){\r\n                operateDefer = $.Deferred();\r\n                op['-operateDefer'] = operateDefer;\r\n            }\r\n            var socketDefer = operateDefer;\r\n            var _self = this;\r\n            //注册状态事件\r\n            var $eventObj = STATE.register({},op.stateChange);\r\n            //参数初始化\r\n            op.success = $.isFunction(op.success)?op.success:$.noop;\r\n            op.error = $.isFunction(op.error)?op.error:$.noop;\r\n            var $iframe = _self.createIframe(op);\r\n            var $form = _self.createForm(op);\r\n            var callback = function (data) {\r\n                if($.type(data)==='undefined'){\r\n                    data = {};\r\n                }\r\n                data['getResult'] = getRs;\r\n                try {\r\n                    var args = [data.getResult(),STATE.state('invoked')];\r\n                    op.success.apply(this,args);\r\n                    if(data.ret['ret_code']==='0'){\r\n                        op.success.apply(op,args);\r\n                        operateDefer.resolve.apply(operateDefer,args);\r\n                    }else{\r\n                        op.error.apply(op,args);\r\n                        operateDefer.reject.apply(operateDefer,args);\r\n                    }\r\n                    $form.remove();\r\n                    $iframe.remove();\r\n                }catch (e){\r\n                    args.push(e);\r\n                    op.error.apply(this,args);\r\n                    if(window.console){\r\n                        window.console.error(e);\r\n                    }else {\r\n                        throw e;\r\n                    }\r\n                }\r\n            };\r\n            msg.set(op.data.id,callback);\r\n            //保证 defer 方法队列先绑定\r\n            setTimeout(function () {\r\n                $form.submit();\r\n            },0);\r\n            //超时\r\n            var timeout = op.timeout?op.timeout:sendByIframeTimeout;\r\n            var startTime = new Date();\r\n            var timer = setInterval(function(){\r\n                var endTime = new Date();\r\n                if(socketDefer.state()!=='pending'){\r\n                    clearInterval(timer);\r\n                    return;\r\n                };\r\n                if((endTime-startTime)>timeout){\r\n                    op.error.apply(this,[{code:'timeout',msg:'超时'}]);\r\n                    socketDefer.reject({code:'timeout',msg:'超时'});\r\n                    clearInterval(timer);\r\n                }\r\n            },800);\r\n            STATE.trigger($eventObj,'invoking');\r\n            return socketDefer;\r\n        },\r\n        createIframe:function (op) {\r\n            var template= '<iframe \\\r\n                                id=\"socketIframe${id}\" \\\r\n                                name=\"socketIframe${id}\" \\\r\n                                style=\"position:absolute; top:-9999px; left:-9999px\">\\\r\n                            </iframe>';\r\n            var $iframe = $(dotpl.applyTpl(template,op));\r\n            $iframe.appendTo('body');\r\n            return $iframe;\r\n        },\r\n        createForm:function (op) {\r\n            if(!!op.func){\r\n                op.invokeType = 'func';\r\n                op.invokeValue = op.func;\r\n            }else{\r\n                op.invokeType = 'proc';\r\n                op.invokeValue = op.proc;\r\n            }\r\n            var template= '<form id=\"socketForm${id}\" name=\"socketForm${id}\" \\\r\n                target=\"socketIframe${id}\" \\\r\n                action=\"${url}\" \\\r\n                method=\"post\" \\\r\n                accept-charset=\"UTF-8\" \\\r\n                > \\\r\n                </form>';\r\n            var $form = $(dotpl.applyTpl(template,op));\r\n            var fieldTemp = '<input type=\"hidden\" name=\"\" value=\"\" />';\r\n            if($.type(op.data)==='object'){\r\n                for(field in op.data){\r\n                    var $field = $(fieldTemp);\r\n                    $field.prop('name',field);\r\n                    $field.prop('value',op.data[field]);\r\n                    $form.append($field);\r\n                }\r\n            }\r\n            $form.appendTo('body');\r\n            return $form;\r\n        },\r\n        /**\r\n         * 拆分数据块\r\n         */\r\n        sliceData: function (data, size) {\r\n            var fragments = [];\r\n            var dataStr = '';\r\n            if ($.type(data) === 'string') {\r\n                dataStr = data;\r\n            } else{\r\n                dataStr = JSON.stringify(data);\r\n            }\r\n            var sum = Math.ceil(dataStr.length / size);\r\n            for (var i = 0, start = 0; i < sum; i++, start += size) {\r\n                fragments.push(dataStr.substr(start, size));\r\n            }\r\n            return fragments;\r\n        },\r\n        /**\r\n         * 生成发送ajax数组\r\n         * @param op\r\n         * @param fragments\r\n         * @returns {{ajaxConfig: Array, ajaxArray: Array}}\r\n         */\r\n        generateAjaxArray: function (op,fragments) {\r\n            //ajax配置\r\n            var ajaxConfig = [];\r\n            //配置调用ajax调用\r\n            var deferreds = [];\r\n            var options =  {};\r\n            $.extend(true,options,op);\r\n            delete options.data.payload;\r\n            var len = fragments.length;\r\n            if(len===0){\r\n                len = 1;\r\n            }\r\n\r\n            options.data.sum = len;\r\n            var baseConfig = {\r\n                url:op.url,\r\n                timeout:options.timeout?options.timeout:5000,\r\n                contentType:\"application/x-www-form-urlencoded; charset=utf-8\",\r\n                dataType: 'jsonp',\r\n                jsonp: 'jsonp',\r\n                type:'GET'\r\n            };\r\n            for(var i = 0;i < len;i++){\r\n                var data = {};\r\n                var dfd = $.Deferred();\r\n                deferreds.push(dfd.promise());\r\n                $.extend(true,data,options.data);\r\n                data.curr = i;\r\n                if(typeof fragments[i]!==\"undefined\"){\r\n                    data.payload = fragments[i];\r\n                }\r\n                var config = $.extend(true,{},baseConfig);\r\n                config.success = (function(dfd){\r\n                    return function(data){\r\n                        dfd.resolve();\r\n                    }\r\n                })(dfd);\r\n                config.error = (function(dfd){\r\n                    return function(data){\r\n                        dfd.reject();\r\n                    }\r\n                })(dfd);\r\n                config.data = data;\r\n                ajaxConfig.push(config);\r\n            }\r\n            var result ={\r\n                dataSendCompletedAjaxConfig:$.extend(\r\n                    true,{},\r\n                    baseConfig,\r\n                    options,\r\n                    {\r\n                        data:{\r\n                            res:1\r\n                        },\r\n                        timeout:0\r\n                    }\r\n                ),\r\n                ajaxConfig:ajaxConfig,\r\n                deferreds:deferreds\r\n            }\r\n            return result;\r\n        },\r\n        /**\r\n         */\r\n        encodeURI: function (data) {\r\n            return encodeURIComponent(data);\r\n        },\r\n        base64Encode:function (data) {\r\n            return Base64.encode(data);\r\n        }\r\n    };\r\n\r\n    var instant = new Socket();\r\n    return instant;\r\n});\r\n\n",
    "define('app/widgets/drag/app-drag',[\"app/core/app-jquery\",\"app/core/app-core\"],function($,App){\r\n\t$.fn.drager = function(options){\r\n\t\tif (typeof options == 'string') {\r\n\t\t\tif (options == 'destroy') \r\n\t\t\t\treturn this.each(function(){\r\n\t\t\t\t\t$(this).unbind('mousedown', App.dragTool.start);\r\n\t\t\t\t\t$.data(this, 'app/widgets/drag/app-dragdata', null);\r\n\t\t\t\t});\r\n\t\t}\r\n\t\treturn this.each(function(){\r\n\t\t\tvar el = $(this);\r\n\t\t\t$.data(App.dragTool, 'app/widgets/drag/app-dragdata', {\r\n\t\t\t\toptions: $.extend({\r\n\t\t\t\t\tel: el,\r\n\t\t\t\t\tobj: el\r\n\t\t\t\t}, options)\r\n\t\t\t});\r\n\t\t\tif (options.event) \r\n\t\t\t\tApp.dragTool.start(options.event);\r\n\t\t\telse {\r\n\t\t\t\tvar select = options.selector;\r\n\t\t\t\t$(select, obj).bind('mousedown', App.dragTool.start);\r\n\t\t\t}\r\n\t\t});\r\n\t};\r\n\tApp.dragTool = {\r\n\t\tstart: function(e){\r\n\t\t\tdocument.onselectstart=function(e){return false};//禁止选择\r\n\r\n\t\t\tvar data = $.data(this, 'app/widgets/drag/app-dragdata');\r\n\t\t\tvar el = data.options.el[0];\r\n\t\t\t$.data(el, 'app/widgets/drag/app-dragdata', {\r\n\t\t\t\toptions: data.options\r\n\t\t\t});\r\n\t\t\tif (!App.dragTool.current) {\r\n\t\t\t\tApp.dragTool.current = {\r\n\t\t\t\t\tel: el,\r\n\t\t\t\t\toleft: parseInt(el.style.left) || 0,\r\n\t\t\t\t\totop: parseInt(el.style.top) || 0,\r\n\t\t\t\t\tox: e.pageX || e.screenX,\r\n\t\t\t\t\toy: e.pageY || e.screenY\r\n\t\t\t\t};\r\n\t\t\t\t$(document).bind(\"mouseup\", App.dragTool.stop).bind(\"mousemove\", App.dragTool.drag);\r\n\t\t\t}\r\n\t\t},\r\n\t\tdrag: function(e){\r\n\t\t\tif (!e)  var e = window.event;\r\n\t\t\tvar current = App.dragTool.current;\r\n\t\t\tvar data = $.data(current.el, 'app/widgets/drag/app-dragdata');\r\n\t\t\tvar left = (current.oleft + (e.pageX || e.clientX) - current.ox);\r\n\t\t\tvar top = (current.otop + (e.pageY || e.clientY) - current.oy);\r\n\t\t\tif (top < 1) top = 0;\r\n\t\t\tif (data.options.move == 'horizontal') {\r\n\t\t\t\tif ((data.options.minW && left >= $(data.options.obj).cssNum(\"left\") + data.options.minW) && (data.options.maxW && left <= $(data.options.obj).cssNum(\"left\") + data.options.maxW)) \r\n\t\t\t\t\tcurrent.el.style.left = left + 'px';\r\n\t\t\t\telse if (data.options.scop) {\r\n\t\t\t\t\tif (data.options.relObj) {\r\n\t\t\t\t\t\tif ((left - parseInt(data.options.relObj.style.left)) > data.options.cellMinW) {\r\n\t\t\t\t\t\t\tcurrent.el.style.left = left + 'px';\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t} else \r\n\t\t\t\t\t\tcurrent.el.style.left = left + 'px';\r\n\t\t\t\t}\r\n\t\t\t} else if (data.options.move == 'vertical') {\r\n\t\t\t\t\tcurrent.el.style.top = top + 'px';\r\n\t\t\t} else {\r\n\t\t\t\tvar selector = data.options.selector ? $(data.options.selector, data.options.obj) : $(data.options.obj);\r\n\t\t\t\tif (left >= -selector.outerWidth() * 2 / 3 && top >= 0 && (left + selector.outerWidth() / 3 < $(window).width()) && (top + selector.outerHeight() < $(window).height())) {\r\n\t\t\t\t\tcurrent.el.style.left = left + 'px';\r\n\t\t\t\t\tcurrent.el.style.top = top + 'px';\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tif (data.options.drag) {\r\n\t\t\t\tdata.options.drag.apply(current.el, [current.el]);\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\treturn App.dragTool.preventEvent(e);\r\n\t\t},\r\n\t\tstop: function(e){\r\n\t\t\tvar current = App.dragTool.current;\r\n\t\t\tvar data = $.data(current.el, 'app/widgets/drag/app-dragdata');\r\n\t\t\t$(document).unbind('mousemove', App.dragTool.drag).unbind('mouseup', App.dragTool.stop);\r\n\t\t\tif (data.options.stop) {\r\n\t\t\t\tdata.options.stop.apply(current.el, [current.el]);\r\n\t\t\t}\r\n\t\t\tApp.dragTool.current = null;\r\n\r\n\t\t\tdocument.onselectstart=function(e){return true};//启用选择\r\n\t\t\treturn App.dragTool.preventEvent(e);\r\n\t\t},\r\n\t\tpreventEvent:function(e){\r\n\t\t\tif (e.stopPropagation) e.stopPropagation();\r\n\t\t\tif (e.preventDefault) e.preventDefault();\r\n\t\t\treturn false;\t\t\t\r\n\t\t}\r\n\t};\r\n\treturn App.dragTool;\r\n});\r\n\n",
    "define('app/widgets/drag/app-dialogdrag',[\"app/core/app-jquery\",\"app/core/app-core\",\"app/data/app-ajax\",\"app/widgets/drag/app-drag\"],function($,$a,$ajax){\r\n\tvar dialogDragTarget=\".dialog-header,.dlg-box-head\";\r\n\t\r\n\tfunction disableSelection(){\r\n//\t\tdocument.onselectstart=function(){return false;};\r\n//\t\t$(\"body\").css(\"-moz-user-select\",\"none\");\r\n\t}\r\n\t\r\n\tfunction enableSelection(){\r\n//\t\tdocument.onselectstart=function(){return true;};\r\n//\t\t$(\"body\").css(\"-moz-user-select\",\"inherit\");\r\n\t}\r\n\t\r\n\t$.fn.dialogDrag = function(options){\r\n\t\tif (options&&options.dragTarget){\r\n\t\t\tdialogDragTarget=options.dragTarget;\r\n\t\t}else{\r\n\t\t\tdialogDragTarget=\".dialog-header,.dlg-box-head\";\r\n\t\t}\r\n        if (typeof options == 'string') {\r\n            if (options == 'destroy') \r\n\t\t\t\treturn this.each(function() {\r\n\t\t\t\t\t\tvar dialog = this;\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t$(dialogDragTarget, dialog).unbind(\"mousedown\");\r\n                });\r\n        }\r\n\t\treturn this.each(function(){\r\n\t\t\tvar $dlg = $(this);\r\n\t\t\t$(dialogDragTarget, $dlg).mousedown(function(e){\r\n//\t\t\t\t//如果是在dialogheader中的A上触发的，则不拖拽\r\n\t\t\t\tdisableSelection();\r\n\t\t\t\tvar $target = $(e.target);\r\n\t\t\t\tif($target.is('label')|| $target.is('input')\r\n\t\t\t\t\t||$target.is(\"a\")||$target.parents(\"a\").size()>0){\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\t$a.dialog.switchDialog($dlg);\r\n\t\t\t\t$dlg.data(\"task\",true);\r\n\t\t\t\tsetTimeout(function(){\r\n\t\t\t\t\tif($dlg.data(\"task\"))\r\n\t\t\t\t\t\t$.dialogDrag.start($dlg,e);\r\n\t\t\t\t},100);\r\n\t\t\t\t\r\n\t\t\t\t//modify by tw，拖拽的mouseup事件绑定在document上，并且在mouseup后自动删除该事件\r\n\t\t\t\t$(document).on(\"mouseup\",{\"$dlg\":$dlg},function(e){\r\n\t\t\t\t\t$dlg.data(\"task\",false);\r\n\t\t\t\t\t$(document).unbind(\"mouseup\",arguments.callee);\r\n\t\t\t\t\tenableSelection();\r\n\t\t\t\t\treturn true;\r\n\t\t\t\t});\r\n\t\t\t\t\r\n\t\t\t\treturn true;//Mr.t 事件继续传播\r\n\t\t\t});\r\n\t\t});\r\n\t};\r\n\t$.dialogDrag = {\r\n\t\t_init:function($dlg) {\r\n\t\t\tvar $shadow = $(\"#dialogProxy\");\r\n\t\t\tif (!$shadow.size()) {\r\n\t\t\t\t$shadow = $($a.frags[\"dialogProxy\"]);\r\n\t\t\t\t$(\"body\").append($shadow);\r\n\t\t\t}\r\n\t\t\t$(\"h5\", $shadow).html($(dialogDragTarget+\" h5\", $dlg).html());\r\n\t\t},\r\n\t\tstart:function($dlg,event){\r\n\t\t\t\tthis._init($dlg);\r\n\t\t\t\tvar $shadow = $(\"#dialogProxy\");\r\n\t\t\t\t$shadow.css({\r\n\t\t\t\t\tleft: $dlg.css(\"left\"),\r\n\t\t\t\t\ttop: $dlg.css(\"top\"),\r\n\t\t\t\t\tmarginLeft: $dlg.css(\"marginLeft\"),\r\n\t\t\t\t\theight: $dlg.css(\"height\"),\r\n\t\t\t\t\twidth: $dlg.css(\"width\"),\r\n\t\t\t\t\tzIndex:parseInt($dlg.css(\"zIndex\")) +1\r\n\t\t\t\t}).show();\r\n\t\t\t\t$(\"div.dialog-content\",$shadow).css(\"height\",$(\"div.dialog-content\",$dlg).css(\"height\"));\r\n\t\t\t\t$shadow.data(\"dialog\",$dlg);\r\n\t\t\t\t//$dlg.css({left:\"-10000px\",top:\"-10000px\"});\r\n\t\t\t\t$shadow.drager({\r\n\t\t\t\t\tselector:dialogDragTarget,\r\n\t\t\t\t\tstop: this.stop,\r\n\t\t\t\t\tevent:event\r\n\t\t\t\t});\r\n\t\t\t\treturn false;\r\n\t\t},\r\n\t\tstop:function(){\r\n\t\t\tvar $shadow = $(arguments[0]);\r\n\t\t\tvar $dlg = $shadow.data(\"dialog\");\r\n\t\t\t$dlg.css({left:$shadow.css(\"left\"),top:$shadow.css(\"top\")});\r\n\t\t\t$shadow.hide();\r\n\t\t}\r\n\t};\r\n});\n",
    "/**\r\n * 对话框\r\n */\r\ndefine('app/widgets/window/app-dialog',[\"app/core/app-jquery\",\"app/core/app-core\",\"app/data/app-ajax\",\"app/core/app-options\",\"app/widgets/drag/app-dialogdrag\"],function($,$A,$ajax,$options) {\r\n    //对话框状态\r\n    var DIALOG_STATE ={\r\n        OPENING:0,\r\n        OPENED:1,\r\n        TAG:'_dialog_open_statue'\r\n    };\r\n\r\n\t/**\r\n\t * 内部方法显示对话框\r\n\t */\r\n\tfunction showDialog($dlg,options){\r\n\t\t if (options.mask) {\r\n\t\t\t\tvar $mask = $(\"#_dialogMask\");\r\n\t\t\t\tif($mask.size() == 0){\r\n\t\t\t\t\t$(\"body\").append(\"<div id='_dialogMask' class='dialog-mask'></div>\");\r\n\t\t\t\t}\r\n\t\t\t\t$mask.css(\"zIndex\",$options.zindexs.dialogMask);\r\n\t\t\t\t$(\"#_dialogMask\").show();\r\n\t\t\t }\r\n\t\t var $h5 = $(\"div.dialog-header h5,div.dlg-box-head h5\",$dlg);\r\n\t\t if($h5.length>0&& !$h5.html()){\r\n\t\t\t var $ti = $(\"title\",$dlg);\r\n\t\t\t var html = $ti.html();\r\n\t\t\t $ti.remove();\r\n\t\t\t if(!html){\r\n\t\t\t\t html=options[\"title\"]||\"对话框\";\r\n\t\t\t }\r\n\t\t\t var icon = $ti.attr(\"icon\")||options.icon;\r\n\t\t\t if(icon){\r\n\t\t\t\t html= '<i class=\"'+icon+'\"></i><span>'+html+\"</span>\";\r\n\t\t\t }\r\n\t\t\t $h5.html(html);\r\n\t\t }\r\n\t\t $dlg.one('hide', function () {\r\n\t\t\t if(options.src)\r\n\t\t\t \t$(options.src).focus();\r\n\t\t\t var hideHandle = options['closeCallback'];\r\n\t\t\t if(hideHandle && $.isFunction(hideHandle)){\r\n\t\t\t\t hideHandle($dlg,options);\r\n\t\t\t }\r\n\t\t });\r\n\t\r\n\t\t if ($(\"body\").height()<$dlg.height()){\r\n\t\t \t$dlg.height($(\"body\").height());\r\n\t\t }\r\n\r\n\t\t \tvar $dlgContent=$(\".dialog-content\",$dlg);\r\n\t\t\t var $header=$(\".dialog-header,.dlg-box-head\",$dlg);\r\n\t\t\t $header.on(\"selectstart\",function(){return false;});\r\n\t\t\t $header.on(\"copy\",function(){return false;});\r\n\t\t\t $header.on(\"paste\",function(){return false;});\r\n\t\t\t $header.on(\"cut\",function(){return false;});\r\n\t\t\t var $footer=$(\".dialog-footer\",$dlg);\r\n\t\t\t \tvar height=Math.min($dlg.height(),$(document).height());\r\n\t\t\t \tvar ch=$dlg.outerHeight()-$header.outerHeight()-$footer.outerHeight();\r\n\t\t\t\t$dlgContent.innerHeight(ch);\r\n\t\t\t\tif (options.width){\r\n\r\n\t\t\t\t\tif ($dlgContent.outerWidth()>options.width){\r\n\r\n\t\t\t\t\t\t$dlg.width($dlgContent.outerWidth())\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t \t\r\n\t\t $A.dialog.relayout($dlg);\r\n\t\t\r\n\t\r\n\t\t\r\n\t\t $A.dialog.setCurrent($dlg);\r\n\t\t var callback = options['callback'];\r\n\t\t if(callback && $.isFunction(callback)){\r\n\t\t\t callback($dlg,options);\r\n\t\t }\r\n\t\t \tif (options&&options.afterShow){\r\n\t\t\t\toptions.afterShow.call(this,$dlg);\r\n\t\t}\r\n\t\t \t\r\n\t\t if(options.mode==\"url\"){\r\n\t\t  $dlg.on($A.eventType.pageLoad,function(){\r\n\t\t\t\t\ttimeout = setTimeout(function() {\r\n\t\t\t\t\t\t$dlg.css(\"visibility\", \"\");\r\n\t\t\t\t\t\t$dlg.show();\r\n\t\t\t\t\t}, 50);\r\n\t\t\t\t\t\r\n\t\t\t\t\t\r\n\t\t\t\t\t\r\n\t\t})\r\n\t\t \t}else{\r\n\t\t \t\t\r\n\t\t \t\t$dlg.css(\"visibility\", \"\");\r\n\t\t\t\t$dlg.show();\r\n\t\t \t}\r\n\r\n        $dlg.data(DIALOG_STATE.TAG,DIALOG_STATE.OPENED);\r\n\t };\r\n\t/**\r\n\t * 对话框堆栈\r\n\t */\r\n\t$A.dialog = {\r\n\t\t_op:{\r\n\t\t\thasheader:true,\r\n\t\t\tmask:true, \r\n\t\t\tdragTarget:null,\r\n\t\t\tdrawable:true,\r\n\t\t\treload:true,\r\n\t\t\tmode:\"url\",\r\n\t\t\tbeforShow:function(){},\r\n\t\t\tafterShow:function(){},\r\n\t\t\tafterClose:function(){}\r\n\t\t},\r\n\t\t_current:[],\r\n\t\t_zIndex:42,\r\n\t\t/**\r\n\t\t * 取得当前对话框\r\n\t\t */\r\n\t\tgetCurrent:function(){\r\n\t\t\tif(this._current.length==0)\r\n\t\t\t\treturn null;\r\n\t\t\treturn this._current[this._current.length-1];\r\n\t\t},\r\n\t\tgetDialog:function(dlgId){\r\n\t\t\tfor(var i=0,n=this._current.length;i<n;i++){\r\n\t\t\t\tif(this._current[i].is(\"#\"+dlgId)){\r\n\t\t\t\t\treturn this._current[i];\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn null;\r\n\t\t},\r\n\t\t/**\r\n\t\t * 取得当前对话框\r\n\t\t */\r\n\t\trelayout:function($dlg){\r\n\t\t\tif(!$dlg)\r\n\t\t\t\t$dlg = this.getCurrent();\r\n\t\t\t$dlg.css( \"left\", Math.max(($(window).width() - $dlg.width())/2,0) + \"px\" );\r\n\t\t\t$dlg.css( \"top\",  Math.max((document.body.clientHeight - $dlg.height())/2,0) + \"px\" );\r\n\t\t\t\r\n\t\t},\r\n\t\t/**\r\n\t\t * 重新载入对话框内容\r\n\t\t */\r\n\t\treload:function(url, options){\r\n\t\t\tvar $dlg = (options.dialogId && $(\"#_dialogs #\"+options.dialogId)) || this.getCurrent();\r\n\t\t\tif (!$dlg||$dlg.size()==0)\r\n\t\t\t\treturn;\r\n\t\t\tvar op = $.extend({},$dlg.data(\"options\"), options);\r\n\t\t\t$dlg.data(\"options\",op);\r\n\t\t\tif(op.hasheader)\r\n\t\t\t\t$dlg.find(\">:not(:first)\").remove();\r\n//\t\t\telse\r\n//\t\t\t\t$dlg.html(\"\");\r\n\t\t\t$dlg.data(\"url\",url);\r\n\t\t\tif(op.reload){\r\n\t\t\t\t$dlg.attr(\"reload\",\"true\");\r\n\t\t\t}else{\r\n\t\t\t\t$dlg.removeAttr(\"reload\");\r\n\t\t\t}\r\n\t\t\tif(options.mode==\"url\"){\r\n\t\t\t\t  \r\n\t\t\t\tvar p = {\r\n\t\t\t\t\ttype:\"POST\", \r\n\t\t\t\t\turl:url,\r\n\t\t\t\t\tdata:op.params,\r\n\t\t\t\t\thistory:false,\r\n\t\t\t\t\toperator: op.operator ? op.operator : \"append\",\r\n\t\t\t\t\tcallback:function(response){\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\r\n\t\t\t\t\t\t//$dlg.find(\"[layoutHeight]\").layoutHeight($dlg);\r\n\t\t\t\t\t\t$(\".btn.close\", $dlg).click(function(){\r\n\t\t\t\t\t\t\t$A.dialog.close($dlg);\r\n\t\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\tif (op.dragTarget){\r\n\t\t\t\t\t\t\t$dlg.dialogDrag(op);\r\n\t\t\t\t\t\t}else if(op.drawable&&!op.hasheader){\r\n\t\t\t\t\t\t\t$dlg.dialogDrag(op);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t $A.dialog.setCurrent($dlg)\r\n\t\t\t\t\t\tif (options && options.beforShow) {\r\n\t\t\t\t\t\t\toptions.beforShow.call(this, $dlg);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t//$dlg.css(\"visibility\",\"hidden\");\r\n\r\n\t\t\t\t\t\tshowDialog($dlg, op);\r\n\t\t\t\t\t},error:function(){\r\n\t\t\t\t\t\t  $dlg.data(DIALOG_STATE.TAG,\"\");\r\n\t\t\t\t\t}\r\n\t\t\t\t};\r\n\t\t\t\tif(options.onPageLoad){\r\n\t\t\t\t\tp[\"onPageLoad\"] = options.onPageLoad;\r\n\t\t\t\t}\r\n\t\t\t\tif(options.beforePageInit){\r\n\t\t\t\t\tp[\"beforePageInit\"] = options.beforePageInit;\r\n\t\t\t\t}\t\r\n\t\t\t\t$dlg.loadAppURL(p);\r\n\t\t\t\r\n\t\t\t}else if(options.mode==\"html\"){\r\n\t\t\t\t$dlg.append(url);\r\n\t\t\t\t//$dlg.find(\"[layoutHeight]\").layoutHeight($dlg);\r\n\t\t\t\t$(\".btn.close\", $dlg).click(function(){\r\n\t\t\t\t\t$A.dialog.close($dlg);\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t});\r\n\t\t\t\tif (options && options.beforShow) {\r\n\t\t\t\t\t\t\toptions.beforShow.call(this, $dlg);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t//add by tw 在initPageUI之后在重新计算一次位置\r\n\t\t\t\t$dlg.one($A.eventType.pageLoad,{\"$dlg\":$dlg},function(e){\r\n\t\t\t\t\t$A.dialog.relayout(e.data.$dlg);\r\n\t\t\t\t});\r\n\t\t\t\t\r\n\t\t\t\t$dlg.initPageUI();\r\n\t\t\t\tshowDialog($dlg,op);\r\n\t\t\t}else if(options.mode==\"node\"){\r\n\t\t\t\tif(options.hasheader){\r\n\t                $dlg.find(\">:not(.dialog-header)\").remove();\r\n\t\t\t\t}else{\r\n\t\t\t\t\t$dlg.empty();\r\n\t\t\t\t}\r\n\t\t\t\t$dlg.append($(url));\r\n\t\t\t\t//$dlg.find(\"[layoutHeight]\").layoutHeight($dlg);\r\n\t\t\t\t$(\".btn.close\", $dlg).click(function(){\r\n\t\t\t\t\t$A.dialog.close($dlg);\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t});\r\n\t\t\t\tif(options.onPageLoad){\r\n\t\t\t\t\t$dlg.one($A.eventType.pageLoad,{\"$dlg\":$dlg},function(e){\r\n\t\t\t\t\t\toptions.onPageLoad(options,$dlg);\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t\t$dlg.initPageUI();\r\n\t\t\t\tif (options && options.beforShow) {\r\n\t\t\t\t\toptions.beforShow.call(this, $dlg);\r\n\t\t\t\t}\r\n\t\t\t\t\t\t\r\n\t\t\t\t$dlg.dialogDrag(options);\r\n\t\t\t\t\t\t\r\n\t\t\t\tshowDialog($dlg,op);\r\n\t\t\t}\r\n\t\t\t\r\n\t\t},\r\n\t\t/**\r\n\t\t * 打开对话框\r\n\t\t */\r\n\t\topen:function(url, dlgid, title, options) {\r\n\t\t\tvar $dialogs = $('#_dialogs');\r\n\t\t\tif($dialogs.size() == 0){\r\n\t\t\t\t$('body').append('<div id=\"_dialogs\"></div>');\r\n\t\t\t\t$dialogs = $('#_dialogs');\r\n\t\t\t}\r\n\t\t\tif(typeof url == \"object\"){\r\n\t\t\t\toptions=url;\r\n\t\t\t\turl=options.url;\r\n\t\t\t\tdlgid=options.dialogId;\r\n\t\t\t\ttitle=options.title;\r\n\t\t\t}else if(typeof dlgid == \"object\"){\r\n\t\t\t\toptions=dlgid;\r\n\t\t\t\tdlgid=options.dialogId;\r\n\t\t\t\ttitle=options.title;\r\n\t\t\t}else if(typeof title == \"object\"){\r\n\t\t\t\toptions=title;\r\n\t\t\t\ttitle=options.title;\r\n\t\t\t}\r\n\t\t\tvar $dlg = $(\"#\"+dlgid,$dialogs);\r\n\t\t\tif($dlg.size() == 0 && url==\"#\")\r\n\t\t\t\t return;\r\n\t\t\tif(!dlgid){\r\n\t\t\t\tdlgid = \"dialog\"+$A.nextId();\r\n\t\t\t}\r\n\t\t\toptions[\"dialogId\"]=dlgid;\r\n\t\t\toptions[\"title\"]=title;\r\n\t\t\tvar op = $.extend({},$A.dialog._op, options);\r\n\t\t\t//重复打开一个层\r\n\t\t\tif($dlg.size()>0) {\r\n//\t\t\t\tif(width>0){\r\n//\t\t\t\t\t$dlg.css(\"width\",width);\r\n//\t\t\t\t\t$dlg.css(\"marginLeft\",0-width/2);\r\n//\t\t\t\t}\r\n                //获取dialog 目前状态\r\n                var dlgOpState = $dlg.data(DIALOG_STATE.TAG);\r\n                if(dlgOpState===DIALOG_STATE.OPENING){\r\n                    return;\r\n                }\r\n                $dlg.data(DIALOG_STATE.TAG,DIALOG_STATE.OPENING);\r\n\r\n\t\t\t\tif(op.reload || url != $dlg.data(\"url\")){\r\n\t\t\t\t\tthis.reload(url,op);\r\n\t\t\t\t}else{\r\n\t\t\t\t\tshowDialog($dlg,op);\r\n\t\t\t\t}\r\n\t\t\t\t//初始化对话框时，加载自定义绑定数据\r\n\t\t\t\t$dlg.removeData(\"bindData\");\r\n\t\t\t\tif(op.bindData){\r\n\t\t\t\t\t$dlg.data(\"bindData\",op.bindData);\r\n\t\t\t\t}\r\n\r\n\t\t\t} else { //打开一个全新的层\r\n\t\t\t\tif(op.hasheader){\r\n\t\t\t\t\tvar ht=$template($A.frags[\"dialogFrag\"],op);\r\n\t\t\t\t\t$dialogs.append($(ht.toString()));\r\n\t\t\t\t}else{\r\n\t\t\t\t\tvar ht=$template($A.frags[\"dialogNoHeaderFrag\"],op);\r\n\t\t\t\t\t$dialogs.append($(ht.toString()));\r\n\t\t\t\t}\r\n\t\t\t\t$dlg = $(\">.dialog:last-child\", $dialogs);\r\n\t\t\t\t//对话框添加状态\r\n                $dlg.data(DIALOG_STATE.TAG,DIALOG_STATE.OPENING);\r\n                //初始化对话框时，加载自定义绑定数据\r\n\t\t\t\tif(op.bindData){\r\n\t\t\t\t\t$dlg.data(\"bindData\",op.bindData);\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\t($.fn.bgiframe && $dlg.bgiframe());\r\n\t\t\t\t/*注册事件*/\r\n\t\t\t\tvar pageLoad = op[$A.eventType.pageLoad];\r\n\t\t\t\tif(typeof pageLoad ==\"function\"){\r\n\t\t\t\t\t$dlg.on($A.eventType.pageLoad,pageLoad);\r\n\t\t\t\t}else if(op.pageLoad===false){\r\n\t\t\t\t\t$dlg.unbind($A.eventType.pageLoad);\r\n\t\t\t\t}\r\n//\t\t\t\tif(width>0){\r\n//\t\t\t\t\t$dlg.css(\"width\",width);\r\n//\t\t\t\t\t$dlg.css(\"marginLeft\",0-width/2);\r\n//\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\t$dlg.find(\".dialog-header\").find(\"h5\").html(title);\r\n\t\t\t\t if(options.width){\r\n\t\t\t\t\t $dlg.css( \"width\", options.width);\r\n\t\t\t\t }\r\n\t\t\t\t if(options.height){\r\n\t\t\t\t\t// $dlg.css( \"height\", options.height);\r\n\t\t\t\t \t\t$dlg.innerHeight(options.height);\r\n\t\t\t\t\t \r\n\t\t\t\t }\r\n\t\t\t\tif(!op.mask){\r\n\t\t\t\t\t$dlg.click(function(){\r\n\t\t\t\t\t\t$A.dialog.switchDialog($dlg);\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t\t\r\n//\t\t\t\tif(op.resizable)\r\n//\t\t\t\t\t$dlg.jresize();\r\n\t\t\t\t\r\n\t\t\t\tif(op.drawable&&op.hasheader)\r\n\t\t\t\t\t$dlg.dialogDrag();\r\n\t\t\t\t$(\"a.close\", $dlg).click(function(event){ \r\n\t\t\t\t\t$A.dialog.close($dlg,event);\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t});\r\n\t\t\t\t\r\n//\t\t\t\t$(\"div.dialog-header a\", $dlg).mousedown(function(){\r\n//\t\t\t\t\treturn false;\r\n//\t\t\t\t});\r\n\t\t\t\t$dlg.attr(\"reload\",op.reload);\r\n\t\t\t\tthis.reload(url,op);\r\n\t\t\t\treturn $dlg;\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t * 设置当前对话框\r\n\t\t */\r\n\t\tsetCurrent:function($dlg) {\r\n\t\t\tvar old = this.getCurrent();\r\n\t\t\tif(old&&old.is($dlg))\r\n\t\t\t\treturn;\r\n\t\t\t$dlg.css(\"zIndex\", ($options.zindexs.dialog));\r\n\t\t\tthis._current.push($dlg);\r\n\t\t\tif(old)\r\n\t\t\t\told.css(\"zIndex\",$options.zindexs.dialogBack);\r\n\t\t},\r\n\t\t/**\r\n\t\t * 切换当前层\r\n\t\t * @param {Object} dialog\r\n\t\t */\r\n\t\tswitchDialog:function($dlg) {\r\n\t\t\tif($dlg == null || $dlg.length == 0)\r\n\t\t\t\treturn;\r\n\t\t\tif($dlg.is(this.getCurrent()))\r\n\t\t\t\treturn;\r\n\t\t\tvar index = $dlg.css(\"zIndex\");\r\n\t\t\tif(this.getCurrent()) {\r\n\t\t\t\tvar cindex = $(this.getCurrent()).css(\"zIndex\");\r\n\t\t\t\t$(this._current).css(\"zIndex\", index);\r\n\t\t\t\t$dlg.css(\"zIndex\", cindex);\r\n\t\t\t\tfor(var i = 0; i< this._current.length; i++){\r\n\t\t\t\t\tif($dlg.equalObject(this._current[i])){\r\n\t\t\t\t\t\tthis._current.splice(i,1);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tthis._current.push($dlg);\r\n\t\t\t}\r\n\t\t},\r\n\t\t/**\r\n\t\t * 关闭对话框\r\n\t\t */\r\n\t\tclose:function($dlg,event) {\r\n\t\t\tif ($dlg){\r\n\t\t\tvar opt=$dlg.data(\"options\");\r\n\t\t\tif (opt&&opt.beforeClose){\r\n\t\t\t\t\r\n\t\t\t\tif (opt.beforeClose.call(this,$dlg,event) === false){\r\n\t\t\t\t\t\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t}}\r\n\t\t\tif(typeof $dlg == 'string') \r\n\t\t\t\t$dlg = $(\"#_dialogs #\"+$dlg);\r\n\t\t\tif($dlg == null || $dlg.length == 0)\r\n\t\t\t\treturn;\r\n\t\t\t$dlg.css(\"display\",\"none\");\r\n\t\t\tfor(var i = 0; i< this._current.length; i++){\r\n\t\t\t\tif($dlg.equalObject(this._current[i])){\r\n\t\t\t\t\tthis._current.splice(i,1);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tvar cr= this.getCurrent();\r\n\t\t\t\r\n\t\t\tif(cr!=null)\r\n\t\t\t\tcr.css(\"zIndex\", $options.zindexs.dialog);\r\n\t\t\telse\r\n\t\t\t\t$(\"#_dialogMask\").hide();\r\n\t\t\t$dlg.trigger(\"hide\");\r\n\t\t\tif($dlg.attr(\"reload\")==\"true\"){\r\n\t\t\t\t$A.destroyDom($dlg);\r\n\t\t\t\t$dlg.trigger($A.eventType.pageDestroy).remove();\r\n\t\t\t}\r\n\t\t\tif (opt&&opt.afterClose){\r\n\t\t\t\topt.afterClose.call(this,$dlg)\r\n\t\t\t}\r\n\t\t},\r\n\t\t/**\r\n\t\t * 关闭当前对话框\r\n\t\t */\r\n\t\tcloseCurrent:function(){\r\n\t\t\tthis.close(this.getCurrent());\r\n\t\t},\r\n\t\t//添加绑定数据功能\r\n\t\tgetBindData:function($dlg){\r\n\t\t\tif(!$dlg){\r\n\t\t\t\t$dlg = this.getCurrent();\r\n\t\t\t}\r\n\t\t\treturn $dlg.data(\"bindData\");\r\n\t\t},\r\n\t\tcheckTimeout:function(){\r\n\t\t\tvar $conetnt = $(\".dialog-content\", this.getCurrent());\r\n\t\t\tvar json = $A.jsonEval($conetnt.html());\r\n\t\t\tif (json && json.statusCode == $A.statusCode.timeout) this.closeCurrent();\r\n\t\t}\r\n\t};\r\n\t\r\n\t/**\r\n\t * 对话框\r\n\t */\r\n\t$.fn.closeDialog = function(){\r\n\t\t$A.dialog.close($(this));\r\n\t};\r\n\t\r\n\t$.fn.showDialog = function(){\r\n\t\t $A.dialog.setCurrent($(this));\r\n\t\t $(this).show();\r\n\t};\r\n\t/**\r\n\t * 定义全局方法\r\n\t */\r\n\t$.closeDialog = function($dlg){\r\n\t\tif($dlg){\r\n\t\t\t$dlg.closeDialog();\r\n\t\t}else{\r\n\t\t\t$A.dialog.closeCurrent();\r\n\t\t}\r\n\t};\r\n\t/**\r\n\t * 定义全局方法\r\n\t */\r\n\t$.openModalDialog = function(options){\r\n\t\treturn $A.dialog.open(options);\r\n\t};\r\n\t\r\n\t$(document).on('click',\"a[target=dialog]\", function (e) {\r\n\t\te.preventDefault();\r\n\t\tvar $this = $(this);\r\n\t\tvar opt = $this.getJsonAttr(\"_dialog_options\");\r\n\t\t$.openModalDialog(opt);\r\n\t});\r\n\t\r\n\treturn $A.dialog;\r\n\t\r\n});\r\n\r\n\r\n\n",
    "\r\ndefine('bs-http-plugin/base-pluginvoke',[\"app/core/app-class\",\r\n    \"app/core/app-attribute\",\r\n    \"app/core/app-events\",\r\n    \"bs-http-plugin/config\",\r\n    \"bs-http-plugin/data-transmit/socket\",\r\n    \"bs-http-plugin/util/uuid\",\r\n    \"app/widgets/window/app-dialog\",\r\n    \"app/widgets/window/app-messager\",\r\n    \"base/dotpl-js\",\r\n    \"app/app-funcbase\",\r\n    \"base/base64\"\r\n], function (Class, Attribute, Events,Config,Socket,uuid) {\r\n\r\n    //状态\r\n    var STATE = {\r\n        initParams:{\r\n            code:0,\r\n            name:'initializing',\r\n            msg:'初始化'\r\n        },\r\n        initialized:{\r\n            code:1,\r\n            name:'',\r\n            msg:'初始化完成'\r\n        },\r\n        state:function(name,op){\r\n            return $.extend(true,{},STATE[name],op);\r\n        }\r\n    };\r\n\r\n\r\n    /**\r\n     * @desc 使用请引入 'bs-http-plugin/base-pluginvoke'\r\n     * @class\r\n     * @classdesc dll http 调用基类\r\n     * @name base-pluginvoke\r\n     * @extends Class\r\n     *\r\n     */\r\n    var BasePluginvoke = Class.create({\r\n        Implements: [Attribute, Events],\r\n        /**\r\n         * @type {string} dll名称，可在第一次实例化时指定\r\n         * @memberOf base-pluginvoke\r\n         * @instance\r\n         * @example\r\n         * var p = BasePluginvoke.create({\r\n         *      module:'print',\r\n         *      config:{appId:'xxxx'}\r\n         *  });\r\n         */\r\n        module:'',\r\n        /**\r\n         *\r\n         * @type {object}  dll名称 ，可在第一次实例化时指定。\r\n         * @memberOf base-pluginvoke\r\n         * @example\r\n         * BasePluginvoke.getInstance({\r\n\t\t * \tconfig:{\r\n\t\t * \t\tappId:'xxxx'\r\n\t\t * \t}\r\n\t\t * })\r\n         *@instance\r\n         */\r\n        config:{appId:'bosssoft'},\r\n        /**\r\n         *\r\n         * @type {boolean}  调用博思客户端助手失败时是否自动弹出帮助对话框,如果设置为true请配置url地址。\r\n         * @memberOf base-pluginvoke\r\n         * @example\r\n         * var instance = BasePluginvoke.getInstance({\r\n\t\t * \tconfig:{\r\n\t\t * \t\tappId:'xxxx'\r\n\t\t * \t},\r\n\t\t * \tisShowHelp:true\r\n\t\t * })\r\n         * instance.enableShowHelp();\r\n         * instance.enableShowHelp('downloadUrl');\r\n         * instance.disableShowHelp();\r\n         *@instance\r\n         */\r\n        isShowHelp:true,\r\n\r\n        /**\r\n         *\r\n         * @private\r\n         * @type {string} 博思客户端下载地址\r\n         * @memberOf base-pluginvoke\r\n         * @example\r\n         * var instance = BasePluginvoke.getInstance({\r\n\t\t * \tconfig:{\r\n\t\t * \t\tappId:'xxxx'\r\n\t\t * \t},\r\n\t\t * \tisShowHelp:true,\r\n\t\t * \tdownloadUrl:'xxxxxxxxxxx'\r\n\t\t * })\r\n         * BasePluginvoke.setDownloadUrl('xxxxxxxxxx');\r\n         *@instance\r\n         */\r\n        downloadUrl:Config.downloadUrl,\r\n        /**\r\n         * @memberOf base-pluginvoke\r\n         * @type {array} 自动生成函数列表。\r\n         * @example\r\n         *  var BsPrintX = BasePluginvoke.extend({\r\n         *      functions:[\r\n         *          {\r\n         *           jsName:'initParams',    //js对象实例化后生成的方法吗\r\n         *            dllName:'INIT_PARAMS',  //js对象方法调用后发送的请求参数，proc:'INIT_PARAMS'\r\n         *            initRequired:false      //默认true，需要init返回的$.Deferred() 对象为resolve状态才能执行，为false时不需init返回的Deferred对象\r\n         *        },\r\n         *        'funts'//jsName = 'funts'，dllName = 'funts',initRequired = true\r\n         *      ]\r\n         *      //..........此处省略一坨代码\r\n         * });\r\n         *    var instance = BsPrintX.getIntance();\r\n         *    instance.funts();\r\n         * @instance\r\n         */\r\n        functions:[],\r\n        /**\r\n         * @memberOf base-pluginvoke\r\n         * @type {array} 自动生成函数列表。\r\n         * @example\r\n         *  var BsPrintX = BasePluginvoke.extend({\r\n         *      processes:[\r\n         *          {\r\n         *           jsName:'initParams',    //js对象实例化后生成的方法吗\r\n         *            dllName:'INIT_PARAMS',  //js对象方法调用后发送的请求参数，proc:'INIT_PARAMS'\r\n         *            initRequired:false      //默认true，需要init返回的$.Deferred() 对象为resolve状态才能执行，为false时不需init返回的Deferred对象\r\n         *        },\r\n         *        'funts'//jsName = 'funts'，dllName = 'funts',initRequired = true\r\n         *      ]\r\n         *      //..........此处省略一坨代码\r\n         * });\r\n         *    var instance = BsPrintX.getIntance();\r\n         *    instance.initParams()\r\n         * @instance\r\n         */\r\n        processes:[],\r\n        /**\r\n         * @private\r\n         * @param op\r\n         */\r\n        initialize: function (op) {\r\n            var _self = this;\r\n            $.extend(_self,op);\r\n            if(Config.initUpdate){\r\n                BasePluginvoke.clientUpdate(Config.updateUrl);\r\n            }\r\n            _self.addConfig('version',Config.version);\r\n            if(typeof _self['module'] === \"undefined\"){\r\n                throw new Error('请设置module属性!');\r\n            }\r\n            //方法初始化functions\r\n            _self.initMethods(_self.functions,'func');\r\n            //过程初始化processes\r\n            _self.initMethods(_self.processes,'proc');\r\n            //初始化\r\n            _self.initStateDefer = _self.init();\r\n        },\r\n        /**\r\n         * @private\r\n         * 初始化方法集\r\n         * @param array\r\n         * @param type\r\n         */\r\n        initMethods:function (array,type) {\r\n            var _self = this;\r\n            if($.isArray(array)){\r\n                $(array).each(function (index,funName,callType) {\r\n                    if(typeof _self[funName] === \"undefined\"){\r\n                        _self.generateFun(funName,type);\r\n                    }\r\n                })\r\n            }\r\n        },\r\n        /**\r\n         *\r\n         * @private\r\n         * @memberOf base-pluginvoke\r\n         * @description 在调用由functions或者processes方法列表生成的js方法，如果需要添加配置项比如success、\r\n         * error、stateChange等配置项时可先调用operateConfig方法提前设置，然后该方法会返回一个可调用自带function\r\n         * @param operate   dll方法（必填）\r\n         * @param options 方法调用配置（必填）\r\n         * @example\r\n         *  printInstance.operateConfig('doPos',{\r\n         *      stateChange:function (event,state,data) {\r\n         *          console.info('stateChange',state,data,new Date());\r\n         *      }\r\n         *  })('appCode',{Module:'dll'},{A:'AA'}).done(function (data) {\r\n         *      console.log('config dos success',data);\r\n         *  }).fail(function (obj) {\r\n         *      console.log('config dos error',obj);\r\n         *  });\r\n         * @returns {Function}\r\n         * @instance\r\n         */\r\n        operateConfig:function (operate,options) {\r\n            var _self = this;\r\n            if(!$.isFunction(_self[operate])) {\r\n                throw new Error(operate+ \" 不是函数...\");\r\n            }\r\n            options['-isOptions-'] = true;\r\n            return function () {\r\n                var funcArray = [].slice.apply(arguments);\r\n                funcArray.unshift(options);\r\n                return  _self[operate].apply(_self,funcArray);\r\n            }\r\n        },\r\n        /**\r\n         * @private\r\n         * 生成调用function\r\n         */\r\n        generateFun:function(funObj,callType){\r\n            var _self = this;\r\n            var jsName = '';\r\n            var dllName = '';\r\n            //校验并赋值\r\n            if($.type(funObj)==='string'){\r\n                jsName = dllName = funObj;\r\n            }else if($.type(funObj)==='object'){\r\n                jsName = funObj.jsName;\r\n                dllName = funObj.dllName;\r\n                if($.type(jsName)==='string' && $.type(dllName)==='undefined' ){\r\n                    dllName = jsName;\r\n                }\r\n                if($.type(jsName)==='undefined' && $.type(dllName)==='string' ){\r\n                    jsName = dllName;\r\n                }\r\n                if($.type(jsName)==='undefined' && $.type(dllName)==='undefined' ){\r\n                    throw new Error('必须定义一个jsName 或者 dllName')\r\n                }\r\n            }\r\n            var options = {\r\n                module:_self.module\r\n            };\r\n            options[callType] = dllName;\r\n            //根据-isOptions-属性判断是否是配置对象，如果没有配置对象则自动生成。\r\n            _self[jsName] = function (op) {\r\n                var callOp = _self._initArgs(arguments);\r\n                $.extend(true,callOp,options);\r\n                var operateDefer = _self.newOperation(callOp);\r\n                var exec = function(){\r\n                    return _self.operate.apply(_self,[callOp]);\r\n                }\r\n                //不需要初始化直接执行\r\n                if(funObj.initRequired===false){\r\n                    exec();\r\n                    return operateDefer;\r\n                }\r\n                $.when(_self.initStateDefer)\r\n                .done(function () {\r\n                    exec();\r\n                })\r\n                .fail(function(){\r\n                    operateDefer.reject.apply(operateDefer,arguments);\r\n                    if(_self.isShowHelp){\r\n                        _self.showHelp();\r\n                    }\r\n                });\r\n                return operateDefer;\r\n            };\r\n        },\r\n        /**\r\n         * @private\r\n         * @returns {object}\r\n         * @instance\r\n         */\r\n        _initArgs:function (args) {\r\n            var funArgs = [].slice.apply(args,[1]);\r\n            var callOp = args[0];\r\n            if(!($.type(callOp)==='object'&&callOp['-isOptions-']===true)){\r\n                callOp = {};\r\n                funArgs = [].slice.apply(args);\r\n            }\r\n            callOp.data = funArgs;\r\n            return callOp;\r\n        },\r\n        /**\r\n         * @private\r\n         * @returns $.Deferred\r\n         * @instance\r\n         */\r\n        newOperation:function (op) {\r\n            return op['-operateDefer'] = $.Deferred();\r\n        },\r\n        setOperation:function (op) {\r\n            if(op['-operateDefer']){\r\n                return op['-operateDefer'];\r\n            }\r\n            return op['-operateDefer'] = $.Deferred();\r\n        },\r\n        /**\r\n         * @private\r\n         * @memberOf base-pluginvoke\r\n         * @description 获取初始化状态$.Deferred对象\r\n         * @returns  $.Deferred()\r\n         * @example\r\n         * printInstance.getInitState();\r\n         * @instance\r\n         */\r\n        getInitState:function () {\r\n            var _self = this;\r\n            return _self.initStateDefer;\r\n        },\r\n        /**\r\n         *\r\n         * @private\r\n         * @description 初始化回调函数，子类需要覆盖，必须返回$.Deferred(); $.Deferred() jquery版的promise实现，虽然不好，将就着用吧，等待兼容高版本浏览器\r\n         * @returns $.Deferred();\r\n         * @see 关于 $.Derferred http://www.ruanyifeng.com/blog/2011/08/a_detailed_explanation_of_jquery_deferred_object.html\r\n         */\r\n        init:function () {\r\n            var defer = $.Deferred();\r\n            defer.resolve();\r\n            return defer;\r\n        },\r\n        /**\r\n         *\r\n         * @memberOf base-pluginvoke\r\n         * @event\r\n         * @virtual\r\n         * @description 调用错误统一回调接口，子类需要覆盖\r\n         * @param data {object} dll调用返回结果\r\n         * @param state {object} 状态\r\n         * @param state.code {number} 状态code\r\n         * @param state.msg {number} 状态中文描述\r\n         * @param state.name {number} 状态英文描述\r\n         * @param ret  {object} dll调用返回结果,包含成功失败code\r\n         * @instance\r\n         */\r\n        onError:function (data, state, ret) {\r\n        },\r\n        /**\r\n         *\r\n         * @memberOf base-pluginvoke\r\n         * @private\r\n         * @description 调用dll的公共操作方法{func:'funName',data:[]}\r\n         * @param {object}  options\r\n         * @param {string}  options.func dll调用方法名，func和proc只能存在一个\r\n         * @param {string}  options.proc dll调用方法名，func和proc只能存在一个\r\n         * @param {array}   object.data dll方法参数列表，按照dll方法参数顺序填写\r\n         * @param {function}   object.stateChange 调用dll方法状态更新回调；第一个参数回调事件，第二个参数为回调返回的数据，只有invoked才有结果，其他都为undefined\r\n         * @param {function}   object.success 调用dll方法成功回调；第一个参数为返回结果，第二个参数为事件\r\n         * @param {function}   object.error 调用dll方法失败回调；第一个参数为返回结果，第二个参数为事件\r\n         * @example\r\n         *  var instantce = BasePluginvoke.create({\r\n         *          module:'print',\r\n         *          config:{\r\n         *              app:'123'\r\n         *          }\r\n         *         });\r\n         * instantce.operate(\r\n         * {\r\n         *    data:[ //dll方法参数列表，按照dll方法参数顺序填写\r\n         *       'templateId',\r\n         *       '001'\r\n         *   ],\r\n         *    func:'queryPrintTemplate',//dll方法名，相对的process为 proc:'queryPrintTemplate'\r\n         *   stateChange:function (event,state,data) {   //调用dll方法状态更新回调\r\n         *       console.info(state,data,new Date());\r\n         *   }\r\n         * }\r\n         * ).done(function (data,state) { //成功后的回调，也可以在options中定义success:function(data,state){}\r\n         *   console.info('done base call success      ',data);\r\n         * }).fail(function (data,state) {//失败后的回调，也可以在options中定义error:function(data,state){}\r\n         *   console.info('base call error      ',data);\r\n         * });\r\n         * @returns $.Deferred();\r\n         *\r\n         * @instance\r\n         */\r\n        operate: function (op) {\r\n            var _self = this;\r\n            var operateDefer = _self.setOperation(op);\r\n            var id = uuid.v4().replace(/-/g,'');\r\n            var data = {\r\n                id:id,\r\n                payload:Base64.encode(JSON.stringify({\r\n                    config:_self.config,\r\n                    data:op.data\r\n                }))\r\n            };\r\n            if(op.func){\r\n                data.func = op.func;\r\n            }else if(op.proc){\r\n                data.proc = op.proc;\r\n            }\r\n            var options = $.extend({},op,{\r\n                id:id,\r\n                url:Config.url + _self.module,\r\n                data:data,\r\n                sliceSize:op.sliceSize\r\n            });\r\n            //当发生错误时，回调onError\r\n            var socketDefer = Socket.sendByIframe(options);\r\n            var heartbeat = BasePluginvoke.heartbeat().fail(function () {\r\n                _self.getInitState().reject.apply(_self.getInitState(),arguments);\r\n                if(_self.isShowHelp){\r\n                    _self.showHelp();\r\n                }\r\n            });\r\n            var deferArray = [\r\n                heartbeat,\r\n                operateDefer,\r\n                socketDefer\r\n            ];\r\n            $.when.apply($,deferArray).fail(function () {\r\n                var args = [];\r\n                args = args.concat([].slice.call(arguments,0));\r\n                _self.onError.apply(_self,args);\r\n                operateDefer.rejectWith(op,args);\r\n            })\r\n            return operateDefer;\r\n        },\r\n        /**\r\n         * @memberOf base-pluginvoke\r\n         * @private\r\n         * @description 添加config配置\r\n         * @example printInstance.addConfig('key',1);\r\n         * @param key\r\n         * @param value\r\n         * @instance\r\n         */\r\n        addConfig:function (key,value) {\r\n            if($.type(key)!=='string'){\r\n                return;\r\n            }\r\n            this.config[key] = value;\r\n        },\r\n        /**\r\n         *\r\n         * @private\r\n         * @description 删除config配置\r\n         * @example printInstance.removeConfig('key');\r\n         * @param key\r\n         * @instance\r\n         */\r\n        removeConfig:function (key) {\r\n            delete this.config[key];\r\n        },\r\n        /**\r\n         * 注销方法\r\n         * @private\r\n         * @instance\r\n         */\r\n        destroy: function () {\r\n            for (var p in this) {\r\n                if (this.hasOwnProperty(p)) {\r\n                    delete this[p];\r\n                }\r\n            }\r\n        },\r\n        /**\r\n         * 绑定事件\r\n         * @private\r\n         * @param eventName\r\n         * @param eventCallFun\r\n         * @instance\r\n         */\r\n        bind: function (eventName, eventCallFun) {\r\n            this.on(eventName, eventCallFun, this);\r\n        },\r\n        /**\r\n         * 解除绑定\r\n         * @private\r\n         * @param eventName\r\n         * @instance\r\n         */\r\n        unbind: function (eventName) {\r\n            if (typeof eventName == \"string\") {\r\n                this.off(eventName, null, this);\r\n            }\r\n        },\r\n        /**\r\n         * @private\r\n         * @description  启用自动弹出帮助窗口,请配置url地址。\r\n         * @memberOf base-pluginvoke\r\n         * @param {string} url 下载url\r\n         * @example\r\n         * instance.enableShowHelp();\r\n         * instance.enableShowHelp('downloadUrl');\r\n         *@instance\r\n         */\r\n        enableShowHelp:function (url) {\r\n            this.setDownloadUrl(url);\r\n            this.isShowHelp = true;\r\n        },\r\n        /**\r\n         *\r\n         * @description  禁用自动弹出帮助窗口\r\n         * @memberOf base-pluginvoke\r\n         * @private\r\n         * @example\r\n         * instance.disableShowHelp();\r\n         *@instance\r\n         */\r\n        disableShowHelp:function () {\r\n            this.isShowHelp = false;\r\n        },\r\n        /**\r\n         * @private\r\n         * @description  配置下载url\r\n         * @memberOf base-pluginvoke\r\n         * @param {string} url 下载url\r\n         * @example\r\n         * instance.setDownloadUrl('xxxx');\r\n         *@instance\r\n         */\r\n        setDownloadUrl:function (url) {\r\n            // if($.type(url)==='string'){\r\n            //     this.downloadUrl = url;\r\n            // }\r\n        },\r\n        /**\r\n         * @memberOf base-pluginvoke\r\n         * @private\r\n         * @description 添加config配置\r\n         * @example printInstance.addConfig('key',1);\r\n         * @instance\r\n         */\r\n        showHelp:function () {\r\n            var _self = this;\r\n            if($('#bsClientHelpDlg').length){\r\n                return;\r\n            }\r\n            var html = '\\\r\n                    <div class=\"dlg-box-head\" id=\"unInstallControl_dialog\" style=\"height:50px;\">\\\r\n                    <div class=\"dlg-box-head-left\" id=\"dragTarget\" style=\"height:40px;width:480px;display:inline;\">\\\r\n                      <span class=\"dlg-box-head-title\" style=\"font-size:18px\">控件提示</span> <span class=\"dlg-box-head-text\"></span>\\\r\n                        </div>\\\r\n                    <div class=\"dlg-box-head-right\" style=\"width:60px;float:right;display:inline;\">\\\r\n                    </div>\\\r\n                    </div>\t\\\r\n                    <div class=\"dialog_content\" style=\"height: 210px;\">\\\r\n                    <div style=\"box-sizing: border-box;height:100px;padding:40px 20px 20px 20px;;font-size:16px;font-weight:normal;text-align:center;\">本系统需要安装    <span style=\"color:red;\">博思客户端助手</span>   才能保证正常运行</div> \\\r\n                    <div style=\"height:60px;padding:20px 20px;font-size:16px;font-weight:normal;text-align:center;\"> \\\r\n                    <a id=\"startBtn\" class=\"app-button l-btn l-btn-small\" style=\"height:35px;background:#449d44;color:#fff;margin-right:20px;filter:none;\">\\\r\n                            <span class=\"l-btn-left\">\\\r\n                                <span class=\"l-btn-text\" style=\"font-size:14px;padding-top:3px;\">启动博思客户端</span>\\\r\n                            </span>\\\r\n                        </a>\\\r\n                    <a id=\"handlerStartBtn\" data-url=\"${startUrl}\" class=\"app-button l-btn l-btn-small\" \\style=\"height:35px;background: rgba(206, 52, 38, 0.8);color:#fff;margin-right:20px;filter:none;display:none;\">\\\r\n                            <span class=\"l-btn-left\">\\\r\n                                <span class=\"l-btn-text\" style=\"font-size:14px;padding-top:3px;\">手动启动博思客户端</span>\\\r\n                            </span>\\\r\n                        </a>\\\r\n                    <a id=\"downBtn\" data-url=\"${downloadUrl}\" class=\"app-button l-btn l-btn-small\" \\style=\"height:35px;background:#ec971f;color:#fff;margin-right:20px;filter:none;\">\\\r\n                            <span class=\"l-btn-left\">\\\r\n                                <span class=\"l-btn-text\" style=\"font-size:14px;padding-top:3px;\">下载博思客户端助手</span>\\\r\n                            </span>\\\r\n                        </a>\\\r\n                    <a id=\"closeBtn\" class=\"app-button l-btn l-btn-small\" style=\"height:35px;background:#e6e6e6;color:#333;margin-right:20px;\">\\\r\n                            <span class=\"l-btn-left\">\\\r\n                                <span class=\"l-btn-text\" style=\"font-size:14px;padding-top:3px;\">关闭提示</span>\\\r\n                            </span>\\\r\n                        </a>\\\r\n                    </div> \\\r\n                    </div>';\r\n\r\n            // 获取未安装打印控件界面\r\n            var $node = $(dotpl.applyTpl(html,{\r\n                downloadUrl:_self.downloadUrl,\r\n                startUrl:Config.startUrl\r\n            }));\r\n            $node.find('#downBtn').on('click',function () {\r\n                window.open($(this).data('url'),'下载博思客户端')\r\n            });\r\n            $node.find('#handlerStartBtn').on('click',function () {\r\n                window.open($(this).data('url'),'通过浏览器手动启动博思客户端')\r\n            });\r\n            $node.find('#startBtn').on('click',function () {\r\n                var timeout = 2500;\r\n                Socket.get({\r\n                    url:Config.guardUrl+\"?ct=2\",\r\n                    timeout:10000,\r\n                    data:{\r\n                        payload:{\r\n\r\n                        }\r\n                    }\r\n                }).done(function () {\r\n                    $('#bsClientHelpDlg').fadeOut(1000);\r\n                    $A.messager.correct('启动成功!',3000);\r\n                    setTimeout(function () {\r\n                        $('#bsClientHelpDlg').closeDialog();\r\n                        if(Config.initUpdate){\r\n                            BasePluginvoke.clientUpdate(Config.updateUrl);\r\n                        }\r\n                    },timeout);\r\n                }).fail(function () {\r\n                    $A.messager.warn('启动失败，请尝试手动启动或重新安装博思客户端...');\r\n                    $('#startBtn').hide();\r\n                    $('#handlerStartBtn').css('display','inline-block');\r\n                }).always(function () {\r\n                });\r\n            });\r\n            // 绑定取消事件\r\n            $node.find(\"#closeBtn\").bind(\"click\",function(){\r\n                $('#bsClientHelpDlg').closeDialog();\r\n            });\r\n            var options = {\r\n                dialogId : \"bsClientHelpDlg\",\r\n                hasheader : false,\r\n                height : '260px',\r\n                width : '200px',\r\n                mode : \"node\",\r\n                url : $node,\r\n                beforeClose:function () {\r\n\r\n                },\r\n                onPageLoad:function(){\r\n\r\n                }\r\n            }\r\n            $.openModalDialog(options);\r\n        },\r\n\r\n        Statics:{\r\n            /**\r\n             * @static\r\n             * @memberOf base-pluginvoke\r\n             * @function create\r\n             * @param {object} op\r\n             * @param {object} op.config dll配置\r\n             * @param {string} op.config.appId 应用Id(<span style=\"color:red\">必填</span>)\r\n\r\n             * @param {string} op.module 模块名称(<span style=\"color:red\">必填</span>)\r\n             * @example\r\n             *         var instantce = BasePluginvoke.create({\r\n             *          module:'print',\r\n             *          config:{\r\n             *              app:'123'\r\n             *          }\r\n             *         });\r\n             */\r\n            create:function (op) {\r\n                return new BasePluginvoke(op);\r\n            },\r\n            /**\r\n             * @static\r\n             * @function heartbeat\r\n             * @memberOf base-pluginvoke\r\n             * @param {number} time\r\n             * @description 心跳检查bs客户端是否启动。心跳检查响应时间设置，默认是3000毫秒\r\n             * @example\r\n             * BasePluginvoke.heartbeat(1500).done(function(){\r\n             *  console.log('success');\r\n             * }).fail(function(){\r\n             *  console.log('error');\r\n             * })\r\n             */\r\n            heartbeat:function (time) {\r\n                if(!$.isNumeric(time)){\r\n                    time = Config.timeout;\r\n                }\r\n                var heart = $.Deferred();\r\n                var jsonp = 'heartbeat_'+ uuid.v4().replace(/-/g,'');\r\n                window[jsonp] = function () {\r\n                    heart.resolve();\r\n                }\r\n                var headNode = document.getElementsByTagName('head')[0];\r\n                var scriptNode = document.createElement('script');\r\n                scriptNode.type = 'text/javascript';\r\n                scriptNode.charset = 'utf-8';\r\n                scriptNode.async = true;\r\n                scriptNode.src = Config.url + Config.heartbeat + '?jsonp='+jsonp;\r\n                var step = time/2;\r\n                var timeconsum = 0;\r\n                var interval = setInterval(function () {\r\n                    timeconsum += step;\r\n                    if(timeconsum>=time){\r\n                        window[jsonp] = undefined;\r\n                        clearInterval(interval);\r\n                        if(heart.state() == 'pending'){\r\n                            heart.reject({code:'timeout',msg:'超时'})\r\n                        }\r\n                    }\r\n                },step);\r\n                headNode.appendChild(scriptNode);\r\n                return heart;\r\n            },\r\n            clientUpdate:function (url,time) {\r\n                if(!$.isNumeric(time)){\r\n                    time = Config.timeout;\r\n                }\r\n                return Socket.get({\r\n                    url:Config.url+Config.update,\r\n                    timeout:time,\r\n                    data:{\r\n                        url:url,\r\n                        payload:{\r\n\r\n                        }\r\n                    }\r\n                }).done(function () {\r\n\r\n                }).fail(function () {\r\n\r\n                });\r\n            }\r\n        }\r\n    });\r\n\r\n\r\n\r\n    return BasePluginvoke;\r\n});\n",
    "\r\ndefine('bs-http-plugin/util/img-lazyload',[\"jquery\"\r\n], function (jQuery) {\r\n\r\n    /**\r\n     * Created by qiuyong on 2017/7/19.\r\n     * 参考：https://zhuanlan.zhihu.com/p/24057749?refer=dreawer\r\n     */\r\n    (function ($) {\r\n        /**\r\n         * 防抖动函数\r\n         * @param fun\r\n         * @param delay\r\n         * @param time\r\n         * @return {Function}\r\n         */\r\n        function throttle(fun,args, delay, time) {\r\n            var timeout,\r\n                startTime = new Date();\r\n            return function(e) {\r\n                var context = this,\r\n                    curTime = new Date();\r\n                args.push(e);\r\n                clearTimeout(timeout);\r\n                // 如果达到了规定的触发时间间隔，触发 handler\r\n                if (curTime - startTime >= time) {\r\n                    fun.apply(context, args);\r\n                    startTime = curTime;\r\n                    // 没达到触发间隔，重新设定定时器\r\n                } else {\r\n                    timeout = setTimeout(function () {\r\n                        fun.apply(context, args);\r\n                    }, delay);\r\n                }\r\n            };\r\n        };\r\n\r\n        function onload(img, fn) {\r\n            var timer = setInterval(function() {\r\n                if (img.complete) {\r\n                    fn(img)\r\n                    clearInterval(timer)\r\n                }\r\n            }, 500)\r\n        }\r\n\r\n        function lazyload($contanier,imgSel,defImg,onloadFn){\r\n            var imgs = $contanier.find(imgSel);\r\n            //过滤已经正在延迟加载的\r\n            imgs = imgs.filter(function(index,img){\r\n                if($(img).attr('lazyloaded')) return false;\r\n                return true;\r\n            })\r\n            $(imgs).each(function (index,item) {\r\n                var $img = $(item);\r\n                if (item.offsetTop < parseInt($contanier.height()) + parseInt($contanier.scrollTop())) {\r\n                    if ($img.attr('src') === defImg) {\r\n                        $img.attr('lazyloaded',true);\r\n                        var src = $img.attr(\"data-src\");\r\n                        //加载中图片隐藏\r\n                        var $loadImg = $(document.createElement('img'));\r\n                        $loadImg.attr('src',src);\r\n                        $('body').append($loadImg);\r\n                        $loadImg.hide();\r\n                        onload($loadImg[0],function () {\r\n                            $img.attr(\"src\", src);\r\n                            $loadImg.remove();\r\n                            onloadFn($img);\r\n                        })\r\n                    }\r\n                }\r\n            })\r\n        }\r\n\r\n        $.fn.extend({\r\n            imgLazyLoad:function (imgSel,defImg,onloadFn) {\r\n                var $contanier =  $(this);\r\n                onloadFn = $.isFunction(onloadFn)?onloadFn:$.noop;\r\n                $contanier.find(imgSel).each(function(index,img){\r\n\t\t\t\t\tif(!$(img).attr('lazyloaded')){\r\n\t\t\t\t\t\t$(img).attr('src',defImg);\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n                $contanier.scroll(throttle(lazyload,[$contanier,imgSel,defImg,onloadFn],500,1000));\r\n                lazyload($contanier,imgSel,defImg,onloadFn);\r\n            }\r\n        });\r\n    })(jQuery);\r\n\r\n\r\n});\r\n\n",
    "define('bs-http-plugin/bs-print',['bs-http-plugin/base-pluginvoke',\r\n    \"bs-http-plugin/data-transmit/socket\",\r\n    \"bs-http-plugin/config\",\r\n    \"bs-http-plugin/util/img-lazyload\",\r\n], function (BasePluginvoke, Socket, Config) {\r\n\r\n\r\n    /**\r\n     * @desc 打印控件 使用请引入 'bs-http-plugin/bs-print'\r\n     * @class\r\n     * @classdesc\r\n     * @name bs-print\r\n     * @extends base-pluginvoke\r\n     */\r\n    var BsPrint = BasePluginvoke.extend({\r\n        /**\r\n         * @description dll名称\r\n         * @memberOf bs-print\r\n         * @instance\r\n         * @example\r\n         * module:'print'\r\n         */\r\n        module: 'print',\r\n        /**\r\n         * @description 自动生成函数列表\r\n         */\r\n        functions: [\r\n\r\n            {\r\n                jsName: 'initParams',  //js对象实例化后生成的方法吗\r\n                dllName: 'initParams',//js对象方法调用后发送的请求参数，func:'initParams'\r\n                initRequired: false////默认true，需要init返回的$.Deferred() 对象为resolve状态才能执行，为false时不需init返回的Deferred对象\r\n            },\r\n\r\n            /**\r\n             * @function doPrintRemoteImage\r\n             * @instance\r\n             * @memberOf bs-print\r\n             * @description 打印图片\r\n             * @param {object} options\r\n             * @param {object} options.PrintPreview  是否预览 默认值false\r\n             * @param {object} options.ShowPrintSet  是否显示打印份数设置 默认值false\r\n             * @param {int} options.ShowMode  1：裁剪、2：铺满、3：按比例缩放、4：完整显示、5：平铺 。默认值4\r\n             * @param {object} options.PrintSet\r\n             * @returns {object}\r\n             *\r\n             * @example\r\n             * var print = BsPrint.getInstance();\r\n             * print.doPrintRemoteImage({\r\n             *      Url: \"\",\r\n             *      PrintPreview: true, //是否预览\r\n             *      ShowPrintSet: true, //是否显示打印份数设置\r\n             *      ShowMode: 4,        //1：裁剪、2：铺满、3：按比例缩放、4：完整显示、5：平铺\r\n             *      Name: \"\" ,           //打印任务名称\r\n             *      PrintSet:{}         //打印设置，默认获取ModuleId:00000000\r\n\t\t\t * }).done(function(data){\r\n\t\t\t * \t\t//TODO success\r\n\t\t\t * }).fail(function(){\r\n\t\t\t * \t\t//TODO error\r\n\t\t\t * })\r\n             */\r\n            \"doPrintRemoteImage\",\r\n\r\n            /**\r\n             * @deprecated 已废弃，不建议使用\r\n             * @function getTemplateList\r\n             * @instance\r\n             * @memberOf bs-print\r\n             * @description 一种票据可能会配置多个模板，所以通过ModuleId可以获取到多个模板\r\n             * @param {object} options\r\n             * @param {string} options.ModuleId 模块编号\r\n             * @returns {object}\r\n             *\r\n             * @example\r\n             * var print = BsPrint.getInstance();\r\n             * print.getTemplateList({\r\n\t\t\t * \tModuleId:'xxxx'\r\n\t\t\t * }).done(function(data){\r\n\t\t\t * \t\t//TODO success\r\n\t\t\t * }).fail(function(){\r\n\t\t\t * \t\t//TODO error\r\n\t\t\t * })\r\n             */\r\n            'getTemplateList',\r\n\r\n            /**\r\n             * @deprecated 已废弃，不建议使用\r\n             * @function getDefaultTemplete\r\n             * @instance\r\n             * @memberOf bs-print\r\n             * @description 获取默认模板\r\n             * @param {object} options\r\n             * @param {string} options.ModuleId 模块ID\r\n             * @returns {object}\r\n             *\r\n             * @example\r\n             * var print = BsPrint.getInstance();\r\n             * print.getDefaultTemplete({\r\n\t\t\t * \tModuleId:'xxxx'\r\n\t\t\t * }).done(function(data){\r\n\t\t\t * \t\t//TODO success\r\n\t\t\t * }).fail(function(){\r\n\t\t\t * \t\t//TODO error\r\n\t\t\t * })\r\n             */\r\n            'getDefaultTemplete',\r\n\r\n\r\n            /**\r\n             * @deprecated 已废弃，不建议使用\r\n             * @function getLocal\r\n             * @instance\r\n             * @memberOf bs-print\r\n             * @description 获取存储本地信息\r\n             * @param {object} options\r\n             * @param {string} options.Node 模块编号\r\n             * @param {string} options.Key 模块编号\r\n             * @returns {object}\r\n             *\r\n             * @example\r\n             * var print = BsPrint.getInstance();\r\n             * print.getLocal({\r\n\t\t\t * \tNode:'xxxx',\r\n\t\t\t * \tKey:'xxxx'\r\n\t\t\t * }).done(function(data){\r\n\t\t\t * \t\t//TODO success\r\n\t\t\t * }).fail(function(){\r\n\t\t\t * \t\t//TODO error\r\n\t\t\t * })\r\n             */\r\n            'getLocal',\r\n\r\n            /**\r\n             * @deprecated 已废弃，不建议使用\r\n             * @function setLocal\r\n             * @instance\r\n             * @memberOf bs-print\r\n             * @description 存储本地信息\r\n             * @param {object} options\r\n             * @param {string} options.Node 模块编号\r\n             * @param {string} options.Key 模块编号\r\n             * @param {string} options.Value 模块编号\r\n             * @returns {object}\r\n             *\r\n             * @example\r\n             * var print = BsPrint.getInstance();\r\n             * print.setLocal({\r\n\t\t\t * \tNode:'xxxx',\r\n\t\t\t * \tKey:'xxxx',\r\n\t\t\t * \tValue:'xxxx'\r\n\t\t\t * }).done(function(data){\r\n\t\t\t * \t\t//TODO success\r\n\t\t\t * }).fail(function(){\r\n\t\t\t * \t\t//TODO error\r\n\t\t\t * })\r\n             */\r\n            'setLocal',\r\n\r\n\r\n            /**\r\n             * @function getPrinter\r\n             * @instance\r\n             * @memberOf bs-print\r\n             * @description 获取预览图片\r\n             * @param {object} options\r\n             * @param {object} options.PrintData 打印数据\r\n             * @param {object} options.PrintSet     打印设置\r\n             * @param {string} options.PrintTemplateUrl 打印模板地址\r\n             * @returns {string}\r\n             *\r\n             * @example\r\n             * var print = BsPrint.getInstance();\r\n             * print.getPrinter({\r\n\t\t\t * \tPrintData:{...},\r\n\t\t\t * \tPrintSet:{...},\r\n\t\t\t * \tPrintTemplateUrl:{...}\r\n\t\t\t * }).done(function(data){\r\n\t\t\t * \t\t//TODO show image\r\n\t\t\t * }).fail(function(){\r\n\t\t\t * \t\t//TODO error\r\n\t\t\t * })\r\n             */\r\n            'getPrinter',\r\n\r\n            /**\r\n             * @function setPrinter\r\n             * @instance\r\n             * @memberOf bs-print\r\n             * @description 打印设置\r\n             * @param {object} options\r\n             * @param {string} options.ModuleId 模块编号\r\n             * @returns {string}\r\n             *\r\n             * @example\r\n             * var print = BsPrint.getInstance();\r\n             * print.setPrinter({\r\n\t\t\t * \tModuleId:''\r\n\t\t\t * }).done(function(data){\r\n\t\t\t * \t\t//TODO success\r\n\t\t\t * }).fail(function(){\r\n\t\t\t * \t\t//TODO error\r\n\t\t\t * })\r\n             */\r\n            'setPrinter',\r\n\r\n            /**\r\n             * @function getPrintSet\r\n             * @instance\r\n             * @memberOf bs-print\r\n             * @description 获取打印设置\r\n             * @param {object} options\r\n             * @param {object} options.ModuleId 模块编号\r\n             * @returns {object}\r\n             *\r\n             * @example\r\n             * var print = BsPrint.getInstance();\r\n             * print.getPrintSet({\r\n\t\t\t * \tModuleId:'xxxx'\r\n\t\t\t * }).done(function(data){\r\n\t\t\t * \t\t//TODO success\r\n\t\t\t * }).fail(function(){\r\n\t\t\t * \t\t//TODO error\r\n\t\t\t * })\r\n             */\r\n            'getPrintSet',\r\n\r\n\r\n            /**\r\n             * @deprecated 已废弃，不建议使用\r\n             * @function getTemplatePath\r\n             * @instance\r\n             * @memberOf bs-print\r\n             * @description 获取模板路径\r\n             * @param {object} options\r\n             * @param {string} options.ModuleId 模块ID\r\n             * @returns {string}\r\n             *\r\n             * @example\r\n             * var print = BsPrint.getInstance();\r\n             * print.getTemplatePath({\r\n\t\t\t * \tModuleId:''\r\n\t\t\t * }).done(function(data){\r\n\t\t\t * \t\t//TODO show image\r\n\t\t\t * }).fail(function(){\r\n\t\t\t * \t\t//TODO error\r\n\t\t\t * })\r\n             */\r\n            'getTemplatePath',\r\n\r\n\r\n            /**\r\n             * @function getPrintPreviewImage\r\n             * @instance\r\n             * @memberOf bs-print\r\n             * @description 获取预览图片\r\n             * @param {object} options\r\n             * @param {object} options.PrintData 打印数据\r\n             * @param {object} options.PrintSet     打印设置\r\n             * @param {string} options.PrintTemplateUrl 打印模板地址\r\n             * @returns {string}\r\n             *\r\n             * @example\r\n             * var print = BsPrint.getInstance();\r\n             * print.getPrintPreviewImage({\r\n\t\t\t * \tPrintData:{...},\r\n\t\t\t * \tPrintSet:{...},\r\n\t\t\t * \tPrintTemplateUrl:'xxx'\r\n\t\t\t * }).done(function(data){\r\n\t\t\t * \t\t//TODO show image\r\n\t\t\t * }).fail(function(){\r\n\t\t\t * \t\t//TODO error\r\n\t\t\t * })\r\n             */\r\n            'getPrintPreviewImage',\r\n\r\n            /**\r\n             * @function doDesign\r\n             * @instance\r\n             * @memberOf bs-print\r\n             * @description 打印模板设计\r\n             * @param {object} options\r\n             * @param {string} options.LoadReportURL 模板加载地址\r\n             * @param {string} options.SaveReportURL 模板保存地址\r\n             * @returns {string}\r\n             *\r\n             * @example\r\n             * var print = BsPrint.getInstance();\r\n             * print.doDesign({\r\n\t\t\t * \tSaveReportURL:'xxxx',\r\n\t\t\t * \tLoadReportURL:'xxxx'\r\n\t\t\t * }).done(function(data){\r\n\t\t\t * \t\t//TODO show image\r\n\t\t\t * }).fail(function(){\r\n\t\t\t * \t\t//TODO error\r\n\t\t\t * })\r\n             */\r\n            'doDesign',\r\n\r\n            /**\r\n             * @function doPreview\r\n             * @instance\r\n             * @memberOf bs-print\r\n             * @description 打印预览。支持批量打印，PrintData传入数组，PrintSize参数是切割PrintData，每次发送的大小\r\n             * @param {object} options\r\n             * @param {string} options.LoadReportURL 模板加载地址\r\n             * @param {boolean} options.PrintPreview 是否打印预览\r\n             * @param {object} options.PrintData 打印数据\r\n             * @param {object} options.PrintSet 打印设置\r\n             * @param {integer} options.PrintSize 打印或者预览每次发送数据大小，默认打印全部\r\n             * @param {function} options.ProcessChange 打印或者预览处理回调函数\r\n             * @param {function} options.PrintCallBack 打印按钮回调函数，预览的时候才有打印按钮\r\n             * @returns {object}\r\n             *\r\n             * @example\r\n             * var print = BsPrint.getInstance();\r\n             * print.doPreview({\r\n\t\t\t * \tLoadReportURL:'xxxx',\r\n\t\t\t * \tPrintPreview:false,\r\n\t\t\t * \tPrintData:{...},\r\n\t\t\t * \tPrintSet:{...}\r\n\t\t\t * }).done(function(data){\r\n\t\t\t * \t\t//TODO success\r\n\t\t\t * }).fail(function(){\r\n\t\t\t * \t\t//TODO error\r\n\t\t\t * })\r\n             */\r\n            'doPreview',\r\n\r\n            /**\r\n             * @function printReport\r\n             * @instance\r\n             * @memberOf bs-print\r\n             * @description 打印报表\r\n             * @param {object} options\r\n             * @param {boolean} options.PrintPreview 是否打印预览\r\n             * @param {object} options.PrintData 打印数据\r\n             * @param {object} options.PrintSet 打印设置\r\n             * @param {object} options.Header 报表头\r\n             * @param {object} options.Detail 详细数据\r\n             * @param {integer} options.ColumnPrintAdaptMethod 打印适配方法\r\n             * @returns {object}\r\n             *\r\n             * @example\r\n             * var print = BsPrint.getInstance();\r\n             * print.printReport({\r\n\t\t\t * \tPrintPreview:false,\r\n\t\t\t * \tPrintData:{...},\r\n\t\t\t * \tPrintSet:{...},\r\n\t\t\t * \tHeader:{...},\r\n\t\t\t * \tDetail:{...},\r\n\t\t\t * \tColumnPrintAdaptMethod:1\r\n\t\t\t * }).done(function(data){\r\n\t\t\t * \t\t//TODO success\r\n\t\t\t * }).fail(function(){\r\n\t\t\t * \t\t//TODO error\r\n\t\t\t * })\r\n             */\r\n            'printReport',\r\n\r\n            /**\r\n             * @function doPrintMultiSubReport\r\n             * @instance\r\n             * @memberOf bs-print\r\n             * @description  打印多重子报表\r\n             * @param {object} options\r\n             * @param {object} options.PrintData 打印数据\r\n             * @param {object} options.PrintSet     打印设置\r\n             * @param {string} options.LoadReportURL 模板加载地址\r\n             * @param {object/array} options.SubReports 子报表数据\r\n             * @param {boolean} options.PrintPreview 是否打印预览\r\n             * @param {object} options.Groups 打印控制等信息\r\n             * @returns {string}\r\n             *\r\n             * @example\r\n             * var print = BsPrint.getInstance();\r\n             * print.doPrintMultiSubReport({\r\n\t\t\t * \tPrintData:{...},\r\n\t\t\t * \tPrintSet:{...},\r\n\t\t\t * \tLoadReportURL:'xxxxx',\r\n\t\t\t * \tSubReports:{...},\r\n\t\t\t * \tPrintPreview:false,\r\n\t\t\t * \tGroups:{...}\r\n\t\t\t * }).done(function(data){\r\n\t\t\t * \t\t//TODO show image\r\n\t\t\t * }).fail(function(){\r\n\t\t\t * \t\t//TODO error\r\n\t\t\t * })\r\n             */\r\n            'doPrintMultiSubReport',\r\n\r\n            /**\r\n             * @function doCoordinate\r\n             * @instance\r\n             * @memberOf bs-print\r\n             * @description 点阵打印\r\n             * @param {object} options\r\n             * @param {object} options.PrintData 打印数据\r\n             * @param {object} options.PrintSet     打印设置\r\n             * @returns {string}\r\n             *\r\n             * @example\r\n             * var print = BsPrint.getInstance();\r\n             * print.doCoordinate({\r\n\t\t\t * \tPrintData:{...},\r\n\t\t\t * \tPrintSet:{...}\r\n\t\t\t * }).done(function(data){\r\n\t\t\t * \t\t//TODO show image\r\n\t\t\t * }).fail(function(){\r\n\t\t\t * \t\t//TODO error\r\n\t\t\t * })\r\n             */\r\n            'doCoordinate',\r\n            /**\r\n             * @function doCustomPrint\r\n             * @instance\r\n             * @memberOf bs-print\r\n             * @description 自定义打印\r\n             * @param {object} options\r\n             * @param {object} options.PrintData 打印数据\r\n             * @param {object} options.PrintSet     打印设置\r\n             * @returns {string}\r\n             *\r\n             * @example\r\n             * var print = BsPrint.getInstance();\r\n             * print.doCustomPrint({\r\n\t\t\t * \tPrintData:{...},\r\n\t\t\t * \tPrintSet:{...}\r\n\t\t\t * }).done(function(data){\r\n\t\t\t * \t\t//TODO show image\r\n\t\t\t * }).fail(function(){\r\n\t\t\t * \t\t//TODO error\r\n\t\t\t * })\r\n             */\r\n            'doCustomPrint',\r\n\r\n\r\n            /**\r\n             * @function openFile\r\n             * @instance\r\n             * @memberOf bs-print\r\n             * @description 选择文件夹\r\n             * @param {object} options\r\n             * @returns {string}\r\n             *\r\n             * @example\r\n             * var print = BsPrint.getInstance();\r\n             * print.openFile().done(function(data){\r\n\t\t\t * \t\t//TODO show image\r\n\t\t\t * }).fail(function(){\r\n\t\t\t * \t\t//TODO error\r\n\t\t\t * })\r\n             */\r\n            'openFile',\r\n\r\n            /**\r\n             * @function exportMedia\r\n             * @instance\r\n             * @memberOf bs-print\r\n             * @description 导出多媒体文件\r\n             * @param {object} options\r\n             * @param {object} options.PrintData    打印数据\r\n             * @param {object} options.PrintSet     打印设置\r\n             * @returns {string}\r\n             *\r\n             * @example\r\n             * var print = BsPrint.getInstance();\r\n             * print.exportMedia({\r\n                    \"PrintData\": [{\r\n                        \"Name\": \"导出文件名\",\r\n                        \"Data\": {}\r\n                    }],\r\n                    \"PrintSet\": {},\r\n                    \"ExportType\": \"PDF/Excel(默认PDF)\",\r\n                    \"LoadReportURL\": \"模板地址(支持http下载模板和使用本地模板)\",\r\n                    \"tempVersion\": \"模板版本\"\r\n\t\t\t * }).done(function(data){\r\n\t\t\t * \t\t//TODO show image\r\n\t\t\t * }).fail(function(){\r\n\t\t\t * \t\t//TODO error\r\n\t\t\t * })\r\n             */\r\n            'exportMedia'\r\n        ],\r\n        init: function () {\r\n            var _self = this;\r\n            var initOptions = _self.initOptions;\r\n            var defer = $.Deferred();\r\n            _self.initParams(initOptions).done(function (data, state, Rs) {\r\n                defer.resolve();\r\n            }).fail(function (data, state, Rs) {\r\n                defer.reject({code: -1, msg: '初始化失败！！！！'});\r\n            });\r\n            return defer;\r\n        },\r\n\r\n        template: {\r\n            /**\r\n             * 打印预览窗口\r\n             * @type {string}\r\n             */\r\n            printPreViewDialog: '\\\r\n                <div class=\"dlg-box-head\">\\\r\n                    <div class=\"dlg-box-head-left\">\\\r\n                        <span class=\"dlg-box-head-title\">打印预览</span>\\\r\n                        <span class=\"pre-view-msg\"></span>\\\r\n                    </div>\\\r\n                    <div class=\"dlg-box-head-right\">\\\r\n                        <div class=\" btnarea menubar btn-dlg-toolbar\">\\\r\n                        </div>\\\r\n                    </div>\\\r\n                </div>\\\r\n                <div class=\"dialog-content print-pre-view\" style=\"padding: 30px;\">\\\r\n                </div>',\r\n            /**\r\n             * 打印窗口\r\n             * @type {string}\r\n             */\r\n            printDialog: '\\\r\n            <div class=\"dlg-box-head\">\\\r\n                <div class=\"dlg-box-head-left\">\\\r\n                    <span class=\"dlg-box-head-title\">打印</span>\\\r\n                </div>\\\r\n            </div>\\\r\n            <div class=\"dialog-content print-pre-view\">\\\r\n                <span class=\"print-view-msg\"></span>\\\r\n            </div>'\r\n        },\r\n\r\n\r\n        exportMedia: function (data) {\r\n            var self = this;\r\n            return self.openFile().then(function (path) {\r\n                data.ExportPath = path;\r\n                return self.operate({\r\n                    data: [data],\r\n                    func: 'exportMedia'\r\n                })\r\n            })\r\n        },\r\n        /**\r\n         * @return {*}\r\n         */\r\n        doPreview: function () {\r\n            var _self = this;\r\n            var op = _self._initArgs(arguments);\r\n            var dfd = $.Deferred();\r\n            $.when(_self.initStateDefer)\r\n                .done(function () {\r\n                    //初始化参数\r\n                    var index = 0;\r\n                    var dialogOptions = _self.getItem(op, 'DialogOptions');\r\n                    dialogOptions = $.type(dialogOptions) === 'undefined' ? {} : dialogOptions;\r\n                    //是否由前端展示窗体，false的时候由前端展示窗体。默认false\r\n                    var showForm = _self.getItem(op, 'ShowForm');\r\n                    var printPreView = _self.getItem(op, 'PrintPreview');\r\n                    var msgDlg = _self.getItem(op, 'MessageDialog');\r\n                    var defImg = _self.getItem(op, 'DefImg');\r\n                    if ($.type(msgDlg) === 'undefined') {\r\n                        msgDlg = true\r\n                    }\r\n                    showForm = showForm === false ? showForm : true;\r\n                    _self.setItem(op, 'ShowForm', showForm);\r\n                    var isPreview = !showForm && printPreView;\r\n                    //打印数据\r\n                    var printData = _self.getItem(op, 'PrintData');\r\n                    printData = $.isArray(printData) ? printData : [printData];\r\n                    var printLength = printData.length;\r\n                    //打印或者预览每次调用dll的数据大小\r\n                    var frequency = _self.getItem(op, 'PrintSize');\r\n                    frequency = $.isNumeric(frequency) ? frequency : printLength;\r\n\r\n                    //打印按钮回调\r\n                    var printCallBack = _self.getItem(op, 'PrintCallBack');\r\n                    printCallBack = _self.isFunction(printCallBack);\r\n                    //过程改变回调\r\n                    var processChange = _self.getItem(op, 'ProcessChange');\r\n                    processChange = _self.isFunction(processChange);\r\n\r\n                    //默认图片\r\n                    if(!!!defImg)\r\n                        defImg = $A.getHostUrl() + 'resources/common/themes/images/print/default.gif';\r\n                    var message = {\r\n                        printSuccessMsg: '打印成功！',\r\n                        printErrorMsg: '预览失败！',\r\n                        preViewSuccessMsg: '预览成功！',\r\n                        preViewErrorMsg: '预览成功！',\r\n                        printDoingMsg: '正在打印',\r\n                        preViewDoingMsg: '正在预览',\r\n                        getSuccessMsg: function () {\r\n                            if (printPreView) {\r\n                                return this.preViewSuccessMsg;\r\n                            }\r\n                            return this.printSuccessMsg;\r\n                        },\r\n                        getErrorMsg: function () {\r\n                            if (printPreView) {\r\n                                return this.preViewErrorMsg;\r\n                            }\r\n                            return this.printErrorMsg;\r\n                        },\r\n                        getDoingMsg: function () {\r\n                            if (printPreView) {\r\n                                return this.preViewDoingMsg;\r\n                            }\r\n                            return this.printDoingMsg;\r\n                        }\r\n                    };\r\n                    $.extend(message, _self.getItem(op, 'Message'));\r\n\r\n                    //打印图片数组\r\n                    var printImg = [];\r\n                    //保证页面只有一个滚动条\r\n                    var bodyOverflow = $(document.body).css('overflow');\r\n                    $(document.body).css('overflow', 'hidden');\r\n                    //打开对话框配置\r\n                    var html = \"\";\r\n                    var dlgOptions = {\r\n                        dialogId: \"_dlgdoPreViewImg\",\r\n                        hasheader: false,\r\n                        title: ' ',\r\n                        height: '75%',\r\n                        width: '60%',\r\n                        mode: \"node\",\r\n                        buttons: [\r\n                            {\r\n                                id: 'btnPrint',\r\n                                text: '打印',\r\n                                visible: false,\r\n                                click: function () {\r\n                                    op.func = 'doPrintImage';\r\n                                    _self.newOperation(op);\r\n                                    _self.setItem(op, 'PrintData', printImg);\r\n\r\n                                    var printDlgOp = $.extend(true, {}, dlgOptions)\r\n                                    printDlgOp.dialogId = \"_printDlg\";\r\n                                    printDlgOp.beforeClose = $.noop;\r\n                                    printDlgOp.url = dotpl.applyTpl(_self.template.printDialog, {\r\n                                        msg: message.printDoingMsg + '请稍后...'\r\n                                    });\r\n                                    printDlgOp.width = '600px';\r\n                                    printDlgOp.height = '200px';\r\n                                    msgDlg && $.openModalDialog(printDlgOp);\r\n                                    var printDlg = $(\"#\" + printDlgOp.dialogId);\r\n\r\n                                    $.when(_self.operate(op)).done(function (data) {\r\n                                        printDlg.find('.print-view-msg')\r\n                                            .removeClass(\"print-view-msg\")\r\n                                            .addClass(\"print-view-msg-success\")\r\n                                            .text(message.printSuccessMsg);\r\n                                        printDlg.fadeOut(2600, function () {\r\n                                            printDlg.closeDialog();\r\n                                        });\r\n                                        dfd.resolve.apply(dfd, arguments);\r\n                                    }).fail(function (data) {\r\n                                        dfd.resolve.apply(dfd, arguments);\r\n                                        printDlg.find('.print-view-msg')\r\n                                            .removeClass(\"print-view-msg\")\r\n                                            .addClass(\"print-view-msg-success\")\r\n                                            .text(message.printErrorMsg);\r\n                                    });\r\n                                    printCallBack();\r\n                                }\r\n                            },\r\n                            {\r\n                                id: 'btnClose',\r\n                                text: '关闭',\r\n                                click: function () {\r\n                                    var $dlg = $('#' + dlgOptions.dialogId);\r\n                                    $dlg.closeDialog();\r\n                                }\r\n                            }\r\n                        ],\r\n                        buttonsExt: [],\r\n                        buttonGen: function () {\r\n                            var $dlg = $('#' + dlgOptions.dialogId);\r\n                            var $right = $dlg.find('.dlg-box-head-right>div');\r\n                            var template = '<a id=\"${id}\" class=\"app-button hidden l-btn l-btn-large l-btn-plain\">\\\r\n                                        <span class=\"l-btn-left l-btn-icon-top\">\\\r\n                                            <span class=\"l-btn-text\">${text}</span>\\\r\n                                            <i class=\"l-btn-icon add48\">&nbsp;</i>\\\r\n                                        </span>\\\r\n                                    </a>';\r\n                            var buttons = this.buttons.concat(this.buttonsExt);\r\n                            $(buttons).each(function (index, btnOp) {\r\n                                var $button = $(dotpl.applyTpl(template, btnOp));\r\n                                $button.on('click', btnOp.click);\r\n                                btnOp.visible === false && $button.hide();\r\n                                $right.append($button);\r\n                            })\r\n                        },\r\n                        beforeClose: function () {\r\n                            $(document.body).css('overflow', bodyOverflow);\r\n                        }\r\n                    };\r\n                    if (isPreview) {\r\n                        html = _self.template.printPreViewDialog;\r\n                    } else {\r\n                        html = _self.template.printDialog;\r\n                        dlgOptions.height = '220px';\r\n                        dlgOptions.width = '600px';\r\n                    }\r\n                    $.extend(true, dlgOptions, dialogOptions);\r\n\r\n                    dlgOptions.url = $(html);\r\n                    if ($('#' + dlgOptions.dialogId).length) {\r\n                        $('#' + dlgOptions.dialogId).closeDialog();\r\n                    }\r\n                    msgDlg && $.openModalDialog(dlgOptions);\r\n                    dlgOptions.buttonGen();\r\n                    var $dlg = $('#' + dlgOptions.dialogId);\r\n                    var $content = $dlg.find('.dialog-content');\r\n                    var $msg = isPreview ? $dlg.find(\".pre-view-msg\") : $dlg.find(\".print-view-msg\");\r\n\r\n                    doPreView(op, index);\r\n\r\n                    function doPreView(options, index) {\r\n                        options.func = 'doPreview';\r\n                        var end = index + frequency;\r\n                        if (end > printLength) end = printLength;\r\n                        _self.setItem(options, 'PrintData', printData.slice(index, end));\r\n                        var curIndex = {\r\n                            index: end == 0 ? 1 : end,\r\n                            total: printLength == 0 ? 1 : printLength\r\n                        }\r\n                        index = end;\r\n                        _self.newOperation(options);\r\n                        $.when(_self.operate(options)).done(function (data) {\r\n                            //过程回调\r\n                            var processRs = processChange(data, index, printLength);\r\n                            var showMsg = \"(${index}/${total})\";\r\n                            showMsg = dotpl.applyTpl(showMsg, curIndex);\r\n                            if (isPreview) {\r\n                                printImg = printImg.concat(data.list);\r\n                                $(data.list).each(function (i, imgPath) {\r\n                                    var $img = $('<img style=\"display: block;margin: 100px auto;\" />');\r\n                                    $img.attr('data-src', data.url + '?fn=' + imgPath);\r\n                                    // $img.attr('data-src',data.url+'/'+imgPath);\r\n                                    $content.append($img)\r\n                                });\r\n                                $content.imgLazyLoad('img',\r\n                                    defImg,\r\n                                    function ($img) {\r\n                                        $img.addClass('print-img-loaded');\r\n                                        $img.attr('style', '');\r\n                                    }\r\n                                );\r\n                                showMsg = \"正在生成预览图片\" + showMsg;\r\n                            } else {\r\n                                showMsg = message.getDoingMsg() + showMsg;\r\n                            }\r\n                            if ($.type(processRs) !== 'undefined') {\r\n                                showMsg = processRs;\r\n                            }\r\n                            $msg.text(showMsg);\r\n                            //传输结束\r\n                            if (index == printLength) {\r\n\r\n                                if (isPreview) {\r\n                                    $dlg.find('#btnPrint').css('display', 'inline-block');\r\n                                    $msg.fadeOut(600, function () {\r\n                                        $msg.remove();\r\n                                    });\r\n                                } else {\r\n                                    setTimeout(function () {\r\n                                        $msg.removeClass(\"print-view-msg\")\r\n                                            .addClass(\"print-view-msg-success\").text(message.getSuccessMsg());\r\n                                        $dlg.fadeOut(2600, function () {\r\n                                            $dlg.closeDialog();\r\n                                        });\r\n                                    }, 800);\r\n                                }\r\n                                dfd.resolve.apply(dfd, arguments);\r\n                                return;\r\n                            }\r\n                            doPreView(options, index);\r\n                        }).fail(function () {\r\n                            dfd.reject.apply(dfd, arguments);\r\n                            if (!showForm) {\r\n\r\n                            } else {\r\n                                $msg.removeClass(\"print-view-msg\")\r\n                                    .addClass(\"print-view-msg-success\").text(message.getErrorMsg());\r\n                                $dlg.fadeOut(2600, function () {\r\n                                    $dlg.closeDialog();\r\n                                });\r\n                            }\r\n                        });\r\n                    }\r\n                })\r\n                .fail(function () {\r\n\r\n                });\r\n            return dfd;\r\n        },\r\n        /**\r\n         * @instance\r\n         * @memberOf bs-print\r\n         * @description 生成预览图片，图片路径为本地客户端为服务器\r\n         * @param {object} options\r\n         * @param {string} options.LoadReportURL 模板加载地址\r\n         * @param {object} options.PrintData 打印数据\r\n         * @param {object} options.PrintSet 打印设置\r\n         * @returns {object}\r\n         *\r\n         * @example\r\n         * var print = BsPrint.getInstance();\r\n         * print.doImage({\r\n         * \tLoadReportURL:'xxxx',\r\n         * \tPrintData:{...},\r\n         * \tPrintSet:{...}\r\n         * }).done(function(data){\r\n         * \t\t//TODO success\r\n         * }).fail(function(){\r\n         * \t\t//TODO error\r\n         * })\r\n         */\r\n        doImage: function () {\r\n            var _self = this;\r\n            var dfd = $.Deferred();\r\n            var op = _self._initArgs(arguments);\r\n            $.when(_self.initStateDefer).done(function () {\r\n                _self.setItem(op, 'ShowForm', false);\r\n                _self.setItem(op, 'PrintPreview', true);\r\n                var printData = _self.getItem(op, 'PrintData');\r\n                if (!$.isArray(printData)) {\r\n                    printData = [printData];\r\n                    _self.setItem(op, 'PrintData', printData);\r\n                }\r\n                op.func = 'doPreview';\r\n                _self.newOperation(op);\r\n                _self.operate(op).done(function () {\r\n                    dfd.resolveWith(op, arguments);\r\n                }).fail(function (arg) {\r\n                    dfd.rejectWith(op, arguments);\r\n                })\r\n            }).fail(function () {\r\n                dfd.reject();\r\n            });\r\n            return dfd;\r\n        },\r\n        getItem: function (options, key) {\r\n            return options.data[0][key];\r\n        },\r\n        setItem: function (options, key, val) {\r\n            return options.data[0][key] = val;\r\n        },\r\n        isFunction: function (fn) {\r\n            return $.isFunction(fn) ? fn : function () {\r\n            };\r\n        },\r\n        Statics: {\r\n            getDefInstance: function (op) {\r\n                var defOp = {\r\n                    initOptions: {\r\n                        Cookie: Config.cookies,\r\n                        HostUrl: $A.getHostUrl(),\r\n                        DownLoadUrl: 'undefined',\r\n                        QueryTempListUrl: 'undefined',\r\n                        QueryTempNameUrl: 'undefined'\r\n                    }\r\n                };\r\n                if ($.type(op) === 'undefined') {\r\n                    op = {};\r\n                }\r\n                $.extend(true, op, defOp);\r\n                if (!this.instance || this.instance.getInitState().state() === 'rejected') {\r\n                    this.instance = new BsPrint(op);\r\n                }\r\n                return this.instance;\r\n            },\r\n            /**\r\n             * @description 获取打印控件实例\r\n             * @static\r\n             * @memberOf bs-print\r\n             * @function getInstance\r\n             * @param {object} op\r\n             * @param {object} op.config dll配置\r\n             * @param {string} op.config.appId 应用Id(<span style=\"color:red\">必填</span>)\r\n             * @param {object} op.initOptions 初始化函数\r\n             * @param {string} op.initOptions.Cookie cookie\r\n             * @param {string} op.initOptions.HostUrl 主机地址\r\n             * @param {string} op.initOptions.DownLoadUrl 模板下载地址\r\n             * @param {string} op.initOptions.QueryTempListUrl 模板查询地址\r\n             * @param {string} op.initOptions.QueryTempNameUrl 模板查询地址\r\n             * @example\r\n             *         var instantce = BsPrint.getInstance({\r\n             *          config:{\r\n             *              appId:'123'\r\n             *          },\r\n             *          initOptions:{\r\n             *          \tCookie:_cookies,\r\n             *          \tHostUrl:$A.getHostUrl(),\r\n             *          \tDownLoadUrl:'xxxx/yyyy/download.do',\r\n             *          \tQueryTempListUrl:'xxxx/yyyy/queryList.do',\r\n             *          \tQueryTempNameUrl:'xxxx/yyyy/query.do'\r\n             *          }\r\n             *         });\r\n             */\r\n            getInstance: function (op) {\r\n                if (!this.instance || this.instance.getInitState().state() === 'rejected') {\r\n                    this.instance = new BsPrint(op);\r\n                }\r\n                return this.instance;\r\n            }\r\n        }\r\n    });\r\n    return BsPrint;\r\n});\n",
    "define('app/widgets/grid/app-grid-print',['app/core/app-class', 'app/core/app-jquery', 'app/core/app-core', \r\n\t\t'app/data/app-ajax', 'app/widgets/grid/app-grid-formatter',\r\n\t\t'bs-http-plugin/bs-print'],\r\n\t\tfunction(Class, $, App, AppAjax, Formatter, BSPrint) {\r\n\t'use strict';\r\n\t\r\n\tif(!$.grid){\r\n\t\t$.grid = {};\r\n\t}\r\n\t$.grid.getColumnFormatPattern = function(col){\r\n\t\tif(col.formatPattern){\r\n\t\t\treturn col.formatPattern;\r\n\t\t}\r\n\t\tvar format = col.format;\r\n\t\tif(format && format.charAt(0) == '[' && format.charAt(format.length-1) == ']'){\r\n\t\t\treturn format.substr(1, format.length-2);\r\n\t\t}\r\n\t\tif(col.printType && \r\n\t\t\t\tcol.printType.indexOf('Number') != -1){\r\n\t\t\tvar precision = parseInt(col.printType.substring('6'))\r\n\t\t\t\t,result = '#,##0';\r\n\t\t\tif(precision > 0){\r\n\t\t\t\tresult += '.'\r\n\t\t\t\tfor(var x = 0 ; x < precision; x++){\r\n\t\t\t\t\tresult += '0';\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn result;\r\n\t\t}\r\n\t\tif(col.formatter == 'thousandsFormatter'){\r\n\t\t\treturn '#,##0.00;;#';\r\n\t\t}\r\n\t\tif(col.formatter == 'thousand'){\r\n\t\t\treturn '#,##0.00';\r\n\t\t}\r\n\t\tif(col.formatter == '###,###(0)'){\r\n\t\t\treturn '#,##0;;#';\r\n\t\t}\r\n\t}\r\n\t\r\n\t//最大导出条数\r\n\tvar MAX_EXPORT_ROW_COUNT = 5000;\r\n\t/**\r\n\t * 导出网格的扩展方法\r\n\t */\r\n\tvar GridPrint = Class.create({\r\n\t\t/**\r\n\t\t * 打印\r\n\t\t * @param {PrintOption} [opts] 报表配置参数\r\n\t\t * @property {Object} [PrintOption] 报表配置参数\r\n\t\t * @property {String} [PrintOption.Name] 报表名称(导出文件名称)\r\n\t\t * @property {Object} [PrintOption.ReportDetail] 明细表格\r\n\t\t * @property {Boolean} [PrintOption.ReportDetail.PrintOnePage=true] 报表横向分页输出时，尽量将横向产生的页面组合在一页中\r\n\t\t * @property {Boolean} [PrintOption.ReportDetail.CellAdaptMethod=1] 单元格内容显示策略\r\n\t\t * <PRE>\r\n\t\t * 可选值\r\n\t\t * 1 缩小适应\r\n\t\t * 2 内容会被修剪\r\n\t\t * 3 内容换行显示\r\n\t\t * 4 自动宽度 \r\n\t\t * </PRE>\r\n\t\t * @property {Number} [PrintOption.ReportDetail.PrintAdaptMethod=8] 打印策略\r\n\t\t * <PRE>\r\n\t\t * 可选值\r\n\t\t * 1 在打印输出时，超出页面输出范围的列内容将被忽略掉，即不输出显示。\r\n\t\t * 2 在打印输出时，超出页面输出范围的列内容将另起新行输出显示。\r\n\t\t * 3 在打印输出时，根据列的宽度按比列将所有要输出的列的总宽度调整到页面输出区域的宽度。 \r\n\t\t * 4 在打印输出时，如果列的总宽度超出页面输出范围，与3相同，反之按设计时宽度输出。\r\n\t\t * 5 在打印输出时，超出页面输出范围的列内容将另起新页输出显示，按先从上到下的顺序输出。\r\n\t\t * 6 在打印输出时，超出页面输出范围的列内容将另起新页输出显示，按先从左到右的顺序输出。\r\n\t\t * 7 在打印输出时，超出页面输出范围的列内容将另起新页输出显示，且左边的固定列在每页中重复输出，按先从上到下的顺序输出。 \r\n\t\t * 8 在打印输出时，超出页面输出范围的列内容将另起新页输出显示，且左边的固定列在每页中重复输出，按先从左到右的顺序输出。 \r\n\t\t * </PRE>\r\n\t\t * @property {Object} [PrintOption.ReportDetail.FullBlank] 填充空白\r\n\t\t * @property {Enum} [PrintOption.ReportDetail.FullBlank.Method=0] 填充类型\r\n\t\t * <PRE>\r\n\t\t * 可选值\r\n\t\t * 0: 不填充\r\n\t\t * 1: 填充列\r\n\t\t * 2: 填充行\r\n\t\t * 3: 填充行列\r\n\t\t * </PRE>\r\n\t\t * @property {Number} [PrintOption.ReportDetail.FullBlank.Width=0] 填充列宽\r\n\t\t * <PRE>\r\n\t\t * 当填充列宽为0时，根据每页的最后一列列宽进行填充\r\n\t\t * </PRE>\r\n\t\t * @property {Object} [PrintOption.ReportDetail.RowNumber] 行号\r\n\t\t * @property {String} [PrintOption.ReportDetail.RowNumber.Title=序号] 标题\r\n\t\t * @property {String} [PrintOption.ReportDetail.RowNumber.SummaryText] 合计行文本\r\n\t\t * @property {String} [PrintOption.ReportDetail.HeaderBgColor] 表格头背景色\r\n\t\t * @property {String} [PrintOption.ReportDetail.FooterBgColor] 表格合计背景色\r\n\t\t * @property {Object} [PrintOption.PageHeader] 页眉\r\n\t\t * @property {Object} [PrintOption.PageHeader.Left] 左页眉\r\n\t\t * @property {String} [PrintOption.PageHeader.Left.Title] 左页眉文字\r\n\t\t * @property {Object} [PrintOption.PageHeader.Center] 中页眉\r\n\t\t * @property {String} [PrintOption.PageHeader.Center.Title] 中页眉文字\r\n\t\t * @property {Object} [PrintOption.PageHeader.Right] 右页眉\r\n\t\t * @property {String} [PrintOption.PageHeader.Right.Title] 右页眉文字\r\n\t\t * @property {Object} [PrintOption.PageFooter] 页脚\r\n\t\t * @property {Object} [PrintOption.PageFooter.Left] 左页脚\r\n\t\t * @property {String} [PrintOption.PageFooter.Left.Title] 左页脚文字\r\n\t\t * @property {Object} [PrintOption.PageFooter.Center] 中页脚\r\n\t\t * @property {String} [PrintOption.PageFooter.Center.Title] 中页脚文字\r\n\t\t * @property {Object} [PrintOption.PageFooter.Right] 右页脚\r\n\t\t * @property {String} [PrintOption.PageFooter.Right.Title] 右页脚文字\r\n\t\t * @property {Object} [PrintOption.ReportHeader] 报表标题\r\n\t\t * @property {Boolean} [PrintOption.ReportHeader.Repeat] 是否每页重复\r\n\t\t * @property {Object} [PrintOption.ReportHeader.MainTitle] 主标题\r\n\t\t * @property {String} [PrintOption.ReportHeader.MainTitle.Title] 主标题文本\r\n\t\t * @property {Array} [PrintOption.ReportHeader.SubTitles] 副标题集合\r\n\t\t * @property {SubTitle} [PrintOption.ReportHeader.SubTitles.SubTitle] 副标题\r\n\t\t * @property {Object} [PrintOption.ReportHeader.SubTitles.SubTitle.Left] 左标题\r\n\t\t * @property {String} [PrintOption.ReportHeader.SubTitles.SubTitle.Left.Title] 左标题文本\r\n\t\t * @property {Object} [PrintOption.ReportHeader.SubTitles.SubTitle.Center] 中标题\r\n\t\t * @property {String} [PrintOption.ReportHeader.SubTitles.SubTitle.Center.Title] 中标题文本\r\n\t\t * @property {Object} [PrintOption.ReportHeader.SubTitles.SubTitle.Right] 右标题\r\n\t\t * @property {String} [PrintOption.ReportHeader.SubTitles.SubTitle.Right.Title] 右标题文本\r\n\t\t * @property {Object} [PrintOption.ReportFooter] 报表尾标题\r\n\t\t * @property {Boolean} [PrintOption.ReportFooter.Repeat] 是否每页重复\r\n\t\t * @property {Array} [PrintOption.ReportFooter.SubTitles] 副标题集合\r\n\t\t * @property {SubTitle} [PrintOption.ReportFooter.SubTitles.SubTitle] 副标题\r\n\t\t * @property {Object} [PrintOption.ReportFooter.SubTitles.SubTitle.Left] 左标题\r\n\t\t * @property {String} [PrintOption.ReportFooter.SubTitles.SubTitle.Left.Title] 左标题文本\r\n\t\t * @property {Object} [PrintOption.ReportFooter.SubTitles.SubTitle.Center] 中标题\r\n\t\t * @property {String} [PrintOption.ReportFooter.SubTitles.SubTitle.Center.Title] 中标题文本\r\n\t\t * @property {Object} [PrintOption.ReportFooter.SubTitles.SubTitle.Right] 右标题\r\n\t\t * @property {String} [PrintOption.ReportFooter.SubTitles.SubTitle.Right.Title] 右标题文本\r\n\t\t * @param {PaperSet} [paperSet] 纸张设置\r\n\t\t * @property {PaperSet} [PaperSet] 纸张设置\r\n\t\t * @property {Enum} [PaperSet.Paper=A4] 纸张类型\r\n\t\t * <PRE>\r\n\t\t * 可选值：A3、A4、A5、B4、B5\r\n\t\t * </PRE>\r\n\t\t * @property {Enum} [PaperSet.Direction=纵向] 纸张方向\r\n\t\t * <PRE>\r\n\t\t * 可选值:纵向、横向\r\n\t\t * </PRE>\r\n\t\t * @property {Number} [PaperSet.MarginUp] 上边距（厘米）\r\n\t\t * @property {Number} [PaperSet.MarginDown] 下边距（厘米）\r\n\t\t * @property {Number} [PaperSet.MarginLeft] 左边距（厘米）\r\n\t\t * @property {Number} [PaperSet.MarginRight] 右边距（厘米）\r\n\t\t * @property {Number} [PaperSet.OffsetX] 横向偏移（厘米）\r\n\t\t * @property {Number} [PaperSet.OffsetY] 纵向偏移（厘米）\r\n\t\t * @param {Array} [rows] 打印表格内容行\r\n\t\t * @example $('#demo').grid('print');\r\n\t\t * @memberof grid-class\r\n\t\t * @instance\r\n\t\t */\r\n\t\tprint: function(opts, paperSet, rows){\r\n\t\t\texportGrid.call(this, opts, paperSet, 'Print', rows);\r\n\t\t},\r\n\t\t/**\r\n\t\t * 快速打印\r\n\t\t * @todo 按照默认打印设置进行打印，不弹出打印设置\r\n\t\t * @todo 参数请参照打印接口\r\n\t\t * @example $('#demo').grid('fastPrint');\r\n\t\t * @memberof grid-class\r\n\t\t * @instance\r\n\t\t */\r\n\t\tfastPrint: function(opts, paperSet){\r\n\t\t\texportGrid.call(this, opts, paperSet, 'FastPrint');\r\n\t\t},\r\n\t\t/**\r\n\t\t * 打印预览\r\n\t\t * @todo 参数请参照打印接口\r\n\t\t * @example $('#demo').grid('printPreview');\r\n\t\t * @memberof grid-class\r\n\t\t * @instance\r\n\t\t */\r\n\t\tprintPreview: function(opts, paperSet, rows){\r\n\t\t\texportGrid.call(this, opts, paperSet, 'Preview', rows);\r\n\t\t},\r\n\t\t/**\r\n\t\t * 导出excel\r\n\t\t * @todo 参数请参照打印接口\r\n\t\t * @example $('#demo').grid('exportExcel');\r\n\t\t * @memberof grid-class\r\n\t\t * @instance\r\n\t\t */\r\n\t\texportExcel: function(opts, paperSet){\r\n\t\t\texportGrid.call(this, opts, paperSet, 'Excel');\r\n\t\t},\r\n\t\t/**\r\n\t\t * 打印全部数据\r\n\t\t * @todo 参数请参照打印接口\r\n\t\t * @example $('#demo').grid('printAll');\r\n\t\t * @memberof grid-class\r\n\t\t * @instance\r\n\t\t */\r\n\t\tprintAll: function(opts, paperSet){\r\n\t\t\texportAll.call(this, opts, paperSet, 'Print');\r\n\t\t},\r\n\t\t/**\r\n\t\t * 快速全部打印\r\n\t\t * @todo 按照默认打印设置进行打印，不弹出打印设置\r\n\t\t * @todo 参数请参照打印接口\r\n\t\t * @example $('#demo').grid('fastPrint');\r\n\t\t * @memberof grid-class\r\n\t\t * @instance\r\n\t\t */\r\n\t\tfastPrintAll: function(opts, paperSet){\r\n\t\t\texportAll.call(this, opts, paperSet, 'FastPrint');\r\n\t\t},\r\n\t\t/**\r\n\t\t * 预览全部数据\r\n\t\t * @todo 参数请参照打印接口\r\n\t\t * @memberof grid-class\r\n\t\t * @instance\r\n\t\t */\r\n\t\tprintPreviewAll: function(opts, paperSet){\r\n\t\t\texportAll.call(this, opts, paperSet, 'Preview');\r\n\t\t},\r\n\t\t/**\r\n\t\t * 导出全部数据excel\r\n\t\t * @todo 参数请参照打印接口\r\n\t\t * @memberof grid-class\r\n\t\t * @instance\r\n\t\t */\r\n\t\texportAllExcel: function(opts, paperSet){\r\n\t\t\texportAll.call(this, opts, paperSet, 'Excel');\r\n\t\t},\r\n\t\t/**\r\n\t\t * 获取打印模型\r\n\t\t * @todo 参数请参照打印接口\r\n\t\t * @memberof grid-class\r\n\t\t * @instance\r\n\t\t */\r\n\t\tgetPrintModel: function(opts, rows){\r\n\t\t\treturn getPrintInfo.call(this, opts, rows)\r\n\t\t}\r\n\t});\r\n\tfunction exportAll(opts, paperSet, opType){\r\n\t\tif(isLocalExport.call(this)){\r\n\t\t\texportGrid.call(this, opts, paperSet, opType);\r\n\t\t}else{\r\n\t\t\tvar that = this\r\n\t\t\t\t,totalRows = this.data[this.setting.jsonReader.total];\r\n\t\t\tif(totalRows >= MAX_EXPORT_ROW_COUNT){\r\n\t\t\t\t$messager.confirm('当前内容总数[<strong style=\"color:red;\">' + totalRows \r\n\t\t\t\t\t\t+ '</strong>]超过[' + MAX_EXPORT_ROW_COUNT + ']条，</br>数据处理需要较多时间，确认继续？',{\r\n\t\t\t\t\tokCall: function(){\r\n\t\t\t\t\t\tif(!opts){\r\n\t\t\t\t\t\t\topts = {};\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif(!opts.ReportDetail){\r\n\t\t\t\t\t\t\topts.ReportDetail = {};\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif(!opts.ReportDetail.DetailLoader){\r\n\t\t\t\t\t\t\topts.ReportDetail.DetailLoader = {\r\n\t\t\t\t\t\t\t\tLimitRowNum: totalRows\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\topts.ReportDetail.DetailLoader.LimitRowNum = totalRows;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\texportGrid.call(that, opts, paperSet, opType, true);\r\n\t\t\t\t\t}}\r\n\t\t\t\t);\r\n\t\t\t}else{\r\n\t\t\t\texportGrid.call(this, opts, paperSet, opType, true);\r\n\t\t\t}\r\n\t\t}\r\n\t\t/**\r\n\t\t * 是否为本地打印\r\n\t\t */\r\n\t\tfunction isLocalExport(){\r\n\t\t\tif(this.setting.pager == 'none'){\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\t\t\tif(this.getCurrentPageSize() >= this.data[this.setting.jsonReader.total]){\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\t\t\treturn false;\r\n\t\t}\r\n\t}\r\n\t/**\r\n\t * 打印数据\r\n\t */\r\n\tfunction exportGrid(opts, paperSet, opType, allData){\r\n\t\tvar printData = getPrintInfo.call(this, opts, allData);\r\n\t\tpaperSet = applyDefaultPrintPaperSet(printData, paperSet);\r\n\t\tif(!printData.PageFooter){\r\n\t\t\tprintData.PageFooter = {Center:{Title: '第[#SystemVar(PageNumber)#]页 共[#SystemVar(PageCount)#]页'}};\r\n\t\t}\r\n\t\tif(paperSet){\r\n\t\t\tdoExportGrid.call(this, printData, paperSet, opType, allData)\r\n\t\t}else{\r\n\t\t\tvar that = this\r\n\t\t\t\t,printSetDfd = BSPrint.getDefInstance().getPrintSet({ModuleId:'00000000'});\r\n\t\t\t$A.showWaitScreen('正在获取打印设置...');\r\n\t\t\t$.when(printSetDfd).done(function (printSet) {\r\n\t\t\t\tdoExportGrid.call(that, printData, printSet, opType, allData);\r\n\t\t\t}).fail(function(){\r\n\t\t\t\t$a.hideWaitScreen();\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\t\r\n\tfunction doExportGrid(printData, printSet, opType, allData){\r\n\t\tvar data = {\r\n\t\t\tPrintData: printData,\r\n            PrintSet: printSet\r\n        };\r\n\t\tif(opType == 'FastPrint'){\r\n\t\t\t\r\n\t\t}else if(opType == 'Print'){\r\n\t\t\tdata.ShowPrintSet = true;\r\n\t\t}else if(opType == 'Preview'){\r\n\t\t\tdata.PrintPreview = true;\r\n\t\t}else{\r\n\t\t\tdata.ExportFile = opType;\r\n\t\t}\r\n\t\t$A.showWaitScreen('正在打印中...');\r\n\t\tBSPrint.getDefInstance().doCustomPrint(data).done(function () {\r\n\t\t\t$a.hideWaitScreen();\r\n        }).fail(function (e) {\r\n        \t$A.hideWaitScreen();\r\n        \tif(e && e.code == 'timeout'){\r\n        \t\treturn;\r\n        \t}\r\n        \t$A.messager.error('打印插件调用异常');\r\n        \tif(window.console){\r\n        \t\twindow.console.log('打印插件调用异常', arguments); \r\n        \t}\r\n        });\r\n\t}\r\n\r\n\tvar ALIGN = {\r\n\t\tleft: 4,\r\n\t\tcenter: 5,\r\n\t\tright: 6\r\n\t};\r\n\tvar ALIGN_UPPER = {\r\n\t\tleft: 'Left',\r\n\t\tcenter: 'Center',\r\n\t\tright: 'Right'\r\n\t};\r\n\tvar SUMMARY = {\r\n\t\tsum: 1,\r\n\t\tavg: 2,\r\n\t\tcount: 3,\r\n\t\tmin: 4,\r\n\t\tmax: 5\r\n\t};\r\n\t\r\n\tfunction getPrintInfo(opts, allData){\r\n\t\tvar result = {};\r\n\t\tresult.ReportDetail = getReportDetail.call(this, allData);\r\n\t\t$.extend(true, result, opts);\r\n\t\treturn result;\r\n\t};\r\n\tfunction getReportDetail(allData){\r\n\t\tvar result = {};\r\n\t\tresult.DetailHeaders = getGridColumns.call(this);\r\n\t\tresult.FixCols = getFrozenCount(result.DetailHeaders);\r\n\t\tif(this.setting.rownumbers != 'none'){\r\n\t\t\tresult.FixCols++;\r\n\t\t}\r\n\t\tif($.isArray(allData)){\r\n\t\t\tresult.DetailDatas = getGridData.call(this, allData);\r\n\t\t}else if(allData \r\n\t\t\t\t&& this.data[this.setting.jsonReader.total] > 0){\r\n\t\t\tresult.DetailLoader = {\r\n\t\t\t\tUrl: 'http://'+window.location.host+window._contextPath +'/' +this.setting.url,\r\n\t\t\t\tQueryParam: JSON.stringify(this._getQueryParam()),\r\n\t\t\t\tJsonReader: {\r\n\t\t\t\t\tTotal: 'totalRecords',\r\n\t\t\t\t\tRows: 'data',\r\n\t\t\t\t\tFooter: 'footer'\r\n\t\t\t\t}\r\n\t\t\t};\r\n\t\t}else{\r\n\t\t\tresult.DetailDatas = getGridData.call(this);\r\n\t\t}\r\n\t\tresult.HAlign = this.setting.halign;\r\n\t\tresult.Nowrap = true;\r\n\t\tif(this.setting.rownumbers == 'normal'){\r\n\t\t\tresult.RowNumber = {\r\n\t\t\t\tSummaryText: ''\r\n\t\t\t};\r\n\t\t}\r\n    \treturn result;\r\n    \tfunction getGridColumns(){\r\n    \t\tvar cols = this.getColumnTree();\r\n    \t\treturn convert(cols);\r\n    \t\tfunction convert(cols){\r\n    \t\t\tif(!cols || cols.length == 0){\r\n    \t\t\t\treturn;\r\n    \t\t\t}\r\n    \t\t\tvar result = [];\r\n    \t\t\tfor(var i = 0; i < cols.length; i++){\r\n    \t\t\t\tvar temp = {}\r\n    \t\t\t\t\t,col = cols[i];\r\n    \t\t\t\tif(col.sysCol || col.hidden){\r\n    \t\t\t\t\tcontinue;\r\n    \t\t\t\t}\r\n    \t\t\t\tresult.push(temp);\r\n    \t\t\t\ttemp.Name = col.field;\r\n    \t\t\t\ttemp.Title = col.title;\r\n\t\t\t\t\ttemp.Align = ALIGN[col.align];\r\n    \t\t\t\ttemp.Frozen = col.viewPos;\r\n    \t\t\t\tif(col.printWidth){\r\n\t\t\t\t\t\ttemp.Width = col.printWidth/10;\r\n    \t\t\t\t}\r\n    \t\t\t\tvar format = $.grid.getColumnFormatPattern(col);\r\n    \t\t\t\tif(format){\r\n    \t\t\t\t\ttemp.Format = format;\r\n    \t\t\t\t\ttemp.DataType = 'Number';\r\n    \t\t\t\t}\r\n    \t\t\t\tif(col.summary){\r\n    \t\t\t\t\tif(col.summary.text){\r\n    \t\t\t\t\t\ttemp.Summary = {\r\n    \t\t\t\t\t\t\tText: col.summary.text\r\n    \t\t\t\t\t\t};\r\n    \t\t\t\t\t}else{\r\n    \t\t\t\t\t\ttemp.Summary = {\r\n    \t\t\t\t\t\t\tFunction: SUMMARY[col.summary.type]\r\n    \t\t\t\t\t\t};\r\n    \t\t\t\t\t}\r\n    \t\t\t\t}\r\n    \t\t\t\tif(col.children){\r\n    \t\t\t\t\ttemp.SubHeaders = convert(col.children);\r\n    \t\t\t\t\ttemp.Name = $a.uuid();\r\n    \t\t\t\t}\r\n    \t\t\t}\r\n    \t\t\treturn result;\r\n    \t\t}\r\n    \t}\r\n    \tfunction getFrozenCount(cols){\r\n    \t\tvar result = 0;\r\n    \t\tfor(var i = 0; i < cols.length; i++){\r\n    \t\t\tvar col = cols[i];\r\n    \t\t\tif(col.SubHeaders){\r\n    \t\t\t\tresult += getFrozenCount(col.SubHeaders)\r\n    \t\t\t}else if(col.Frozen == 'left'){\r\n    \t\t\t\tresult++;\r\n    \t\t\t}\r\n    \t\t\tdelete col.Frozen;\r\n    \t\t}\r\n    \t\treturn result;\r\n    \t}\r\n    \tfunction getGridData(rows){\r\n    \t\tif(!rows){\r\n    \t\t\trows = this.data[this.setting.jsonReader.rows];\r\n    \t\t}\r\n    \t\treturn formatterData.call(this, rows);\r\n    \t\tfunction formatterData(data){\r\n    \t\t\tvar fieldColumns = this._fieldColumns\r\n    \t\t\t\t,formatterFields = {}\r\n    \t\t\t\t,result = [];\r\n    \t\t\tfor(var field in fieldColumns){\r\n    \t\t\t\tvar col = fieldColumns[field]\r\n    \t\t\t\t\t,formatter = col.formatter; \r\n    \t\t\t\tif(formatter){\r\n    \t\t\t\t\tif(col.printType.indexOf('Number') != -1){\r\n    \t\t\t\t\t\tcontinue;\r\n    \t\t\t\t\t}\r\n    \t\t\t\t\tif(col.template){\r\n    \t\t\t\t\t\tformatterFields[field] = col.template;\r\n    \t\t\t\t\t\tcontinue;\r\n    \t\t\t\t\t}\r\n    \t\t\t\t\tif(!$.isFunction(formatter)){\r\n    \t\t\t\t\t\tformatter = Formatter.get(col.formatter);\r\n    \t\t\t\t\t}\r\n    \t\t\t\t\tif($.isFunction(formatter)){\r\n    \t\t\t\t\t\tformatterFields[field] = formatter;\r\n    \t\t\t\t\t}\r\n    \t\t\t\t}\r\n    \t\t\t}\r\n    \t\t\tfor(var i = 0; i < data.length; i++){\r\n    \t\t\t\tvar row = $.extend({}, data[i]);\r\n    \t\t\t\tdelete row.__rowId;\r\n    \t\t\t\tresult.push(row);\r\n    \t\t\t\tfor(var field in formatterFields){\r\n    \t\t\t\t\tif($.isFunction(formatterFields[field])){\r\n    \t\t\t\t\t\tvar text = formatterFields[field](row[field], row, i, fieldColumns[field]);\r\n    \t\t\t\t\t\trow[field] = getPrintText(text);\r\n    \t\t\t\t\t}else{\r\n    \t\t\t\t\t\trow[field] = formatterFields[field].apply(row);\r\n    \t\t\t\t\t}\r\n    \t\t\t\t}\r\n    \t\t\t}\r\n    \t\t\treturn result;\r\n    \t\t\tfunction getPrintText(str){\r\n    \t\t\t\tvar $t = $('<span>'+str+'</span>')\r\n\t\t\t\t\t\t,children = $t.children();\r\n\t\t\t\t\tif(children.length >= 1){\r\n\t\t\t\t\t\treturn children.attr('printText') || children.attr('title') || children.text();\r\n\t\t\t\t\t}\r\n    \t\t\t\treturn str;\r\n    \t\t\t}\r\n    \t\t}\r\n    \t}\r\n\t};\r\n\r\n\tfunction applyDefaultPrintPaperSet(printData, paperSet){\r\n\t\tvar defaults = null;\r\n\t\tif(!$.isFunction($.getDefaultPrintPaperSet)){\r\n\t\t\treturn paperSet;\r\n\t\t}\r\n\t\tdefaults = $.getDefaultPrintPaperSet(printData);\r\n\t\tif(!defaults){\r\n\t\t\treturn paperSet;\r\n\t\t}\r\n\t\tif(!paperSet){\r\n\t\t\tpaperSet = {};\r\n\t\t}\r\n\t\tif(!paperSet.Pager){\r\n\t\t\tpaperSet.Pager = defaults.Pager;\r\n\t\t}\r\n\t\tif(!paperSet.Direction){\r\n\t\t\tpaperSet.Direction = defaults.Direction;\r\n\t\t}\r\n\t\tif(paperSet.MarginUp == undefined){\r\n\t\t\tif(!isNaN(defaults.MarginUp)){\r\n\t\t\t\tpaperSet.MarginUp = defaults.MarginUp;\r\n\t\t\t}\r\n\t\t}\r\n\t\tif(paperSet.MarginDown == undefined){\r\n\t\t\tif(!isNaN(defaults.MarginDown)){\r\n\t\t\t\tpaperSet.MarginDown = defaults.MarginDown;\r\n\t\t\t}\r\n\t\t}\r\n\t\tif(paperSet.MarginLeft == undefined){\r\n\t\t\tif(!isNaN(defaults.MarginLeft)){\r\n\t\t\t\tpaperSet.MarginLeft = defaults.MarginLeft;\r\n\t\t\t}\r\n\t\t}\r\n\t\tif(paperSet.MarginRight == undefined){\r\n\t\t\tif(!isNaN(defaults.MarginRight)){\r\n\t\t\t\tpaperSet.MarginRight = defaults.MarginRight;\r\n\t\t\t}\r\n\t\t}\r\n\t\tif(paperSet.OffsetX == undefined){\r\n\t\t\tif(!isNaN(defaults.OffsetX)){\r\n\t\t\t\tpaperSet.OffsetX = defaults.OffsetX;\r\n\t\t\t}\r\n\t\t}\r\n\t\tif(paperSet.OffsetY == undefined){\r\n\t\t\tif(!isNaN(defaults.OffsetY)){\r\n\t\t\t\tpaperSet.OffsetY = defaults.OffsetY;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn paperSet;\r\n\t}\r\n\treturn GridPrint;\r\n});\n",
    "define('app/widgets/grid/app-grid-sort',['app/core/app-class', 'app/core/app-jquery', 'app/core/app-core', \r\n\t'app/data/app-ajax'], function(Class, $, App, AppAjax) {\r\n\t\r\n\t'use strict';\r\n\t\r\n\t/**\r\n\t * 网格排序\r\n\t */\r\n\tvar GridSort = Class.create({\r\n\t\t/**\r\n\t\t * 根据列的排序信息初始化排序功能\r\n\t\t * @param col\r\n\t\t * @param $col\r\n\t\t */\r\n\t\t _appendSortable: function(col, $col){\r\n\t\t \tif(!col.sortable || (col.colspan > 1)){\r\n\t\t \t\treturn;\r\n\t\t \t}\r\n\t\t \tvar $sort = $('<span class=\"grid-header-sort\"></span>')\r\n\t\t\t\t,that = this;\r\n\t\t\t$sort.appendTo($col.find('>div'));\r\n\t\t\t$col.css('cursor','pointer');\r\n\t\t\t$col.on('click.grid.api', function(){\r\n\t\t\t\tvar $this = $(this)\r\n\t\t\t\t\t,cid = $this.attr('_cid')\r\n\t\t\t\t\t,col = that._column[cid]\r\n\t\t\t\t\t,order = ''\r\n\t\t\t\t\t,nextOrder = '';\r\n\t\t\t\tif($this.hasClass('asc')){\r\n\t\t\t\t\torder = 'asc';\r\n\t\t\t\t\tnextOrder = 'desc';\r\n\t\t\t\t}else if($this.hasClass('desc')){\r\n\t\t\t\t\torder = 'desc';\r\n\t\t\t\t\tnextOrder = '';\r\n\t\t\t\t}else{\r\n\t\t\t\t\torder = '';\r\n\t\t\t\t\tnextOrder = 'asc';\r\n\t\t\t\t}\r\n\t\t\t\t/**\r\n\t\t\t\t * 排序前事件\r\n\t\t\t\t * <PRE>\r\n\t\t\t\t * \torder: asc 升序， desc降序, 空-不排序\r\n\t\t\t\t * </PRE>\r\n\t\t\t\t * @event grid-class#beforeSortColumn\r\n\t\t\t\t * @param {String} field 字段\r\n\t\t\t\t * @param {String} order 方向\r\n\t\t\t\t * @returns {Boolean} 返回false 取消排序\r\n\t\t\t\t */\r\n\t\t\t\tif(that.trigger('beforeSortColumn', col.field, nextOrder) === false){\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tnextOrder = doSort.call(that, col, nextOrder);\r\n\t\t\t\t$this.removeClass(order);\r\n\t\t\t\t$this.addClass(nextOrder);\r\n\t\t\t});\r\n\t\t},\r\n\t\t/**\r\n\t\t * 初始化排序信息\r\n\t\t */\r\n\t\t_initSort: function(){\r\n\t\t\tinitSort.call(this);\r\n\t\t\tvar data = this.setting.data;\r\n\t\t\tif(this._sort.length > 0 && data){\r\n\t\t\t\tvar rows = null;\r\n\t\t\t\tif($.isArray(data)){\r\n\t\t\t\t\trows = data;\r\n\t\t\t\t}else{\r\n\t\t\t\t\trows = data[this.setting.jsonReader.rows];\r\n\t\t\t\t}\r\n\t\t\t\tsortData.call(this, rows);\r\n\t\t\t}\r\n\t\t},\r\n\t\t/**\r\n\t\t * 获取当前排序方式\r\n\t\t * @returns {Array<Object>} result 设置查询参数\r\n\t\t * @returns {String} result.field 字段\r\n\t\t * @returns {String} result.order 方向\r\n\t\t * @example $('#demo').grid('getCurrentSort');\r\n\t\t * @memberof grid-class\r\n\t\t * @instance\r\n\t\t */\r\n\t\tgetCurrentSort: function(){\r\n\t\t\tvar orders = this._sort\r\n\t\t\t\t,result = [];\r\n\t\t\tif(orders.length == 0){\r\n\t\t\t\treturn result;\r\n\t\t\t}\r\n\t\t\tfor(var i = 0; i < orders.length; i++){\r\n\t\t\t\tif(orders[i].order){\r\n\t\t\t\t\tresult.push({field: orders[i].col.field, order: orders[i].order});\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn result;\r\n\t\t},\r\n\t\t/**\r\n\t\t * 如果当前表格存在排序设置 则根据排序设置进行数据排序\r\n\t\t */\r\n\t\t_sortData: function(){\r\n\t\t\tif(this.setting.remoteSort){\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tvar rows = this.getRows();\r\n\t\t\tif(!rows || rows.length == 0){\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tdelete this._oriRows;\r\n\t\t\tif(this._sort.length > 0){\r\n\t\t\t\tsortData.call(this, rows);\r\n\t\t\t}\r\n\t\t}\r\n\t});\r\n\t/**\r\n\t * 初始化排序信息\r\n\t */\r\n\tfunction initSort(){\r\n\t\tvar sort = this.setting.sort;\t\t\t\r\n\t\tif($.isArray(sort)){\r\n\t\t\tvar _sort = []\r\n\t\t\t\t,that = this;\r\n\t\t\t$(sort).each(function(){\r\n\t\t\t\tvar col = that._fieldColumns[this.field]\r\n\t\t\t\t\t,$col = that.$tableHeader.find('[_cid=' + col._cid + ']');\r\n\t\t\t\tif($col.length == 1){\r\n\t\t\t\t\t_sort.push({col: col, order: this.order});\r\n\t\t\t\t\t$col.addClass(this.order);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\tthis._sort = _sort;\r\n\t\t}else{\r\n\t\t\tthis._sort = [];\r\n\t\t}\r\n\t}\r\n\t/**\r\n\t * 根据传入的列和排序方式进行排序\r\n\t * @param col 要排序的列\r\n\t * @param order 排序方式\r\n\t */\r\n\tfunction doSort(col, order){\r\n\t\torder = setSort.call(this, col, order);\r\n\t\tif(this.setting.remoteSort){\r\n\t\t\tdoRemoteSort.call(this);\r\n\t\t}else{\r\n\t\t\tdoLocalSort.call(this);\r\n\t\t}\r\n\t\treturn order;\r\n\t}\r\n\t/**\r\n\t * 设置当前排序参数\r\n\t */\r\n\tfunction setSort(col, order){\r\n\t\tvar orders = this._sort;\r\n\t\tif(orders.length == 1 && order == ''){\r\n\t\t\torder = 'asc';\r\n\t\t}\r\n\t\tif(this.setting.multiSort){\r\n\t\t\tvar append = true;\r\n\t\t\tfor ( var i = 0; i < orders.length; i++) {\r\n\t\t\t\tif(orders[i].col == col){\r\n\t\t\t\t\torders.splice(i, 1);\r\n\t\t\t\t\tif(order){\r\n\t\t\t\t\t\torders.push({col:col, order:order});\r\n\t\t\t\t\t}\r\n\t\t\t\t\tappend = false;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif(append){\r\n\t\t\t\torders.push({col:col, order:order});\r\n\t\t\t}\r\n\t\t}else{\r\n\t\t\tthis._sort = [{col:col, order:order}];\r\n\t\t\tthis.$tableHeader.find('td.asc').removeClass('asc');\r\n\t\t\tthis.$tableHeader.find('td.desc').removeClass('desc');\r\n\t\t}\r\n\t\treturn order;\r\n\t}\r\n\t/**\r\n\t * 远程排序\r\n\t */\r\n\tfunction doRemoteSort(){\r\n\t\tvar that = this;\r\n\t\tthis._ajax(function(data){\r\n\t\t\tthat._loadPagers(1, data[that.setting.jsonReader.total]);\r\n\t\t\tthat._loadData(data, 1);\r\n\t\t\t/**\r\n\t\t\t * 排序完成事件\r\n\t\t\t * @event grid-class#onSortColumn\r\n\t\t\t */\r\n\t\t\tthat.trigger('onSortColumn');\r\n\t\t});\r\n\t}\r\n\t/**\r\n\t * 本地排序\r\n\t */\r\n\tfunction doLocalSort(){\r\n\t\tif(this._sort.length > 0){\r\n\t\t\tsortData.call(this, this.getRows());\r\n\t\t}else{\r\n\t\t\tthis._setRows(this._oriRows.slice(0));\r\n\t\t}\r\n\t\tthis._rownumbers = this._rownumbers - this.getRows().length;\r\n        this._loadBody(this.getRows(), this._rownumbers);\r\n        if(this.$yProxyScroll){\r\n\t        this.$yProxyScroll.scrollTop(0);\r\n        }\r\n        this._checkSummary();\r\n\t\tthis.trigger('onSortColumn');\r\n\t}\r\n\t/**\r\n\t * 将数据进行排序 并缓存原数据\r\n\t */\r\n\tfunction sortData(rows){\r\n\t\tif(!this._oriRows){\r\n\t\t\tthis._oriRows = rows.slice(0);\r\n\t\t}\r\n\t\trows.sort($.proxy(sortBySetting, this));\r\n\t}\r\n\tfunction sortBySetting(a, b){\r\n\t\treturn getComparator.call(this, a, b, this._sort, 0);\r\n\t\tfunction getComparator(a, b, orders, i){\r\n\t\t\tvar t = orders[i];\r\n\t\t\tif(!t){\r\n\t\t\t\treturn 0;\r\n\t\t\t}\r\n\t\t\tvar col = t.col\r\n\t\t\t\t,order = t.order\r\n\t\t\t\t,val = 0;\r\n\t\t\t\ti++;\r\n\t\t\tif(col){\r\n\t\t\t\tif($.isFunction(col.sorter)){\r\n\t\t\t\t\tval= col.sorter(a, b);\r\n\t\t\t\t}else{\r\n\t\t\t\t\tvar field = col.field;\r\n\t\t\t\t\tvar x = a[field]\r\n\t\t\t\t\t\t,y = b[field];\r\n\t\t\t\t\tif(!isNaN(x) && !isNaN(y)){\r\n\t\t\t\t\t\tx = parseFloat(x);\r\n\t\t\t\t\t\ty = parseFloat(y);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif(col.printType && col.printType.indexOf('Number') >= 0){\r\n\t\t\t\t\t\tif(isNaN(x)&&isNaN(y)){\r\n\t\t\t\t\t\t\treturn 0;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif(isNaN(x)){\r\n\t\t\t\t\t\t\treturn -1;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif(isNaN(y)){\r\n\t\t\t\t\t\t\treturn 1;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif(x > y){\r\n\t\t\t\t\t\tval = 1;\r\n\t\t\t\t\t}else if(x == y){\r\n\t\t\t\t\t\tval = 0;\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\tval = -1;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tif(order == 'desc'){\r\n\t\t\t\t\tval = -val;\r\n\t\t\t\t}\r\n\t\t\t\tif(val == 0){\r\n\t\t\t\t\treturn getComparator.call(this, a, b, orders, i);\r\n\t\t\t\t}else{\r\n\t\t\t\t\treturn val;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn val;\r\n\t\t}\r\n\t}\r\n\treturn GridSort;\r\n});\n",
    "define('app/widgets/grid/app-grid-summary',['app/core/app-class', 'app/core/app-jquery', 'app/core/app-core', \r\n\t'app/data/app-ajax'], function(Class, $, App, AppAjax) {\r\n\t\r\n\t'use strict';\r\n\t\r\n\t/**\r\n\t * 网格数据本地小计\r\n\t */\r\n\tvar GridSummary = Class.create({\r\n\t\t/**\r\n         * 输出合计行\r\n         */\r\n        _appendSummary: function(){\r\n           this._appendDefinedSummary();\r\n           this._appendCustomSummary();\r\n        },\r\n        /**\r\n         * 输出预定义合计行\r\n         */\r\n        _appendDefinedSummary: function(){\r\n            if(this._sumCols.length == 0){\r\n                return;\r\n            }\r\n            var rows = this.getRows();\r\n            this.summaryRow = this._summary(rows);\r\n            if(this.summaryRow){\r\n                this._appendFooter([this.summaryRow]);\r\n            }\r\n        },\r\n        /**\r\n         * 输出自定义合计栏\r\n         */\r\n        _appendCustomSummary: function(){\r\n            var s = this.setting;\r\n            if(!s.summary){\r\n                return;\r\n            }\r\n            if(!s.summary._template){\r\n                return;\r\n            }\r\n            var summaryData = null;\r\n            if(s.summary.method){\r\n                summaryData = s.summary.method(this.getData());\r\n            }else{\r\n                summaryData = this.getData();\r\n            }\r\n            var temp = s.summary._template\r\n                ,html = temp.apply(summaryData);\r\n            this.$tableFooterCustom.append(html);\r\n            this.$tableFooter.css('display', 'block');\r\n            this._fixHeight();\r\n            this._footerFollow();\r\n        },\r\n        /**\r\n         * 计算合计值\r\n         */\r\n        _summary: function(rows){\r\n            var cols = this._sumCols;\r\n            if(cols.length == 0){\r\n            \treturn null;\r\n            }\r\n            var result = {};\r\n            if(rows.length > 0){\r\n                for(var i = 0; i < rows.length; i++){\r\n                    for(var j = 0; j < cols.length; j++){\r\n                        summaryColumn(result, cols[j], rows[i]);\r\n                    }\r\n                }\r\n            }else{\r\n                for(var j = 0 ; j < cols.length; j++){\r\n                    var col = cols[j],\r\n                        colSumOpt = col.summary;\r\n                    if(!colSumOpt){\r\n                        continue;\r\n                    }\r\n                    if(colSumOpt.text){\r\n                        result[col.field] = colSumOpt.text;\r\n                    }else{\r\n                        result[col.field] = 0;\r\n                    }\r\n                }\r\n            }\r\n            return result;\r\n        }\r\n\t});\r\n\treturn GridSummary;\r\n\t\r\n\t/**\r\n     * 合计值计算\r\n     * @param col\r\n     * @param row\r\n     */\r\n    function summaryColumn(summaryRow, col, row){\r\n        if(!col.summary){\r\n            return;\r\n        }\r\n        var val = row[col.field];\r\n        if(!val){\r\n            val = 0;\r\n        }\r\n        summaryTheValue(summaryRow, col.summary, col.field, parseFloat(val));\r\n    }\r\n    /**\r\n     * 累加合计值\r\n     * @param summary 汇总对象\r\n     * @param type 汇总类型\r\n     * @param field 汇总的字段\r\n     * @param val 被汇总的值\r\n     */\r\n    function summaryTheValue(summaryRow, summaryOpt, field, val){\r\n        if(summaryOpt.text){\r\n            summaryRow[field] = summaryOpt.text;\r\n            return;\r\n        }\r\n        if(!val){\r\n            val = 0;\r\n        }\r\n        switch(summaryOpt.type) {\r\n            case 'sum' :\r\n                if(summaryRow[field] == undefined){\r\n                    summaryRow[field] = val;\r\n                }else{\r\n                    summaryRow[field] = sum(summaryRow[field], val);\r\n                }\r\n                break;\r\n            case 'avg' :\r\n                if(summaryRow[field] == undefined){\r\n                    summaryRow['__'+field] = val;\r\n                    summaryRow['__count'+field] = 1;\r\n                }else{\r\n                    summaryRow['__'+field] = sum(summaryRow['__'+field], val);\r\n                    summaryRow['__count'+field]++;\r\n                }\r\n                summaryRow[field] = summaryRow['__'+field]/summaryRow['__count'+field];\r\n                break;\r\n            case 'min' :\r\n                if(summaryRow[field] == undefined){\r\n                    summaryRow[field] = val;\r\n                }else if(val < summaryRow[field]){\r\n                    summaryRow[field] = val;\r\n                }\r\n                break;\r\n            case 'max' :\r\n                if(summaryRow[field] == undefined){\r\n                    summaryRow[field] = val;\r\n                }else if(val > summaryRow[field]){\r\n                    summaryRow[field] = val;\r\n                }\r\n                break;\r\n            case 'count' :\r\n                if(summaryRow[field] == undefined){\r\n                    summaryRow[field] = 1;\r\n                }else{\r\n                    summaryRow[field]++;\r\n                }\r\n                break;\r\n            default:\r\n        }\r\n    }\r\n    /**\r\n     * 解决js浮点数运算不精确的问题\r\n     * 原理 放大倍数为整数后 得出结果在相除\r\n     */\r\n\tfunction sum(arg1,arg2){\r\n\t\tvar r1,r2,m;\r\n\t\ttry{r1 = arg1.toString().split(\".\")[1].length}catch(e){r1 = 0}\r\n \t\ttry{r2 = arg2.toString().split(\".\")[1].length}catch(e){r2 = 0}\r\n \t\tm = Math.pow(10, Math.max(r1, r2));\r\n \t\treturn ( Math.round(arg1*m) + Math.round(arg2*m) ) / m;\r\n\t}\r\n});\n",
    "define('app/widgets/grid/app-grid-ext',['app/core/app-class', 'app/core/app-jquery', \r\n        'app/core/app-core'], function(Class, $, App) {\r\n\r\n    'use strict';\r\n    var cellBorderWidth = 1;\r\n    /**\r\n     * 网格扩展\r\n     * 1、表格列根据内容自适应\r\n     * 2、根据勾选自动计算 合计值\r\n     */\r\n    var GridExt = Class.create({\r\n        _fitWordColumn: function(){\r\n            if(this.setting.fitColumns != 'Content'){\r\n                return;\r\n            }\r\n            var fontSize = this.$tableBodyMain.css('font-size')\r\n                ,fieldColumns = this._fieldColumns;\r\n            var fields = getFields(fieldColumns);\r\n            for(var field in fields){\r\n                var colTexts = this.$table.find('[field=' + field + ']');\r\n                colTexts.each(function(){\r\n                    var text = $(this).text();\r\n                    if(text){\r\n                        var width = getWidth(text, fontSize);\r\n                        if(width > fields[field]){\r\n                            fields[field] = width;\r\n                        }\r\n                    }\r\n                });\r\n            }\r\n            for(var field in fields){\r\n                var $td = this.$tableHeader.find('td[field=\"' + field + '\"]')\r\n                    ,oriWidth = $td.outerWidth()\r\n                    ,diff = fields[field] - oriWidth + 20;\r\n                var cid = $td.attr('_cid');\r\n                var tdWidth = $td.outerWidth() - cellBorderWidth + diff;\r\n                this.$table.find('td[_cid=' + cid + ']>div:not(.app-wrapper)').css('width', tdWidth);\r\n                this._column[cid].width = tdWidth;\r\n            }\r\n            this._resetViewWidth();\r\n            this._footerFollow();\r\n            this._fixHeight();\r\n            fullBlankWidth(this);\r\n            function fullBlankWidth(context){\r\n                var freeWidth = context.$tableHeaderMain.width() - context.$tableHeaderMain.find('>div>table').width();\r\n                if(freeWidth > 0){\r\n                    var $lastTd = context._getLast$Td();\r\n                    var cid = $lastTd.attr('_cid');\r\n                    var tdWidth = $lastTd.outerWidth() - cellBorderWidth + freeWidth;\r\n                    context.$table.find('td[_cid=' + cid + ']>div:not(.app-wrapper)').css('width', tdWidth);\r\n                    context._column[cid].width = tdWidth;\r\n                    var lastWidth = $lastTd.data('freeWidth');\r\n                    if(lastWidth != undefined){\r\n                        freeWidth = freeWidth + lastWidth\r\n                    }\r\n                    $lastTd.data('freeWidth', freeWidth);\r\n                }\r\n            }\r\n            function getFields(fcs){\r\n                var result = {};\r\n                for(var field in fcs){\r\n                    var col = fcs[field];\r\n                    if(!col.sysCol && !col.hidden){\r\n                        result[field] = 0;\r\n                    }\r\n                }\r\n                return result;\r\n            }\r\n            function getWidth(str, fontSize){\r\n                var $t = $('<div style=\"font-size:' + fontSize + ';display: none;\">' + str + '</div>');\r\n                $t.appendTo('body');\r\n                var result = $t.width();\r\n                $t.remove();\r\n                return result;\r\n            }\r\n        },\r\n        _onCheckSummary: function(){\r\n            if(!this.setting.checkSummary){\r\n                return;\r\n            }\r\n            this.$tableHeaderLeft.on('click.grid.api', 'td[field=\"_rownumbers\"]', $.proxy(this._checkSummary, this));\r\n            this.$tableHeaderLeft.on('click.grid.api', 'td[field=\"_checkbox\"]', $.proxy(this._checkSummary, this));\r\n            this.$tableHeaderLeft.on('click.grid.api', 'td[field=\"_checkbox\"] input', $.proxy(this._checkSummary, this));\r\n            this.$tableBodyLeft.on('click.grid.api', 'td[field=\"_checkbox\"]', $.proxy(this._checkSummary, this));\r\n            this.$tableBodyLeft.on('click.grid.api', 'td[field=\"_checkbox\"] input', $.proxy(this._checkSummary, this));\r\n            this.$tableBody.on('click.grid-row-check.api', 'tr.data-row td', $.proxy(this._checkSummary, this));\r\n        },\r\n        _checkSummary: function(){\r\n            var rows = this.getSelections();\r\n            if(rows.length == 0){\r\n                rows = this.getRows();\r\n            }\r\n           \tthis.summaryRow = this._summary(rows);\r\n            if(!$.isEmptyObject(this.summaryRow)){\r\n                replaceFooter(this, this.summaryRow);\r\n            }\r\n        },\r\n        resetSummary: function(){\r\n             if(this.setting.checkSummary){\r\n                this._checkSummary();\r\n            }else{\r\n               \tthis.summaryRow = this._summary(this.getRows());\r\n                if(!$.isEmptyObject(this.summaryRow)){\r\n                     replaceFooter(this, this.summaryRow);\r\n                }\r\n            }\r\n        }\r\n    });\r\n    function replaceFooter(context, footer){\r\n    \t context._setFooterRows(footer);\r\n    \t for(var field in footer){\r\n    \t \tvar col = context._fieldColumns[field];\r\n    \t \tif(col){\r\n\t    \t \tvar text = context._getFormatText(col, footer);\r\n\t\t    \tcontext.$tableFooter.find('td[field=\"' + field + '\"]>div').text(text);\r\n    \t \t}\r\n    \t }\r\n    }\r\n    return GridExt;\r\n});\n",
    "define('app/widgets/grid/app-grid-pager',['app/core/app-class'], function(Class) {\r\n\r\n    'use strict';\r\n    /**\r\n     * 网格分页栏\r\n     */\r\n    var GridPager = Class.create({\r\n    \t/**\r\n         * 初始化分页栏\r\n         */\r\n        _initPagination: function(){\r\n            var s = this.setting;\r\n            if(s.pager == 'none'){\r\n                return;\r\n            }\r\n            var $p = this._initPagerElement();\r\n            if(s.pager == 'all' || s.pager == 'up'){\r\n            \tif(!s.title && s.toolbar && s.toolbar.length > 0){\r\n                    $p.appendTo(this.$toolbar);\r\n            \t}else{\r\n            \t\t$p.appendTo(this.$title);\r\n            \t}\r\n            }\r\n            if(s.pager == 'all' || s.pager == 'down'){\r\n                $p.clone().appendTo(this.$element);\r\n            }\r\n            this.$pagers = this.$element.find('.grid-pager');\r\n            this.$pagerUp = this.$element.find('.grid-header-title>.grid-pager');\r\n            this.$pagerDown = this.$element.find('>.grid-pager');\r\n            this.$switchView = this.$element.find('.grid-switchview');\r\n            this._bindPagerEvents();\r\n        },\r\n        /**\r\n         * 生成分页栏的html元素\r\n         */\r\n        _initPagerElement: function(){\r\n            var s = this.setting;\r\n            var to = s.pageNumber * s.pageSize\r\n                ,from = to - s.pageSize + 1\r\n                ,downloadIcon = ''\r\n                ,printIcon = ''\r\n                ,switchViewIco='';\r\n            if(s.pagerToolbarIcon && s.pagerToolbarIcon.download){\r\n                downloadIcon = '<td><span class=\"icon icon-download\"></span></td>';\r\n            }\r\n            if(s.pagerToolbarIcon && s.pagerToolbarIcon.print){\r\n                printIcon = '<td><span class=\"icon icon-print\"></span></td>';\r\n            }\r\n\r\n            //开启切换视图 by sjq\r\n            if (s.switchView){\r\n\r\n                switchViewIco = '<td><span title=\"网格视图\" class=\"icon icon-gridview grid-switchview\"></span></td><td><span class=\"icon icon-cardview grid-switchview\"  title=\"卡片视图\"></span></td>';\r\n\r\n            }\r\n\r\n            return $('<div class=\"grid-pager\">'+\r\n                '<div class=\"pager-infos\"> <label>' + from + '</label> - <label>' + to\r\n                + '</label>　共 <label>0</label> 条</div>' +\r\n                '<table class=\"pager-tool\" cellspacing=\"0\" cellpadding=\"0\">' +\r\n                '<tbody>' +\r\n                '<tr>' +\r\n                '<td>' +\r\n                '<span class=\"icon icon-seek-first\"></span>' +\r\n                '</td>' +\r\n                '<td>' +\r\n                '<span class=\"icon icon-seek-prev\"></span>' +\r\n                '</td>' +\r\n                '<td style=\"width: 4px;\">' +\r\n                '<span class=\"separator\"></span>' +\r\n                '</td>' +\r\n                '<td>' +\r\n                '<input tabindex=\"-1\" class=\"currPage\" value=\"' + s.pageNumber\r\n                + '\"/>共<label class=\"totalPages\">1</label>页' +\r\n                '</td>' +\r\n                '<td style=\"width: 4px;\">' +\r\n                '<span class=\"separator\"></span>' +\r\n                '</td>' +\r\n                '<td>' +\r\n                '<span class=\"icon icon-seek-next\"></span>' +\r\n                '</td>' +\r\n                '<td>' +\r\n                '<span class=\"icon icon-seek-end\"></span>' +\r\n                '</td>' +\r\n                '<td>' +\r\n                '<span class=\"icon icon-refresh\"></span>' +\r\n                '</td>' +\r\n                downloadIcon + printIcon +switchViewIco+\r\n                '<td>' + this._getPageSizeSltHtml() + '</td>' +\r\n                '</tr>' +\r\n                '</tbody>' +\r\n                '</table>' +\r\n                '</div>');\r\n        },\r\n        /**\r\n         * 获取当前分页数\r\n         */\r\n        getCurrentPageSize: function(){\r\n            var result = this.$pagers.find('.pager-pagesize input').val();\r\n            if(result){\r\n                return Number(result);\r\n            }else{\r\n                return -1;\r\n            }\r\n        },\r\n        /**\r\n         * 获取分页的下拉框html\r\n         */\r\n        _getPageSizeSltHtml: function(){\r\n        \tinCludePageSize.call(this);\r\n            var s = this.setting\r\n                ,pageSizeSlt = '<div class=\"pager-pagesize\"><select tabindex=\"-1\" class=\"currPageSize\">';\r\n            for(var i = 0; i < s.pageList.length; i++){\r\n                var val = s.pageList[i];\r\n                pageSizeSlt += '<option value=\"' + val + '\"'\r\n                    + (s.pageSize == val ? 'selected=\"selected\"' : '') + '>' + val + '</option>';\r\n            }\r\n            pageSizeSlt += '</select><input value=\"' + s.pageSize + '\"/></div>';\r\n            return pageSizeSlt;\r\n            function inCludePageSize(){\r\n            \tvar pageList = this.setting.pageList\r\n            \t\t,pageSize = this.setting.pageSize\r\n            \t\t,index = 0;\r\n            \tfor(var i = 0; i < pageList.length; i++){\r\n            \t\tvar size = pageList[i];\r\n            \t\tif(size == pageSize){\r\n            \t\t\treturn;\r\n            \t\t}\r\n            \t\tif(pageSize > size){\r\n            \t\t\tindex = i;\r\n            \t\t}\r\n            \t}\r\n            \tif(index >= 0){\r\n            \t\tthis.setting.pageList.splice(index, 0, pageSize);\r\n            \t}\r\n            }\r\n        },\r\n        /**\r\n         * 对分页控件绑定事件\r\n         */\r\n        _bindPagerEvents: function(){\r\n            var grid = this\r\n                ,$ps = this.$pagers\r\n                ,$currPage = $ps.find('.currPage')\r\n                ,$total = $ps.find('.totalPages');\r\n            $ps.find('.currPageSize').on('change.grid.pagination.api', function(){\r\n            \tvar currPageSize = $(this).val();\r\n                $ps.find('.currPageSize').val(currPageSize);\r\n                $ps.find('.pager-pagesize input').val(currPageSize);\r\n                grid.loadForPage(1);\r\n            }).on('click.grid.pagination.api', function(e){\r\n                e.stopPropagation();\r\n            });\r\n            $ps.find('.icon-seek-first').on('click.grid.pagination.api', function(){\r\n                grid.loadForPage(1);\r\n            });\r\n            $ps.find('.icon-seek-prev').on('click.grid.pagination.api', $.proxy(this.prevPage, this));\r\n            $currPage.on('focus.grid.pagination.api', function(e){\r\n                var $this = $(this);\r\n                $this.data('oriText', $this.val());\r\n                $this.one('blur.grid.pagination.api', function(e){\r\n                    var $this = $(this);\r\n                    $this.val($this.data('oriText'));\r\n                });\r\n            }).on('keydown.grid.pagination.api', function(e){\r\n                var keyCode = e.keyCode;\r\n                if ((keyCode >= 48 && keyCode <= 57) || keyCode == 8\r\n                    || keyCode == 46) {\r\n                    return true;\r\n                }\r\n                if(keyCode == 13){\r\n                    var $this = $(this)\r\n                        ,curr = parseInt($this.val())\r\n                        ,allPage = parseInt($total.html());\r\n                    if(!isNaN(curr) &&\r\n                        curr >= 1 && curr <= allPage){\r\n                    \t$this.data('oriText', curr);\r\n                        grid.loadForPage(curr);\r\n                    }\r\n                    if(grid._combogrid){\r\n                        grid._combogrid.focus();\r\n                    }\r\n                }\r\n            }).on('click.grid.pagination.api', function(e){\r\n                e.stopPropagation();\r\n            });\r\n            $ps.find('.icon-seek-next').on('click.grid.pagination.api', $.proxy(this.nextPage, this));\r\n            $ps.find('.icon-seek-end').on('click.grid.pagination.api', function(){\r\n                var totalPage = $total.html();\r\n                if(totalPage == '0'){\r\n                    totalPage = 1;\r\n                }\r\n                grid.loadForPage(totalPage);\r\n            });\r\n            $ps.find('.icon-refresh').on('click.grid.pagination.api', function(){\r\n                grid.reload();\r\n            });\r\n            $ps.find('.icon-download').on('click.grid.pagination.api', function(){\r\n                grid.exportExcel();\r\n            });\r\n            $ps.find('.icon-print').on('click.grid.pagination.api', function(){\r\n                grid.print();\r\n            });\r\n\r\n            $ps.find('.pager-pagesize input').on('focus.grid.pagination.api', function(){\r\n            \tvar $this = $(this);\r\n                $this.data('oriText', $this.val());\r\n                $this.one('blur.grid.pagination.api', function(e){\r\n                    var $this = $(this);\r\n                    $this.val($this.data('oriText'));\r\n                });\r\n            }).on('keydown.grid.pagination.api', function(e){\r\n                var keyCode = e.keyCode;\r\n                if ((keyCode >= 48 && keyCode <= 57) || keyCode == 8\r\n                    || keyCode == 46) {\r\n                    return true;\r\n                }\r\n                var $this = $(this);\r\n                if(keyCode == 13){\r\n                \tvar val = $this.val()\r\n                \t\t,pageSize = parseInt(val, 10);\r\n                    if(!isNaN(pageSize)){\r\n\t            \t\tvar pageSize = parseInt(val, 10)\r\n\t            \t\t\t,maxPageSize = getMaxPageSize();\r\n\t            \t\tif(pageSize > maxPageSize){\r\n\t            \t\t\tpageSize = maxPageSize;\r\n\t            \t\t}\r\n\t            \t\t$ps.find('.pager-pagesize input').val(pageSize);\r\n\t            \t\t$ps.find('.pager-pagesize input').data('oriText', pageSize);\r\n\t            \t\t$ps.find('.currPageSize').val(pageSize);\r\n\t            \t\tgrid.loadForPage(1);\r\n\t            \t}\r\n                }\r\n                function getMaxPageSize(){\r\n            \t\tvar list = grid.setting.pageList\r\n            \t\t\t,max = 0;\r\n            \t\tfor(var i =0 ; i < list.length; i++){\r\n            \t\t\tif(list[i] > max){\r\n            \t\t\t\tmax = list[i];\r\n            \t\t\t}\r\n            \t\t}\r\n            \t\treturn max;\r\n            \t}\r\n            });\r\n            this.$switchView.on(\"click.grid.pagination.api\",function(){\r\n                var $this=$(this);\r\n                if ($this.hasClass(\"icon-gridview\")){\r\n                    grid.viewType='GridView'\r\n                }\r\n                if ($this.hasClass(\"icon-cardview\")){\r\n\r\n                    grid.viewType='CardView'\r\n                }\r\n                grid._switchView(grid.viewType,true)\r\n            })\r\n        },\r\n        /**\r\n         * 上一页\r\n         * @example $('#demo').grid('prevPage');\r\n         * @memberof grid-class\r\n         * @instance\r\n         */\r\n        prevPage: function(){\r\n            if(!(this.$pagers && this.$pagers.length > 0)){\r\n                return;\r\n            }\r\n            var $currPage = this.$pagers.find('.currPage')\r\n                ,$total = this.$pagers.find('.totalPages')\r\n                ,prev = 1\r\n                ,curr = parseInt($currPage.val());\r\n            if(curr == 1){\r\n                prev = parseInt($total.html());\r\n            }else{\r\n                prev = curr - 1;\r\n            }\r\n            if(prev == 0){\r\n                prev = 1;\r\n            }\r\n            this.loadForPage(prev);\r\n        },\r\n        /**\r\n         * 下一页\r\n         * @example $('#demo').grid('nextPage');\r\n         * @memberof grid-class\r\n         * @instance\r\n         */\r\n        nextPage: function(){\r\n            if(!(this.$pagers && this.$pagers.length > 0)){\r\n                return;\r\n            }\r\n            var $currPage = this.$pagers.find('.currPage')\r\n                ,$total = this.$pagers.find('.totalPages')\r\n                ,next = 1\r\n                ,curr = parseInt($currPage.val())\r\n                ,allPage = parseInt($total.html());\r\n            if(curr == allPage){\r\n                next = 1;\r\n            }else{\r\n                next = curr + 1;\r\n            }\r\n            if(allPage == 0){\r\n                next = 1;\r\n            }\r\n            this.loadForPage(next);\r\n        },\r\n        /**\r\n         * 载入传入页码的载入数据\r\n         * @param {Number} page 页码\r\n         * @example $('#demo').grid('loadForPage',1);\r\n         * @memberof grid-class\r\n         * @instance\r\n         */\r\n        loadForPage: function(page){\r\n            if(isNaN(page)){\r\n                return;\r\n            }\r\n            var grid = this\r\n                ,footer = keepFooter();\r\n\r\n            this._ajax(function(data) {\r\n                grid._loadPagers(page, data[grid.setting.jsonReader.total]);\r\n                grid._loadData(data, grid._getStarRowNumber());\r\n                appendKeepFooter(footer);\r\n\r\n            }, {page: page});\r\n            /**\r\n             * 保留上次表格尾\r\n             */\r\n            function keepFooter(){\r\n                if(page > 1){\r\n                    return grid.getFooterRows();\r\n                }\r\n            }\r\n            /**\r\n             * 输出表格尾\r\n             */\r\n            function appendKeepFooter(footer){\r\n                if(grid.setting.keepFooter){\r\n                    grid.appendFooter(footer);\r\n                }\r\n            }\r\n        },\r\n        /**\r\n         * 载入分页信息，当total为空时，不进行更新总行数\r\n         * @param curr 当前页索引\r\n         * @param total 一共几行\r\n         */\r\n        _loadPagers: function(curr, total){\r\n            if(!this.$pagers || this.$pagers.length == 0){\r\n                return;\r\n            }\r\n            var $ps = this.$pagers;\r\n            $ps.find('.currPage').val(curr);\r\n            if(!$ps){\r\n                return;\r\n            }\r\n            var currPageSize = parseInt($ps.find('.pager-pagesize input').val())\r\n                ,to = curr * currPageSize\r\n                ,from = this._rownumbers = to - currPageSize + 1\r\n                ,$from = $ps.find('.pager-infos>label:first');\r\n            $from.html(from);\r\n            $from.next().html(to);\r\n\r\n            if(total == undefined){\r\n                return;\r\n            }\r\n            var pages = Math.ceil(total / currPageSize);\r\n            $ps.find('.pager-tool .totalPages').html(pages);\r\n            $from.next().next().html($A.utils.formatNumber(total,0));\r\n            if(this.setting.rownumbers == 'repeat'){\r\n                this._rownumbers = 1;\r\n            }\r\n        },\r\n        /**\r\n         * 获取当前分页信息\r\n         * @returns {Object} result 数据对象\r\n         * @returns {Integer} result.page 当前页码\r\n         * @returns {Integer} result.rows 每页行数\r\n         * @example $('#demo').grid('getCurrentPager');\r\n         * @memberof grid-class\r\n         * @instance\r\n         */\r\n        getCurrentPager: function(){\r\n            if(this.$pagers && this.$pagers.length > 0){\r\n                var result = {};\r\n                result.page = parseInt(this.$pagers.find('.currPage').val());\r\n                result.rows = parseInt(this.$pagers.find('.pager-pagesize input').val());\r\n                return result;\r\n            }\r\n            return null;\r\n        },\r\n        _pagerAddRow: function(){\r\n        \tif(this.$pagers){\r\n                var $total = this.$pagers.find('.pager-infos label:last')\r\n                    ,total = $total.text();\r\n                total = parseInt(total.replaceAll(',','')) + 1;\r\n                $total.text($A.utils.formatNumber(total,0));\r\n            }\r\n        },\r\n        _pagerDeleteRow: function(){\r\n        \tif(this.$pagers){\r\n\t\t\t\tvar $total = this.$pagers.find('.pager-infos label:last')\r\n\t\t\t\t\t,total = $total.text();\r\n\t\t\t\ttotal = parseInt(total.replaceAll(',','')) - 1;\r\n\t\t\t\t$total.text($A.utils.formatNumber(total,0));\r\n\t\t\t}\r\n        },\r\n     \thidePager: function(){\r\n            this.$pagers.hide();\r\n            this.resize();\r\n        },\r\n        showPager: function(){\r\n            this.$pagers.show();\r\n            this.resize();\r\n        },\r\n        _hasPager: function(){\r\n        \treturn this.$pagers && this.$pagers.length > 0;\r\n        },\r\n        _setPagerDownCss: function(css){\r\n        \tif(this.$pagerDown){\r\n                this.$pagerDown.css(css);\r\n            }\r\n        },\r\n        _getPagerDownHeight: function(){\r\n        \treturn this.$pagerDown && this.$pagerDown.is(':visible') ? this.$pagerDown.outerHeight():0;\r\n        },\r\n         /**\r\n         * 获取当前页码\r\n         * @returns {Integer} result 当前页码\r\n         * @example $('#demo').grid('getPageIndex');\r\n         * @memberof grid-class\r\n         * @instance\r\n         */\r\n        getPageIndex: function(){\r\n        \tif(this.$pagers && this.$pagers.length > 0){\r\n\t        \treturn this.$pagers.find('.currPage').val();\r\n        \t}\r\n        \treturn -1;\r\n        },\r\n        /**\r\n         * 获取当前页面的起始行号\r\n         */\r\n        _getStarRowNumber: function(){\r\n            var starNum = 1;\r\n            if(this.setting.rownumbers != 'repeat' && this.$pagers && this.$pagers.length > 0){\r\n                starNum = parseInt(this.$pagers.find('.pager-infos>label:first').html());\r\n            }\r\n            return starNum;\r\n        },\r\n        _hasTitlePager: function(){\r\n        \treturn this.$title.find('.grid-pager').length > 0;\r\n        }\r\n    });\r\n    return GridPager;\r\n});\n",
    "define('app/widgets/grid/app-grid-merger',['app/core/app-class'], function(Class) {\r\n\t\r\n\t'use strict';\r\n\t\r\n\t/**\r\n\t * 网格行合并\r\n\t */\r\n\tvar GridSummary = Class.create({\r\n\t\t /**\r\n         * 按列自动合并相同值单元格\r\n         * @param {String|Array<String>} fields 合并列字段\r\n         * @example $('#grid').grid('mergeColumns', 'type');\r\n         * @example $('#grid').grid('mergeColumns', ['type', 'subType']);\r\n         * @memberof grid-class\r\n         * @instance\r\n         */\r\n        mergeColumns: function(fields){\r\n            if($.isArray(fields)){\r\n            \tif(this.setting.mergeGroup){\r\n            \t\tmergeColumns.call(this, fields);\r\n            \t}else{\r\n            \t\tfor(var i = 0; i < fields.length; i++){\r\n            \t\t\tmergeColumn.call(this, fields[i]);\r\n            \t\t}\r\n            \t}\r\n            }else{\r\n                mergeColumn.call(this, fields);\r\n            }\r\n        }\r\n\t});\r\n\tfunction mergeColumns(fields){\r\n\t\tvar $firstTds = null\r\n\t\t\t,$prevTds = null\r\n\t\t\t,spanNum = 1\r\n\t\t\t,fieldsLen = fields.length\r\n\t\t\t,$fieldTds = getFieldTds.call(this, fields);\r\n\t\tfor(var i = 0; i < $fieldTds[0].length; i++){\r\n\t\t\tvar $tds = getTrTds($fieldTds, i);\r\n\t\t\tif(i == 0){\r\n\t\t\t\t$firstTds = $tds;\r\n\t\t\t\tspanNum = 1;\r\n\t\t\t}else{\r\n\t\t\t\t if(whetherMerge($prevTds, $tds)){\r\n                    spanNum++;\r\n                    merge($firstTds, $tds, spanNum);\r\n                }else{\r\n                    $firstTds = $tds;\r\n                    spanNum = 1;\r\n                }\r\n\t\t\t}\r\n\t\t\t$prevTds = $tds;\r\n\t\t}\r\n\t\tfunction getFieldTds(fields){\r\n\t\t\tvar result = [];\r\n\t\t\tfor(var i = 0; i < fieldsLen; i++){\r\n\t\t\t\tresult.push(this.$tableBody.find('td[field=\"' + fields[i] + '\"]'))\r\n\t\t\t}\r\n\t\t\treturn result;\r\n\t\t}\r\n\t\tfunction getTrTds($fieldTds, index){\r\n\t\t\tvar result = [];\r\n\t\t\tfor(var i = 0; i < fieldsLen; i++){\r\n\t\t\t\tresult.push($($fieldTds[i][index]));\r\n\t\t\t}\r\n\t\t\treturn result;\r\n\t\t}\r\n\t\tfunction whetherMerge($prevTds, $tds){\r\n\t\t\tfor(var i = 0; i < $tds.length; i++){\r\n\t\t\t\tvar $td = $tds[i]\r\n\t\t\t\t\t,$prevTd = $prevTds[i]\r\n\t\t\t\t\t,text = $td.text(); \r\n\t\t\t\tif($prevTd.text() != text){\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn true;\r\n\t\t}\r\n\t\tfunction merge($firstTds, $tds, spanNum){\r\n\t\t\tfor(var i = 0; i < $tds.length; i++){\r\n\t\t\t\t $tds[i].addClass('grid-cell-merger');\r\n                 $firstTds[i].attr('rowSpan',spanNum);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n    /**\r\n     * 合并列中相同值的单元格\r\n     */\r\n    function mergeColumn(filed){\r\n        var $firstTd = null\r\n            ,$prevTd = null\r\n            ,spanNum = 1\r\n            ,$fieldTd = this.$tableBody.find('td[field=\"' + filed + '\"]');\r\n        for(var i = 0; i < $fieldTd.length; i++){\r\n            var $td = $($fieldTd[i]);\r\n            if(i==0){\r\n                $firstTd = $td;\r\n                spanNum = 1;\r\n            }else{\r\n                if(whetherMerge($prevTd, $td)){\r\n                    spanNum++;\r\n                    $td.addClass('grid-cell-merger');\r\n                    $firstTd.attr('rowSpan',spanNum);\r\n                }else{\r\n                    $firstTd = $td;\r\n                    spanNum = 1;\r\n                }\r\n            }\r\n            $prevTd = $td;\r\n        }\r\n        /**\r\n         * 是否为内容相同且紧邻的单元格\r\n         * @param $tdA\r\n         * @param $tdB\r\n         */\r\n        function whetherMerge($tdA, $tdB){\r\n            var text = $tdA.text();\r\n            if(text != '' && text == $tdB.text()){\r\n               return true;\r\n            }\r\n            return false;\r\n        }\r\n    };\r\n\treturn GridSummary;\r\n});\n",
    "/**\r\n * 按钮控件\r\n * \r\n * @author sjq\r\n */\r\ndefine('app/widgets/menu/app-menu',[\"app/core/app-jquery\", \"app/core/app-core\", \"app/core/app-options\",\"app/widgets/app-widget\"], function($, $A,\r\n\t\tOptions,Widget) {\r\n\tvar Menu = Widget.extend({\r\n\t\tinitialize : function(el, options) {\r\n\t\t\tMenu.superclass.initialize.call(this, options);\r\n\t\t\tif (!options) {\r\n\t\t\t\toptions = {};\r\n\t\t\t};\r\n            this.element = el;\r\n\t\t\t$.data(el, \"menu\", {\r\n\t\t\t\t\t\toptions : $.extend({}, Options.appDefaults.Menu,\r\n\t\t\t\t\t\t\t\toptions, this.parseOptions(el))\r\n\t\t\t\t\t});\r\n\r\n\t\t},\r\n\t\t/**\r\n\t\t * 转换\r\n\t\t */\r\n\t\tparseOptions : function(target) {\r\n\t\t\tvar t = $(target);\r\n\t\t\treturn $.extend({}, t.parseOptions(target, [{\r\n\t\t\t\t\t\t\t\t\t\tminWidth : 'number',\r\n\t\t\t\t\t\t\t\t\t\tduration : 'number',\r\n\t\t\t\t\t\t\t\t\t\thideOnUnhover : 'boolean'\r\n\t\t\t\t\t\t\t\t\t}]));\r\n\t\t},\r\n\t\tinit : function(target) {\r\n\t\t\tvar _self = this;\r\n\t\t\t// console.log($A)\r\n\t\t\t// $(target).appendTo('body');\r\n\t\t\t$(target).addClass('menu-top'); // the top menu\r\n\r\n\t\t\t$(document).unbind('.menu').bind('mousedown.menu', function(e) {\r\n\t\t\t\t\t\t// var allMenu = $('body>div.menu:visible');\r\n\t\t\t\t\t\t// var m = $(e.target).closest('div.menu', allMenu);\r\n\t\t\t\t\t\tvar m = $(e.target).closest('div.menu,div.combo-p');\r\n\t\t\t\t\t\tif (m.length) {\r\n\t\t\t\t\t\t\treturn\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t$('body>div.menu-top:visible').menu('hide');\r\n\t\t\t\t\t});\r\n\r\n\t\t\tvar menus = splitMenu($(target));\r\n\t\t\tfor (var i = 0; i < menus.length; i++) {\r\n\t\t\t\tcreateMenu(menus[i]);\r\n\t\t\t}\r\n\r\n\t\t\tfunction splitMenu(menu) {\r\n\t\t\t\tvar menus = [];\r\n\t\t\t\tmenu.addClass('menu');\r\n\t\t\t\tmenus.push(menu);\r\n\t\t\t\tif (!menu.hasClass('menu-content')) {\r\n\t\t\t\t\tmenu.children('div').each(function() {\r\n\t\t\t\t\t\t\t\tvar submenu = $(this).children('div');\r\n\t\t\t\t\t\t\t\tif (submenu.length) {\r\n\t\t\t\t\t\t\t\t\tsubmenu.insertAfter(target);\r\n\t\t\t\t\t\t\t\t\tthis.submenu = submenu; // point to the sub\r\n\t\t\t\t\t\t\t\t\t// menu\r\n\t\t\t\t\t\t\t\t\tvar mm = splitMenu(submenu);\r\n\t\t\t\t\t\t\t\t\tmenus = menus.concat(mm);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t\treturn menus;\r\n\t\t\t}\r\n\r\n\t\t\tfunction createMenu(menu) {\r\n\t\t\t\t//TODO 暂时丢appPanelContainer里面，后续优化\r\n\t\t\t\tmenu.appendTo($A.getContainer());\r\n\t\t\t\tvar wh = $(menu).parseOptions(menu[0], ['width', 'height']);\r\n\t\t\t\tmenu[0].originalHeight = wh.height || 0;\r\n\t\t\t\tif (menu.hasClass('menu-content')) {\r\n\t\t\t\t\tmenu[0].originalWidth = wh.width || menu._outerWidth();\r\n\t\t\t\t} else {\r\n\t\t\t\t\tmenu[0].originalWidth = wh.width || 0;\r\n\t\t\t\t\tmenu.children('div').each(function() {\r\n\t\t\t\t\t\tvar item = $(this);\r\n\t\t\t\t\t\tvar itemOpts = $.extend({}, item.parseOptions(this, [\r\n\t\t\t\t\t\t\t\t\t\t\t\t'name', 'iconCls', 'href', {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tseparator : 'boolean'\r\n\t\t\t\t\t\t\t\t\t\t\t\t}]), {\r\n\t\t\t\t\t\t\t\t\tdisabled : (item.attr('disabled')\r\n\t\t\t\t\t\t\t\t\t\t\t? true\r\n\t\t\t\t\t\t\t\t\t\t\t: undefined)\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\tif (itemOpts.separator) {\r\n\t\t\t\t\t\t\titem.addClass('menu-sep');\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (!item.hasClass('menu-sep')) {\r\n\t\t\t\t\t\t\titem[0].itemName = itemOpts.name || '';\r\n\t\t\t\t\t\t\titem[0].itemHref = itemOpts.href || '';\r\n\r\n\t\t\t\t\t\t\tvar text = item.addClass('menu-item').html();\r\n\t\t\t\t\t\t\titem.empty()\r\n\t\t\t\t\t\t\t\t\t.append($('<div class=\"menu-text\"></div>')\r\n\t\t\t\t\t\t\t\t\t\t\t.html(text));\r\n\t\t\t\t\t\t\tif (itemOpts.iconCls) {\r\n\t\t\t\t\t\t\t\t$('<div class=\"menu-icon\"></div>')\r\n\t\t\t\t\t\t\t\t\t\t.addClass(itemOpts.iconCls)\r\n\t\t\t\t\t\t\t\t\t\t.appendTo(item);\r\n\t\t\t\t\t\t\t}\r\nif (!itemOpts.iconCls){\r\n\titem.addClass(\"menu-item-noico\")\r\n}\r\n\t\t\t\t\t\t\tif (itemOpts.disabled) {\r\n\t\t\t\t\t\t\t\t_self._setDisabled(target, item[0], true);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t// if (itemOpts.height){\r\n\t\t\t\t\t\t\t// item.height(itemOpts.height);\r\n\t\t\t\t\t\t\t// }\r\n\t\t\t\t\t\t\tif (item[0].submenu) {\r\n\t\t\t\t\t\t\t\t$('<div class=\"menu-rightarrow\"></div>')\r\n\t\t\t\t\t\t\t\t\t\t.appendTo(item); // has sub menu\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t_self.bindMenuItemEvent(target, item);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t\t$('<div class=\"menu-line\"></div>').prependTo(menu);\r\n\t\t\t\t}\r\n\t\t\t\t_self._setMenuSize(target, menu);\r\n\t\t\t\tmenu.hide();\r\n\r\n\t\t\t\t_self.bindMenuEvent(target, menu);\r\n\t\t\t}\r\n\t\t},\r\n\t\t_setMenuSize : function(target, menu) {\r\n\t\t\tif (target.length&&target.length>0){\r\n\t\t\t\ttarget=target[0];\r\n\t\t\t}\r\n\t\t\tvar opts = $.data(target, 'menu').options;\r\n\t\t\tvar style = menu.attr('style') || '';\r\n\t\t\tmenu.css({\r\n\t\t\t\t\t\tdisplay : 'block',\r\n\t\t\t\t\t\tleft : -10000,\r\n\t\t\t\t\t\theight : 'auto',\r\n\t\t\t\t\t\twidth:'auto',\r\n\t\t\t\t\t\toverflow : 'hidden'\r\n\t\t\t\t\t});\r\n\r\n\t\t\tvar el = menu[0];\r\n\t\t\tvar width = el.originalWidth || 0;\r\n\r\n\t\t\tif (!width) {\r\n\t\t\t\twidth = 0;\r\n\t\t\t\tmenu.find('div.menu-text').each(function() {\r\n\t\t\t\t\t//console.log( $(this)._outerWidth())\r\n\t\t\t\t\tif (width < $(this)._outerWidth()) {\r\n\t\t\t\t\t\twidth = $(this)._outerWidth();\r\n\t\t\t\t\t}\r\n\t\t\t\t\t$(this).closest('div.menu-item')._outerHeight($(this)\r\n\t\t\t\t\t\t\t._outerHeight()\r\n\t\t\t\t\t\t\t+ 2);\r\n\t\t\t\t});\r\n\t\t\twidth += 12;\r\n\t\t\t}\r\n\r\n\t\t\twidth = Math.max(width, opts.minWidth);\r\n\t\t\t// var height = el.originalHeight || menu.outerHeight();\r\n\t\t\tvar height = el.originalHeight || 0;\r\n\t\t\tif (!height) {\r\n\t\t\t\theight = menu.outerHeight();\r\n\r\n\t\t\t\tif (menu.hasClass('menu-top') && opts.alignTo) {\r\n\t\t\t\t\tvar at = $(opts.alignTo);\r\n\t\t\t\t\tvar h1 = at.offset().top - $(document).scrollTop();\r\n\t\t\t\t\tvar h2 = $(window)._outerHeight() + $(document).scrollTop()\r\n\t\t\t\t\t\t\t- at.offset().top - at._outerHeight();\r\n\t\t\t\t\theight = Math.min(height, Math.max(h1, h2));\r\n\t\t\t\t} else if (height > $(window)._outerHeight()) {\r\n\t\t\t\t\theight = $(window).height();\r\n\t\t\t\t\tstyle += ';overflow:auto';\r\n\t\t\t\t} else {\r\n\t\t\t\t\tstyle += ';overflow:hidden';\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// if (height > $(window).height()-5){\r\n\t\t\t\t// height = $(window).height()-5;\r\n\t\t\t\t// style += ';overflow:auto';\r\n\t\t\t\t// } else {\r\n\t\t\t\t// style += ';overflow:hidden';\r\n\t\t\t\t// }\r\n\t\t\t}\r\n\t\t\tvar lineHeight = Math.max(el.originalHeight, menu.outerHeight())\r\n\t\t\t\t\t- 2;\r\n\t\t\tmenu._outerWidth(width)._outerHeight(height);\r\n\t\t\tmenu.children('div.menu-line')._outerHeight(lineHeight);\r\n\r\n\t\t\tstyle += ';width:' + el.style.width + ';height:' + el.style.height;\r\n\r\n\t\t\tmenu.attr('style', style);\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t * bind menu event\r\n\t\t */\r\n\t\tbindMenuEvent : function(target, menu) {\r\n\t\t\tvar state = $(target).data('menu');\r\n\t\t\tvar _self = this;\r\n\t\t\tmenu.unbind('.menu').bind('mouseenter.menu', function() {\r\n\t\t\t\t\t\tif (state.timer) {\r\n\t\t\t\t\t\t\tclearTimeout(state.timer);\r\n\t\t\t\t\t\t\tstate.timer = null;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}).bind('mouseleave.menu', function() {\r\n\t\t\t\t\t\tif (state.options.hideOnUnhover) {\r\n\t\t\t\t\t\t\tstate.timer = setTimeout(function() {\r\n\t\t\t\t\t\t\t\t\t\t_self._hideAll(target);\r\n\t\t\t\t\t\t\t\t\t}, state.options.duration);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t * bind menu item event\r\n\t\t */\r\n\t\tbindMenuItemEvent : function(target, item) {\r\n\t\t\tif (!item.hasClass('menu-item')) {\r\n\t\t\t\treturn\r\n\t\t\t}\r\n\t\t\tvar _self = this;\r\n\t\t\titem.unbind('.menu');\r\n\t\t\titem.bind('click.menu', function() {\r\n\t\t\t\t\t\tif ($(this).hasClass('menu-item-disabled')) {\r\n\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t// only the sub menu clicked can hide all menus\r\n\t\t\t\t\t\tif (!this.submenu) {\r\n\t\t\t\t\t\t\t_self._hideAll(target);\r\n\t\t\t\t\t\t\tvar href = this.itemHref;\r\n\t\t\t\t\t\t\tif (href) {\r\n\t\t\t\t\t\t\t\tlocation.href = href;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tvar item = $(target).menu('getItem', this);\r\n\t\t\t\t\t\t$.data(target, 'menu').options.onClick.call(target,\r\n\t\t\t\t\t\t\t\titem);\r\n\t\t\t\t\t}).bind('mouseenter.menu', function(e) {\r\n\t\t\t\t\t\t// hide other menu\r\n\t\t\t\t\t\titem.siblings().each(function() {\r\n\t\t\t\t\t\t\t\t\tif (this.submenu) {\r\n\t\t\t\t\t\t\t\t\t\t_self._hideMenu(this.submenu);\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t$(this).removeClass('menu-active');\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t// show this menu\r\n\t\t\t\t\t\titem.addClass('menu-active');\r\n\r\n\t\t\t\t\t\tif ($(this).hasClass('menu-item-disabled')) {\r\n\t\t\t\t\t\t\titem.addClass('menu-active-disabled');\r\n\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tvar submenu = item[0].submenu;\r\n\r\n\t\t\t\t\t\tif (submenu) {\r\n\t\t\t\t\t\t\t$(target).menu('show', {\r\n\t\t\t\t\t\t\t\t\t\tmenu : submenu,\r\n\t\t\t\t\t\t\t\t\t\tparent : item\r\n\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}).bind('mouseleave.menu', function(e) {\r\n\t\t\t\t\t\titem.removeClass('menu-active menu-active-disabled');\r\n\t\t\t\t\t\tvar submenu = item[0].submenu;\r\n\t\t\t\t\t\tif (submenu) {\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tif (e.pageX >= parseInt(submenu.css('left'))) {\r\n\t\t\t\t\t\t\t\titem.addClass('menu-active');\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t_self._hideMenu(submenu);\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\titem.removeClass('menu-active');\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t * hide top menu and it's all sub menus\r\n\t\t */\r\n\t\t_hideAll : function(target) {\r\n\t\t\tvar state = $.data(target, 'menu');\r\n\t\t\tif (state) {\r\n\t\t\t\tif ($(target).is(':visible')) {\r\n\t\t\t\t\tthis._hideMenu($(target));\r\n\t\t\t\t\tstate.options.onHide.call(target);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn false;\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t * show the menu, the 'param' object has one or more properties: left:\r\n\t\t * the left position to display top: the top position to display menu:\r\n\t\t * the menu to display, if not defined, the 'target menu' is used\r\n\t\t * parent: the parent menu item to align to alignTo: the element object\r\n\t\t * to align to\r\n\t\t */\r\n\t\t_showMenu : function(target, param) {\r\n\t\t\tvar left, top;\r\n\t\t\tparam = param || {};\r\n\t\t\tvar menu = $(param.menu || target);\r\n\t\t\tif (param.alignTo && param.autoWidth) {\r\n\t\t\t\tvar at = $(param.alignTo);\r\n\t\t\t\t$(target).menu('setSize', {\r\n\t\t\t\t\t\t\twidth : at.width()\r\n\t\t\t\t\t\t});\r\n\r\n\t\t\t}\r\n\t\t\t$(target).menu('resize', menu[0]);\r\n\t\t\tif (menu.hasClass('menu-top')) {\r\n\t\t\t\tvar opts = $.data(target, 'menu').options;\r\n\t\t\t\t$.extend(opts, param);\r\n\t\t\t\tleft = opts.left;\r\n\t\t\t\ttop = opts.top;\r\n\t\t\t\tif (opts.alignTo) {\r\n\t\t\t\t\tvar at = $(opts.alignTo);\r\n\t\t\t\t\tvar pos;\r\n\t\t\t\t\tif (menu.parent()[0]==at.parent()[0]){\r\n\t\t\t\t\t\tpos = at.position();\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\tpos = at.offset();\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\r\n\r\n\t\t\t\t\tleft = pos.left;\r\n\t\t\t\t\ttop = pos.top + at._outerHeight();\r\n\t\t\t\t\tif (opts.align == 'right') {\r\n\t\t\t\t\t\tleft += at.outerWidth() - menu.outerWidth();\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tif (left + menu.outerWidth() > $(window)._outerWidth()\r\n\t\t\t\t\t\t+ $(document)._scrollLeft()) {\r\n\t\t\t\t\tleft = $(window)._outerWidth() + $(document).scrollLeft()\r\n\t\t\t\t\t\t\t- menu.outerWidth() - 5;\r\n\t\t\t\t}\r\n\t\t\t\tif (left < 0) {\r\n\t\t\t\t\tleft = 0;\r\n\t\t\t\t}\r\n\t\t\t\ttop = _fixTop(top, opts.alignTo);\r\n\t\t\t} else {\r\n\r\n\t\t\t\tvar parent = param.parent; // the parent menu item\r\n\t\t\t\t// console.log(parent.offset())\r\n\t\t\t\tleft = parent.offset().left + parent.outerWidth() - 2;\r\n\t\t\t\tif (left + menu.outerWidth() + 5 > $(window)._outerWidth()\r\n\t\t\t\t\t\t+ $(document).scrollLeft()) {\r\n\t\t\t\t\tleft = parent.offset().left - menu.outerWidth() + 2;\r\n\t\t\t\t}\r\n\t\t\t\ttop = _fixTop(parent.position().top - 3);\r\n\t\t\t}\r\n\r\n\t\t\tfunction _fixTop(top, alignTo) {\r\n\t\t\t\tif (top + menu.outerHeight() > $(window)._outerHeight()\r\n\t\t\t\t\t\t+ $(document).scrollTop()) {\r\n\t\t\t\t\tif (alignTo) {\r\n\t\t\t\t\t\ttop = $(alignTo).offset().top - menu._outerHeight();\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\ttop = $(window)._outerHeight()\r\n\t\t\t\t\t\t\t\t+ $(document).scrollTop() - menu.outerHeight();\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tif (top < 0) {\r\n\t\t\t\t\ttop = 0;\r\n\t\t\t\t}\r\n\t\t\t\treturn top;\r\n\t\t\t}\r\n\r\n\t\t\tmenu.css({\r\n\t\t\t\t\t\tleft : left,\r\n\t\t\t\t\t\ttop : top\r\n\t\t\t\t\t});\r\n\t\t\tmenu.show(0, function() {\r\n\t\t\t\t\t\tif (!menu[0].shadow) {\r\n\t\t\t\t\t\t\tmenu[0].shadow = $('<div class=\"menu-shadow\"></div>')\r\n\t\t\t\t\t\t\t\t\t.insertAfter(menu);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tmenu[0].shadow.css({\r\n\t\t\t\t\t\t\t\t\tdisplay : 'block',\r\n\t\t\t\t\t\t\t\t\tzIndex : Options.appDefaults.Menu.zIndex++,\r\n\t\t\t\t\t\t\t\t\tleft : menu.css('left'),\r\n\t\t\t\t\t\t\t\t\ttop : menu.css('top'),\r\n\t\t\t\t\t\t\t\t\twidth : menu.outerWidth(),\r\n\t\t\t\t\t\t\t\t\theight : menu.outerHeight()\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\tmenu.css('z-index', Options.appDefaults.Menu.zIndex++);\r\n\t\t\t\t\t\tif (menu.hasClass('menu-top')) {\r\n\t\t\t\t\t\t\t$.data(menu[0], 'menu').options.onShow\r\n\t\t\t\t\t\t\t\t\t.call(menu[0]);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t},\r\n\t\thide : function(jq) {\r\n\t\t\tvar _slef = this;\r\n\t\t\treturn jq.each(function() {\r\n\t\t\t\t\t\t_slef._hideAll(this);\r\n\t\t\t\t\t});\r\n\t\t},\r\n\t\t_hideMenu : function(menu) {\r\n\t\t\tvar _self = this;\r\n\t\t\tif (!menu)\r\n\t\t\t\treturn;\r\n\r\n\t\t\thideit(menu);\r\n\t\t\tmenu.find('div.menu-item').each(function() {\r\n\t\t\t\t\t\tif (this.submenu) {\r\n\t\t\t\t\t\t\t_self._hideMenu(this.submenu);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t$(this).removeClass('menu-active');\r\n\t\t\t\t\t});\r\n\r\n\t\t\tfunction hideit(m) {\r\n\t\t\t\tm.stop(true, true);\r\n\t\t\t\tif (m[0].shadow) {\r\n\t\t\t\t\tm[0].shadow.hide();\r\n\t\t\t\t}\r\n\t\t\t\tm.hide();\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\tshow : function(jq, pos) {\r\n\t\t\tvar _self = this;\r\n\t\t\treturn jq.each(function() {\r\n\t\t\t\t\t\t_self._showMenu(this, pos);\r\n\t\t\t\t\t});\r\n\t\t},\r\n\t\tresize : function(jq, menuEl) {\r\n\t\t\tvar _self = this;\r\n\t\t\treturn jq.each(function() {\r\n\t\t\t\t\t\t_self._setMenuSize(this, $(menuEl));\r\n\t\t\t\t\t});\r\n\t\t},\r\n\t\tfindItem : function(target, text) {\r\n\t\t\tvar result = null;\r\n\t\t\tvar tmp = $('<div></div>');\r\n\t\t\tfunction find(menu) {\r\n\t\t\t\tmenu.children('div.menu-item').each(function() {\r\n\t\t\t\t\t\t\tvar item = $(target).menu('getItem', this);\r\n\t\t\t\t\t\t\tvar s = tmp.empty().html(item.text).text();\r\n\t\t\t\t\t\t\tif (text == $.trim(s)) {\r\n\t\t\t\t\t\t\t\tresult = item;\r\n\t\t\t\t\t\t\t} else if (this.submenu && !result) {\r\n\t\t\t\t\t\t\t\tfind(this.submenu);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t});\r\n\t\t\t}\r\n\t\t\tfind($(target));\r\n\t\t\ttmp.remove();\r\n\t\t\treturn result;\r\n\t\t},\r\n\t\t_setDisabled : function(target, itemEl, disabled) {\r\n\t\t\tvar t = $(itemEl);\r\n\t\t\tif (!t.hasClass('menu-item')) {\r\n\t\t\t\treturn\r\n\t\t\t}\r\n\r\n\t\t\tif (disabled) {\r\n\t\t\t\tt.addClass('menu-item-disabled');\r\n\t\t\t\tif (itemEl.onclick) {\r\n\t\t\t\t\titemEl.onclick1 = itemEl.onclick;\r\n\t\t\t\t\titemEl.onclick = null;\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tt.removeClass('menu-item-disabled');\r\n\t\t\t\tif (itemEl.onclick1) {\r\n\t\t\t\t\titemEl.onclick = itemEl.onclick1;\r\n\t\t\t\t\titemEl.onclick1 = null;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\tappendItem : function(target, param) {\r\n\t\t\tvar menu = $(target);\r\n\t\t\tif (param.parent) {\r\n\t\t\t\tif (!param.parent.submenu) {\r\n\t\t\t\t\tvar submenu = $('<div class=\"menu\"><div class=\"menu-line\"></div></div>')\r\n\t\t\t\t\t\t\t.appendTo('body');\r\n\t\t\t\t\tsubmenu.hide();\r\n\t\t\t\t\tparam.parent.submenu = submenu;\r\n\t\t\t\t\t$('<div class=\"menu-rightarrow\"></div>')\r\n\t\t\t\t\t\t\t.appendTo(param.parent);\r\n\t\t\t\t}\r\n\t\t\t\tmenu = param.parent.submenu;\r\n\t\t\t}\r\n\t\t\tif (param.separator) {\r\n\t\t\t\tvar item = $('<div class=\"menu-sep\"></div>').appendTo(menu);\r\n\t\t\t} else {\r\n\t\t\t\tvar item = $('<div class=\"menu-item\"></div>').appendTo(menu);\r\n\t\t\t\t$('<div class=\"menu-text\"></div>').html(param.text)\r\n\t\t\t\t\t\t.appendTo(item);\r\n\t\t\t}\r\n\t\t\tif (param.iconCls)\r\n\t\t\t\t$('<div class=\"menu-icon\"></div>').addClass(param.iconCls)\r\n\t\t\t\t\t\t.appendTo(item);\r\n\t\t\tif (param.id)\r\n\t\t\t\titem.attr('id', param.id);\r\n\t\t\tif (param.name) {\r\n\t\t\t\titem[0].itemName = param.name\r\n\t\t\t}\r\n\t\t\tif (param.href) {\r\n\t\t\t\titem[0].itemHref = param.href\r\n\t\t\t}\r\n\t\t\tif (param.onclick) {\r\n\t\t\t\tif (typeof param.onclick == 'string') {\r\n\t\t\t\t\titem.attr('onclick', param.onclick);\r\n\t\t\t\t} else {\r\n\t\t\t\t\titem[0].onclick = eval(param.onclick);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif (param.handler) {\r\n\t\t\t\titem[0].onclick = eval(param.handler)\r\n\t\t\t}\r\n\t\t\tif (param.disabled) {\r\n\t\t\t\tthis._setDisabled(target, item[0], true)\r\n\t\t\t}\r\n\r\n\t\t\tthis.bindMenuItemEvent(target, item);\r\n\t\t\tthis.bindMenuEvent(target, menu);\r\n\t\t\tthis._setMenuSize(target, menu);\r\n\t\t},\r\n\t\tremoveItem : function(target, itemEl) {\r\n\t\t\tfunction removeit(el) {\r\n\t\t\t\tif (el.submenu) {\r\n\t\t\t\t\tel.submenu.children('div.menu-item').each(function() {\r\n\t\t\t\t\t\t\t\tremoveit(this);\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\tvar shadow = el.submenu[0].shadow;\r\n\t\t\t\t\tif (shadow)\r\n\t\t\t\t\t\tshadow.remove();\r\n\t\t\t\t\tel.submenu.remove();\r\n\t\t\t\t}\r\n\t\t\t\t$(el).remove();\r\n\t\t\t}\r\n\t\t\tvar menu = $(itemEl).parent();\r\n\t\t\tremoveit(itemEl);\r\n            this._setMenuSize(target, menu);\r\n\t\t},\r\n\t\toptions:function(target){\r\n\t\t\t\tvar opts = $(target).data('menu').options;\r\n\t\t\t\treturn opts;\r\n\t\t},\r\n\r\n\t\t_setVisible : function(target, itemEl, visible) {\r\n\t\t\tvar menu = $(itemEl).parent();\r\n\t\t\tif (visible) {\r\n\t\t\t\t$(itemEl).show();\r\n\t\t\t} else {\r\n\t\t\t\t$(itemEl).hide();\r\n\t\t\t}\r\n\t\t\tthis._setMenuSize(target, menu);\r\n\t\t},\r\n\r\n\t\tdestroy : function(target) {\r\n\t\t\tvar _slef = this;\r\n            this._destroyMenu(_slef.element);\r\n\t\t},\r\n\t\t_destroyMenu : function(target) {\r\n\t\t\tvar _self=this;\r\n\t\t\t$(target).children('div.menu-item').each(function() {\r\n\t\t\t\t\t\t_self.removeItem(target, this);\r\n\t\t\t\t\t});\r\n\t\t\tif (target.shadow)\r\n\t\t\t\ttarget.shadow.remove();\r\n\t\t\t$(target).remove();\r\n\t\t},\r\n\t\tsetText : function(jq, param) {\r\n\t\t\treturn jq.each(function() {\r\n\t\t\t\t\t\t$(param.target).children('div.menu-text')\r\n\t\t\t\t\t\t\t\t.html(param.text);\r\n\t\t\t\t\t});\r\n\t\t},\r\n/**\r\n * set the menu icon class param: { target: DOM object, indicate the menu item\r\n * iconCls: the menu item icon class }\r\n */\r\n\t\tsetIcon : function(jq, param) {\r\n\t\t\treturn jq.each(function() {\r\n\t\t\t\t\t\t$(param.target).children('div.menu-icon').remove();\r\n\t\t\t\t\t\tif (param.iconCls) {\r\n\t\t\t\t\t\t\t$('<div class=\"menu-icon\"></div>')\r\n\t\t\t\t\t\t\t\t\t.addClass(param.iconCls)\r\n\t\t\t\t\t\t\t\t\t.appendTo(param.target);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t},\r\n/**\r\n * get the menu item data that contains the following property: { target: DOM\r\n * object, the menu item id: the menu id text: the menu item text iconCls: the\r\n * icon class href: a remote address to redirect to onclick: a function to be\r\n * called when the item is clicked }\r\n */\r\n\t\tgetItem : function(jq, itemEl) {\r\n\t\t\tvar t = $(itemEl);\r\n\t\t\tvar item = {\r\n\t\t\t\ttarget : itemEl,\r\n\t\t\t\tid : t.attr('id'),\r\n\t\t\t\ttext : $.trim(t.children('div.menu-text').html()),\r\n\t\t\t\tdisabled : t.hasClass('menu-item-disabled'),\r\n\t\t\t\t// href: t.attr('href'),\r\n\t\t\t\t// name: t.attr('name'),\r\n\t\t\t\tname : itemEl.itemName,\r\n\t\t\t\thref : itemEl.itemHref,\r\n\t\t\t\tonclick : itemEl.onclick\r\n\t\t\t};\r\n\t\t\tvar icon = t.children('div.menu-icon');\r\n\t\t\tif (icon.length) {\r\n\t\t\t\tvar cc = [];\r\n\t\t\t\tvar aa = icon.attr('class').split(' ');\r\n\t\t\t\tfor (var i = 0; i < aa.length; i++) {\r\n\t\t\t\t\tif (aa[i] != 'menu-icon') {\r\n\t\t\t\t\t\tcc.push(aa[i]);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\titem.iconCls = cc.join(' ');\r\n\t\t\t}\r\n\t\t\treturn item;\r\n\t\t},\r\n\t\tenableItem : function(jq, itemEl) {\r\n\t\t\tvar _slef = this;\r\n\t\t\treturn jq.each(function() {\r\n\t\t\t\t\t\t_slef._setDisabled(this, itemEl, false);\r\n\t\t\t\t\t});\r\n\t\t},\r\n\t\tdisableItem : function(jq, itemEl) {\r\n\t\t\tvar _slef = this;\r\n\t\t\treturn jq.each(function() {\r\n\t\t\t\t\t\t_slef._setDisabled(this, itemEl, true);\r\n\t\t\t\t\t});\r\n\t\t},\r\n\t\tshowItem : function(jq, itemEl) {\r\n\t\t\tvar _slef = this;\r\n\t\t\treturn jq.each(function() {\r\n\t\t\t\t\t\t_slef._setVisible(this, itemEl, true);\r\n\t\t\t\t\t});\r\n\t\t},\r\n\t\thideItem : function(jq, itemEl) {\r\n\t\t\tvar _slef = this;\r\n\t\t\treturn jq.each(function() {\r\n\t\t\t\t\t\t_slef._setVisible(this, itemEl, false);\r\n\t\t\t\t\t});\r\n\t\t},\r\n\t\t_setSize : function(target, param) {\r\n\r\n\t\t\tvar opts = $.data(target, 'menu').options;\r\n\r\n\t\t\tif (param) {\r\n\t\t\t\tif (param.width)\r\n\t\t\t\t\topts.width = param.width;\r\n\t\t\t\tif (param.height)\r\n\t\t\t\t\topts.height = param.height;\r\n\t\t\t}\r\n\t\t\tif (opts.width) {\r\n\t\t\t\t$(target).outerWidth(opts.width);\r\n\t\t\t}\r\n\t\t\tif (opts.height) {\r\n\t\t\t\t$(target).outerHeight(opts.height);\r\n\t\t\t}\r\n\t\t\t//$(target).menu('resize', menu[0]);\r\n\r\n\t\t},\r\n\t\tsetSize : function(jq, param) {\r\n\t\t\tvar _slef = this;\r\n\t\t\treturn jq.each(function() {\r\n\r\n\t\t\t\t\t\t_slef._setSize(this, param);\r\n\t\t\t\t\t});\r\n\t\t}\r\n\t});\r\n\r\n\t\r\n\t$.fn.menu = function(option, param){\r\n\t\tvar methodReturn = undefined;\r\n\t\tvar $set = this.each(function() {\r\n\t\t\t\t\tvar $this = $(this);\r\n\t\t\t\t\tvar data = $this.data('menuObj'),state = $this.data('menu');\r\n\t\t\t\t\tvar options = typeof option === 'object' && option;\r\n\t\t\t\t\tif (!state){\r\n\t\t\t\t\t\t$this.data('menuObj', (data = new Menu(this,options)));\t\r\n\t\t\t\t\t\tdata.init(this);\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\t$.extend(state.options, options);\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\r\n\t\t\t\t\tif (typeof option === 'string')\r\n\t\t\t\t\t\tmethodReturn = data[option]($this,param);\r\n\t\t\t\t});\r\n\t\treturn (methodReturn === undefined) ? $set : methodReturn;\r\n\t};\r\n\r\n\t$.fn.menu.Constructor = Menu;\r\n\treturn Menu;\r\n});\n",
    "/**\r\n * 按钮控件\r\n * \r\n * @author sjq\r\n */\r\ndefine('app/widgets/button/app-menubutton',[\"app/core/app-jquery\", \"app/core/app-core\", \"app/core/app-options\", \"app/widgets/menu/app-menu\", \"app/widgets/button/app-button\"], function($, $A,\r\n\t\tOptions,Menu,Button) {\r\n\t/**\r\n\t * @class\r\n\t * @name MenuButton\r\n\t * @classdesc 下拉按钮\r\n\t * @extends Button\r\n\t * \r\n\t */\r\n\tvar MenuButton = Button.extend({\r\n\t\t\t\tinitialize : function(options) {\r\n\t\t\t\t\tif (!options) {\r\n\t\t\t\t\t\toptions = {};\r\n\t\t\t\t\t}\r\n\t\t\t\t\tButton.superclass.initialize.call(this, options);\r\n\t\t\t\t\tthis.attrs= $.extend({},\r\n\t\t\t\t\t\t\t\t\t\tOptions.appDefaults.MenuButton,\r\n\t\t\t\t\t\t\t\t\t\toptions, this.parseOptions());\r\n\t\t\t\t   this.init();\r\n\t\t\t\t},\r\n\t\t\t\tparseOptions : function() {\r\n\t\t\t\t\tvar t = $(this.element);\r\n\t\t\t\t\treturn $.extend({}, t.parseOptions(this.element, {\r\n\t\t\t\t\t\t\t\tdisabled : $(this).attr('disabled') == 'true',\r\n\t\t\t\t\t\t\t\tplain : ($(this).attr('plain') == 'false'\r\n\t\t\t\t\t\t\t\t\t\t? false\r\n\t\t\t\t\t\t\t\t\t\t: true),\r\n\t\t\t\t\t\t\t\tmenu : $(this).attr('menu'),\r\n\t\t\t\t\t\t\t\tduration : (parseInt($(this).attr('duration')) || 100)\r\n\t\t\t\t\t\t\t}));\r\n\t\t\t\t},\r\n\t\t\t\t/**\r\n\t\t\t\t * 初始化\r\n\t\t\t\t */\r\n\t\t\t\tinit : function() {\r\n\t\t\t\t\tvar target=this.element;\r\n\t\t\t\t\tvar opts = this.attrs;\r\n\t\t\t\t\tif (typeof opts.menu==\"string\"){\r\n\t\t\t\t\t\tif (opts.menu && opts.menu.indexOf(\"#\") < 0) {\r\n\t\t\t\t\t\t\topts.menu = \"#\" + opts.menu;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tvar _slef = this;\r\n\t\t\t\t\tvar btn = $(target);\r\n\t\t\t\t\tbtn.removeClass('m-btn-active m-btn-plain-active').addClass(\"m-btn\");\r\n\t\t\t\t\tbtn.button(opts);\r\n\t\t\t\t\tvar txtcon = btn.find(\".l-btn-left\");\r\n\t\t$(\"<span></span>\").addClass(\"m-btn-downarrow\").appendTo(txtcon);\r\n\t\t$(\"<span></span>\").addClass(\"m-btn-line\").appendTo(txtcon);\r\n\t\t\t\t\tif (opts.menu) {\r\n\t\t\t\t\t\t$(opts.menu).menu({\r\n\t\t\t\t\t\t\tonShow : function() {\r\n\t\t\t\t\t\t\t\tbtn.addClass((opts.plain == true)\r\n\t\t\t\t\t\t\t\t\t\t? 'm-btn-plain-active'\r\n\t\t\t\t\t\t\t\t\t\t: 'm-btn-active');\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\tonHide : function() {\r\n\t\t\t\t\t\t\t\tbtn.removeClass((opts.plain == true)\r\n\t\t\t\t\t\t\t\t\t\t? 'm-btn-plain-active'\r\n\t\t\t\t\t\t\t\t\t\t: 'm-btn-active');\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t};\r\n\t\t\t\t\tbtn.unbind('.menubutton');\r\n\t\t\t\t\tif (opts.menu) {\r\n\t\t\t\t\t\tbtn.bind('click.menubutton', function() {\r\n\t\t\t\t\t\t\t\t\tif (!getButtonState()) {\r\n\t\t\t\t\t\t\t\t\t\tshowMenu();\r\n\t\t\t\t\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\tvar timeout = null;\r\n\t\t\t\t\t\tbtn.bind('mouseenter.menubutton', function() {\r\n\r\n\t\t\t\t\t\t\t\t\tif (!getButtonState()) {\r\n\t\t\t\t\t\t\t\t\t\ttimeout = setTimeout(function() {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tshowMenu();\r\n\t\t\t\t\t\t\t\t\t\t\t\t}, opts.duration);\r\n\t\t\t\t\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t}).bind('mouseleave.menubutton', function() {\r\n\t\t\t\t\t\t\t\t\tif (timeout) {\r\n\t\t\t\t\t\t\t\t\t\tclearTimeout(timeout);\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t$(opts.menu).triggerHandler(\"mouseleave\");\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tfunction showMenu() {\r\n\t\t\t\t\t\tvar left = btn.offset().left;\r\n\t\t\t\t\t\tif (left + $(opts.menu).outerWidth() + 5 > $(window)\r\n\t\t\t\t\t\t\t\t.width()) {\r\n\t\t\t\t\t\t\tleft = $(window).width()\r\n\t\t\t\t\t\t\t\t\t- $(opts.menu).outerWidth() - 5;\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t$('.menu-top').menu('hide');\r\n\t\t\t\t\t\t$(opts.menu).menu('show', {\r\n\t\t\t\t\t\t\t\t\talignTo : btn,\r\n\t\t\t\t\t\t\t\t\tautoWidth : true,\r\n\t\t\t\t\t\t\t\t\tmenuAlign : opts.menuAlign\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\tbtn.blur();\r\n\t\t\t\t\t};\r\n\r\n\t\t\t\t\tfunction getButtonState() {\r\n\t\t\t\t\t\treturn $(target).button(\"options\").disabled;\r\n\t\t\t\t\t};\r\n\t\t\t\t},\r\n\t\t\t\t_setDisabled : function(target, disabled) {\r\n\t\t\t\t\tvar opts = this.attrs;\r\n\t\t\t\t\tvar target=this.element;\r\n\t\t\t\t\t// $(target).removeClass(\"l-btn-disabled\r\n\t\t\t\t\t// l-btn-plain-disabled\");\r\n\t\t\t\t\tif (disabled) {\r\n\t\t\t\t\t\topts.disabled = true;\r\n\t\t\t\t\t\t$(target).button(\"disable\");\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\topts.disabled = false;\r\n\t\t\t\t\t\t$(target).enable(\"enable\");\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\t/**\r\n\t\t\t\t * 启用\r\n\t\t\t\t * @memberof Button\r\n\t\t\t\t */\r\n\t\t\t\tenable : function(jq) {\r\n\t\t\t\t\tthis._setDisabled(false);\r\n\t\t\t\t},\r\n\t\t\t\t/**\r\n\t\t\t\t * 禁用\r\n\t\t\t\t * @memberof Button\r\n\t\t\t\t */\r\n\t\t\t\tdisable : function(jq) {\r\n\t\t\t\t\tthis._setDisabled( true);\r\n\t\t\t\t},\r\n\t\t\t\tdestroy:function () {\r\n\t\t\t\t\tvar opts = this.attrs;\r\n\t\t\t\t\topts.menu&&$(opts.menu).length&&$(opts.menu).data('menuObj').destroy();\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\r\n\t$.fn.menubutton = function(option) {\r\n\t\tvar methodReturn = undefined;\r\n\t\tvar $set = this.each(function() {\r\n\t\t\t\t\tvar $this = $(this);\r\n\t\t\t\t\tvar data = $this.data('menubuttonObj'), state = $this\r\n\t\t\t\t\t\t\t.data('menubutton');\r\n\t\t\t\t\tvar options = typeof option === 'object' ?option:{};\r\n\t\t\t\t\tif (data) {\r\n\t\t\t\t\t\t$.extend(data.attrs, options);\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\toptions=$.extend({},options,{\"element\":this});\r\n\t\t\t\t\t\t$this.data('menubuttonObj', (data = new MenuButton(options)));\r\n\t\t\t\t\t\t$(this).removeAttr('disabled');\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (typeof option === 'string')\r\n\t\t\t\t\t\tmethodReturn = data[option]($this);\r\n\r\n\t\t\t\t});\r\n\t\treturn (methodReturn === undefined) ? $set : methodReturn;\r\n\r\n\t};\r\n\r\n\treturn MenuButton;\r\n});\n",
    "define('app/widgets/grid/app-grid-toolbar',['app/core/app-class', 'app/core/app-core', \r\n        'app/widgets/button/app-menubutton'], function(Class, App) {\r\n\r\n    'use strict';\r\n\r\n    var GridToolbar = Class.create({\r\n    \t/**\r\n\t\t * 初始化工具栏\r\n\t\t */\r\n\t\t_initToolbar: function(){\r\n\t\t\tvar btns = this.setting.toolbar;\r\n\t\t\tif(!btns || btns.length == 0){\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tvar result = ''\r\n\t\t\t\t,$ul = this.$toolbar.find('>ul');\r\n\t\t\tfor(var i = 0 ;i < btns.length; i++){\r\n\t\t\t\tvar btn = btns[i]\r\n\t\t\t\t\t,$btn = null;\r\n\t\t\t\tif(!btn.id){\r\n\t\t\t\t\tbtn.id = App.uuid();\r\n\t\t\t\t}\r\n\t\t\t\tif(btn.children && btn.children.length > 0){\r\n\t\t\t\t\t$btn = initMenuButtonHtml(btn);\r\n\t\t\t\t}else{\r\n\t\t\t\t\t$btn = initButtonHtml(btn);\r\n\t\t\t\t}\r\n\t\t\t\t$ul.append($('<li>').append($btn));\r\n\t\t\t}\r\n\t\t},\r\n\t\t/**\r\n\t\t * 禁用工具条的按钮\r\n\t\t * @param btnId {String} 按钮id\r\n\t\t * @example $('#demo').grid('disableToolbarBtn', 'addBtn');\r\n\t\t * @memberof grid-class\r\n\t\t * @instance\r\n\t\t */\r\n\t\tdisableToolbarBtn: function(btnId){\r\n\t\t\tvar $btn = this.$toolbar.find('#' + btnId);\r\n\t\t\t$btn.button('disable');\r\n\t\t},\r\n\t\t/**\r\n\t\t * 启用工具条的按钮\r\n\t\t * @param btnId {String} 按钮id\r\n\t\t * @example $('#demo').grid('enableToolbarBtn', 'addBtn');\r\n\t\t * @memberof grid-class\r\n\t\t * @instance\r\n\t\t */\r\n\t\tenableToolbarBtn: function(btnId){\r\n\t\t\tvar $btn = this.$toolbar.find('#' + btnId);\r\n\t\t\t$btn.button('enable');\r\n\t\t}\r\n    });\r\n    /**\r\n\t *生成菜单按钮\r\n\t */\r\n\tfunction initMenuButtonHtml(btn){\r\n\t\tvar $btn = $('<a id=\"' + btn.id + '\" >' + btn.text + '</a>');\r\n\t\tbtn.menuId = App.uuid();\r\n\t\tinitMenu(btn);\r\n\t\t$btn.menubutton({\r\n\t\t\ticonCls: btn.iconCls,\r\n\t\t\tonClick: btn.handler,\r\n\t\t\tplain: false,\r\n\t\t\tmenu: btn.menuId,\r\n\t\t\tmenuStyle: btn.style ? btn.style : 'width:150px'\r\n\t\t});\r\n\t\treturn $btn;\r\n\t\tfunction initMenu(btn){\r\n\t\t\tvar children = btn.children\r\n\t\t\t\t,$menu = $('<div id=\"' + btn.menuId + '\" style=\"' + btn.menuStyle + ';display:none;\"></div>');\r\n\t\t\tfor(var i = 0; i < children.length; i++){\r\n\t\t\t\tvar child = children[i];\r\n\t\t\t\tif(child.menuSep){\r\n\t\t\t\t\t$menu.append('<div class=\"menu-sep\"></div>');\r\n\t\t\t\t}else{\r\n\t\t\t\t\tinitMenuItem(child);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t$.$appPanelContainer.append($menu);\r\n\t\t\tfunction initMenuItem(child){\r\n\t\t\t\tif(!child.id){\r\n\t\t\t\t\tchild.id = App.uuid();\r\n\t\t\t\t}\r\n\t\t\t\tvar $child = $('<div id=\"' + child.id \r\n\t\t\t\t\t+ '\" ' + getDataOptions(child) + '>' + child.text + '</div>');\r\n\t\t\t\t$menu.append($child);\r\n\t\t\t\t$child.on('click.grid.toolbar.api', function(e){\r\n\t\t\t\t\tif(child.handler){\r\n\t\t\t\t\t\tchild.handler();\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t\tfunction getDataOptions(btn){\r\n\t\t\t\tvar result = '';\r\n\t\t\t\tif(btn.iconCls){\r\n\t\t\t\t\tresult += 'iconCls:\\'' + btn.iconCls + '\\'';\r\n\t\t\t\t}\r\n\t\t\t\tif(result){\r\n\t\t\t\t\tresult = 'data-options=\"'+ result +'\"';\r\n\t\t\t\t}\r\n\t\t\t\treturn result;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\t/**\r\n\t * 生成普通按钮\r\n\t */\r\n\tfunction initButtonHtml(btn){\r\n\t\tvar $btn = $('<a id=\"' + btn.id + '\" >' + btn.text + '</a>');\r\n\t\t$btn.button({\r\n\t\t\ticonCls: btn.iconCls,\r\n\t\t\tonClick: btn.handler\r\n\t\t});\r\n\t\treturn $btn;\r\n\t}\r\n    return GridToolbar;\r\n});\n",
    "/**\r\n * 网格控件\r\n * @author Mr.T\r\n */\r\ndefine('app/widgets/grid/app-grid',['app/core/app-base', 'app/core/app-jquery', 'app/core/app-options', 'app/core/app-core',\r\n        'app/data/app-ajax', 'app/widgets/grid/app-grid-headerContextMenu', 'app/widgets/grid/app-grid-editor',\r\n        'app/widgets/grid/app-grid-formatter', 'app/widgets/grid/app-grid-print', 'app/widgets/grid/app-grid-sort',\r\n        'app/widgets/grid/app-grid-summary', 'app/widgets/grid/app-grid-ext', 'app/widgets/grid/app-grid-pager', \r\n        'app/widgets/grid/app-grid-merger', 'app/widgets/grid/app-grid-toolbar', 'jquery/jquery.mousewheel'],\r\n    function(Base, $, Options, App, AppAjax, GridHeaderContextMenu,\r\n             GridEditor, Formatter, GridPrint, GridSort, GridSummary,\r\n             GridExt, GridPager, GridMerger, GridToolbar) {\r\n\r\n\t'use strict';\r\n\tvar scrollBarWidth = 18\r\n\t\t,cellBorderWidth = 1\r\n\t\t,minWidth = 20\r\n\t\t,currentRowCls = 'row-current'\r\n\t\t,hoverRowCls = 'row-hover'\r\n\t\t,selectedRowCls = 'row-selected'\r\n\t\t,checkedRowCls = 'row-checked'\r\n\t\t,loading = '正在努力加载中...'\r\n\t\t,empty = '无记录'\r\n\t\t,error = '数据加载出错'\r\n\t\t,IE8_TD_EMPTY = ' '\r\n\t\t,VIEW_TYPE={GRID_VIEW:'GridView',CARD_VIEW:'CardView'};//视圉类型，GRID_VIEW为网格视力,CARD_VIEW为卡片式视图\r\n\r\n\t/**\r\n\t * @class\r\n\t * @classdesc 表格\r\n\t * @name grid-class\r\n\t * @desc 表格的初始化方法\r\n\t * @param {input} table 要渲染的table组件\r\n\t * @param {object} options 组件的选项设置\r\n\t * @author Mr.T\r\n\t * @example $('#demo').grid({\r\n\t * &#9;title: '数据控制',\r\n\t * &#9;rownumbers: true,\r\n\t * &#9;url: 'platform/sample/base/ui/gridDemo.do',\r\n\t * &#9;columns: [\r\n\t * &#9;[\r\n\t * &#9;&#9;{title:'组合1-3',colspan:3},\r\n\t * &#9;&#9;{title:'主列标题7=1',field:'c1',width:200,rowspan:2},\r\n\t * &#9;&#9;{title:'组合3-6',colspan:3}\r\n\t * &#9;],[\r\n\t * &#9;&#9;{title: '主列标题1',field: 'c1',width: 100},\r\n\t * &#9;&#9;{title: '主列标题2',field: 'c2',width: 120},\r\n\t * &#9;&#9;{title: '主列标题3',field: 'c3',width: 150},\r\n\t * &#9;&#9;{title: '主列标题4',field: 'c4',width: 200},\r\n\t * &#9;&#9;{title: '主列标题5',field: 'c5',width: 250},\r\n\t * &#9;&#9;{title: '主列标题6',field: 'c6',width: 500}\r\n\t * &#9;]]\r\n\t * });\r\n\t *\r\n\t */\r\n\tvar Grid = Base.extend({\r\n\t\tImplements: [GridHeaderContextMenu, GridEditor, GridPrint, GridSort, GridSummary, GridExt, GridPager, GridMerger, GridToolbar],\r\n\t\tinitialize: function(table, options) {\r\n\t\t\tthis.$t = $(table).css({display:'none'});\r\n\t\t\tthis.$t.removeClass('app-grid');\r\n\t\t\tthis.options = $.extend(true, {}, options);\r\n\t\t\tthis._init();\r\n\r\n\t\t},\r\n\t\t/**\r\n\t\t * 初始化网格\r\n\t\t */\r\n\t\t_init: function(){\r\n\t\t\tthis._initOptions();\r\n\t\t\tthis._eventRegister();\r\n\t\t\tthis._initElement();\r\n\t\t\tthis._initToolbar();\r\n\t\t\tthis._initPagination();\r\n\t\t\tthis._initHeaderHtml();\r\n\t\t\tthis._switchView(this.viewType,false);\r\n\t\t\tthis._fixHeight();\r\n\t\t\tthis._initData();\r\n\t\t\tthis._fit();\r\n\t\t\tthis._registEvents();\r\n\t\t\tthis._initEditor();\r\n\t\t\tthis._initContextMenu();\r\n\t\t},\r\n\t\t/**\r\n\t\t * 视力切换 by sjq\r\n\t\t */\r\n\t\t_switchView:function(viewType,isLoadData){\r\n\t\t\tthis.$tableBodyMain.find('>div>table>tbody').html('');\r\n\t\t\tif (viewType==VIEW_TYPE.GRID_VIEW){\r\n\t\t\t\tthis.$tableBody.removeClass(\"grid-card-view\");\r\n\t\t\t\tthis.$tableHeader.show();\r\n\t\t\t\tif (this.setting.view&&this.setting.view[\"region\"]){\r\n\t\t\t\t\tthis.$cardRegion[this.setting.view[\"region\"]].find('.grid-body-card-form').hide();\r\n\t\t\t\t}\r\n\t\t\t\tif (this.setting.view.cardListTpl){\r\n\t\t\t\t\t\r\n\t\t\t\t\tif (this.$cardRegion[\"center\"].find(\".grid-card-view-list\").length>0){\r\n\t\t\t\t\t\t var $firstChild=this.$cardRegion[\"center\"].find(\".grid-body-content\");\r\n\t\t\t\t\t\t var carListTpl=$firstChild.children();\r\n\t\t\t\t\t\t $firstChild.append(this.$cardRegion[\"center\"].find('.grid-view'));\r\n\t\t\t\t\t\t carListTpl.remove();\r\n\t\t\t\t\t\t//this.$cardRegion[\"center\"].find(\".grid-body-content\").append(();\r\n\t\t\t\t\t}\r\n\t\t\t\t\tthis.$cardRegion[\"center\"].find('.grid-view').show();\r\n\t\t\t\t\t\r\n\t\t\t\t}\r\n\t\t\t   \r\n\t\t\t}\r\n\t\t\tif (viewType==VIEW_TYPE.CARD_VIEW){\r\n\t\t\t\tthis.$cardRegion[this.setting.view[\"region\"]].find('.grid-body-card-form').show();\r\n\t\t\t\tif (this.setting.view.formEl){\r\n\t\t\t\t\tif (!this.setting.view.loadForm){\r\n\t\t\t\t\t\tif (typeof this.setting.view.formEl==\"string\"){\r\n\t\t\t\t\t\t\tthis.$cardRegion[this.setting.view[\"region\"]].find('.grid-body-card-form').append($A(\"#\"+this.setting.view.formEl));\r\n\r\n\t\t\t\t\t\t\tthis.setting.view.formEl=$A(\"#\"+this.setting.view.formEl);\r\n\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tthis.$cardRegion[this.setting.view[\"region\"]].find('.grid-body-card-form').append(this.setting.view.formEl);\r\n\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tthis.setting.view.loadForm=true;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tthis.setting.view.formEl.show();\r\n\t\t\t\t}\r\n\t\t\t\tthis.$tableBody.addClass(\"grid-card-view\");\r\n\t\t\t\tif (this.setting.view.cardListTpl){\r\n\t\t\t\t\tif (this.$cardRegion[\"center\"].find(\".grid-card-view-list\").length==0){\r\n\t\t\t\t\t\tvar cardListTpl=$(this.setting.view.cardListTpl);\r\n\t\t\t\t\t\tthis.$cardRegion[\"center\"].find(\".grid-body-content\").append(cardListTpl);\r\n\t\t\t\t\t\tcardListTpl.find(\".grid-card-view-list\").append(this.$cardRegion[\"center\"].find('.grid-view'));\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tthis.$tableHeader.hide();\r\n\t\t\t\t this.$tableBodyMessage.hide();\r\n\t\t\t}\r\n\t\t\tif (isLoadData){\r\n\t\t\t   /// this.reflashData();\r\n\t\t\t\tthis._loadData(this.data, 1);\r\n\t\t\t\tthis.resize();\r\n\t\t\t}\r\n\t\t},\r\n\t\t/**\r\n\t\t * 初始化设置\r\n\t\t * @param options\r\n\t\t */\r\n\t\t_initOptions: function (){\r\n\t\t\tvar customSetting = $.extend(this._getAttrOptions(), this.options);\r\n\t\t\tif($.isFunction(customSetting.beforeRender)){\r\n\t\t\t\tcustomSetting.beforeRender.call(this, customSetting);\r\n\t\t\t}\r\n\t\t\tvar s = this.setting = $.extend({}, Options.appDefaults.Grid, customSetting);\r\n\t\t\tthis.setting.columnManager = false;\r\n\t\t\tthis._column = {};\r\n\t\t\tthis._fieldColumns = {};\r\n\t\t\tthis._operator = {};\r\n\t\t\tthis._rowData = {};\r\n\t\t\tthis._ts = {};\r\n\t\t\tthis._newData = {updated:{}, inserted:{}, deleted:{}};\r\n\t\t\tthis.editor = {};\r\n\t\t\tif(!s.id){\r\n\t\t\t\ts.id = App.uuid();\r\n\t\t\t}\r\n\t\t\tif(s.headRowHeight == 0){\r\n\t\t\t\ts.headRowHeight = Options.appDefaults.Grid.headRowHeight;\r\n\t\t\t}\r\n\t\t\tif(!s.url){\r\n\t\t\t\ts.url = s.action;\r\n\t\t\t}\r\n\t\t\tif(s.height != 'push'){\r\n\t\t\t\tif(!customSetting.follow){\r\n\t\t\t\t\ts.follow = 'none';\r\n\t\t\t\t}\r\n\t\t\t\tthis.$t.parent().addClass('app-grid-wrap');\r\n\t\t\t}\r\n\t\t\ts.checkbox = s.checkbox || s.multiple == true;\r\n\t\t\tthis.data = {};\r\n\t\t\tthis.data[this.setting.jsonReader.rows] = [];\r\n\t\t\tif(!s.columns){\r\n\t\t\t\ts.columns = [[]];\r\n\t\t\t}\r\n\t\t\tif(!s.frozenColumns){\r\n\t\t\t\ts.frozenColumns = [[]];\r\n\t\t\t}\r\n\t\t\tif(!s.frozenColumnsRight){\r\n\t\t\t\ts.frozenColumnsRight = [[]];\r\n\t\t\t}\r\n\r\n\t\t\tthis._splitColumns();\r\n\r\n\t\t\tif(s.queryParams){\r\n\t\t\t\tthis.setParameter(s.queryParams);\r\n\t\t\t}\r\n\t\t\tif(s.fixedParams){\r\n\t\t\t\tthis.setFixedParameter(s.fixedParams);\r\n\t\t\t}\r\n\t\t\tthis._sumCols = [];\r\n\t\t\tthis._sumColMap = {};\r\n\t\t\tthis._initSystemCol();\r\n\t\t\tthis._initFormula();\r\n\t\t\tthis._initViewColumns();\r\n\t\t\tthis._markChildrenAndParent();\r\n\t\t\tthis._rownumbers = 1;\r\n\t\t\tif(s.summary && s.summary.template){\r\n\t\t\t\ts.summary._template = new Template(s.summary.template);\r\n\t\t\t}\r\n\t\t\tif(!$.isArray(s.columns[0]) || s.columns[0].length < 1){\r\n\t\t\t\tthrow new Error('columns非二维数组，或无实体列存在');\r\n\t\t\t\t$messager.error('表格配置错误，无法展现');\r\n\t\t\t}\r\n\t\t\t/* this.setting.switchView=true;\r\n\r\n\t\t\t this.setting.view={\r\n\t\t\t type:'CardView',region:'left',\r\n\t\t\t formEl:'afaAppMenuPage_form_show',\r\n\t\t\t cardWidth:400,\r\n\r\n\t\t\t rowRender:function(rowData){\r\n\r\n\t\t\t return \"<div style='height:300px;'></div>\"\r\n\r\n\t\t\t }\r\n\r\n\t\t\t }*/\r\n\t\t\t//新增卡片视图  by sjq begin\r\n\t\t\tif (this.setting.view&&this.setting.view.isDefault){\r\n\t\t\t\tthis.viewType=this.setting.view.type;\r\n\t\t\t}else{\r\n\t\t\t\tthis.viewType=VIEW_TYPE.GRID_VIEW;\r\n\t\t\t}\r\n\t\t\t//新增卡片视图  by sjq end\r\n\t\t},\r\n\t\t/**\r\n\t\t * 分割列到各自的视图中\r\n\t\t */\r\n\t\t_splitColumns: function(){\r\n\t\t\tvar s = this.setting\r\n\t\t\t\t,cols = s.columns;\r\n\t\t\tfor(var i = 0 ; i < cols.length; i++){\r\n\t\t\t\tfor(var j = 0 ; j < cols[i].length; j++){\r\n\t\t\t\t\tvar col = cols[i][j];\r\n\t\t\t\t\tif(col.frozen == 'left'){\r\n\t\t\t\t\t\tpushMulArray(s.frozenColumns, col, i);\r\n\t\t\t\t\t}else if(col.frozen == 'right'){\r\n\t\t\t\t\t\tpushMulArray(s.frozenColumnsRight, col, i);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tfor(var i = 0 ; i < cols.length; i++){\r\n\t\t\t\tfor(var j = 0 ; j < cols[i].length; j++){\r\n\t\t\t\t\tvar col = cols[i][j];\r\n\t\t\t\t\tif(col.frozen == 'left' || col.frozen == 'right'){\r\n\t\t\t\t\t\tcols[i].splice(j, 1);\r\n\t\t\t\t\t\tj--;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tfunction pushMulArray(arr, col, level){\r\n\t\t\t\tif(arr.length <= level){\r\n\t\t\t\t\tfor(var i = 0; i <= level; i++){\r\n\t\t\t\t\t\tif(!$.isArray(arr[level])){\r\n\t\t\t\t\t\t\tarr.push([]);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tvar lvlCol = arr[level];\r\n\t\t\t\tlvlCol.push(col);\r\n\t\t\t}\r\n\t\t},\r\n\t\t/**\r\n\t\t * 事件的注册器\r\n\t\t */\r\n\t\t_eventRegister: function(){\r\n\t\t\tvar s = this.setting;\r\n\t\t\tif($.isFunction(s.afterDataRender)){\r\n\t\t\t\tthis.on('afterDataRender', s.afterDataRender);\r\n\t\t\t}\r\n\t\t\tif($.isFunction(s.beforeBeginEdit)){\r\n\t\t\t\tthis.on('beforeBeginEdit', s.beforeBeginEdit);\r\n\t\t\t}\r\n\t\t\tif($.isFunction(s.beforeEndEdit)){\r\n\t\t\t\tthis.on('beforeEndEdit', s.beforeEndEdit);\r\n\t\t\t}\r\n\t\t\tif($.isFunction(s.beforeLoad)){\r\n\t\t\t\tthis.on('beforeLoad', s.beforeLoad);\r\n\t\t\t}\r\n\t\t\tif($.isFunction(s.beforeSelect)){\r\n\t\t\t\tthis.on('beforeSelect', s.beforeSelect);\r\n\t\t\t}\r\n\t\t\tif($.isFunction(s.beforeSortColumn)){\r\n\t\t\t\tthis.on('beforeSortColumn', s.beforeSortColumn);\r\n\t\t\t}\r\n\t\t\tif($.isFunction(s.onBeginEdit)){\r\n\t\t\t\tthis.on('onBeginEdit', s.onBeginEdit);\r\n\t\t\t}\r\n\t\t\tif($.isFunction(s.onClickCell)){\r\n\t\t\t\tthis.on('onClickCell', s.onClickCell);\r\n\t\t\t}\r\n\r\n\t\t\tif($.isFunction(s.onClickRow)){\r\n\t\t\t\tthis.on('onClickRow', s.onClickRow);\r\n\t\t\t}\r\n\t\t\tif($.isFunction(s.onDataChange)){\r\n\t\t\t\tthis.on('onDataChange', s.onDataChange);\r\n\t\t\t}\r\n\t\t\tif($.isFunction(s.onDblClickCell)){\r\n\t\t\t\tthis.on('onDblClickCell', s.onDblClickCell);\r\n\t\t\t}\r\n\t\t\tif($.isFunction(s.onDblClickRow)){\r\n\t\t\t\tthis.on('onDblClickRow', s.onDblClickRow);\r\n\t\t\t}\r\n\t\t\tif($.isFunction(s.onEndEdit)){\r\n\t\t\t\tthis.on('onEndEdit', s.onEndEdit);\r\n\t\t\t}\r\n\r\n\t\t\tif($.isFunction(s.onLoadSuccess)){\r\n\t\t\t\tthis.on('onLoadSuccess', s.onLoadSuccess);\r\n\t\t\t}\r\n\t\t\tif($.isFunction(s.onSelect)){\r\n\t\t\t\tthis.on('onSelect', s.onSelect);\r\n\t\t\t}\r\n\t\t\tif($.isFunction(s.onSelectAll)){\r\n\t\t\t\tthis.on('onSelectAll', s.onSelectAll);\r\n\t\t\t}\r\n\t\t\tif($.isFunction(s.onSortColumn)){\r\n\t\t\t\tthis.on('onSortColumn', s.onSortColumn);\r\n\t\t\t}\r\n\t\t\tif($.isFunction(s.onUnselect)){\r\n\t\t\t\tthis.on('onUnselect', s.onUnselect);\r\n\t\t\t}\r\n\t\t\tif($.isFunction(s.onUnselectAll)){\r\n\t\t\t\tthis.on('onUnselectAll', s.onUnselectAll);\r\n\t\t\t}\r\n\t\t\tif($.isFunction(s.rowCls)){\r\n\t\t\t\tthis.on('rowCls', s.rowCls);\r\n\t\t\t}\r\n\t\t},\r\n\t\t/**\r\n\t\t * 获取页面元素的属性作为组件对象的属性\r\n\t\t */\r\n\t\t_getAttrOptions: function(){\r\n\t\t\tvar attr = App.getAttrFromElement(this.$t)\r\n\t\t\t\t,columns = this._getColumnOptions();\r\n\t\t\tif(columns.length > 0){\r\n\t\t\t\tattr.columns = columns;\r\n\t\t\t}\r\n\t\t\treturn attr;\r\n\t\t},\r\n\t\t/**\r\n\t\t * 获取页面元素的列配置作为组件对象的列\r\n\t\t */\r\n\t\t_getColumnOptions: function(){\r\n\t\t\tvar $tr = this.$t.find('>thead>tr')\r\n\t\t\t\t,columns = [];\r\n\t\t\t$tr.each(function(){\r\n\t\t\t\tvar t = [];\r\n\t\t\t\tvar $th = $(this).find('>th');\r\n\t\t\t\t$th.each(function(){\r\n\t\t\t\t\tvar col = App.getAttrFromElement($(this));\r\n\t\t\t\t\tcol.title = this.innerHTML;\r\n\t\t\t\t\tt.push(col);\r\n\t\t\t\t});\r\n\t\t\t\tcolumns.push(t);\r\n\t\t\t});\r\n\t\t\treturn columns;\r\n\t\t},\r\n\t\t/**\r\n\t\t * 设置系统列\r\n\t\t */\r\n\t\t_initSystemCol: function(){\r\n\t\t\tvar s = this.setting;\r\n\t\t\tif(s.checkbox){\r\n\t\t\t\tvar checkbox = {};\r\n\t\t\t\tcheckbox.sysCol = true;\r\n\t\t\t\tcheckbox.resizable = false;\r\n\t\t\t\tcheckbox.field = '_checkbox';\r\n\t\t\t\tcheckbox.title = '<input type=\"checkbox\" />';\r\n\t\t\t\tcheckbox._html = checkbox.title;\r\n\t\t\t\tcheckbox.width = 30;\r\n\t\t\t\tcheckbox.showTree = false;\r\n\t\t\t\tcheckbox.rowspan = s.columns.length;\r\n\t\t\t\ts.frozenColumns[0].unshift(checkbox);\r\n\t\t\t}else if(s.radiobox){\r\n\t\t\t\tvar radiobox = {};\r\n\t\t\t\tradiobox.sysCol = true;\r\n\t\t\t\tradiobox.resizable = false;\r\n\t\t\t\tradiobox.field = '_radiobox';\r\n\t\t\t\tradiobox.title = '<input name=\"' + App.uuid() + '\" type=\"radio\"/>';\r\n\t\t\t\tradiobox._html = radiobox.title;\r\n\t\t\t\tradiobox.width = 30;\r\n\t\t\t\tradiobox.showTree = false;\r\n\t\t\t\tradiobox.rowspan = s.columns.length;\r\n\t\t\t\ts.frozenColumns[0].unshift(radiobox);\r\n\t\t\t}\r\n\t\t\tif(s.rownumbers == 'normal' || s.rownumbers == 'repeat'){\r\n\t\t\t\tvar rownumbers = {};\r\n\t\t\t\trownumbers.sysCol = true;\r\n\t\t\t\trownumbers.resizable = false;\r\n\t\t\t\trownumbers.field = '_rownumbers';\r\n\t\t\t\trownumbers.title = '序号';\r\n\t\t\t\trownumbers.cls = 'grid-row-head';\r\n\t\t\t\trownumbers.width = 30;\r\n\t\t\t\trownumbers.showTree = false;\r\n\t\t\t\trownumbers.rowspan = s.columns.length;\r\n\t\t\t\ts.frozenColumns[0].unshift(rownumbers);\r\n\t\t\t}\r\n\t\t},\r\n\t\t/**\r\n\t\t * 收集表达式列填充到容器中\r\n\t\t */\r\n\t\t_initFormula: function(){\r\n\t\t\tvar s = this.setting;\r\n\t\t\ts.formulaContainer = [];\r\n\t\t\tthis._initFormulaColumn(s.frozenColumns);\r\n\t\t\tthis._initFormulaColumn(s.frozenColumnsRight);\r\n\t\t\tthis._initFormulaColumn(s.columns);\r\n\t\t},\r\n\t\t/**\r\n\t\t * 收集表达式列\r\n\t\t */\r\n\t\t_initFormulaColumn: function(cols){\r\n\t\t\tfor ( var i = 0; i < cols.length; i++) {\r\n\t\t\t\tfor(var j = 0; j < cols[i].length; j++){\r\n\t\t\t\t\tvar col = cols[i][j];\r\n\t\t\t\t\tif(col.field && col.formula){\r\n\t\t\t\t\t\tvar formula = col.formula;\r\n\t\t\t\t\t\tformula = formula.replace(new RegExp('getNum\\\\(\\'', 'gm'), 'formulaHelper.getNum(__obj__, \\'');\r\n\t\t\t\t\t\tformula = formula.replace(new RegExp('getStr\\\\(\\'', 'gm'), 'formulaHelper.getStr(__obj__, \\'');\r\n\t\t\t\t\t\ttry{\r\n\t\t\t\t\t\t\tnew Function([], 'return (' + formula + ');');\r\n\t\t\t\t\t\t\tthis.setting.formulaContainer.push({field: col.field, formula: formula});\r\n\t\t\t\t\t\t}catch(e){\r\n\t\t\t\t\t\t\tthis.setting.formulaContainer.push({field: col.field, formula: '\"表达式错误\"'});\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\t/**\r\n\t\t * 初始化网格列的设置\r\n\t\t * 固定列、右固定列和主视图列\r\n\t\t */\r\n\t\t_initViewColumns: function(){\r\n\t\t\tvar s = this.setting;\r\n\t\t\ts.viewLeftWidth = this._initColumnsGroup(s.frozenColumns, 'left');\r\n\t\t\ts.viewRightWidth = this._initColumnsGroup(s.frozenColumnsRight, 'right');\r\n\t\t\ts.viewMainWidth = this._initColumnsGroup(s.columns, 'main') - cellBorderWidth; //第一列没有左边框\r\n\t\t},\r\n\t\t/**\r\n\t\t * 初始化列组，并返回列组的合计宽度\r\n\t\t * @param cols\r\n\t\t */\r\n\t\t_initColumnsGroup: function(cols, viewPos){\r\n\t\t\tvar fixWidth = 0;\r\n\t\t\tif(cols){\r\n\t\t\t\tfor ( var i = 0; i < cols.length; i++) {\r\n\t\t\t\t\tfor(var j = 0; j < cols[i].length; j++){\r\n\t\t\t\t\t\tvar col = cols[i][j];\r\n\t\t\t\t\t\tif(col.hidden){\r\n\t\t\t\t\t\t\tif(col.lockTree == undefined){\r\n\t\t\t\t\t\t\t\tcol.lockTree = true;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tif(col.showTree == undefined){\r\n\t\t\t\t\t\t\t\tcol.showTree = false;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tcol = cols[i][j] = $.extend({}, Options.appDefaults.Column, col);\r\n\t\t\t\t\t\tthis._initColumn(col);\r\n\t\t\t\t\t\tfixWidth += getColumnWidth(col);\r\n\t\t\t\t\t\tcol.viewPos = viewPos;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn fixWidth;\r\n\t\t\t/**\r\n\t\t\t * 获取列的占位宽度\r\n\t\t\t */\r\n\t\t\tfunction getColumnWidth(col){\r\n\t\t\t\tvar result = 0;\r\n\t\t\t\tif(col.field){\r\n\t\t\t\t\tresult = col.width + cellBorderWidth;\r\n\t\t\t\t}\r\n\t\t\t\tif(col.hidden){\r\n\t\t\t\t\tresult = 0;\r\n\t\t\t\t}\r\n\t\t\t\treturn result;\r\n\t\t\t}\r\n\t\t},\r\n\t\t/**\r\n\t\t * 根据列设置预定义变量，\r\n\t\t * \t并返回列宽，如果列colspan大于1，则列宽为0\r\n\t\t */\r\n\t\t_initColumn: function(col){\r\n\t\t\tvar buttons = col.buttons;\r\n\t\t\tif(buttons){\r\n\t\t\t\tcol.sysCol = true;\r\n\t\t\t\tthis.setting._hasOperator = true;\r\n\t\t\t\tvar hasDisabledFunc = false;\r\n\t\t\t\tfor(var i = 0 ; i < buttons.length; i++){\r\n\t\t\t\t\tvar btn = buttons[i];\r\n\t\t\t\t\tif(!btn.id){\r\n\t\t\t\t\t\tbtn.id = App.uuid();\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif($.isFunction(btn.disabled)){\r\n\t\t\t\t\t\thasDisabledFunc = true;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tthis._operator[btn.id] = btn.handler;\r\n\t\t\t\t}\r\n\t\t\t\tinitHeadColumnButton.call(this, col, buttons);\r\n\t\t\t\tif(!hasDisabledFunc){//缓存按钮的html\r\n\t\t\t\t\tcol._html = '';\r\n\t\t\t\t\tfor(var i = 0; i < buttons.length; i++){\r\n\t\t\t\t\t\tcol._html += this._createRowBtn(buttons[i]);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif(col.colspan && col.colspan > 1){\r\n\t\t\t\tdelete col.field;\r\n\t\t\t}else if(col.field){\r\n\t\t\t\tif(typeof(col.width) == 'string'){\r\n\t\t\t\t\tcol.width = parseInt(col.width);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tvar formatter = col.formatter;\r\n\t\t\tif(formatter){\r\n\t\t\t\tif(typeof(formatter) == 'string' && formatter.indexOf('{') >= 0){\r\n\t\t\t\t\tcol.template = new Template(formatter);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif(col.summary && !this._sumColMap[col.field]){\r\n\t\t\t\tthis._sumCols.push(col);\r\n\t\t\t\tthis._sumColMap[col.field] = col;\r\n\t\t\t}\r\n\t\t\tif(col.rowHeader){\r\n\t\t\t\tcol.cls = ' grid-row-head';\r\n\t\t\t}\r\n\t\t\tif(col.cls){\r\n\t\t\t\tcol.cls += ' grid-cell-'+col.align;\r\n\t\t\t}else{\r\n\t\t\t\tcol.cls = ' grid-cell-'+col.align;\r\n\t\t\t}\r\n\t\t\tif(!col.title){\r\n\t\t\t\tcol.title = col.field;\r\n\t\t\t}\r\n\t\t\tcol._cid = App.uuid();\r\n\t\t\tthis._column[col._cid] = col;\r\n\t\t\tthis._fieldColumns[col.field] = col;\r\n\t\t\tif(col.titleVar){\r\n\t\t\t\tif(!this._titleVarColumns){\r\n\t\t\t\t\tthis._titleVarColumns = {};\r\n\t\t\t\t}\r\n\t\t\t\tcol.oriTitle = col.title;\r\n\t\t\t\tthis._titleVarColumns[col._cid] = col;\r\n\t\t\t}\r\n\t\t\tinitBodyTdAttrExp(col);\r\n\t\t\tinitFooterTdAttrExp(col);\r\n\t\t\tfunction initBodyTdAttrExp(col){\r\n\t\t\t\tif(!col.field){\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tvar attr = '_cid=\"' + col._cid + '\"';\r\n\t\t\t\tif(col.editor && (!col.editor.options || (col.editor.options && !col.editor.options.readonly ))){\r\n\t\t\t\t\tcol.cls = col.cls ? col.cls + ' grid-td-editable' : 'grid-td-editable'\r\n\t\t\t\t}\r\n\t\t\t\tif(col.field){\r\n\t\t\t\t\tattr += ' field=\"' + col.field + '\"';\r\n\t\t\t\t}\r\n\t\t\t\tif(col.buttons){\r\n\t\t\t\t\tattr += ' opts=\"true\"';\r\n\t\t\t\t}\r\n\t\t\t\tcol.bodyTdAttrExp = attr;\r\n\t\t\t}\r\n\t\t\tfunction initFooterTdAttrExp(col){\r\n\t\t\t\tif(!col.field){\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tvar attr = '_cid=\"' + col._cid + '\"';\r\n\t\t\t\tif(col.field){\r\n\t\t\t\t\tattr += ' field=\"' + col.field + '\"';\r\n\t\t\t\t}\r\n\t\t\t\tif(col.buttons){\r\n\t\t\t\t\tattr += ' opts=\"true\"';\r\n\t\t\t\t}\r\n\t\t\t\tcol.footerTdAttrExp = attr;\r\n\t\t\t}\r\n\t\t\t/**\r\n\t\t\t * 生成表头按钮\r\n\t\t\t */\r\n\t\t\tfunction initHeadColumnButton(col, buttons){\r\n\t\t\t\tvar title = col.title + '';\r\n\t\t\t\tif(isNaN(title.replaceAll(',', ''))){\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tvar bis = title.split(',')\r\n\t\t\t\t\t,btitle = '';\r\n\t\t\t\tfor(var i = 0; i < bis.length; i++){\r\n\t\t\t\t\tvar bi = bis[i]\r\n\t\t\t\t\t\t,btn = buttons[bi];\r\n\t\t\t\t\tif(!btn){\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\tbtitle += this._createRowBtn(btn);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tbis.sort();\r\n\t\t\t\tfor(var i = bis.length - 1; i >= 0; i--){\r\n\t\t\t\t\tbuttons.splice(bis[i], 1);\r\n\t\t\t\t}\r\n\t\t\t\tcol._isBtn = true;\r\n\t\t\t\tcol.title = btitle;\r\n\t\t\t}\r\n\t\t},\r\n\t\t/**\r\n\t\t * 生成按钮\r\n\t\t */\r\n\t\t_createRowBtn: function(btn, rowData, rowIndex){\r\n\t\t\tvar disabled = '';\r\n\t\t\tif($.isFunction(btn.disabled)){\r\n\t\t\t\tif(btn.disabled(rowData, rowIndex)){\r\n\t\t\t\t\tdisabled = ' disabled';\r\n\t\t\t\t}\r\n\t\t\t}else if(btn.disabled === true){\r\n\t\t\t\tdisabled = ' disabled';\r\n\t\t\t}\r\n\t\t\treturn '<a id=\"' + btn.id + '\" class=\"rowBtn' +\r\n\t\t\t\tdisabled + '\" tab-index=\"-1\">' +\r\n\t\t\t\t'<i class=\"' + btn.iconCls + '\" title=\"' + btn.text + '\"></i>' +\r\n\t\t\t\t'</a>';\r\n\t\t},\r\n\t\t/**\r\n\t\t * 绑定行的编辑\r\n\t\t */\r\n\t\t_onRowOperatorBtnClick: function(e){\r\n\t\t\tvar $btn = $(e.currentTarget);\r\n\t\t\tif($btn.hasClass('disabled')){\r\n\t\t\t\te.stopPropagation();\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tvar bid = $btn.attr('id')\r\n\t\t\t\t,$row = $btn.closest('tr')\r\n\t\t\t\t,rowIndex = $row.index()\r\n\t\t\t\t,rowData = this._converRowToData($row)[0];\r\n\t\t\tthis._renderRow(rowIndex);\r\n\t\t\tif(this._operator[bid]){\r\n\t\t\t\tthis._operator[bid].call(this, rowData, rowIndex);\r\n\t\t\t\te.stopPropagation();\r\n\t\t\t}\r\n\t\t},\r\n\t\t/**\r\n\t\t * 标注列的上下级关系\r\n\t\t */\r\n\t\t_markChildrenAndParent: function(){\r\n\t\t\tvar level = this.setting.columns.length\r\n\t\t\t\t,colMap = this._column;\r\n\t\t\ttry{\r\n\t\t\t\tmark(this.setting.frozenColumns);\r\n\t\t\t}catch(e){\r\n\t\t\t\tthrow new Error('左固定列设置错误：' + e);\r\n\t\t\t}\r\n\t\t\ttry{\r\n\t\t\t\tmark(this.setting.columns);\r\n\t\t\t}catch(e){\r\n\t\t\t\tthrow new Error('主视图列设置错误：' + e);\r\n\t\t\t}\r\n\t\t\ttry{\r\n\t\t\t\tmark(this.setting.frozenColumnsRight);\r\n\t\t\t}catch(e){\r\n\t\t\t\tthrow new Error('右固定列设置错误：' + e);\r\n\t\t\t}\r\n\t\t\t/**\r\n\t\t\t * 标注父节点和子节点\r\n\t\t\t */\r\n\t\t\tfunction mark(view){\r\n\t\t\t\tif(!view){\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tvar matrix = buildMatrix(view);\r\n\t\t\t\tfor(var i = 1; i < matrix.length; i++){\r\n\t\t\t\t\tfor(var j = 0; j < matrix[i].length; j++){\r\n\t\t\t\t\t\tvar parentColumn = matrix[i-1][j]\r\n\t\t\t\t\t\t\t,thisColumn = matrix[i][j];\r\n\t\t\t\t\t\tif(typeof(thisColumn) == 'string'){\r\n\t\t\t\t\t\t\tcontinue;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif(typeof(parentColumn) == 'string'){\r\n\t\t\t\t\t\t\tparentColumn = colMap[parentColumn];\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tthisColumn.parentColumn = parentColumn;\r\n\t\t\t\t\t\tvar children = parentColumn.children;\r\n\t\t\t\t\t\tif(!children){\r\n\t\t\t\t\t\t\tchildren = parentColumn.children = [];\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tchildren.push(thisColumn);\r\n\t\t\t\t\t\tdelete parentColumn.field;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t/**\r\n\t\t\t * 构造列矩阵\r\n\t\t\t */\r\n\t\t\tfunction buildMatrix(oriArr){\r\n\t\t\t\tvar matrix = [];\r\n\t\t\t\tfor(var i = 0 ;i < level; i++){\r\n\t\t\t\t\tmatrix.push([]);\r\n\t\t\t\t}\r\n\t\t\t\tif(level > 1 && oriArr.length == 1){\r\n\t\t\t\t\tfor(var i = 0; i < oriArr[0].length; i++){\r\n\t\t\t\t\t\toriArr[0][i].rowspan = level;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tfor(var i = 0; i < oriArr.length; i++){\r\n\t\t\t\t\tfor(var j = 0 ;j < oriArr[i].length; j++){\r\n\t\t\t\t\t\tvar col = oriArr[i][j];\r\n\t\t\t\t\t\ttileCol(col, i, matrix);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tcheckMatrix(matrix);\r\n\t\t\t\treturn matrix;\r\n\t\t\t\t/**\r\n\t\t\t\t * 检验矩阵是否对齐\r\n\t\t\t\t */\r\n\t\t\t\tfunction checkMatrix(matrix){\r\n\t\t\t\t\tfor(var i = 0; i < matrix.length - 1; i++){\r\n\t\t\t\t\t\tif(matrix[i].length != matrix[i + 1].length){\r\n\t\t\t\t\t\t\t$a.messager.warn('列的colspan或rowspan设置错误');\r\n\t\t\t\t\t\t\tthrow new Error('列的colspan或rowspan设置错误');\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t/**\r\n\t\t\t * 根据单元格，设置到目标数组\r\n\t\t\t * @param col\r\n\t\t\t * @param rowIndex\r\n\t\t\t * @param matrix\r\n\t\t\t */\r\n\t\t\tfunction tileCol(col, rowIndex, matrix){\r\n\t\t\t\tvar rowspan = col.rowspan == undefined ? 1 : col.rowspan\r\n\t\t\t\t\t,colspan = col.colspan == undefined ? 1 : col.colspan\r\n\t\t\t\t\t,colIndex = 0;\r\n\t\t\t\tfor(var i = 0; i < rowspan; i++){\r\n\t\t\t\t\tfor(var j = 0; j < colspan; j++){\r\n\t\t\t\t\t\tvar element = col._cid;\r\n\t\t\t\t\t\tif(i == 0 && j == 0){\r\n\t\t\t\t\t\t\telement = col;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif(i > 0){\r\n\t\t\t\t\t\t\tmatrix[rowIndex + i][colIndex] = element;\r\n\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\tcolIndex = appendCol(matrix[rowIndex + i], element);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t/**\r\n\t\t\t * 元素放入数组，并返回放入的数组下标\r\n\t\t\t * @param target 数组\r\n\t\t\t * @param col 元素\r\n\t\t\t * @returns {Number}\r\n\t\t\t */\r\n\t\t\tfunction appendCol(target, col){\r\n\t\t\t\tvar i = 0;\r\n\t\t\t\twhile(target[i] != undefined){\r\n\t\t\t\t\ti++;\r\n\t\t\t\t}\r\n\t\t\t\ttarget[i] = col;\r\n\t\t\t\treturn i;\r\n\t\t\t}\r\n\t\t},\r\n\t\t/**\r\n\t\t * 禁用数据行的按钮\r\n\t\t * @param rowIndex {Number} 行号\r\n\t\t * @param btnId {String} 按钮id\r\n\t\t * @example $('#demo').grid('disableRowBtn', 'addBtn');\r\n\t\t * @memberof grid-class\r\n\t\t * @instance\r\n\t\t */\r\n\t\tdisableRowBtn: function(rowIndex, btnId){\r\n\t\t\tvar exp = this._getRowExpr(rowIndex);\r\n\t\t\tif(!exp){\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tvar $btn = this.$tableBodyRight.find(exp).find('#'+btnId);\r\n\t\t\t$btn.addClass('disabled');\r\n\t\t},\r\n\t\t/**\r\n\t\t * 启用数据行的按钮\r\n\t\t * @param rowIndex {Number} 行号\r\n\t\t * @param btnId {String} 按钮id\r\n\t\t * @example $('#demo').grid('enableRowBtn', 'addBtn');\r\n\t\t * @memberof grid-class\r\n\t\t * @instance\r\n\t\t */\r\n\t\tenableRowBtn: function(rowIndex, btnId){\r\n\t\t\tvar exp = this._getRowExpr(rowIndex);\r\n\t\t\tif(!exp){\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tvar $btn = this.$tableBodyRight.find(exp).find('#'+btnId);\r\n\t\t\t$btn.removeClass('disabled');\r\n\t\t},\r\n\t\t/**\r\n\t\t * 初始化整体html结构\r\n\t\t */\r\n\t\t_initElement: function(){\r\n\t\t\tthis._initElementStruct();\r\n\t\t\tvar $e = this.$element\r\n\t\t\t\t,grid = this;\r\n\t\t\t$e.data('grid', this);\r\n\t\t\tthis.$wrap = $e.parent();\r\n\t\t\tthis.$rowEditor = $e.find('.grid-row-editor');\r\n\t\t\tthis.$absoluteComp = $e.find('.grid-absolute-comp');\r\n\t\t\tthis.$focusInput = $e.find('.focusInput');\r\n\t\t\tthis.$focusInput.on('keydown.grid-proxy-focus.api', $.proxy(this._keyLocateCell, this));\r\n\t\t\tthis.$focusInput.on('focus.grid-proxy-focus.api', function(){\r\n\t\t\t\tgrid.$table.addClass('table-active');\r\n\t\t\t\tgrid._fixXProxyScroll();\r\n\t\t\t});\r\n\t\t\tthis.$focusInput.on('blur.grid-proxy-focus.api', function(){\r\n\t\t\t\tgrid.$table.removeClass('table-active');\r\n\t\t\t\tgrid.$focusInput.css('position', 'absolute');\r\n\t\t\t\tgrid.$focusInput.appendTo(grid.$absoluteComp);\r\n\t\t\t});\r\n\r\n\r\n\t\t\tthis.$header = $e.find('.grid-header');\r\n\t\t\tthis.$title = this.$header.find('.grid-header-title');\r\n\t\t\tthis.$toolbar = this.$header.find('.grid-header-toolbar');\r\n\t\t\tthis.$headerCustom = this.$header.find('.grid-header-custom');\r\n\r\n\t\t\tthis.$table = $e.find('.grid-table');\r\n\t\t\tthis.$tableHeader = $e.find('.grid-table-header');\r\n\t\t\tthis.$tableHeaderLeft = this.$tableHeader.find('.grid-header-left');\r\n\t\t\tthis.$tableHeaderMain = this.$tableHeader.find('.grid-header-main');\r\n\t\t\tthis.$tableHeaderRight = this.$tableHeader.find('.grid-header-right');\r\n\t\t\tthis.$tableBody = $e.find('.grid-table-body');\r\n\t\t\tthis.$tableBodyMessage = $e.find('.grid-table-message');\r\n\t\t\tthis.$tableBodyLeft = this.$tableBody.find('.grid-body-left');\r\n\t\t\tthis.$tableBodyMain = this.$tableBody.find('.grid-body-main');\r\n\t\t\tthis.$tableBodyRight = this.$tableBody.find('.grid-body-right');\r\n\t\t\tthis.$tableFooter = $e.find('.grid-table-footer');\r\n\t\t\tthis.$tableFooterLeft = this.$tableFooter.find('.grid-footer-left');\r\n\t\t\tthis.$tableFooterMain = this.$tableFooter.find('.grid-footer-main');\r\n\t\t\tthis.$tableFooterRight = this.$tableFooter.find('.grid-footer-right');\r\n\t\t\tthis.$tableFooterCustom = this.$tableFooter.find('.grid-footer-custom');\r\n\t\t\tthis.$cardRegion={\r\n\t\t\t\tleft:this.$tableBodyLeft,\r\n\t\t\t\tright:this.$tableBodyRight,\r\n\t\t\t\tcenter:this.$tableBodyMain\r\n\t\t\t};\r\n\t\t\tif(this.setting.headerCustom){\r\n\t\t\t\tthis.$headerCustom.append($A(this.setting.headerCustom));\r\n\t\t\t}\r\n\t\t},\r\n\t\t/**\r\n\t\t * 显示提示信息\r\n\t\t */\r\n\t\t_showMessage: function(msg){\r\n\t\t\tthis.$tableBodyMessage.html(msg).show();\r\n\t\t},\r\n\t\t/**\r\n\t\t * 隐藏提示信息\r\n\t\t */\r\n\t\t_hideMessage: function(){\r\n\t\t\tthis.$tableBodyMessage.hide();\r\n\t\t},\r\n\t\t/**\r\n\t\t * 设置网格的最小宽度，\r\n\t\t * \t\t防止固定列与主视图在缩放时位置错乱\r\n\t\t * \t\t防止分页栏在缩放时位置错乱\r\n\t\t * @param {Number} minWidth 最小宽度\r\n\t\t * @memberof grid-class\r\n\t\t * @instance\r\n\t\t */\r\n\t\tsetGridMinWidth: function(minWidth){\r\n\t\t\tvar min = 0;\r\n\t\t\tif(this._hasPager()){\r\n\t\t\t\tmin = 400;\r\n\t\t\t}\r\n\t\t\tif(minWidth < min){\r\n\t\t\t\tminWidth = min;\r\n\t\t\t}\r\n\t\t\tthis.$element.css('min-width', minWidth);\r\n\t\t},\r\n\t\t/**\r\n\t\t * 初始化网格结构\r\n\t\t */\r\n\t\t_initElementStruct: function(){\r\n\t\t\tvar s = this.setting\r\n\t\t\t\t,footerHtml = '<div class=\"grid-table-footer\">' +\r\n\t\t\t\t'<div>' +\r\n\t\t\t\t'<div class=\"grid-footer-left\">' +\r\n\t\t\t\t'<div>' +\r\n\t\t\t\t'<table cellpadding=\"0\" cellspacing=\"0\">' +\r\n\t\t\t\t'<tbody></tbody>' +\r\n\t\t\t\t'</table>' +\r\n\t\t\t\t'</div>' +\r\n\t\t\t\t'</div>' +\r\n\t\t\t\t'<div class=\"grid-footer-right\">' +\r\n\t\t\t\t'<div>' +\r\n\t\t\t\t'<table cellpadding=\"0\" cellspacing=\"0\">' +\r\n\t\t\t\t'<tbody></tbody>' +\r\n\t\t\t\t'</table>' +\r\n\t\t\t\t'</div>' +\r\n\t\t\t\t'</div>' +\r\n\t\t\t\t'<div class=\"grid-footer-main\">' +\r\n\t\t\t\t'<div>' +\r\n\t\t\t\t'<table cellpadding=\"0\" cellspacing=\"0\">' +\r\n\t\t\t\t'<tbody></tbody>' +\r\n\t\t\t\t'</table>' +\r\n\t\t\t\t'</div>' +\r\n\t\t\t\t'</div>' +\r\n\t\t\t\t'</div>' +\r\n\t\t\t\t'<div class=\"grid-footer-custom\"></div>' +\r\n\t\t\t\t'</div>';\r\n\t\t\tthis.$element = $(\r\n\t\t\t\t'<div class=\"app-grid\">' +\r\n\t\t\t\t'<div class=\"grid-header\">' +\r\n\t\t\t\t'<div class=\"grid-header-title\">' +\r\n\t\t\t\t'<span>' + s.title + '</span>' +\r\n\t\t\t\t'</div>' +\r\n\t\t\t\t'<div class=\"grid-header-toolbar\" style=\"max-height:' + s.toolbarHeight + 'px;\">' +\r\n\t\t\t\t'<ul></ul>' +\r\n\t\t\t\t'</div>' +\r\n\t\t\t\t'<div class=\"grid-header-custom\">' +\r\n\t\t\t\t'</div>' +\r\n\t\t\t\t'</div>' +\r\n\t\t\t\t'<div class=\"grid-table' + (s.height == 'push' ?' autoHeight':' fixHeight') + '\">' +\r\n\t\t\t\t'<div class=\"row-dragging-mask\"></div>' +\r\n\t\t\t\t'<div class=\"grid-table-header\" oncontextmenu=\"return false\">' +\r\n\t\t\t\t'<div class=\"col-resize-proxy\"></div>' +\r\n\t\t\t\t'<div class=\"grid-header-left\">' +\r\n\t\t\t\t'<div>' +\r\n\t\t\t\t'<table cellpadding=\"0\" cellspacing=\"0\">' +\r\n\t\t\t\t'<tbody></tbody>' +\r\n\t\t\t\t'</table>' +\r\n\t\t\t\t'</div>' +\r\n\t\t\t\t'</div>' +\r\n\t\t\t\t'<div class=\"grid-header-right\">' +\r\n\t\t\t\t'<div>' +\r\n\t\t\t\t'<table cellpadding=\"0\" cellspacing=\"0\">' +\r\n\t\t\t\t'<tbody></tbody>' +\r\n\t\t\t\t'</table>' +\r\n\t\t\t\t'</div>' +\r\n\t\t\t\t'</div>' +\r\n\t\t\t\t'<div class=\"grid-header-main\">' +\r\n\t\t\t\t'<div>' +\r\n\t\t\t\t'<table cellpadding=\"0\" cellspacing=\"0\">' +\r\n\t\t\t\t'<tbody></tbody>' +\r\n\t\t\t\t'</table>' +\r\n\t\t\t\t'</div>' +\r\n\t\t\t\t'</div>' +\r\n\t\t\t\t(this.setting.summaryPos == 'top' ? footerHtml : '') +\r\n\t\t\t\t'</div>' +\r\n\t\t\t\t'<div class=\"grid-table-body' + (s.striped?' useStriped':'') + '\">' +\r\n\t\t\t\t'<div class=\"grid-table-message\"></div>' +\r\n\t\t\t\t'<div class=\"grid-body-left\" >' +\r\n\t\t\t\t'<div class=\"grid-body-content\">' +\r\n\t\t\t\t'<table cellpadding=\"0\"  class=\"grid-view\" cellspacing=\"0\">' +\r\n\t\t\t\t'<tbody></tbody>' +\r\n\t\t\t\t'</table>' +\r\n\t\t\t\t'<div class=\"grid-body-card-form\" style=\"display:none\"></div>'\t+\r\n\t\t\t\t'</div>' +\r\n\t\t\t\t'</div>' +\r\n\t\t\t\t'<div class=\"grid-body-right\" >' +\r\n\t\t\t\t'<div class=\"grid-body-content\">' +\r\n\t\t\t\t'<table cellpadding=\"0\"  class=\"grid-view\" cellspacing=\"0\">' +\r\n\t\t\t\t'<tbody></tbody>' +\r\n\t\t\t\t'</table>' +\r\n\r\n\t\t\t\t'<div class=\"grid-body-card-form form\" style=\"display:none\"></div>'\t+\r\n\t\t\t\t'</div>' +\r\n\t\t\t\t'</div>' +\r\n\t\t\t\t'<div class=\"grid-body-main\">' +\r\n\t\t\t\t'<div class=\"grid-body-content\">' +\r\n\t\t\t\t'<table cellpadding=\"0\"  class=\"grid-view\" cellspacing=\"0\">' +\r\n\t\t\t\t'<tbody></tbody>' +\r\n\t\t\t\t'</table>'  +\r\n\t\t\t\t'</div>' +\r\n\t\t\t\t'</div>' +\r\n\t\t\t\t'<div class=\"grid-row-editor\"></div>' +\r\n\t\t\t\t'<div class=\"grid-absolute-comp\">' +\r\n\t\t\t\t'<input class=\"focusInput\" style=\"position:absolute;\"/>' +\r\n\t\t\t\t'</div>' +\r\n\t\t\t\t'</div>' +\r\n\t\t\t\t(this.setting.summaryPos == 'bottom' ? footerHtml : '') +\r\n\t\t\t\t'</div>' +\r\n\t\t\t\t'</div>').insertAfter(this.$t);\r\n\t\t},\r\n\t\t/**\r\n\t\t * 根据当前的表头展现调整当前的列顺序\r\n\t\t * 左固定列 右固定列和主数据列\r\n\t\t */\r\n\t\t_resetColumnsInOrder: function(){\r\n\t\t\tthis.frozenColumns = this._getColumnsInTable(this.$tableHeaderLeft.find('>div>table'));\r\n\t\t\tthis.frozenColumnsRight = this._getColumnsInTable(this.$tableHeaderRight.find('>div>table'));\r\n\t\t\tthis.columns = this._getColumnsInTable(this.$tableHeaderMain.find('>div>table'));\r\n\t\t},\r\n\t\t/**\r\n\t\t * 根据当前的表头展现获取当前的列顺序\r\n\t\t * @param $table\r\n\t\t */\r\n\t\t_getColumnsInTable: function($table){\r\n\t\t\tvar trs = $table.find('>tbody>tr')\r\n\t\t\t\t,trLen = trs.length\r\n\t\t\t\t,result = [];\r\n\t\t\tfor ( var i = trLen - 1; i >= 0; i--) {\r\n\t\t\t\tvar tds = $(trs[i]).find('>td');\r\n\t\t\t\tif(i == trs.length-1){\r\n\t\t\t\t\tfor ( var j = 0; j < tds.length; j++) {\r\n\t\t\t\t\t\tvar cid = $(tds[j]).attr('_cid');\r\n\t\t\t\t\t\tresult.push(this._column[cid]);\r\n\t\t\t\t\t}\r\n\t\t\t\t}else{\r\n\t\t\t\t\tfor ( var j = 0; j < tds.length; j++) {\r\n\t\t\t\t\t\tvar rowspan = $(tds[j]).attr('rowspan');\r\n\t\t\t\t\t\trowspan = rowspan == undefined ? 1 : parseInt(rowspan);\r\n\t\t\t\t\t\tif(rowspan + i == trLen){\r\n\t\t\t\t\t\t\tvar order = this._getColumnOrder(j, tds)\r\n\t\t\t\t\t\t\t\t,cid = $(tds[j]).attr('_cid');\r\n\t\t\t\t\t\t\tresult.splice(order, 0, this._column[cid]);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tlinkCol(result);\r\n\t\t\treturn result;\r\n\t\t\tfunction linkCol(cols){\r\n\t\t\t\tvar len = cols;\r\n\t\t\t\tif(len <= 1){\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tfor(var i = 1; i < result.length; i++){\r\n\t\t\t\t\tresult[i].__prev = result[i-1];\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\t/**\r\n\t\t * 获取该td属于第几顺序列\r\n\t\t */\r\n\t\t_getColumnOrder: function(tdi, tds){\r\n\t\t\tvar result = 0;\r\n\t\t\tfor ( var i = 0; i < tdi; i++) {\r\n\t\t\t\tvar colspan = $(tds[i]).attr('colspan');\r\n\t\t\t\tcolspan = colspan == undefined ? 1 : parseInt(colspan);\r\n\t\t\t\tresult += colspan;\r\n\t\t\t}\r\n\t\t\treturn result;\r\n\t\t},\r\n\t\t/**\r\n\t\t * 生成网格头\r\n\t\t */\r\n\t\t_initHeaderHtml: function(){\r\n\t\t\tthis.gridHeadHeight = this.setting.columns.length * (this.setting.headRowHeight+1);\r\n\t\t\tthis._initFrozenViewHtml();\r\n\t\t\tthis._initFrozenRightViewHtml();\r\n\t\t\tif(this.setting.fitColumns == 'E' || this.setting.fitColumns == 'ES'){\r\n\t\t\t\tthis._setColumnPercent();\r\n\t\t\t\tthis._fitMainViewWidth();\r\n\t\t\t}\r\n\t\t\tthis._initMainViewHtml();\r\n\t\t\tthis._resetColumnsInOrder();\r\n\t\t},\r\n\t\t/**\r\n\t\t * 设置网格列的百分比\r\n\t\t */\r\n\t\t_setColumnPercent: function(){\r\n\t\t\tvar s = this.setting\r\n\t\t\t\t,cols = s.columns\r\n\t\t\t\t,allWidth = this._getColumnsWidth(cols);\r\n\t\t\tif(s.fitColumns != 'E' && s.fitColumns != 'ES'){\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tfor ( var i = 0; i < cols.length; i++) {\r\n\t\t\t\tfor(var j = 0; j < cols[i].length; j++){\r\n\t\t\t\t\tvar col = cols[i][j];\r\n\t\t\t\t\tif(col.field && !col.hidden){\r\n\t\t\t\t\t\tcol.percent = parseFloat((col.width / allWidth).toFixed(4));\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\t/**\r\n\t\t * 获取数组列的总宽度\r\n\t\t */\r\n\t\t_getColumnsWidth: function(cols){\r\n\t\t\tvar result = 0;\r\n\t\t\tfor ( var i = 0; i < cols.length; i++) {\r\n\t\t\t\tfor(var j = 0; j < cols[i].length; j++){\r\n\t\t\t\t\tvar col = cols[i][j];\r\n\t\t\t\t\tif(col.hidden){\r\n\t\t\t\t\t\tcontinue;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif(!col.field){\r\n\t\t\t\t\t\tcontinue;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tresult += col.width;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn result;\r\n\t\t},\r\n\t\t/**\r\n\t\t * 自适应主视图的宽度大小\r\n\t\t * 如果视图不可见，则根据逻辑宽度进行设置\r\n\t\t */\r\n\t\t_fitMainViewWidth: function(){\r\n\r\n\t\t\tif (this.viewType==VIEW_TYPE.CARD_VIEW){\r\n\t\t\t\tvar gridWidth = this.$element.outerWidth();\r\n\t\t\t\tvar cardFromWidth=gridWidth-this.setting.view.cardWidth;\r\n\t\t\t\tthis.$cardRegion[this.setting.view[\"region\"]].find('.grid-body-card-form').outerWidth(cardFromWidth);\r\n\r\n\t\t\t}\r\n\t\t\tvar s = this.setting\r\n\t\t\t\t,freeWidth = 0;\r\n\t\t\tif(this.$element.is(':visible')){\r\n\t\t\t\tvar gridWidth = this.$element.outerWidth()\r\n\t\t\t\t\t,diffWidth = this._getYProxyScrollWidth();\r\n\t\t\t\tfreeWidth = gridWidth - this.$tableHeaderLeft.outerWidth() - this.$tableHeaderRight.outerWidth() - diffWidth;\r\n\t\t\t}else{\r\n\t\t\t\tfreeWidth = this.setting.viewMainWidth;\r\n\t\t\t}\r\n\t\t\tif(s.fitColumns == 'ES'){\r\n\t\t\t\tthis._fitMainColumnsWidth(freeWidth);\r\n\t\t\t}else if(s.fitColumns == 'E'){\r\n\t\t\t\tif(freeWidth >= s.viewMainWidth - scrollBarWidth){\r\n\t\t\t\t\tthis._fitMainColumnsWidth(freeWidth);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\t/**\r\n\t\t * 获取y轴的宽度\r\n\t\t */\r\n\t\t_getYProxyScrollWidth: function(){\r\n\t\t\tvar result = 1;\r\n\t\t\tif(this.setting.height == 'push'){\r\n\t\t\t\tthis.$wrap.scrollTop(1);\r\n\t\t\t\tvar scrollTop = this.$wrap.scrollTop();\r\n\t\t\t\tif(scrollTop == 1){\r\n\t\t\t\t\tresult += scrollBarWidth;\r\n\t\t\t\t}\r\n\t\t\t}else if(this._hasYProxyScroll()){\r\n\t\t\t\tif(!this.setting.autoScroll){\r\n\t\t\t\t\tresult += scrollBarWidth;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn result;\r\n\t\t},\r\n\t\t/**\r\n\t\t * 根据传入的主视图宽度按比例调整主视图的列宽\r\n\t\t */\r\n\t\t_fitMainColumnsWidth: function(mainViewWidth){\r\n\t\t\tvar cols = this.setting.columns\r\n\t\t\t\t,calc = 0;\r\n\t\t\tfor ( var i = 0; i < cols.length; i++) {\r\n\t\t\t\tfor( var j = 0; j < cols[i].length; j++){\r\n\t\t\t\t\tvar col = cols[i][j];\r\n\t\t\t\t\tif(col.field && !col.hidden){\r\n\t\t\t\t\t\tcol.width = parseInt((col.percent * mainViewWidth).toFixed());\r\n\t\t\t\t\t\tcalc += col.width;\r\n\t\t\t\t\t\tcol.width -= 1;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tcol.width += mainViewWidth - calc;\r\n\t\t\tthis.setting.viewMainWidth = mainViewWidth;\r\n\t\t},\r\n\t\t/**\r\n\t\t * 初始化左固定视图的html\r\n\t\t * \t返回左固定视图宽度\r\n\t\t */\r\n\t\t_initFrozenViewHtml: function(){\r\n\t\t\tvar s = this.setting\r\n\t\t\t\t,css = {width: s.viewLeftWidth}\r\n\t\t\t\t,cols = s.frozenColumns;\r\n\t\t\tif(cols){\r\n\t\t\t\tthis.$tableHeaderLeft.find('>div>table>tbody').append(this._initHeaderTrHtml(cols));\r\n\t\t\t\tthis.$tableHeaderLeft.height(this.gridHeadHeight);\r\n\t\t\t\tthis.$tableHeaderLeft.css('overflow','hidden');\r\n\t\t\t}\r\n\t\t},\r\n\t\t/**\r\n\t\t * 初始化右固定视图的html\r\n\t\t * \t返回右固定视图宽度\r\n\t\t */\r\n\t\t_initFrozenRightViewHtml: function(){\r\n\t\t\tvar s = this.setting\r\n\t\t\t\t,css = {width:s.viewRightWidth}\r\n\t\t\t\t,cols = s.frozenColumnsRight;\r\n\t\t\tif(cols){\r\n\t\t\t\tthis.$tableHeaderRight.find('>div>table>tbody').append(this._initHeaderTrHtml(cols));\r\n\t\t\t\tthis.$tableHeaderRight.height(this.gridHeadHeight);\r\n\t\t\t\tthis.$tableHeaderRight.css('overflow','hidden');\r\n\t\t\t}\r\n\t\t},\r\n\t\t/**\r\n\t\t * 初始化主视图的html\r\n\t\t */\r\n\t\t_initMainViewHtml: function(){\r\n\t\t\tvar s = this.setting\r\n\t\t\t\t,w = s.viewMainWidth\r\n\t\t\t\t,$tr = this._initHeaderTrHtml(s.columns);\r\n\t\t\tsetLastTdShowBorder($tr);\r\n\t\t\tthis.$tableHeaderMain.find('>div>table>tbody').append($tr);\r\n\t\t\tthis.$tableHeaderMain.height(this.gridHeadHeight);\r\n\t\t\tthis.$tableHeaderMain.css('overflow','hidden');\r\n\t\t\tthis.$focusInput.appendTo(this.$tableHeaderMain.find('td:visible:first>div'));\r\n\t\t\tfunction setLastTdShowBorder($tr){\r\n\t\t\t\tif($tr.length == 1){\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tfor(var i = 1; i < $tr.length; i++){\r\n\t\t\t\t\t$($tr[i]).find('td:last-child').addClass('show-right-border');\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\t/**\r\n\t\t * 获取网格的信息\r\n\t\t */\r\n\t\t_initHeaderTrHtml: function(cols){\r\n\t\t\tvar _g = this\r\n\t\t\t\t,$trs = []\r\n\t\t\t\t,height = this.setting.headRowHeight\r\n\t\t\t\t,trHmtl = '<tr style=\"height:' + height + 'px;line-height:' + height + 'px;\"></tr>';\r\n\t\t\tfor ( var i = 0; i < cols.length; i++) {\r\n\t\t\t\tvar $tr = $(trHmtl);\r\n\t\t\t\tfor ( var j = 0; j < cols[i].length; j++) {\r\n\t\t\t\t\tvar $td = initHeader$Td(cols[i][j]);\r\n\t\t\t\t\t$tr.append($td);\r\n\t\t\t\t}\r\n\t\t\t\t$trs.push($tr);\r\n\t\t\t}\r\n\t\t\treturn $trs;\r\n\r\n\t\t\tfunction initHeader$Td(col){\r\n\t\t\t\tvar $col = $('<td ' + createTdStyle(col) + createHeaderTdAttr(col) + '>' +\r\n\t\t\t\t\t'<div ' + createTdInnerStyle(col) + '>' + col.title + '</div>' +\r\n\t\t\t\t\t'</td>');\r\n\t\t\t\t_g._appendSortable(col, $col);\r\n\t\t\t\tif(col.headerBtns){\r\n\t\t\t\t\tvar btns = col.headerBtns;\r\n\t\t\t\t\tfor(var i = 0; i < btns.length; i++){\r\n\t\t\t\t\t\tappendHeaderBtn($col, btns[i]);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\treturn $col;\r\n\t\t\t\tfunction appendHeaderBtn($col, btn){\r\n\t\t\t\t\tvar $btn = $('<span class=\"' + btn.iconCls + ' grid-header-btn\"></span>');\r\n\t\t\t\t\tif(btn.title){\r\n\t\t\t\t\t\t$btn.attr('title', btn.title);\r\n\t\t\t\t\t}\r\n\t\t\t\t\t$btn.on('click', function(e){\r\n\t\t\t\t\t\te.stopPropagation();\r\n\t\t\t\t\t\tbtn.handler();\r\n\t\t\t\t\t});\r\n\t\t\t\t\tif(btn.hoverShow){\r\n\t\t\t\t\t\t$btn.hide();\r\n\t\t\t\t\t\t$col.on('mouseenter', function(e){\r\n\t\t\t\t\t\t\t$btn.show();\r\n\t\t\t\t\t\t}).on('mouseleave', function(){\r\n\t\t\t\t\t\t\t$btn.hide();\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t\t$col.find('>div').append($btn);\r\n\t\t\t\t}\r\n\t\t\t\tfunction createTdStyle(col){\r\n\t\t\t\t\tvar result = '';\r\n\t\t\t\t\tif(col.rowspan && col.rowspan > 1){\r\n\t\t\t\t\t\tvar height = _g.setting.headRowHeight *col.rowspan +(col.rowspan -1);\r\n\t\t\t\t\t\tresult += 'height:' + height  + 'px;line-height:' + height  + 'px;';\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif(result){\r\n\t\t\t\t\t\tresult = 'style=\"' + result + '\" ';\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn result;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tfunction createHeaderTdAttr(){\r\n\t\t\t\t\tvar attr = '_cid=\"' + col._cid + '\"'\r\n\t\t\t\t\t\t,cls = col.cls;\r\n\t\t\t\t\tif(!_g.setting.halign){\r\n\t\t\t\t\t\tcls = cls.replace('grid-cell-left','grid-cell-center');\r\n\t\t\t\t\t\tcls = cls.replace('grid-cell-right','grid-cell-center');\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif(col.hidden){\r\n\t\t\t\t\t\tcls += ' grid-cell-hidden';\r\n\t\t\t\t\t}\r\n\t\t\t\t\tattr += ' class=\"' + cls + '\"';\r\n\t\t\t\t\tif(col.field){\r\n\t\t\t\t\t\tattr += ' field=\"' + col.field + '\"';\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif(col.buttons){\r\n\t\t\t\t\t\tattr += ' opts=\"true\"';\r\n\t\t\t\t\t}\r\n\t\t\t\t\tvar colspan = getColspan(col);\r\n\t\t\t\t\tif(colspan == 0){\r\n\t\t\t\t\t\tcolspan = 1;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tattr += ' colspan=\"' + colspan + '\"';\r\n\t\t\t\t\tif(col.rowspan){\r\n\t\t\t\t\t\tattr += ' rowspan=\"' + col.rowspan + '\"';\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif(col._isBtn){\r\n\t\t\t\t\t\tattr += ' isBtn=\"true\"';\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn attr;\r\n\t\t\t\t\t/**\r\n\t\t\t\t\t * 获取要合并的列数\r\n\t\t\t\t\t */\r\n\t\t\t\t\tfunction getColspan(col){\r\n\t\t\t\t\t\tvar result = 0\r\n\t\t\t\t\t\t\t,children = col.children;\r\n\t\t\t\t\t\tif(children && children.length > 0){\r\n\t\t\t\t\t\t\tfor(var i = 0; i < children.length; i++){\r\n\t\t\t\t\t\t\t\tresult += getColspan(children[i]);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}else if(!col.hidden){\r\n\t\t\t\t\t\t\tresult = 1;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\treturn result;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tfunction createTdInnerStyle(col){\r\n\t\t\t\t\tvar result = '';\r\n\t\t\t\t\tif(col.field){\r\n\t\t\t\t\t\tresult = 'style=\"width:' + col.width + 'px;\"';\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn result;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\t/**\r\n\t\t * 注册事件\r\n\t\t */\r\n\t\t_registEvents: function(){\r\n\t\t\tthis.$tableBody.on('click.grid-cell.api', 'tr.data-row td', $.proxy(this._onClickCell, this));\r\n\t\t\tthis.$tableBody.on('mouseup.grid-cell.api', 'tr.data-row td', $.proxy(this._onMouseUpCell, this));\r\n\t\t\tthis.$tableBody.on('dblclick.grid-cell.api', 'tr.data-row td', $.proxy(this._onDblClickCell, this));\r\n\t\t\tthis.$tableBody.on('click.grid-row.api', 'tr.data-row td', $.proxy(this._onClickRow, this));\r\n\t\t\tthis.$tableBody.on('dblclick.grid-row.api', 'tr.data-row td', $.proxy(this._onDblClickRow, this));\r\n\r\n\t\t\tthis.$tableBody.on('mousewheel.grid.api', $.proxy(this._onMouseWheel, this));\r\n\t\t\tthis.$tableBody.on('mouseover.grid.api', 'tr.data-row', $.proxy(this._onBodyTrMouseOver, this));\r\n\t\t\tthis.$tableBody.on('mouseleave.grid.api', 'tr.data-row', $.proxy(this._onBodyTrMouseLeave, this));\r\n\t\t\tthis.$tableHeader.on('click.grid.api', 'td[isbtn=\"true\"]', headBtnTdClick);\r\n\t\t\tif(this.setting.checkbox){\r\n\t\t\t\tthis.$tableHeaderLeft.on('click.grid.api', 'td[field=\"_rownumbers\"]', $.proxy(this._onHeaderRowNumberTdClick, this));\r\n\t\t\t\tthis.$tableHeaderLeft.on('click.grid.api', 'td[field=\"_checkbox\"]', $.proxy(this._onHeaderCheckboxTdClick, this));\r\n\t\t\t\tthis.$tableHeaderLeft.on('click.grid.api', 'td[field=\"_checkbox\"] input', $.proxy(this._onHeaderCheckboxClick, this));\r\n\t\t\t\tthis.$tableBodyLeft.on('click.grid.api', 'td[field=\"_checkbox\"]', $.proxy(this._onBodyCheckboxTdClick, this));\r\n\t\t\t\tthis.$tableBodyLeft.on('click.grid.api', 'td[field=\"_checkbox\"] input', $.proxy(this._onBodyCheckboxClick, this));\r\n\t\t\t}\r\n\t\t\tthis._registResizeColumnProxy();\r\n\r\n\t\t\tthis._bindInvalidMsgEvent();\r\n\t\t\tthis._bindResize();\r\n\t\t\tthis.onMouseEvent();\r\n\t\t\tthis._onCheckSummary();\r\n\t\t},\r\n\t\t/**\r\n\t\t * 表格体的鼠标滚轮事件\r\n\t\t */\r\n\t\t_onMouseWheel: function(event, delta, deltaX, deltaY){\r\n\t\t\tif(this._hasYProxyScroll()){\r\n\t\t\t\tsetDataRowHeight.call(this);\r\n\t\t\t\tvar rowHeight = this._rowHeight\r\n\t\t\t\t\t,scrollTop = this.$yProxyScroll.scrollTop()\r\n\t\t\t\t\t,scrollIndex = parseInt(scrollTop/rowHeight);\r\n\t\t\t\tif(delta < 0){\r\n\t\t\t\t\tthis.$yProxyScroll.scrollTop((scrollIndex + 1) * rowHeight);\r\n\t\t\t\t}else{\r\n\t\t\t\t\tthis.$yProxyScroll.scrollTop((scrollIndex - 1) * rowHeight);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\t/**\r\n\t\t * 表格体的单元格单击事件\r\n\t\t * @param e\r\n\t\t */\r\n\t\t_onClickCell: function(e){\r\n\t\t\tvar $td = $(e.currentTarget)\r\n\t\t\t\t,$row = $td.parent()\r\n\t\t\t\t,rowData = this._getDataByRowId($row.attr('id'))\r\n\t\t\t\t,rowIndex = $row.index()\r\n\t\t\t\t,field = $td.attr('field');\r\n\t\t\t/**\r\n\t\t\t * 单元格单击事件\r\n\t\t\t * @event grid-class#onClickCell\r\n\t\t\t * @param {Object} rowData 行数据\r\n\t\t\t * @param {Number} rowIndex 行号\r\n\t\t\t * @param {String} field 单元格的列名\r\n\t\t\t */\r\n\t\t\tthis.trigger('onClickCell', rowData, rowIndex, field, e);\r\n\t\t},\r\n\t\t/**\r\n\t\t * 是否进行焦点获取以进行上下左右的按键导航\r\n\t\t */\r\n\t\t_onMouseUpCell: function(e){\r\n\t\t\tif(getCellSelectText() != ''){\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tvar $td = $(e.currentTarget);\r\n\t\t\tif(!this.setting.hasEditor){\r\n\t\t\t\tthis._focusProxyInput($td);\r\n\t\t\t}\r\n\t\t\tfunction getCellSelectText(){\r\n\t\t\t\tif(window.getSelection) {\r\n\t\t\t\t\treturn window.getSelection().toString();\r\n\t\t\t\t} else if(document.selection && document.selection.createRange) {\r\n\t\t\t\t\treturn document.selection.createRange().text;\r\n\t\t\t\t}\r\n\t\t\t\treturn '';\r\n\t\t\t}\r\n\t\t},\r\n\t\t/**\r\n\t\t * 将焦点移入到代理的输入框中\r\n\t\t */\r\n\t\t_focusProxyInput: function($td){\r\n\t\t\tthis.setCurrentRow($td.parent().index());\r\n\t\t\ttry{\r\n\t\t\t\tthis.$focusInput[0].focus();\r\n\t\t\t}catch(e){\r\n\t\t\t\t\r\n\t\t\t}\r\n\t\t},\r\n\t\t/**\r\n\t\t * 代理单元格定位的事件\r\n\t\t */\r\n\t\t_keyLocateCell: function(e){\r\n\t\t\te.preventDefault();\r\n\t\t\te.stopPropagation();\r\n\t\t\tvar keyCode = e.keyCode;\r\n\t\t\tswitch(keyCode){\r\n\t\t\t\tcase App.keyCode.LEFT:\r\n\t\t\t\t\tthis.$xProxyScroll.scrollLeft(this.$xProxyScroll.scrollLeft() - 35);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase App.keyCode.RIGHT:\r\n\t\t\t\t\tthis.$xProxyScroll.scrollLeft(this.$xProxyScroll.scrollLeft() + 35);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase App.keyCode.UP:\r\n\t\t\t\t\tthis.prevRow();\r\n\t\t\t\t\tthis.locateCurrent();\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase App.keyCode.DOWN:\r\n\t\t\t\t\tthis.nextRow();\r\n\t\t\t\t\tthis.locateCurrent();\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase App.keyCode.ENTER:\r\n\t\t\t\t\tthis.toggleSelectCurrent();\r\n\t\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t},\r\n\t\t/**\r\n\t\t * 表格体的单元格双击事件\r\n\t\t * @param e\r\n\t\t */\r\n\t\t_onDblClickCell: function(e){\r\n\t\t\tif(atOnceMoment(e, 'onDblClickCell', this)){\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tvar $td = $(e.currentTarget)\r\n\t\t\t\t,$row = $td.parent()\r\n\t\t\t\t,rowData = this._getDataByRowId($row.attr('id'))\r\n\t\t\t\t,rowIndex = $row.index()\r\n\t\t\t\t,field = $td.attr('field');\r\n\t\t\t/**\r\n\t\t\t * 单元格双击事件\r\n\t\t\t * @event grid-class#onDblClickCell\r\n\t\t\t * @param {Object} rowData 行数据\r\n\t\t\t * @param {Number} rowIndex 行号\r\n\t\t\t * @param {String} field 单元格的列名\r\n\t\t\t */\r\n\t\t\tthis.trigger('onDblClickCell', rowData, rowIndex, field, e);\r\n\t\t},\r\n\t\t/**\r\n\t\t * 网格单击事件\r\n\t\t */\r\n\t\t_onClickRow: function(e){\r\n\t\t\tvar $tr = $(e.currentTarget).parent()\r\n\t\t\t\t,rowId = $tr.attr('id')\r\n\t\t\t\t,rowIndex = this._convertRowIdToRowIndex(rowId)\r\n\t\t\t\t,rowData = this._getDataByRowId(rowId);\r\n\t\t\tthis.setCurrentRow(rowIndex);\r\n\t\t\tif(!$tr.hasClass('row-uncheckable')){\r\n\t\t\t\tif(this.isSelectedRow(rowIndex)){\r\n\t\t\t\t\tthis.unselectRow(rowIndex);\r\n\t\t\t\t}else{\r\n\t\t\t\t\tthis.selectRow(rowIndex);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t/**\r\n\t\t\t * 行点击事件\r\n\t\t\t * @event grid-class#onClickRow\r\n\t\t\t * @param {Object} rowData 行数据\r\n\t\t\t * @param {Number} rowIndex 行号\r\n\t\t\t */\r\n\t\t\tthis.trigger('onClickRow', rowData, rowIndex, e);\r\n\t\t},\r\n\t\t/**\r\n\t\t * 网格双击事件\r\n\t\t */\r\n\t\t_onDblClickRow: function(e){\r\n\t\t\tif(atOnceMoment(e, 'onDblClickRow', this)){\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tvar $tr = $(e.currentTarget).parent()\r\n\t\t\t\t,rowId = $tr.attr('id')\r\n\t\t\t\t,rowIndex = this._convertRowIdToRowIndex(rowId)\r\n\t\t\t\t,rowData = this._getDataByRowId(rowId);\r\n\t\t\tif(!$tr.hasClass('row-uncheckable')){\r\n\t\t\t\tif(this.isSelectedRow(rowIndex)){\r\n\t\t\t\t\tthis.unselectRow(rowIndex);\r\n\t\t\t\t}else{\r\n\t\t\t\t\tthis.selectRow(rowIndex);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t/**\r\n\t\t\t * 行双击事件\r\n\t\t\t * @event grid-class#onDblClickRow\r\n\t\t\t * @param {Object} rowData 行数据\r\n\t\t\t * @param {Number} rowIndex 行号\r\n\t\t\t */\r\n\t\t\tthis.trigger('onDblClickRow', rowData, rowIndex, e);\r\n\t\t},\r\n\t\t/**\r\n\t\t * 鼠标经过tr时 将tr渲染为当前行的样式\r\n\t\t * @param e\r\n\t\t */\r\n\t\t_onBodyTrMouseOver: function(e){\r\n\t\t\tthis._setRowClass(e.currentTarget.id, hoverRowCls);\r\n\t\t},\r\n\t\t/**\r\n\t\t * 表格头的rownumber所在的td点击事件\r\n\t\t * @param e\r\n\t\t */\r\n\t\t_onHeaderRowNumberTdClick: function(e){\r\n\t\t\tthis._onHeaderCheckboxTdClick(e);\r\n\t\t},\r\n\t\t/**\r\n\t\t * 表格头的checkbox所在的td点击事件\r\n\t\t * @param e\r\n\t\t */\r\n\t\t_onHeaderCheckboxTdClick: function(e){\r\n\t\t\tvar checkbox = this.$tableHeaderLeft.find('td[field=\"_checkbox\"] input')[0];\r\n\t\t\tcheckbox.checked = !checkbox.checked;\r\n\t\t\tthis._onHeaderCheckboxClick(e);\r\n\t\t},\r\n\t\t/**\r\n\t\t * 表格头的checkbox点击事件\r\n\t\t * @param e\r\n\t\t */\r\n\t\t_onHeaderCheckboxClick: function(e){\r\n\t\t\tif(this.$tableHeaderLeft.find('td[field=\"_checkbox\"] input')[0].checked){\r\n\t\t\t\tthis.selectAll();\r\n\t\t\t}else{\r\n\t\t\t\tthis.unselectAll();\r\n\t\t\t}\r\n\t\t\te.stopPropagation();\r\n\t\t},\r\n\t\t/**\r\n\t\t * 表格体的checkbox点击事件\r\n\t\t * @param e\r\n\t\t */\r\n\t\t_onBodyCheckboxTdClick: function(e){\r\n\t\t\tvar $curr = $(e.currentTarget)\r\n\t\t\t\t,checkbox = $curr.find('input')[0]\r\n\t\t\t\t,id = $curr.closest('tr')[0].id;\r\n\t\t\tif(checkbox.checked){\r\n\t\t\t\tthis.unselectRow(id);\r\n\t\t\t}else{\r\n\t\t\t\tthis.selectRow(id);\r\n\t\t\t}\r\n\t\t\te.stopPropagation();\r\n\t\t},\r\n\t\t/**\r\n\t\t * 表格体的checkbox点击事件\r\n\t\t * @param e\r\n\t\t */\r\n\t\t_onBodyCheckboxClick: function(e){\r\n\t\t\tvar checkbox = e.currentTarget\r\n\t\t\t\t,id = $(e.currentTarget).closest('tr')[0].id;\r\n\t\t\tif(!checkbox.checked){\r\n\t\t\t\tthis.unselectRow(id);\r\n\t\t\t}else{\r\n\t\t\t\tthis.selectRow(id);\r\n\t\t\t}\r\n\t\t\te.stopPropagation();\r\n\t\t},\r\n\t\t/**\r\n\t\t * 调整高度和宽度\r\n\t\t */\r\n\t\t_fit: function(){\r\n\t\t\tvar s = this.setting;\r\n\t\t\tif(!s.title){\r\n\t\t\t\tif(!this._hasTitlePager()){\r\n\t\t\t\t\tthis.$title.css('display', 'none');\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif(!s.toolbar || s.toolbar.length == 0){\r\n\t\t\t\tthis.$toolbar.css('display','none');\r\n\t\t\t\tthis.$title.css('border-bottom-width', 0);\r\n\t\t\t}\r\n\t\t\tthis._initProxyScroll();\r\n\t\t\tthis._fixHeight();\r\n\t\t\tif(s.width){\r\n\t\t\t\tthis.$element.css({width:s.width});\r\n\t\t\t}\r\n\t\t\tthis.setGridMinWidth(s.viewLeftWidth + s.viewRightWidth + 30);\r\n\t\t},\r\n\t\t/**\r\n\t\t * 生成代理滚动条\r\n\t\t */\r\n\t\t_initProxyScroll: function(){\r\n\t\t\tthis._initXProxyScroll();\r\n\t\t\tthis._initYProxyScroll();\r\n\t\t\tthis._bindWrapYScrollEvent();\r\n\t\t},\r\n\t\t/**\r\n\t\t * 生成横向代理滚动条\r\n\t\t */\r\n\t\t_initXProxyScroll: function(){\r\n\t\t\tthis.$xProxyScroll =\r\n\t\t\t\t$('<div class=\"grid-body-xscrollproxy\" style=\"margin-left:' +\r\n\t\t\t\t\tthis.$tableHeader.find('.grid-header-left>div').outerWidth() +\r\n\t\t\t\t\t'px; margin-right:' +\r\n\t\t\t\t\tthis.$tableHeader.find('.grid-header-right>div').outerWidth() + 'px;\">' +\r\n\t\t\t\t\t'<div style=\"width:' + (this.$tableHeader.find('.grid-header-main>div>table').outerWidth()-3) + 'px;\"></div>' +\r\n\t\t\t\t\t'</div>');\r\n\t\t\tthis.$xProxyScroll.insertAfter(this.$tableBody);\r\n\t\t\tvar grid = this;\r\n\t\t\tthis.$xProxyScroll.scroll(function() {\r\n\t\t\t\tgrid.$tableHeaderMain.scrollLeft($(this).scrollLeft());\r\n\t\t\t\tgrid.$tableBodyMain.scrollLeft($(this).scrollLeft());\r\n\t\t\t\tgrid.$tableFooterMain.scrollLeft($(this).scrollLeft());\r\n\t\t\t});\r\n\t\t\tthis._setFooterBorderTop();\r\n\t\t},\r\n\t\t/**\r\n\t\t * 是否显示有横向向滚动条\r\n\t\t */\r\n\t\t_hasXProxyScroll: function(){\r\n\t\t\treturn this.$xProxyScroll && this.$xProxyScroll.outerWidth() < this.$xProxyScroll.find('>div').outerWidth();\r\n\t\t},\r\n\t\t/**\r\n\t\t * 生成纵向代理滚动条\r\n\t\t */\r\n\t\t_initYProxyScroll: function(){\r\n\t\t\tif(this.setting.autoScroll){\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tthis.$yProxyScroll =\r\n\t\t\t\t$('<div class=\"grid-body-yscrollproxy\" style=\"height:' + this.$tableBody.find('.grid-body-main').outerHeight()\r\n\t\t\t\t\t+ 'px;margin-top:' + this.$tableHeader.outerHeight() + 'px\">' +\r\n\t\t\t\t\t'<div style=\"height:' + (this.$tableBody.find('.grid-body-main>div').outerHeight()) + 'px;\"></div>' +\r\n\t\t\t\t\t'</div>');\r\n\t\t\tthis.$yProxyScroll.insertBefore(this.$tableHeader);\r\n\t\t\tvar grid = this;\r\n\t\t\tthis.$yProxyScroll.scroll(function() {\r\n\t\t\t\tsetDataRowHeight.call(grid);\r\n\t\t\t\tvar ele = grid.$yProxyScroll[0]\r\n\t\t\t\t\t,scrollTop = ele.scrollTop\r\n\t\t\t\t\t,scrollHeight = ele.scrollHeight\r\n\t\t\t\t\t,clientHeight = ele.clientHeight;\r\n\t\t\t\tif(scrollTop == 0){\r\n\t\t\t\t\t grid.$tableBodyLeft.scrollTop(0);\r\n\t\t\t\t\t grid.$tableBodyMain.scrollTop(0);\r\n\t\t\t\t\t grid.$tableBodyRight.scrollTop(0);\r\n\t\t\t\t\t return;     \r\n\t\t\t\t}\r\n\t\t\t\tvar scrollTop = $(this).scrollTop()\r\n\t\t\t\t\t,rowHeight = grid._rowHeight;\r\n\t\t\t\tif(scrollTop + clientHeight > rowHeight * (grid.getAllData().length-0.5)){\r\n\t\t\t\t\tscrollTop =  scrollHeight - clientHeight;\r\n\t\t\t\t}else{\r\n\t\t\t\t\tscrollTop = parseInt(scrollTop/rowHeight) * rowHeight;\r\n\t\t\t\t}\r\n\t\t\t\tgrid.$tableBodyLeft.scrollTop(scrollTop);\r\n\t\t\t\tgrid.$tableBodyMain.scrollTop(scrollTop);\r\n\t\t\t\tgrid.$tableBodyRight.scrollTop(scrollTop);\r\n\t\t\t});\r\n\t\t},\r\n\t\t/**\r\n\t\t * 是否显示有纵向滚动条\r\n\t\t */\r\n\t\t_hasYProxyScroll: function(){\r\n\t\t\tif(!this.$yProxyScroll){\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t\tif(this.$yProxyScroll.css('display') == 'none'){\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t\tif(this.$yProxyScroll.outerHeight() < this.$yProxyScroll.find('>div').outerHeight()){\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\t\t\treturn false;\r\n\t\t},\r\n\t\t/**\r\n\t\t * 外部纵向滚动事件\r\n\t\t */\r\n\t\t_bindWrapYScrollEvent: function(){\r\n\t\t\tvar grid = this\r\n\t\t\t\t,s = this.setting;\r\n\t\t\tif(s.follow == 'all'){\r\n\t\t\t\tthis.$wrap.scroll(function() {\r\n\t\t\t\t\tgrid._headerFollow();\r\n\t\t\t\t\tgrid._footerFollow();\r\n\t\t\t\t});\r\n\t\t\t}else if(s.follow == 'header'){\r\n\t\t\t\tthis.$wrap.scroll(function() {\r\n\t\t\t\t\tgrid._headerFollow();\r\n\t\t\t\t});\r\n\t\t\t}else if(s.follow == 'footer'){\r\n\t\t\t\tthis.$wrap.scroll(function() {\r\n\t\t\t\t\tgrid._footerFollow();\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t},\r\n\t\t/**\r\n\t\t * 修复网格高度,动态设置纵向滚动条的高度\r\n\t\t */\r\n\t\t_fixHeight: function(){\r\n\t\t\tif(this.setting.height == 'push'){\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tthis._fixGridHeight();\r\n\t\t\tthis._fixYProxyScrollHeight();\r\n\t\t},\r\n\t\t/**\r\n\t\t * 修复网格主体的高度\r\n\t\t */\r\n\t\t_fixGridHeight: function(){\r\n\t\t\tvar height = 0;\r\n\t\t\tif(!this.$element.is(':visible')){\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tif(!this.setting.height){\r\n\t\t\t\theight = this.$element.parent().height();\r\n\t\t\t}else{\r\n\t\t\t\theight = parseInt(this.setting.height);\r\n\t\t\t}\r\n\t\t\theight -= this.$header.outerHeight() + 1 ;\r\n\t\t   //卡片网格不需要计算合计长高度\r\n\t\t\tif (this.viewType&&this.viewType==VIEW_TYPE.GRID_VIEW){\r\n\r\n\t\t\t\tif(this.setting.summaryPos == 'top'){\r\n\t\t\t\t\theight -= this.$tableHeader.outerHeight();\r\n\t\t\t\t}else{\r\n\t\t\t\t\theight -= this.$tableHeader.outerHeight() + this.$tableFooter.outerHeight();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\theight -= this._getPagerDownHeight();\r\n\t\t\tif(this._hasXProxyScroll()){\r\n\t\t\t\theight -= 16;\r\n\t\t\t}\r\n\t\t\tthis.$tableBodyLeft.css({height:height});\r\n\t\t\tthis.$tableBodyRight.css({height:height});\r\n\t\t\tthis.$tableBodyMain.css({height:height});\r\n\t\t},\r\n\t\t/**\r\n\t\t * 高度变化，修复滚动条的高度\r\n\t\t */\r\n\t\t_fixYProxyScrollHeight: function(){\r\n\t\t\tif(!this.$yProxyScroll || this.setting.height == 'push'){\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tvar oriHasYScroll = this.$yProxyScroll[0].scrollHeight > this.$yProxyScroll.outerHeight()\r\n\t\t\t\t,wrapHeight = this.$tableBody.outerHeight()\r\n\t\t\t\t,innerHeight = this.$tableBody.find('.grid-body-main>div').outerHeight();\r\n\r\n\t\t\tthis.$yProxyScroll.css('height', wrapHeight).css('margin-top', this.$tableHeader.outerHeight());\r\n\t\t\tthis.$yProxyScroll.find('>div').css('height', innerHeight);\r\n\r\n\t\t\tvar currHasYScroll = innerHeight > this.$yProxyScroll.outerHeight();\r\n\t\t\tif(currHasYScroll == oriHasYScroll){\r\n\t\t\t\tif(currHasYScroll && this.$yProxyScroll.outerWidth() == 0){\r\n\t\t\t\t\tvar css = {};\r\n\t\t\t\t\tcss.width = scrollBarWidth;\r\n\t\t\t\t\tcss.display = 'block';\r\n\t\t\t\t\tcss['overflow-y'] = 'scroll';\r\n\t\t\t\t\tthis.$yProxyScroll.css(css);\r\n\t\t\t\t\tif(this.setting.summaryPos == 'bottom'){\r\n\t\t\t\t\t\tthis.$tableFooterRight.css('margin-right', scrollBarWidth);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tif(currHasYScroll){\r\n\t\t\t\tvar css = {};\r\n\t\t\t\tcss.width = scrollBarWidth;\r\n\t\t\t\tcss.display = 'block';\r\n\t\t\t\tcss['overflow-y'] = 'scroll';\r\n\t\t\t\tthis.$yProxyScroll.css(css);\r\n\t\t\t\tif(this.setting.summaryPos == 'bottom'){\r\n\t\t\t\t\tthis.$tableFooterRight.css('margin-right', scrollBarWidth);\r\n\t\t\t\t}\r\n\t\t\t}else{\r\n\t\t\t\tthis.$yProxyScroll.css('display', 'none');\r\n\t\t\t\tif(this.setting.summaryPos == 'bottom'){\r\n\t\t\t\t\tthis.$tableFooterRight.css('margin-right', 0);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tthis.resize();\r\n\t\t},\r\n\t\t_fixXProxyScroll: function(){\r\n\t\t\tif(this._hasXProxyScroll()){\r\n\t\t\t\tthis.$xProxyScroll.scroll();\r\n\t\t\t}\r\n\t\t},\r\n\t\t/**\r\n\t\t * 网格头跟随滚动\r\n\t\t */\r\n\t\t_headerFollow: function(){\r\n\t\t\tvar gridTop = this.$element.offset().top\r\n\t\t\t\t,wrapTop = this.$wrap.offset().top\r\n\t\t\t\t,bodyHeight = this.$tableBodyMain.outerHeight()\r\n\t\t\t\t,css = {top : wrapTop - gridTop};\r\n\t\t\tif(css.top < 0){\r\n\t\t\t\tcss.top = 0;\r\n\t\t\t}else if(css.top > bodyHeight ){\r\n\t\t\t\tcss.top = bodyHeight;\r\n\t\t\t}\r\n\t\t\tthis.$header.css(css);\r\n\t\t\tthis.$tableHeader.css(css);\r\n\t\t},\r\n\t\t/**\r\n\t\t * 网格尾跟随滚动\r\n\t\t */\r\n\t\t_footerFollow: function(){\r\n\t\t\tif(this.setting.follow != 'all' && this.setting.follow != 'footer'){\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tvar wrapTop = this.$wrap.offset().top\r\n\t\t\t\t,gridFooterTop = this.$element.offset().top + this.$element.outerHeight()\r\n\t\t\t\t,wrapHeight = this.$wrap.outerHeight()\r\n\t\t\t\t,bodyHeight = this.$tableBody.outerHeight()\r\n\t\t\t\t,css = {top: wrapTop - gridFooterTop + wrapHeight};\r\n\t\t\tif(css.top > 0){\r\n\t\t\t\tcss.top = 0;\r\n\t\t\t}else if(css.top < -bodyHeight ){\r\n\t\t\t\tcss.top = -bodyHeight;\r\n\t\t\t}\r\n\t\t\tif(this.$xProxyScroll){\r\n\t\t\t\tthis.$xProxyScroll.css(css);\r\n\t\t\t}\r\n\t\t\tthis.$tableFooter.css(css);\r\n\t\t\tthis._setPagerDownCss(css);\r\n\t\t\tif(css.top != 0){\r\n\t\t\t\tthis.$tableFooter.addClass('relativeFooter');\r\n\t\t\t}else{\r\n\t\t\t\tthis.$tableFooter.removeClass('relativeFooter');\r\n\t\t\t}\r\n\t\t},\r\n\t\t/**\r\n\t\t * 初始化数据到网格中\r\n\t\t */\r\n\t\t_initData: function(){\r\n\t\t\tvar s = this.setting;\r\n\t\t\tthis._initSort();\r\n\t\t\tif(s.data){\r\n\t\t\t\tthis._loadPagers(1, s.data[s.jsonReader.total]);\r\n\t\t\t\tthis._loadData(s.data);\r\n\t\t\t\tupdateColumnTitle.call(this);\r\n\t\t\t}else if(s.url){\r\n\t\t\t\tif(s.autoLoad){\r\n\t\t\t\t\tthis.load(s.url);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\t/**\r\n\t\t * 异步请求数据\r\n\t\t * @param successHandle 加载成功事件\r\n\t\t * @param params 查询参数\r\n\t\t */\r\n\t\t_ajax: function(successHandle, params){\r\n\t\t\t/**\r\n\t\t\t * 远程数据加载前事件，并返回一个值，当为false时不进行远程加载\r\n\t\t\t * @event grid-class#beforeLoad\r\n\t\t\t * @returns {Boolean} boolean 返回值为false 不加载数据\r\n\t\t\t */\r\n\t\t\tif(this.trigger('beforeLoad') === false){\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tvar url = this.setting.url\r\n\t\t\t\t,grid = this;\r\n\t\t\tif(!url){\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tvar rowData = this.getRows();\r\n\t\t\tif(rowData && rowData.length > 0){\r\n\t\t\t\tthis._loadData([], null, true);\r\n\t\t\t}\r\n\t\t\tthis._showMessage(loading);\r\n\t\t\tAppAjax.ajaxCall({\r\n\t\t\t\turl: url,\r\n\t\t\t\tdata: this._getQueryParam(params),\r\n\t\t\t\tdataType: 'json',\r\n\t\t\t\ttype: 'POST',\r\n\t\t\t\tsuccess: function(data){\r\n\t\t\t\t\tupdateColumnTitle.call(grid);\r\n\t\t\t\t\tgrid._hideMessage();\r\n\t\t\t\t\t/**\r\n\t\t\t\t\t * 远程数据加载完成事件\r\n\t\t\t\t\t * <PRE>\r\n\t\t\t\t\t * \t该事件传入加载的数据，可以通过该函数对数据进一步加工\r\n\t\t\t\t\t * </PRE>\r\n\t\t\t\t\t * @event grid-class#onLoadSuccess\r\n\t\t\t\t\t * @param {Object} data 加载的数据\r\n\t\t\t\t\t */\r\n\t\t\t\t\tgrid.trigger('onLoadSuccess', data);\r\n\t\t\t\t\tif(!data){data = [];}\r\n\t\t\t\t\tsuccessHandle(data);\r\n\t\t\t\t},\r\n\t\t\t\terrorHandle: function(){\r\n\t\t\t\t\tgrid._showMessage(error);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t},\r\n\t\t/**\r\n\t\t * 获取请求的查询参数\r\n\t\t */\r\n\t\t_getQueryParam: function(params){\r\n\t\t\tvar sortParam = {};\r\n\t\t\tif(this.setting.remoteSort){\r\n\t\t\t\tvar sort = this.getCurrentSort();\r\n\t\t\t\tsortParam = {__sort__: JSON.stringify(sort)};\r\n\t\t\t}\r\n\t\t\treturn $.extend({}, this.getFixedParameter(), this.getParameter(), this.getCurrentPager(), sortParam, params);\r\n\t\t},\r\n\t\t/**\r\n\t\t * 设置固定查询参数，当下次请求远程数据的时候加入该固定查询参数\r\n\t\t * @param {Object} param 设置查询参数\r\n\t\t * @example $('#demo').grid('setFixedParameter',{a:1, b:2});\r\n\t\t * @memberof grid-class\r\n\t\t * @instance\r\n\t\t */\r\n\t\tsetFixedParameter: function(params){\r\n\t\t\tthis._FixedParameter = params;\r\n\t\t},\r\n\t\t/**\r\n\t\t * 获取当前的固定查询参数\r\n\t\t * @returns {Object} String 查询参数\r\n\t\t * @example $('#demo').grid('getFixedParameter');\r\n\t\t * @memberof grid-class\r\n\t\t * @instance\r\n\t\t */\r\n\t\tgetFixedParameter: function(){\r\n\t\t\treturn this._FixedParameter;\r\n\t\t},\r\n\t\t/**\r\n\t\t * 设置查询参数，当下次请求远程数据的时候加入该查询参数\r\n\t\t * @param {Object} param 设置查询参数\r\n\t\t * @example $('#demo').grid('setParameter',{a:1, b:2});\r\n\t\t * @memberof grid-class\r\n\t\t * @instance\r\n\t\t */\r\n\t\tsetParameter: function(params){\r\n\t\t\tthis._parameter = params;\r\n\t\t},\r\n\t\t/**\r\n\t\t * 获取当前的查询参数\r\n\t\t * @returns {Object} String 查询参数\r\n\t\t * @example $('#demo').grid('getParameter');\r\n\t\t * @memberof grid-class\r\n\t\t * @instance\r\n\t\t */\r\n\t\tgetParameter: function(){\r\n\t\t\tif(this._parameter){\r\n\t\t\t\treturn this._parameter;\r\n\t\t\t}else{\r\n\t\t\t\treturn null;\r\n\t\t\t}\r\n\t\t},\r\n\t\t/**\r\n\t\t * 加载数据\r\n\t\t * @param {object/string} obj 如果是对象则作为查询参数，如果为字符串做为远程url地址\r\n\t\t * @todo 如有分页则定位到第一页\r\n\t\t * @fires grid-class#beforeLoad\r\n\t\t * @fires grid-class#onLoadSuccess\r\n\t\t * @example $('#demo').grid('load','a.do');\r\n\t\t * @memberof grid-class\r\n\t\t * @instance\r\n\t\t */\r\n\t\tload: function(obj){\r\n\t\t\tif(typeof(obj) == 'string'){\r\n\t\t\t\tthis.setting.url = obj;\r\n\t\t\t}else if(typeof(obj) == 'object'){\r\n\t\t\t\tthis.setParameter(obj);\r\n\t\t\t}\r\n\t\t\tvar g = this\r\n\t\t\t\t,params = null;\r\n\t\t\tif(this._hasPager()){\r\n\t\t\t\tparams = {page: 1};\r\n\t\t\t}\r\n\t\t\tthis._ajax(function(data){\r\n\t\t\t\tg._loadPagers(1, data[g.setting.jsonReader.total]);\r\n\t\t\t\tg._loadData(data, 1);\r\n\t\t\t}, params);\r\n\t\t},\r\n\t\t/**\r\n\t\t * 根据条件查询数据\r\n\t\t */\r\n\t\tquery: function(params){\r\n\t\t\tthis.setParameter(params);\r\n\t\t\tthis.load();\r\n\t\t},\r\n\t\t/**\r\n\t\t * 重新加载行，就像 load 方法一样，但是保持在当前页。\r\n\t\t * @param {object/string} obj 如果是对象则作为查询参数，如果为字符串做为远程url地址\r\n\t\t * @fires grid-class#beforeLoad\r\n\t\t * @fires grid-class#onLoadSuccess\r\n\t\t * @example $('#demo').grid('reload');\r\n\t\t * @memberof grid-class\r\n\t\t * @instance\r\n\t\t */\r\n\t\treload: function(obj){\r\n\t\t\tif(typeof(obj) == 'string'){\r\n\t\t\t\tthis.setting.url = obj;\r\n\t\t\t}else if(typeof(obj) == 'object'){\r\n\t\t\t\tthis.setParameter(obj);\r\n\t\t\t}\r\n\t\t\tvar g = this;\r\n\t\t\tthis._ajax(function(data){\r\n\t\t\t\tg._loadPagers(g.getPageIndex(), data[g.setting.jsonReader.total]);\r\n\t\t\t\tg._loadData(data, g._getStarRowNumber());\r\n\t\t\t});\r\n\t\t},\r\n\t\t/**\r\n\t\t * 载入静态数据，清除编辑信息\r\n\t\t * @param {Object|Array} data 行数组数据{Array} 或 数据对象{rows,footer}\r\n\t\t * @todo 行号重置为1\r\n\t\t * @todo 替换表格体数据，如果存在footer，替换footer\r\n\t\t * @example $('#demo').grid('loadData',[{col1:1,col2:2,col3:3}]);\r\n\t\t * @example $('#demo').grid('loadData',{rows:[{col1:1,col2:2,col3:3}],footer:[{col1:100,col3:100}]});\r\n\t\t * @memberof grid-class\r\n\t\t * @instance\r\n\t\t */\r\n\t\tloadData: function(data){\r\n\t\t\tthis._loadData(data, 1);\r\n\t\t\tthis._newData = {updated:{}, inserted:{}, deleted:{}};\r\n\t\t},\r\n\t\t/**\r\n\t\t * 重新渲染表格数据，清除编辑信息\r\n\t\t * @example $('#demo').grid('reflashData');\r\n\t\t * @memberof grid-class\r\n\t\t * @instance\r\n\t\t */\r\n\t\treflashData: function(){\r\n\t\t\tthis._loadData(this.getRows(), this._getStarRowNumber());\r\n\t\t\tthis._newData = {updated:{}, inserted:{}, deleted:{}};\r\n\t\t},\r\n\t\t/**\r\n\t\t * 加载数据，包括数据体和数据尾\r\n\t\t * \t清除表格原本数据，再载入新数据\r\n\t\t */\r\n\t\t_loadData: function(data, starNum, noDataRender){\r\n\t\t\tvar that = this\r\n\t\t\t\t,rows = null\r\n\t\t\t\t,footer = null;\r\n\t\t\tresetNewData();\r\n\t\t\tif($.isArray(data)){\r\n\t\t\t\trows = data;\r\n\t\t\t\tthis._setRows(rows);\r\n\t\t\t}else{\r\n\t\t\t\trows = data[this.setting.jsonReader.rows];\r\n\t\t\t\tfooter = data[this.setting.jsonReader.footer];\r\n\t\t\t\tthis.data = data;\r\n\t\t\t\tif(data.dicts){\r\n\t\t\t\t\tif(this.dicts){\r\n\t\t\t\t\t\t$.extend(true, this.dicts, data.dicts);\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\tthis.dicts = data.dicts;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tthis._setRows(rows);\r\n\t\t\t\tif(footer){\r\n\t\t\t\t\tthis._setFooterRows(footer);\r\n\t\t\t\t}else{\r\n\t\t\t\t\tthis._setFooterRows([]);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tthis._calculateData(this.getRows());\r\n\t\t\tthis._sortData();\r\n\t\t\tthis._loadBody(rows, starNum);\r\n\t\t\tthis.loadFooter(footer);\r\n\t\t\tthis._fitWordColumn();\r\n\t\t\tif(!noDataRender){\r\n\t\t\t\tthis._afterDataRender(data);\r\n\t\t\t}\r\n\t\t\tsetTimeout(function(){\r\n\t\t\t\tthat.resize();\r\n\t\t\t}, 100);\r\n\t\t\tfunction resetNewData(){\r\n\t\t\t\tthat._newData.updated = {};\r\n\t\t\t\tthat._newData.inserted = {};\r\n\t\t\t\tthat._newData.deleted = {};\r\n\t\t\t}\r\n\t\t},\r\n\t\tsetDicts: function(dicts){\r\n\t\t\tthis.dicts = dicts;\r\n\t\t},\r\n\t\tgetDicts: function(){\r\n\t\t\treturn this.dicts;\r\n\t\t},\r\n\t\t/**\r\n\t\t * 初始化计算函数\r\n\t\t */\r\n\t\t_initCalcFunc: function(data){\r\n\t\t\tvar formulaContainer = this.setting.formulaContainer;\r\n\t\t\tif(formulaContainer[0].func != undefined){\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tif(data.length > 0){\r\n\t\t\t\tvar row = data[0];\r\n\t\t\t\tvar argKeys = [];\r\n\t\t\t\targKeys.push('__obj__');\r\n\t\t\t\tfor(var attr in row){\r\n\t\t\t\t\tif(attr.indexOf('|') == -1){\r\n\t\t\t\t\t\targKeys.push(attr);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tfor(var i = 0 ; i < formulaContainer.length; i++){\r\n\t\t\t\t\tvar formula = formulaContainer[i];\r\n\t\t\t\t\tformula.func = new Function(argKeys, 'return (' + formula.formula + ');');\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\t/**\r\n\t\t * 计算数据\r\n\t\t */\r\n\t\t_calculateData: function(data){\r\n\t\t\tvar formulaContainer = this.setting.formulaContainer;\r\n\t\t\tif(formulaContainer.length == 0){\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tthis._initCalcFunc(data);\r\n\t\t\tfor(var i = 0 ; i < data.length; i++){\r\n\t\t\t\tfor(var j = 0; j < formulaContainer.length; j++){\r\n\t\t\t\t\tthis._calculateRow(formulaContainer[j], data[i]);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\t/**\r\n\t\t * 计算行数据\r\n\t\t */\r\n\t\t_calculateRow: function(formula, row){\r\n\t\t\tvar args = [];\r\n\t\t\targs.push(row);\r\n\t\t\tfor(var attr in row){\r\n\t\t\t\targs.push(row[attr]);\r\n\t\t\t}\r\n\t\t\trow[formula.field] = formula.func.apply(row, args);\r\n\t\t},\r\n\t\t/**\r\n\t\t * 载入表格体数据\r\n\t\t * @param {Array} rows 尾数据数据\r\n\t\t */\r\n\t\t_loadBody: function(rows, starNum){\r\n\t\t\tif(!rows){\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tif(!isNaN(starNum)){\r\n\t\t\t\tthis._rownumbers = starNum;\r\n\t\t\t}\r\n\t\t\tthis._clearBodyHtml();\r\n\t\t\tif(rows.length > 0){\r\n\t\t\t\tthis._hideMessage();\r\n\t\t\t}else{\r\n\t\t\t\tthis._showMessage(empty);\r\n\t\t\t}\r\n\t\t\tthis._loadBodyHtml(rows);\r\n\t\t\t/**\r\n\t\t\t * 当网格体的数据发生改变的事件\r\n\t\t\t * @event grid-class#onDataChange\r\n\t\t\t */\r\n\t\t\tthis.trigger('onDataChange');\r\n\t\t},\r\n\t\t/**\r\n\t\t * 清除数据体Html\r\n\t\t * 清除前 将编辑器移动回编辑器容器\r\n\t\t */\r\n\t\t_clearBodyHtml: function(){\r\n\r\n\t\t\tthis._currentEditRowId = null;\r\n\r\n\t\t\tthis._restoreEditor();\r\n\t\t\tthis.$tableBodyLeft.find('>div>table>tbody').html('');\r\n\t\t\tthis.$tableBodyRight.find('>div>table>tbody').html('');\r\n\t\t\tthis.$tableBodyMain.find('>div>table>tbody').html('');\r\n\t\t   if (this.$cardRegion[\"center\"]){\r\n\t\t\t\tthis.$cardRegion[\"center\"].find('.grid-view>tbody').html('');\r\n\t\t\t}\r\n\r\n\r\n\r\n\t\t},\r\n\t\t/**\r\n\t\t * 追加数据行的网格体\r\n\t\t * @param {Array} rows\r\n\t\t */\r\n\t\t_loadBodyHtml: function(rows){\r\n\t\t\t//视图内容加载 by sjq\r\n\t\t\tif (this.viewType==VIEW_TYPE.GRID_VIEW){\r\n\t\t\t\tthis._fixRowNumberWidth(rows);\r\n\t\t\t\tthis._loadBodyHtmlSimpleRow(rows);\r\n\t\t\t}else{\r\n\t\t\t\tthis._loadBodyCardRow(rows)\r\n\t\t\t}\r\n\t\t\tthis.$tableHeaderLeft.find('td[field=\"_checkbox\"] input').prop('checked', false);\r\n\t\t},\r\n\t\t_loadBodyCardRow:function(rows){\r\n\t\t\t//不显示无记录\r\n\t\t\t  this._hideMessage();\r\n\t\t\tvar mainHtml = []\r\n\t\t\t\t,trHead = ''\r\n\t\t\t\t,trEnd = '</tr>'\r\n\t\t\t\t,rowsLen = rows.length;\r\n\t\t\tfor (var i = 0; i < rowsLen ; i++) {\r\n\t\t\t\tvar rowData = rows[i]\r\n\t\t\t\t\t,trId = App.uuid();\r\n\t\t\t\trowData.__rowId = trId;\r\n\t\t\t\ttrHead = this._createRowTr(rowData, i);\r\n\t\t\t\t//leftHtml += trHead + this._initRowTrInnerHtml(this.frozenColumns, rowData) + trEnd;\r\n\t\t\t\tmainHtml.push(trHead+this._createViewRow(rowData, i)+trEnd);\r\n\t\t\t\t//rightHtml += trHead + this._initRowTrInnerHtml(this.frozenColumnsRight, rowData) + trEnd;\r\n\t\t\t\tthis._rowData[trId] = rowData;\r\n\t\t\t\tthis._rownumbers++;\r\n\t\t\t}\r\n\t\t   \r\n\t\t\r\n\t\t\tthis.$cardRegion[\"center\"].find('.grid-view>tbody').append(mainHtml.join(\"\"));\r\n\t\t\tthis._footerFollow();\r\n\t\t\tthis._fixXProxyScroll();\r\n\t\t\tthis._fixYProxyScrollHeight();\r\n\r\n\t\t},\r\n\t\t_createViewRow:function(rowData,index){\r\n\t\t\tvar view=this.setting.view,\tresult=\"<td>\";\r\n\r\n\t\t\tif ($.isFunction(view.rowRender)){\r\n\t\t\t\tresult+=view.rowRender.call(this,rowData)\r\n\r\n\t\t\t}\r\n\t\t\treturn result+\"</td>\";\r\n\r\n\t\t},\r\n\t\t/**\r\n\t\t * 安装普通数据行输出网格展现\r\n\t\t */\r\n\t\t_loadBodyHtmlSimpleRow: function(rows){\r\n\t\t\tvar leftHtml = ''\r\n\t\t\t\t,mainHtml = ''\r\n\t\t\t\t,rightHtml = ''\r\n\t\t\t\t,trHead = ''\r\n\t\t\t\t,trEnd = '</tr>'\r\n\t\t\t\t,rowsLen = rows.length;\r\n\t\t\tfor (var i = 0; i < rowsLen ; i++) {\r\n\t\t\t\tvar rowData = rows[i]\r\n\t\t\t\t\t,trId = App.uuid();\r\n\t\t\t\trowData.__rowId = trId;\r\n\t\t\t\ttrHead = this._createRowTr(rowData, i);\r\n\t\t\t\tleftHtml += trHead + this._initRowTrInnerHtml(this.frozenColumns, rowData) + trEnd;\r\n\t\t\t\tmainHtml += trHead + this._initRowTrInnerHtml(this.columns, rowData) + trEnd;\r\n\t\t\t\trightHtml += trHead + this._initRowTrInnerHtml(this.frozenColumnsRight, rowData) + trEnd;\r\n\t\t\t\tthis._rowData[trId] = rowData;\r\n\t\t\t\tthis._rownumbers++;\r\n\t\t\t}\r\n\t\t\tthis.$tableBodyLeft.find('>div>table>tbody').append(leftHtml);\r\n\t\t\tthis.$tableBodyRight.find('>div>table>tbody').append(rightHtml);\r\n\t\t\tthis.$tableBodyMain.find('>div>table>tbody').append(mainHtml);\r\n\t\t\tthis._footerFollow();\r\n\t\t\tthis._fixXProxyScroll();\r\n\t\t\tthis._fixYProxyScrollHeight();\r\n\t\t},\r\n\t\t_createRowTr: function(rowData, index){\r\n\t\t\tvar result = ''\r\n\t\t\t\t,rowClass = '';\r\n\t\t\t/**\r\n\t\t\t * 行是否可勾选\r\n\t\t\t * @event grid-class#rowCheckable\r\n\t\t\t * @returns {Boolean} boolean 返回值为false 则为不可勾选\r\n\t\t\t */\r\n\t\t\tif($.isFunction(this.setting.rowCheckable)){\r\n\t\t\t\tif(this.setting.rowCheckable(rowData, this._rownumbers) === false){\r\n\t\t\t\t\trowClass = 'row-uncheckable';\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tvar rowCusCls = '';\r\n\t\t\t/**\r\n\t\t\t * 自定义行样式输出\r\n\t\t\t * @event grid-class#rowCls\r\n\t\t\t * @returns {String} string 返回值行样式\r\n\t\t\t */\r\n\t\t\tif(this.hasBindEvent('rowCls')){\r\n\t\t\t\trowCusCls = ' ' + this.__events.rowCls[0](rowData, index);\r\n\t\t\t}\r\n\t\t\tif(rowData._rowType  == 'subtotal'){\r\n\t\t\t\trowClass += ' subtotal' + rowCusCls;\r\n\t\t\t\tresult = '<tr id=\"' + rowData.__rowId + '\" class=\"' + rowClass + '\">';\r\n\t\t\t}else{\r\n\t\t\t\trowClass += ' data-row ' + (index%2 == 0 ? 'even' : 'odd') + rowCusCls; \r\n\t\t\t\tvar idAttr = rowData[this.setting.idField] ? '_v=\"' + rowData[this.setting.idField] + '\"' : '';\r\n\t\t\t\tresult = '<tr id=\"' + rowData.__rowId + '\" ' + idAttr + ' class=\"' + rowClass + '\">';\r\n\t\t\t}\r\n\t\t\treturn result;\r\n\t\t},\r\n\t\t/**\r\n\t\t * 根据行号自适应调整行号列的宽度\r\n\t\t */\r\n\t\t_fixRowNumberWidth: function(rows){\r\n\t\t\tif(this.setting.rownumbers != 'normal' && this.setting.rownumbers != 'repeat'){\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tvar rownumber = 0;\r\n\t\t\tif(this.setting.rownumbers == 'normal'){\r\n\t\t\t\trownumber += this._rownumbers + rows.length;\r\n\t\t\t}else{\r\n\t\t\t\trownumber += rows.length;\r\n\t\t\t}\r\n\t\t\tvar width = 30;\r\n\t\t\tif(rownumber > 99 && rownumber < 999){\r\n\t\t\t\twidth = 38;\r\n\t\t\t}else if(rownumber > 999 && rownumber < 9999){\r\n\t\t\t\twidth = 47;\r\n\t\t\t}else if(rownumber > 9999 && rownumber < 99999){\r\n\t\t\t\twidth = 56;\r\n\t\t\t}else if(rownumber > 99999 && rownumber < 999999){\r\n\t\t\t\twidth = 64;\r\n\t\t\t}else if(rownumber > 999999 && rownumber < 9999999){\r\n\t\t\t\twidth = 73;\r\n\t\t\t}\r\n\t\t\tvar hasOriScroll = this._hasXProxyScroll();\r\n\t\t\tif(Math.abs(this.$tableHeaderLeft.find('td[field=\"_rownumbers\"]').outerWidth() - width) > 5){\r\n\t\t\t\tvar $td = this.$tableHeader.find('td[field=\"_rownumbers\"]')\r\n\t\t\t\t\t,cid = $td.attr('_cid')\r\n\t\t\t\t\t,viewWidth = this.$tableHeader.find('table').outerWidth()\r\n\t\t\t\t\t+ (width - this._column[cid].width);\r\n\t\t\t\tif(this.$xProxyScroll){\r\n\t\t\t\t\tthis.$xProxyScroll.css('margin-left',viewWidth);\r\n\t\t\t\t}\r\n\t\t\t\tthis._setFooterBorderTop();\r\n\t\t\t\tthis.$table.find('td[_cid=' + cid + ']>div').css('width', width);\r\n\t\t\t\tthis._column[cid].width = width;\r\n\t\t\t\tif(this.setting.fitColumns && !hasOriScroll){\r\n\t\t\t\t\tthis.resize();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\t/**\r\n\t\t * 数据渲染完成事件\r\n\t\t */\r\n\t\t_afterDataRender: function(data){\r\n\t\t\tif(this.setting.mergeColumns){\r\n\t\t\t\tthis.mergeColumns(this.setting.mergeColumns);\r\n\t\t\t}\r\n\t\t\t/**\r\n\t\t\t * 数据渲染完成事件\r\n\t\t\t * @event grid-class#afterDataRender\r\n\t\t\t * @param {Object} data 渲染的数据\r\n\t\t\t */\r\n\t\t\tthis.trigger('afterDataRender', data);\r\n\t\t},\r\n\t\t/**\r\n\t\t * 清除当前行的样式\r\n\t\t */\r\n\t\t_clearCurrent: function(){\r\n\t\t\tthis.$tableBodyLeft.find('>div>table tr.' + currentRowCls).removeClass(currentRowCls);\r\n\t\t\tthis.$tableBodyRight.find('>div>table tr.' + currentRowCls).removeClass(currentRowCls);\r\n\t\t\tthis.$tableBodyMain.find('>div>table tr.' + currentRowCls).removeClass(currentRowCls);\r\n\t\t},\r\n\t\t/**\r\n\t\t * 生成数据行的内容html\r\n\t\t */\r\n\t\t_initRowTrInnerHtml: function(cols, row){\r\n\t\t\tvar result = '';\r\n\t\t\tfor ( var i = 0; i < cols.length; i++) {\r\n\t\t\t\tresult += this._initCellHtml(cols[i], row);\r\n\t\t\t}\r\n\t\t\treturn result;\r\n\t\t},\r\n\t\t/**\r\n\t\t * 生成数据单元格html\r\n\t\t */\r\n\t\t_initCellHtml: function(col, row){\r\n\t\t\tif(col.hidden){\r\n\t\t\t\treturn '';\r\n\t\t\t}\r\n\t\t\tvar titleAttr = ''\r\n\t\t\t\t,divCss = ''\r\n\t\t\t\t,tdCss = ''\r\n\t\t\t\t,tdCls = ''\r\n\t\t\t\t,showTitle = this._getFormatText(col, row);\r\n\t\t\tif(col.showTitle){\r\n\t\t\t\tif (showTitle){\r\n\t\t\t\t\ttitleAttr = 'title=\"'+ escapeHtml(showTitle) +'\"';\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif(row._rowType  == 'subtotal' && col.subtotalText){\r\n\t\t\t\ttdCss = col.subtotalCss;\r\n\t\t\t\ttdCls = col.subtotalCls;\r\n\t\t\t\trow[col.field] = col.subtotalText;\r\n\t\t\t}\r\n\t\t\tif(row[col.field + '_style']){\r\n\t\t\t\tdivCss += row[col.field + '_style'];\r\n\t\t\t}\r\n\t\t\treturn '<td ' + this._getBodyTdExp(col, row, tdCss) + col.bodyTdAttrExp + this._getTdClassAttr(col, tdCls) + titleAttr + '>' +\r\n\t\t\t\t'<div style=\"width:' + col.width + 'px;' + divCss + '\">' + this._initTdInnerHtml(col, row, showTitle) + '</div>' +\r\n\t\t\t\t'</td>';\r\n\t\t},\r\n\t\t/**\r\n\t\t * 获取数据单元格的样式表达式\r\n\t\t */\r\n\t\t_getBodyTdExp: function(col, row){\r\n\t\t\tvar result = '';\r\n\t\t\tif($.isFunction(col.styler)){\r\n\t\t\t\tvar css = col.styler(row[col.field], row);\r\n\t\t\t\tif(css){\r\n\t\t\t\t\tresult += css;\r\n\t\t\t\t}\r\n\t\t\t}else if(col.styler){\r\n\t\t\t\tresult += col.styler;\r\n\t\t\t}\r\n\t\t\tif(result){\r\n\t\t\t\tresult = 'style=\"' + result + '\" '\r\n\t\t\t}\r\n\t\t\treturn result;\r\n\t\t},\r\n\t\t_getTdClassAttr: function(col, tdCls){\r\n\t\t\tvar result = '';\r\n\t\t\tif(col.cls){\r\n\t\t\t\tresult = col.cls;\r\n\t\t\t}\r\n\t\t\tif(tdCls){\r\n\t\t\t\tresult += ' ' + tdCls ;\r\n\t\t\t}\r\n\t\t\tif(col.hidden){\r\n\t\t\t\tresult += ' grid-cell-hidden';\r\n\t\t\t}\r\n\t\t\tif(result){\r\n\t\t\t\tresult = ' class=\"' + result + '\"';\r\n\t\t\t}\r\n\t\t\treturn result;\r\n\t\t},\r\n\t\t/**\r\n\t\t * 获取行内数据单元格div内的html\r\n\t\t */\r\n\t\t_initTdInnerHtml: function(col, row, showTitle){\r\n\t\t\tvar html = '';\r\n\t\t\tif(col.sysCol){\r\n\t\t\t\tif(col.field == '_rownumbers'){\r\n\t\t\t\t\thtml = this._rownumbers+'';\r\n\t\t\t\t}else if(col._html){\r\n\t\t\t\t\thtml = col._html;\r\n\t\t\t\t}else if(col.buttons){\r\n\t\t\t\t\thtml = this._getBtnHtml(col, row);\r\n\t\t\t\t}\r\n\t\t\t\treturn html;\r\n\t\t\t}else if(showTitle != IE8_TD_EMPTY){\r\n\t\t\t\treturn showTitle;\r\n\t\t\t}else{\r\n\t\t\t\treturn this._getFormatText(col, row)\r\n\t\t\t}\r\n\t\t},\r\n\t\t/**\r\n\t\t * 获取行操作按钮的文本\r\n\t\t * @param col 列信息\r\n\t\t * @param row 行数据\r\n\t\t */\r\n\t\t_getBtnHtml: function(col, row){\r\n\t\t\tvar html = ''\r\n\t\t\t\t,btns = col.buttons;\r\n\t\t\tfor(var i= 0; i < btns.length; i++){\r\n\t\t\t\tvar btn = btns[i];\r\n\t\t\t\thtml += this._createRowBtn(btn, row, this._rownumbers);\r\n\t\t\t}\r\n\t\t\treturn html;\r\n\t\t},\r\n\t\t/**\r\n\t\t * 获取列展现值\r\n\t\t */\r\n\t\t_getFormatText: function(col, row){\r\n\t\t\tvar text = row[col.field]\r\n\t\t\t\t,formatter = col.formatter;\r\n\t\t\tif(col.formatPattern){\r\n\t\t\t\tformatter = 'numberFormatter';\r\n\t\t\t}\r\n\t\t\tif(formatter){\r\n\t\t\t\tif($.isFunction(formatter)){\r\n\t\t\t\t\ttext = formatter(text, row, this._rownumbers, col);\r\n\t\t\t\t}else if(typeof(formatter) == 'string'){\r\n\t\t\t\t\tif(!col.formatPattern){\r\n\t\t\t\t\t\tif(formatter.charAt(0) == '[' && formatter.charAt(formatter.length-1) == ']'){\r\n\t\t\t\t\t\t\tcol.formatPattern = formatter.substr(1, formatter.length-2)\r\n\t\t\t\t\t\t\tformatter = 'numberFormatter';\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif(col.template){\r\n\t\t\t\t\t\ttext = col.template.apply(row);\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\ttext = Formatter.formatter(formatter, text, row, this._rownumbers, col);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}else if(this.dicts){\r\n\t\t\t\tvar dict = this.dicts[col.field]; \r\n\t\t\t\tif(dict){\r\n\t\t\t\t\ttext = dict[text];\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn escapeScriptTag(text);\r\n\t\t\tfunction escapeScriptTag(str){\r\n\t\t\t\tif(str == undefined){\r\n\t\t\t\t\tstr = IE8_TD_EMPTY;\r\n\t\t\t\t}else if(typeof(str) == 'string'){\r\n\t\t\t\t\tstr = str.replace(/<script/g, '&lt;script');\r\n\t\t\t\t\tvar blank = str.match(/^[ ]*/);\r\n\t\t\t\t\tif(blank && blank[0]){\r\n\t\t\t\t\t\tvar htmlBlank = '&nbsp;'\r\n\t\t\t\t\t\t\t,len = blank[0].length;\r\n\t\t\t\t\t\tfor(var i = 1; i < len; i++){\r\n\t\t\t\t\t\t\thtmlBlank += '&nbsp;';\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tstr = str.replace(/^[ ]*/, htmlBlank);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\treturn str;\r\n\t\t\t}\r\n\t\t},\r\n\t\t/**\r\n\t\t * 载入数据尾\r\n\t\t * @todo 清除尾{@link grid#clearFooter}\r\n\t\t * @todo 追加尾{@link grid#appendFooter}\r\n\t\t * @param {Array} footer 尾数据数据\r\n\t\t * @example $('#demo').grid('loadFooter',[{col1:1,col2:1,col3:1},{col1:2,col2:2,col3:2}]);\r\n\t\t * @memberof grid-class\r\n\t\t * @instance\r\n\t\t */\r\n\t\tloadFooter: function(footer){\r\n\t\t\tthis.clearFooter();\r\n\t\t\tthis._appendSummary();\r\n\t\t\tthis.appendFooter(footer);\r\n\t\t},\r\n\t\t/**\r\n\t\t * 清除尾\r\n\t\t * @example $('#demo').grid('clearFooter');\r\n\t\t * @memberof grid-class\r\n\t\t * @instance\r\n\t\t */\r\n\t\tclearFooter: function(){\r\n\t\t\tthis.$tableFooterLeft.find('>div>table>tbody').html('');\r\n\t\t\tthis.$tableFooterRight.find('>div>table>tbody').html('');\r\n\t\t\tthis.$tableFooterMain.find('>div>table>tbody').html('');\r\n\t\t\tthis.$tableFooterCustom.html('');\r\n\t\t\tthis._frowsnumber = 1;\r\n\t\t\tthis._setFooterRows([]);\r\n\t\t\tthis._footerFollow();\r\n\t\t\tthis._fixHeight();\r\n\t\t\tthis.$tableFooter.css('display', 'none');\r\n\t\t},\r\n\t\t/**\r\n\t\t * 追加表尾\r\n\t\t * @param {Array} footer 尾数据数据\r\n\t\t * @example $('#demo').grid('appendFooter',[{col1:1,col2:1,col3:1},{col1:2,col2:2,col3:2}]);\r\n\t\t * @memberof grid-class\r\n\t\t * @instance\r\n\t\t */\r\n\t\tappendFooter: function(footer){\r\n\t\t\tif(!footer){\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tthis._appendFooter(footer);\r\n\t\t\tthis._appendFooterData(footer);\r\n\t\t},\r\n\t\t/**\r\n\t\t * 追加数据到网格输出\r\n\t\t * @param footer\r\n\t\t */\r\n\t\t_appendFooter: function(footer){\r\n\t\t\tif(!$.isArray(footer) && footer){\r\n\t\t\t\tfooter = [footer];\r\n\t\t\t}\r\n\t\t\tif(footer.length == 0){\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tvar leftHtml = ''\r\n\t\t\t\t,rightHtml = ''\r\n\t\t\t\t,mainHtml = '';\r\n\t\t\tfor ( var i = 0; i < footer.length; i++) {\r\n\t\t\t\tleftHtml += this._initFootRowHtml(this.frozenColumns, footer[i]);\r\n\t\t\t\trightHtml += this._initFootRowHtml(this.frozenColumnsRight, footer[i]);\r\n\t\t\t\tmainHtml += this._initFootRowHtml(this.columns, footer[i]);\r\n\t\t\t\tthis._frowsnumber++;\r\n\t\t\t}\r\n\t\t\tthis.$tableFooterLeft.find('>div>table>tbody').append(leftHtml);\r\n\t\t\tthis.$tableFooterRight.find('>div>table>tbody').append(rightHtml);\r\n\t\t\tthis.$tableFooterMain.find('>div>table>tbody').append(mainHtml);\r\n\t\t\tthis.$tableFooter.css('display', 'block');\r\n\t\t\tthis._fixHeight();\r\n\t\t\tthis._footerFollow();\r\n\t\t\tthis._fixXProxyScroll();\r\n\t\t},\r\n\t\t/**\r\n\t\t * 追加结尾的数据\r\n\t\t */\r\n\t\t_appendFooterData: function(footer){\r\n\t\t\tvar oriFooter = this.getFooterRows();\r\n\t\t\tif(oriFooter){\r\n\t\t\t\tif($.isArray(footer)){\r\n\t\t\t\t\t$.merge(oriFooter, footer);\r\n\t\t\t\t}else{\r\n\t\t\t\t\toriFooter.push(footer);\r\n\t\t\t\t}\r\n\t\t\t}else{\r\n\t\t\t\tthis._setFooterRows(footer);\r\n\t\t\t}\r\n\t\t},\r\n\t\t/**\r\n\t\t * 生成数据行html\r\n\t\t */\r\n\t\t_initFootRowHtml: function(cols, row, index){\r\n\t\t\tvar html = '<tr>';\r\n\t\t\tfor ( var i = 0; i < cols.length; i++) {\r\n\t\t\t\thtml += this._initFootCellHtml(cols[i], row, index);\r\n\t\t\t}\r\n\t\t\treturn html + '</tr>';\r\n\t\t},\r\n\t\t/**\r\n\t\t * 生成数据单元格html\r\n\t\t */\r\n\t\t_initFootCellHtml: function(col, row, index){\r\n\t\t\tvar titleAttr = ''\r\n\t\t\t\t,divCss = ''\r\n\t\t\t\t,tdCss = ''\r\n\t\t\t\t,tdCls = '';\r\n\t\t\tif(col.totalText){\r\n\t\t\t\ttdCss = col.totalCss;\r\n\t\t\t\ttdCls = col.totalCls;\r\n\t\t\t\trow[col.field] = col.totalText;\r\n\t\t\t}\r\n\t\t\tvar showTitle = this._getFormatText(col, row);\r\n\t\t\tif(col.showTitle && showTitle){\r\n\t\t\t\t\ttitleAttr = ' title=\"'+ escapeHtml(showTitle) +'\"';\r\n\t\t\t}\r\n\t\t\tif(row[col.field + '_style']){\r\n\t\t\t\tdivCss += row[col.field + '_style'];\r\n\t\t\t}\r\n\t\t\treturn '<td style=\"' + this._getBodyTdExp(col, row, tdCss) + '\" ' + col.footerTdAttrExp + this._getTdClassAttr(col, tdCls) + titleAttr +'>' +\r\n\t\t\t\t'<div style=\"width:' + col.width + 'px;' + divCss +'\">' + this._initFooterTdInnerHtml(col, row, index, showTitle) + '</div>' +\r\n\t\t\t\t'</td>';\r\n\t\t},\r\n\t\t/**\r\n\t\t * 获取尾行内数据单元格div内的html\r\n\t\t */\r\n\t\t_initFooterTdInnerHtml: function(col, row, index, showTitle){\r\n\t\t\tvar html = '';\r\n\t\t\tif(col.sysCol){\r\n\t\t\t\tif(col.field == '_rownumbers'){\r\n\t\t\t\t\tif(this.setting.footerRowNumber){\r\n\t\t\t\t\t   html =  this._frowsnumber + '';\r\n\t\t\t\t\t}else if(row._rownumbers){\r\n\t\t\t\t\t   html = this._getFormatText(col, row, index);         \r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t   html =  '合计';           \r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}else if(showTitle){\r\n\t\t\t\treturn showTitle;\r\n\t\t\t}else{\r\n\t\t\t\thtml = this._getFormatText(col, row, index);\r\n\t\t\t}\r\n\t\t\treturn html;\r\n\t\t},\r\n\t\t/**\r\n\t\t * 获取当前网格的数据\r\n\t\t * @property {Object} [returns] 数据对象\r\n\t\t * @property {Array} [returns.rows] 数据行\r\n\t\t * @property {Array} [returns.footer] 尾数据行\r\n\t\t * @property {Number} [returns.total] 行总数\r\n\t\t * @returns {Object} data 数据对象\r\n\t\t * @example $('#demo').grid('getData');\r\n\t\t * @memberof grid-class\r\n\t\t * @instance\r\n\t\t */\r\n\t\tgetData: function(){\r\n\t\t\treturn this.data;\r\n\t\t},\r\n\t\t/**\r\n\t\t * 网格上的数据是否为合法，当存在非法数据时返回false\r\n\t\t * @returns {Boolean} valid true为合法\r\n\t\t * @example $('#demo').grid('isValid');\r\n\t\t * @memberof grid-class\r\n\t\t * @instance\r\n\t\t */\r\n\t\tisValid: function(){\r\n\t\t\tif(this.$tableBody.find('.invalid').length > 0){\r\n\t\t\t\treturn false;\r\n\t\t\t}else{\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\t\t},\r\n\t\t/**\r\n\t\t * 获取当前网格展现的数据\r\n\t\t * @returns {Array} rows 数据行\r\n\t\t * @example $('#demo').grid('getAllData');\r\n\t\t * @memberof grid-class\r\n\t\t * @instance\r\n\t\t */\r\n\t\tgetAllData: function(copy){\r\n\t\t\tvar trs = this.$tableBodyMain.find('tr')\r\n\t\t\t\t,data = [];\r\n\t\t\tfor(var i = 0; i< trs.length; i++){\r\n\t\t\t\tvar rowData = this._getDataByRowId(trs[i].id);\r\n\t\t\t\tif(rowData){\r\n\t\t\t\t\tif(copy){\r\n\t\t\t\t\t\trowData = $.extend(true, {}, rowData);\r\n\t\t\t\t\t\tdelete rowData.__rowId;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tdata.push(rowData);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn data;\r\n\t\t},\r\n\t\t/**\r\n\t\t * 获取当前编辑行的数据\r\n\t\t * @returns {Object} rowData 数据行\r\n\t\t * @example $('#demo').grid('getCurrentEditRowData');\r\n\t\t * @memberof grid-class\r\n\t\t * @instance\r\n\t\t */\r\n\t\tgetCurrentEditRowData: function(){\r\n\t\t\treturn this._getDataByRowId(this._currentEditRowId);\r\n\t\t},\r\n\t\t/**\r\n\t\t * 获取当前编辑行的数据\r\n\t\t * @returns {Object} rowData 数据行\r\n\t\t * @example $('#demo').grid('getCurrentEditRowIndex');\r\n\t\t * @memberof grid-class\r\n\t\t * @instance\r\n\t\t */\r\n\t\tgetCurrentEditRowIndex: function(){\r\n\t\t\tif(this._currentEditRowId == null){\r\n\t\t\t\treturn -1;\r\n\t\t\t}else{\r\n\t\t\t\treturn this._convertRowIdToRowIndex(this._currentEditRowId);\r\n\t\t\t}\r\n\t\t},\r\n\t\t/**\r\n\t\t * 根据行内置id获取数据，编辑的数据优先获取\r\n\t\t */\r\n\t\t_getDataByRowId: function(rowId){\r\n\t\t\tvar data = this._newData.deleted[rowId];\r\n\t\t\tif(data){\r\n\t\t\t\treturn null;\r\n\t\t\t}\r\n\t\t\tdata = this._newData.updated[rowId];\r\n\t\t\tif(data){\r\n\t\t\t\tvar t = $.extend(true, {}, this._rowData[rowId], data);\r\n\t\t\t\treturn $.extend(true, data, t);\r\n\t\t\t}\r\n\t\t\tdata = this._newData.inserted[rowId];\r\n\t\t\tif(data){\r\n\t\t\t\treturn data;\r\n\t\t\t}\r\n\t\t\tdata = this._rowData[rowId];\r\n\t\t\treturn data;\r\n\t\t},\r\n\t\t/**\r\n\t\t * 获取当前网格的的数据行\r\n\t\t * @returns {Array} rows 数据行\r\n\t\t * @example $('#demo').grid('getRows');\r\n\t\t * @memberof grid-class\r\n\t\t * @instance\r\n\t\t */\r\n\t\tgetRows: function(){\r\n\t\t\treturn this.data[this.setting.jsonReader.rows];\r\n\t\t},\r\n\t\t/**\r\n\t\t * 设置当前网格的的数据行\r\n\t\t */\r\n\t\t_setRows: function(rows){\r\n\t\t\tthis.data[this.setting.jsonReader.rows] = rows;\r\n\t\t},\r\n\t\t/**\r\n\t\t * 获取当前网格的的尾数据行\r\n\t\t * @returns {Array} footer 数据行\r\n\t\t * @example $('#demo').grid('getFooterRows');\r\n\t\t * @memberof grid-class\r\n\t\t * @instance\r\n\t\t */\r\n\t\tgetFooterRows: function(){\r\n\t\t\treturn this.data[this.setting.jsonReader.footer];\r\n\t\t},\r\n\t\t/**\r\n\t\t * 获取计算行数据\r\n\t\t * @returns {Array} summaryRow 计算行数据\r\n\t\t * @example $('#demo').grid('getSummaryRow');\r\n\t\t * @memberof grid-class\r\n\t\t * @instance\r\n\t\t */\r\n\t\tgetSummaryRow: function(){\r\n\t\t\treturn this.summaryRow;\r\n\t\t},\r\n\t\t/**\r\n\t\t * 设置当前网格的的尾数据行\r\n\t\t */\r\n\t\t_setFooterRows: function(footer){\r\n\t\t\tthis.data[this.setting.jsonReader.footer] = footer;\r\n\t\t},\r\n\t\t/**\r\n\t\t * 根据行号获取行数据\r\n\t\t * @param {Number} rowIndex 行号\r\n\t\t * @returns {Object} row 数据\r\n\t\t * @example $('#demo').grid('getDataByRowIndex', 0);\r\n\t\t * @memberof grid-class\r\n\t\t * @instance\r\n\t\t */\r\n\t\tgetDataByRowIndex: function(rowIndex){\r\n\t\t\tvar rowId = this._convertRowIndexToRowId(rowIndex);\r\n\t\t\treturn this._getDataByRowId(rowId);\r\n\t\t},\r\n\t\t/**\r\n\t\t * 选中行，勾选行\r\n\t\t * @todo 如果行不可选中，则不触发beforeSelect和onSelect事件\r\n\t\t * @param {Number|String} rowIndex 尾数据数据\r\n\t\t * @returns {Object} data 数据对象{rows,footer}\r\n\t\t * @fires grid-class#beforeSelect\r\n\t\t * @fires grid-class#onSelect\r\n\t\t * @example $('#demo').grid('selectRow',1);\r\n\t\t * @example $('#demo').grid('selectRow','表格主键值');\r\n\t\t * @memberof grid-class\r\n\t\t * @instance\r\n\t\t */\r\n\t\tselectRow: function(rowIndex){\r\n\t\t\tvar exp = this._getRowExpr(rowIndex)\r\n\t\t\t\t,selectable = this.$tableBodyMain.find(exp).is(':not(.row-uncheckable)')\r\n\t\t\t\t,rowData = this.getDataByRowIndex(rowIndex);\r\n\t\t\tif(selectable){\r\n\t\t\t\t/**\r\n\t\t\t\t * 选择行前事件\r\n\t\t\t\t * @event grid-class#beforeSelect\r\n\t\t\t\t * @param {Object} rowData 行数据对象\r\n\t\t\t\t * @param {Number} rowIndex 行号\r\n\t\t\t\t * @returns {Boolean} boolean 返回值为false 取消选择\r\n\t\t\t\t */\r\n\t\t\t\tif(this.trigger('beforeSelect', rowData, rowIndex) === false){\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tthis._renderRow(rowIndex, rowData);\r\n\t\t\tif(selectable){\r\n\t\t\t\t/**\r\n\t\t\t\t * 选择行事件\r\n\t\t\t\t * @event grid-class#onSelect\r\n\t\t\t\t * @type {object}\r\n\t\t\t\t * @param {Object} rowData 行数据\r\n\t\t\t\t * @param {Number} rowIndex 行号\r\n\t\t\t\t */\r\n\t\t\t\tthis.trigger('onSelect', rowData, rowIndex);\r\n\t\t\t}\r\n\t\t},\r\n\t\t/**\r\n\t\t * 行是否可以勾选\r\n\t\t * @param {Number|String} rowIndex\r\n\t\t * @return {boolean} true 为可以勾选\r\n\t\t * @example $('#demo').grid('isCheckable',1);\r\n\t\t * @example $('#demo').grid('isCheckable','表格主键值');\r\n\t\t * @memberof grid-class\r\n\t\t * @instance\r\n\t\t */\r\n\t\tisCheckable: function(rowIndex){\r\n\t\t\tvar exp = this._getRowExpr(rowIndex);\r\n\t\t\treturn !this.$tableBodyMain.find(exp).hasClass('row-uncheckable');\r\n\t\t},\r\n\t\t/**\r\n\t\t * 设置行为可勾选状态\r\n\t\t * @param {Number|String} rowIndex\r\n\t\t * @example $('#demo').grid('uncheckable',1);\r\n\t\t * @example $('#demo').grid('uncheckable','表格主键值');\r\n\t\t * @memberof grid-class\r\n\t\t * @instance\r\n\t\t */\r\n\t\tcheckable: function(rowIndex){\r\n\t\t\tvar exp = this._getRowExpr(rowIndex);\r\n\t\t\tthis.$tableBodyLeft.find(exp).removeClass('row-uncheckable');\r\n\t\t\tthis.$tableBodyMain.find(exp).removeClass('row-uncheckable');\r\n\t\t\tthis.$tableBodyRight.find(exp).removeClass('row-uncheckable');\r\n\t\t},\r\n\t\t/**\r\n\t\t * 设置行为不可勾选状态\r\n\t\t * @param {Number|String} rowIndex\r\n\t\t * @example $('#demo').grid('uncheckable',1);\r\n\t\t * @example $('#demo').grid('uncheckable','表格主键值');\r\n\t\t * @memberof grid-class\r\n\t\t * @instance\r\n\t\t */\r\n\t\tuncheckable: function(rowIndex){\r\n\t\t\tvar exp = this._getRowExpr(rowIndex);\r\n\t\t\tthis.$tableBodyLeft.find(exp).addClass('row-uncheckable');\r\n\t\t\tthis.$tableBodyMain.find(exp).addClass('row-uncheckable');\r\n\t\t\tthis.$tableBodyRight.find(exp).addClass('row-uncheckable');\r\n\t\t},\r\n\t\t/**\r\n\t\t * 渲染行，如果行可以选中则选中，如果行可以勾选则勾选\r\n\t\t * @param rowIndex 行号\r\n\t\t */\r\n\t\t_renderRow: function(rowIndex){\r\n\t\t\tvar exp = this._getRowExpr(rowIndex);\r\n\t\t\tif(!exp){\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tif(!this.setting.checkbox){\r\n\t\t\t\tthis._renderUnselectRow('tr.' + selectedRowCls);\r\n\t\t\t}\r\n\t\t\tthis._renderSelectRow(exp);\r\n\t\t\tthis._renderBoxValue(exp, true);\r\n\t\t},\r\n\t\t/**\r\n\t\t * 根据行数据的属性搜索，获取条件完全匹配的节点数据 JSON 对象\r\n\t\t * @param {String} key 需要精确匹配的属性名称\r\n\t\t * @param {?} value 需要精确匹配的属性值，可以是任何类型，只要保证与 key 指定的属性值保持一致即可\r\n\t\t * @returns 匹配精确搜索的节点数据 1、如无结果，返回 null 2、如有多个节点满足查询条件，只返回第一个匹配到的节点\r\n\t\t * @example $('#demo').grid('getRowByParam', 'field1', 'val1');\r\n\t\t * @memberof grid-class\r\n\t\t * @instance\r\n\t\t */\r\n\t\tgetRowByParam: function(key, val){\r\n\t\t\tvar rows = this.getRows();\r\n\t\t\tfor(var i = 0; i < rows.length; i++ ){\r\n\t\t\t\tvar row = rows[i];\r\n\t\t\t\tif(row[key] == val){\r\n\t\t\t\t\treturn row;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn null;\r\n\t\t},\r\n\t\t/**\r\n\t\t * 根据自定义规则搜索节点数据 JSON 对象集合 或 单个节点数据\r\n\t\t * @param {Function} filter 自定义过滤器函数 function filter(node) {...} filter 参数：node (节点数据 JSON)filter 返回值：boolean (true 表示符合搜索条件；false 表示不符合搜索条件)\r\n\t\t * @returns {JSON} 第一个找到的节点数据 JSON，无结果时返回 null\r\n\t\t * @example $('#demo').grid('getRowByFilter', function(row){if(row.field1 == 'val1'){return true}else{return false}});\r\n\t\t * @memberof grid-class\r\n\t\t * @instance\r\n\t\t */\r\n\t\tgetRowByFilter: function(filter){\r\n\t\t\tif(!$.isFunction(filter)){\r\n\t\t\t\tthrow new Error('类型错误：getRowByFilter方法要传入一个过滤函数');\r\n\t\t\t}\r\n\t\t\tvar rows = this.getRows();\r\n\t\t\tfor(var i = 0; i < rows.length; i++ ){\r\n\t\t\t\tvar row = rows[i];\r\n\t\t\t\tif(filter(row) === true){\r\n\t\t\t\t\treturn row;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn null;\r\n\t\t},\r\n\t\t/**\r\n\t\t * 根据内部行对象获取行号\r\n\t\t * @param node\r\n\t\t * @returns {Number} 行号 ，如果未找到返回-1\r\n\t\t * @memberof grid-class\r\n\t\t * @instance\r\n\t\t */\r\n\t\tgetRowIndex: function(row){\r\n\t\t\tif(!row){\r\n\t\t\t\tthrow new Error('无法获取空值');\r\n\t\t\t}\r\n\t\t\tif(!row.__rowId){\r\n\t\t\t\tthrow new Error('该对象不是内部对象，无法获取行号');\r\n\t\t\t}\r\n\t\t\treturn this.$tableBodyMain.find('#'+ row.__rowId).index();\r\n\t\t},\r\n\t\t/**\r\n\t\t * 获取行的jquery选择器表达式\r\n\t\t * @param {Number|String|Object} exp 行选择器\r\n\t\t * \t\tNumber为行号选择\r\n\t\t * \t\tString为行id选择（内部）\r\n\t\t * \t\tobject为主键值选择\r\n\t\t * @param {String} exp.type 选择器类型 id|index\r\n\t\t * @param {String} exp.value 选择器值 index值或表主键值\r\n\t\t */\r\n\t\t_getRowExpr: function(exp){\r\n\t\t\tvar type = typeof(exp)\r\n\t\t\t\t,result = '';\r\n\t\t\tif(!isNaN(exp)){\r\n\t\t\t\tresult = 'tr:eq(' + exp + ')';\r\n\t\t\t}else if(type == 'string'){\r\n\t\t\t\tresult = 'tr#' + exp;\r\n\t\t\t}else if(type == 'object'){\r\n\t\t\t\tif(!exp.type || exp.type == 'id'){\r\n\t\t\t\t\tresult = 'tr[_v=\"' + exp.value + '\"]';\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn result;\r\n\t\t},\r\n\t\t/**\r\n\t\t * 取消选中行\r\n\t\t * @todo 如果行不可选中，则不触发onUnselect事件\r\n\t\t * @param {Number} rowIndex 行号\r\n\t\t * @fires grid-class#onUnselect\r\n\t\t * @example $('#demo').grid('unselectRow',1);\r\n\t\t * @memberof grid-class\r\n\t\t * @instance\r\n\t\t */\r\n\t\tunselectRow: function(rowIndex){\r\n\t\t\tvar exp = this._getRowExpr(rowIndex)\r\n\t\t\t\t,selectable = this.$tableBodyMain.find(exp).is(':not(.row-uncheckable)');\r\n\t\t\tif(!exp){\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tthis._renderUnselectRow(exp);\r\n\t\t\tthis._renderBoxValue(exp, false);\r\n\t\t\tif(selectable){\r\n\t\t\t\tvar rowData = this.getDataByRowIndex(rowIndex);\r\n\t\t\t\t/**\r\n\t\t\t\t * 取消选择行事件\r\n\t\t\t\t * @event grid-class#onUnselect\r\n\t\t\t\t * @type {object}\r\n\t\t\t\t * @param {Object} rowData 行数据\r\n\t\t\t\t * @param {Number} rowIndex 行号\r\n\t\t\t\t */\r\n\t\t\t\tthis.trigger('onUnselect', rowData, rowIndex);\r\n\t\t\t}\r\n\t\t},\r\n\t\t/**\r\n\t\t * 反选中行，反勾选行\r\n\t\t * @param {Number} rowIndex 行号\r\n\t\t * @example $('#demo').grid('toggleSelectRow',1);\r\n\t\t * @memberof grid-class\r\n\t\t * @instance\r\n\t\t */\r\n\t\ttoggleSelectRow: function(rowIndex){\r\n\t\t\tvar exp = this._getRowExpr(rowIndex);\r\n\t\t\tif(!exp){\r\n\t\t\t\texp = 'tr';\r\n\t\t\t}\r\n\t\t\tthis._renderToggleSelectRow(exp);\r\n\t\t\tthis._renderToggleBoxValue(exp);\r\n\t\t},\r\n\t\t/**\r\n\t\t * 选中全部\r\n\t\t * @fires grid-class#onSelectAll\r\n\t\t * @example $('#demo').grid('selectAll');\r\n\t\t * @memberof grid-class\r\n\t\t * @instance\r\n\t\t */\r\n\t\tselectAll: function(){\r\n\t\t\tthis._renderSelectRow('>div>table>tbody>tr');\r\n\t\t\tthis._renderBoxValue('', true);\r\n\t\t\t/**\r\n\t\t\t * 全选则事件\r\n\t\t\t * @param {Array} rows 所有行数据\r\n\t\t\t * @event grid-class#onSelectAll\r\n\t\t\t * @type {object}\r\n\t\t\t */\r\n\t\t\tthis.trigger('onSelectAll');\r\n\t\t},\r\n\t\t/**\r\n\t\t * 全部不选中\r\n\t\t * @example $('#demo').grid('unselectAll');\r\n\t\t * @fires grid-class#onUnselectAll\r\n\t\t * @memberof grid-class\r\n\t\t * @instance\r\n\t\t */\r\n\t\tunselectAll: function(){\r\n\t\t\tthis._renderUnselectRow('>div>table>tbody>tr');\r\n\t\t\tthis._renderBoxValue('', false);\r\n\t\t\t/**\r\n\t\t\t * 全取消选则事件\r\n\t\t\t * @event grid-class#onUnselectAll\r\n\t\t\t */\r\n\t\t\tthis.trigger('onUnselectAll');\r\n\t\t},\r\n\t\t/**\r\n\t\t * 根据选择器设置选中行，勾选行\r\n\t\t * @param exp 选择器\r\n\t\t */\r\n\t\t_renderSelectRow: function(exp){\r\n\t\t\tvar checkable = this.setting.checkbox;\r\n\t\t\trowRender(this.$tableBodyLeft.find(exp));\r\n\t\t\trowRender(this.$tableBodyMain.find(exp));\r\n\t\t\trowRender(this.$tableBodyRight.find(exp));\r\n\t\t\tfunction rowRender($trs){\r\n\t\t\t\tif(checkable){\r\n\t\t\t\t\t$trs.filter(':not(.row-uncheckable)').addClass(checkedRowCls);\r\n\t\t\t\t}else{\r\n\t\t\t\t\t$trs.addClass(selectedRowCls);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\t/**\r\n\t\t * 根据选择器取消选中行、取消勾选行\r\n\t\t * @param exp 选择器\r\n\t\t */\r\n\t\t_renderUnselectRow: function(exp){\r\n\t\t\tvar checkable = this.setting.checkbox;\r\n\t\t\trowRender(this.$tableBodyLeft.find(exp));\r\n\t\t\trowRender(this.$tableBodyMain.find(exp));\r\n\t\t\trowRender(this.$tableBodyRight.find(exp));\r\n\t\t\tfunction rowRender($trs){\r\n\t\t\t\tif(checkable){\r\n\t\t\t\t\t$trs.filter(':not(.row-uncheckable)').removeClass(checkedRowCls);\r\n\t\t\t\t}else{\r\n\t\t\t\t\t$trs.removeClass(selectedRowCls);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\t/**\r\n\t\t * 根据选择器反选中行，反勾选行\r\n\t\t * @param exp 选择器\r\n\t\t */\r\n\t\t_renderToggleSelectRow: function(exp){\r\n\t\t\tvar checkable = this.setting.checkbox;\r\n\t\t\tif(!checkable){\r\n\t\t\t\tthis.unselectAll();\r\n\t\t\t}\r\n\t\t\trowRender(this.$tableBodyLeft.find(exp));\r\n\t\t\trowRender(this.$tableBodyMain.find(exp));\r\n\t\t\trowRender(this.$tableBodyRight.find(exp));\r\n\t\t\tfunction rowRender($trs){\r\n\t\t\t\tif(checkable){\r\n\t\t\t\t\t$trs.filter(':not(.row-uncheckable)').toggleClass(checkedRowCls);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\t/**\r\n\t\t * 根据选择器设置复选框或单选框的勾选情况\r\n\t\t * @param exp\r\n\t\t * @param checked\r\n\t\t */\r\n\t\t_renderBoxValue: function(exp, checked){\r\n\t\t\tif(this.setting.checkbox){\r\n\t\t\t\tvar $trs = this.$tableBodyLeft.find(exp);\r\n\t\t\t\tthis.$tableBodyLeft.find(exp + ':not(.row-uncheckable) td[field=\"_checkbox\"] input').each(function() {\r\n\t\t\t\t\tthis.checked = checked;\r\n\t\t\t\t});\r\n\t\t\t}else if(this.setting.radiobox){\r\n\t\t\t\tthis.$tableBodyLeft.find(exp + ' td[field=\"_radiobox\"] input').each(function() {\r\n\t\t\t\t\tthis.checked = checked;\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t\tthis._renderTopCheckboxValue();\r\n\t\t},\r\n\t\t/**\r\n\t\t * 根据选择器反选复选框或单选框\r\n\t\t * @param exp\r\n\t\t */\r\n\t\t_renderToggleBoxValue: function(exp){\r\n\t\t\tif(this.setting.checkbox){\r\n\t\t\t\tthis.$tableBodyLeft.find(exp + ':not(.row-uncheckable) td[field=\"_checkbox\"] input').each(function() {\r\n\t\t\t\t\tthis.checked = !this.checked;\r\n\t\t\t\t});\r\n\t\t\t}else if(this.setting.radiobox){\r\n\t\t\t\tthis.$tableBodyLeft.find(exp + ' td[field=\"_radiobox\"] input').each(function() {\r\n\t\t\t\t\tthis.checked = !this.checked;\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t\tthis._renderTopCheckboxValue();\r\n\t\t},\r\n\t\t_renderTopCheckboxValue: function(){\r\n\t\t\tvar checkedLen = this.$tableBodyMain.find('tr.' + checkedRowCls).length\r\n\t\t\t\t,checkableLen = this.$tableBodyMain.find('tr:not(.row-uncheckable)').length;\r\n\t\t\tif(checkableLen == 0){\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tif(checkedLen == checkableLen){\r\n\t\t\t\tthis.$tableHeaderLeft.find('td[field=\"_checkbox\"] input').prop('checked', true);\r\n\t\t\t}else{\r\n\t\t\t\tthis.$tableHeaderLeft.find('td[field=\"_checkbox\"] input').prop('checked', false);\r\n\t\t\t}\r\n\t\t},\r\n\t\t/**\r\n\t\t * 判断传入的行号是否已被选中\r\n\t\t * @returns {Number} rowIndex 行号\r\n\t\t * @example $('#demo').grid('isSelectedRow');\r\n\t\t * @memberof grid-class\r\n\t\t * @instance\r\n\t\t */\r\n\t\tisSelectedRow: function(rowIndex){\r\n\t\t\treturn this.$tableBodyMain.find('tr:eq(' + rowIndex + ')').hasClass(selectedRowCls)\r\n\t\t\t\t|| this.$tableBodyMain.find('tr:eq(' + rowIndex + ')').hasClass(checkedRowCls);\r\n\t\t},\r\n\t\t/**\r\n\t\t * 获取选中的第一行行号\r\n\t\t * @returns {Number} rowIndex 行号\r\n\t\t * @example $('#demo').grid('getSelectedRowIndex');\r\n\t\t * @memberof grid-class\r\n\t\t * @instance\r\n\t\t */\r\n\t\tgetSelectedRowIndex: function(){\r\n\t\t\tvar selecteds\r\n\t\t\t\t,result = null;\r\n\t\t\tif(this.setting.radiobox){\r\n\t\t\t\tselecteds = this.$tableBodyLeft.find('td[field=\"_radiobox\"] input:checked').closest('tr');\r\n\t\t\t}else{\r\n\t\t\t\tselecteds = this.$tableBodyMain.find('tr.' + selectedRowCls + ':first');\r\n\t\t\t}\r\n\t\t\tresult = selecteds.index();\r\n\t\t\treturn result;\r\n\t\t},\r\n\t\t/**\r\n\t\t * 获取选中的第一行\r\n\t\t * @returns {object} rowData 行数据\r\n\t\t * @example $('#demo').grid('getSelected');\r\n\t\t * @memberof grid-class\r\n\t\t * @instance\r\n\t\t */\r\n\t\tgetSelected: function(){\r\n\t\t\tvar selecteds\r\n\t\t\t\t,result = null;\r\n\t\t\tif(this.setting.radiobox){\r\n\t\t\t\tselecteds = this.$tableBodyLeft.find('td[field=\"_radiobox\"] input:checked').closest('tr');\r\n\t\t\t}else{\r\n\t\t\t\tselecteds = this.$tableBodyMain.find('tr.' + selectedRowCls + ':first');\r\n\t\t\t}\r\n\t\t\tresult = this._converRowToData(selecteds)[0];\r\n\t\t\tif(result == undefined){\r\n\t\t\t\treturn null;\r\n\t\t\t}\r\n\t\t\treturn result;\r\n\t\t},\r\n\t\t/**\r\n\t\t * 获取选中的行\r\n\t\t * @returns {Array} rows 选中行的数据数组\r\n\t\t * @example $('#demo').grid('getSelections');\r\n\t\t * @memberof grid-class\r\n\t\t * @instance\r\n\t\t */\r\n\t\tgetSelections: function(){\r\n\t\t\tvar selecteds;\r\n\t\t\tif(this.setting.checkbox){\r\n\t\t\t\tselecteds = this.$tableBodyMain.find('tr.' + checkedRowCls);\r\n\t\t\t}else{\r\n\t\t\t\tselecteds = this.$tableBodyMain.find('tr.' + selectedRowCls);\r\n\t\t\t}\r\n\t\t\treturn this._converRowToData(selecteds);\r\n\t\t},\r\n\t\t/**\r\n\t\t * 根据传入的行获取对于的数据\r\n\t\t * @param $selectedRows\r\n\t\t * @return []\r\n\t\t */\r\n\t\t_converRowToData: function($selectedRows){\r\n\t\t\tvar result = []\r\n\t\t\t\t,that = this;\r\n\t\t\t$selectedRows.each(function(){\r\n\t\t\t\tvar row = that._getDataByRowId(this.id);\r\n\t\t\t\tresult.push(row);\r\n\t\t\t});\r\n\t\t\treturn result;\r\n\t\t},\r\n\t\t/**\r\n\t\t * 当前行移动到下一行\r\n\t\t * @todo 如果当前行没有，则定位到第一行\r\n\t\t * @example $('#demo').grid('nextRow');\r\n\t\t * @memberof grid-class\r\n\t\t * @instance\r\n\t\t */\r\n\t\tnextRow: function(){\r\n\t\t\tvar index = this.getCurrentRowIndex()\r\n\t\t\t\t,length = this.$tableBodyMain.find('tr').length;\r\n\t\t\tif(index == -1){\r\n\t\t\t\tindex = 0;\r\n\t\t\t}else{\r\n\t\t\t\tindex = (++index)%length;\r\n\t\t\t}\r\n\t\t\tthis.setCurrentRow(index);\r\n\t\t},\r\n\t\t/**\r\n\t\t * 当前行移动到上一行\r\n\t\t * @todo 如果当前行没有，则定位到第一行\r\n\t\t * @example $('#demo').grid('prevRow');\r\n\t\t * @memberof grid-class\r\n\t\t * @instance\r\n\t\t */\r\n\t\tprevRow: function(){\r\n\t\t\tvar index = this.getCurrentRowIndex()\r\n\t\t\t\t,length = this.$tableBodyMain.find('tr').length;\r\n\t\t\tif(index == -1){\r\n\t\t\t\tindex = 0;\r\n\t\t\t}else{\r\n\t\t\t\tindex = ( --index + length)%length;\r\n\t\t\t}\r\n\t\t\tthis.setCurrentRow(index);\r\n\t\t},\r\n\t\t/**\r\n\t\t * 获取当前行的行索引\r\n\t\t * 如果没有当前行，则返回-1\r\n\t\t * @example $('#demo').grid('getCurrentRowIndex');\r\n\t\t * @memberof grid-class\r\n\t\t * @instance\r\n\t\t */\r\n\t\tgetCurrentRowIndex: function(){\r\n\t\t\tvar $curr = this.$tableBodyMain.find('tr.' + currentRowCls);\r\n\t\t\tif($curr.length == 1){\r\n\t\t\t\treturn $curr.index();\r\n\t\t\t}\r\n\t\t\treturn -1;\r\n\t\t},\r\n\t\t/**\r\n\t\t * 根据传入的行号设置对应行为当前行\r\n\t\t * @param {Number} rowIndex 行号\r\n\t\t * @example $('#demo').grid('setCurrentRow', 2);\r\n\t\t * @memberof grid-class\r\n\t\t * @instance\r\n\t\t */\r\n\t\tsetCurrentRow: function(rowIndex){\r\n\t\t\tthis._setRowClass(rowIndex, currentRowCls);\r\n\t\t},\r\n\t\t/**\r\n\t\t * 设置行为表格的唯一行样式，如果先撤销该样式的行\r\n\t\t * @param {Number} rowIndex 行号\r\n\t\t * @param {Class} cls 类型\r\n\t\t */\r\n\t\t_setRowClass: function(rowIndex, cls){\r\n\t\t\tvar exp = this._getRowExpr(rowIndex);\r\n\t\t\tthis._removeRowClass(cls);\r\n\t\t\tthis.$tableBodyLeft.find(exp).addClass(cls);\r\n\t\t\tthis.$tableBodyMain.find(exp).addClass(cls);\r\n\t\t\tthis.$tableBodyRight.find(exp).addClass(cls);\r\n\t\t},\r\n\t\t/**\r\n\t\t * 清除已选行的样式\r\n\t\t */\r\n\t\t_onBodyTrMouseLeave: function(){\r\n\t\t\tthis._removeRowClass(hoverRowCls);\r\n\t\t},\r\n\t\t/**\r\n\t\t * 清除已选行的样式\r\n\t\t */\r\n\t\t_removeRowClass: function(cls){\r\n\t\t\tvar exp = 'tr.' + cls;\r\n\t\t\tthis.$tableBodyLeft.find(exp).removeClass(cls);\r\n\t\t\tthis.$tableBodyMain.find(exp).removeClass(cls);\r\n\t\t\tthis.$tableBodyRight.find(exp).removeClass(cls);\r\n\t\t},\r\n\t\t/**\r\n\t\t * 获取当前行的数据，如果没有当前行 则返回null\r\n\t\t * @returns {object} RowData 当前行的数据\r\n\t\t * @example $('#demo').grid('getCurrentRowData');\r\n\t\t * @memberof grid-class\r\n\t\t * @instance\r\n\t\t */\r\n\t\tgetCurrentRowData: function(){\r\n\t\t\tvar index = this.getCurrentRowIndex();\r\n\t\t\tif(index > -1){\r\n\t\t\t\treturn this.getRows()[index];\r\n\t\t\t}\r\n\t\t\treturn null;\r\n\t\t},\r\n\t\t/**\r\n\t\t * 选中当前行\r\n\t\t * @see {@link grid#selectRow}\r\n\t\t * @example $('#demo').grid('selectCurrent');\r\n\t\t * @memberof grid-class\r\n\t\t * @instance\r\n\t\t */\r\n\t\tselectCurrent: function(){\r\n\t\t\tvar index = this.getCurrentRowIndex();\r\n\t\t\tif(index != -1){\r\n\t\t\t\tthis.selectRow(index);\r\n\t\t\t}\r\n\t\t},\r\n\t\t/**\r\n\t\t * 取消当前行\r\n\t\t * @see {@link grid#unselectRow}\r\n\t\t * @example $('#demo').grid('unselectCurrent');\r\n\t\t * @memberof grid-class\r\n\t\t * @instance\r\n\t\t */\r\n\t\tunselectCurrent: function(){\r\n\t\t\tvar index = this.getCurrentRowIndex();\r\n\t\t\tif(index != -1){\r\n\t\t\t\tthis.unselectRow(index);\r\n\t\t\t}\r\n\t\t},\r\n\t\t/**\r\n\t\t * 反选当前行\r\n\t\t * @see {@link grid#toggleSelectRow}\r\n\t\t * @example $('#demo').grid('toggleSelectCurrent');\r\n\t\t * @memberof grid-class\r\n\t\t * @instance\r\n\t\t */\r\n\t\ttoggleSelectCurrent: function(){\r\n\t\t\tvar index = this.getCurrentRowIndex();\r\n\t\t\tif(index != -1){\r\n\t\t\t\tthis.toggleSelectRow(index);\r\n\t\t\t}\r\n\t\t},\r\n\t\t/**\r\n\t\t * 定位当前行到可视区域\r\n\t\t * @example $('#demo').grid('locateCurrent');\r\n\t\t * @memberof grid-class\r\n\t\t * @instance\r\n\t\t */\r\n\t\tlocateCurrent: function(){\r\n\t\t\tvar rowIndex = this.getCurrentRowIndex();\r\n\t\t\tif(rowIndex == -1){\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tthis.locateRow(rowIndex);\r\n\t\t},\r\n\t\t/**\r\n\t\t * 根据行号将对应的数据行定位到可视区域\r\n\t\t * @example $('#demo').grid('locateRow', 2);\r\n\t\t * @memberof grid-class\r\n\t\t * @instance\r\n\t\t */\r\n\t\tlocateRow: function(rowIndex){\r\n\t\t\tvar $row = this.$tableBodyMain.find(this._getRowExpr(rowIndex));\r\n\t\t\tif($row.length == 0){\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tthis._scroll_yProxyScroll($row);\r\n\t\t},\r\n\t\t/**\r\n\t\t * 滚动纵向代理滚动条定位到传入的行\r\n\t\t * @param $row 要定位的行\r\n\t\t */\r\n\t\t_scroll_yProxyScroll: function($row){\r\n\t\t\tif(this.setting.height == 'push'){\r\n\t\t\t\tvar viewHeight = this.$wrap.outerHeight() - this.$header.outerHeight()\r\n\t\t\t\t\t- this.$tableHeader.outerHeight() - this.$tableFooter.outerHeight()\r\n\t\t\t\t\t- this._getPagerDownHeight();\r\n\t\t\t\tvar oriTop = 0\r\n\t\t\t\t\t,children = this.$wrap.children();\r\n\t\t\t\tfor(var i = 0; i < children.length; i++){\r\n\t\t\t\t\tvar $child = $(children[i]);\r\n\t\t\t\t\tif($child.is(this.$element)){\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t}\r\n\t\t\t\t\toriTop += $child.outerHeight();\r\n\t\t\t\t}\r\n\t\t\t\tthis.$wrap.scrollTop($row.position().top + oriTop - viewHeight);\r\n\t\t\t}else if(this.$yProxyScroll){\r\n\t\t\t\tvar containerHeight = this.$tableBodyMain.outerHeight()  + 3\r\n\t\t\t\t\t,scrollTop = this.$tableBodyMain.scrollTop()\r\n\t\t\t\t\t,top = $row.offset().top + $row.outerHeight() - this.$tableBodyMain.offset().top + scrollTop;\r\n\t\t\t\tif(top <= scrollTop){\r\n\t\t\t\t\tthis.$yProxyScroll.scrollTop(top - $row.outerHeight());\r\n\t\t\t\t}else if(top >= scrollTop + containerHeight){\r\n\t\t\t\t\tthis.$yProxyScroll.scrollTop(top - containerHeight);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\t/**\r\n\t\t * 注册标题列拖拽事件\r\n\t\t */\r\n\t\t_registResizeColumnProxy: function(){\r\n\t\t\tvar g = this;\r\n\t\t\tthis.$table.on('mousemove.grid-column.resizable.api','.grid-table-header td', function(e){\r\n\t\t\t\tvar $td = $(this);\r\n\t\t\t\tif(g._preventColumnResize($td) !== true){\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tvar cursor = g._getCursor($td, e);\r\n\t\t\t\tif(cursor){\r\n\t\t\t\t\t$td.css('cursor', cursor);\r\n\t\t\t\t}else{\r\n\t\t\t\t\t$td.css('cursor', 'default');\r\n\t\t\t\t}\r\n\t\t\t}).on('mousedown.grid-column.resizable.api','.grid-table-header td', function(e){\r\n\t\t\t\tif(!g._isLeftMouseKey(e)){\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tvar $td = $(this);\r\n\t\t\t\tif(g._preventColumnResize($td) !== true){\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tif(g._getCursor($td, e)){\r\n\t\t\t\t\tg.$targetTd = $td;\r\n\t\t\t\t\tg._onStartResizeColumn(e);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\tthis.$columnResizeProxy = this.$element.find('.col-resize-proxy');\r\n\t\t},\r\n\t\t/**\r\n\t\t * 左按键判断\r\n\t\t */\r\n\t\t_isLeftMouseKey: function(e){\r\n\t\t\tvar result = false;\r\n\t\t\tif($.browser.msie){\r\n\t\t\t\tif(document.documentMode == 8){\r\n\t\t\t\t\tif(e.button === 1){\r\n\t\t\t\t\t\tresult = true;\r\n\t\t\t\t\t}\r\n\t\t\t\t}else{\r\n\t\t\t\t\tif(e.button === 0){\r\n\t\t\t\t\t\tresult = true;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}else if(e.button === 0){\r\n\t\t\t\tresult = true ;\r\n\t\t\t}\r\n\t\t\treturn result;\r\n\t\t},\r\n\t\t/**\r\n\t\t * 获取当前td的鼠标样式\r\n\t\t * @param $td\r\n\t\t * @param e\r\n\t\t * @returns {String}\r\n\t\t */\r\n\t\t_getCursor: function($td, e){\r\n\t\t\tvar left = $td.offset().left\r\n\t\t\t\t,width = $td.width()\r\n\t\t\t\t,scope = 5\r\n\t\t\t\t,pageX = e.pageX || e.screenX\r\n\t\t\t\t,colspan = $td.attr('colspan')\r\n\t\t\t\t,result = '';\r\n\t\t\tif (pageX <= left + width && pageX > left + width - scope\r\n\t\t\t\t&& (colspan == undefined || colspan == 1) && $td.attr('field'))\r\n\t\t\t\tresult = 'e-resize';\r\n\t\t\treturn result;\r\n\t\t},\r\n\t\t/**\r\n\t\t * 是否独自列宽设置\r\n\t\t */\r\n\t\t_preventColumnResize: function($td){\r\n\t\t\tif(!this.setting.columnResizable){\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t\tvar col = this._column[$td.attr('_cid')];\r\n\t\t\treturn col.resizable;\r\n\t\t},\r\n\t\t/**\r\n\t\t * 标题列开始拖拽状态\r\n\t\t * @param e\r\n\t\t */\r\n\t\t_onStartResizeColumn: function(e){\r\n\t\t\tvar g = this\r\n\t\t\t\t,$target = g.$targetTd;\r\n\t\t\t$target.oriX = $target.position().left + $target.outerWidth() - 1;\r\n\t\t\tg.$columnResizeProxy.css({\r\n\t\t\t\tleft: $target.oriX,\r\n\t\t\t\tdisplay: 'block'\r\n\t\t\t});\r\n\t\t\t$(document).bind(\"selectstart.grid-column.resizable.api\", function(){ return false; });\r\n\t\t\t$(document).bind('mouseup.grid-column.resizable.api', function(){\r\n\t\t\t\tg._onStopResizeColumn();\r\n\t\t\t});\r\n\t\t\t$(document).bind('mousemove.grid-column.resizable.api', function(e){\r\n\t\t\t\tg._onResizeColumn(e);\r\n\t\t\t});\r\n\t\t},\r\n\t\t/**\r\n\t\t * 标题列正在拖拽\r\n\t\t * @param e\r\n\t\t */\r\n\t\t_onResizeColumn: function(e){\r\n\t\t\tvar pageX = e.pageX || e.screenX\r\n\t\t\t\t,left = pageX - this.$tableHeader.offset().left;\r\n\t\t\tthis.$columnResizeProxy.css({\r\n\t\t\t\tleft: left,\r\n\t\t\t\tcursor: 'e-resize'\r\n\t\t\t});\r\n\t\t\tthis.$targetTd.diffX = parseInt(this.$columnResizeProxy.css('left')) - this.$targetTd.oriX;\r\n\t\t},\r\n\t\t/**\r\n\t\t * 标题列结束拖拽状态\r\n\t\t * @param e\r\n\t\t */\r\n\t\t_onStopResizeColumn: function(){\r\n\t\t\tthis._applyResizeColumn();\r\n\t\t\tthis.$columnResizeProxy.hide();\r\n\t\t\t$(document).unbind(\"selectstart.grid-column.resizable.api\");\r\n\t\t\t$(document).unbind('mousemove.grid-column.resizable.api');\r\n\t\t\t$(document).unbind('mouseup.grid-column.resizable.api');\r\n\t\t},\r\n\t\t/**\r\n\t\t * 应用列宽的设置\r\n\t\t */\r\n\t\t_applyResizeColumn: function(){\r\n\t\t\tthis.$targetTd.diffX = parseInt(this.$targetTd.diffX);\r\n\t\t\tif(isNaN(this.$targetTd.diffX)){\r\n\t\t\t\tthis.$targetTd.diffX = 0;\r\n\t\t\t}\r\n\t\t\tvar oriWidth = this.$targetTd.outerWidth()\r\n\t\t\t\t,newWidth = parseInt(oriWidth + this.$targetTd.diffX);\r\n\t\t\tif(newWidth < minWidth){\r\n\t\t\t\tthis.$targetTd.diffX = minWidth - oriWidth;\r\n\t\t\t}\r\n\t\t\tthis._setColumnWidth(this.$targetTd, this.$targetTd.diffX);\r\n\t\t\tthis._fullAfterResizeColumn();\r\n\t\t},\r\n\t\t/**\r\n\t\t * 拉伸最后一列的宽度以填充空白\r\n\t\t */\r\n\t\t_fullAfterResizeColumn: function(){\r\n\t\t\tvar firstFill = this._fullFreeWidth();\r\n\t\t\tif(firstFill){\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tvar $lastTd = this._getLast$Td()\r\n\t\t\t\t,$targetTd = this.$targetTd;\r\n\t\t\tif($targetTd.attr('_cid') == $lastTd.attr('_cid')){\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tif($targetTd.diffX < 0){\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tthis._shinkFreeWidth();\r\n\t\t},\r\n\t\t/**\r\n\t\t * 收缩被拉伸的列以去除滚动\r\n\t\t */\r\n\t\t_shinkFreeWidth: function(){\r\n\t\t\tif(this.setting.fitColumns != 'E' && this.setting.fitColumns != 'ES'){\r\n\t\t\t\treturn ;\r\n\t\t\t}\r\n\t\t\tvar coverWidth = this.$tableHeaderMain.find('>div>table').width() - this.$tableHeaderMain.width();\r\n\t\t\tif(coverWidth <= 0){\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tvar cols = this.columns;\r\n\t\t\tfor(var i = cols.length - 1; i >= 0; i--){\r\n\t\t\t\tvar col = cols[i];\r\n\t\t\t\tif(col.hidden){\r\n\t\t\t\t\tcontinue;\r\n\t\t\t\t}\r\n\t\t\t\tvar $td = this.$tableHeader.find('td[_cid=\"' + col._cid + '\"]')\r\n\t\t\t\t\t,freeWidth = $td.data('freeWidth');\r\n\t\t\t\tif(freeWidth == undefined){\r\n\t\t\t\t\tcontinue;\r\n\t\t\t\t}\r\n\t\t\t\tif(freeWidth > coverWidth){\r\n\t\t\t\t\t$td.data('freeWidth', freeWidth - coverWidth);\r\n\t\t\t\t\tthis._setColumnWidth($td, -coverWidth);\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}else{\r\n\t\t\t\t\tcoverWidth = coverWidth - freeWidth;\r\n\t\t\t\t\t$td.removeData('freeWidth');\r\n\t\t\t\t\tthis._setColumnWidth($td, -freeWidth);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\t/**\r\n\t\t * 最后一列填充空白\r\n\t\t */\r\n\t\t_fullFreeWidth: function(){\r\n\t\t\tif(this.setting.fitColumns != 'E' && this.setting.fitColumns != 'ES'){\r\n\t\t\t\treturn ;\r\n\t\t\t}\r\n\t\t\tvar freeWidth = this.$tableHeaderMain.width() - this.$tableHeaderMain.find('>div>table').width();\r\n\t\t\tif(freeWidth > 0){\r\n\t\t\t\tvar $lastTd = this._getLast$Td();\r\n\t\t\t\tthis._setColumnWidth($lastTd, freeWidth);\r\n\t\t\t\tvar lastWidth = $lastTd.data('freeWidth');\r\n\t\t\t\tif(lastWidth != undefined){\r\n\t\t\t\t\tfreeWidth = freeWidth + lastWidth\r\n\t\t\t\t}\r\n\t\t\t\t$lastTd.data('freeWidth', freeWidth);\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\t\t},\r\n\t\t/**\r\n\t\t * 获取最后一个可视列\r\n\t\t */\r\n\t\t_getLast$Td: function(){\r\n\t\t\tvar lastVisible = this.columns.length - 1;\r\n\t\t\twhile(this.columns[lastVisible].hidden\r\n\t\t\t\t\t&& lastVisible >= 0){\r\n\t\t\t\tlastVisible--;\r\n\t\t\t}\r\n\t\t\tvar lastCol = this.columns[lastVisible]\r\n\t\t\t\t,lastTdCid = lastCol._cid;\r\n\t\t\treturn this.$tableHeader.find('td[_cid=\"' + lastTdCid + '\"]');\r\n\t\t},\r\n\t\t/**\r\n\t\t * @param {Object} info 列信息\r\n\t\t * @param {String} info.field 列名\r\n\t\t * @param {Number} info.width 列宽\r\n\t\t * @example $('#demo').grid('setColumnWidth', {field:'f1',width: 150});\r\n\t\t * @memberof grid-class\r\n\t\t * @instance\r\n\t\t */\r\n\t\tsetColumnWidth: function(info){\r\n\t\t\tvar $td = this.$tableHeader.find('td[field=\"' + info.field + '\"]')\r\n\t\t\t\t,oriWidth = $td.outerWidth()\r\n\t\t\t\t,diff = info.width - oriWidth;\r\n\t\t\tthis._setColumnWidth($td, diff);\r\n\t\t},\r\n\t\t/**\r\n\t\t * 设置标题列的宽度\r\n\t\t * @param $td 标题列Td\r\n\t\t * @param diffWidth 变更的宽度值\r\n\t\t */\r\n\t\t_setColumnWidth: function($td, diffWidth){\r\n\t\t\tvar cid = $td.attr('_cid');\r\n\t\t\tthis._setFooterBorderTop();\r\n\t\t\tvar tdWidth = $td.outerWidth() - cellBorderWidth + diffWidth;\r\n\t\t\tthis.$table.find('td[_cid=' + cid + ']>div:not(.app-wrapper)').css('width', tdWidth);\r\n\t\t\tthis._column[cid].width = tdWidth;\r\n\t\t\tthis._setColumnPercent();\r\n\t\t\tthis._refitColumnWidth();\r\n\t\t},\r\n\t\t/**\r\n\t\t * 隐藏列\r\n\t\t * @param {String} field 列名\r\n\t\t * @example $('#demo').grid('hideColumn', 'f1');\r\n\t\t * @memberof grid-class\r\n\t\t * @instance\r\n\t\t */\r\n\t\thideColumn: function(field){\r\n\t\t\tvar column = this._fieldColumns[field]\r\n\t\t\t\t,that = this;\r\n\t\t\tif(column.lockTree){\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tif(!this._fieldColumns[field].hidden){\r\n\t\t\t\tvar $tds = this.$table.find('td[field=\"' + field + '\"]:not(.grid-cell-merger)');\r\n\t\t\t\t$tds.hide();\r\n\t\t\t\tcolumn.hidden = true;\r\n\t\t\t\tsetParent(column);\r\n\t\t\t\tthis._setViewSize($tds, function($headerView, tdWidth){\r\n\t\t\t\t\tif($headerView.hasClass('grid-header-left')){\r\n\t\t\t\t\t\tthis.setting.viewMainWidth += tdWidth;\r\n\t\t\t\t\t\tthis.setting.viewLeftWidth -= tdWidth;\r\n\t\t\t\t\t}else if($headerView.hasClass('grid-header-right')){\r\n\t\t\t\t\t\tthis.setting.viewMainWidth += tdWidth;\r\n\t\t\t\t\t\tthis.setting.viewRightWidth -= tdWidth;\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t\tthis._refitColumnWidth();\r\n\t\t\t\tthis._fullFreeWidth();\r\n\t\t\t}\r\n\t\t\tfunction setParent(column){\r\n\t\t\t\tif(column.parentColumn){\r\n\t\t\t\t\tvar $parent = that.$tableHeader.find('td[_cid=\"' + column.parentColumn._cid + '\"]');\r\n\t\t\t\t\tif($parent.length > 0){\r\n\t\t\t\t\t\tvar colspan = $parent.attr('colspan');\r\n\t\t\t\t\t\tif(colspan > 1){\r\n\t\t\t\t\t\t\t$parent.attr('colspan', colspan-1);\r\n\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\t$parent.css('display', 'none');\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tsetParent(column.parentColumn);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\t/**\r\n\t\t * 列是否可见\r\n\t\t * @param {String} field 列名\r\n\t\t * @example $('#demo').grid('columnIsVisible', 'f1');\r\n\t\t * @memberof grid-class\r\n\t\t * @instance\r\n\t\t */\r\n\t\tcolumnIsVisible: function(field){\r\n\t\t\tvar $td = this.$tableHeader.find('td[field=\"' + field + '\"]')\r\n\t\t\t\t,display = $td.css('display');\r\n\t\t\tif(display != 'none'){\r\n\t\t\t\treturn true;\r\n\t\t\t}else{\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t},\r\n\t\t/**\r\n\t\t * 如果视图可见则，不设置逻辑宽度\r\n\t\t * @param $tds\r\n\t\t */\r\n\t\t_setViewSize: function($tds, callback){\r\n\t\t\tif(this.$element.is(':visible')){\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tvar td = $tds[0];\r\n\t\t\tif(!td){\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tvar $td = $(td)\r\n\t\t\t\t,$headerView = $td.closest('div').parent()\r\n\t\t\t\t,tdWidth = parseInt($td.css('width'));\r\n\t\t\tcallback.call(this, $headerView, tdWidth);\r\n\t\t},\r\n\t\t/**\r\n\t\t * 显示列\r\n\t\t * @param {String} field 列名\r\n\t\t * @example $('#demo').grid('showColumn', 'f1');\r\n\t\t * @memberof grid-class\r\n\t\t * @instance\r\n\t\t */\r\n\t\tshowColumn: function(field){\r\n\t\t\tvar column = this._fieldColumns[field]\r\n\t\t\t\t,that = this;\r\n\t\t\tif(column.lockTree){\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tif(column.hidden){\r\n\t\t\t\tcolumn.hidden = false;\r\n\t\t\t\tinitHiddenColumn.call(this, column);\r\n\t\t\t\tvar $tds = this.$table.find('td[field=\"' + field + '\"]:not(.grid-cell-merger)');\r\n\t\t\t\t$tds.show();\r\n\t\t\t\tsetParent(column);\r\n\t\t\t\tthis._setViewSize($tds, function($headerView, tdWidth){\r\n\t\t\t\t\tif($headerView.hasClass('grid-header-left')){\r\n\t\t\t\t\t\tthis.setting.viewMainWidth -= tdWidth;\r\n\t\t\t\t\t\tthis.setting.viewLeftWidth += tdWidth;\r\n\t\t\t\t\t}else if($headerView.hasClass('grid-header-right')){\r\n\t\t\t\t\t\tthis.setting.viewMainWidth -= tdWidth;\r\n\t\t\t\t\t\tthis.setting.viewRightWidth += tdWidth;\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t\tthis._refitColumnWidth();\r\n\t\t\t\tthis._shinkFreeWidth();\r\n\t\t\t}\r\n\t\t\tfunction initHiddenColumn(column){\r\n\t\t\t\tif(this.$tableBody.find('td[_cid=' + column._cid + ']').length > 0){\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tvar prevTdid = null\r\n\t\t\t\t\t,prevColumn = column.__prev;\r\n\t\t\t\twhile(prevColumn){\r\n\t\t\t\t\tif(this.$tableBody.find('td[_cid=' + prevColumn._cid + ']').length > 0){\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tprevColumn = prevColumn.__prev;\r\n\t\t\t\t}\r\n\t\t\t\tvar rows = this.getRows();\r\n\t\t\t\tif(rows.length > 0){\r\n\t\t\t\t\tinitTableBody.call(this, rows, column, prevColumn);\r\n\t\t\t\t}\r\n\t\t\t\tthis._setColumnPercent();\r\n\t\t\t\tfunction initTableBody(rows, column, prevColumn){\r\n\t\t\t\t\tvar $viewPos = this.$tableBodyMain;\r\n\t\t\t\t\tif(column.viewPos == 'left'){\r\n\t\t\t\t\t\t$viewPos = this.$tableBodyLeft;\r\n\t\t\t\t\t}else if(column.viewPos == 'right'){\r\n\t\t\t\t\t\t$viewPos = this.$tableBodyRight;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tfor(var i = 0; i < rows.length; i++){\r\n\t\t\t\t\t\tvar tdHtml = this._initCellHtml(column, rows[i]);\r\n\t\t\t\t\t\tif(prevColumn){\r\n\t\t\t\t\t\t\t$viewPos.find('tr:eq('+i+') td[_cid='+prevColumn._cid+']').after(tdHtml);\r\n\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\t$viewPos.find('tr:eq('+i+')').prepend(tdHtml)\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tfunction setParent(column){\r\n\t\t\t\tif(column.parentColumn){\r\n\t\t\t\t\tvar $parent = that.$tableHeader.find('td[_cid=\"' + column.parentColumn._cid + '\"]');\r\n\t\t\t\t\tif($parent.length > 0){\r\n\t\t\t\t\t\tvar display = $parent.css('display');\r\n\t\t\t\t\t\tif(display == 'none'){\r\n\t\t\t\t\t\t\t$parent.css('display', 'table-cell');\r\n\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\tvar colspan = $parent.attr('colspan');\r\n\t\t\t\t\t\t\tif(!colspan){\r\n\t\t\t\t\t\t\t\tcolspan = 1;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t$parent.attr('colspan',  parseInt(colspan)+1);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tsetParent(column.parentColumn);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\t/**\r\n\t\t * 重新调整网格列的自适应宽度\r\n\t\t */\r\n\t\t_refitColumnWidth: function(){\r\n\t\t\tthis._resetViewWidth();\r\n\t\t\tthis.resize();\r\n\t\t},\r\n\t\t/**\r\n\t\t * 重新适应列大小\r\n\t\t * <PRE>\r\n\t\t * 如果网格没有设置填充和自适应列 则不自适应\r\n\t\t * 如果该网格不可见，则根据逻辑宽度进行设置\r\n\t\t * </PRE>\r\n\t\t * @example $('#demo').grid('resize');\r\n\t\t * @memberof grid-class\r\n\t\t * @instance\r\n\t\t */\r\n\t\tresize: function(){\r\n\t\t\tvar that = this;\r\n\t\t\tif(this.hasTriggerResize){\r\n\t\t\t\tif(this.resizeTimeout){\r\n\t\t\t\t\tclearTimeout(this.resizeTimeout);\r\n\t\t\t\t}\t\t\t\r\n\t\t\t\tthis.resizeTimeout = setTimeout(function(){\r\n\t\t\t\t\tthat.resize();\r\n\t\t\t\t\tdelete that.resizeTimeout;\r\n\t\t\t\t}, 120);\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tthis.hasTriggerResize = true;\r\n\t\t\tsetTimeout(function(){\r\n\t\t\t\tdelete that.hasTriggerResize;\r\n\t\t\t}, 110);\r\n\t\t\tif(this.setting.fitColumns == 'E' || this.setting.fitColumns == 'ES'){\r\n\t\t\t\tvar cols = this.columns;\r\n\t\t\t\tif(cols == undefined){\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tthis._fitMainViewWidth();\r\n\t\t\t\tfor(var i = 0; i< cols.length; i++){\r\n\t\t\t\t\tvar col = cols[i];\r\n\t\t\t\t\tif(col.field && !col.hidden){\r\n\t\t\t\t\t\tthis.$table.find('td[_cid=' + cols[i]._cid + ']>div:not(.app-wrapper)').css('width', col.width);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tthis._resetViewWidth();\r\n\t\t\tthis._fixHeight();\r\n\t\t\tthis._footerFollow();\r\n\t\t},\r\n\t\t/**\r\n\t\t * 设置视图的宽度\r\n\t\t * 如果视图不可见，则根据逻辑宽度进行设置\r\n\t\t */\r\n\t\t_resetViewWidth: function(){\r\n\t\t\tvar leftViewWidth = 0\r\n\t\t\t\t,mainViewWidth = 0\r\n\t\t\t\t,rightViewWidth = 0;\r\n\t\t\tif(this.$element.is(':visible')){\r\n\t\t\t\tleftViewWidth = this.$tableHeaderLeft.find('>div>table').outerWidth();\r\n\t\t\t\tmainViewWidth = this.$tableHeaderMain.find('>div>table').outerWidth() - 2;\r\n\t\t\t\trightViewWidth = this.$tableHeaderRight.find('>div>table').outerWidth();\r\n\t\t\t}else{\r\n\t\t\t\tleftViewWidth =  this.setting.viewLeftWidth;\r\n\t\t\t\tmainViewWidth = this.setting.viewLeftWidth - 2;\r\n\t\t\t\trightViewWidth =  this.setting.viewRightWidth;\r\n\t\t\t}\r\n\t\t\tvar css = {};\r\n\t\t\tcss['margin-left'] = leftViewWidth;\r\n\t\t\tcss['margin-right'] = rightViewWidth;\r\n\t\t\tif(this._hasXProxyScroll()){\r\n\t\t\t\tthis.$xProxyScroll.css(css);\r\n\t\t\t\tthis.$xProxyScroll.find('>div').css('width', mainViewWidth);\r\n\t\t\t}\r\n\t\t\tthis._setFooterBorderTop();\r\n\t\t\tthis._footerFollow();\r\n\t\t},\r\n\t\t/**\r\n\t\t * 设置网格脚的上边框\r\n\t\t */\r\n\t\t_setFooterBorderTop: function(){\r\n\t\t\tif(this._hasXProxyScroll()){\r\n\t\t\t\tthis.$tableFooter.addClass('splitBorder');\r\n\t\t\t}else{\r\n\t\t\t\tthis.$tableFooter.removeClass('splitBorder');\r\n\t\t\t}\r\n\t\t},\r\n\t\t/**\r\n\t\t * 追加一行数据到第一行，并标记该行为新增的样式\r\n\t\t * @param {Object} [rowData] 单行数据对象\r\n\t\t * @example $('#demo').grid('prependRow');\r\n\t\t * @example $('#demo').grid('prependRow',{col1:1,col2:1,col3:1});\r\n\t\t * @memberof grid-class\r\n\t\t * @instance\r\n\t\t */\r\n\t\tprependRow: function(rowData){\r\n\t\t\tif(this.setting.editable == false){\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tif(rowData == undefined){\r\n\t\t\t\trowData = {};\r\n\t\t\t}\r\n\t\t\tif($.isArray(rowData)){\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tthis._prependOneRowToBody(rowData);\r\n\t\t\tthis._reOrderNumber();\r\n\t\t\tthis.locateCurrent();\r\n\t\t\tthis._toggleMessage();\r\n\t\t\tthis._pagerAddRow();\r\n\t\t},\r\n\t\t/**\r\n\t\t * 追加一行数据到第一行，并选中该行\r\n\t\t * @param {Object} [rowData] 单行数据对象\r\n\t\t * @example $('#demo').grid('prependRowThenSelect');\r\n\t\t * @example $('#demo').grid('prependRowThenSelect',{col1:1,col2:1,col3:1});\r\n\t\t * @memberof grid-class\r\n\t\t * @instance\r\n\t\t */\r\n\t\tprependRowThenSelect: function(rowData){\r\n\t\t\tthis.prependRow(rowData);\r\n\t\t\tthis.selectRow(0);\r\n\t\t},\r\n\t\t/**\r\n\t\t * 追加一行数据到网格尾，并标记该行为新增的样式\r\n\t\t * @param {Object} [rowData] 单行数据对象\r\n\t\t * @param {Integer} [rowIndex] 要插入的行号\r\n\t\t * @example $('#demo').grid('appendRow');\r\n\t\t * @example $('#demo').grid('appendRow',{col1:1,col2:1,col3:1});\r\n\t\t * @memberof grid-class\r\n\t\t * @instance\r\n\t\t */\r\n\t\tappendRow: function(rowData, rowIndex){\r\n\t\t\tif(this.setting.editable == false){\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tif(rowData == undefined){\r\n\t\t\t\trowData = {};\r\n\t\t\t}\r\n\t\t\tif($.isArray(rowData)){\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tthis._appendOneRowToBody(rowData, rowIndex);\r\n\t\t\tthis._reOrderNumber();\r\n\t\t\tthis.locateCurrent();\r\n\t\t\tthis._toggleMessage();\r\n\t\t\tthis._pagerAddRow();\r\n\t\t},\r\n\t\t/**\r\n\t\t * 追加一行数据到网格尾，并选中该行\r\n\t\t * @param {Object} [rowData] 单行数据对象\r\n\t\t * @example $('#demo').grid('appendRowThenSelect');\r\n\t\t * @example $('#demo').grid('appendRowThenSelect',{col1:1,col2:1,col3:1});\r\n\t\t * @memberof grid-class\r\n\t\t * @instance\r\n\t\t */\r\n\t\tappendRowThenSelect: function(rowData){\r\n\t\t\tthis.appendRow(rowData);\r\n\t\t\tvar lastRowIndex = this.$tableBodyMain.find('>div>table>tbody>tr').length;\r\n\t\t\tthis.selectRow(lastRowIndex-1);\r\n\t\t},\r\n\t\t/**\r\n\t\t * 隐藏显示信息\r\n\t\t */\r\n\t\t_toggleMessage: function(){\r\n\t\t\tif(this.$tableBodyMain.find('tr').length > 0){\r\n\t\t\t\tthis._hideMessage();\r\n\t\t\t}else{\r\n\t\t\t\tthis._showMessage(empty);\r\n\t\t\t}\r\n\t\t},\r\n\t\t_prependOneRowToBody: function(rowData){\r\n\t\t\tvar insertedCls = currentRowCls;\r\n\t\t\tthis._clearCurrent();\r\n\t\t\tif(this.setting.markChange){\r\n\t\t\t\tinsertedCls += ' inserted';\r\n\t\t\t}\r\n\t\t\tvar trId = App.uuid()\r\n\t\t\t\t,idAttr = rowData[this.setting.idField] ? '_v=\"' + rowData[this.setting.idField] + '\"' : ''\r\n\t\t\t\t,trHead = '<tr id=\"' + trId + '\" ' + idAttr + ' class=\"data-row ' + (this._rownumbers%2 == 0 ? 'odd' : 'even') + ' ' + insertedCls + '\">'\r\n\t\t\t\t,trEnd = '</tr>'\r\n\t\t\t\t,leftHtml = trHead + this._initRowTrInnerHtml(this.frozenColumns, rowData) + trEnd\r\n\t\t\t\t,mainHtml = trHead + this._initRowTrInnerHtml(this.columns, rowData) + trEnd\r\n\t\t\t\t,rightHtml = trHead + this._initRowTrInnerHtml(this.frozenColumnsRight, rowData) + trEnd;\r\n\t\t\trowData.__rowId = trId;\r\n\t\t\tthis.$tableBodyLeft.find('>div>table>tbody').prepend(leftHtml);\r\n\t\t\tthis.$tableBodyRight.find('>div>table>tbody').prepend(rightHtml);\r\n\t\t\tthis.$tableBodyMain.find('>div>table>tbody').prepend(mainHtml);\r\n\t\t\tthis._insertRow(trId, rowData);\r\n\t\t\tthis._rownumbers++;\r\n\t\t\tthis._footerFollow();\r\n\t\t\tthis._fixXProxyScroll();\r\n\t\t\tthis._fixYProxyScrollHeight();\r\n\t\t},\r\n\t\t/**\r\n\t\t * 输出一行数据到网格体\r\n\t\t */\r\n\t\t_appendOneRowToBody: function(rowData, rowIndex){\r\n\t\t\tvar insertedCls = currentRowCls;\r\n\t\t\tthis._clearCurrent();\r\n\t\t\tif(this.setting.markChange){\r\n\t\t\t\tinsertedCls += ' inserted';\r\n\t\t\t}\r\n\t\t\tvar trId = App.uuid()\r\n\t\t\t\t,idAttr = rowData[this.setting.idField] ? '_v=\"' + rowData[this.setting.idField] + '\"' : ''\r\n\t\t\t\t,trHead = '<tr id=\"' + trId + '\" ' + idAttr + ' class=\"data-row ' + (this._rownumbers%2 == 0 ? 'odd' : 'even') + ' ' + insertedCls + '\">'\r\n\t\t\t\t,trEnd = '</tr>'\r\n\t\t\t\t,leftHtml = trHead + this._initRowTrInnerHtml(this.frozenColumns, rowData) + trEnd\r\n\t\t\t\t,mainHtml = trHead + this._initRowTrInnerHtml(this.columns, rowData) + trEnd\r\n\t\t\t\t,rightHtml = trHead + this._initRowTrInnerHtml(this.frozenColumnsRight, rowData) + trEnd;\r\n\t\t\trowData.__rowId = trId;\r\n\t\t\tif(!isNaN(rowIndex)){\r\n\t\t\t\tthis.$tableBodyLeft.find('>div>table tr:eq(' + rowIndex + ')').after(leftHtml);\r\n\t\t\t\tthis.$tableBodyRight.find('>div>table tr:eq(' + rowIndex + ')').after(rightHtml);\r\n\t\t\t\tthis.$tableBodyMain.find('>div>table tr:eq(' + rowIndex + ')').after(mainHtml);\r\n\t\t\t}else{\r\n\t\t\t\tthis.$tableBodyLeft.find('>div>table>tbody').append(leftHtml);\r\n\t\t\t\tthis.$tableBodyRight.find('>div>table>tbody').append(rightHtml);\r\n\t\t\t\tthis.$tableBodyMain.find('>div>table>tbody').append(mainHtml);\r\n\t\t\t}\r\n\t\t\tthis._insertRow(trId, rowData);\r\n\t\t\tthis._rownumbers++;\r\n\t\t\tthis._footerFollow();\r\n\t\t\tthis._fixXProxyScroll();\r\n\t\t\tthis._fixYProxyScrollHeight();\r\n\t\t},\r\n\t\t/**\r\n\t\t * 按顺序重新输出当前的序号\r\n\t\t */\r\n\t\t_reOrderNumber: function(){\r\n\t\t\tif(this.$tableHeaderLeft.find('td[field=_rownumbers]').length == 0){\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tvar $tdDivs = this.$tableBodyLeft.find('tr:visible>td[field=_rownumbers]>div');\r\n\t\t\tvar starNum = this._getStarRowNumber();\r\n\t\t\tthis._rownumbers = starNum + $tdDivs.length;\r\n\t\t\t$tdDivs.each(function(){\r\n\t\t\t\t$(this).text(starNum++);\r\n\t\t\t});\r\n\t\t},\r\n\t\t/**\r\n\t\t * 显示自定义面板\r\n\t\t * @example $('#grid').grid('showCustom');\r\n\t\t * @memberof grid-class\r\n\t\t * @instance\r\n\t\t */\r\n\t\tshowCustom: function(){\r\n\t\t\tthis.$headerCustom.children().show();\r\n\t\t\tthis._fixHeight();\r\n\t\t\tthis._footerFollow();\r\n\t\t},\r\n\t\t/**\r\n\t\t * 显示自定义面板\r\n\t\t * @example $('#grid').grid('showCustom');\r\n\t\t * @memberof grid-class\r\n\t\t * @instance\r\n\t\t */\r\n\t\thideCustom: function(){\r\n\t\t\tthis.$headerCustom.children().hide();\r\n\t\t\tthis._fixHeight();\r\n\t\t\tthis._footerFollow();\r\n\t\t},\r\n\t\t/**\r\n\t\t * 切换显示自定义面板\r\n\t\t * @example $('#grid').grid('toggleCustom');\r\n\t\t * @memberof grid-class\r\n\t\t * @instance\r\n\t\t */\r\n\t\ttoggleCustom: function(){\r\n\t\t\tif(this.$headerCustom.children().is(':visible')){\r\n\t\t\t\tthis.hideCustom();\r\n\t\t\t}else{\r\n\t\t\t\tthis.showCustom();\r\n\t\t\t}\r\n\t\t},\r\n\t\t/**\r\n\t\t * 更新合计行，忽略公式合计和自定义合计\r\n\t\t * @param {Object} footer 合计行数据\r\n\t\t * @example $('#grid').grid('updateFooter', {id:'idVal',......}); 合计行的数据\r\n\t\t * @memberof grid-class\r\n\t\t * @instance\r\n\t\t */\r\n\t\tupdateFooter: function(footer){\r\n\t\t\tif(!footer){\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tif(!$.isArray(footer)){\r\n\t\t\t\tfooter = [footer];\r\n\t\t\t}\r\n\t\t\tthis.clearFooter();\r\n\t\t\tthis.appendFooter(footer);\r\n\t\t},\r\n\t\t/**\r\n\t\t * 绑定顶层容器的_resize事件\r\n\t\t */\r\n\t\t_bindResize: function(){\r\n\t\t\tvar g = this;\r\n\t\t\tthis.$element.on('_resize.grid.api', function(){\r\n\t\t\t\tg.resize();\r\n\t\t\t});\r\n\t\t},\r\n\t\t/**\r\n\t\t * 执行网格的的时间间隔器\r\n\t\t */\r\n\t\tsetGridInterval: function(callback, time){\r\n\t\t\tthis.autoReflashTimer = setInterval(callback, time);\r\n\t\t\treturn this.autoReflashTimer;\r\n\t\t},\r\n\t\t/**\r\n\t\t * 清除网格的的时间间隔器\r\n\t\t */\r\n\t\tclearGridInterval: function(timer){\r\n\t\t\tif(!timer){\r\n\t\t\t\ttimer = this.autoReflashTimer;\r\n\t\t\t}\r\n\t\t\tclearInterval(timer);\r\n\t\t},\r\n\t\t/**\r\n\t\t * 绑定鼠标对自动滚动的事件\r\n\t\t */\r\n\t\tonMouseEvent: function(){\r\n\t\t\tif(!this.setting.autoScroll){\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tthis.startScroll();\r\n\t\t\tvar that = this;\r\n\t\t\tthis.$tableBody.on('mouseenter', function(){\r\n\t\t\t\tthat.stopScroll();\r\n\t\t\t}).on('mouseleave', function(){\r\n\t\t\t\tthat.startScroll();\r\n\t\t\t});\r\n\t\t},\r\n\t\t/**\r\n\t\t * 启动自动滚动数据\r\n\t\t */\r\n\t\tstartScroll: function(){\r\n\t\t\tif(this._scrollRunning){\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tvar that = this\r\n\t\t\t\t,$scrollTable = that.$tableBodyMain\r\n\t\t\t\t,$leftTable = that.$tableBodyLeft\r\n\t\t\t\t,$rightTable = that.$tableBodyRight;\r\n\t\t\tif(this.setting.autoScroll == 'upward'){\r\n\t\t\t\tthis.autoScrollTimer = setInterval(function(){\r\n\t\t\t\t\tif(!$scrollTable.is(':visible')){\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif($scrollTable.scrollTop() + $scrollTable[0].clientHeight >= $scrollTable[0].scrollHeight){\r\n\t\t\t\t\t\t$scrollTable.scrollTop(0);\r\n\t\t\t\t\t\t$leftTable.scrollTop(0);\r\n\t\t\t\t\t\t$rightTable.scrollTop(0);\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\tvar mainTop = $scrollTable.scrollTop() + 5;\r\n\t\t\t\t\t\t$scrollTable.scrollTop(mainTop);\r\n\t\t\t\t\t\t$leftTable.scrollTop(mainTop);\r\n\t\t\t\t\t\t$rightTable.scrollTop(mainTop);\r\n\t\t\t\t\t}\r\n\t\t\t\t}, 200);\r\n\t\t\t\tthis._scrollRunning = true;\r\n\t\t\t}else if(this.setting.autoScroll == 'downward'){\r\n\t\t\t\tthis.autoScrollTimer = setInterval(function(){\r\n\t\t\t\t\tif(!$scrollTable.is(':visible')){\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif($scrollTable.scrollTop() <= 0){\r\n\t\t\t\t\t\t$scrollTable.scrollTop($scrollTable[0].scrollHeight);\r\n\t\t\t\t\t\t$leftTable.scrollTop($scrollTable[0].scrollHeight);\r\n\t\t\t\t\t\t$rightTable.scrollTop($scrollTable[0].scrollHeight);\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\tvar mainTop = $scrollTable.scrollTop() - 5;\r\n\t\t\t\t\t\t$scrollTable.scrollTop(mainTop);\r\n\t\t\t\t\t\t$leftTable.scrollTop(mainTop);\r\n\t\t\t\t\t\t$rightTable.scrollTop(mainTop);\r\n\t\t\t\t\t}\r\n\t\t\t\t}, 200);\r\n\t\t\t\tthis._scrollRunning = true;\r\n\t\t\t}\r\n\t\t},\r\n\t\t/**\r\n\t\t * 关闭自动滚动数据\r\n\t\t */\r\n\t\tstopScroll: function(){\r\n\t\t\tif(!this._scrollRunning){\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tclearInterval(this.autoScrollTimer);\r\n\t\t\tthis._scrollRunning = false;\r\n\t\t\tdelete this.autoScrollTimer;\r\n\t\t},\r\n\t\t/**\r\n\t\t * 获取网格的列信息\r\n\t\t * @property {Object} [returns] 数据对象\r\n\t\t * @returns {Object} data 数据对象\r\n\t\t * @example $('#demo').grid('getColumns');\r\n\t\t * @memberof grid-class\r\n\t\t * @instance\r\n\t\t */\r\n\t\tgetColumns: function(){\r\n\t\t\tvar result = {};\r\n\t\t\tresult.left = this.setting.frozenColumns;\r\n\t\t\tresult.center = this.setting.columns;\r\n\t\t\tresult.right = this.setting.frozenColumnsRight;\r\n\t\t\treturn result;\r\n\t\t},\r\n\t\t/**\r\n\t\t * 获取网格的列信息,以树形的方式展现\r\n\t\t * @property {Object} [returns] 数据对象\r\n\t\t * @returns {Object} data 数据对象\r\n\t\t * @example $('#demo').grid('getColumns');\r\n\t\t * @memberof grid-class\r\n\t\t * @instance\r\n\t\t */\r\n\t\tgetColumnTree: function(){\r\n\t\t\tvar result = [];\r\n\t\t\tjion(result, this.setting.frozenColumns);\r\n\t\t\tjion(result, this.setting.columns);\r\n\t\t\tjion(result, this.setting.frozenColumnsRight);\r\n\t\t\treturn result;\r\n\t\t\tfunction jion(target, multiAttr){\r\n\t\t\t\tvar level0 = multiAttr[0];\r\n\t\t\t\tif($.isArray(level0)){\r\n\t\t\t\t\tfor(var i = 0 ; i < level0.length; i++){\r\n\t\t\t\t\t\ttarget.push(level0[i]);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\t/**\r\n\t\t * 销毁方法\r\n\t\t */\r\n\t\tdestroy: function(){\r\n\t\t\tthis.clearGridInterval(this.autoReflashTimer);\r\n\t\t\tthis.stopScroll();\r\n\t\t\tvar editors = this.editor;\r\n\t\t\tfor(var editorField in editors){\r\n\t\t\t\tif(editors[editorField].editor){\r\n\t\t\t\t\teditors[editorField].editor.destroy();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif(this.$headerContextMenu){\r\n\t\t\t\tthis.$headerContextMenu.remove();\r\n\t\t\t\tthis.$headerContextMsg.remove();\r\n\t\t\t}\r\n\t\t\tthis.$t.removeData('grid');\r\n\t\t\tthis.$element.remove();\r\n\t\t}\r\n\t});\r\n\r\n\t$.fn.grid = function (option) {\r\n\t\tvar methodReturn = undefined\r\n\t\t\t,args = arguments;\r\n\t\tthis.each(function () {\r\n\t\t\tvar $this = $(this)\r\n\t\t\t\t,component = $this.data('grid');\r\n\t\t\tif(typeof option === 'string'){\r\n\t\t\t\ttry{\r\n\t\t\t\t\tvar methodArgs = Array.prototype.slice.call(args, 1);\r\n\t\t\t\t\tmethodReturn = App.componentMethodApply(component, option, methodArgs);\r\n\t\t\t\t}catch(e){\r\n\t\t\t\t\tvar id = $this.attr('id');\r\n\t\t\t\t\tif(!id){\r\n\t\t\t\t\t\tid = $this[0].outerHTML;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tthrow new Error('组件grid[' + id + ']调用' + option +'方法:' + e);\r\n\t\t\t\t}\r\n\t\t\t}else{\r\n\t\t\t\tif(!component){\r\n\t\t\t\t\tcomponent = new Grid(this, option);\r\n\t\t\t\t\t$this.data('grid', component);\r\n\t\t\t\t}else{\r\n\t\t\t\t\tvar id = $this.attr('id');\r\n\t\t\t\t\tif(!id){\r\n\t\t\t\t\t\tid = $this[0].outerHTML;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tthrow new Error('组件grid[' + id + ']无法重复初始化');\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\t\treturn methodReturn;\r\n\t};\r\n\t/**\r\n\t * 表达式的函数支持\r\n\t */\r\n\twindow.formulaHelper = {\r\n\t\t/**\r\n\t\t * 获取数值\r\n\t\t */\r\n\t\tgetNum: function(obj, field){\r\n\t\t\tvar val = obj[field];\r\n\t\t\tif(val == undefined){\r\n\t\t\t\tval = 0;\r\n\t\t\t}\r\n\t\t\treturn val;\r\n\t\t},\r\n\t\t/**\r\n\t\t * 获取字符串\r\n\t\t */\r\n\t\tgetStr: function(obj, field){\r\n\t\t\tvar val = obj[field];\r\n\t\t\tif(val == undefined){\r\n\t\t\t\tval = '';\r\n\t\t\t}\r\n\t\t\treturn val;\r\n\t\t}\r\n\t};\r\n\tfunction atOnceMoment(e, sign, context){\r\n\t\tvar ts = context._ts[sign];\r\n\t\tcontext._ts[sign] = e.timeStamp;\r\n\t\tif(ts){\r\n\t\t\treturn e.timeStamp - ts < Options.appDefaults.Grid.dblOnce;\r\n\t\t}else{\r\n\t\t\treturn false;\r\n\t\t}\r\n\t}\r\n\tfunction escapeHtml(str){\r\n\t\treturn $('<div>' + str + '</div>').text();\r\n\t}\r\n\treturn Grid;\r\n\t/**\r\n\t * 更新列标题\r\n\t */\r\n\tfunction updateColumnTitle(){\r\n\t\tvar cols = this._titleVarColumns\r\n\t\t\t,params = this.getParameter();\r\n\t\tif(!cols || !params){\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tfor(var _cid in cols){\r\n\t\t\tvar col = cols[_cid]\r\n\t\t\t\t,title = resolveTitleVar(col.titleVar, params);\r\n\t\t\tif(title){\r\n\t\t\t\tcol.title = title;\r\n\t\t\t}else{\r\n\t\t\t\tcol.title = col.oriTitle;\r\n\t\t\t}\r\n\t\t\tthis.$tableHeader.find('td[_cid=' + col._cid + ']>div:first').text(col.title);;\r\n\t\t}\r\n\t}\r\n\t/**\r\n\t * 解析变量表达式\r\n\t */\r\n\tfunction resolveTitleVar(exp, params){\r\n\t\tvar result = ''\r\n\t\t\t,expReg = /\\{([\\w-]+)\\}/g; \r\n\t\tif(expReg.test(exp)){\r\n\t\t\tresult = exp.replace(expReg, function(m, name){\r\n\t\t\t\tvar val = params[name];\r\n\t\t\t\tif(val !== undefined ){\r\n\t\t\t\t\tval = params[name];\r\n\t\t\t\t}else{\r\n\t\t\t\t\tval = '{' + name + '}';\r\n\t\t\t\t}\r\n\t\t\t\treturn val;\r\n\t\t\t});\r\n\t\t\tif(expReg.test(result)){\r\n\t\t\t\tresult = '';\r\n\t\t\t}else{\r\n\t\t\t\ttry{\r\n\t\t\t\t\tresult = eval(result);\r\n\t\t\t\t}catch(e){\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}else{\r\n\t\t\tresult = params[exp];\r\n\t\t}\r\n\t\treturn result;\r\n\t}\r\n\t\r\n\tfunction setDataRowHeight(){\r\n\t\tif(this._rowHeight){\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tif(this.setting.rownumbers == 'normal' || this.setting.rownumbers == 'repeat'){\r\n\t\t\tthis._rowHeight = this.$tableBodyLeft.find('tr:eq(0)').outerHeight();\r\n\t\t}else if(this.setting.mergeColumns && this.setting.mergeColumns.length > 0){\r\n\t\t\tvar $tempTr = $('<tr><td><div></div></td></tr>');\r\n\t\t\tthis.$tableBodyMain.find('table').prepend($tempTr);\r\n\t\t\tthis._rowHeight = $tempTr.outerHeight();\r\n\t\t\t$tempTr.remove();\r\n\t\t}else{\r\n\t\t\tthis._rowHeight = this.$tableBodyMain.find('tr:eq(0)').outerHeight();\r\n\t\t}\r\n\t\tif(!!!(window.ActiveXObject || 'ActiveXObject' in window)){\r\n\t\t\tthis._rowHeight += 1;\r\n\t\t}\r\n\t}\r\n\tfunction headBtnTdClick(e){\r\n\t\tvar $btns = $(this).find('a');\r\n\t\tif($btns.length == 1){\r\n\t\t\t$btns.trigger('click');\r\n\t\t}\r\n\t}\r\n});\n",
    "/**\r\n * 下拉表格控件--继承Combo\r\n * @author Mr.T\r\n */\r\ndefine('app/widgets/form/app-combogrid',['app/core/app-jquery', 'app/core/app-core', 'app/data/app-ajax', 'app/widgets/form/app-combo',\r\n        'app/core/app-options', 'app/widgets/grid/app-grid'],\r\n        function($,App, AppAjax, Combo, Options, Grid, Suggest) {\r\n\t\r\n\t\r\n\t'use strict';\r\n\t/**\r\n\t * @class \r\n\t * @classdesc 下拉表格\r\n\t * <span class=\"type-signature static\">extend</span>combo\r\n\t * <span class=\"type-signature static\">reference</span>grid\r\n\t * @see {@link combo-class} 查看combo组件\r\n\t * @see {@link grid-class} 查看grid组件\r\n\t * @name comboGrid-class\r\n\t * @desc 下拉表格的初始化方法，初始化grid时会优先使用combogrid的options属性\r\n\t * @param {DOMElement} input 要渲染的input组件\r\n\t * @param {Object} options 组件的选项设置 \r\n\t * @author Mr.T\r\n\t * @example &lt;input &#9;class=\"app-combogrid\"\r\n\t * &#9;_options=\"{\r\n\t * &#9;&#9;url: 'platform/sample/base/ui/combogridData.do',\r\n\t * &#9;&#9;columns: [[\r\n\t * &#9;&#9;&#9;{title: 'id列',field: 'id',hidden:true},\r\n\t * &#9;&#9;&#9;{title: '名称列',field: 'name',width: 100},\r\n\t * &#9;&#9;&#9;{title: '主列标题3',field: 'c3',width: 150},\r\n\t * &#9;&#9;&#9;{title: '主列标题4',field: 'c4',width: 200},\r\n\t * &#9;&#9;&#9;{title: '主列标题5',field: 'c5',width: 250},\r\n\t * &#9;&#9;&#9;{title: '主列标题6',field: 'c6',width: 500}\r\n\t * &#9;&#9;]]\r\n\t * &#9;}\"\r\n\t * />\r\n\t * @example $('#demo').combogrid({\r\n\t * &#9;url: 'platform/sample/base/ui/combogridData.do',\r\n\t * &#9;columns: [[\r\n\t * &#9;&#9;{title: 'id列',field: 'id',hidden:true},\r\n\t * &#9;&#9;{title: '名称列',field: 'name',width: 100},\r\n\t * &#9;&#9;{title: '主列标题3',field: 'c3',width: 150},\r\n\t * &#9;&#9;{title: '主列标题4',field: 'c4',width: 200},\r\n\t * &#9;&#9;{title: '主列标题5',field: 'c5',width: 250},\r\n\t * &#9;&#9;{title: '主列标题6',field: 'c6',width: 500}\r\n\t * &#9;]]\r\n\t * });\r\n\t */\r\n\tvar Combogrid = Combo.extend({\r\n\t\tinitialize: function(input, options) {\r\n\t\t\tif(!options){\r\n\t\t\t\toptions = {};\r\n\t\t\t}\r\n\t\t\toptions._ = $.extend({}, Options.appDefaults.Combogrid, options._); \r\n\t\t\tCombogrid.superclass.initialize.call(this, input, options);\r\n\t\t\tthis._init();\r\n\t\t},\r\n\t\t/**\r\n\t\t * 初始化\r\n\t\t */\r\n\t\t_init: function(){\r\n\t\t\tthis._initOptions();\r\n\t\t\tthis._initPanelContent();\r\n\t\t\tthis._registEvents();\r\n\t\t\tthis._eventRegister();\r\n\t\t\tthis.$input.data('context', this);\r\n\t\t},\r\n\t\t/**\r\n\t\t * 初始化网格设置\r\n\t\t */\r\n\t\t_initOptions: function(){\r\n\t\t\tvar s = this.setting;\r\n\t\t\ts.multiple = s.checkbox || s.multiple;\r\n\t\t\tif(!s.suggestfield){\r\n\t\t\t\ts.suggestfield = this.setting.textfield;\r\n\t\t\t}\r\n\t\t\tif(this.setting.search || this.setting.usesuggest){\r\n\t\t\t\tthis.setting.search = true;\r\n\t\t\t}\r\n\t\t\tthis.$dropPanelMain.css('overflow','hidden');//由内部网格代理滚动\r\n\t\t},\r\n\t\t/**\r\n\t\t * 初始化下拉面板的内容\r\n\t\t */\r\n\t\t_initPanelContent: function(){\r\n\t\t\tthis.$grid = $('<table></table>');;\r\n\t\t\tthis.$grid.appendTo(this.$dropPanelMain);\r\n\t\t},\r\n\t\t/**\r\n\t\t * 事件注册器\r\n\t\t */\r\n\t\t_eventRegister: function(){\r\n\t\t\tvar s = this.setting;\r\n\t\t\tthis.$dropPanelMain.off('mousewheel.combo.api')\r\n\t\t\tthis.$dropPanelMain.off('scroll.combo.api');\r\n\t\t\tif($.isFunction(s.afterSelected)){\r\n\t\t\t\tthis.on('afterSelected', s.afterSelected);\r\n\t\t\t}\r\n\t\t\tif($.isFunction(s.beforeSelected)){\r\n\t\t\t\tthis.on('beforeSelected', s.beforeSelected);\r\n\t\t\t}\r\n\t\t},\r\n\t\t/**\r\n\t\t * 注册控件事件\r\n\t\t */\r\n\t\t_registEvents: function(){\r\n\t\t\tif(this.setting.search){\r\n\t\t\t\tthis._editable();\r\n\t\t\t\tthis.$text.on('click.combogrid-local.api', $.proxy(this._textFocusEvent,this));\r\n\t\t\t}\r\n\t\t},\r\n\t\t/**\r\n\t\t * 显示值文本框获得焦点事件\r\n\t\t * \t并绑定一次焦点失去恢复文本事件\r\n\t\t */\r\n\t\t_textFocusEvent: function(){\r\n\t\t\tvar that = this;\r\n\t\t\tthis.$text[0].select();\r\n\t\t\tthis.$text.data('oriText',this.getText());\r\n\t\t\tthis.$text.on('blur.combogrid-local.api', function(){\r\n\t\t\t\tif(!that._grid){\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tvar nodes = that._grid.getSelections()\r\n\t\t\t\t\t,$this = $(this);\r\n\t\t\t\tif(nodes.length == 0){\r\n\t\t\t\t\t$this.val($this.data('oriText'));\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t},\r\n\t\t/**\r\n\t\t * 设置请求远程数据时的查询参数\r\n\t\t * @param {object} param 查询参数\r\n\t\t * @example $('#demo').combogrid('setParameter',{year:2014});\r\n\t\t * @memberof comboGrid-class\r\n\t\t * @instance\r\n\t\t */\r\n\t\tsetParameter: function(param){\r\n\t\t\tif(!param){\r\n\t\t\t\tparam = {};\r\n\t\t\t}\r\n\t\t\tthis.$input.data('_parameter', param);\r\n\t\t\tif(this._grid){\r\n\t\t\t\tthis._grid.setParameter(this.getParameter());\r\n\t\t\t}\r\n\t\t},\r\n\t\t/**\r\n\t\t * 根据传入的url进行远程加载数据并渲染\r\n\t\t * @param {url} url 要载入的url\r\n\t\t * @todo 请求时并加入parameter参数，获取到数据后调用loadData\r\n\t\t * @example $('#demo').combogrid('reload','a.do');\r\n\t\t * @memberof comboGrid-class\r\n\t\t * @instance\r\n\t\t */\r\n\t\treload: function(url){\r\n\t\t\tvar grid = this._grid;\r\n\t\t\tif(grid){\r\n\t\t\t\tgrid.load(url);\r\n\t\t\t}else{\r\n\t\t\t\tthis.setting.url = url;\r\n\t\t\t}\r\n\t\t},\r\n\t\t/**\r\n\t\t * 载入数据，并根据数据渲染面板中的网格数据\r\n\t\t * @param {Array.<Node>} data 载入的数据列表\r\n\t\t * @todo 请求时并加入parameter参数，获取到数据后调用loadData\r\n\t\t * @example $('#demo').combogrid('loadData',[]);\r\n\t\t * @memberof comboGrid-class\r\n\t\t * @instance\r\n\t\t */\r\n\t\tloadData: function(data){\r\n\t\t\tthis._grid.loadData(data);\r\n\t\t\tthis._rendSelectedItems();\r\n\t\t\t//内容填充后，显示面板，重新定位\r\n\t\t\tif(this._mainDivIsVisiable()){\r\n\t\t\t\tthis.place();\r\n\t\t\t}\r\n\t\t},\r\n\t\t/**\r\n\t\t * 按键事件\r\n\t\t */\r\n\t\t_keyManager: function(e){\r\n\t\t\tif(this._dealSysKey(e)){\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tif(this._mainDivIsVisiable()){\r\n\t\t\t\tthis._keyForVisiblePanel(e);\r\n\t\t\t}else{\r\n\t\t\t\tthis._keyForHiddenPanel(e);\r\n\t\t\t}\r\n\t\t},\r\n\t\t/**\r\n\t\t * 面板可见状态下的按键事件处理\r\n\t\t */\r\n\t\t_keyForVisiblePanel: function(e){\r\n\t\t\tvar keyCode = e.keyCode\r\n\t\t\t\t,s = this.setting;\r\n\t\t\te.stopPropagation();\r\n\t\t\tif(App.containKeyCode(e, s.keyNextNode)){\r\n\t\t\t\tthis._keyNextNode(e);\r\n\t\t\t}else if(App.containKeyCode(e, s.keyPrevNode)){\r\n\t\t\t\tthis._keyPrevNode(e);\r\n\t\t\t}else if(App.containKeyCode(e, s.keyPickNode)){\r\n\t\t\t\tthis._keyPickNode(e);\r\n\t\t\t}else if(App.containKeyCode(e, s.keyNextPage)){\r\n\t\t\t\tthis._keyNextPage(e);\r\n\t\t\t}else if(App.containKeyCode(e, s.keyPrevPage)){\r\n\t\t\t\tthis._keyPrevPage(e);\r\n\t\t\t}else if(App.containKeyCode(e, s.keyHidePanel)){\r\n\t\t\t\tthis._keyHidePanel(e);\r\n\t\t\t}else if(this._keyFilterSuggest(e)){\r\n\t\t\t\tthis.suggest();\r\n\t\t\t}\r\n\t\t},\r\n\t\t/**\r\n\t\t * 面板不可见状态下的按键事件处理\r\n\t\t */\r\n\t\t_keyForHiddenPanel: function(e){\r\n\t\t\tvar keyCode = e.keyCode\r\n\t\t\t\t,s = this.setting;\r\n\t\t\tif(App.containKeyCode(e, s.keyShowPanel)){\r\n\t\t\t\tthis._keyShowPanel(e);\r\n\t\t\t}else if(this._isKeyCursorPos(keyCode)){\r\n\t\t\t\tthis._keyCursorPos(e);\r\n\t\t\t}else if(this._keyFilterSuggest(e)){\r\n\t\t\t\tif(e.keyCode == App.keyCode.ENTER){\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tthis.suggest();\r\n\t\t\t}\r\n\t\t},\r\n\t\t/**\r\n\t\t * 选中一个节点\r\n\t\t */\r\n\t\t_keyPickNode: function(e){\r\n\t\t\te.preventDefault();\r\n\t\t\tvar g = this._grid\r\n\t\t\t\t,cureentRowIndex = g.getCurrentRowIndex()\r\n\t\t\t\t,cureentRowData = g.getCurrentRowData()\r\n\t\t\t\t,isSelectedRow = g.isSelectedRow(cureentRowIndex);\r\n\t\t\tif(cureentRowIndex == -1){\r\n\t\t\t\treturn;\t\t\t\t\r\n\t\t\t}\r\n\t\t\tif(isSelectedRow){\r\n\t\t\t\tg.unselectRow(cureentRowIndex);\r\n\t\t\t\tthis._setBySelections();\r\n\t\t\t}else{\r\n\t\t\t\tg.selectRow(cureentRowIndex);\r\n\t\t\t\tthis._setBySelections();\r\n\t\t\t}\r\n\t\t},\r\n\t\t/**\r\n\t\t * 定位上一个节点\r\n\t\t */\r\n\t\t_keyPrevNode: function(e){\r\n\t\t\te.preventDefault();\r\n\t\t\tthis._grid.prevRow();\r\n\t\t\tthis._grid.locateCurrent();\r\n\t\t},\r\n\t\t/**\r\n\t\t * 定位下一个节点\r\n\t\t */\r\n\t\t_keyNextNode: function(e){\r\n\t\t\te.preventDefault();\r\n\t\t\tthis._grid.nextRow();\r\n\t\t\tthis._grid.locateCurrent();\r\n\t\t},\r\n\t\t/**\r\n\t\t * 上一页\r\n\t\t */\r\n\t\t_keyPrevPage: function(e){\r\n\t\t\te.preventDefault();\r\n\t\t\tthis._grid.prevPage();\r\n\t\t},\r\n\t\t/**\r\n\t\t * 下一页\r\n\t\t */\r\n\t\t_keyNextPage: function(e){\r\n\t\t\te.preventDefault();\r\n\t\t\tthis._grid.nextPage();\r\n\t\t},\r\n\t\t/**\r\n\t\t * 根据输入内容进行延迟联想\r\n\t\t */\r\n\t\tsuggest: function(){\r\n\t\t\tif(!this.setting.search){\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\t//如果联想面板不是打开状态，则打开渲染。否则只进行联想\r\n\t\t\tif(!this._mainDivIsVisiable()){\r\n\t\t\t\tthis.showPanel();\r\n\t\t\t}\r\n\t\t\t//保持延迟时间内只触发一次联想操作\r\n\t\t\tclearTimeout(this.timeout);\r\n\t\t\tvar that = this;\r\n\t\t\tthis.timeout = \r\n\t\t\t\tsetTimeout(function(){\r\n\t\t\t\t\tthat._suggestFunc();\r\n\t\t\t\t},this.setting.lazy);\r\n\t\t},\r\n\t\t/**\r\n\t\t * 根据输入的值进行联想\r\n\t\t * \t保持联想面板打开状态\r\n\t\t */\r\n\t\t_suggestFunc: function(){\r\n\t\t\tif(this._preventSuggest()){\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tvar key = this.getText();\r\n\t\t\tif(this._grid.$pagers && this._grid.$pagers.length > 0){\r\n\t\t\t\tthis._suggestByRemote(key);\r\n\t\t\t}else{\r\n\t\t\t\tthis._suggestByLocal(key);\r\n\t\t\t}\r\n\t\t},\r\n\t\t/**\r\n\t\t * 还原数据\r\n\t\t */\r\n\t\t_backDataSource: function(){\r\n\t\t\tif(!this.setting.search){\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tif(!this.isSuggestData){\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tif(this._grid.$pagers && this._grid.$pagers.length > 0){\r\n\t\t\t\tthis._suggestByRemote('');\r\n\t\t\t}else{\r\n\t\t\t\tthis._suggestByLocal('');\r\n\t\t\t}\r\n\t\t\tthis.isSuggestData = false;\r\n\t\t},\r\n\t\t/**\r\n\t\t * 阻止联想事件\r\n\t\t * 1、当联想的关键字与上次联想的相同\r\n\t\t * 2、当上次联想为空 且这次的关键字以上次的关键字开头\r\n\t\t * @returns true 进行阻止\r\n\t\t */\r\n\t\t_preventSuggest: function(){\r\n\t\t\tvar key = this.getText()\r\n\t\t\t\t,items = this._grid.getData()[this._grid.setting.jsonReader.rows];\r\n\t\t\tif(this.prevKey == key){\r\n\t\t\t\treturn true;\r\n\t\t\t}else if(this.prevKey && key.length >= this.prevKey.length\r\n\t\t\t\t\t&& key.indexOf(this.prevKey) == 0\r\n\t\t\t\t\t&& (items == undefined || items.length == 0)){\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\t\t\tthis.prevKey = key;\r\n\t\t\treturn false;\r\n\t\t},\r\n\t\t/**\r\n\t\t * 根据远程设置地址进行联想\r\n\t\t */\r\n\t\t_suggestByRemote: function(key){\r\n\t\t\tvar url = this.setting.url;\r\n\t\t\tif(url){\r\n\t\t\t\tvar parameter = this.getParameter();\r\n\t\t\t\tif(parameter){\r\n\t\t\t\t\tparameter._key = key;\r\n\t\t\t\t}else{\r\n\t\t\t\t\tparameter = {_key: key};\r\n\t\t\t\t}\r\n\t\t\t\tthis.isSuggestData = true;\r\n\t\t\t\tparameter.suggestfield = this.setting.suggestfield;\r\n\t\t\t\tthis._grid.setParameter(parameter);\r\n\t\t\t\tthis._grid.load();\r\n\t\t\t}\r\n\t\t},\r\n\t\t/**\r\n\t\t * 根据本地数据源进行匹配\r\n\t\t * 1、如果存在本地数据源则直接进行匹配\r\n\t\t * 2、如果不存在，本地数据源，则根据suggest资源地址初始化数据源后，再进行匹配\r\n\t\t */\r\n\t\t_suggestByLocal: function(key){\r\n\t\t\tthis._cachePageData();\r\n\t\t\tvar data = this._filterByKey(key);\r\n\t\t\tthis.isSuggestData = true;\r\n\t\t\tthis._grid.loadData(data);\r\n\t\t},\r\n\t\t/**\r\n\t\t * 将当前页面的数据当做数据源\r\n\t\t */\r\n\t\t_cachePageData: function(){\r\n\t\t\tif(!this.dataSource){\r\n\t\t\t\tthis.dataSource = this._grid.getData()[this._grid.setting.jsonReader.rows];\r\n\t\t\t}\r\n\t\t},\r\n\t\t/**\r\n\t\t * 根据数据源按照key模糊匹配节点，并设置联想项\r\n\t\t * @param data 节点数据源数组\r\n\t\t * @param key 匹配关键字\r\n\t\t * @returns {Array} 匹配的节点数组\r\n\t\t */\r\n\t\t_filterByKey: function(key){\r\n\t\t\tvar data = this.dataSource\r\n\t\t\t\t,upKey = key.toUpperCase()\r\n\t\t\t\t,field = this.setting.suggestfield\r\n\t\t\t\t,result = [];\r\n\t\t\tvar fs = field.split(',');\r\n\t\t\tif(fs.length == 1){\r\n\t\t\t\tfs = fs[0];\r\n\t\t\t\tfor(var i = 0; i < data.length; i++){\r\n\t\t\t\t\tvar t = data[i][fs].toUpperCase();\r\n\t\t\t\t\tif(t.indexOf(upKey) != -1)\r\n\t\t\t\t\t\tresult.push(data[i]);\r\n\t\t\t\t}\r\n\t\t\t}else{\r\n\t\t\t\tfor(var i = 0; i < data.length; i++){\r\n\t\t\t\t\tfor ( var j = 0; j < fs.length; j++) {\r\n\t\t\t\t\t\tvar t = data[i][fs[j]].toUpperCase();\t\t\t\t\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\tif(t.indexOf(upKey) != -1){\r\n\t\t\t\t\t\t\tresult.push(data[i]);\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn result;\r\n\t\t},\r\n\t\t/**\r\n\t\t * 显示下拉面板\r\n\t\t * @todo 初始化一次网格\r\n\t\t * @todo 根据隐藏值渲染选择项\r\n\t\t * @todo 显示面板，根据面板内容进行面板位置的调整\r\n\t\t * @example $('#demo').combogrid('showPanel');\r\n\t\t * @memberof comboGrid-class\r\n\t\t * @instance\r\n\t\t */\r\n\t\tshowPanel: function(){\r\n\t\t\tthis._showPanel(function(){\r\n\t\t\t\tthis._initGrid();\r\n\t\t\t\tthis._rendSelectedItems();\r\n\t\t\t\tthis._backDataSource();\r\n\t\t\t});\r\n\t\t},\r\n\t\t/**\r\n\t\t * 初始化网格\r\n\t\t */\r\n\t\t_initGrid: function(){\r\n\t\t\tif(!this._grid){\r\n\t\t\t\tvar s = this.setting\r\n\t\t\t\t\t,that = this;\r\n\t\t\t\tif(!this.option){\r\n\t\t\t\t\ts.innerGrid = $.extend({}, Options.appDefaults.Grid, Options.appDefaults.Combogrid.Grid, s);\r\n\t\t\t\t}else{\r\n\t\t\t\t\ts.innerGrid = $.extend({}, Options.appDefaults.Grid, Options.appDefaults.Combogrid.Grid, s, this.option);\r\n\t\t\t\t}\r\n\t\t\t\tdelete s.innerGrid.width;\r\n\t\t\t\ts.innerGrid.height = s.panelheight;\r\n\t\t\t\tif(!isNaN(s.customPanelHeight)){\r\n\t\t\t\t\ts.innerGrid.height -= s.customPanelHeight;\r\n\t\t\t\t}\r\n\t\t\t\ts.innerGrid.beforeSelect = function(rowData, rowIndex){\r\n\t\t\t\t\t/**\r\n\t\t\t\t\t * 节点选择前事件，并返回一个值，当为false时取消选择操作\r\n\t\t\t\t\t * @event comboGrid-class#beforeSelected\r\n\t\t\t\t\t * @param {Object} rowData 被选择的行数据\r\n\t\t\t\t\t * @param {Number} rowIndex 被选择的行号\r\n\t\t\t\t\t * @returns {Boolean} boolean 返回值为false 取消选择\r\n\t\t\t\t\t */\r\n\t\t\t\t\treturn that._activeItemEvent('beforeSelected', rowData, rowIndex);\r\n\t\t\t\t};\r\n\t\t\t\ts.innerGrid.onSelect = function(rowData, rowIndex){\r\n\t\t\t\t\tthat._setBySelections();\r\n\t\t\t\t\t/**\r\n\t\t\t\t\t * 节点选择后事件\r\n\t\t\t\t\t * @event comboGrid-class#afterSelected\r\n\t\t\t\t\t * @param {Object} rowData 被选择的行数据\r\n\t\t\t\t\t * @param {Number} rowIndex 被选择的行号\r\n\t\t\t\t\t */\r\n\t\t\t\t\tthat._activeItemEvent('afterSelected', rowData, rowIndex);\r\n\t\t\t\t};\r\n\t\t\t\ts.innerGrid.afterDataRender = function(){\r\n\t\t\t\t\tthat._resetPanelWidth(this.$xProxyScroll);\r\n\t\t\t\t\tthat.place();\r\n\t\t\t\t\tthat._rendSelectedItems();\r\n\t\t\t\t\tthat._locateRowAfterRender();\r\n\t\t\t\t\tthat._afterDataRender();\r\n\t\t\t\t};\r\n\t\t\t\ts.innerGrid.queryParams = this.getParameter();\r\n\t\t\t\ts.innerGrid.columnManager = false;\r\n\t\t\t\tthis.lastParam = s.innerGrid.queryParams;\r\n\t\t\t\tthis.$grid.grid(s.innerGrid);\r\n\t\t\t\tthis._grid = this.$grid.data('grid');\r\n\t\t\t\tthis._grid._combogrid = this;\r\n\t\t\t\tthis.onceRender = true;\r\n\t\t\t\tthis._setMinSize();\r\n\t\t\t}else{\r\n\t\t\t\tthis._initData();\r\n\t\t\t}\r\n\t\t},\r\n\t\t/**\r\n\t\t * 设置下拉面板的最小宽度和高度\r\n\t\t */\r\n\t\t_setMinSize: function(){\r\n\t\t\tvar css = {}\r\n\t\t\t\t,s = this.setting\r\n\t\t\t\t,minWidth = 0\r\n\t\t\t\t,minHeight = 30;\r\n\t\t\tif(this._grid.setting.pager == 'down'){\r\n\t\t\t\tminWidth += 90;\r\n\t\t\t\tminWidth += this._grid.$pagerDown.find('.pager-infos').outerWidth();\r\n\t\t\t\tminWidth += this._grid.$pagerDown.find('.pager-tool').outerWidth();\r\n\t\t\t\tminHeight += this._grid.$pagerDown.outerHeight();\r\n\t\t\t}else if(this._grid.setting.pager == 'up'){\r\n\t\t\t\tminWidth += this._grid.$title.find('>span').outerWidth();\r\n\t\t\t\tminWidth += this._grid.$title.find('.grid-pager').outerWidth();\r\n\t\t\t}else{\r\n\t\t\t\tminWidth = this.$element.outerWidth();\r\n\t\t\t}\r\n\t\t\tif(!isNaN(s.customPanelHeight)){\r\n\t\t\t\tminHeight += s.customPanelHeight;\r\n\t\t\t}\r\n\t\t\tminHeight += this._grid.$title.outerHeight();\r\n\t\t\tminHeight += this._grid.$tableHeader.outerHeight();\r\n\t\t\tminHeight += this._grid.$tableFooter.outerHeight();\r\n\t\t\tcss['min-width'] = minWidth;\r\n\t\t\tcss['min-height'] = minHeight;\r\n\t\t\tthis.$dropPanel.css(css);\r\n\t\t},\r\n\t\t/**\r\n\t\t * 数据渲染完成后 对当前行的设置和定位\r\n\t\t */\r\n\t\t_locateRowAfterRender: function(){\r\n\t\t\tvar grid = this._grid\r\n\t\t\t\t,selectedRowIndex = grid.getSelectedRowIndex();\r\n\t\t\tif(selectedRowIndex >= 0){\r\n\t\t\t\tgrid.setCurrentRow(selectedRowIndex);\r\n\t\t\t\tgrid.locateRow(selectedRowIndex);\r\n\t\t\t}else{\r\n\t\t\t\tgrid.setCurrentRow(0);\r\n\t\t\t\tgrid.locateRow(0);\r\n\t\t\t}\r\n\t\t},\r\n\t\t/**\r\n\t\t * 激活行点击事件 \r\n\t\t * @param rowData 行数据\r\n\t\t * @param rowIndex 行号\r\n\t\t * @returns {Boolean} false 结束点击事件\r\n\t\t */\r\n\t\t_activeItemEvent: function(eventName, rowData, rowIndex){\r\n\t\t\treturn this.trigger(eventName, rowData, rowIndex);\r\n\t\t},\r\n\t\t/**\r\n\t\t * <span class=\"type-signature static\">override</span>\r\n\t\t * 显示或隐藏下拉面板，该方法已绑定在组件的右边按钮中\r\n\t\t * @todo 判断当前面板是否可见：\r\n\t\t * @todo 1如果不可见，调用showPanel\r\n\t\t * @todo 2如果可见，则关闭面板\r\n\t\t * @see combo#togglePanel\r\n\t\t * @example $('#demo').combogrid('togglePanel');\r\n\t\t * @memberof comboGrid-class\r\n\t\t * @instance\r\n\t\t */\r\n\t\ttogglePanel: function(){\r\n\t\t\tif(this._mainDivIsVisiable()){\r\n\t\t\t\tthis.hidePanel();\r\n\t\t\t}else{\r\n\t\t\t\tthis.showPanel();\r\n\t\t\t}\r\n\t\t},\r\n\t\t/**\r\n\t\t * 获取下拉网格的中的网格元素\r\n\t\t * @see combo#getTable\r\n\t\t * @example $('#demo').combogrid('getTable');\r\n\t\t * @memberof comboGrid-class\r\n\t\t * @instance\r\n\t\t */\r\n\t\tgetTable: function(){\r\n\t\t\treturn this.$grid;\r\n\t\t},\r\n\t\t/**\r\n\t\t * 根据网格的选中项进行设置值\r\n\t\t */\r\n\t\t_setBySelections: function(){\r\n\t\t\tvar rows = this._grid.getSelections();\r\n\t\t\tif(this.setting.multiple){\r\n\t\t\t\tthis._grid.nextRow();\r\n\t\t\t\tthis._grid.locateCurrent();\r\n\t\t\t}else{\r\n\t\t\t\trows = rows[0];\r\n\t\t\t\tif(rows){\r\n\t\t\t\t\tthis.hidePanel();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tthis.setSelectedNode(rows);\r\n\t\t},\r\n\t\t/**\r\n\t\t * 根据id值 设置网格的选中项\r\n\t\t */\r\n\t\t_rendSelectedItems: function(){\r\n\t\t\tthis._grid.unselectAll();\r\n\t\t\tvar valueStr = this.getValue();\r\n\t\t\tif(!valueStr){\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tvar vs = valueStr.split(',')\r\n\t\t\t\t,filter = {type: 'id'};\r\n\t\t\tfor ( var i = 0; i < vs.length; i++) {\r\n\t\t\t\tfilter.value = vs[i];\r\n\t\t\t\tthis._grid._renderRow(filter);\r\n\t\t\t}\r\n\t\t},\r\n\t\t/**\r\n\t\t * 结束拖动进行表格的高度自适应\r\n\t\t * 宽度自适应有don结构和css自动解决\r\n\t\t */\r\n\t\t_endResize: function(){\r\n\t\t\tvar s = this.setting;\r\n\t\t\tthis._grid.setting.height = this.$dropPanel.outerHeight();\r\n\t\t\tif(!isNaN(s.customPanelHeight)){\r\n\t\t\t\tthis._grid.setting.height -= s.customPanelHeight;\r\n\t\t\t}\r\n\t\t\tthis._grid._fixHeight();\r\n\t\t}\r\n\t});\r\n\r\n\t$.fn.combogrid = function (option, value) {\r\n\t\tvar methodReturn = undefined\r\n\t\t\t,args = arguments\r\n\t\t\t,componentName = 'combogrid';\r\n\t\tthis.each(function () {\r\n\t\t\tvar $this = $(this);\r\n\t\t\tif(!$this.is('input')){\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\t\t\tvar component = App.getComponent($this, componentName);\r\n\t\t\tif(typeof option === 'string'){\r\n\t\t\t\ttry{\r\n\t\t\t\t\tvar methodArgs = Array.prototype.slice.call(args, 1);\r\n\t\t\t\t\tmethodReturn = App.componentMethodApply(component, option, methodArgs);\r\n\t\t\t\t}catch(e){\r\n\t\t\t\t\tApp.throwCompMethodError($this, componentName, option, e);\r\n\t\t\t\t}\r\n\t\t\t}else{\r\n\t\t\t\tif(!component){\r\n\t\t\t\t\tcomponent = new Combogrid(this, option);\r\n\t\t\t\t\t$this.data(componentName, component);\r\n\t\t\t\t}else{\r\n\t\t\t\t\tApp.throwCompInitError($this, componentName);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\t\treturn methodReturn;\r\n\t};\r\n\treturn Combogrid;\r\n});\n",
    "/**\r\n * 下拉树控件---继承Combo\r\n * @author Mr.T\r\n */\r\ndefine('app/widgets/form/app-comboztree',['app/core/app-jquery', 'app/core/app-core', 'app/data/app-ajax', 'app/widgets/form/app-combo',\r\n        'app/core/app-options', 'jquery/jquery.ztree', 'app/widgets/form/app-suggest'],\r\n        function($, App, AppAjax, Combo, Options, Ztree, Suggest) {\r\n\t'use strict';\r\n\t/**\r\n\t * @class \r\n\t * @classdesc 下拉树\r\n\t * <span class=\"type-signature static\">extend</span>combo\r\n\t * @see {@link combo-class} comboztree继承至combo\r\n\t * @name comboztree-class\r\n\t * @desc 下拉树的初始化方法\r\n\t * @param {DOMElement} input 要渲染的input组件\r\n\t * @param {Object} options 组件的选项设置 \r\n\t * @author Mr.T\r\n\t * @example &lt;input &#9;class=\"app-comboztree\"\r\n\t * &#9;_options=\"{\r\n\t * &#9;&#9;action: 'html/example/app-input/data/data.valueAndText',\r\n\t * &#9;&#9;\r\n\t * &#9;}\"\r\n\t * />\r\n\t * @example $('#demo').comboztree({\r\n\t * &#9;action: 'html/example/app-input/data/data.valueAndText'\r\n\t * });\r\n\t */\r\n\tvar Comboztree = Combo.extend({\r\n\t\tinitialize: function(input, options) {\r\n\t\t\tif(!options){\r\n\t\t\t\toptions = {};\r\n\t\t\t}\r\n\t\t\toptions._ = Options.appDefaults.Comboztree;\r\n\t\t\tComboztree.superclass.initialize.call(this, input, options);\r\n\t\t\tthis._init();\r\n\t\t},\r\n\t\t/**\r\n\t\t * 初始化\r\n\t\t */\r\n\t\t_init: function(){\r\n\t\t\tthis._initOptions();\r\n\t\t\tthis._initPanelContent();\r\n\t\t\tthis._eventRegister();\r\n\t\t\tif(this.setting.usesuggest){\r\n\t\t\t\tthis._suggest = new Suggest(this.$input, this.options);\r\n\t\t\t\tthis._suggest.context = this;\r\n\t\t\t}\r\n\t\t\tthis.$input.data('context', this);\r\n\t\t},\r\n\t\t/**\r\n\t\t * 事件注册器\r\n\t\t */\r\n\t\t_eventRegister: function(){\r\n\t\t\tvar s = this.setting;\r\n\t\t\tif($.isFunction(s.afterSelected)){\r\n\t\t\t\tthis.on('afterSelected', s.afterSelected);\r\n\t\t\t}\r\n\t\t\tif($.isFunction(s.beforeSelected)){\r\n\t\t\t\tthis.on('beforeSelected', s.beforeSelected);\r\n\t\t\t}\r\n\t\t},\r\n\t\t/**\r\n\t\t * 初始化参数\r\n\t\t */\r\n\t\t_initOptions: function(){\r\n\t\t\tvar setting = this.setting;\r\n\t\t\tif(setting.autoparam == null){\r\n\t\t\t\t//异步提交时，默认跟上的参数为隐藏值属性名+隐藏值\r\n\t\t\t\tsetting.autoparam = [setting.valuefield];\r\n\t\t\t}else{\r\n\t\t\t\tsetting.autoparam = setting.autoparam.split(',');\r\n\t\t\t}\r\n\t\t\tif(!setting.idfield){\r\n\t\t\t\tsetting.idfield = setting.valuefield;\r\n\t\t\t}\r\n\t\t},\r\n\t\t/**\r\n\t\t * 初始化下拉内容\r\n\t\t */\r\n\t\t_initPanelContent:function(){\r\n\t\t\tvar $template = $('<div class=\"combo-ztree\">' +\r\n\t\t\t\t\t\t\t  \t'<ul id=\"' + App.uuid('app_ztree_') + '\" class=\"ztree\"></ul>' +\t\t\r\n\t\t\t\t\t\t\t  '</div>');\r\n\t\t\t$template.appendTo(this.$dropPanelMain);\r\n\t\t\tthis.$ztreeDiv = $template.find('.combo-ztree');\r\n\t\t\tthis.$ztree = $template.find('ul');\r\n\t\t},\r\n\t\t/**\r\n\t\t * 按键导航事件\r\n\t\t */\r\n\t\t_keyManager: function(e){\r\n\t\t\tif(this._dealSysKey(e)){\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tvar keyCode = e.keyCode\r\n\t\t\t\t,s = this.setting;\r\n\t\t\tif(this._isSuggestContext()){//联想框主控 则返回\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tif(this._mainDivIsVisiable()){\r\n\t\t\t\tthis._keyForVisiblePanel(e);\r\n\t\t\t}else{\r\n\t\t\t\tthis._keyForHiddenPanel(e);\r\n\t\t\t}\r\n\t\t\tthis.focus();\r\n\t\t},\r\n\t\t/**\r\n\t\t * 面板可见状态下的按键事件处理\r\n\t\t */\r\n\t\t_keyForVisiblePanel: function(e){\r\n\t\t\tvar keyCode = e.keyCode\r\n\t\t\t\t,s = this.setting;\r\n\t\t\te.stopPropagation();\r\n\t\t\tif(App.containKeyCode(e, s.keyNextNode)){\r\n\t\t\t\tthis._keyNextNode(e);\r\n\t\t\t}else if(App.containKeyCode(e, s.keyPrevNode)){\r\n\t\t\t\tthis._keyPrevNode(e);\r\n\t\t\t}else if(App.containKeyCode(e, s.keyPickNode)){\r\n\t\t\t\tthis._keyPickNode(e);\r\n\t\t\t}else if(App.containKeyCode(e, s.keyParentNode)){\r\n\t\t\t\tthis._keyParentNode(e);\r\n\t\t\t}else if(App.containKeyCode(e, s.keyChildNode)){\r\n\t\t\t\tthis._keyChildNode(e);\r\n\t\t\t}else if(App.containKeyCode(e, s.keyHidePanel)){\r\n\t\t\t\tthis._keyHidePanel(e);\r\n\t\t\t}else if(this._keyFilterSuggest(e)){\r\n\t\t\t\tthis.suggest();\r\n\t\t\t}\r\n\t\t},\r\n\t\t/**\r\n\t\t * 面板不可见状态下的按键事件处理\r\n\t\t */\r\n\t\t_keyForHiddenPanel: function(e){\r\n\t\t\tvar keyCode = e.keyCode\r\n\t\t\t\t,s = this.setting;\r\n\t\t\tif(App.containKeyCode(e, s.keyShowPanel)){\r\n\t\t\t\tthis._keyShowPanel(e);\r\n\t\t\t}else if(this._isKeyCursorPos(keyCode)){\r\n\t\t\t\tthis._keyCursorPos(e);\r\n\t\t\t}else if(this._keyFilterSuggest(e)){\r\n\t\t\t\tthis.suggest();\r\n\t\t\t}\r\n\t\t},\r\n\t\t/**\r\n\t\t * 定位上一个节点\r\n\t\t * \t1、当同级只有一个节点时，上按键定位到父节点\r\n\t\t */\r\n\t\t_keyPrevNode: function(e){\r\n\t\t\te.preventDefault();\r\n\t\t\tthis._stopSuggest(true);\r\n\t\t\tvar c = this._getCurrentNode();\r\n\t\t\tif(c){\r\n\t\t\t\tvar len = this._z.getNodesByParam('level', c.level, c.getParentNode()).length;\r\n\t\t\t\tif(len <= 1){\r\n\t\t\t\t\tthis._switchParentNode(c);\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tthis._switchPrevNode(c);\r\n\t\t},\r\n\t\t/**\r\n\t\t * 定位到下一个节点\r\n\t\t * 特例：当同级只有一个节点:\r\n\t\t * \t1、本身为叶子节点时，下按键定位到父节点\r\n\t\t * \t2、本身为父节点时，下按键定位到子节点\r\n\t\t */\r\n\t\t_keyNextNode: function(e){\r\n\t\t\te.preventDefault();\r\n\t\t\tthis._stopSuggest(true);\r\n\t\t\tif(!this._mainDivIsVisiable()){\r\n\t\t\t\tthis.showPanel();\r\n\t\t\t}\r\n\t\t\tif(!this._z){\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tvar c = this._getCurrentNode();\r\n\t\t\tif(c){\r\n\t\t\t\tvar len = this._z.getNodesByParam('level', c.level, c.getParentNode()).length;\r\n\t\t\t\tif(len <= 1){\r\n\t\t\t\t\tif(c.isParent){\r\n\t\t\t\t\t\tthis._switchChildNode(c);\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\tthis._switchParentNode(c);\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tthis._switchNextNode(c);\r\n\t\t},\r\n\t\t/**\r\n\t\t * 定位到父节点\r\n\t\t *  特例：当前节点不存在父节点，则定位到上一个节点\r\n\t\t */\r\n\t\t_keyParentNode: function(e){\r\n\t\t\te.preventDefault();\r\n\t\t\tthis._stopSuggest(true);\r\n\t\t\tvar c = this._getCurrentNode();\r\n\t\t\tif(c && c.getParentNode()){\r\n\t\t\t\tthis._switchParentNode(c);\r\n\t\t\t}else{\r\n\t\t\t\tthis._switchPrevNode(c);\r\n\t\t\t}\r\n\t\t},\r\n\t\t/**\r\n\t\t * 定位到第一个子节点\r\n\t\t *  特例：当前节点节点不是父节点，则定位到下一个节点\r\n\t\t */\r\n\t\t_keyChildNode: function(e){\r\n\t\t\te.preventDefault();\r\n\t\t\tthis._stopSuggest(true);\r\n\t\t\tvar c = this._z.getSelectedNodes()[0];\r\n\t\t\tif(c && c.isParent){\r\n\t\t\t\tthis._switchChildNode(c);\r\n\t\t\t}else{\r\n\t\t\t\tthis._switchNextNode(c);\r\n\t\t\t}\r\n\t\t},\r\n\t\t/**\r\n\t\t * 选中一个节点\r\n\t\t */\r\n\t\t_keyPickNode: function(e){\r\n\t\t\te.preventDefault();\r\n\t\t\tthis._stopSuggest(true);\r\n\t\t\tvar node = this._z.getSelectedNodes()[0];\r\n\t\t\tif(!node){\r\n\t\t\t\treturn\r\n\t\t\t}\r\n\t\t\tthis._onSelect(node);\r\n\t\t},\r\n\t\t/**\r\n\t\t * 获取当前选中节点\r\n\t\t */\r\n\t\t_getCurrentNode: function(){\r\n\t\t\treturn this._z.getSelectedNodes()[0];\r\n\t\t},\r\n\t\t/**\r\n\t\t * 选中前一个节点\r\n\t\t * @param c 当前选中节点\r\n\t\t */\r\n\t\t_switchPrevNode: function(c){\r\n\t\t\tvar n = null;\r\n\t\t\tif(c){\r\n\t\t\t\tn = c.getPreNode();\r\n\t\t\t\tif(n == undefined){\r\n\t\t\t\t\tvar ns = this._z.getNodesByParam('level', c.level, c.getParentNode());\r\n\t\t\t\t\tif(ns.length > 0){\r\n\t\t\t\t\t\tn = ns[ns.length-1];\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}else{\r\n\t\t\t\tvar ns = this._z.getNodes();\r\n\t\t\t\tif(ns.length > 0){\r\n\t\t\t\t\tn = ns[ns.length-1];\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tthis._focusCurrentNode(c, n);\r\n\t\t},\r\n\t\t/**\r\n\t\t * 选中后一个节点\r\n\t\t * @param c 当前选中节点\r\n\t\t */\r\n\t\t_switchNextNode: function(c){\r\n\t\t\tvar n = null;\r\n\t\t\tif(c){\r\n\t\t\t\tn = c.getNextNode();\r\n\t\t\t\tif(n == undefined){\r\n\t\t\t\t\tvar ns = this._z.getNodesByParam('level', c.level, c.getParentNode());\r\n\t\t\t\t\tif(ns.length > 0){\r\n\t\t\t\t\t\tn = ns[0];\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}else{\r\n\t\t\t\tvar ns = this._z.getNodes();\r\n\t\t\t\tif(ns.length > 0){\r\n\t\t\t\t\tn = ns[0];\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tthis._focusCurrentNode(c, n);\r\n\t\t},\r\n\t\t/**\r\n\t\t * 选中父节点\r\n\t\t * @param c 当前选中节点\r\n\t\t */\r\n\t\t_switchParentNode: function(c){\r\n\t\t\tvar n = null;\r\n\t\t\tif(!c){\r\n\t\t\t\tvar ns = this._z.getNodes();\r\n\t\t\t\tif(ns.length > 0){\r\n\t\t\t\t\tc = ns[0];\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif(c){\r\n\t\t\t\tn = c.getParentNode();\r\n\t\t\t}\r\n\t\t\tif(n){\r\n\t\t\t\tthis._z.expandNode(n, false, false, false);\r\n\t\t\t}\r\n\t\t\tthis._focusCurrentNode(c, n);\r\n\t\t},\r\n\t\t/**\r\n\t\t * 选中子节点\r\n\t\t * @param c 当前选中节点\r\n\t\t */\r\n\t\t_switchChildNode: function(c){\r\n\t\t\tvar n = null;\r\n\t\t\tif(!c){\r\n\t\t\t\tvar ns = this._z.getNodes();\r\n\t\t\t\tif(ns.length > 0){\r\n\t\t\t\t\tc = ns[0];\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif(c && c.isParent){\r\n\t\t\t\tthis._z.expandNode(c, true, false, false, true);\r\n\t\t\t\tvar ns = this._z.getNodesByParam('level', c.level + 1, c);\r\n\t\t\t\tif(ns.length > 0){\r\n\t\t\t\t\tn = ns[0];\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tthis._focusCurrentNode(c, n);\r\n\t\t},\r\n\t\t/**\r\n\t\t * 当下一个节点存在，切换到下一个节点\r\n\t\t * @param c 当前选中节点\r\n\t\t * @param n 下一个选中节点\r\n\t\t */\r\n\t\t_focusCurrentNode: function(c,n){\r\n\t\t\tif(n){\r\n\t\t\t\tthis._z.cancelSelectedNode(c);\r\n\t\t\t\tthis._z.selectNode(n);\r\n\t\t\t\tthis.focus();\r\n\t\t\t}\r\n\t\t},\r\n\t\t/**\r\n\t\t * 其他按键按下\r\n\t\t */\r\n\t\t_otherKeyDown: function(){\r\n\t\t\tvar suggest = this.$element.data('suggest');\r\n\t\t\tif(suggest){\r\n\t\t\t\tsuggest.stopKeyEvent = false;\r\n\t\t\t}\r\n\t\t\tthis.hidePanel();\r\n\t\t},\r\n\t\t/**\r\n\t\t * <span class=\"type-signature static\">override</span>\r\n\t\t * 显示或隐藏下拉面板，该方法已绑定在组件的右边按钮中\r\n\t\t * @todo 判断当前面板是否可见\r\n\t\t * @todo 1如果不可见，调用showPanel\r\n\t\t * @todo 2如果可见，则关闭面板\r\n\r\n\t\t * @example $('#demo').comboztree('togglePanel');\r\n\t\t * @memberof comboztree-class\r\n\t\t * @instance\r\n\t\t */\r\n\t\ttogglePanel: function(){\r\n\t\t\tif(this._mainDivIsVisiable()){\r\n\t\t\t\tthis.hidePanel();\r\n\t\t\t}else{\r\n\t\t\t\tthis.showPanel();\r\n\t\t\t}\r\n\t\t},\r\n\t\t/**\r\n\t\t * 显示下拉面板\r\n\t\t * @todo 填充下拉面板内容\r\n\t\t * @todo 根据隐藏值渲染选择项\r\n\t\t * @todo 显示面板，根据面板内容进行面板位置的调整\r\n\t\t * @example $('#demo').comboztree('showPanel');\r\n\t\t * @memberof comboztree-class\r\n\t\t * @instance\r\n\t\t */\r\n\t\tshowPanel: function(){\r\n\t\t\tif(this._suggest){\r\n\t\t\t\tthis.$dropPanel.append(this.$dropPanelCustom);\r\n\t\t\t}\r\n\t\t\tthis._showPanel(function(){\r\n\t\t\t\tthis._initData();\r\n\t\t\t\tthis._rendSelectedItems();\r\n\t\t\t\tthis.focus();\r\n\t\t\t});\r\n\t\t},\r\n\t\t/**\r\n\t\t * 载入数据，并根据数据渲染下拉面板\r\n\t\t * @param {Array.<Node>} data 载入的数据列表\r\n\t\t * @todo 渲染下拉框中的ztree\r\n\t\t * @todo 根据隐藏值渲染ztree节点选中状态\r\n\t\t * @todo 如果下拉面板为打开状态，则重新打开面板（由于面板内容改变，可能导致面板高度改变，用于矫正位置）\r\n\t\t * @example $('#demo').comboztree('loadData',[\r\n\t\t * &#9;{value:1, text:\"节点 1\", open:true, noR:true,\r\n\t\t * &#9;&#9;children:[\r\n\t\t * &#9;&#9;&#9;{value:11, text:\"节点 11\", noR:true},\r\n\t\t * &#9;&#9;&#9;{value:12, text:\"节点 12\", noR:true}\r\n\t\t * &#9;&#9;]\r\n\t\t * &#9;},\r\n\t\t * &#9;{value:2, text:\"节点 2\", open:true,\r\n\t\t * &#9;&#9;children:[\r\n\t\t * &#9;&#9;&#9;{value:21, text:\"节点 21\"},\r\n\t\t * &#9;&#9;&#9;{value:22, text:\"节点 22\"},\r\n\t\t * &#9;&#9;&#9;{value:23, text:\"节点 23\"},\r\n\t\t * &#9;&#9;&#9;{value:24, text:\"节点 24\"}\r\n\t\t * &#9;&#9;]\r\n\t\t * &#9;},\r\n\t\t * &#9;{value:3, text:\"节点 3\", open:true,\r\n\t\t * &#9;&#9;children:[\r\n\t\t * &#9;&#9;&#9;{value:31, text:\"节点 31\"},\r\n\t\t * &#9;&#9;&#9;{value:32, text:\"节点 32\"},\r\n\t\t * &#9;&#9;&#9;{value:33, text:\"节点 33\"},\r\n\t\t * &#9;&#9;&#9;{value:34, text:\"节点 34\"}\r\n\t\t * &#9;&#9;]\r\n\t\t * &#9;}\r\n\t\t * ]);\r\n\t\t * @memberof comboztree-class\r\n\t\t * @instance\r\n\t\t */\r\n\t\tloadData: function(data){\r\n\t\t\tthis.setting.data = data;\r\n\t\t\tif(this._suggest){\r\n\t\t\t\tthis._suggest.setting.data = data;\r\n\t\t\t\tif(this._suggest.isSuggesting()){\r\n\t\t\t\t\tthis._suggest.refreshSuggest();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tthis._renderData();\r\n\t\t\t//内容填充后，显示面板，重新定位\r\n\t\t\tif(this._mainDivIsVisiable()){\r\n\t\t\t\tthis.place();\r\n\t\t\t}\r\n\t\t},\r\n\t\t/**\r\n\t\t * 设置请求远程数据时的查询参数\r\n\t\t * @param {object} param 查询参数\r\n\t\t * @example $('#demo').comboztree('setParameter',{year:2014});\r\n\t\t * @memberof comboztree-class\r\n\t\t * @instance\r\n\t\t */\r\n\t\tsetParameter: function(param){\r\n\t\t\tif(!param){\r\n\t\t\t\tparam = {};\r\n\t\t\t}\r\n\t\t\tthis.$input.data('_parameter', param);\r\n\t\t\tthis._injectParam();\r\n\t\t},\r\n\t\t/**\r\n\t\t * 注入查询参数\r\n\t\t */\r\n\t\t_injectParam: function(){\r\n\t\t\tvar param = this.getParameter();\r\n\t\t\tif(this._z && param){\r\n\t\t\t\tif(this._z.setting.async.otherParam){\r\n\t\t\t\t\t$.extend(this._z.setting.async.otherParam, param);\r\n\t\t\t\t}else{\r\n\t\t\t\t\tthis._z.setting.async.otherParam = param;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\t/**\r\n\t\t * 渲染数据\r\n\t\t */\r\n\t\t_renderData: function(){\r\n\t\t\tthis._resetZtree();\r\n\t\t\tthis._resetPanelWidth();\r\n\t\t\tthis._rendSelectedItems();\r\n\t\t\tthis._afterDataRender();\r\n\t\t},\r\n\t\t/**\r\n\t\t * 渲染ztree\r\n\t\t */\r\n\t\t_resetZtree: function(){\r\n\t\t\tvar data = this.setting.data == undefined ? [] : this.setting.data;\r\n\t\t\tif(this._z){\r\n\t\t\t\tthis._z.destroy();\r\n\t\t\t}\r\n\t\t\tif(data.length == 0){\r\n\t\t\t\tvar root = {};\r\n\t\t\t\troot[this.setting.valuefield] = '__ROOTID__';\r\n\t\t\t\troot[this.setting.textfield] = '无对应结果';\r\n\t\t\t\t$.fn.zTree.init(this.$ztree, this._getZtreeSetting(), [root]);\r\n\t\t\t}else{\r\n\t\t\t\t$.fn.zTree.init(this.$ztree, this._getZtreeSetting(), data);\r\n\t\t\t\tstoreData.call(this, data);\r\n\t\t\t}\r\n\t\t\tthis._z = $.fn.zTree.getZTreeObj(this.$ztree.attr('id'));\r\n\t\t\tthis._injectParam();\r\n\t\t\tif(data.length == 0){\r\n\t\t\t\tthis._z.refresh();\r\n\t\t\t\tthis.$dropPanelEmpty.show();\r\n\t\t\t}else{\r\n\t\t\t\tthis.$dropPanelEmpty.hide();\r\n\t\t\t}\r\n\t\t},\r\n\t\t/**\r\n\t\t * 生成ztree的设置\r\n\t\t */\r\n\t\t_getZtreeSetting: function(){\r\n\t\t\tvar s = this.setting;\r\n\t\t\tvar setting = {\r\n\t\t\t\tview: {\r\n\t\t\t\t\tselectedMulti: false,\r\n\t\t\t\t\tdblClickExpand: false,\r\n\t\t\t\t\tshowLine: false,\r\n\t\t\t\t\tshowIcon: s.showIcon,\r\n\t\t\t\t\tfontCss: function(treeId, treeNode) {\r\n\t\t\t\t\t\treturn (!!treeNode.highlight) ? {'color':'#A60000', 'font-weight':'bold'} : {'color':'#333', 'font-weight':'normal'};\r\n\t\t\t\t\t},\r\n\t\t\t\t\taddHoverDom: s.addHoverDom,\r\n\t\t\t\t\tremoveHoverDom: s.removeHoverDom,\r\n\t\t\t\t\taddDiyDom: s.addDiyDom\r\n\t\t\t\t},\r\n\t\t\t\tdata:{\r\n\t\t\t\t\tkey:{\r\n\t\t\t\t\t\tname: s.textfield\r\n\t\t\t\t\t},\r\n\t\t\t\t\tsimpleData: {\r\n\t\t\t\t\t\tenable: true,\r\n\t\t\t\t\t\tidKey: s.idfield,\r\n\t\t\t\t\t\tpIdKey: s.pidfield,\r\n\t\t\t\t\t\trootPId: s.rootpidvalue\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t};\r\n\t\t\tif(s.async){\r\n\t\t\t\tvar url = s.url;\r\n\t\t\t\tif(s.asyncUrl) \r\n\t\t\t\t\turl = s.asyncUrl;\r\n\t\t\t\tsetting.async = {\r\n\t\t\t\t\tenable: true,\r\n\t\t\t\t\turl: url,\r\n\t\t\t\t\tautoParam: s.autoparam,\r\n\t\t\t\t\totherParam: s.otherParam\r\n\t\t\t\t};\r\n\t\t\t}\r\n\t\t\tif(s.multiple){\r\n\t\t\t\tsetting.check = {enable:true};\r\n\t\t\t\tif(s.onlyleaf){\r\n\t\t\t\t\tsetting.check.chkboxType = {Y: '', N: ''};\r\n\t\t\t\t}\r\n\t\t\t\tif(s.checkBySelf){\r\n\t\t\t\t\tsetting.check.chkboxType = {Y: '', N: ''};\r\n\t\t\t\t}\r\n\t\t\t}else{\r\n\t\t\t\tsetting.selectedMulti = false;\r\n\t\t\t}\r\n\t\t\tsetting['callback'] = this._getZtreeCallback();\r\n\t\t\treturn setting;\r\n\t\t},\r\n\t\t/**\r\n\t\t * 生成ztree树的回调方法\r\n\t\t * @returns {} \r\n\t\t */\r\n\t\t_getZtreeCallback: function(){\r\n\t\t\tvar result = {}\r\n\t\t\t\t,that = this;\r\n\t\t\tresult.onClick = function(event, treeId, treeNode){\r\n\t\t\t\tthat._onSelect(treeNode);\r\n\t\t\t};\r\n\t\t\tresult.beforeCheck = function(treeId, treeNode){\r\n\t\t\t\tif(that.setting.onlyleaf && treeNode.isParent){\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}\r\n\t\t\t};\r\n\t\t\tresult.beforeClick = result.beforeCheck;\r\n\t\t\tresult.onCheck = function(event, treeId, treeNode){\r\n\t\t\t\tthat._onCheck(treeNode);\r\n\t\t\t};\r\n\t\t\tresult.onAsyncSuccess = function(event, treeId, treeNode, msg){\r\n\t\t\t\tthat._onAsyncSuccess(event, treeId, treeNode, msg);\r\n\t\t\t\tappendStoreData.call(that, msg);\r\n\t\t\t};\r\n\t\t\tresult.onExpand = function(event, treeId, treeNode){\r\n\t\t\t\tthat._onExpand(event, treeId, treeNode);\r\n\t\t\t\tthat.place();\r\n\t\t\t};\r\n\t\t\tresult.onCollapse = function(event, treeId, treeNode){\r\n\t\t\t\tthat.place();\r\n\t\t\t};\r\n\t\t\treturn result;\r\n\t\t},\r\n\t\t/**\r\n\t\t * ztree节点的选择事件\r\n\t\t * @param treeNode \r\n\t\t */\r\n\t\t_onSelect: function(treeNode){\r\n\t\t\tif(this.setting.multiple){\r\n\t\t\t\tif(treeNode.checked){\r\n\t\t\t\t\tthis._z.checkNode(treeNode, false, true);\r\n\t\t\t\t\tthis._setSelectedNodes();\r\n\t\t\t\t}else{\r\n\t\t\t\t\t/**\r\n\t\t\t\t\t * 节点选择前事件，并返回一个值，当为false时取消选择操作\r\n\t\t\t\t\t * @event comboztree-class#beforeSelected\r\n\t\t\t\t\t * @param {Node} node 被选择的节点\r\n\t\t\t\t\t * @returns {Boolean} boolean 返回值为false 取消选择\r\n\t\t\t\t\t */\r\n\t\t\t\t\tif(this.trigger('beforeSelected', treeNode) === false){\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tthis._z.checkNode(treeNode, true, true);\r\n\t\t\t\t\tthis._setSelectedNodes();\r\n\t\t\t\t\t/**\r\n\t\t\t\t\t * 节点选择后事件\r\n\t\t\t\t\t * @event comboztree-class#afterSelected\r\n\t\t\t\t\t * @param {Node} node 被选择的节点\r\n\t\t\t\t\t */\r\n\t\t\t\t\tthis.trigger('afterSelected', treeNode);\r\n\t\t\t\t}\r\n\t\t\t}else{\r\n\t\t\t\tif(this.trigger('beforeSelected', treeNode) === false){\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tthis._z.selectNode(treeNode);\r\n\t\t\t\tthis._setSelectedNodes();\r\n\t\t\t\tthis.trigger('afterSelected', treeNode);\r\n\t\t\t}\r\n\t\t},\r\n\t\t/**\r\n\t\t * 勾选事件\r\n\t\t */\r\n\t\t_onCheck: function(treeNode){\r\n\t\t\tif(treeNode.checked){\r\n\t\t\t\tthis._setSelectedNodes();\r\n\t\t\t}else{\r\n\t\t\t\tif(this.trigger('beforeSelected', treeNode) === false){\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tthis._setSelectedNodes();\r\n\t\t\t\tthis.trigger('afterSelected', treeNode);\r\n\t\t\t}\r\n\t\t},\r\n\t\t/**\r\n\t\t * 根据树节点的checked状态的取值并设置下拉树的文本显示控件和值隐藏控件\r\n\t\t */\r\n\t\t_setSelectedNodes: function(){\r\n\t\t\tif(this.setting.multiple){\r\n\t\t\t\tvar nodes = this._z.getCheckedNodes(true);\r\n\t\t\t\tif(this.setting.shrinkValue){\r\n\t\t\t\t\tnodes = this._removeHalfCheckNode(nodes);\r\n\t\t\t\t\tnodes = this._removeRepeat(nodes);\r\n\t\t\t\t}else if(this.setting.ignoreHalfCheck){\r\n\t\t\t\t\tnodes = this._removeHalfCheckNode(nodes);\r\n\t\t\t\t}\r\n\t\t\t\tsetSelectedNode.call(this, nodes);\r\n\t\t\t}else{\r\n\t\t\t\tvar nodes = this._z.getSelectedNodes();\r\n\t\t\t\tif(nodes.length >= 1){\r\n\t\t\t\t\tsetSelectedNode.call(this, nodes);\r\n\t\t\t\t}\r\n\t\t\t\tthis.hidePanel();\r\n\t\t\t}\r\n\t\t},\r\n\t\t/**\r\n\t\t * 去掉半勾选状态的父节点\r\n\t\t * @param nodes\r\n\t\t */\r\n\t\t_removeHalfCheckNode: function(nodes){\r\n\t\t\tvar result = [];\r\n\t\t\tfor(var i = 0; i < nodes.length; i ++){\r\n\t\t\t\tvar node = nodes[i];\r\n\t\t\t\tif(node['check_Child_State'] != 1)\r\n\t\t\t\t\tresult.push(node);\r\n\t\t\t}\r\n\t\t\treturn result;\r\n\t\t},\r\n\t\t/**\r\n\t\t * 去掉全选节点下的子节点\r\n\t\t * @param nodes\r\n\t\t */\r\n\t\t_removeRepeat: function(nodes){\r\n\t\t\tvar result = $.extend([],nodes);\r\n\t\t\tfor(var i = 0; i < nodes.length; i ++){\r\n\t\t\t\tvar node = nodes[i];\r\n\t\t\t\tif(node['check_Child_State'] == 2){\r\n\t\t\t\t\tresult = this._removeRepeatChildren(result, node);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn result;\r\n\t\t},\r\n\t\t_removeRepeatChildren: function(nodes, pNode){\r\n\t\t\tvar result = [];\r\n\t\t\tfor(var i = 0; i < nodes.length; i ++){\r\n\t\t\t\tvar flag = this._z.getNodeByParam('tId', nodes[i].tId , pNode);\r\n\t\t\t\tif(!flag)\r\n\t\t\t\t\tresult.push(nodes[i]);\r\n\t\t\t}\r\n\t\t\treturn result;\r\n\t\t},\r\n\t\t/**\r\n\t\t * ztree树节点异步加载成功事件\r\n\t\t * 如果本地搜索开启，则刷新本地搜索结果的值\r\n\t\t * @param event\r\n\t\t * @param treeId\r\n\t\t * @param treeNode\r\n\t\t * @param msg\r\n\t\t */\r\n\t\t_onAsyncSuccess: function(event, treeId, treeNode, msg){\r\n\t\t\tthis._rendSelectedItems();\r\n\t\t},\r\n\t\t/**\r\n\t\t * （配合键盘导航事件）\r\n\t\t * 展开节点后 选中第一个子节点，如果没有子节点\r\n\t\t * \t则选中当前节点\r\n\t\t * @param event\r\n\t\t * @param treeId\r\n\t\t * @param treeNode\r\n\t\t */\r\n\t\t_onExpand: function(event, treeId, treeNode){\r\n\t\t\tvar n = null;\r\n\t\t\tif(treeNode && treeNode.isParent){\r\n\t\t\t\tvar ns = this._z.getNodesByParam('level', treeNode.level + 1, treeNode);\r\n\t\t\t\tif(ns.length > 0){\r\n\t\t\t\t\tn = ns[0];\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif(n){\r\n\t\t\t\tthis._z.cancelSelectedNode(treeNode);\r\n\t\t\t\tthis._z.selectNode(n);\r\n\t\t\t}else{\r\n\t\t\t\tthis._z.selectNode(treeNode);\r\n\t\t\t}\r\n\t\t\tthis.focus();\r\n\t\t},\r\n\t\t/**\r\n\t\t * 根据传入的url进行远程加载数据并渲染\r\n\t\t * @todo 请求时并加入parameter参数，获取到数据后调用loadData\r\n\t\t * @param {url} url 要载入的url\r\n\t\t * @param {callback} callback 加载完成后事件\r\n\t\t * @example $('#demo').comboztree('reload','data.do');\r\n\t\t * @memberof comboztree-class\r\n\t\t * @instance\r\n\t\t */\r\n\t\treload: function(url,callback){\r\n\t\t\tif(!url){\r\n\t\t\t\turl = this.setting.url;\r\n\t\t\t}\r\n\t\t\tthis._ajax(url, function(data){\r\n\t\t\t\tthis.loadData(data);\r\n\t\t\t\tif($.isFunction(callback)){\r\n\t\t\t\t\tcallback.call(this, data);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t},\r\n\t\t/**\r\n\t\t * <span class=\"type-signature static\">override</span>\r\n\t\t * 清除值\r\n\t\t * @todo 清除隐藏值\r\n\t\t * @todo 清除显示值\r\n\t\t * @todo 清除下拉面板中ztree的选中状态\r\n\t\t * @memberof comboztree-class\r\n\t\t * @instance\r\n\t\t */\r\n\t\tclearValue: function(){\r\n\t\t\tthis.setText('');\r\n\t\t\tthis.setValue('');\r\n\t\t\tif(this._z != null){\r\n\t\t\t\tthis._rendSelectedItems();\r\n\t\t\t}\r\n\t\t},\r\n\t\t/**\r\n\t\t * 根据当前下拉树的隐藏值查询出相关的节点，\r\n\t\t * 渲染节点为选中状态，并根据值设置显示值\r\n\t\t */\r\n\t\t_rendSelectedItems: function(){\r\n\t\t\tthis._clearSelectedNodes();\r\n\t\t\tvar valStr = this.getValue()\r\n\t\t\t\t,ztree = this._z;\r\n\t\t\tif(valStr && ztree){\r\n\t\t\t\tvar nodes = this._getNodesByValue();\r\n\t\t\t\tif(this.setting.multiple){\r\n\t\t\t\t\tfor( var i = 0; i < nodes.length; i++) {\r\n\t\t\t\t\t\tif(this.setting.shrinkValue || this.setting.ignoreHalfCheck)\r\n\t\t\t\t\t\t\tztree.checkNode(nodes[i],true,true);\r\n\t\t\t\t\t\telse\r\n\t\t\t\t\t\t\tztree.checkNode(nodes[i]);\r\n\t\t\t\t\t}\r\n\t\t\t\t}else if(nodes.length == 1){\r\n\t\t\t\t\tztree.selectNode(nodes[0]);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\t/**\r\n\t\t * 根据隐藏值的等值匹配出ztree的节点\r\n\t\t */\r\n\t\t_getNodesByValue: function(){\r\n\t\t\tvar result = []\r\n\t\t\t\t,ztree = this._z\r\n\t\t\t\t,valueField = this.setting.valuefield;\r\n\t\t\tvar vs = this.getValue().split(',');\r\n\t\t\tfor ( var i = 0; i < vs.length; i++) {\r\n\t\t\t\tvar nodes = ztree.getNodesByParam(valueField,vs[i]);\r\n\t\t\t\tfor( var j = 0; j < nodes.length; j++) {\r\n\t\t\t\t\tresult.push(nodes[j]);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn $(result);\r\n\t\t},\r\n\t\t/**\r\n\t\t * 清除已选的节点状态\r\n\t\t * @param comboztree 下拉树全局对象\r\n\t\t */\r\n\t\t_clearSelectedNodes: function(){\r\n\t\t\tvar ztree = this._z;\r\n\t\t\tif(ztree == null){\r\n\t\t\t\t//ztree 树还未初始化，无需清理\r\n\t\t\t\treturn ;\r\n\t\t\t}\r\n\t\t\tif(this.setting.multiple){\r\n\t\t\t\tztree.checkAllNodes(false);\r\n\t\t\t}else{\r\n\t\t\t\tvar selectedNodes = ztree.getSelectedNodes();\r\n\t\t\t\tif(selectedNodes.length == 1){\r\n\t\t\t\t\tztree.cancelSelectedNode(selectedNodes[0]);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t});\r\n\t\r\n\t\r\n\t$.fn.comboztree = function (option, value) {\r\n\t\tvar methodReturn = undefined\r\n\t\t\t,args = arguments\r\n\t\t\t,componentName = 'comboztree';\r\n\t\tthis.each(function () {\r\n\t\t\tvar $this = $(this);\r\n\t\t\tif(!$this.is('input')){\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\t\t\tvar component = App.getComponent($this, componentName);\r\n\t\t\tif(typeof option === 'string'){\r\n\t\t\t\ttry{\r\n\t\t\t\t\tvar methodArgs = Array.prototype.slice.call(args, 1);\r\n\t\t\t\t\tmethodReturn = App.componentMethodApply(component, option, methodArgs);\r\n\t\t\t\t\t\r\n\t\t\t\t\tif(option == 'on' && component._suggest){\r\n\t\t\t\t\t\tcomponent._suggest.on.apply(component._suggest, methodArgs);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif(option == 'bind' && component._suggest){\r\n\t\t\t\t\t\tcomponent._suggest.bind.apply(component._suggest, methodArgs);\r\n\t\t\t\t\t}\r\n\t\t\t\t}catch(e){\r\n\t\t\t\t\tApp.throwCompMethodError($this, componentName, option, e);\r\n\t\t\t\t}\r\n\t\t\t}else{\r\n\t\t\t\tif(!component){\r\n\t\t\t\t\tcomponent = new Comboztree(this, option);\r\n\t\t\t\t\t$this.data(componentName, component);\r\n\t\t\t\t}else{\r\n\t\t\t\t\tApp.throwCompInitError($this, componentName);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\t\treturn methodReturn;\r\n\t};\r\n\tfunction storeData(data){\r\n\t\tthis._mapData = {};\r\n\t\tif(!data){\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tvar field = this.setting.idfield;\r\n\t\tfor(var i = 0; i < data.length; i++){\r\n\t\t\tvar node = $.extend(true, {}, data[i]);\r\n\t\t\tthis._mapData[node[field]] = node;\r\n\t\t}\r\n\t};\r\n\tfunction appendStoreData(msg){\r\n\t\tvar data = JSON.parse(msg);\r\n\t\tif(!data){\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tvar field = this.setting.idfield;\r\n\t\tfor(var i = 0; i < data.length; i++){\r\n\t\t\tvar node = $.extend(true, {}, data[i]);\r\n\t\t\tthis._mapData[node[field]] = node;\r\n\t\t}\r\n\t};\r\n\tfunction setSelectedNode(nodes){\r\n\t\tvar result = null\r\n\t\t\t,idField = this.setting.idfield;\r\n\t\tif(this.setting.multiple){\r\n\t\t\tresult = [];\r\n\t\t\tif(nodes){\r\n\t\t\t\tfor(var i = 0; i < nodes.length; i++){\r\n\t\t\t\t\tvar id = nodes[i][idField];\r\n\t\t\t\t\tif(this._mapData[id]){\r\n\t\t\t\t\t\tresult.push(this._mapData[id]);\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\tresult.push(nodes[i]);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}else{\r\n\t\t\tif(nodes && nodes[0]){\r\n\t\t\t\tvar id = nodes[0][idField];\r\n\t\t\t\tif(this._mapData[id]){\r\n\t\t\t\t\tresult = this._mapData[id];\r\n\t\t\t\t}else{\r\n\t\t\t\t\tresult = nodes[0];\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\tthis.setSelectedNode(result);\r\n\t};\r\n\treturn Comboztree;\r\n});\n",
    "/**\r\n * 引用控件--继承Textbox\r\n * @author Mr.T\r\n */\r\ndefine('app/widgets/form/app-reference',['app/core/app-jquery', 'app/core/app-core', 'app/widgets/window/app-dialog',\r\n        'app/core/app-options', 'app/widgets/form/app-textbox', 'app/widgets/form/app-suggest', 'app/widgets/drag/app-droppanel'],\r\n        function ($, App, Dialog, Options, Textbox, Suggest, Expandable) {\r\n\t\t\r\n\t'use strict';\r\n\r\n\t/**\r\n\t * @class \r\n\t * @classdesc 引用框\r\n\t * <span class=\"type-signature static\">extend</span>textbox\r\n\t * @see {@link textbox-class} reference继承至textbox\r\n\t * @name reference-class\r\n\t * @desc 引用框的初始化方法\r\n\t * @param {DOMElement} input 要渲染的input组件\r\n\t * @param {Object} options 组件的选项设置 \r\n\t * @author Mr.T\r\n\t * @example &lt;input &#9;class=\"app-reference\"\r\n\t * &#9;_options=\"{\r\n\t * &#9;&#9;action: 'html/example/app-input/ui/refDemo.html'\r\n\t * &#9;}\"\r\n\t * />\r\n\t * @example $('#demo').reference({\r\n\t * &#9;action: 'html/example/app-input/ui/refDemo.html'\r\n\t * });\r\n\t */\r\n\tvar Reference = Textbox.extend({\r\n\t\tImplements: Expandable,\r\n\t\tinitialize: function(input, options) {\r\n\t\t\tif(!options){\r\n\t\t\t\toptions = {};\r\n\t\t\t}\r\n\t\t\toptions._ = Options.appDefaults.Reference;\r\n\t\t\tReference.superclass.initialize.call(this, input, options);\r\n\t\t\tthis._init();\r\n\t\t},\r\n\t\t/**\r\n\t\t * 初始化\r\n\t\t */\r\n\t\t_init: function(){\r\n\t\t\tthis._initOptions();\r\n\t\t\tif(this.setting.usesuggest){\r\n\t\t\t\tnew Suggest(this.$input, this.options);\r\n\t\t\t}else{\r\n\t\t\t\tif($.isFunction(this.setting.onClickOpen)){\r\n\t\t\t\t\tthis.$text.on('click.reference.api', $.proxy(this._mousedown$openBtn, this));\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tthis._registEvents();\r\n\t\t\tthis.$input.data('context', this);\r\n\t\t},\r\n\t\t/**\r\n\t\t * 覆盖父类的绑定方法\r\n\t\t */\r\n\t\t_textChangeEvent: function(){},\r\n\t\t/**\r\n\t\t * 初始化属性\r\n\t\t */\r\n\t\t_initOptions: function(){\r\n\t\t\tif(!this.setting.url){\r\n\t\t\t\tthis.setting.url = _contextPath + '/ref.do?code=' + this.setting.code;\r\n\t\t\t}\r\n\t\t\tif(this.setting.readFields){\r\n\t\t\t\tthis.setting.readFields = this.setting.readFields.split(',');\r\n\t\t\t}\r\n\t\t\tif(this.setting.writeFields){\r\n\t\t\t\tthis.setting.writeFields = this.setting.writeFields.split(',');\r\n\t\t\t}\r\n\t\t},\r\n\t\t/**\r\n\t\t * 注册控件事件\r\n\t\t */\r\n\t\t_registEvents: function(){\r\n\t\t\tif(!this.setting.usesuggest){\r\n\t\t\t\tthis._editable(false);\r\n\t\t\t\tthis.$text.on('click.reference.api',$.proxy(this.openReference, this));\r\n\t\t\t}\r\n\t\t\tthis.$openBtn.on('click.reference.api',$.proxy(this.openReference, this));\r\n\t\t\tif($.isFunction(this.setting.afterClose)){\r\n\t\t\t\tthis.on('afterClose', this.setting.afterClose);\r\n\t\t\t}\r\n\t\t\tif($.isFunction(this.setting.beforeOpenReference)){\r\n\t\t\t\tthis.on('beforeOpenReference', this.setting.beforeOpenReference);\r\n\t\t\t}\r\n\t\t},\r\n\t\t/**\r\n\t\t * 打开参照对话框，该方法已绑定在组件的右边按钮中\r\n\t\t * @todo 关闭其他显示的下拉框\r\n\t\t * @example $('#demo').reference('openReference');\r\n\t\t * @memberof reference-class\r\n\t\t * @instance\r\n\t\t */\r\n\t\topenReference: function(){\r\n\t\t\tif(this.trigger('beforeOpenReference') === false){\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tvar that = this\r\n\t\t\t\t,s = this.setting;\r\n\t\t\tvar dialogCode = 'reference' + $A.nextId();\r\n\t\t\tvar options = {\r\n\t\t\t\thasheader: s.hasheader,\r\n\t\t\t\twidth: s.digWidth,\r\n\t\t\t\theight: s.digHeight,\r\n\t\t\t\ttitle: s.title,\r\n\t\t\t\tsrc: this.$button,\r\n\t\t\t\turl: s.url,\r\n\t\t\t\tparams: this.getParameter(),\r\n\t\t\t\t'data-target': '#' + dialogCode,\r\n\t\t\t\tdialogId: dialogCode,\r\n\t\t\t\tcloseCallback: function(ref){\r\n\t\t\t\t\tvar referenceData = ref.data('referenceData');\r\n\t\t\t\t\tif(referenceData){\r\n\t\t\t\t\t\tthat.setReferenceData(referenceData);\r\n\t\t\t\t\t\tref.removeData('referenceData');\r\n\t\t\t\t\t}\r\n\t\t\t\t\tthat.trigger('afterClose');\r\n\t\t\t\t},\r\n\t\t\t\tcallback: function(ref){\r\n\t\t\t\t\tref.delegate('[data-dismiss=\"refClear\"]', 'click.reference',function(){\r\n\t\t\t\t\t\tref.data('referenceData',{text:'',value:''});\r\n\t\t\t\t\t\tref.closeDialog();\r\n\t\t\t\t\t});\r\n\t\t\t\t\tref.delegate('[data-dismiss=\"refCancel\"]', 'click.reference',function(){\r\n\t\t\t\t\t\tref.removeData('referenceData');\r\n\t\t\t\t\t\tref.closeDialog();\r\n\t\t\t\t\t});\r\n\t\t\t\t\tref.data('referenceData', that.getReferenceData());\r\n\t\t\t\t}\r\n\t\t\t};\r\n\t\t\tthis._closeVisiblePanel();\r\n\t\t\t$.openModalDialog(options);\r\n\t\t},\r\n\t\t/**\r\n\t\t * 设置参照url\r\n\t\t * @param {url} url 参照页面url\r\n\t\t * @example $('#demo').reference('setAction','a.do');\r\n\t\t * @memberof reference-class\r\n\t\t * @instance\r\n\t\t */\r\n\t\tsetAction: function(url){\r\n\t\t\tthis.setting.url = url;\r\n\t\t},\r\n\t\t/**\r\n\t\t * 获取当前引用框的数据对象\r\n\t\t * @returns {object} result 参照页面的数据对象\r\n\t\t * @example $('#demo').reference('getReferenceData');\r\n\t\t * @memberof reference-class\r\n\t\t * @instance\r\n\t\t */\r\n\t\tgetReferenceData: function(){\r\n\t\t\treturn this.$input.data('referenceData');\r\n\t\t},\r\n\t\t/**\r\n\t\t * 设置当前引用框的数据对象\r\n\t\t * @param {object} referenceData 参照页面的数据对象\r\n\t\t * @todo 根据数据对象设置显示值和隐藏值\r\n\t\t * @example $('#demo').reference('setReferenceData',{object});\r\n\t\t * @memberof reference-class\r\n\t\t * @instance\r\n\t\t */\r\n\t\tsetReferenceData: function (referenceData) {\r\n\t\t\tif(!referenceData){\r\n\t\t\t\treferenceData = {\r\n\t\t\t\t\ttext:'',\r\n\t\t\t\t\tvalue:''\r\n\t\t\t\t};\r\n\t\t\t}\r\n\t\t\tthis.setText(referenceData.text);\r\n\t\t\tthis.setValue(referenceData.value);\r\n\t\t\tthis.$input.data('referenceData', referenceData);\r\n\t\t},\r\n\t\t/**\r\n\t\t * <span class=\"type-signature static\">override</span>combo\r\n\t\t * 清除数据对象、显示值、隐藏值\r\n\t\t * @todo 清除数据对象\r\n\t\t * @todo 清除显示值\r\n\t\t * @todo 清除隐藏值\r\n\t\t * @example $('#demo').reference('clearValue');\r\n\t\t * @memberof reference-class\r\n\t\t * @instance\r\n\t\t */\r\n\t\tclearValue: function(){\r\n\t\t\tthis.$input.removeData('referenceData');\r\n\t\t\tthis.setText('');\r\n\t\t\tthis.setValue('');\r\n\t\t},\r\n\t\t/**\r\n\t\t * <span class=\"type-signature static\">override</span>\r\n\t\t * 设置隐藏值\r\n\t\t * @param {String} val 隐藏值\r\n\t\t * @param {boolean} [noTrigger] 是否触发change\r\n\t\t * @see textbox#setValue\r\n\t\t * @todo 如果隐藏值为空，则设置显示值为空\r\n\t\t * @example $('#demo').reference('setValue','val');\r\n\t\t * @memberof reference-class\r\n\t\t * @instance\r\n\t\t */\r\n\t\tsetValue: function(val, noTrigger){\r\n\t\t\tthis._setValue(val, noTrigger);\r\n\t\t\tvar obj = this.getReferenceData();\r\n\t\t\tif(obj){\r\n\t\t\t\tobj.value = val;\r\n\t\t\t}else{\r\n\t\t\t\tobj = {\r\n\t\t\t\t\tvalue: val\r\n\t\t\t\t};\r\n\t\t\t\tthis.$input.data('referenceData', obj);\r\n\t\t\t}\r\n\t\t\tif(!val){\r\n\t\t\t\tthis.setText('');\r\n\t\t\t}\r\n\t\t},\r\n\t\t/**\r\n\t\t * 设置显示值\r\n\t\t * @todo 设置值后\r\n\t\t * @example $('#demo').textbox('setText','text');\r\n\t\t * @memberof reference-class\r\n\t\t * @instance\r\n\t\t */\r\n\t\tsetText: function(text, noTrigger){\r\n\t\t\tReference.superclass.setText.call(this, text);\r\n\t\t\tvar obj = this.getReferenceData();\r\n\t\t\tif(obj){\r\n\t\t\t\tobj.text = text;\r\n\t\t\t}else{\r\n\t\t\t\tobj = {\r\n\t\t\t\t\ttext: text\r\n\t\t\t\t};\r\n\t\t\t\tthis.$input.data('referenceData', obj);\r\n\t\t\t}\r\n\t\t},\r\n\t\t/**\r\n\t\t * 设置Reference弹出的对话框的标题\r\n\t\t * @param title\r\n\t\t */\r\n\t\tsetDialogTitle:function(title){\r\n\t\t\tthis.setting.title = title;\r\n\t\t}\r\n\t});\r\n\t\r\n\t$.fn.reference = function (option, value) {\r\n\t\tvar methodReturn = undefined\r\n\t\t\t,args = arguments\r\n\t\t\t,componentName = 'reference';\r\n\t\tthis.each(function () {\r\n\t\t\tvar $this = $(this);\r\n\t\t\tif(!$this.is('input')){\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\t\t\tvar component = App.getComponent($this, componentName);\r\n\t\t\tif(typeof option === 'string'){\r\n\t\t\t\ttry{\r\n\t\t\t\t\tvar methodArgs = Array.prototype.slice.call(args, 1);\r\n\t\t\t\t\tmethodReturn = App.componentMethodApply(component, option, methodArgs);\r\n\t\t\t\t}catch(e){\r\n\t\t\t\t\tApp.throwCompMethodError($this, componentName, option, e);\r\n\t\t\t\t}\r\n\t\t\t}else{\r\n\t\t\t\tif(!component){\r\n\t\t\t\t\tcomponent = new Reference(this, option);\r\n\t\t\t\t\t$this.data(componentName, component);\r\n\t\t\t\t}else{\r\n\t\t\t\t\tApp.throwCompInitError($this, componentName);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\t\treturn methodReturn;\r\n\t};\r\n\r\n\t\r\n\t\r\n\t$.fn.reference.Constructor = Reference;\r\n\t/**\r\n\t * 关闭顶层的对话框，该方法已注册到jquery对象中\r\n\t * @param {object} data 数据\r\n\t * @todo 关闭顶层对话框\r\n\t * @todo 将数据缓存到对话框中\r\n\t * @example $('#demo').closeReference({object});\r\n\t * @memberof jquery\r\n\t * @function closeReference\r\n\t */\r\n\t$.closeReference = function(data){\r\n\t\tvar ref = Dialog.getCurrent();\r\n\t\tref.data('referenceData',data);\r\n\t\tref.closeDialog();\r\n\t};\r\n\treturn Reference;\r\n});\n",
    "/**\r\n * 表格扩展\r\n */\r\ndefine(\t'app/widgets/app-jqgrid',[\"app/core/app-jquery\", \"app/core/app-core\", \"app/core/app-options\",\r\n\t\t\t\t\"app/widgets/window/app-messager\", \"app/data/app-ajax\", localeFile,\r\n\t\t\t\t\"jquery/jquery.jqgrid\",\"app/widgets/button/app-button\",\"app/widgets/form/app-number\",\"app/widgets/form/app-money\",\"app/widgets/form/app-combobox\",\"app/widgets/form/app-datetime\",\"app/widgets/form/app-combogrid\",\"app/widgets/form/app-comboztree\",\"app/widgets/form/app-reference\", 'jquery/jquery.upload'], function($, $A, $options, $messager,\r\n\t\t\t\t$ajax) {\r\n\t\t\t/**\r\n\t\t\t * 通过模板进行数据格式化\r\n\t\t\t * \r\n\t\t\t * @param cellvalue\r\n\t\t\t *            单元格值\r\n\t\t\t * @param options\r\n\t\t\t *            选项\r\n\t\t\t * @param rowObject\r\n\t\t\t *            行数据\r\n\t\t\t * @returns 格式化后串\r\n\t\t\t */\r\n\t\t\tfunction templateFormat(cellvalue, options, rowObject) {\r\n\t\t\t\treturn $template(options.template, rowObject);\r\n\t\t\t};\r\n\t\t\t/**\r\n\t\t\t * 扩展网格绑定的组件\r\n\t\t\t */\r\n\t\t\tfunction extendCompent($table) {\r\n\t\t\t\treturn {\r\n\t\t\t\t\t\"PASSWORD\" : { // 密码框\r\n\t\t\t\t\t\t// 参数说明:pnlObj 组件父容器对象,colVal 列值,rowIndex 行号,colIndex\r\n\t\t\t\t\t\t// 列号,colModel列属性对象集合,colTxt列文本,attachHiddens附加值隐藏域数组集合\r\n\t\t\t\t\t\tinit : function(pnlObj, colVal, rowIndex, colIndex,\r\n\t\t\t\t\t\t\t\tcolModel, colTxt, attachHiddens) {// 组件创建\r\n\t\t\t\t\t\t\tvar $obj = $(pnlObj), id = $obj.attr(\"id\")\r\n\t\t\t\t\t\t\t\t\t+ \"-comp\";// 生成ID;\r\n\t\t\t\t\t\t\tvar name = colModel[colIndex].name, validations = colModel[colIndex].validations, events = colModel[colIndex].events, required = colModel[colIndex].required, requiredMsg = colModel[colIndex].requiredMsg, gearRules = colModel[colIndex].gearRules;\r\n\t\t\t\t\t\t\tvalidations = (validations ? ' validations=\"'\r\n\t\t\t\t\t\t\t\t\t+ validations + '\"' : '');\r\n\t\t\t\t\t\t\tevents = (events ? ' events=\"' + events + '\"' : '');\r\n\t\t\t\t\t\t\trequired = (required ? ' required=\"true\"' : '');\r\n\t\t\t\t\t\t\trequiredMsg = (requiredMsg ? ' requiredMsg=\"'\r\n\t\t\t\t\t\t\t\t\t+ requiredMsg + '\"' : '');\r\n\t\t\t\t\t\t\tgearRules = (gearRules ? ' gearRules=\"' + gearRules\r\n\t\t\t\t\t\t\t\t\t+ '\"' : '');\r\n\r\n\t\t\t\t\t\t\tvar html = '<input type=\"password\" id=\"' + id\r\n\t\t\t\t\t\t\t\t\t+ '\" name=\"' + name + '\" ';\r\n\t\t\t\t\t\t\thtml += ' value=\"' + colVal + '\" ' + validations\r\n\t\t\t\t\t\t\t\t\t+ events + required + requiredMsg\r\n\t\t\t\t\t\t\t\t\t+ gearRules\r\n\t\t\t\t\t\t\t\t\t+ ' class=\"editable\" width=\"100%\"/>';\r\n\t\t\t\t\t\t\t$obj.html(html);\r\n\t\t\t\t\t\t\trequire([\"app/core/app-jquery\"], function(jq) {\r\n\t\t\t\t\t\t\t\t\t\t$obj.initPageUI();\r\n\t\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tgetEditor:function(){\r\n\t\t\t\t\t\t\t\tvar comp = $(pnlObj).attr(\"id\") + \"-comp\";\r\n\t\t\t\t\t\t\t\treturn $(pnlObj).find('#' + comp).data(\"textbox\");\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\txtype:'textbox'\r\n\t\t\t\t\t},\r\n\t\t\t\t\t\"RADIOBOX\" : {// 单选\r\n\t\t\t\t\t\tinit : function(pnlObj, colVal, rowIndex, colIndex,\r\n\t\t\t\t\t\t\t\tcolModel, colTxt, attachHiddens) {// 组件创建\r\n\t\t\t\t\t\t\tvar $obj = $(pnlObj), id = $obj.attr(\"id\")\r\n\t\t\t\t\t\t\t\t\t+ \"-comp\";// 生成ID;\r\n\t\t\t\t\t\t\tvar name = colModel[colIndex].name, validations = colModel[colIndex].validations, events = colModel[colIndex].events, required = colModel[colIndex].required, requiredMsg = colModel[colIndex].requiredMsg, gearRules = colModel[colIndex].gearRules;\r\n\t\t\t\t\t\t\tvalidations = (validations ? ' validations=\"'\r\n\t\t\t\t\t\t\t\t\t+ validations + '\"' : '');\r\n\t\t\t\t\t\t\tevents = (events ? ' events=\"' + events + '\"' : '');\r\n\t\t\t\t\t\t\trequired = (required ? ' required=\"true\"' : '');\r\n\t\t\t\t\t\t\trequiredMsg = (requiredMsg ? ' requiredMsg=\"'\r\n\t\t\t\t\t\t\t\t\t+ requiredMsg + '\"' : '');\r\n\t\t\t\t\t\t\tgearRules = (gearRules ? ' gearRules=\"' + gearRules\r\n\t\t\t\t\t\t\t\t\t+ '\"' : '');\r\n\r\n\t\t\t\t\t\t\tvar editOption = colModel[colIndex].editOptions;// json格式：[{value:'',text:''},{value:'',text:''}]\r\n\t\t\t\t\t\t\teditOption = editOption ? editOption : '[]';\r\n\t\t\t\t\t\t\teditOption = new Function(\"return \" + \r\n\r\n\t\t\t\t\t\t\t\t\t+ \";\")();\r\n\t\t\t\t\t\t\tvar html = new Array();\r\n\t\t\t\t\t\t\tfor (var i = 0; i < editOption.length; i++) {\r\n\t\t\t\t\t\t\t\tvar rs = editOption[i];\r\n\t\t\t\t\t\t\t\tvar chk = colVal == rs.value\r\n\t\t\t\t\t\t\t\t\t\t? \"checked='true'\"\r\n\t\t\t\t\t\t\t\t\t\t: \"\";\r\n\t\t\t\t\t\t\t\thtml.push('<label><input type=\"radio\" id=\"'\r\n\t\t\t\t\t\t\t\t\t\t+ id + i + '\" name=\"' + name + '\" '\r\n\t\t\t\t\t\t\t\t\t\t+ chk);\r\n\t\t\t\t\t\t\t\thtml\r\n\t\t\t\t\t\t\t\t\t\t.push(' value=\"'\r\n\t\t\t\t\t\t\t\t\t\t\t\t+ rs.value\r\n\t\t\t\t\t\t\t\t\t\t\t\t+ '\" '\r\n\t\t\t\t\t\t\t\t\t\t\t\t+ validations\r\n\t\t\t\t\t\t\t\t\t\t\t\t+ events\r\n\t\t\t\t\t\t\t\t\t\t\t\t+ required\r\n\t\t\t\t\t\t\t\t\t\t\t\t+ requiredMsg\r\n\t\t\t\t\t\t\t\t\t\t\t\t+ gearRules\r\n\t\t\t\t\t\t\t\t\t\t\t\t+ ' class=\"editable\" style=\"width:auto;\"/>'\r\n\t\t\t\t\t\t\t\t\t\t\t\t+ rs.text + '</label>');\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t$obj.html(html.join(''));\r\n\t\t\t\t\t\t\trequire([\"app/core/app-jquery\"], function(jq) {\r\n\t\t\t\t\t\t\t\t\t\t$obj.initPageUI();\r\n\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tgetVal : function(pnlObj) {\r\n\t\t\t\t\t\t\tvar chk = $(pnlObj).find(':radio:checked');\r\n\t\t\t\t\t\t\tvar val = chk.size() > 0 ? chk.val() : ($(pnlObj)\r\n\t\t\t\t\t\t\t\t\t.attr(\"val\") || $(pnlObj).attr(\"txt\"));\r\n\t\t\t\t\t\t\treturn val;\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tgetTxt : function(pnlObj) {\r\n\t\t\t\t\t\t\tvar chk = $(pnlObj).find(':radio:checked');\r\n\t\t\t\t\t\t\tvar val = chk.size() > 0 ? chk.val() : ($(pnlObj)\r\n\t\t\t\t\t\t\t\t\t.attr(\"val\") || $(pnlObj).attr(\"txt\"));\r\n\t\t\t\t\t\t\treturn val;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t\t\"TEXTAREA\" : {// 文本域\r\n\t\t\t\t\t\tinit : function(pnlObj, colVal, rowIndex, colIndex,\r\n\t\t\t\t\t\t\t\tcolModel, colTxt, attachHiddens) {// 组件创建\r\n\t\t\t\t\t\t\tvar $obj = $(pnlObj), id = $obj.attr(\"id\")\r\n\t\t\t\t\t\t\t\t\t+ \"-comp\";// 生成ID;\r\n\t\t\t\t\t\t\tvar name = colModel[colIndex].name, validations = colModel[colIndex].validations, events = colModel[colIndex].events, required = colModel[colIndex].required, requiredMsg = colModel[colIndex].requiredMsg, gearRules = colModel[colIndex].gearRules;\r\n\t\t\t\t\t\t\tvalidations = (validations ? ' validations=\"'\r\n\t\t\t\t\t\t\t\t\t+ validations + '\"' : '');\r\n\t\t\t\t\t\t\tevents = (events ? ' events=\"' + events + '\"' : '');\r\n\t\t\t\t\t\t\trequired = (required ? ' required=\"true\"' : '');\r\n\t\t\t\t\t\t\trequiredMsg = (requiredMsg ? ' requiredMsg=\"'\r\n\t\t\t\t\t\t\t\t\t+ requiredMsg + '\"' : '');\r\n\t\t\t\t\t\t\tgearRules = (gearRules ? ' gearRules=\"' + gearRules\r\n\t\t\t\t\t\t\t\t\t+ '\"' : '');\r\n\r\n\t\t\t\t\t\t\tvar html = '<textarea id=\"' + id + '\" name=\"'\r\n\t\t\t\t\t\t\t\t\t+ name + '\" ';\r\n\t\t\t\t\t\t\thtml += validations\r\n\t\t\t\t\t\t\t\t\t+ events\r\n\t\t\t\t\t\t\t\t\t+ required\r\n\t\t\t\t\t\t\t\t\t+ requiredMsg\r\n\t\t\t\t\t\t\t\t\t+ gearRules\r\n\t\t\t\t\t\t\t\t\t+ ' class=\"editable\" style=\"resize: none;\" width=\"100%\">'\r\n\t\t\t\t\t\t\t\t\t+ colVal + '</textarea>';\r\n\t\t\t\t\t\t\t$obj.html(html);\r\n\t\t\t\t\t\t\trequire([\"app/core/app-jquery\"], function(jq) {\r\n\t\t\t\t\t\t\t\t\t\t$obj.initPageUI();\r\n\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\txtype:'textbox'\r\n\t\t\t\t\t},\r\n\t\t\t\t\t\"MONEY\" : {\r\n\t\t\t\t\t\t// 参数说明:pnlObj 组件父容器对象,colVal 列值,rowIndex 行号,colIndex\r\n\t\t\t\t\t\t// 列号,colModel列属性对象集合,colTxt列文本,attachHiddens附加值隐藏域数组集合\r\n\t\t\t\t\t\tinit : function(pnlObj, colVal, rowIndex, colIndex,\r\n\t\t\t\t\t\t\t\tcolModel, colTxt, attachHiddens) {// 组件创建\r\n\t\t\t\t\t\t\tvar $obj = $(pnlObj), id = $obj.attr(\"id\")\r\n\t\t\t\t\t\t\t\t\t+ \"-comp\";// 生成ID;\r\n\t\t\t\t\t\t\tvar name = colModel[colIndex].name, validations = colModel[colIndex].validations, events = colModel[colIndex].events, required = colModel[colIndex].required, requiredMsg = colModel[colIndex].requiredMsg, gearRules = colModel[colIndex].gearRules;\r\n\t\t\t\t\t\t\tvalidations = (validations ? ' validations=\"'\r\n\t\t\t\t\t\t\t\t\t+ validations + '\"' : '');\r\n\t\t\t\t\t\t\tevents = (events ? ' events=\"' + events + '\"' : '');\r\n\t\t\t\t\t\t\trequired = (required ? ' required=\"true\"' : '');\r\n\t\t\t\t\t\t\trequiredMsg = (requiredMsg ? ' requiredMsg=\"'\r\n\t\t\t\t\t\t\t\t\t+ requiredMsg + '\"' : '');\r\n\t\t\t\t\t\t\tgearRules = (gearRules ? ' gearRules=\"' + gearRules\r\n\t\t\t\t\t\t\t\t\t+ '\"' : '');\r\n\r\n\t\t\t\t\t\t\tvar html = '<input type=\"text\" id=\"' + id\r\n\t\t\t\t\t\t\t\t\t+ '\" name=\"' + name + '\" ';\r\n\t\t\t\t\t\t\thtml += ' value=\"' + colVal + '\" ' + validations\r\n\t\t\t\t\t\t\t\t\t+ events + required + requiredMsg\r\n\t\t\t\t\t\t\t\t\t+ gearRules\r\n\t\t\t\t\t\t\t\t\t+ ' class=\"app-money\" width=\"100%\"/>';\r\n\t\t\t\t\t\t\tvar options = colModel[colIndex].editOptions;\r\n\t\t\t\t\t\t\tvar $el = $(html);\r\n\t\t\t\t\t\t\t$el.attr(\"_options\",options);\r\n\t\t\t\t\t\t\t$obj.html($el);\r\n\t\t\t\t\t\t\t$el.money();\r\n\t\t\t\t\t\t\t/*require([\"app/core/app-jquery\"], function(jq) {\r\n\t\t\t\t\t\t\t\t\t\t$obj.initPageUI();\r\n\t\t\t\t\t\t\t\t\t});*/\r\n\t\t\t\t\t\t},getVal : function(pnlObj) {\r\n\t\t\t\t\t\t\tvar comp = $(pnlObj).attr(\"id\") + \"-comp\";\r\n\t\t\t\t\t\t\treturn $(pnlObj).find('#' + comp)\r\n\t\t\t\t\t\t\t\t\t.money('getValue');\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tgetEditor:function(pnlObj){\r\n\t\t\t\t\t\t\t\tvar comp = $(pnlObj).attr(\"id\") + \"-comp\";\r\n\t\t\t\t\t\t\t\treturn $(pnlObj).find('#' + comp).data(\"money\");\r\n\t\t\t\t\t\t} ,\r\n\t\t\t\t\t\txtype:'money'\r\n\t\t\t\t\t},\r\n\t\t\t\t\t\"COMBOGRID\" : {// 下拉表\r\n\t\t\t\t\t\tinit : function(pnlObj, colVal, rowIndex, colIndex,\r\n\t\t\t\t\t\t\t\tcolModel, colTxt, attachHiddens) {// 组件创建\r\n\t\t\t\t\t\t\tvar $obj = $(pnlObj), id = $obj.attr(\"id\")\r\n\t\t\t\t\t\t\t\t\t+ \"-comp\";// 生成ID\r\n\t\t\t\t\t\t\tvar options = colModel[colIndex].editOptions;\r\n\r\n\t\t\t\t\t\t\tvar name = colModel[colIndex].name, validations = colModel[colIndex].validations\r\n\t\t\t\t\t\t\t// ,events = colModel[colIndex].events\r\n\t\t\t\t\t\t\t, required = colModel[colIndex].required, requiredMsg = colModel[colIndex].requiredMsg, gearRules = colModel[colIndex].gearRules;\r\n\r\n\t\t\t\t\t\t\tvar suggest = false;\r\n\t\t\t\t\t\t\tif (options.suggest != null) {\r\n\t\t\t\t\t\t\t\tsuggest = true;\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\tvar $html = $(\"<input id=\\\"\"\r\n\t\t\t\t\t\t\t\t\t+ id\r\n\t\t\t\t\t\t\t\t\t+ \"\\\" name=\\\"\"\r\n\t\t\t\t\t\t\t\t\t+ name\r\n\t\t\t\t\t\t\t\t\t+ \"\\\" class=\\\"app-combogrid\\\" value=\\\"\"+ colVal+\"\\\" width=\\\"100%\\\" />\");\r\n\t\t\t\t\t\t\t$html.attr(\"value\", colVal);\r\n\t\t\t\t\t\t\t$html.attr(\"text\", colTxt);\r\n\t\t\t\t\t\t\t$html.attr(\"suggest\", suggest);\r\n\t\t\t\t\t\t\t$html.attr(\"validations\", validations);\r\n\t\t\t\t\t\t\t$html.attr(\"required\", required);\r\n\t\t\t\t\t\t\t$html.attr(\"requiredMsg\", requiredMsg);\r\n\t\t\t\t\t\t\tif (gearRules) {\r\n\t\t\t\t\t\t\t\t$html.attr(\"gearRules\", gearRules);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t$html.attr(\"_options\", options);\r\n\t\t\t\t\t\t\t$obj.empty().append($html);\r\n\t\t\t\t\t\t\t$html.combogrid();\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tgetVal : function(pnlObj) {\r\n\t\t\t\t\t\t\tvar comp = $(pnlObj).attr(\"id\") + \"-comp\";\r\n\t\t\t\t\t\t\treturn $(pnlObj).find('#' + comp)\r\n\t\t\t\t\t\t\t\t\t.combogrid('getValue');\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tgetTxt : function(pnlObj) {\r\n\t\t\t\t\t\t\tvar comp = $(pnlObj).attr(\"id\") + \"-comp\";\r\n\t\t\t\t\t\t\treturn $(pnlObj).find('#' + comp)\r\n\t\t\t\t\t\t\t\t\t.combogrid('getText');\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tgetEditor:function(pnlObj){\r\n\t\t\t\t\t\t\t\tvar comp = $(pnlObj).attr(\"id\") + \"-comp\";\r\n\t\t\t\t\t\t\t\treturn $(pnlObj).find('#' + comp).data(\"combogrid\");\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\txtype:'combogrid'\r\n\t\t\t\t\t},\r\n\t\t\t\t\t\"COMBOZTREE\" : {// 下拉树\r\n\t\t\t\t\t\tinit : function(pnlObj, colVal, rowIndex, colIndex,\r\n\t\t\t\t\t\t\t\tcolModel, colTxt, attachHiddens) {// 组件创建\r\n\t\t\t\t\t\t\tvar $obj = $(pnlObj), id = $obj.attr(\"id\")\r\n\t\t\t\t\t\t\t\t\t+ \"-comp\";// 生成ID\r\n\t\t\t\t\t\t\tvar options = colModel[colIndex].editOptions;\r\n\t\t\t\t\t\t\tvar name = colModel[colIndex].name, validations = colModel[colIndex].validations\r\n\t\t\t\t\t\t\t// ,events = colModel[colIndex].events\r\n\t\t\t\t\t\t\t, required = colModel[colIndex].required, requiredMsg = colModel[colIndex].requiredMsg, gearRules = colModel[colIndex].gearRules;\r\n\r\n\t\t\t\t\t\t\tvar $html = $(\"<input id=\\\"\"\r\n\t\t\t\t\t\t\t\t\t+ id\r\n\t\t\t\t\t\t\t\t\t+ \"\\\" name=\\\"\"\r\n\t\t\t\t\t\t\t\t\t+ name\r\n\t\t\t\t\t\t\t\t\t+ \"\\\" class=\\\"app-comboztree\\\" width=\\\"100%\\\">\");\r\n\t\t\t\t\t\t\tif (validations) {\r\n\t\t\t\t\t\t\t\t$html.attr(\"validations\", validations);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tif (required) {\r\n\t\t\t\t\t\t\t\t$html.attr(\"required\", true);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tif (requiredMsg) {\r\n\t\t\t\t\t\t\t\t$html.attr(\"requiredMsg\", requiredMsg);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tif (gearRules) {\r\n\t\t\t\t\t\t\t\t$html.attr(\"gearRules\", gearRules);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tif (options){\r\n\t\t\t\t\t\t\t\t\toptions=options.replace(/{/,'{keyShowPanel:[220], ');\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tif(options){\r\n\t\t\t\t\t\t\t\t$html.attr(\"_options\", options);\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\tif (colModel[colIndex].showField) {\r\n\t\t\t\t\t\t\t\tvar fopt = colModel[colIndex][\"formatoptions\"];\r\n\t\t\t\t\t\t\t\tvar rowdata = $(this).jqGrid('getRowData',\r\n\t\t\t\t\t\t\t\t\t\tthis.p.selrow);\r\n\t\t\t\t\t\t\t\tcolTxt = colModel[colIndex].formatter(colVal,\r\n\t\t\t\t\t\t\t\t\t\tfopt, rowdata);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t$html.attr(\"value\", colVal);\r\n\t\t\t\t\t\t\t$html.attr(\"text\", colTxt);\r\n\t\t\t\t\t\t\t// p.text=colTxt;\r\n\t\t\t\t\t\t\t// p.value=colVal;\r\n\r\n\t\t\t\t\t\t\t$obj.empty().append($html);\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t$html.comboztree()\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tgetVal : function(pnlObj) {\r\n\t\t\t\t\t\t\tvar comp = $(pnlObj).attr(\"id\") + \"-comp\";\r\n\t\t\t\t\t\t\treturn $(pnlObj).find('#' + comp)\r\n\t\t\t\t\t\t\t\t\t.comboztree('getValue');\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tgetTxt : function(pnlObj) {\r\n\t\t\t\t\t\t\tvar comp = $(pnlObj).attr(\"id\") + \"-comp\";\r\n\t\t\t\t\t\t\treturn $(pnlObj).find('#' + comp)\r\n\t\t\t\t\t\t\t\t\t.comboztree('getText');\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tgetEditor:function(pnlObj){\r\n\t\t\t\t\t\t\t\tvar comp = $(pnlObj).attr(\"id\") + \"-comp\";\r\n\t\t\t\t\t\t\t\treturn $(pnlObj).find('#' + comp).data(\"comboztree\");\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\txtype:'comboztree'\r\n\t\t\t\t\t},\r\n\t\t\t\t\t\"COMBOBOX\" : {// 下拉列表\r\n\t\t\t\t\t\tinit : function(pnlObj, colVal, rowIndex, colIndex,\r\n\t\t\t\t\t\t\t\tcolModel, colTxt, attachHiddens) {// 组件创建\r\n\t\t\t\t\t\t\tvar $obj = $(pnlObj), id = $obj.attr(\"id\")\r\n\t\t\t\t\t\t\t\t\t+ \"-comp\";// 生成ID\r\n\t\t\t\t\t\t\tvar options = colModel[colIndex].editOptions||{};\r\n\t\t\t\t\t\t\tvar name = colModel[colIndex].name, validations = colModel[colIndex].validations, required = colModel[colIndex].required, requiredMsg = colModel[colIndex].requiredMsg, gearRules = colModel[colIndex].gearRules;\r\n\t\t\t\t\t\t\tvar suggest = false;\r\n\t\t\t\t\t\t\tif (options.suggest != null) {\r\n\t\t\t\t\t\t\t\tsuggest = true;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t/*\tif (options){\r\n\t\t\t\t\t\t\t\t\toptions=options.replace(/{/,'{keyShowPanel:[220], ');\r\n\t\t\t\t\t\t\t}*/\r\n\t\t\t\t\t\t\tvar $html = $(\"<input id=\\\"\"\r\n\t\t\t\t\t\t\t\t\t+ id\r\n\t\t\t\t\t\t\t\t\t+ \"\\\" name=\\\"\"\r\n\t\t\t\t\t\t\t\t\t+ name\r\n\t\t\t\t\t\t\t\t\t+ \"\\\" class=\\\"app-combobox\\\"  width=\\\"100%\\\"  />\");\r\n\t\t\t\t\t\t\t$html.attr(\"suggest\", suggest);\r\n\t\t\t\t\t\t\tif (validations) {\r\n\t\t\t\t\t\t\t\t$html.attr(\"validations\", validations);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tif (required) {\r\n\t\t\t\t\t\t\t\t$html.attr(\"required\", true);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tif (requiredMsg) {\r\n\t\t\t\t\t\t\t\t$html.attr(\"requiredMsg\", requiredMsg);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tif (gearRules) {\r\n\t\t\t\t\t\t\t\t$html.attr(\"gearRules\", gearRules);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tif(options){\r\n\t\t\t\t\t\t\t\t$html.attr(\"_options\", options);\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\tif (colModel[colIndex].showField) {\r\n\t\t\t\t\t\t\t\tvar fopt = colModel[colIndex][\"formatoptions\"];\r\n\t\t\t\t\t\t\t\tvar rowdata = $(this).jqGrid('getRowData',\r\n\t\t\t\t\t\t\t\t\t\tthis.p.selrow);\r\n\t\t\t\t\t\t\t\t\t\tif ( colModel[colIndex].formatter){\r\n\t\t\t\t\t\t\t\tcolTxt = colModel[colIndex].formatter(colVal,\r\n\t\t\t\t\t\t\t\t\t\tfopt, rowdata);\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t$html.attr(\"value\", colVal);\r\n\t\t\t\t\t\t\t$html.attr(\"text\", colTxt);\r\n\r\n\t\t\t\t\t\t\t$obj.empty().append($html);\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t$html.combobox()\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tgetVal : function(pnlObj) {\r\n\t\t\t\t\t\t\tvar comp = $(pnlObj).attr(\"id\") + \"-comp\";\r\n\t\t\t\t\t\t\treturn $(pnlObj).find('#' + comp)\r\n\t\t\t\t\t\t\t\t\t.combobox('getValue');\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tgetTxt : function(pnlObj) {\r\n\t\t\t\t\t\t\tvar comp = $(pnlObj).attr(\"id\") + \"-comp\";\r\n\t\t\t\t\t\t\treturn $(pnlObj).find('#' + comp)\r\n\t\t\t\t\t\t\t\t\t.combobox('getText');\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tgetEditor:function(pnlObj){\r\n\t\t\t\t\t\t\t\tvar comp = $(pnlObj).attr(\"id\") + \"-comp\";\r\n\t\t\t\t\t\t\t\treturn $(pnlObj).find('#' + comp).data(\"combobox\");\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\txtype:'combobox'\r\n\r\n\t\t\t\t\t},\r\n\t\t\t\t\t\"REFERENCE\" : {// 下拉引用\r\n\t\t\t\t\t\tinit : function(pnlObj, colVal, rowIndex, colIndex,\r\n\t\t\t\t\t\t\t\tcolModel, colTxt, attachHiddens) {// 组件创建\r\n\t\t\t\t\t\t\tvar $obj = $(pnlObj), id = $obj.attr(\"id\")\r\n\t\t\t\t\t\t\t\t\t+ \"-comp\";// 生成ID\r\n\t\t\t\t\t\t\tvar name = colModel[colIndex].name, url = colModel[colIndex].url, validations = colModel[colIndex].validations, events = colModel[colIndex].events, required = colModel[colIndex].required, requiredMsg = colModel[colIndex].requiredMsg, gearRules = colModel[colIndex].gearRules;\r\n\t\t\t\t\t\t\tvalidations = (validations ? ' validations=\"'\r\n\t\t\t\t\t\t\t\t\t+ validations + '\"' : '');\r\n\t\t\t\t\t\t\tevents = (events ? ' events=\"' + events + '\"' : '');\r\n\t\t\t\t\t\t\trequired = (required ? ' required=\"true\"' : '');\r\n\t\t\t\t\t\t\trequiredMsg = (requiredMsg ? ' requiredMsg=\"'\r\n\t\t\t\t\t\t\t\t\t+ requiredMsg + '\"' : '');\r\n\t\t\t\t\t\t\tgearRules = (gearRules ? ' gearRules=\"' + gearRules\r\n\t\t\t\t\t\t\t\t\t+ '\"' : '');\r\n\r\n\t\t\t\t\t\t\turl = (url ? ' action=\"' + url + '\" ' : '');\r\n\t\t\t\t\t\t\tvar html = '<input id=\"' + id + '\"  name=\"' + name\r\n\t\t\t\t\t\t\t\t\t+ '\"  value=\"' + colVal + '\" text=\"'\r\n\t\t\t\t\t\t\t\t\t+ colTxt + '\" ';\r\n\t\t\t\t\t\t\thtml += ' class=\"app-reference\" width=\"98%\"';\r\n\t\t\t\t\t\t\thtml += validations + events + required\r\n\t\t\t\t\t\t\t\t\t+ requiredMsg + gearRules + url + ' />';\r\n\t\t\t\t\t\t\tvar options = colModel[colIndex].editOptions;\r\n\t\t\t\t\t\t\tvar $el = $(html);\r\n\t\t\t\t\t\t\tif(options){\r\n\t\t\t\t\t\t\t\t$el.attr(\"_options\",options);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t$obj.html($el);\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t$el.reference()\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tgetVal : function(pnlObj) {\r\n\t\t\t\t\t\t\tvar comp = $(pnlObj).attr(\"id\") + \"-comp\";\r\n\t\t\t\t\t\t\treturn $(pnlObj).find('#' + comp)\r\n\t\t\t\t\t\t\t\t\t.reference('getValue');\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tgetTxt : function(pnlObj) {\r\n\t\t\t\t\t\t\tvar comp = $(pnlObj).attr(\"id\") + \"-comp\";\r\n\t\t\t\t\t\t\treturn $(pnlObj).find('#' + comp)\r\n\t\t\t\t\t\t\t\t\t.reference('getText');\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tgetEditor:function(pnlObj){\r\n\t\t\t\t\t\t\t\tvar comp = $(pnlObj).attr(\"id\") + \"-comp\";\r\n\t\t\t\t\t\t\t\treturn $(pnlObj).find('#' + comp).data(\"reference\");\r\n\t\t\t\t\t\t} ,\r\n\t\t\t\t\t\txtype:'reference'\r\n\t\t\t\t\t},\r\n\t\t\t\t\t\"DATETIME\" : {\r\n\t\t\t\t\t\tinit : function(pnlObj, colVal, rowIndex, colIndex,\r\n\t\t\t\t\t\t\t\tcolModel, colTxt, attachHiddens) {// 组件创建\r\n\t\t\t\t\t\t\tvar $obj = $(pnlObj), id = $obj.attr(\"id\")\r\n\t\t\t\t\t\t\t\t\t+ \"-comp\";// 生成ID\r\n\t\t\t\t\t\t\tvar name = colModel[colIndex].name;\r\n\t\t\t\t\t\t\tvar width = $obj.width() - 30;\r\n\t\t\t\t\t\t\tvar options = colModel[colIndex].editOptions;\r\n\r\n\t\t\t\t\t\t\tvar validations = colModel[colIndex].validations, events = colModel[colIndex].events, required = colModel[colIndex].required, requiredMsg = colModel[colIndex].requiredMsg, gearRules = colModel[colIndex].gearRules;\r\n\t\t\t\t\t\t\tvalidations = (validations ? ' validations=\"'\r\n\t\t\t\t\t\t\t\t\t+ validations + '\"' : '');\r\n\t\t\t\t\t\t\tevents = (events ? ' events=\"' + events + '\"' : '');\r\n\t\t\t\t\t\t\trequired = (required ? ' required=\"true\"' : '');\r\n\t\t\t\t\t\t\trequiredMsg = (requiredMsg ? ' requiredMsg=\"'\r\n\t\t\t\t\t\t\t\t\t+ requiredMsg + '\"' : '');\r\n\t\t\t\t\t\t\tgearRules = (gearRules ? ' gearRules=\"' + gearRules\r\n\t\t\t\t\t\t\t\t\t+ '\"' : '');\r\n\r\n\t\t\t\t\t\t\tvar html = '';\r\n\t\t\t\t\t\t\thtml += '<input class=\"app-datetime\" id=\"' + id\r\n\t\t\t\t\t\t\t\t\t+ '\" name=\"' + name + '\" ';\r\n\t\t\t\t\t\t\thtml += ' value=\"' + colVal + '\" width=\"98%\"';\r\n\t\t\t\t\t\t\thtml +=  validations + events + required\r\n\t\t\t\t\t\t\t\t\t+ requiredMsg + gearRules + '/>';\r\n\t\t\t\t\t\t\tvar $el = $(html);\r\n\t\t\t\t\t\t\t$el.attr(\"_options\",options);\r\n\t\t\t\t\t\t\t$obj.html($el);\r\n\t\t\t\t\t\t\t$el.datetime();\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tgetVal : function(pnlObj) {\r\n\t\t\t\t\t\t\tvar comp = $(pnlObj).attr(\"id\") + \"-comp\";\r\n\t\t\t\t\t\t\treturn $(pnlObj).find('#' + comp)\r\n\t\t\t\t\t\t\t\t\t.datetime('getValue');\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tgetTxt : function(pnlObj) {\r\n\t\t\t\t\t\t\treturn this.getVal(pnlObj);\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tgetEditor:function(pnlObj){\r\n\t\t\t\t\t\t\t\tvar comp = $(pnlObj).attr(\"id\") + \"-comp\";\r\n\t\t\t\t\t\t\t\treturn $(pnlObj).find('#' + comp).data(\"datetimepicker\");\r\n\t\t\t\t\t\t} ,\r\n\t\t\t\t\t\txtype:'datetimepicker'\r\n\t\t\t\t\t}\r\n\t\t\t\t\t ,\"NUMBER\":{\r\n\t\t\t\t\t\t init:function(pnlObj, colVal, rowIndex, colIndex,\r\n\t\t\t\t\t\t\t\tcolModel, colTxt, attachHiddens){\r\n\t\t\t\t\t\t \tvar $obj = $(pnlObj), id = $obj.attr(\"id\")\r\n\t\t\t\t\t\t\t\t\t+ \"-comp\";// 生成ID;\r\n\t\t\t\t\t\t\tvar name = colModel[colIndex].name, validations = colModel[colIndex].validations, events = colModel[colIndex].events, required = colModel[colIndex].required, requiredMsg = colModel[colIndex].requiredMsg, gearRules = colModel[colIndex].gearRules;\r\n\t\t\t\t\t\t\tvalidations = (validations ? ' validations=\"'\r\n\t\t\t\t\t\t\t\t\t+ validations + '\"' : '');\r\n\t\t\t\t\t\t\tevents = (events ? ' events=\"' + events + '\"' : '');\r\n\t\t\t\t\t\t\trequired = (required ? ' required=\"true\"' : '');\r\n\t\t\t\t\t\t\trequiredMsg = (requiredMsg ? ' requiredMsg=\"'\r\n\t\t\t\t\t\t\t\t\t+ requiredMsg + '\"' : '');\r\n\t\t\t\t\t\t\tgearRules = (gearRules ? ' gearRules=\"' + gearRules\r\n\t\t\t\t\t\t\t\t\t+ '\"' : '');\r\n\t\t\t\t\t\t\tvar options = colModel[colIndex].editOptions;\r\n\r\n\t\t\t\t\t\t\tvar html = '<input type=\"text\" id=\"' + id\r\n\t\t\t\t\t\t\t\t\t+ '\" name=\"' + name + '\" ';\r\n\t\t\t\t\t\t\thtml += ' value=\"' + colVal + '\" ' + validations\r\n\t\t\t\t\t\t\t\t\t+ events + required + requiredMsg\r\n\t\t\t\t\t\t\t\t\t+ gearRules\r\n\t\t\t\t\t\t\t\t\t+ ' class=\"app-number\" width=\"100%\"/>';\r\n\t\t\t\t\t\t\tvar $el = $(html);\r\n\t\t\t\t\t\t\tif(options){\r\n\t\t\t\t\t\t\t\t$el.attr(\"_options\",options);\r\n\t\t\t\t\t\t\t};\r\n\t\t\t\t\t\t\t$obj.html($el);\r\n\t\t\t\t\t\t\t$el.number();\r\n\t\t\t\t\t\t },getVal : function(pnlObj) {\r\n\t\t\t\t\t\t\tvar comp = $(pnlObj).attr(\"id\") + \"-comp\";\r\n\t\t\t\t\t\t\treturn $(pnlObj).find('#' + comp)\r\n\t\t\t\t\t\t\t\t\t.number('getValue');\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tgetEditor:function(pnlObj){\r\n\t\t\t\t\t\t\t\tvar comp = $(pnlObj).attr(\"id\") + \"-comp\";\r\n\t\t\t\t\t\t\t\treturn $(pnlObj).find('#' + comp).data(\"number\");\r\n\t\t\t\t\t\t} \r\n\t\t\t\t\t \t,\r\n\t\t\t\t\t\txtype:'number'\r\n\t\t\t\t\t }\r\n\t\t\t\t};\r\n\t\t\t}\r\n\t\t\tvar getDefaultCompent=$.jgrid.getDefaultCompent;\r\n\t\t\t$.extend($.jgrid,{getDefaultCompent:function(){\r\n\t\t\t\t\treturn $.extend(true,getDefaultCompent(),extendCompent());\r\n\t\t\t}});\r\n\t\t\t\r\n\t\t\t/**\r\n\t\t\t * 取得jqGrid的jquery对象\r\n\t\t\t */\r\n\t\t\t$.fn.getJqGrid = function() {\r\n\t\t\t\tvar $this = $(this);\r\n\t\t\t\tif (!$this.isGrid())\r\n\t\t\t\t\treturn null;\r\n\t\t\t\t\r\n\t\t\t\tif ($this.attr(\"jqgrid\") == \"true\")\r\n\t\t\t\t\treturn $this;\r\n\t\t\t\tif ($this.length>1){\r\n\t\t\t\t\tvar ids=[];\r\n\t\t\t\t\t$this.each(function(){\r\n\t\t\t\t\t\tvar tem=$(this);\r\n\t\t\t\t\t\tids.push(\"#\" + tem.attr(\"jqgridid\"));\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t})\r\n\t\t\t\t\treturn  $(ids.join(\",\"))\r\n\t\t\t\t}else{\r\n\t\t\t\t\treturn $(\"#\" + $this.attr(\"jqgridid\"));\r\n\t\t\t\t}\r\n\t\t\t};\r\n\t\t\t/**\r\n\t\t\t * 判断当前对象是否是jqgrid对象\r\n\t\t\t */\r\n\t\t\t$.fn.isGrid = function() {\r\n\t\t\t\treturn $(this).attr(\"jqgrid\") == \"true\"\r\n\t\t\t\t\t\t|| $(this).attr(\"jqgridid\");\r\n\t\t\t};\r\n\t\t\t/**\r\n\t\t\t * 初始化jqgrid方法\r\n\t\t\t */\r\n\t\t\t$.fn.initJqGrid = function() {\r\n\t\t\t\tthis.each(function() {\r\n\t\t\t\t\tvar $this = $(this)\r\n\t\t\t\t\t\t,$container = $this.parent(\".grid-container\")\r\n\t\t\t\t\t\t,id = $this.attr(\"id\")|| (\"jqgrid\" + $A.nextId())\r\n\t\t\t\t\t\t,url = $this.attr(\"url\")\r\n\t\t\t\t\t\t,dataType = $this.attr(\"dataType\")|| \"json\"\r\n\t\t\t\t\t\t,autoLoad = !($this.attr(\"autoLoad\") == \"false\") \r\n\t\t\t\t\t\t,usePage = !($this.attr(\"usePage\") == \"false\")\r\n\t\t\t\t\t\t,pageId = $this.attr(\"pageId\")\r\n\t\t\t\t\t\t,pageList = $this.attr(\"pageList\")? $this.attr(\"pageList\").split(\",\"): $options.jqgrid.pageList\r\n\t\t\t\t\t\t,rowNum = ($this.attr(\"pageSize\") || pageList[0])* 1\r\n\t\t\t\t\t\t,sortname = $this.attr(\"sortname\")\r\n\t\t\t\t\t\t,sortorder = $this.attr(\"sortorder\")|| \"asc\"\r\n\t\t\t\t\t\t,height = $this.attr(\"height\")\r\n\t\t\t\t\t\t,width = $container.width()\r\n\t\t\t\t\t\t,showFooter = $this.attr(\"showFooter\") == \"true\"\r\n\t\t\t\t\t\t,manualFooter = $this.attr(\"manualFooter\") == \"true\"\r\n\t\t\t\t\t\t,page = ($this.attr(\"page\") || 1)* 1\r\n\t\t\t\t\t\t,method = $this.attr(\"method\") || \"POST\"\r\n\t\t\t\t\t\t,multiselect = $this.attr(\"checkboxable\") == \"true\"\r\n\t\t\t\t\t\t,loadOnce = $this.attr(\"loadOnce\") == \"true\"\r\n\t\t\t\t\t\t,striped = $this.attr(\"striped\") != \"false\"\r\n\t\t\t\t\t\t,treeGrid = $this.attr(\"treeGrid\") == \"true\"\r\n\t\t\t\t\t\t,multiboxonly = ($this.attr(\"checkboxOnly\") != \"false\")\r\n\t\t\t\t\t\t,autoHeight = ($this.attr(\"autoHeight\") != \"false\")\r\n\t\t\t\t\t\t,shrinkToFit = ($this.attr(\"shrinkToFit\") != \"false\")\r\n\t\t\t\t\t\t,repeatitems = ($this.attr(\"repeatitems\") != \"false\")\r\n\t\t\t\t\t\t,events = $this.attr(\"events\")\r\n\t\t\t\t\t\t,params = $this.attr(\"params\")\r\n\t\t\t\t\t\t,transor = $this.attr(\"transor\")\r\n\t\t\t\t\t\t,jsonReader = $this.attr(\"jsonReader\")\r\n\t\t\t\t\t\t,editRow = $this.attr(\"editRow\") == \"true\" // 是否可以编辑行\r\n\t\t\t\t\t\t,editUrl = $this.attr(\"editUrl\")// 编辑提交地址\r\n\t\t\t\t\t\t,editSuccesfunc = $this.attr(\"editSuccesfunc\")// 编辑保存成功执行的函数名\r\n\t\t\t\t\t\t,rownumbers = true\r\n\t\t\t\t\t\t,fit =  $this.attr(\"fit\")==\"true\"\r\n\t\t\t\t\t\t,gridheaders=$this.attr(\"gridheaders\")\r\n\t\t\t\t\t\t,fillNum=$this.attr(\"fillNum\")\r\n\t\t\t\t\t\t,gridExport=$this.attr(\"export\")== \"true\",\r\n\t\t\t\t\t\tfileName=$this.attr(\"fileName\"),\r\n\t\t\t\t\t\textOptions=$this.attr(\"extOptions\");\r\n\r\n\t\t\t\t\tif (typeof($this.attr(\"rownumbers\")) != \"undefined\") {\r\n\t\t\t\t\t\trownumbers = ($this.attr(\"rownumbers\") == \"true\");\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (height && height.indexOf(\"px\")) {\r\n\t\t\t\t\t\theight = height.replace(\"px\", \"\");\r\n\t\t\t\t\t}\r\n\t\t\t\t//\tif (!usePage) {\r\n\t\t\t\t\t\t//$this.attr(\"pageHeight\", \"0\");\r\n\t\t\t\t\t//} else {\r\n\t\t\t\t\t\t//$this.attr(\"pageHeight\", \"33\");\r\n\t\t\t\t\t\t//height = height - 33;\r\n\t\t\t\t\t//}\r\n\t\t\t\t\tif (autoHeight) {\r\n\t\t\t\t\t\theight = \"100%\";\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tvar cols = [], colNames = [], $colTds = $(\"thead>tr>th\",\r\n\t\t\t\t\t\t\t$this), colFuncs = [];\r\n\t\t\t\t\t$colTds.each(function() {\r\n\t\t\t\t\t\tvar $o = $(this), label = $o.html() || \"\"\r\n\t\t\t\t\t\t\t\t, name = $o.attr(\"name\")|| $o.attr(\"id\") || $o.attr(\"field\") || label\r\n\t\t\t\t\t\t\t\t, field = $o.attr(\"field\")|| name\r\n\t\t\t\t\t\t\t\t, valueField = $o.attr(\"valueField\")\r\n\t\t\t\t\t\t\t\t, w = $o.attr(\"width\"), sortable = $o.attr(\"sortable\") == \"true\"? true: false\r\n\t\t\t\t\t\t\t\t, align = ($o.attr(\"align\") || \"left\").toLowerCase()\r\n\t\t\t\t\t\t\t\t, columnType = $o.attr(\"columnType\")\r\n\t\t\t\t\t\t\t\t, columnContent = $o.attr(\"columnContent\")\r\n\t\t\t\t\t\t\t\t, columnHeadFunc = $o.attr(\"columnHeadFunc\")\r\n\t\t\t\t\t\t\t\t, hidden = $o.attr(\"chidden\") == \"true\"\r\n\t\t\t\t\t\t\t\t, formatterType = $o.attr(\"formatterType\")\r\n\t\t\t\t\t\t\t\t, formatter = $o.attr(\"formatter\")\r\n\t\t\t\t\t\t\t\t, foptions = $o.attr(\"formatterOptions\")\r\n\t\t\t\t\t\t\t\t, editable = $o.attr(\"editable\") != \"false\"\r\n\t\t\t\t\t\t\t\t, edittype = $o.attr(\"edittype\")? $o.attr(\"edittype\"): \"TEXTBOX\"\r\n\t\t\t\t\t\t\t\t, editOptions = $o.attr(\"editOptions\")\r\n\t\t\t\t\t\t\t\t, footerType = $o.attr(\"footerType\")\r\n\t\t\t\t\t\t\t\t, footerDef = $o.attr(\"footerDef\")\r\n\t\t\t\t\t\t\t\t, footerFormatter = $o.attr(\"footerFormatter\")\r\n\t\t\t\t\t\t\t\t, required = $o.attr(\"required\") && true\r\n\t\t\t\t\t\t\t\t, requiredMsg = $o.attr(\"requiredMsg\")\r\n\t\t\t\t\t\t\t\t, gearRules = $o.attr(\"gearRules\")\r\n\t\t\t\t\t\t\t\t, events = $o.attr(\"events\")\r\n\t\t\t\t\t\t\t\t, url = $o.attr(\"url\")\r\n\t\t\t\t\t\t\t\t, frozen = $o.attr(\"frozen\")\r\n\t\t\t\t\t\t\t\t, showField = $o.attr(\"showField\")\r\n\t\t\t\t\t\t\t\t, validations = $o.attr(\"validations\")// \"校验选项\"\r\n\t\t\t\t\t\t\t\t, colTransor = $o.attr(\"transor\")// \"校验选项\"\r\n\t\t\t\t\t\t\t\t,autoencode = true;//是否自动encode\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\tif (required && edittype != \"RADIOBOX\") {\r\n\t\t\t\t\t\t\tlabel = '<span class=\\\"required\\\">*</span>' + label;\r\n\t\t\t\t\t\t\tautoencode = false;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (footerDef) {\r\n\t\t\t\t\t\t\tfooterDef = footerDef.toLowerCase();\r\n\t\t\t\t\t\t\tif (footerType == \"TEXT\") {\r\n\t\t\t\t\t\t\t\tfooterDef =footerDef;\r\n\t\t\t\t\t\t\t} else if (footerType == \"FORMULA\") {\r\n\t\t\t\t\t\t\t\tfooterDef = $o.getJsFunction(footerDef);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tvar isTransor=false;\r\n\t\t\t\t\t\tif (colTransor){\r\n\t\t\t\t\t\t\tisTransor=true;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tvar c = {\r\n\t\t\t\t\t\t\tname : name,\r\n\t\t\t\t\t\t\tindex : field,\r\n\t\t\t\t\t\t\tsortable : sortable,\r\n\t\t\t\t\t\t\talign : align,\r\n\t\t\t\t\t\t\thidden : hidden,\r\n\t\t\t\t\t\t\trequired : required,\r\n\t\t\t\t\t\t\trequiredMsg : requiredMsg,\r\n\t\t\t\t\t\t\tsummaryType : footerDef,\r\n\t\t\t\t\t\t\tsummaryTpl : footerFormatter,\r\n\t\t\t\t\t\t\tvalidations : validations,\r\n\t\t\t\t\t\t\tevents : events,\r\n\t\t\t\t\t\t\tfooterType:footerType,\r\n\t\t\t\t\t\t\teditable : editable,\r\n\t\t\t\t\t\t\tedittype : edittype,\r\n\t\t\t\t\t\t\teditOptions : editOptions,\r\n\t\t\t\t\t\t\turl : url,\r\n\t\t\t\t\t\t\tisTransor:colTransor,\r\n\t\t\t\t\t\t\tcolumnHeadFunc : columnHeadFunc,// 20140925\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t// sjq新增表头内容替换允许字符串或Js\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t// Function\r\n\t\t\t\t\t\t\tvalueField : valueField,\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\"attachField\" : $o.attr(\"attachField\"),\r\n\t\t\t\t\t\t\t\"validations\" : validations,\r\n\t\t\t\t\t\t\t\"gearRules\" : gearRules,\r\n\t\t\t\t\t\t\tfrozen : frozen,\r\n\t\t\t\t\t\t\t//add by tw\r\n\t\t\t\t\t\t\t//新增参数，设置该列是否自动encode\r\n\t\t\t\t\t\t\t\"autoencode\":autoencode\r\n\t\t\t\t\t\t};\r\n\t\t\t\t\t\tif (formatter) {\r\n\t\t\t\t\t\t\tif (foptions) {\r\n\t\t\t\t\t\t\t\tfoptions = $A.jsonEval(foptions);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tif (formatterType == \"FUNC\") {\r\n\t\t\t\t\t\t\t\tformatter = $o.getJsFunction(\"return \"\r\n\t\t\t\t\t\t\t\t\t\t+ formatter)();\r\n\t\t\t\t\t\t\t} else if (formatterType == \"TEMPLATE\") {\r\n\t\t\t\t\t\t\t\tif (!foptions) {\r\n\t\t\t\t\t\t\t\t\tfoptions = {};\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tfoptions.template = formatter;\r\n\t\t\t\t\t\t\t\tformatter = templateFormat;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tc[\"formatter\"] = formatter;\r\n\t\t\t\t\t\t\tc[\"formatoptions\"] = foptions;\r\n\t\t\t\t\t\t\tc[\"autoencode\"] = false;\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tif (showField) {\r\n\t\t\t\t\t\t\tc[\"showField\"] = showField;\r\n\t\t\t\t\t\t\tc[\"formatter\"] = function(cellvalue, options,\r\n\t\t\t\t\t\t\t\t\trowdata) {\r\n\t\t\t\t\t\t\t\tvar txt = \"\";\r\n\t\t\t\t\t\t\t\tvar v = rowdata[showField];\r\n\t\t\t\t\t\t\t\tif (v) {\r\n\t\t\t\t\t\t\t\t\ttxt = v;\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\treturn txt;\r\n\t\t\t\t\t\t\t};\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tif (w)\r\n\t\t\t\t\t\t\tc[\"width\"] = w;\r\n\t\t\t\t\t\tif (columnType == \"FUNC\" || columnType == \"TEMPLATE\"\r\n\t\t\t\t\t\t\t\t|| columnType == \"OP\") {\r\n\t\t\t\t\t\t\tcolFuncs.push({\r\n\t\t\t\t\t\t\t\t\t\tname : name,\r\n\t\t\t\t\t\t\t\t\t\tcontent : columnContent,\r\n\t\t\t\t\t\t\t\t\t\ttype : columnType\r\n\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t//add by tw\r\n\t\t\t\t\t\t\t//如果是OP，FUNC或者是TEMPLATE则不自动encode\r\n\t\t\t\t\t\t\tc[\"autoencode\"] = false;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tc[\"columnType\"]=columnType;\r\n\t\t\t\t\t\tcolNames.push(label);\r\n\t\t\t\t\t\t// if(c.)\r\n\t\t\t\t\t\tcols.push(c);\r\n\t\t\t\t\t});\r\n\r\n\t\t\t\t\t// console.log(cols);\r\n\t\t\t\t\t$this.removeAttr(\"height\");\r\n\t\t\t\t\t$this.removeAttr(\"width\");\r\n\t\t\t\t\t$this.empty();\r\n\t\t\t\t\tif ($container.length > 0) {\r\n\t\t\t\t\t\t/* 无数据提示层 */\r\n\t\t\t\t\t\t$container.find(\".grid-info\")\r\n\t\t\t\t\t\t\t\t.html($.jgrid.defaults.emptyrecords);\r\n\t\t\t\t\t\t/* 调整id,将jqgrid id改为全局唯一id */\r\n\t\t\t\t\t\t$container.attr(\"jqgridid\", id);\r\n\t\t\t\t\t\t$this.attr(\"id\", id);\r\n\t\t\t\t\t\tvar conid = $container.attr(\"id\");\r\n\t\t\t\t\t\t$this.attr(\"origionId\", conid || id);\r\n\r\n\t\t\t\t\t\t// $(\"#\"+conid+\"_gridinfo\",$container).attr(id,id+\"_gridinfo\");\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tvar newid = \"jqgrid\" + $A.nextId();\r\n\t\t\t\t\t\t$this.attr(\"id\", newid);\r\n\t\t\t\t\t\t$this.attr(\"origionId\", id);\r\n\t\t\t\t\t\t// var $refDiv = $(\"<div id=\\\"\"+id+\"\\\"\r\n\t\t\t\t\t\t// jqgridid=\\\"\"+newid+\"\\\"\r\n\t\t\t\t\t\t// style='display:none;'></div>\");\r\n\t\t\t\t\t\t// $this.after($refDiv);\r\n\t\t\t\t\t\t// console.log(\"add\");\r\n\t\t\t\t\t\tid = newid;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (usePage) {\r\n\t\t\t\t\t\tvar $page = $A(\"#\" + pageId);\r\n\t\t\t\t\t\tif ($page.size() > 0) {\r\n\t\t\t\t\t\t\tpageId = id + \"_pageTool\";\r\n\t\t\t\t\t\t\t$page.attr(\"id\", pageId);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\r\n\t\t\t\t\t$this.attr(\"cwidth\", $container.width());\r\n\t\t\t\t\t$container.bind('_resize', function(e,isresize,w,h) {\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tvar p=$container.parent(\".layout-body,.panel-body\");\r\n\t\t\t\t\t\tif (p.length>0){\r\n\t\t\t\t\t\t if (fit == true) {\r\n\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tp.css(\"overflow\",\"hidden\");\r\n\t\t\t\t\t\t\t\t$container.innerWidth(w);\r\n\t\t\t\t\t\t\t\t$container.innerHeight(h);\r\n\t\t\t\t\t\t\t\t$this.jqGrid('setGridHeight', $container.height());\r\n\t\t\t\t\t\t\t\t$this.jqGrid('setGridWidth', $container.width());\r\n\t\t\t\t\t\t\t\t//p.css(\"overflow\",\"\");\r\n\t\t\t\t\t\t}else{\r\n\r\n\t\t\t\t\t\t\tif (p[0].offsetHeight<p[0].scrollHeight){\r\n\t\t\t\t\t\t\t\tw=w-18;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t$container.innerWidth(w);\r\n\t\t\t\t\t\t\t$this.jqGrid('setGridWidth', $container.width());\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t});\r\n\t\t\t\t\t/**\r\n\t\t\t\t\t * 表格结束处理方法\r\n\t\t\t\t\t */\r\n\t\t\t\t\tvar gridComplete = ($container.length == 0 && colFuncs.length == 0)? null: function() {\r\n\t\t\t\t\t\t\t\tvar ids = $this.jqGrid('getDataIDs');\t\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\tif ($container.length > 0) {\r\n\t\t\t\t\t\t\t\t\tvar $gridInfo = $container.find(\".grid-info\");\r\n\t\t\t\t\t\t\t\t\tif (ids.length == 0) {\r\n\t\t\t\t\t\t\t\t\t\t$gridInfo.css(\"display\", \"\");\r\n\t\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\t\t$gridInfo.css(\"display\", \"none\");\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\tvar rc = $this.jqGrid('getGridParam','reccount');\r\n\t\t\t\t\t\t\t\tif (rc == 0){\r\n\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\tif (fillNum) {\r\n\r\n\t\t\t\t\t\t\t\t\t\tfillNum = parseInt(fillNum, 10);\r\n\t\t\t\t\t\t\t\t\t\tvar rowid, rowDatas = [];\r\n\t\t\t\t\t\t\t\t\t\tif (ids <= 0) {\r\n\r\n\t\t\t\t\t\t\t\t\t\t\tfor (var i = 0; i < fillNum; i++) {\r\n\t\t\t\t\t\t\t\t\t\t\t\trowid = $.jgrid.randId();\r\n\t\t\t\t\t\t\t\t\t\t\t\trowData = {};\r\n\t\t\t\t\t\t\t\t\t\t\t\t// rowData[reader.id] = rowid;\r\n\t\t\t\t\t\t\t\t\t\t\t\trowDatas.push(rowData);\r\n\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t$this.jqGrid(\"addRowData\", null,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\trowDatas);\r\n\t\t\t\t\t\t\t\t\t\t\twindow.setTimeout(function() {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tfillNum = 0;\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t\tif (colFuncs.length == 0)\r\n\t\t\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t\t\tfor (var i = 0; i < ids.length; i++) {\r\n\t\t\t\t\t\t\t\t\tvar cl = ids[i];\r\n\t\t\t\t\t\t\t\t\tfor (var j = 0; j < colFuncs.length; j++) {\r\n\t\t\t\t\t\t\t\t\t\tvar cf = colFuncs[j];\r\n\t\t\t\t\t\t\t\t\t\tvar cc;\r\n\t\t\t\t\t\t\t\t\t\tif (cf.type == \"FUNC\") {\r\n\t\t\t\t\t\t\t\t\t\t\tcc = $this.getJsFunction(\"return \"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t+ cf.content\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t+ \".apply(this,arguments)\")(\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t$this, cl);\r\n\t\t\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\t\t\tvar rowd = $this.jqGrid('getRowData', cl);\r\n\t\t\t\t\t\t\t\t\t\t\tif (!rowd.id) {\r\n\t\t\t\t\t\t\t\t\t\t\t\trowd.id = cl;\r\n\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\tcc = $template(cf.content, rowd);\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\tvar celld = {};\r\n\t\t\t\t\t\t\t\t\t\tcelld[cf.name] = cc;\r\n\t\t\t\t\t\t\t\t\t\t$this.jqGrid('setRowData', cl, celld);\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t};\r\n\t\t\t\t\t\t\t\t$(\"[handle][handleType=JS]\", $this).each(\r\n\t\t\t\t\t\t\t\t\t\tfunction() {\r\n\t\t\t\t\t\t\t\t\t\t\tvar $a = $(this);\r\n\t\t\t\t\t\t\t\t\t\t\tvar handle = $a.attr(\"handle\");\r\n\t\t\t\t\t\t\t\t\t\t\tif (!handle)\r\n\t\t\t\t\t\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t\t\t\t\t\tvar func = null;\r\n\t\t\t\t\t\t\t\t\t\t\ttry {\r\n\t\t\t\t\t\t\t\t\t\t\t\tfunc = $this\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t.getJsFunction(handle);\r\n\t\t\t\t\t\t\t\t\t\t\t} catch (e) {\r\n\t\t\t\t\t\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t$a.removeAttr(\"handle\");\r\n\t\t\t\t\t\t\t\t\t\t\t$a.click(function(e) {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tif ($a.isTag(\"a\"))\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\te.preventDefault();\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tif($a.attr(\"disabled\")||$a.hasClass(\"disabled\"))\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tfunc.call(this);\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t};\r\n\r\n\t\t\t\t\tif (jsonReader == null) {\r\n\t\t\t\t\t\tif (repeatitems) {\r\n\t\t\t\t\t\t\tjsonReader = {\r\n\t\t\t\t\t\t\t\troot : \"data\",\r\n\t\t\t\t\t\t\t\tpage : \"page\",\r\n\t\t\t\t\t\t\t\ttotal : \"totalPage\",\r\n\t\t\t\t\t\t\t\tcell : \"cell\",\r\n\t\t\t\t\t\t\t\trecords : \"totalRecords\",\r\n\t\t\t\t\t\t\t\tid : \"id\"\r\n\t\t\t\t\t\t\t};\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tjsonReader = {\r\n\t\t\t\t\t\t\t\troot : \"data\",\r\n\t\t\t\t\t\t\t\tpage : \"page\",\r\n\t\t\t\t\t\t\t\ttotal : \"totalPage\",\r\n\t\t\t\t\t\t\t\trecords : \"totalRecords\",\r\n\t\t\t\t\t\t\t\trepeatitems : false,\r\n\t\t\t\t\t\t\t\tid : \"id\"\r\n\t\t\t\t\t\t\t};\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tvar dt = autoLoad ? dataType : \"local\";\r\n\r\n\t\t\t\t\t// 组件扩展\r\n\t\t\t\t\tvar myCompent = extendCompent($(this));\r\n\t\t\t\t\t/**\r\n\t\t\t\t\t * 网格默认合计\r\n\t\t\t\t\t */\r\n\t\t\t\t\tvar gridTotal=function(){\r\n\t\t\t\t\t\tvar ids = $this.jqGrid('getDataIDs');\r\n\t\t\t\t\t\t\tvar summerObj = {};\r\n\t\t\t\t\t\t\tsummary = [];\r\n\t\t\t\t\t\t\tfor (var i = 0; i < cols.length; i++) {\r\n\t\t\t\t\t\t\t\tif (cols[i].summaryType) {\r\n\t\t\t\t\t\t\t\t\tsummary.push({\r\n\t\t\t\t\t\t\t\t\t\t\t\tnm : cols[i].name,\r\n\t\t\t\t\t\t\t\t\t\t\t\tst : cols[i].summaryType,\r\n\t\t\t\t\t\t\t\t\t\t\t\tformatter : cols[i].formatter,\r\n\t\t\t\t\t\t\t\t\t\t\t\tv : cols[i].footerType == \"TEXT\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t? cols[i].summaryType\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t: \"\",\r\n\t\t\t\t\t\t\t\t\t\t\t\tfooterType : cols[i].footerType\r\n\t\t\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tfor (var i = 0; i < ids.length; i++) {\r\n\t\t\t\t\t\t\t\tvar cl = ids[i];\r\n\t\t\t\t\t\t\t\tvar record = $this.jqGrid('getRowData', cl);\r\n\t\t\t\t\t\t\t\t$.each(summary, function() {\r\n\t\t\t\t\t\t\t\t\t\t\tif ($.isFunction(this.st)) {\r\n\t\t\t\t\t\t\t\t\t\t\t\tthis.v = this.st.call($this,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tthis.v, this.nm, record);\r\n\t\t\t\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\t\t\t\tif (this.footerType != \"TEXT\")\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tthis.v = $this\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t.jqGrid(\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t'groupingCalculations.handler',\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tthis.st,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tthis.v,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tthis.nm, null,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tnull, record);\r\n\t\t\t\t\t\t\t\t\t\t\t\t/*\r\n\t\t\t\t\t\t\t\t\t\t\t\t * if(this.st.toLowerCase() ===\r\n\t\t\t\t\t\t\t\t\t\t\t\t * 'avg' && this.sd) { this.vd =\r\n\t\t\t\t\t\t\t\t\t\t\t\t * $this.jqGrid('groupingCalculations.handler',this.st,\r\n\t\t\t\t\t\t\t\t\t\t\t\t * this.vd, this.sd, this.sr,\r\n\t\t\t\t\t\t\t\t\t\t\t\t * this.srt, record); }\r\n\t\t\t\t\t\t\t\t\t\t\t\t */\r\n\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t$.each(summary, function() {\r\n\t\t\t\t\t\t\t\t\t\tif ($.isFunction(this.formatter)) {\r\n\t\t\t\t\t\t\t\t\t\t\tthis.v = this.formatter.call(this,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tthis.v);\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\tsummerObj[this.nm] = this.v;\r\n\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t$this.footerData(\"set\", summerObj);\r\n\t\t\t\t\t};\r\n\r\n\t\t\t\t\tvar op = {\r\n\t\t\t\t\t\turl : url, /* 请求地址 */\r\n\t\t\t\t\t\tediturl : editUrl,// 编辑保存URL\r\n\t\t\t\t\t\tdatatype : dt,/* 数据类型 */\r\n\t\t\t\t\t\tmtype : method, /* 请求方法 */\r\n\t\t\t\t\t\tcolNames : colNames,\r\n\t\t\t\t\t\tcolModel : cols,\r\n\t\t\t\t\t\t// /caption:title,/*使用自己的title*/\r\n\t\t\t\t\t\taltRows : striped,\r\n\t\t\t\t\t\theight : height,\r\n\t\t\t\t\t\tshrinkToFit : shrinkToFit,\r\n\t\t\t\t\t\twidth : width,\r\n\t\t\t\t\t\tloadonce : loadOnce,\r\n\t\t\t\t\t\tmultiselect : multiselect,\r\n\t\t\t\t\t\tmultiboxonly : multiboxonly,\r\n\t\t\t\t\t\tviewrecords : true,\r\n\t\t\t\t\t\trecordpos : \"left\",\r\n\t\t\t\t\t\tpagerpos : \"right\",\r\n\t\t\t\t\t\tloadui : false,\r\n\t\t\t\t\t\ttreeGrid : treeGrid,\r\n\t\t\t\t\t\tExpandColumn : 'name',\r\n\t\t\t\t\t\tgridComplete : gridComplete,\r\n\t\t\t\t\t\tjsonReader : jsonReader,\r\n\t\t\t\t\t\tcomponent : myCompent,\r\n\t\t\t\t\t\teditSuccesfunc : editSuccesfunc,\r\n\t\t\t\t\t\trownumbers : rownumbers,\r\n\t\t\t\t\t\teditRow : editRow,\r\n\t\t\t\t\t\tfooterrow : showFooter,\r\n\t\t\t\t\t\tuserDataOnFooter : manualFooter,\r\n\t\t\t\t\t\tisExport:gridExport,\r\n\t\t\t\t\t\tfileName:fileName,\r\n\t\t\t\t\t\tgridTotal:gridTotal\r\n\t\t\t\t\t/*\tgrouping:true,\r\n\t\t\t\t\t\tgroupingView : {\r\n\t\t\t\t\t   \t\tgroupField : ['fchgAgenCode'],\r\n\t\t\t\t\t   \t\tgroupColumnShow : [true],\r\n\t\t\t\t\t   \t\tgroupText : ['<b>{0}</b>'],\r\n\t\t\t\t\t   \t\tgroupCollapse : false,\r\n\t\t\t\t\t\t\tgroupOrder: ['asc'],\r\n\t\t\t\t\t\t\tgroupSummary : [true],\r\n\t\t\t\t\t\t\tgroupDataSorted : true\r\n\t\t\t\t\t   \t},*/\r\n\t\t\t\t\t};\r\n\t\t\t\t\t\r\n\t\t\t\t\tif (extOptions){\r\n\t\t\t\t\t\tvar extCfg = new Function(\"return \" + extOptions\r\n\r\n\t\t\t\t\t\t\t\t+ \";\")();\r\n\t\t\t\t\tif (extCfg){\r\n\t\t\t\t\t\t\t\top=$.extend(op,extCfg);\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (usePage) {\r\n\t\t\t\t\t\top[\"pager\"] = \"#\" + pageId;\r\n\t\t\t\t\t\top[\"rowNum\"] = rowNum == 0 ? (pageList[0] * 1) : rowNum;\r\n\t\t\t\t\t\top[\"rowList\"] = pageList;\r\n\t\t\t\t\t\top[\"page\"] = page;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\top[\"rowNum\"] = -1;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (sortname) {\r\n\t\t\t\t\t\top[\"sortname\"] = sortname;\r\n\t\t\t\t\t\top[\"sortorder\"] = sortorder;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif (treeGrid) {\r\n\t\t\t\t\t\top[\"treeGridModel\"] = 'adjacency';\r\n\t\t\t\t\t\tvar treeColumn = $this.attr(\"treeColumn\");\r\n\t\t\t\t\t\tif (treeColumn) {\r\n\t\t\t\t\t\t\top[\"ExpandColumn\"] = treeColumn;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tvar treeReader = {\r\n\t\t\t\t\t\t\tlevel_field : $this.attr(\"levelField\") || \"level\",\r\n\t\t\t\t\t\t\tparent_id_field : $this.attr(\"parentField\")\r\n\t\t\t\t\t\t\t\t\t|| \"parent\",\r\n\t\t\t\t\t\t\tleaf_field : $this.attr(\"leafField\") || \"leaf\",\r\n\t\t\t\t\t\t\texpanded_field : $this.attr(\"expandedField\")\r\n\t\t\t\t\t\t\t\t\t|| \"expanded\",\r\n\t\t\t\t\t\t\tloaded : $this.attr(\"loadedField\") || \"loaded\",\r\n\t\t\t\t\t\t\ticon_field : $this.attr(\"iconField\") || \"icon\"\r\n\t\t\t\t\t\t};\r\n\t\t\t\t\t\top[\"treeReader\"] = treeReader;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (events) {\r\n\t\t\t\t\t\tvar es = $this.getJsEvent(events);\r\n\t\t\t\t\t\t/* 对gridcomplete事件进行处理防止内置处理和外部事件处理冲突 */\r\n\t\t\t\t\t\tvar completHandler = es[\"gridComplete\"];\r\n\t\t\t\t\t\tif (completHandler) {\r\n\t\t\t\t\t\t\tvar gridHandle = op.gridComplete;\r\n\t\t\t\t\t\t\tes[\"gridComplete\"] = function() {\r\n\t\t\t\t\t\t\t\tgridHandle.apply(this, arguments);\r\n\t\t\t\t\t\t\t\tcompletHandler.apply(this, arguments);\r\n\t\t\t\t\t\t\t};\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t$.extend(op, es);\r\n\t\t\t\t\t}\r\n\t\t\t\t\t/**\r\n\t\t\t\t\t * 外部参数\r\n\t\t\t\t\t */\r\n\t\t\t\t\tparams = params ? $A.jsonEval(params) : {};\r\n\t\t\t\t\tif (transor) {\r\n\t\t\t\t\t\tparams[\"__transor\"] = transor;\r\n\t\t\t\t\t}\r\n\t\t\t\t\top[\"postData\"] = params;\r\n\t\t\t\t\r\n\t\t\t\t\tif (multiselect&&editRow){\r\n\t\t\t\t\t\tif (!op[\"beforeSelectRow\"]){\r\n\t\t\t\t\t\top[\"beforeSelectRow\"]= function (rowid, e) {\r\n\t\t\t\t\t\t    var $myGrid = $(this),\r\n\t\t\t\t\t\t        i = $.jgrid.getCellIndex($(e.target).closest('td')[0]),\r\n\t\t\t\t\t\t        cm = $myGrid.jqGrid('getGridParam', 'colModel');\r\n\t\t\t\t\t\t    return (cm[i].name === 'cb');\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\r\n\t\t\t\t/*\tif (fit == true) {\r\n\t\t\t\t\t\t\tvar p = $container.parent();\r\n\t\t\t\t\t\t\t\t\t\tvar w = p.outerWidth();\r\n\t\t\t\t\t\t\t\t\t\tvar h = p.outerHeight();\r\n\t\t\t\t\t\t\t\t\t\top.width=w;\r\n\t\t\t\t\t\t\t\t\t\top.height=h;\r\n\t\t\t\t\t}*/\r\n\t\t\t\t$this.jqGrid(op);\r\n\t\t\t\t/**\r\n\t\t\t\t * 多表头\r\n\t\t\t\t */\r\n\t\t\t\tif (gridheaders){\r\n\t\t\t\t\tvar gridheadersCfg=$.parseJSON(gridheaders);\r\n\t\t\t\t\tvar inColumnHeaders = function(colHeader) {\r\n\t\t\t\t\t\tvar length = colHeader.groupHeaders.length, i;\r\n\t\t\t\t\t\t$this.jqGrid('setGroupHeaders', colHeader);\r\n\t\t\t\t\t\tfor (i = 0; i < length; i++) {\r\n\t\t\t\t\t\tif (colHeader.groupHeaders[i].groupHeaders) {\r\n\t\t\t\t\t\t\tcolHeader.groupHeaders[i][\"useColSpanStyle\"]=colHeader[\"useColSpanStyle\"];\r\n\t\t\t\t\t\t\tinColumnHeaders(colHeader.groupHeaders[i]);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tinColumnHeaders(gridheadersCfg);\r\n\t\t\t\t\t$this[0].p.gridheadersCfg=gridheadersCfg;\r\n\r\n\t\t\t\t}\r\n\t\t\t\t\t\r\n\t\t\t\t\t\r\n\t\t\t\t\t//$this.jqGrid('setGroupHeaders', gridheadersCfg);\r\n\t\t\t\t\t\r\n\t\t\t\t\t\r\n\t\t\t\t\t//$this.jqGrid('bindKeys', {});\r\n\t\t\t\t\t/*sjq新增自动合计*/\r\n\t\t\t\t\tif (showFooter) {\r\n\t\t\t\t\t\t$this.bind(\"jqGridAfterGridComplete\", function() {\r\n\t\t\t\t\t\t\tgridTotal();\r\n\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t};\r\n\t\t\t\t\t$container.bind('_resize', function(e,isresize,w,h) {\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\tvar p=$container.parent(\".layout-body\");\r\n\t\t\t\t\t\t\t\tif (p.length>0){\r\n\t\t\t\t\t\t\t\tif (fit == true) {\r\n\t\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\tp.css(\"overflow\",\"hidden\");\r\n\t\t\t\t\t\t\t\t\t\t$container.innerWidth(w);\r\n\t\t\t\t\t\t\t\t\t\t$container.innerHeight(h);\r\n\t\t\t\t\t\t\t\t\t\t$this.jqGrid('setGridHeight', $container.height());\r\n\t\t\t\t\t\t\t\t\t\t$this.jqGrid('setGridWidth', $container.width());\r\n\t\t\t\t\t\t\t\t\t\t//p.css(\"overflow\",\"\");\r\n\t\t\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\tif (p[0].offsetHeight<p[0].scrollHeight){\r\n\t\t\t\t\t\t\t\t\t\tw=w-18;\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t$container.innerWidth(w);\r\n\t\t\t\t\t\t\t\t\t$this.jqGrid('setGridWidth', $container.width());\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t// $this.jqGrid(\"setFrozenColumns\");\r\n\r\n\t\t\t\t\tif (editRow) {// 需要编辑行时\r\n\t\t\t\t\t\tvar editOp = {\r\n\t\t\t\t\t\t\tkeys : true\r\n\t\t\t\t\t\t};\r\n\t\t\t\t\t\tif (editSuccesfunc) {// 保存服务器上,成功后回调函数\r\n\t\t\t\t\t\t\teditOp.succesfunc = eval(editSuccesfunc);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tvar editTag = true;\r\n\t\t\t\t\t\t// 由单击产生编辑行\r\n\t\t\t\t\t\t$this.jqGrid('setGridParam', {\r\n\t\t\t\t\t\t\t\t\tonClickRow : function(rowid,rowid,colIndex) {\r\n\t\t\t\t\t\t\t\t\t\tvar editOp = {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tkeys: true,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tfocus:colIndex\r\n\t\t\t\t\t\t\t\t\t\t\t};\r\n\t\t\t\t\t\t\t\t\t\twindow.setTimeout(function() {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tif (editTag) {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\teditTag = false;\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t$this.jqGrid('editRow',\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\trowid, editOp);\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\teditTag = true;\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t\t}, 0);\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t$this.attr(\"jqgrid\", \"true\");\r\n\t\t\t\t\t$this.attr(\"init\", \"true\");\r\n\t\t\t\t\t$this.attr(\"datatype\", dataType);\r\n\t\t\t\t});\r\n\r\n\t\t\t\t// $(\"#test\").addClass(\"appgrid jqgrid\");\r\n\t\t\t\t// $(\"#test\").jqGrid({});\r\n\t\t\t\t// alert($(\"#test\").jqGrid(\"getGridId\"));\r\n\t\t\t\t// alert($(\"#jqgrid3\")[0].p.component.text.init());\r\n\t\t\t\t// alert($(\"#test\")[0].p.component.text.init());\r\n\t\t\t\t// $(\"#mainGrid\")[0].p.component.text.init =\r\n\t\t\t\t// function(pnlObj,colVal,rowIndex,colIndex,colModel){\r\n\t\t\t\t// $(pnlObj).html('改变了组件绑定！');\r\n\t\t\t\t// };\r\n\t\t\t};\r\n\t\t\t/**\r\n\t\t\t * 重新加载表格\r\n\t\t\t */\r\n\t\t\t$.fn.reloadJqGrid = function(params) {\r\n\t\t\t\t$(this).each(function() {\r\n\t\t\t\t\t\t\tvar $this = $(this);\r\n\t\t\t\t\t\t\tvar $grid = $this.getJqGrid();\r\n\t\t\t\t\t\t\tif ($grid && $grid.attr(\"init\") == \"true\") {\r\n\t\t\t\t\t\t\t\tvar dt = $grid.attr(\"datatype\") || \"json\";\r\n\t\t\t\t\t\t\t\tparams = params ? params : {};\r\n\t\t\t\t\t\t\t\tvar transor = $this.attr(\"transor\");\r\n\t\t\t\t\t\t\t\tif (transor) {\r\n\t\t\t\t\t\t\t\t\tparams[\"__transor\"] = transor;\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\tif (params[\"baseParams\"]){\r\n\t\t\t\t\t\t\t\t\t\t$this.data(\"baseParams\",params[\"baseParams\"]);\r\n\t\t\t\t\t\t\t\t\t\tdelete params[\"baseParams\"];\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tvar baseParams=$this.data(\"baseParams\");\r\n\t\t\t\t\t\t\t\tparams=$.extend(true,params,baseParams);\r\n\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t$grid.jqGrid('setGridParam', {\r\n\t\t\t\t\t\t\t\t\t\t\tdatatype : dt,\r\n\t\t\t\t\t\t\t\t\t\t\ttreedatatype : dt,\r\n\t\t\t\t\t\t\t\t\t\t\tpostData : params\r\n\t\t\t\t\t\t\t\t\t\t}).trigger(\"reloadGrid\");\r\n\t\t\t\t\t\t\t} else if (params) {\r\n\t\t\t\t\t\t\t\tif ($this.hasClass(\".jqgrid\")) {\r\n\t\t\t\t\t\t\t\t\t$grid = $this;\r\n\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\t$grid = $(\".jqgrid[init!=true]\", $this);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t$grid.attr(\"autoLoad\", \"true\");\r\n\t\t\t\t\t\t\t\t$grid.attr(\"params\", $A.toJsonString(params));\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t});\r\n\t\t\t};\r\n\t\t\t/**\r\n\t\t\t * @class\r\n\t\t\t * @name bsgriD\r\n\t\t\t * @description <jquery methods class> 网格控件jquery方法\r\n\t\t\t *              @example\r\n\t\t\t *              向id为mainGrid的网格追加新行|\r\n\t\t\t * \t$(\"#mainGrid\").bsgrid(\"appendRow\",\"first\");|\r\n\t\t\t *              @example\r\n\t\t\t *              例2：取id为mainGrid的网格编辑完成后数据对象|\r\n\t\t\t *              $(\"#mainGrid\").bsgrid(\"getEditData\");//返回json对象|\r\n\t\t\t */\r\n\t\t\t$.fn.bsgrid = function(pin) {\r\n\t\t\t\tif (typeof pin === 'string') {\r\n\t\t\t\t\tvar methods = {\r\n\t\t\t\t\t\t/**\r\n\t\t\t\t\t\t * @memberof bsgriD\r\n\t\t\t\t\t\t * @function\r\n\t\t\t\t\t\t * @instance\r\n\t\t\t\t\t\t * @name getGridId\r\n\t\t\t\t\t\t * @desc 取得表格id\r\n\t\t\t\t\t\t * @return {String} 表格id\r\n\t\t\t\t\t\t */\r\n\t\t\t\t\t\tgetGridId : function() {\r\n\t\t\t\t\t\t\treturn this.attr(\"origionId\");\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\t/**\r\n\t\t\t\t\t\t * 取网格属性 参数说明 pName 属性名\r\n\t\t\t\t\t\t */\r\n\t\t\t\t\t\tgetGridParam : function(pName) {\r\n\t\t\t\t\t\t\treturn this.jqGrid(\"getGridParam\", pName);\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\t/**\r\n\t\t\t\t\t\t * 设置网格属性 参数 newParams 网格属性对象\r\n\t\t\t\t\t\t */\r\n\t\t\t\t\t\tsetGridParam : function(newParams) {\r\n\t\t\t\t\t\t\tthis.jqGrid(\"setGridParam\", newParams);\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\t/**\r\n\t\t\t\t\t\t * @memberof bsgriD\r\n\t\t\t\t\t\t * @function\r\n\t\t\t\t\t\t * @instance\r\n\t\t\t\t\t\t * @name appendRow\r\n\t\t\t\t\t\t * @desc 追加一行数据到网格\r\n\t\t\t\t\t\t * @param {string|int}\r\n\t\t\t\t\t\t *            [rowPos=last] -\r\n\t\t\t\t\t\t *            新行插入位置，可空。值说明：\"first\"为追加在首行，\"last\"为追加在未行，\"after\"为目标行之后，\"before\"目标行前。默认为“last”\r\n\t\t\t\t\t\t * @param {object}\r\n\t\t\t\t\t\t *            [rowData=null] - 新增行的预置数据,可为空\r\n\t\t\t\t\t\t * @param {string}\r\n\t\t\t\t\t\t *            srcRowId -\r\n\t\t\t\t\t\t *            新行插入位置的目标行ID,当rowindex参数值为after或是before时，必须指定该参数值，否则值应为空\r\n\t\t\t\t\t\t * @param {boolean}\r\n\t\t\t\t\t\t *            [isEdit=true] - 是否编辑行，可空,默认为true\r\n\t\t\t\t\t\t */\r\n\t\t\t\t\t\tappendRow : function(rowData, rowPos, srcRowId, isEdit) {\r\n\t\t\t\t\t\t\trowPos = rowPos ? rowPos : \"last\";\r\n\t\t\t\t\t\t\trowData = rowData ? rowData : {};\r\n\t\t\t\t\t\t\tisEdit = (isEdit != \"false\" && isEdit != false);\r\n\r\n\t\t\t\t\t\t\treturn this.each(function() {\r\n\t\t\t\t\t\t\t\tif (!this.grid) {\r\n\t\t\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t\t\t}// 网格未创建时，结束\r\n\t\t\t\t\t\t\t\tvar obj = $(this), reader = obj.jqGrid(\r\n\t\t\t\t\t\t\t\t\t\t\"getGridParam\", \"jsonReader\"), rowid = rowData[reader.id]\r\n\t\t\t\t\t\t\t\t\t\t|| $.jgrid.randId();\r\n\r\n\t\t\t\t\t\t\t\trowData[reader.id] = rowid;\r\n\t\t\t\t\t\t\t\tvar b = obj.jqGrid('addRowData', rowid,\r\n\t\t\t\t\t\t\t\t\t\trowData, rowPos, srcRowId);\r\n\r\n\t\t\t\t\t\t\t\tif (b) {\r\n\t\t\t\t\t\t\t\t\tobj.jqGrid(\"setSelection\", rowid);// add\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t// by tw\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t// 先选中该行\r\n\t\t\t\t\t\t\t\t\tif (isEdit) {\r\n\t\t\t\t\t\t\t\t\t\tobj.jqGrid('editRow', rowid, {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tkeys : true\r\n\t\t\t\t\t\t\t\t\t\t\t\t}); // 设置grid单元格可编辑\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t// 滚动条滚动到新增行\r\n\t\t\t\t\t\t\t\t\tvar ri = obj\r\n\t\t\t\t\t\t\t\t\t\t\t.jqGrid('getGridRowById', rowid).rowIndex;// 行下标\r\n\t\t\t\t\t\t\t\t\tvar ch = $(this.grid.bDiv).outerHeight(), st = this.grid.bDiv.scrollTop, rpos = $(this.rows[ri])\r\n\t\t\t\t\t\t\t\t\t\t\t.position().top, rh = $(this.rows[ri])\r\n\t\t\t\t\t\t\t\t\t\t\t.outerHeight();\r\n\t\t\t\t\t\t\t\t\tif (rpos + rh >= ch + st) {\r\n\t\t\t\t\t\t\t\t\t\tthis.grid.bDiv.scrollTop = rpos\r\n\t\t\t\t\t\t\t\t\t\t\t\t- (ch + st) + rh + st;\r\n\t\t\t\t\t\t\t\t\t} else if (rpos < ch + st) {\r\n\t\t\t\t\t\t\t\t\t\tif (rpos < st) {\r\n\t\t\t\t\t\t\t\t\t\t\tthis.grid.bDiv.scrollTop = rpos;\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\treturn rowid;\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\t/**\r\n\t\t\t\t\t\t * @memberof bsgriD\r\n\t\t\t\t\t\t * @function\r\n\t\t\t\t\t\t * @instance\r\n\t\t\t\t\t\t * @name deleteRow\r\n\t\t\t\t\t\t * @desc 删除网格一个已选中的行，或删除指定行号\r\n\t\t\t\t\t\t * @param {string|array}\r\n\t\t\t\t\t\t *            [rowid=当前选中行] - 行ID,可为id数组,默认为当前选中行\r\n\t\t\t\t\t\t */\r\n\t\t\t\t\t\tdeleteRow : function(rowid) {\r\n\t\t\t\t\t\t\treturn this.each(function() {\r\n\t\t\t\t\t\t\t\tvar rowids;\r\n\t\t\t\t\t\t\t\tif (rowid) {// 有指定行号时\r\n\t\t\t\t\t\t\t\t\trowids = $.isArray(rowid) ? rowid : [rowid];\r\n\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\tif (this.p.multiselect\r\n\t\t\t\t\t\t\t\t\t\t\t&& this.p.selarrrow.length > 0) {\r\n\t\t\t\t\t\t\t\t\t\trowids = this.p.selarrrow;\r\n\t\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\t\trowids = [this.p.selrow];\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tfor (var i = 0; i < rowids.length; i++) {\r\n\t\t\t\t\t\t\t\t\tvar id = rowids[i];\r\n\t\t\t\t\t\t\t\t\tif (!id)\r\n\t\t\t\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t\t\t\t$(this).jqGrid('delRowData', id);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\t/**\r\n\t\t\t\t\t\t * @memberof bsgriD\r\n\t\t\t\t\t\t * @function\r\n\t\t\t\t\t\t * @instance\r\n\t\t\t\t\t\t * @name submitData\r\n\t\t\t\t\t\t * @desc 提交网格数据到服务器\r\n\t\t\t\t\t\t * @param {string}\r\n\t\t\t\t\t\t *            url - 提交的地址，可空，为空时提交的地址为网格editUrl属性值\r\n\t\t\t\t\t\t * @param {function}\r\n\t\t\t\t\t\t *            success - 成功时执行的回调函数，参数为服务端返回的数据对象\r\n\t\t\t\t\t\t * @param {function}\r\n\t\t\t\t\t\t *            error - 错误时执行的回调函数\r\n\t\t\t\t\t\t * @param {function}\r\n\t\t\t\t\t\t *            exception - 异常时执行的回调函数\r\n\t\t\t\t\t\t * @param {function}\r\n\t\t\t\t\t\t *            before - 提交数据之前执行的函数\r\n\t\t\t\t\t\t */\r\n\t\t\t\t\t\tsubmitData : function(url, success, error, exception,\r\n\t\t\t\t\t\t\t\tbefore) {\r\n\t\t\t\t\t\t\treturn this.each(function() {\r\n\t\t\t\t\t\t\t\t\t\t$(this).jqGrid('submitData', success,\r\n\t\t\t\t\t\t\t\t\t\t\t\turl, error, exception, before);\r\n\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\t/**\r\n\t\t\t\t\t\t * @memberof bsgriD\r\n\t\t\t\t\t\t * @function\r\n\t\t\t\t\t\t * @instance\r\n\t\t\t\t\t\t * @name getSubmitData\r\n\t\t\t\t\t\t * @desc 获取网格编辑后的需要提交服务的数据\r\n\t\t\t\t\t\t * @return {object}\r\n\t\t\t\t\t\t *         数据对象,数据对象格式：{\"add\":[{},{}],\"update\":[{},{}],\"del\":[{},{}]}\r\n\t\t\t\t\t\t */\r\n\t\t\t\t\t\tgetSubmitData : function() {\r\n\t\t\t\t\t\t\treturn $(this).jqGrid(\"getSubmitData\");\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\t/**\r\n\t\t\t\t\t\t * @memberof bsgriD\r\n\t\t\t\t\t\t * @function\r\n\t\t\t\t\t\t * @instance\r\n\t\t\t\t\t\t * @name getComponent\r\n\t\t\t\t\t\t * @desc 获取某个网格的组件对象,取到该对象后，根据实际业务进行改写组件\r\n\t\t\t\t\t\t * @param {string}\r\n\t\t\t\t\t\t *            editType - 组件类型\r\n\t\t\t\t\t\t * @return {component} 组件对象\r\n\t\t\t\t\t\t */\r\n\t\t\t\t\t\tgetComponent : function(editType) {\r\n\t\t\t\t\t\t\tif (!editType || this.length == 0)\r\n\t\t\t\t\t\t\t\treturn null;\r\n\t\t\t\t\t\t\treturn this[0].p.component[editType];\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\t/**\r\n\t\t\t\t\t\t * @memberof bsgriD\r\n\t\t\t\t\t\t * @function\r\n\t\t\t\t\t\t * @instance\r\n\t\t\t\t\t\t * @name hideCol\r\n\t\t\t\t\t\t * @desc 隐藏指定列\r\n\t\t\t\t\t\t * @param {string|array}\r\n\t\t\t\t\t\t *            colName - 列名字符串，或者是列名数组对象\r\n\t\t\t\t\t\t */\r\n\t\t\t\t\t\thideCol : function(colName) {\r\n\t\t\t\t\t\t\tif (colName) {\r\n\t\t\t\t\t\t\t\tvar arys = $.isArray(colName)\r\n\t\t\t\t\t\t\t\t\t\t? colName\r\n\t\t\t\t\t\t\t\t\t\t: [colName];\r\n\t\t\t\t\t\t\t\t$(this).jqGrid(\"hideCol\", arys, \"none\");\r\n\t\t\t\t\t\t\t};\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\t/**\r\n\t\t\t\t\t\t * @memberof bsgriD\r\n\t\t\t\t\t\t * @function\r\n\t\t\t\t\t\t * @instance\r\n\t\t\t\t\t\t * @name showCol\r\n\t\t\t\t\t\t * @desc 显示指定列\r\n\t\t\t\t\t\t * @param {string|array}\r\n\t\t\t\t\t\t *            colName - 列名字符串，或者是列名数组对象\r\n\t\t\t\t\t\t */\r\n\t\t\t\t\t\tshowCol : function(colName) {\r\n\t\t\t\t\t\t\tif (colName) {\r\n\t\t\t\t\t\t\t\tvar arys = $.isArray(colName)\r\n\t\t\t\t\t\t\t\t\t\t? colName\r\n\t\t\t\t\t\t\t\t\t\t: [colName];\r\n\t\t\t\t\t\t\t\t$(this).jqGrid(\"showCol\", arys, 'display');\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\t/**\r\n\t\t\t\t\t\t * @memberof bsgriD\r\n\t\t\t\t\t\t * @function\r\n\t\t\t\t\t\t * @instance\r\n\t\t\t\t\t\t * @name setCell\r\n\t\t\t\t\t\t * @desc 设置指定单元格的值\r\n\t\t\t\t\t\t * @param {string}\r\n\t\t\t\t\t\t *            rowid - 行id\r\n\t\t\t\t\t\t * @param {string}\r\n\t\t\t\t\t\t *            colName - 列名\r\n\t\t\t\t\t\t * @param {string}\r\n\t\t\t\t\t\t *            data - 指定的单元格值\r\n\t\t\t\t\t\t * @param {string||object}\r\n\t\t\t\t\t\t *            css - 指定单元格样式名\r\n\t\t\t\t\t\t * @param {string}\r\n\t\t\t\t\t\t *            properties - 单元格属性\r\n\t\t\t\t\t\t * @param {boolean}\r\n\t\t\t\t\t\t *            forceupd - 指定单元格为空时需要此表示设置为true\r\n\t\t\t\t\t\t */\r\n\t\t\t\t\t\tsetCell : function(rowid, colName, data, css,\r\n\t\t\t\t\t\t\t\tproperties, forceupd) {\r\n\t\t\t\t\t\t\t$(this).jqGrid(\"setCell\",rowid, colName, data, css,\r\n\t\t\t\t\t\t\t\t\tproperties);\r\n\t\t\t\t\t\t},\r\n\r\n\t\t\t\t\t\t/**\r\n\t\t\t\t\t\t * @memberof bsgriD\r\n\t\t\t\t\t\t * @function\r\n\t\t\t\t\t\t * @instance\r\n\t\t\t\t\t\t * @name getCell\r\n\t\t\t\t\t\t * @desc 取得指定单元格的值\r\n\t\t\t\t\t\t * @param {string}\r\n\t\t\t\t\t\t *            rowid - 行id\r\n\t\t\t\t\t\t * @param {string}\r\n\t\t\t\t\t\t *            colName - 列名\r\n\t\t\t\t\t\t * @return 指定单元格的显示值\r\n\t\t\t\t\t\t */\r\n\t\t\t\t\t\tgetCell : function(rowid, colName) {\r\n\t\t\t\t\t\t\treturn $(this).jqGrid(\"getCell\", rowid, colName);\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tgetCellEditor : function(colName) {\r\n\r\n\t\t\t\t\t\t\tvar rowid = this.bsgrid(\"getSelectRowId\");\r\n\t\t\t\t\t\t\tif (!rowid)\r\n\t\t\t\t\t\t\t\treturn null;\r\n\t\t\t\t\t\t\r\n\r\n\t\t\t\t\t\t\t\t\t\r\n\t\t\t\tvar $t = $(this).jqGrid(\"getJqGridObj\"), pos =-1;\r\n\t\t\t\t\tif(!$t.grid) {return;}\r\n\t\t\t\t\tif(isNaN(colName)) {\r\n\t\t\t\t\t\t$($t.p.colModel).each(function(i){\r\n\t\t\t\t\t\t\tif (this.name === colName) {\r\n\t\t\t\t\t\t\t\tpos = i;return false;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\tif(pos>=0) {\r\n\t\t\t\t\t\t\tvar ind = $($t).jqGrid('getGridRowById', rowid); \r\n\t\t\t\t\t\t\tvar cellDom = $(\"td:eq(\"+pos+\")\",ind);\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tif (!cellDom)\r\n\t\t\t\t\t\t\t\treturn null;\r\n\t\t\t\t\t\t\tvar $cellDom= $(cellDom);\r\n\t\t\t\t\t\t\tvar $input = $cellDom.find(\"input:first-child\");\r\n\t\t\t\t\t\t\tif ($input.length > 0) {\r\n\t\t\t\t\t\t\t\treturn $(\"#\" + $input[0].id);\r\n\t\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\t\tif ($cellDom.length>0){\r\n\t\t\t\t\t\t\t\t\treturn $(\"#\" + $cellDom[0].id);\r\n\t\t\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\t\t\treturn null;\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\treturn null;\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\t/**\r\n\t\t\t\t\t\t * @memberof bsgriD\r\n\t\t\t\t\t\t * @function\r\n\t\t\t\t\t\t * @instance\r\n\t\t\t\t\t\t * @name setEditEnabled\r\n\t\t\t\t\t\t * @desc 动态设置网格是否可编辑\r\n\t\t\t\t\t\t * @param {boolean}\r\n\t\t\t\t\t\t *            enabled - 是否可编辑\r\n\t\t\t\t\t\t */\r\n\t\t\t\t\t\tsetEditEnabled : function(enabled) {\r\n\t\t\t\t\t\t\treturn this.each(function() {\r\n\t\t\t\t\t\t\t\t\t\tif (!this.grid) {\r\n\t\t\t\t\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t\t\t\t\t}// 网格未创建时，结束\r\n\t\t\t\t\t\t\t\t\t\tif (!enabled) {// 失效\r\n\t\t\t\t\t\t\t\t\t\t\tvar rs = $(this).jqGrid(\"saveRows\",\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tthis);\r\n\t\t\t\t\t\t\t\t\t\t\tif (rs) {\r\n\t\t\t\t\t\t\t\t\t\t\t\tthis.p.editRow = false;\r\n\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\treturn rs;\r\n\t\t\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\t\t\tthis.p.editRow = true;\r\n\t\t\t\t\t\t\t\t\t\t\treturn true;\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\t/**\r\n\t\t\t\t\t\t * @memberof bsgriD\r\n\t\t\t\t\t\t * @function\r\n\t\t\t\t\t\t * @instance\r\n\t\t\t\t\t\t * @name getEditRow\r\n\t\t\t\t\t\t * @desc 取得当前编辑的行\r\n\t\t\t\t\t\t * @param {json}\r\n\t\t\t\t\t\t *            编辑行\r\n\t\t\t\t\t\t */\r\n\t\t\t\t\t\tgetEditRow : function() {\r\n\t\t\t\t\t\t\tvar rows = this.getGridParam(\"savedRow\");\r\n\t\t\t\t\t\t\tif (rows == null || rows.length == 0)\r\n\t\t\t\t\t\t\t\treturn null;\r\n\t\t\t\t\t\t\treturn rows[0];\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\t/**\r\n\t\t\t\t\t\t * @memberof bsgriD\r\n\t\t\t\t\t\t * @function\r\n\t\t\t\t\t\t * @instance\r\n\t\t\t\t\t\t * @name getDataIDs\r\n\t\t\t\t\t\t * @desc 取得所有行id\r\n\t\t\t\t\t\t * @return {array} 所有id集合\r\n\t\t\t\t\t\t */\r\n\t\t\t\t\t\tgetDataIDs : function() {\r\n\t\t\t\t\t\t\treturn this.jqGrid('getDataIDs');\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\t/**\r\n\t\t\t\t\t\t * @memberof bsgriD\r\n\t\t\t\t\t\t * @function\r\n\t\t\t\t\t\t * @instance\r\n\t\t\t\t\t\t * @name getRowData\r\n\t\t\t\t\t\t * @desc 选择或者反选行数据，有复选框时也支持\r\n\t\t\t\t\t\t * @param {string}\r\n\t\t\t\t\t\t *            rowid - 行ID\r\n\t\t\t\t\t\t * @return 指定行数据\r\n\t\t\t\t\t\t */\r\n\t\t\t\t\t\tgetRowData : function(rowid) {\r\n\t\t\t\t\t\t\treturn this.jqGrid('getRowData', rowid);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t/**\r\n\t\t\t\t\t\t * @memberof bsgriD\r\n\t\t\t\t\t\t * @function\r\n\t\t\t\t\t\t * @instance\r\n\t\t\t\t\t\t * @name setRowData\r\n\t\t\t\t\t\t * @desc 选择或者反选行数据，有复选框时也支持\r\n\t\t\t\t\t\t * @param {string}\r\n\t\t\t\t\t\t *            rowid - 行ID\r\n\t\t\t\t\t\t * @param {object}\r\n\t\t\t\t\t\t *            data - 数据集\r\n\t\t\t\t\t\t * @param {string}\r\n\t\t\t\t\t\t *            [css=null] -\r\n\t\t\t\t\t\t *            设置行样式,可空。值说明：可以是类名或者css配置对象，如:\r\n\t\t\t\t\t\t *            \"nev\"或{\"background\":\"red\",border:\"solid\"}\r\n\t\t\t\t\t\t */\r\n\t\t\t\t\t\t,\r\n\t\t\t\t\t\tsetRowData : function(rowid, data, css) {\r\n\t\t\t\t\t\t\tthis.jqGrid('setRowData', rowid, data, css);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t/**\r\n\t\t\t\t\t\t * @memberof bsgriD\r\n\t\t\t\t\t\t * @function\r\n\t\t\t\t\t\t * @instance\r\n\t\t\t\t\t\t * @name setSelection\r\n\t\t\t\t\t\t * @desc 选择或者反选行数据，有复选框时也支持\r\n\t\t\t\t\t\t * @param {string}\r\n\t\t\t\t\t\t *            rowid - 行ID\r\n\t\t\t\t\t\t * @param {boolean}\r\n\t\t\t\t\t\t *            [onsr=true] - 选中行后是否触发行选中事件,默认为true\r\n\t\t\t\t\t\t * @param {event}\r\n\t\t\t\t\t\t *            e - 事件对象，可空\r\n\t\t\t\t\t\t */\r\n\t\t\t\t\t\t,\r\n\t\t\t\t\t\tsetSelection : function(rowid, onsr, e) {\r\n\t\t\t\t\t\t\tthis.jqGrid('setSelection', rowid, onsr, e);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t/**\r\n\t\t\t\t\t\t * @memberof bsgriD\r\n\t\t\t\t\t\t * @function\r\n\t\t\t\t\t\t * @instance\r\n\t\t\t\t\t\t * @name resetSelection\r\n\t\t\t\t\t\t * @desc 选择或者反选行数据，有复选框时也支持\r\n\t\t\t\t\t\t * @param {string}\r\n\t\t\t\t\t\t *            [rowid=全部行] - 行id,可空。不指定行id时，为所有行\r\n\t\t\t\t\t\t */\r\n\t\t\t\t\t\t,\r\n\t\t\t\t\t\tresetSelection : function(rowid) {\r\n\t\t\t\t\t\t\tthis.jqGrid('resetSelection', rowid);\r\n\t\t\t\t\t\t},\r\n\r\n\t\t\t\t\t\t/**\r\n\t\t\t\t\t\t * @memberof bsgriD\r\n\t\t\t\t\t\t * @function\r\n\t\t\t\t\t\t * @instance\r\n\t\t\t\t\t\t * @name resetEditData\r\n\t\t\t\t\t\t * @desc 去除'由原网格编辑而生成要提交服务器上的数据'\r\n\t\t\t\t\t\t */\r\n\t\t\t\t\t\tresetEditData : function() {\r\n\t\t\t\t\t\t\t$(this).jqGrid(\"resetEditData\");\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\t/**\r\n\t\t\t\t\t\t * @memberof bsgriD\r\n\t\t\t\t\t\t * @function\r\n\t\t\t\t\t\t * @instance\r\n\t\t\t\t\t\t * @name resetEditData\r\n\t\t\t\t\t\t * @desc 去除'由原网格编辑而生成要提交服务器上的数据'\r\n\t\t\t\t\t\t */\r\n\t\t\t\t\t\trefreshEditData : function(datas, isEdit) {\r\n\t\t\t\t\t\t\tvar local = this.bsgrid(\"getSubmitData\"), adds = local.add\r\n\t\t\t\t\t\t\t\t\t|| [], count = 0;\r\n\t\t\t\t\t\t\t$.each(data, function(i, row) {\r\n\t\t\t\t\t\t\t\t\t\tif (row.internalStatus == \"ADD\") {\r\n\t\t\t\t\t\t\t\t\t\t\tif (adds.length > count) {\r\n\t\t\t\t\t\t\t\t\t\t\t\tvar posId = adds[count].id;\r\n\t\t\t\t\t\t\t\t\t\t\t\tthis.bsgrid(\"appendRow\", row,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\"after\", pos, false);\r\n\t\t\t\t\t\t\t\t\t\t\t\tthis.bsgrid(\"deleteRow\", posId);\r\n\t\t\t\t\t\t\t\t\t\t\t\tcount++;\r\n\t\t\t\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\t\t\t\tthis.bsgrid(\"appendRow\", row,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tnull, null, false);\r\n\t\t\t\t\t\t\t\t\t\t\t};\r\n\t\t\t\t\t\t\t\t\t\t} else if (row.internalStatus == UPDATE) {\r\n\t\t\t\t\t\t\t\t\t\t\tthis.bsgrid(\"setRowData\", row.id,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\trow);\r\n\t\t\t\t\t\t\t\t\t\t};\r\n\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\tthis.bsgrid(\"resetEditData\");\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\t/**\r\n\t\t\t\t\t\t * @memberof bsgriD\r\n\t\t\t\t\t\t * @function\r\n\t\t\t\t\t\t * @instance\r\n\t\t\t\t\t\t * @name refreshAllData\r\n\t\t\t\t\t\t * @desc 刷新表格所有数据,用新的数据数组替换原有的\r\n\t\t\t\t\t\t * @param {array} datas - 数据数组\r\n\t\t\t\t\t\t */\r\n\t\t\t\t\t\trefreshAllData : function(datas) {\r\n\t\t\t\t\t\t\tvar o = this;\r\n\t\t\t\t\t\t\to.bsgrid(\"clearData\");\r\n\t\t\t\t\t\t\t$(datas).each(function(index, element) {\r\n\t\t\t\t\t\t\t\to.bsgrid(\"appendRow\", element, null, null,\r\n\t\t\t\t\t\t\t\t\t\tfalse);\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\to.bsgrid(\"resetEditData\");\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\t/**\r\n\t\t\t\t\t\t * @memberof bsgriD\r\n\t\t\t\t\t\t * @function\r\n\t\t\t\t\t\t * @instance\r\n\t\t\t\t\t\t * @name editRow\r\n\t\t\t\t\t\t * @desc 编辑指定行\r\n\t\t\t\t\t\t * @param {string} rowid - 行id\r\n\t\t\t\t\t\t */\r\n\t\t\t\t\t\teditRow : function(rowid) {\r\n\t\t\t\t\t\t\tthis.jqGrid('editRow', rowid);\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\t/**\r\n\t\t\t\t\t\t * @memberof bsgriD\r\n\t\t\t\t\t\t * @function\r\n\t\t\t\t\t\t * @instance\r\n\t\t\t\t\t\t * @name restoreRow\r\n\t\t\t\t\t\t * @desc 行恢复到非编辑状态,原编辑行还原到非编辑状态，且当前行正在编辑的值改动不保存\r\n\t\t\t\t\t\t * @param {string} rowid - 行id\r\n\t\t\t\t\t\t */\r\n\t\t\t\t\t\trestoreRow : function(rowid) {\r\n\t\t\t\t\t\t\tthis.jqGrid('restoreRow', rowid);\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\t/**\r\n\t\t\t\t\t\t * @memberof bsgriD\r\n\t\t\t\t\t\t * @function\r\n\t\t\t\t\t\t * @instance\r\n\t\t\t\t\t\t * @name setWidth\r\n\t\t\t\t\t\t * @desc 动态设置网格宽，默认以px为单位\r\n\t\t\t\t\t\t * @param {int|string} width - 宽度值\r\n\t\t\t\t\t\t * @param {boolean} shrink - 表格列宽是否自适应\r\n\t\t\t\t\t\t */\r\n\t\t\t\t\t\tsetWidth : function(width, shrink) {\r\n\t\t\t\t\t\t\tthis.jqGrid('setGridWidth', width, shrink);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t/**\r\n\t\t\t\t\t\t * @memberof bsgriD\r\n\t\t\t\t\t\t * @function\r\n\t\t\t\t\t\t * @instance\r\n\t\t\t\t\t\t * @name setHeight\r\n\t\t\t\t\t\t * @desc 动态设置网格高度，默认以px为单位\r\n\t\t\t\t\t\t * @param {int|string} height - 高度值\r\n\t\t\t\t\t\t */\r\n\t\t\t\t\t\t,\r\n\t\t\t\t\t\tsetHeight : function(height) {\r\n\t\t\t\t\t\t\tthis.jqGrid('setGridHeight', height);\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t/**\r\n\t\t\t\t\t\t * @memberof bsgriD\r\n\t\t\t\t\t\t * @function\r\n\t\t\t\t\t\t * @instance\r\n\t\t\t\t\t\t * @name reload\r\n\t\t\t\t\t\t * @desc 设置基本参数，\r\n\t\t\t\t\t\t * @param {object} params - 加载参数\r\n\t\t\t\t\t\t */\r\n\t\t\t\t\t\tsetBaseParams:function(params){\r\n\t\t\t\t\t\t\t$(this).each(function() {\r\n\t\t\t\t\t\t\t\tvar $this = $(this);\r\n\t\t\t\t\t\t\t\t$this.data(\"baseParams\",params);\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\t/**\r\n\t\t\t\t\t\t * @memberof bsgriD\r\n\t\t\t\t\t\t * @function\r\n\t\t\t\t\t\t * @instance\r\n\t\t\t\t\t\t * @name reload\r\n\t\t\t\t\t\t * @desc 获取基本参数，\r\n\t\t\t\t\t\t * @param {object} params - 加载参数\r\n\t\t\t\t\t\t */\r\n\t\t\t\t\t\tgetBaseParams:function(){\r\n\t\t\t\t\t\t\tvar baseParams=null;\r\n\t\t\t\t\t\t\t$(this).each(function() {\r\n\t\t\t\t\t\t\t\tvar $this = $(this);\r\n\t\t\t\t\t\t\t\tbaseParams=$this.data(\"baseParams\");\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\treturn baseParams;\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\t/**\r\n\t\t\t\t\t\t * @memberof bsgriD\r\n\t\t\t\t\t\t * @function\r\n\t\t\t\t\t\t * @instance\r\n\t\t\t\t\t\t * @name reload\r\n\t\t\t\t\t\t * @desc 重新加载数据\r\n\t\t\t\t\t\t * @param {object} params - 加载参数\r\n\t\t\t\t\t\t */\r\n\r\n\t\t\t\t\t\treload : function(params) {\r\n\t\t\t\t\t\t\t$(this).each(function() {\r\n\t\t\t\t\t\t\t\tvar $this = $(this);\r\n\t\t\t\t\t\t\t\tvar $grid = $this.getJqGrid();\r\n\t\t\t\t\t\t\t\tif ($grid && $grid.attr(\"init\") == \"true\") {\r\n\t\t\t\t\t\t\t\t\tvar dt = $grid.attr(\"datatype\") || \"json\";\r\n\t\t\t\t\t\t\t\t\tparams = params ? params : {};\r\n\t\t\t\t\t\t\t\t\tvar transor = $this.attr(\"transor\");\r\n\t\t\t\t\t\t\t\t\tif (transor) {\r\n\t\t\t\t\t\t\t\t\t\tparams[\"__transor\"] = transor;\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\tif (params[\"baseParams\"]){\r\n\t\t\t\t\t\t\t\t\t\t$this.data(\"baseParams\",params[\"baseParams\"]);\r\n\t\t\t\t\t\t\t\t\t\tdelete params[\"baseParams\"];\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\tvar baseParams=$this.data(\"baseParams\");\r\n\t\t\t\t\t\t\t\t\tparams=$.extend(true,params,baseParams);\r\n\t\t\t\t\t\t\t\t\t$grid.jqGrid('setGridParam', {\r\n\t\t\t\t\t\t\t\t\t\t\t\tdatatype : dt,\r\n\t\t\t\t\t\t\t\t\t\t\t\ttreedatatype : dt,\r\n\t\t\t\t\t\t\t\t\t\t\t\tpostData : params\r\n\t\t\t\t\t\t\t\t\t\t\t}).trigger(\"reloadGrid\");\r\n\t\t\t\t\t\t\t\t} else if (params) {\r\n\t\t\t\t\t\t\t\t\tif ($this.hasClass(\".jqgrid\")) {\r\n\t\t\t\t\t\t\t\t\t\t$grid = $this;\r\n\t\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\t\t$grid = $(\".jqgrid[init!=true]\", $this);\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t$grid.attr(\"autoLoad\", \"true\");\r\n\t\t\t\t\t\t\t\t\t$grid.attr(\"params\", $A.toJsonString(params));\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tload : function(params) {\r\n\t\t\t\t\t\t\t$(this).each(function() {\r\n\t\t\t\t\t\t\t\tvar $this = $(this);\r\n\t\t\t\t\t\t\t\tvar $grid = $this.getJqGrid();\r\n\t\t\t\t\t\t\t\tif ($grid && $grid.attr(\"init\") == \"true\") {\r\n\t\t\t\t\t\t\t\t\tvar dt = $grid.attr(\"datatype\") || \"json\";\r\n\t\t\t\t\t\t\t\t\tparams = params ? params : {};\r\n\t\t\t\t\t\t\t\t\tvar param = {\r\n\t\t\t\t\t\t\t\t\t\tpage : 1\r\n\t\t\t\t\t\t\t\t\t};\r\n\t\t\t\t\t\t\t\t\tif (params.parma\r\n\t\t\t\t\t\t\t\t\t\t\t&& $.isPlainObject(params.parma)) {\r\n\t\t\t\t\t\t\t\t\t\t$.extend(param, params.parma);\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\tif (params[\"baseParams\"]){\r\n\t\t\t\t\t\t\t\t\t\t$this.data(\"baseParams\",params[\"baseParams\"]);\r\n\t\t\t\t\t\t\t\t\t\tdelete params[\"baseParams\"];\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\tvar transor = $this.attr(\"transor\");\r\n\t\t\t\t\t\t\t\t\tif (transor) {\r\n\t\t\t\t\t\t\t\t\t\tparams[\"__transor\"] = transor;\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\tvar baseParams=$this.data(\"baseParams\");\r\n\t\t\t\t\t\t\t\t\tparams=$.extend(true,params,baseParams);\r\n\t\t\t\t\t\t\t\t\t$grid.jqGrid('setGridParam', {\r\n\t\t\t\t\t\t\t\t\t\t\t\tdatatype : dt,\r\n\t\t\t\t\t\t\t\t\t\t\t\ttreedatatype : dt,\r\n\t\t\t\t\t\t\t\t\t\t\t\tpostData : params,\r\n\t\t\t\t\t\t\t\t\t\t\t\tisLoad:true\r\n\t\t\t\t\t\t\t\t\t\t\t}).trigger(\"reloadGrid\", param);\r\n\t\t\t\t\t\t\t\t} else if (params) {\r\n\t\t\t\t\t\t\t\t\tif ($this.hasClass(\".jqgrid\")) {\r\n\t\t\t\t\t\t\t\t\t\t$grid = $this;\r\n\t\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\t\t$grid = $(\".jqgrid[init!=true]\", $this);\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t$grid.attr(\"autoLoad\", \"true\");\r\n\t\t\t\t\t\t\t\t\t$grid.attr(\"params\", $A.toJsonString(params));\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\t/**\r\n\t\t\t\t\t\t * 网格下一页方法\r\n\t\t\t\t\t\t */\r\n\t\t\t\t\t\tnextPage:function(){\r\n\t\t\t\t\t\t\t$(this).each(function() {\r\n\t\t\t\t\t\t\t\t\t\tvar $this = $(this);\r\n\t\t\t\t\t\t\t\t\t\tvar $grid = $this.getJqGrid();\r\n\t\t\t\t\t\t\t\t\t\tif ($grid&& $grid.attr(\"init\") == \"true\") {\r\n\t\t\t\t\t\t\t\t\t\t\tvar id=$this.attr(\"id\");\r\n\t\t\t\t\t\t\t\t\t\t\tvar nextBtnId=\"#next_\"+id+\"_pageTool\";\r\n\t\t\t\t\t\t\t\t\t\t\t$(nextBtnId).click();\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\t/**\r\n\t\t\t\t\t\t * 网格上一页\r\n\t\t\t\t\t\t */\r\n\t\t\t\t\t\tprvePage:function(){\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t$(this).each(function() {\r\n\t\t\t\t\t\t\t\t\t\tvar $this = $(this);\r\n\t\t\t\t\t\t\t\t\t\tvar $grid = $this.getJqGrid();\r\n\t\t\t\t\t\t\t\t\t\tif ($grid&& $grid.attr(\"init\") == \"true\") {\r\n\t\t\t\t\t\t\t\t\t\t\tvar id=$this.attr(\"id\");\r\n\t\t\t\t\t\t\t\t\t\t\tvar nextBtnId=\"#prev_\"+id+\"_pageTool\";\r\n\t\t\t\t\t\t\t\t\t\t\t$(nextBtnId).click();\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t/**\r\n\t\t\t\t\t\t * @memberof bsgriD\r\n\t\t\t\t\t\t * @function\r\n\t\t\t\t\t\t * @instance\r\n\t\t\t\t\t\t * @name clearData\r\n\t\t\t\t\t\t * @desc 清除表格数据\r\n\t\t\t\t\t\t */\r\n\t\t\t\t\t\t,\r\n\t\t\t\t\t\tclearData : function() {\r\n\t\t\t\t\t\t\t$(this).jqGrid(\"clearGridData\", false);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t/**\r\n\t\t\t\t\t\t * @memberof bsgriD \r\n\t\t\t\t\t\t * @function\r\n\t\t\t\t\t\t * @instance\r\n\t\t\t\t\t\t * @name getSelectRowId\r\n\t\t\t\t\t\t * @desc 取得最后选中行id\r\n\t\t\t\t\t\t * @return {string}选中行id\r\n\t\t\t\t\t\t */\r\n\t\t\t\t\t\t,\r\n\t\t\t\t\t\tgetSelectRowId : function() {\r\n\t\t\t\t\t\t\treturn this.jqGrid(\"getGridParam\", \"selrow\");\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t/**\r\n\t\t\t\t\t\t * @memberof bsgriD \r\n\t\t\t\t\t\t * @function\r\n\t\t\t\t\t\t * @instance\r\n\t\t\t\t\t\t * @name getSelectRow\r\n\t\t\t\t\t\t * @desc 取得最后选中行数据\r\n\t\t\t\t\t\t * @return {string}选中行id\r\n\t\t\t\t\t\t */\r\n\t\t\t\t\t\t,\r\n\t\t\t\t\t\tgetSelectRow : function() {\r\n\t\t\t\t\t\t\tvar id = this.bsgrid(\"getSelectRowId\");\r\n\t\t\t\t\t\t\tif (id)\r\n\t\t\t\t\t\t\t\treturn this.bsgrid(\"getRowData\", id);\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\t/**\r\n\t\t\t\t\t\t * @memberof bsgriD \r\n\t\t\t\t\t\t * @function\r\n\t\t\t\t\t\t * @instance\r\n\t\t\t\t\t\t * @name getSelectIds\r\n\t\t\t\t\t\t * @desc 取得多个选中行id\r\n\t\t\t\t\t\t * @return {array}选中行id\r\n\t\t\t\t\t\t */\r\n\t\t\t\t\t\tgetSelectIds : function() {\r\n\t\t\t\t\t\t\treturn this.bsgrid(\"getGridParam\", \"selarrrow\");\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\t/**\r\n\t\t\t\t\t\t * @memberof bsgriD \r\n\t\t\t\t\t\t * @function\r\n\t\t\t\t\t\t * @instance\r\n\t\t\t\t\t\t * @name loadData\r\n\t\t\t\t\t\t * @desc 加载数据\r\n\t\t\t\t\t\t * @return {json} data - json数据\r\n\t\t\t\t\t\t */\r\n\t\t\t\t\t\tloadData : function(data) {\r\n\t\t\t\t\t\t\t$(this).each(function() {\r\n\t\t\t\t\t\t\t\tthis.addJSONData(data);\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t//this[0].addJSONData(data);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t};\r\n\t\t\t\t\tvar fn = methods[pin];\r\n\t\t\t\t\tif (!fn) {\r\n\t\t\t\t\t\tthrow (\"该方法未定义: \" + pin);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tvar args = $.makeArray(arguments).slice(1);\r\n\t\t\t\t\treturn fn.apply(this, args);\r\n\t\t\t\t}\r\n\t\t\t\treturn this;\r\n\t\t\t};\r\n\t\t});\r\n\n",
    "define('app/widgets/app-lang_zh_CN',[\"app/core/app-jquery\",\"app/core/app-core\",\"app/util/app-utils\"],function($,App,AppUtils){\r\n\tvar that ={\r\n\t\tlocale:\"zh_CN\",\r\n\t\tmsg:function(code,args){\r\n\t\t\treturn AppUtils.format(this._messages[code], args);\r\n\t\t},\r\n\t\t/**\r\n\t\t * 基于编码的信息，可以带有{0}…{n}的变量\r\n\t\t */\r\n\t\t_messages:{\r\n\t\t\tvalidateFormError:\"提交数据不完整，{0}个字段有错误，请改正后再提交! \",\r\n\t\t\talertSelectMsg:\"请选择信息!\"\r\n\t\t},\r\n\t\tmessager:{\r\n\t\t\tOK:\"确定\",\r\n\t\t\tCANCEL:\"取消\",\r\n\t\t\tCONFIRM:\"确认\",\r\n\t\t\tERROR:\"错误\",\r\n\t\t\tWARN:\"警告\",\r\n\t\t\tINFO:\"信息\",\r\n\t\t\tCORRECT:\"成功\",\r\n\t\t\tPROMPT:\"提示\"\r\n\t\t},\r\n\t\t/**\r\n\t\t * 表格多语\r\n\t\t */\r\n\t\tdataTable:{\r\n\t\t\toLanguage:{\r\n\t\t\t\toPaginate:{\r\n\t\t\t\t\tsFirst: \"首页\",\r\n\t\t\t\t\tsLast: \"末页\",\r\n\t\t\t\t\tsPrevious:\"上一页\",\r\n\t\t\t\t\tsNext:\"下一页\"\r\n\t\t\t\t},\r\n\t\t\t\tsLengthMenu: \"每页显示 _MENU_ 条\",\r\n\t\t\t\tsSearch:\"查找:_INPUT_\",\r\n\t\t\t\tsEmptyTable: \"无符合条件的数据\",\r\n\t\t\t\tsInfo: \"当显示&nbsp;从 _START_ 到 _END_ 条记录&nbsp;&nbsp;&nbsp;总共 _TOTAL_ 记录\",\r\n\t\t\t\tsInfoEmpty: \"无显示记录\",\r\n\t\t\t\tsLoadingRecords: \"加载中...\",\r\n\t\t\t\tsProcessing: \"处理中...\",\r\n\t\t\t\tsZeroRecords: \"无符合条件的数据\"\r\n\t\t\t}\r\n\t\t},\r\n\t\tpagination:{\r\n\t\t\tprevious:\"上一页\",\r\n\t\t\tnext:\"下一页\",\r\n\t\t\tpageInfo:\"总共{0}记录,共{2}页,&nbsp;&nbsp;&nbsp;当显示第{3}页&nbsp;从{4}到{5}条记录\",\r\n\t\t\tpageSizeInfo:\"<ul class='ulnostyle uloneline'><li class='controltxt' >每页</li><li>{0}</li><li class='controltxt'>条记录</li></ul>\"\r\n\t\t},\r\n\t\tvalidator:{\r\n\t\t\t\r\n\t\t},\r\n\t\tdatetimepicker:{\r\n\t\t\tdays: [\"星期日\", \"星期一\", \"星期二\", \"星期三\", \"星期四\", \"星期五\", \"星期六\", \"星期日\"],\r\n\t\t\tdaysShort: [\"周日\", \"周一\", \"周二\", \"周三\", \"周四\", \"周五\", \"周六\", \"周日\"],\r\n\t\t\tdaysMin:  [\"日\", \"一\", \"二\", \"三\", \"四\", \"五\", \"六\", \"日\"],\r\n\t\t\tmonths: [\"一月\", \"二月\", \"三月\", \"四月\", \"五月\", \"六月\", \"七月\", \"八月\", \"九月\", \"十月\", \"十一月\", \"十二月\"],\r\n\t\t\tmonthsShort: [\"一月\", \"二月\", \"三月\", \"四月\", \"五月\", \"六月\", \"七月\", \"八月\", \"九月\", \"十月\", \"十一月\", \"十二月\"],\r\n\t\t\ttoday: \"今日\",\r\n\t\t\tsuffix: [],\r\n\t\t\tmeridiem: []\r\n\t\t},\r\n\t\tmagicsuggest:{\r\n\t\t\tnoSuggestionText:\"无相关数据\"\r\n\t\t},\r\n\t\tflexigrid:{\r\n\t\t\terrormsg:\"加载数据错误\",\r\n\t\t\tpagestat:\"当前显示从 {from}到{to}条记录&nbsp;&nbsp;&nbsp;总共{total}记录 \",\r\n\t\t\tpagetext:\"\",\r\n\t\t\toutof:\"/\",\r\n\t\t\tprocmsg:\"数据加载中……\",\r\n\t\t\tnomsg:\"无符合条件的数据\"\r\n\t\t}\r\n\t};\r\n\tApp.lang = that;\r\n\t\r\n\t$.jgrid = $.jgrid || {};\r\n\t$.extend($.jgrid,{\r\n\t    defaults : {\r\n\t        recordtext: \"{0} - {1}\\u3000共 {2} 条\", // 共字前是全角空格\r\n\t        emptyrecords: \"无符合条件的记录。\",\r\n\t        loadtext: \"读取中...\",\r\n\t        pgtext : \" {0} 共 {1} 页\"\r\n\t    },\r\n\t    search : {\r\n\t        caption: \"搜索...\",\r\n\t        Find: \"查找\",\r\n\t        Reset: \"重置\",\r\n\t        odata: [{ oper:'eq', text:'等于\\u3000\\u3000'},{ oper:'ne', text:'不等\\u3000\\u3000'},{ oper:'lt', text:'小于\\u3000\\u3000'},{ oper:'le', text:'小于等于'},{ oper:'gt', text:'大于\\u3000\\u3000'},{ oper:'ge', text:'大于等于'},{ oper:'bw', text:'开始于'},{ oper:'bn', text:'不开始于'},{ oper:'in', text:'属于\\u3000\\u3000'},{ oper:'ni', text:'不属于'},{ oper:'ew', text:'结束于'},{ oper:'en', text:'不结束于'},{ oper:'cn', text:'包含\\u3000\\u3000'},{ oper:'nc', text:'不包含'}],\r\n\t        groupOps: [ { op: \"AND\", text: \"所有\" },    { op: \"OR\",  text: \"任一\" } ]\r\n\t    },\r\n\t    edit : {\r\n\t        addCaption: \"添加记录\",\r\n\t        editCaption: \"编辑记录\",\r\n\t        bSubmit: \"提交\",\r\n\t        bCancel: \"取消\",\r\n\t        bClose: \"关闭\",\r\n\t        saveData: \"数据已改变，是否保存？\",\r\n\t        bYes : \"是\",\r\n\t        bNo : \"否\",\r\n\t        bExit : \"取消\",\r\n\t        msg: {\r\n\t            required:\"此字段必需\",\r\n\t            number:\"请输入有效数字\",\r\n\t            minValue:\"输值必须大于等于 \",\r\n\t            maxValue:\"输值必须小于等于 \",\r\n\t            email: \"这不是有效的e-mail地址\",\r\n\t            integer: \"请输入有效整数\",\r\n\t            date: \"请输入有效时间\",\r\n\t            url: \"无效网址。前缀必须为 ('http://' 或 'https://')\",\r\n\t            nodefined : \" 未定义！\",\r\n\t            novalue : \" 需要返回值！\",\r\n\t            customarray : \"自定义函数需要返回数组！\",\r\n\t            customfcheck : \"Custom function should be present in case of custom checking!\"\r\n\t        }\r\n\t    },\r\n\t    view : {\r\n\t        caption: \"查看记录\",\r\n\t        bClose: \"关闭\"\r\n\t    },\r\n\t    del : {\r\n\t        caption: \"删除\",\r\n\t        msg: \"删除所选记录？\",\r\n\t        bSubmit: \"删除\",\r\n\t        bCancel: \"取消\"\r\n\t    },\r\n\t    nav : {\r\n\t        edittext: \"\",\r\n\t        edittitle: \"编辑所选记录\",\r\n\t        addtext:\"\",\r\n\t        addtitle: \"添加新记录\",\r\n\t        deltext: \"\",\r\n\t        deltitle: \"删除所选记录\",\r\n\t        searchtext: \"\",\r\n\t        searchtitle: \"查找\",\r\n\t        refreshtext: \"\",\r\n\t        refreshtitle: \"刷新表格\",\r\n\t        alertcap: \"注意\",\r\n\t        alerttext: \"请选择记录\",\r\n\t        viewtext: \"\",\r\n\t        viewtitle: \"查看所选记录\"\r\n\t    },\r\n\t    col : {\r\n\t        caption: \"选择列\",\r\n\t        bSubmit: \"确定\",\r\n\t        bCancel: \"取消\"\r\n\t    },\r\n\t    errors : {\r\n\t        errcap : \"错误\",\r\n\t        nourl : \"没有设置url\",\r\n\t        norecords: \"没有要处理的记录\",\r\n\t        model : \"colNames 和 colModel 长度不等！\"\r\n\t    },\r\n\t    formatter : {\r\n\t        integer : {thousandsSeparator: \",\", defaultValue: '0'},\r\n\t        number : {decimalSeparator:\".\", thousandsSeparator: \",\", decimalPlaces: 2, defaultValue: '0.00'},\r\n\t        currency : {decimalSeparator:\".\", thousandsSeparator: \",\", decimalPlaces: 2, prefix: \"\", suffix:\"\", defaultValue: '0.00'},\r\n\t        date : {\r\n\t            dayNames:   [\r\n\t                \"日\", \"一\", \"二\", \"三\", \"四\", \"五\", \"六\",\r\n\t                \"星期日\", \"星期一\", \"星期二\", \"星期三\", \"星期四\", \"星期五\", \"星期六\",\r\n\t            ],\r\n\t            monthNames: [\r\n\t                \"一\", \"二\", \"三\", \"四\", \"五\", \"六\", \"七\", \"八\", \"九\", \"十\", \"十一\", \"十二\",\r\n\t                \"一月\", \"二月\", \"三月\", \"四月\", \"五月\", \"六月\", \"七月\", \"八月\", \"九月\", \"十月\", \"十一月\", \"十二月\"\r\n\t            ],\r\n\t            AmPm : [\"am\",\"pm\",\"上午\",\"下午\"],\r\n\t            S: function (j) {return j < 11 || j > 13 ? ['st', 'nd', 'rd', 'th'][Math.min((j - 1) % 10, 3)] : 'th';},\r\n\t            srcformat: 'Y-m-d',\r\n\t            newformat: 'Y-m-d',\r\n\t            parseRe : /[Tt\\\\\\/:_;.,\\t\\s-]/,\r\n\t            masks : {\r\n\t                // see http://php.net/manual/en/function.date.php for PHP format used in jqGrid\r\n\t                // and see http://docs.jquery.com/UI/Datepicker/formatDate\r\n\t                // and https://github.com/jquery/globalize#dates for alternative formats used frequently\r\n\t                // one can find on https://github.com/jquery/globalize/tree/master/lib/cultures many\r\n\t                // information about date, time, numbers and currency formats used in different countries\r\n\t                // one should just convert the information in PHP format\r\n\t                ISO8601Long:\"Y-m-d H:i:s\",\r\n\t                ISO8601Short:\"Y-m-d\",\r\n\t                // short date:\r\n\t                //    n - Numeric representation of a month, without leading zeros\r\n\t                //    j - Day of the month without leading zeros\r\n\t                //    Y - A full numeric representation of a year, 4 digits\r\n\t                // example: 3/1/2012 which means 1 March 2012\r\n\t                ShortDate: \"n/j/Y\", // in jQuery UI Datepicker: \"M/d/yyyy\"\r\n\t                // long date:\r\n\t                //    l - A full textual representation of the day of the week\r\n\t                //    F - A full textual representation of a month\r\n\t                //    d - Day of the month, 2 digits with leading zeros\r\n\t                //    Y - A full numeric representation of a year, 4 digits\r\n\t                LongDate: \"l, F d, Y\", // in jQuery UI Datepicker: \"dddd, MMMM dd, yyyy\"\r\n\t                // long date with long time:\r\n\t                //    l - A full textual representation of the day of the week\r\n\t                //    F - A full textual representation of a month\r\n\t                //    d - Day of the month, 2 digits with leading zeros\r\n\t                //    Y - A full numeric representation of a year, 4 digits\r\n\t                //    g - 12-hour format of an hour without leading zeros\r\n\t                //    i - Minutes with leading zeros\r\n\t                //    s - Seconds, with leading zeros\r\n\t                //    A - Uppercase Ante meridiem and Post meridiem (AM or PM)\r\n\t                FullDateTime: \"l, F d, Y g:i:s A\", // in jQuery UI Datepicker: \"dddd, MMMM dd, yyyy h:mm:ss tt\"\r\n\t                // month day:\r\n\t                //    F - A full textual representation of a month\r\n\t                //    d - Day of the month, 2 digits with leading zeros\r\n\t                MonthDay: \"F d\", // in jQuery UI Datepicker: \"MMMM dd\"\r\n\t                // short time (without seconds)\r\n\t                //    g - 12-hour format of an hour without leading zeros\r\n\t                //    i - Minutes with leading zeros\r\n\t                //    A - Uppercase Ante meridiem and Post meridiem (AM or PM)\r\n\t                ShortTime: \"g:i A\", // in jQuery UI Datepicker: \"h:mm tt\"\r\n\t                // long time (with seconds)\r\n\t                //    g - 12-hour format of an hour without leading zeros\r\n\t                //    i - Minutes with leading zeros\r\n\t                //    s - Seconds, with leading zeros\r\n\t                //    A - Uppercase Ante meridiem and Post meridiem (AM or PM)\r\n\t                LongTime: \"g:i:s A\", // in jQuery UI Datepicker: \"h:mm:ss tt\"\r\n\t                SortableDateTime: \"Y-m-d\\\\TH:i:s\",\r\n\t                UniversalSortableDateTime: \"Y-m-d H:i:sO\",\r\n\t                // month with year\r\n\t                //    Y - A full numeric representation of a year, 4 digits\r\n\t                //    F - A full textual representation of a month\r\n\t                YearMonth: \"F, Y\" // in jQuery UI Datepicker: \"MMMM, yyyy\"\r\n\t            },\r\n\t            reformatAfterEdit : false\r\n\t        },\r\n\t        baseLinkUrl: '',\r\n\t        showAction: '',\r\n\t        target: '',\r\n\t        checkbox : {disabled:true},\r\n\t        idName : 'id'\r\n\t    }\r\n\t});\r\n\treturn that;\r\n});\n",
    "/**\r\n * 进度条控件\r\n * @author Mr.T\r\n */\r\ndefine('app/widgets/app-progressbar',['app/core/app-jquery', 'app/core/app-core', 'app/core/app-options'], function($, App, Options) {\r\n\t\r\n\t'use strict';\r\n\t/**\r\n\t * @class \r\n\t * @classdesc 进度条\r\n\t * @name progressbar\r\n\t * @desc 进度条的初始化方法\r\n\t * @param {input} input 要渲染的input组件\r\n\t * @param {object} options 组件的选项设置 \r\n\t * @author Mr.T\r\n\t */\r\n\tvar ProgressBar = function (input, options) {\r\n\t\tthis.$input = $(input).css('display','none');\r\n\t\tthis.options = options;\r\n\t\tthis._init();\r\n\t\t\r\n\t};\r\n\tProgressBar.prototype = {\r\n\t\tconstructor: ProgressBar,\r\n\t\t/**\r\n\t\t * 初始化\r\n\t\t */\r\n\t\t_init: function(){\r\n\t\t\tthis._initOptions();\r\n\t\t\tthis._wrapper();\r\n\t\t},\r\n\t\t_wrapper: function(){\r\n\t\t\tvar s = this.setting\r\n\t\t\t\t,percent = this.getPercent()\r\n\t\t\t\t,perExp = '';\r\n\t\t\tif(parseInt(s.height) > 16){\r\n\t\t\t\tperExp = '<span style=\"color:' + s.color + ';\">' + percent + '%</span>';\r\n\t\t\t}\r\n\t\t\tthis.$element = $('<div style=\"width:' + s.width + ';height:' + s.height + ';\" class=\"app-progressbar ' \r\n\t\t\t\t\t\t\t\t\t\t+ (s.striped ? 'activebar stripedbar' : '') + '\">' +\r\n\t\t\t\t\t\t\t\t'<div style=\"width: ' + percent + '%;background-color:' + s['background-color'] \r\n\t\t\t\t\t\t\t\t\t+ ';\"></div>' +\tperExp +\r\n\t\t\t\t \t\t\t'</div>').insertAfter(this.$input);\r\n\t\t},\r\n\t\t/**\r\n\t\t * 初始化配置\r\n\t\t */\r\n\t\t_initOptions: function(){\r\n\t\t\tvar attrs = {}\r\n\t\t\t\t,ia = this.$input[0].attributes;\r\n\t\t\tif(ia){\r\n\t\t\t\t// 继承html的原有属性\r\n\t\t\t\t$.each(ia, function(i, att){\r\n\t\t\t\t\tif(att.value == 'true'){\r\n\t\t\t\t\t\tattrs[att.name] = true;\r\n\t\t\t\t\t}else if(att.value == 'false'){\r\n\t\t\t\t\t\tattrs[att.name] = false;\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\tattrs[att.name] = att.value;\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t\tvar s = this.setting = $.extend({}, Options.appDefaults.progressbar, attrs, this.options);\r\n\t\t\ts.value = parseInt(s.value);\r\n\t\t\ts.max = parseInt(s.max);\r\n\t\t},\r\n\t\t/**\r\n\t\t * 获取进度百分比保留两位小数=当前值/最大值 * 100\r\n\t\t * @return {Number} number 组件的进度\r\n\t\t * @example $('#demo').progressbar('getPercent');\r\n\t\t * @memberof progressbar\r\n\t\t * @instance\r\n\t\t */\r\n\t\tgetPercent: function(){\r\n\t\t\treturn (this.setting.value / this.setting.max * 100).toFixed(2);\r\n\t\t},\r\n\t\t/**\r\n\t\t * 设置值\r\n\t\t * @param val\r\n\t\t */\r\n\t\t_setValue: function(val){\r\n\t\t\tthis.setting.value = val;\r\n\t\t\tvar percent = this.getPercent()+'%';\r\n\t\t\tthis.$element.find('>div').css('width',percent);\r\n\t\t\tthis.$element.find('>span').html(percent);\r\n\t\t},\r\n\t\t/**\r\n\t\t * 设置进度值\r\n\t\t * @param {Number} val 组件的进度\r\n\t\t * @example $('#demo').progressbar('setValue', 15);\r\n\t\t * @memberof progressbar\r\n\t\t * @instance\r\n\t\t */\r\n\t\tsetValue: function(val){\r\n\t\t\tvar s = this.setting;\r\n\t\t\tif(isNaN(val)){\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tif(val < 0){\r\n\t\t\t\tval = 0;\r\n\t\t\t}\r\n\t\t\tif(val > s.max){\r\n\t\t\t\tval = s.max;\r\n\t\t\t}\r\n\t\t\tthis._setValue(val);\r\n\t\t},\r\n\t\t/**\r\n\t\t * 开始动画\r\n\t\t * @example $('#demo').progressbar('active');\r\n\t\t * @memberof progressbar\r\n\t\t * @instance\r\n\t\t */\r\n\t\tactive: function(){\r\n\t\t\tthis.$element.addClass('activebar');\r\n\t\t},\r\n\t\t/**\r\n\t\t * 停止动画\r\n\t\t * @example $('#demo').progressbar('unactive');\r\n\t\t * @memberof progressbar\r\n\t\t * @instance\r\n\t\t */\r\n\t\tunactive: function(){\r\n\t\t\tthis.$element.removeClass('activebar');\r\n\t\t},\r\n\t\t/**\r\n\t\t * 获取当前进度\r\n\t\t * @returns {Number} number 当前进度值\r\n\t\t * @example $('#demo').progressbar('getValue');\r\n\t\t * @memberof progressbar\r\n\t\t * @instance\r\n\t\t */\r\n\t\tgetValue: function(){\r\n\t\t\treturn this.setting.value;\r\n\t\t},\r\n\t\t/**\r\n\t\t * 设置最大的进度值\r\n\t\t * @param {Number} max 最大的进度值\r\n\t\t * @example $('#demo').progressbar('setMax', 200);\r\n\t\t * @memberof progressbar\r\n\t\t * @instance\r\n\t\t */\r\n\t\tsetMax: function(max){\r\n\t\t\tif(!isNaN(max) && max > 0){\r\n\t\t\t\tthis.setting.max = max;\r\n\t\t\t\tthis.setValue(this.setting.value);\r\n\t\t\t}\r\n\t\t},\r\n\t\t/**\r\n\t\t * 获取最大的进度值\r\n\t\t * @return {Number} max 最大的进度值\r\n\t\t * @example $('#demo').progressbar('getMax');\r\n\t\t * @memberof progressbar\r\n\t\t * @instance\r\n\t\t */\r\n\t\tgetMax: function(){\r\n\t\t\treturn this.setting.max;\r\n\t\t},\r\n\t\tdestroy: function(){\r\n\t\t\t\r\n\t\t}\r\n\t};\r\n\t$.fn.progressbar = function (option, value) {\r\n\t\tvar methodReturn = undefined;\r\n\t\tthis.each(function () {\r\n\t\t\tvar $this = $(this)\r\n\t\t\t\t,data = $this.data('progressbar')\r\n\t\t\t\t,options = typeof option === 'object' && option;\r\n\t\t\tif (!data) $this.data('progressbar', (data = new ProgressBar(this, options)));\r\n\t\t\tif (typeof option === 'string') methodReturn = data[option](value);\r\n\t\t});\r\n\t\treturn methodReturn;\r\n\t};\r\n\r\n\t$.fn.progressbar.Constructor = ProgressBar;\r\n\treturn ProgressBar;\r\n});\n",
    "\r\ndefine('app/widgets/app-resizable',[\"app/core/app-jquery\"], function($){\r\n\r\n\t$.fn.resizable = function(options){\r\n\t\tfunction resize(e){\r\n\t\t\tvar resizeData = e.data;\r\n\t\t\tvar options = $.data(resizeData.target, 'resizable').options;\r\n\t\t\tif (resizeData.dir.indexOf('e') != -1) {\r\n\t\t\t\tvar width = resizeData.startWidth + e.pageX - resizeData.startX;\r\n\t\t\t\twidth = Math.min(\r\n\t\t\t\t\t\t\tMath.max(width, options.minWidth),\r\n\t\t\t\t\t\t\toptions.maxWidth\r\n\t\t\t\t\t\t);\r\n\t\t\t\tresizeData.width = width;\r\n\t\t\t}\r\n\t\t\tif (resizeData.dir.indexOf('s') != -1) {\r\n\t\t\t\tvar height = resizeData.startHeight + e.pageY - resizeData.startY;\r\n\t\t\t\theight = Math.min(\r\n\t\t\t\t\t\tMath.max(height, options.minHeight),\r\n\t\t\t\t\t\toptions.maxHeight\r\n\t\t\t\t);\r\n\t\t\t\tresizeData.height = height;\r\n\t\t\t}\r\n\t\t\tif (resizeData.dir.indexOf('w') != -1) {\r\n\t\t\t\tresizeData.width = resizeData.startWidth - e.pageX + resizeData.startX;\r\n\t\t\t\tif (resizeData.width >= options.minWidth && resizeData.width <= options.maxWidth) {\r\n\t\t\t\t\tresizeData.left = resizeData.startLeft + e.pageX - resizeData.startX;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif (resizeData.dir.indexOf('n') != -1) {\r\n\t\t\t\tresizeData.height = resizeData.startHeight - e.pageY + resizeData.startY;\r\n\t\t\t\tif (resizeData.height >= options.minHeight && resizeData.height <= options.maxHeight) {\r\n\t\t\t\t\tresizeData.top = resizeData.startTop + e.pageY - resizeData.startY;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t\tfunction applySize(e){\r\n\t\t\tvar resizeData = e.data;\r\n\t\t\tvar target = resizeData.target;\r\n\t\t\tif ($.boxModel == true){\r\n\t\t\t\t$(target).css({\r\n\t\t\t\t\twidth: resizeData.width - resizeData.deltaWidth,\r\n\t\t\t\t\theight: resizeData.height - resizeData.deltaHeight,\r\n\t\t\t\t\tleft: resizeData.left,\r\n\t\t\t\t\ttop: resizeData.top\r\n\t\t\t\t});\r\n\t\t\t} else {\r\n\t\t\t\t$(target).css({\r\n\t\t\t\t\twidth: resizeData.width,\r\n\t\t\t\t\theight: resizeData.height,\r\n\t\t\t\t\tleft: resizeData.left,\r\n\t\t\t\t\ttop: resizeData.top\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t\tfunction doDown(e){\r\n\t\t\t$.data(e.data.target, 'resizable').options.onStartResize.call(e.data.target, e);\r\n\t\t\treturn false;\r\n\t\t}\r\n\t\t\r\n\t\tfunction doMove(e){\r\n\t\t\tresize(e);\r\n\t\t\tif ($.data(e.data.target, 'resizable').options.onResize.call(e.data.target, e) != false){\r\n\t\t\t\tapplySize(e)\r\n\t\t\t}\r\n\t\t\treturn false;\r\n\t\t}\r\n\t\t\r\n\t\tfunction doUp(e){\r\n\t\t\tresize(e, true);\r\n\t\t\tapplySize(e);\r\n\t\t\t$(document).unbind('.resizable');\r\n\t\t\t$.data(e.data.target, 'resizable').options.onStopResize.call(e.data.target, e);\r\n\t\t\treturn false;\r\n\t\t}\r\n\t\t\r\n\t\treturn this.each(function(){\r\n\t\t\tvar opts = null;\r\n\t\t\tvar state = $.data(this, 'resizable');\r\n\t\t\tif (state) {\r\n\t\t\t\t$(this).unbind('.resizable');\r\n\t\t\t\topts = $.extend(state.options, options || {});\r\n\t\t\t} else {\r\n\t\t\t\topts = $.extend({}, $.fn.resizable.defaults, options || {});\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tif (opts.disabled == true) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\t$.data(this, 'resizable', {\r\n\t\t\t\toptions: opts\r\n\t\t\t});\r\n\t\t\t\r\n\t\t\tvar target = this;\r\n\t\t\t\r\n\t\t\t// bind mouse event using namespace resizable\r\n\t\t\t$(this).bind('mousemove.resizable', onMouseMove)\r\n\t\t\t\t   .bind('mousedown.resizable', onMouseDown);\r\n\t\t\t\r\n\t\t\tfunction onMouseMove(e) {\r\n\t\t\t\tvar dir = getDirection(e);\r\n\t\t\t\tif (dir == '') {\r\n\t\t\t\t\t$(target).css('cursor', 'default');\r\n\t\t\t\t} else {\r\n\t\t\t\t\t$(target).css('cursor', dir + '-resize');\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tfunction onMouseDown(e) {\r\n\t\t\t\tvar dir = getDirection(e);\r\n\t\t\t\tif (dir == '') return;\r\n\t\t\t\t\r\n\t\t\t\tvar data = {\r\n\t\t\t\t\ttarget: this,\r\n\t\t\t\t\tdir: dir,\r\n\t\t\t\t\tstartLeft: getCssValue('left'),\r\n\t\t\t\t\tstartTop: getCssValue('top'),\r\n\t\t\t\t\tleft: getCssValue('left'),\r\n\t\t\t\t\ttop: getCssValue('top'),\r\n\t\t\t\t\tstartX: e.pageX,\r\n\t\t\t\t\tstartY: e.pageY,\r\n\t\t\t\t\tstartWidth: $(target).outerWidth(),\r\n\t\t\t\t\tstartHeight: $(target).outerHeight(),\r\n\t\t\t\t\twidth: $(target).outerWidth(),\r\n\t\t\t\t\theight: $(target).outerHeight(),\r\n\t\t\t\t\tdeltaWidth: $(target).outerWidth() - $(target).width(),\r\n\t\t\t\t\tdeltaHeight: $(target).outerHeight() - $(target).height()\r\n\t\t\t\t};\r\n\t\t\t\t$(document).bind('mousedown.resizable', data, doDown);\r\n\t\t\t\t$(document).bind('mousemove.resizable', data, doMove);\r\n\t\t\t\t$(document).bind('mouseup.resizable', data, doUp);\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\t// get the resize direction\r\n\t\t\tfunction getDirection(e) {\r\n\t\t\t\tvar dir = '';\r\n\t\t\t\tvar offset = $(target).offset();\r\n\t\t\t\tvar width = $(target).outerWidth();\r\n\t\t\t\tvar height = $(target).outerHeight();\r\n\t\t\t\tvar edge = opts.edge;\r\n\t\t\t\tif (e.pageY > offset.top && e.pageY < offset.top + edge) {\r\n\t\t\t\t\tdir += 'n';\r\n\t\t\t\t} else if (e.pageY < offset.top + height && e.pageY > offset.top + height - edge) {\r\n\t\t\t\t\tdir += 's';\r\n\t\t\t\t}\r\n\t\t\t\tif (e.pageX > offset.left && e.pageX < offset.left + edge) {\r\n\t\t\t\t\tdir += 'w';\r\n\t\t\t\t} else if (e.pageX < offset.left + width && e.pageX > offset.left + width - edge) {\r\n\t\t\t\t\tdir += 'e';\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tvar handles = opts.handles.split(',');\r\n\t\t\t\tfor(var i=0; i<handles.length; i++) {\r\n\t\t\t\t\tvar handle = handles[i].replace(/(^\\s*)|(\\s*$)/g, '');\r\n\t\t\t\t\tif (handle == 'all' || handle == dir) {\r\n\t\t\t\t\t\treturn dir;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\treturn '';\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tfunction getCssValue(css) {\r\n\t\t\t\tvar val = parseInt($(target).css(css));\r\n\t\t\t\tif (isNaN(val)) {\r\n\t\t\t\t\treturn 0;\r\n\t\t\t\t} else {\r\n\t\t\t\t\treturn val;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t\r\n\t\t});\r\n\t};\r\n\t\r\n\t$.fn.resizable.defaults = {\r\n\t\t\tdisabled:false,\r\n\t\t\thandles:'n, e, s, w, ne, se, sw, nw, all',\r\n\t\t\tminWidth: 10,\r\n\t\t\tminHeight: 10,\r\n\t\t\tmaxWidth: 10000,//$(document).width(),\r\n\t\t\tmaxHeight: 10000,//$(document).height(),\r\n\t\t\tedge:5,\r\n\t\t\tonStartResize: function(e){},\r\n\t\t\tonResize: function(e){},\r\n\t\t\tonStopResize: function(e){}\r\n\t};\r\n\t\r\n});\n",
    "// JavaScript Document\r\ndefine('app/widgets/app-scroll',[\"app/core/app-jquery\",\"app/core/app-core\"],function($,$A) {\r\n\r\n\t /* SCROLLSPY CLASS DEFINITION\r\n\t  * ========================== */\r\n\r\n\t  function ScrollSpy(element) {\r\n\t\t  var $element=$(element)\r\n\t\t  \t,target = $element.attr(\"target\")\r\n\t\t  \t,$target = $A(target);\r\n\t\t  this.$element = $element;\r\n\t\t  if($target.length == 0){\r\n\t\t\t  $target=$A();\r\n\t\t  };\r\n\t\t  if($target.is(document)){\r\n\t\t\t  $target=$(window);\r\n\t\t  };\r\n\t\t  this.options = $.extend({}, $.fn.scrollspy.defaults, $A.options.scrollspy);\r\n\t\t  var process = $.proxy(this.process, this);\r\n\t\t  this.$scrollElement = $target.on('scroll.scroll-spy.data-api', process);\r\n\t\t  this.selector = 'ul>li> a';\r\n\t\t  this.$body = $('body');\r\n\t\t  this.refresh();\r\n\t\t  this.process();\r\n\t  }\r\n\r\n\t  ScrollSpy.prototype = {\r\n\r\n\t      constructor: ScrollSpy\r\n\r\n\t    , refresh: function () {\r\n\t        var self = this;\r\n\t        this.offsets = $([]);\r\n\t        this.targets = $([]);\r\n\t        $targets = this.$element.find(this.selector)\r\n\t        \t.map(function () {\r\n\t        \t\tvar $el = $(this)\r\n\t        \t\t,href = $el.data('target') || $el.attr('href')\r\n\t        \t\t,$href = /^#\\w/.test(href) && $(href);\r\n\t        \t\treturn ( $href && $href.length\r\n\t        \t\t\t\t&& [[ $href.position().top + (!$.isWindow(self.$scrollElement.get(0)) && (self.$scrollElement.scrollTop())-self.$scrollElement.position().top), href ]] ) || null;\r\n\t        \t})\r\n\t        \t.sort(function (a, b) { return a[0] - b[0];})\r\n\t        \t.each(function () {\r\n\t        \t\tself.offsets.push(this[0]);\r\n\t        \t\tself.targets.push(this[1]);\r\n\t        \t});\r\n\t      }\r\n\r\n\t    , process: function () {\r\n\t        var scrollTop = this.$scrollElement.scrollTop() + this.options.offset\r\n\t          , scrollHeight = this.$scrollElement[0].scrollHeight || this.$body[0].scrollHeight\r\n\t          , maxScroll = scrollHeight - this.$scrollElement.height()\r\n\t          , offsets = this.offsets\r\n\t          , targets = this.targets\r\n\t          , activeTarget = this.activeTarget\r\n\t          , i;\r\n\r\n\t        if (scrollTop >= maxScroll) {\r\n\t          return activeTarget != (i = targets.last()[0])\r\n\t            && this.activate ( i );\r\n\t        }\r\n\t        if (scrollTop <= this.offsets[0]) {\r\n\t          return activeTarget != (i = targets.first()[0])\r\n\t            && this.activate ( i );\r\n\t        }\r\n\t        for (i = offsets.length; i--;) {\r\n\t          activeTarget != targets[i]\r\n\t            && scrollTop >= offsets[i]-50\r\n\t            && (!offsets[i + 1] || scrollTop <= offsets[i + 1]-50)\r\n\t            && this.activate( targets[i] );\r\n\t        }\r\n\t      }\r\n\r\n\t    , activate: function (target) {\r\n\t        this.activeTarget = target;\r\n\t        var $items = this.$element.find(this.selector);\r\n\t        $items.parent('.active').removeClass('active');\r\n\r\n\t        var $active = $items.filter('[data-target=\"' + target + '\"],[href=\"' + target + '\"]');\r\n\t        $active.parent('li').addClass('active');\r\n\t        $active.trigger('activate');\r\n\t      }\r\n\r\n\t  };\r\n\r\n\r\n\t /* SCROLLSPY PLUGIN DEFINITION\r\n\t  * =========================== */\r\n\t  $.fn.scrollspy = function (option) {\r\n\t    return this.each(function () {\r\n\t      var $this = $(this)\r\n\t        , data = $this.data('scrollspy')\r\n\t        , options = typeof option == 'object' && option;\r\n\t      if (!data) $this.data('scrollspy', (data = new ScrollSpy(this, options)));\r\n\t      if (typeof option == 'string') data[option]();\r\n\t    });\r\n\t  };\r\n\r\n\t  $.fn.scrollspy.Constructor = ScrollSpy;\r\n\t  $.fn.scrollspy.defaults = {offset: 30};\r\n\t\r\n});\r\n\n",
    "define('app/widgets/app-scrolltable',[], function() {\r\n\tfunction ScrollTable($div,options){\r\n\t\tvar DefaultSetting = {\r\n\t\t\t\"scrollHeight\":170,//滚动内容的高度\r\n\t\t\t\"timer\":1000*3,//每过10秒滚动一次\r\n\t\t\t\"startRowIndex\":0,//从第多少条记录开始滚动\r\n\t\t\t\"columns\":[]//数据列定义\r\n\t\t};\r\n\t\t\r\n\t\tthis.$div = $div;\r\n\t\tthis.data = [];\r\n\t\tthis.loading = false;\r\n\t\tthis.running = false;\r\n\t\tthis.status = 0;//0\r\n\t\t\r\n\t\tif(!options){\r\n\t\t\toptions = {};\r\n\t\t}\r\n\t\tthis.setting = $.extend(DefaultSetting,options);\r\n\t\tthis.pageIndex = 0;\r\n\t\tthis.threadId = new Date().getTime();\r\n\t\tthis._init();\r\n\t};\r\n\t\r\n\tScrollTable.prototype._init = function(){\r\n\t\tthis.$div.data(\"scrollTable\",this);\r\n\t\tthis.$div.data(\"scrollTable_threadId\",this.threadId);\r\n\t\tthis.$div.find(\".scrollTable_body\").height(this.setting.scrollHeight);\r\n\t\tthis.$div.find(\".scrollTable_body\").hover(function(){\r\n\t\t\t$(this).addClass(\"pause\");\r\n\t\t},function(){\r\n\t\t\t$(this).removeClass(\"pause\");\r\n\t\t});\r\n\t\tthis.$div.find(\".scrollTable_header table tbody\").append(this._createTitle());\r\n\t};\r\n\t\r\n\tScrollTable.prototype.stop = function(){\r\n\t\tthis.running = false;\r\n\t};\r\n\t\r\n\tScrollTable.prototype.start = function(){\r\n\t\tthis.running = true;\r\n\t\tvar scrollTable = this;\r\n\t\t(function(){\r\n\t\t\t//检查元素是否还在\r\n\t\t\tvar $scrollTable = $(\".scrollTable\").filter(function(){\r\n\t\t\t\treturn $(this).data(\"scrollTable_threadId\")==scrollTable.threadId;\r\n\t\t\t});\r\n\t\t\tif($scrollTable.length==0){\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tvar $div = scrollTable.$div;\r\n\t\t\tvar setting = scrollTable.setting;\r\n\t\t\tvar running = scrollTable.running;\r\n\t\t\tvar pause = scrollTable.$div.find(\".scrollTable_body\").hasClass(\"pause\");\r\n\t\t\t\r\n\t\t\tif(!running){\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tif(scrollTable.loading){\r\n\t\t\t\tscrollTable.reset();\r\n\t\t\t\tscrollTable.loading = false;\r\n\t\t\t}\r\n\t\t\tif(!pause){\r\n\t\t\t\tvar rowCount = $div.find(\".scrollTable_scrollContent table tr\").length;\r\n//\t\t\t\tvar scrollHeight = setting.rowHeight*setting.scrollRowCount;\r\n\t\t\t\t//一共多少页\r\n\t\t\t\tvar maxPage = (function(rowCount,pageRowCount){\r\n\t\t\t\t\tvar tmp = rowCount%pageRowCount;\r\n\t\t\t\t\tvar result = (rowCount-tmp)/pageRowCount;\r\n\t\t\t\t\tif(tmp>0){\r\n\t\t\t\t\t\tresult ++;\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn result;\r\n\t\t\t\t})(rowCount,setting.scrollRowCount);\r\n\t\t\t\tif(scrollTable.pageIndex>=maxPage){\r\n\t\t\t\t\tscrollTable.pageIndex = 0;\r\n\t\t\t\t\t$div.find(\".scrollTable_scrollContent\").css(\"top\",\"0px\");\r\n\t\t\t\t}else{\r\n\t\t\t\t\tif(maxPage>0){\r\n\t\t\t\t\t\tvar $tr = $div.find(\".scrollTable_scrollContent table tr:eq(\"+(scrollTable.pageIndex*setting.scrollRowCount)+\")\");\r\n//\t\t\t\t\t\tvar scrollTop =scrollTable.pageIndex*scrollHeight;\r\n\t\t\t\t\t\tvar scrollTop = $tr.position().top;\r\n\t\t\t\t\t\t$div.find(\".scrollTable_scrollContent\").animate({\r\n\t\t\t\t\t\t\t\"top\":\"-\"+scrollTop+\"px\"\r\n\t\t\t\t\t\t},500);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tscrollTable.pageIndex++;\r\n\t\t\t}\r\n\t\t\tsetTimeout(arguments.callee, setting.timer);\r\n\t\t})();\r\n\t};\r\n\t\r\n\tScrollTable.prototype.loadData = function(data){\r\n\t\tthis.data = data;\r\n\t\tthis.loading = true;\r\n\t};\r\n\t\r\n\tScrollTable.prototype.reset = function(){\r\n\t\tthis.pageIndex = 0;\r\n\t\tvar $tbody = this.$div.find(\".scrollTable_scrollContent table tbody\");\r\n\t\t$tbody.empty();\r\n\t\tfor(var i=0,n=this.data.length;i<n;i++){\r\n\t\t\t$tbody.append(this._createRow(this.data[i]));\r\n\t\t}\r\n\t\tthis.$div.find(\".scrollTable_scrollContent\").css(\"top\",\"0px\");\r\n\t};\r\n\t\r\n//\tScrollTable.prototype._createCell = function(){\r\n//\t\tvar $td = $(\"<td><div></div></td>\");\r\n//\t\t$td.find(\"div\").text(value);\r\n//\t\treturn $td;\r\n//\t};\r\n\tScrollTable.prototype._createRow = function(rowData){\r\n\t\tvar $tr = $(\"<tr></tr>\");\r\n\t\tfor(var i=0;i<this.setting.columns.length;i++){\r\n\t\t\tvar $td = $(\"<td><div></div></td>\");\r\n\t\t\t$td.css(\"width\",this.setting.columns[i].width);\r\n\t\t\tif(rowData[this.setting.columns[i].name]){\r\n\t\t\t\tvar format = this.setting.columns[i].format;\r\n\t\t\t\tif(!format){\r\n\t\t\t\t\tformat = function(val,rowData){\r\n\t\t\t\t\t\treturn val;\r\n\t\t\t\t\t};\r\n\t\t\t\t}\r\n\t\t\t\tvar val = format(rowData[this.setting.columns[i].name],rowData);\r\n\t\t\t\tif(val===undefined || val===null){\r\n\t\t\t\t\tval = \"\";\r\n\t\t\t\t}\r\n\t\t\t\tif(this.setting.columns[i].style){\r\n\t\t\t\t\t$td.find(\">div\").attr(\"style\",this.setting.columns[i].style);\r\n\t\t\t\t}\r\n\t\t\t\t$td.find(\"div\").text(val);\r\n\t\t\t}\r\n\t\t\t$tr.append($td);\r\n\t\t}\r\n\t\treturn $tr;\r\n\t};\r\n\t\r\n\tScrollTable.prototype._createTitle = function(){\r\n\t\tvar $tr = $(\"<tr></tr>\");\r\n\t\tfor(var i=0;i<this.setting.columns.length;i++){\r\n\t\t\tvar $th = $(\"<th></th>\");\r\n\t\t\t$th.text(this.setting.columns[i].title);\r\n\t\t\t$th.css(\"width\",this.setting.columns[i].width);\r\n\t\t\t$tr.append($th);\r\n\t\t}\r\n\t\treturn $tr;\r\n\t};\r\n\t\r\n\r\n\t$.fn.ScrollTable = function(option,value){\r\n\t\tvar result = undefined;\r\n\t\tthis.each(function () {\r\n\t\t\tvar $this = $(this);\r\n\t\t\tvar scrollTable = $this.data('scrollTable');\r\n\t\t\t\r\n\t\t\tvar options = typeof option === 'object' && option;\r\n\t\t\tif(!scrollTable){\r\n\t\t\t\tscrollTable = new ScrollTable($this,options);\r\n\t\t\t}\r\n\t\t\tif (typeof option === 'string') {\r\n\t\t\t\tresult = scrollTable[option](value);\r\n\t\t\t}\r\n\t\t});\r\n\t\treturn result;\r\n\t};\r\n\t\r\n\treturn ScrollTable;\r\n});\n",
    "/**\r\n * 下拉面板控件--继承Textbox\r\n * @author Mr.T\r\n */\r\ndefine('app/widgets/form/app-checkbox',['app/core/app-base', 'app/core/app-jquery', 'app/core/app-core', 'app/core/app-options',\r\n        'app/data/app-ajax'], function(Base, $, App, Options, AppAjax) {\r\n\r\n\t'use strict';\r\n\t\r\n\t/**\r\n\t * @abstract\r\n\t * @class \r\n\t * @classdesc 复选框\r\n\t * @name checkbox-class\r\n\t * @desc 复选框的初始化方法\r\n\t * @param {DOMElement} input 要渲染的input组件\r\n\t * @param {Object} options 组件的选项设置 \r\n\t * @author Mr.T\r\n\t */\r\n\tvar Checkbox = Base.extend({\r\n\t\tinitialize: function(input, options) {\r\n\t\t\tthis.$input = $(input);\r\n\t\t\tif(!options){\r\n\t\t\t\toptions = {};\r\n\t\t\t}\r\n\t\t\tthis.options = options; \r\n\t\t\tthis.setting = $.extend({}, Options.appDefaults.Checkbox, App.getAttrFromElement(this.$input), this.options);\r\n\t\t\tthis._init();\r\n\t\t},\r\n\t\t_init: function(){\r\n\t\t\tthis._initOptions();\r\n\t\t\tthis._wrapDiv();\r\n\t\t\tthis._initData();\r\n\t\t\tthis._registEvent();\r\n\t\t\tif($.isFunction(this.setting.onClick)){\r\n\t\t\t\tthis.on('onClick', this.setting.onClick);\r\n\t\t\t}\r\n\t\t\tif(this.setting.disabled){\r\n\t\t\t\tthis.disable();\r\n\t\t\t}\r\n\t\t},\r\n\t\t_initOptions: function(){\r\n\t\t\tif(this.setting.id == undefined){\r\n\t\t\t\tthis.setting.id = App.uuid();\r\n\t\t\t}\r\n\t\t\tif(this.setting.name == undefined){\r\n\t\t\t\tthis.setting.name = App.uuid();\r\n\t\t\t}\r\n\t\t},\r\n\t\t_initData: function(){\r\n\t\t\tif(this.setting.data){\r\n\t\t\t\tthis._render$Node(this.setting.data);\r\n\t\t\t}else{\r\n\t\t\t\tthis.reload();\r\n\t\t\t}\r\n\t\t},\r\n\t\t_registEvent: function(){\r\n\t\t\tvar that = this;\r\n\t\t\tthis.$element.on('click.checkbox.api', 'input[type=checkbox]', function(e){\r\n\t\t\t\tvar checkedLen = parseInt(that.setting.checkedLen);\r\n\t\t\t\tif(checkedLen == 1){\r\n\t\t\t\t\tthat.$element.find('input[type=checkbox]').prop('checked', false);\r\n\t\t\t\t\t$(this).prop('checked', true);\r\n\t\t\t\t}else if(checkedLen > 1){\r\n\t\t\t\t\t/**\r\n\t\t\t\t\t * 点击复选框时触发\r\n\t\t\t\t\t * @event checkbox-class#onClick\r\n\t\t\t\t\t * @param {e} e 点击事件\r\n\t\t\t\t\t */\r\n\t\t\t\t\tvar checked = this.checked;\r\n\t\t\t\t\tif(checked && $.isNumeric(that.setting.checkedLen)){//控制最多可选中项数量\r\n\t\t\t\t\t\tvar val = that.getValue();\r\n\t\t\t\t\t\tif(val && val.split(',').length > that.setting.checkedLen){//超过数据,不选中且不触发onClick\r\n\t\t\t\t\t\t\t$(this).prop(\"checked\", false);\r\n\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tthat.trigger('onClick', e);\r\n\t\t\t});\r\n\t\t},\r\n\t\t/**\r\n\t\t * 获取被勾选的项的隐藏值\r\n\t\t * @returns {Array} result 数组\r\n\t\t * @example $('#demo').checkbox('getValue');\r\n\t\t * @memberof checkbox-class\r\n\t\t * @instance\r\n\t\t */\r\n\t\tgetValue: function(){\r\n\t\t\tvar $node =  this.$element.find('input:checked')\r\n\t\t\t\t,vs = [];\r\n\t\t\t$node.each(function(){\r\n\t\t\t\tvs.push(this.value);\t\t\t\t\r\n\t\t\t});\r\n\t\t\treturn vs.join(',');\r\n\t\t},\r\n\t\t/**\r\n\t\t * 设置勾选的项\r\n\t\t * @example $('#demo').checkbox('setValue', 1,2);\r\n\t\t * @example $('#demo').checkbox('setValue', [1,2]);\r\n\t\t * @memberof checkbox-class\r\n\t\t * @instance\r\n\t\t */\r\n\t\tsetValue: function(vals){\r\n\t\t\tif(!$.isArray(vals)){\r\n\t\t\t\tif(typeof(vals) == 'string'){\r\n\t\t\t\t\tvals = vals.split(',');\r\n\t\t\t\t}else{\r\n\t\t\t\t\tvals = '' + vals;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tthis.clearValue();\r\n\t\t\tfor(var i = 0; i < vals.length; i++){\r\n\t\t\t\tthis.$element.find('input[value=\"' + vals[i] + '\"]').prop('checked', true);\r\n\t\t\t}\r\n\t\t},\r\n\t\tsetText: function(){\r\n\t\t},\r\n\t\tfocus: function(){\r\n\t\t},\r\n\t\t/**\r\n\t\t * 获取被勾选项的显示值\r\n\t\t * @returns {Array} result 数组\r\n\t\t * @example $('#demo').checkbox('getValue');\r\n\t\t * @memberof checkbox-class\r\n\t\t * @instance\r\n\t\t */\r\n\t\tgetText: function(){\r\n\t\t\tif($.isFunction(this.setting.textFormatter)){\r\n\t\t\t\tvar value = this.getValue();\r\n\t\t\t\treturn this.setting.textFormatter(value);\r\n\t\t\t}else{\r\n\t\t\t\tvar $node =  this.$element.find('input:checked')\r\n\t\t\t\t\t,vs = [];\r\n\t\t\t\t$node.each(function(){\r\n\t\t\t\t\tvs.push($(this).attr('title'));\t\t\t\t\r\n\t\t\t\t});\r\n\t\t\t\treturn vs.join(',');\r\n\t\t\t}\r\n\t\t},\r\n\t\t/**\r\n\t\t * 重新载入选择项数据\r\n\t\t * @example $('#demo').checkbox('reload');\r\n\t\t * @example $('#demo').checkbox('reload', 'a.do');\r\n\t\t * @example $('#demo').checkbox('reload', [{id:'1',name:'石山水'},{id:'12',name:'凤飞飞'}]);\r\n\t\t * @memberof checkbox-class\r\n\t\t * @instance\r\n\t\t */\r\n\t\treload: function(option){\r\n\t\t\tif($.isArray(option)){\r\n\t\t\t\tthis.loadData(option);\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tif(option){\r\n\t\t\t\tthis.setting.url = option;\r\n\t\t\t}else if(!this.setting.url){\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tvar that = this;\r\n\t\t\tAppAjax.ajaxCall({\r\n\t\t\t\turl: this.setting.url,\r\n\t\t\t\tdataType: 'json',\r\n\t\t\t\ttype: 'POST',\r\n\t\t\t\tsuccess: function(data){\r\n\t\t\t\t\tthat.setting.data = data;\r\n\t\t\t\t\tthat.$element.find('.checkboxDiv').remove();\r\n\t\t\t\t\tthat._render$Node(data);\r\n\t\t\t\t}\r\n\t\t\t});\t\r\n\t\t},\r\n\t\t/**\r\n\t\t * 载入选择项数据\r\n\t\t * @example $('#demo').checkbox('loadData', [{id:'1',name:'石山水'},{id:'12',name:'凤飞飞'}]);\r\n\t\t * @memberof checkbox-class\r\n\t\t * @instance\r\n\t\t */\r\n\t\tloadData: function(data){\r\n\t\t\tthis.$element.find('.checkboxDiv').remove();\r\n\t\t\tthis._render$Node(data);\r\n\t\t},\r\n\t\t/**\r\n\t\t * 禁用组件\r\n\t\t * @todo 使用一个遮罩将组件屏蔽住\r\n\t\t * @example $('#demo').checkbox('disable');\r\n\t\t * @memberof checkbox-class\r\n\t\t * @instance\r\n\t\t */\r\n\t\tdisable: function(){\r\n\t\t\tif(this.$disabledMask == undefined){\r\n\t\t\t\tthis.$disabledMask = $('<div class=\"wrapper-disabled-mask\"></div>');\r\n\t\t\t\tthis.$element.append(this.$disabledMask);\r\n\t\t\t}else{\r\n\t\t\t\tthis.$disabledMask.show();\r\n\t\t\t}\r\n\t\t\tthis.$element.addClass('wrapper-disabled');\r\n\t\t},\r\n\t\t/**\r\n\t\t * 启用组件\r\n\t\t * @todo 将遮罩移除\r\n\t\t * @example $('#demo').checkbox('enable');\r\n\t\t * @memberof checkbox-class\r\n\t\t * @instance\r\n\t\t */\r\n\t\tenable: function(){\r\n\t\t\tif(this.$disabledMask){\r\n\t\t\t\tthis.$disabledMask.hide();\r\n\t\t\t}\r\n\t\t\tthis.$element.removeClass('wrapper-disabled');\r\n\t\t},\r\n\t\t/**\r\n\t\t * 切换可用状态\r\n\t\t * @memberof checkbox-class\r\n\t\t * @instance\r\n\t\t */\r\n\t\ttoggleEnable: function(){\r\n\t\t\tif(this.$disabledMask && this.$disabledMask.is(':visible')){\r\n\t\t\t\tthis.enable();\r\n\t\t\t}else{\r\n\t\t\t\tthis.disable();\r\n\t\t\t}\r\n\t\t},\r\n\t\t/**\r\n\t\t * 清除值\r\n\t\t * @todo 清除显示值\r\n\t\t * @todo 清除隐藏值\r\n\t\t * @example $('#demo').checkbox('clearValue');\r\n\t\t * @memberof checkbox-class\r\n\t\t * @instance\r\n\t\t */\r\n\t\tclearValue: function(){\r\n\t\t\tthis.$element.find('input:checked').prop('checked', false);\r\n\t\t},\r\n\t\t_wrapDiv: function(){\r\n\t\t\tthis.$input.css('display', 'none');\r\n\t\t\tthis.$input.wrap('<div class=\"multipleboxDiv ' + this.setting.orient + '\" style=\"' + this.setting.style + '\"></div>');\r\n\t\t\tthis.$element = this.$input.parent();\r\n\t\t},\r\n\t\t_render$Node: function(data){\r\n\t\t\tvar nodesHtml = ''\r\n\t\t\t\t,id = this.setting.id\r\n\t\t\t\t,name = this.setting.name\r\n\t\t\t\t,vf = this.setting.valuefield\r\n\t\t\t\t,tf = this.setting.textfield;\r\n\t\t\tfor (var i = 0; i < data.length; i++) {\r\n\t\t\t\tvar node = data[i];\r\n\t\t\t\tnodesHtml += '<div class=\"checkboxDiv\">' +\r\n\t\t\t\t\t\t\t\t'<input type=\"checkbox\"' +\r\n\t\t\t\t\t\t\t\t\t'id=\"' + id + i + '\"' +\r\n\t\t\t\t\t\t\t\t\t'name=\"' + id + '\"' +\r\n\t\t\t\t\t\t\t\t\t'value=\"' + node[vf] + '\"' + \r\n\t\t\t\t\t\t\t\t\t'title=\"' + node[tf] + '\"' +\r\n\t\t\t\t\t\t\t\t\t(node.checked ? 'checked=\"true\"' : '') + \r\n\t\t\t\t\t\t\t\t'/>' + \r\n\t\t\t\t\t\t\t\t'<label for=\"' + id + i + '\">' + node[tf] + '</label>' +\r\n\t\t\t\t\t\t\t'</div>';\r\n\t\t\t}\r\n\t\t\tthis.$element.append($(nodesHtml));\r\n\t\t}\r\n\t});\r\n\t$.fn.checkbox = function(option, value) {\r\n\t\tvar methodReturn = undefined\r\n\t\t\t,args = arguments\r\n\t\t\t,componentName = 'checkbox';\r\n\t\tthis.each(function() {\r\n\t\t\tvar $this = $(this);\r\n\t\t\tif(!$this.is('input')){\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\t\t\tvar component = App.getComponent($this, componentName);\r\n\t\t\tif(typeof option === 'string'){\r\n\t\t\t\ttry{\r\n\t\t\t\t\tvar methodArgs = Array.prototype.slice.call(args, 1);\r\n\t\t\t\t\tmethodReturn = App.componentMethodApply(component, option, methodArgs);\r\n\t\t\t\t}catch(e){\r\n\t\t\t\t\tApp.throwCompMethodError($this, componentName, option, e);\r\n\t\t\t\t}\r\n\t\t\t}else{\r\n\t\t\t\tif(!component){\r\n\t\t\t\t\tcomponent = new Checkbox(this, option);\r\n\t\t\t\t\t$this.data(componentName, component);\r\n\t\t\t\t}else{\r\n\t\t\t\t\tApp.throwCompInitError($this, componentName);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\t\treturn methodReturn;\r\n\t};\r\n\r\n\t$.fn.checkbox.Constructor = Checkbox;\r\n\treturn Checkbox;\r\n});\n",
    "/**\r\n * 下拉面板控件\r\n */\r\ndefine('app/widgets/form/app-comp',['app/core/app-jquery','app/core/app-core','app/widgets/form/app-combobox'],function($,$A) {\r\n\t\r\n\tfunction setSimpleValue(v){\r\n\t\t$(this).val(v);\r\n\t};\r\n\tfunction getSimpleValue(){\r\n\t\treturn $(this).val();\r\n\t};\r\n\tfunction setBoxValue(v){\r\n\t\tvar $this = $(this);\r\n\t\tif($this.attr(\"type\")==\"radio\"){\r\n\t\t\t$this.each(function(){\r\n\t\t\t\tvar $t = $(this);\r\n\t\t\t\tif($t.val()==v){\r\n\t\t\t\t\t$t.attr('checked', 'true');\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}else{\r\n\t\t\tv = \",\"+v+\",\";\r\n\t\t\t$this.each(function(){\r\n\t\t\t\tvar $t = $(this),val=$t.val();\r\n\t\t\t\tif(v.indexOf(\",\"+val+\",\")>-1){\r\n\t\t\t\t\t$t.attr('checked', 'true');\r\n\t\t\t\t}else{\r\n\t\t\t\t\t$t.removeAttr('checked');\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\t};\r\n\tfunction getBoxValue(){\r\n\t\tvar rs = new Array;\r\n\t\t$(this).filter(\":checked\").each(function(){\r\n\t\t\trs.push($(this).val());\r\n\t\t});\r\n\t\tif(rs.length == 0)\r\n\t\t\treturn null;\r\n\t\treturn rs.join(\",\");\r\n\t};\r\n\tfunction setWrapperValue(v,type){\r\n\t\t$(this)[type](\"setValue\",v);\r\n\t};\r\n\tfunction getWrapperValue(type){\r\n\t\treturn $(this)[type](\"getValue\");\r\n\t};\r\n\tfunction setWrapperText(t,type){\r\n\t\t$(this)[type](\"setText\",t);\r\n\t};\r\n\tfunction getWrapperText(type){\r\n\t\treturn $(this)[type](\"getText\");\r\n\t};\r\n\tfunction setParameter(t,type){\r\n\t\t$(this)[type](\"setParameter\",t);\r\n\t};\r\n\tfunction clearSimpleValue(){\r\n\t\t$(this).val('');\r\n\t};\r\n\tfunction clearValue(v,type){\r\n\t\t$(this)[type](\"clearValue\");\r\n\t};\r\n\tvar getValues = {\r\n\t\thidden:getSimpleValue,\r\n\t\ttextfield:getSimpleValue,\r\n\t\ttextbox:getWrapperValue,\r\n\t\ttextarea:getSimpleValue,\r\n\t\tdatetime:getWrapperValue,\r\n\t\tmoney:getWrapperValue,\r\n\t\tnumber:getWrapperValue,\r\n\t\tcombobox:getWrapperValue,\r\n\t\tcomboztree:getWrapperValue,\r\n\t\tcombogrid:getWrapperValue,\r\n\t\treference:getWrapperValue,\r\n\t\tsuggest:getWrapperValue,\r\n\t\ttypeahead:getSimpleValue,\r\n\t\tradio:getBoxValue,\r\n\t\tcheckbox:getBoxValue\r\n\t};\r\n\tvar setValues = {\r\n\t\thidden:setSimpleValue,\r\n\t\ttextfield:setSimpleValue,\r\n\t\ttextarea:setSimpleValue,\r\n\t\ttextbox:setWrapperValue,\r\n\t\tdatetime:setWrapperValue,\r\n\t\tmoney:setWrapperValue,\r\n\t\tnumber:setWrapperValue,\r\n\t\tcombobox:setWrapperValue,\r\n\t\tcomboztree:setWrapperValue,\r\n\t\tcombogrid:setWrapperValue,\r\n\t\treference:setWrapperValue,\r\n\t\tsuggest:setWrapperValue,\r\n\t\ttypeahead:setSimpleValue,\r\n\t\tradio:setBoxValue,\r\n\t\tcheckbox:setBoxValue\r\n\t};\r\n\tvar getTexts = {\r\n\t\thidden:getSimpleValue,\r\n\t\ttextfield:getSimpleValue,\r\n\t\ttextarea:getSimpleValue,\r\n\t\ttextbox:getSimpleValue,\r\n\t\tmoney:getWrapperText,\r\n\t\tnumber:getWrapperText,\r\n\t\tdatetime:getWrapperText,\r\n\t\tcombobox:getWrapperText,\r\n\t\tcomboztree:getWrapperText,\r\n\t\tcombogrid:getWrapperText,\r\n\t\treference:getWrapperText,\r\n\t\tsuggest:getWrapperText,\r\n\t\ttypeahead:getWrapperText\r\n\t};\r\n\tvar setTexts = {\r\n\t\tdatetime:setWrapperText,\r\n\t\tcombobox:setWrapperText,\r\n\t\tcomboztree:setWrapperText,\r\n\t\tcombogrid:setWrapperText,\r\n\t\treference:setWrapperText,\r\n\t\tsuggest:setWrapperText,\r\n\t\ttypeahead:setSimpleValue\r\n\t};\r\n\r\n\tvar setParams = {\r\n\t\ttextbox:setParameter,\r\n\t\tcombobox:setParameter,\r\n\t\tcomboztree:setParameter,\r\n\t\tcombogrid:setParameter,\r\n\t\treference:setParameter,\r\n\t\tsuggest:setParameter\r\n\t};\r\n\tvar clearValues = {\r\n\t\thidden:clearSimpleValue,\r\n\t\ttextfield:clearSimpleValue,\r\n\t\ttextbox:clearValue,\r\n\t\ttextarea:clearSimpleValue,\r\n\t\tmoney:clearValue,\r\n\t\tnumber:clearValue,\r\n\t\tdatetime:clearValue,\r\n\t\tcombobox:clearValue,\r\n\t\tcomboztree:clearValue,\r\n\t\tcombogrid:clearValue,\r\n\t\treference:clearValue,\r\n\t\tsuggest:clearValue,\r\n\t\ttypeahead:clearSimpleValue\r\n\t};\r\n\tfunction filterComponents($elements){\r\n\t\tvar filterType = null;\r\n\t\treturn $elements.filter(function(){\r\n\t\t\tvar $this = $(this)\r\n\t\t\t,type = $this.attr(\"type\");\r\n\t\t\tif($this.parent().hasClass(\"app-number\")){\r\n\t\t\t\treturn !filterType;\r\n\t\t\t}\r\n\t\t\tif($this.parent().hasClass(\"app-money\")){\r\n\t\t\t\treturn !filterType;\r\n\t\t\t}\r\n\t\t\tif($this.parent().hasClass(\"app-datetime\")){\r\n\t\t\t\treturn !filterType;\r\n\t\t\t}\r\n\t\t\tif($this.parent().hasClass(\"app-textbox\")){\r\n\t\t\t\treturn !filterType;\r\n\t\t\t}\r\n\t\t\tif($this.parent().hasClass(\"app-combobox\")){\r\n\t\t\t\treturn !filterType;\r\n\t\t\t}\r\n\t\t\tif($this.parent().hasClass(\"app-reference\")){\r\n\t\t\t\treturn !filterType;\r\n\t\t\t}\r\n\t\t\tif($this.parent().hasClass(\"app-comboztree\")){\r\n\t\t\t\treturn !filterType;\r\n\t\t\t}\r\n\t\t\tif($this.parent().hasClass(\"app-combogrid\")){\r\n\t\t\t\treturn !filterType;\r\n\t\t\t}\r\n\t\t\tif($this.parent().hasClass(\"app-suggest\")){\r\n\t\t\t\treturnType=\"suggest\";\r\n\t\t\t\treturn !filterType;\r\n\t\t\t}\r\n\t\t\tif($this.parent().hasClass(\"app-typeahead\")){\r\n\t\t\t\treturn !filterType;\r\n\t\t\t}\r\n\t\t\tif(type == \"textfield\" || type == \"textarea\" || type==\"hidden\"){\r\n\t\t\t\treturn !filterType;\r\n\t\t\t}\r\n\t\t\tif($this.is(\"textarea\")){\r\n\t\t\t\treturn !filterType;\r\n\t\t\t}\r\n\t\t\tif(type==\"radio\"||type==\"checkbox\"){\r\n\t\t\t\tif(filterType == null)\r\n\t\t\t\t\tfilterType = type;\r\n\t\t\t\tif(filterType == type)\r\n\t\t\t\t\treturn true;\r\n\t\t\t}\r\n\t\t\treturn false;\r\n\t\t});\r\n\t}\r\n\tfunction setCompAttr($element,methods,v){\r\n\t\tvar eles = filterComponents($element);\r\n\t\tif(eles.length == 0)\r\n\t\t\treturn;\r\n\t\tvar type = $(eles[0]).getCompType();\r\n\t\tif(type == null)\r\n\t\t\treturn;\r\n\t\tvar m = methods[type];\r\n\t\tif(m == null)\r\n\t\t\treturn;\r\n\t\tm.call(eles,v,type);\r\n\t}\r\n\tfunction getCompAttr($element,methods){\r\n\t\tvar eles = filterComponents($element);\r\n\t\tif(eles.length == 0)\r\n\t\t\treturn;\r\n\t\tvar type = $(eles[0]).getCompType();\r\n\t\tif(type == null)\r\n\t\t\treturn;\r\n\t\tvar m = methods[type];\r\n\t\tif(m == null)\r\n\t\t\treturn;\r\n\t\treturn m.call(eles,type);\r\n\t}\r\n\t$.extend($.fn,{\r\n\t\t/**\r\n\t\t * 取得组件类型\r\n\t\t * @return {string} 组件类型\r\n\t\t */\r\n\t\tgetCompType:function(){\r\n\t\t\tvar returnType = null;\r\n\t\t\t$(this).each(function(){\r\n\t\t\t\tvar $this = $(this)\r\n\t\t\t\t,type = $this.attr(\"type\");\r\n\t\t\t\tif($this.parent().hasClass(\"app-datetime\")){\r\n\t\t\t\t\treturnType=\"datetime\";\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}\r\n\t\t\t\tif($this.parent().hasClass(\"app-number\")){\r\n\t\t\t\t\treturnType=\"number\";\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}\r\n\t\t\t\tif($this.parent().hasClass(\"app-money\")){\r\n\t\t\t\t\treturnType=\"money\";\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}\r\n\t\t\t\tif($this.parent().hasClass(\"app-textbox\")){\r\n\t\t\t\t\treturnType=\"textbox\";\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}\r\n\t\t\t\tif($this.parent().hasClass(\"app-combobox\")){\r\n\t\t\t\t\treturnType=\"combobox\";\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}\r\n\t\t\t\tif($this.parent().hasClass(\"app-reference\")){\r\n\t\t\t\t\treturnType=\"reference\";\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}\r\n\t\t\t\tif($this.parent().hasClass(\"app-comboztree\")){\r\n\t\t\t\t\treturnType=\"comboztree\";\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}\r\n\t\t\t\tif($this.parent().hasClass(\"app-combogrid\")){\r\n\t\t\t\t\treturnType=\"combogrid\";\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}\r\n\t\t\t\tif($this.parent().hasClass(\"app-suggest\")){\r\n\t\t\t\t\treturnType=\"suggest\";\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}\r\n\t\t\t\tif($this.parent().hasClass(\"app-typeahead\")){\r\n\t\t\t\t\treturnType=\"typeahead\";\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}\r\n\t\t\t\tif(type == \"textfield\" || type == \"textarea\" || type==\"hidden\"||type==\"radio\"||type==\"checkbox\"){\r\n\t\t\t\t\treturnType=type;\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}\r\n\t\t\t\tif($this.is(\"textarea\")){\r\n\t\t\t\t\treturnType=\"textarea\";\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\treturn returnType;\r\n\t\t},\r\n\t\t\r\n\t\t/**\r\n\t\t * 取得组件类型\r\n\t\t */\r\n\t\tisTriggerChange:function(){\r\n\t\t\t$(this).attr(\"type\") != \"wrapper\";\r\n\t\t},\r\n\t\t/**\r\n\t\t * 取得组件显示值\r\n\t\t */\r\n\t\tgetCompText:function(){\r\n\t\t\treturn getCompAttr(this,getTexts);\r\n\t\t},\r\n\t\t/**\r\n\t\t * 设置组件显示值\r\n\t\t */\r\n\t\tsetCompText:function(v){\r\n\t\t\tsetCompAttr(this,setTexts,v);\r\n\t\t},\r\n\t\t/**\r\n\t\t * 取得组件值\r\n\t\t */\r\n\t\tgetCompValue:function(){\r\n\t\t\treturn getCompAttr(this,getValues);\r\n\t\t},\r\n\t\t/**\r\n\t\t * 设置组件值\r\n\t\t */\r\n\t\tsetCompValue:function(v){\r\n\t\t\tsetCompAttr(this,setValues,v);\r\n\t\t},\r\n\t\t/**\r\n\t\t * 取得组件值\r\n\t\t */\r\n\t\tgetCompData:function(){\r\n\t\t\tvar eles = filterComponents($(this));\r\n\t\t\tif(eles.length == 0)\r\n\t\t\t\treturn;\r\n\t\t\tvar type = $(eles[0]).getCompType();\r\n\t\t\tif(type == null)\r\n\t\t\t\treturn;\r\n\t\t\tvar m = getValues[type];\r\n\t\t\tif(m == null)\r\n\t\t\t\treturn;\r\n\t\t\tvar v= m.call(eles,type);\r\n\t\t\r\n\t\t\tm = getTexts[type];\r\n\t\t\tif(m == null)\r\n\t\t\t\treturn {value:v};\r\n\t\t\tvar txt= m.call(eles,type);\r\n\t\t\treturn {value:v,showValue:txt};\r\n\t\t},\r\n\t\t/**\r\n\t\t * 设置组件值\r\n\t\t */\r\n\t\tsetCompData:function(value,showValue){\r\n\t\t\tvar eles = filterComponents($(this));\r\n\t\t\tif(eles.length == 0)\r\n\t\t\t\treturn;\r\n\t\t\tvar type = $(eles[0]).getCompType();\r\n\t\t\tif(type == null)\r\n\t\t\t\treturn;\r\n\t\t\tvar m = setValues[type];\r\n\t\t\tif(m == null)\r\n\t\t\t\treturn;\r\n\t\t\tif(value!= null && typeof value == \"object\" && value.value){\r\n\t\t\t\tshowValue = value.showValue;\r\n\t\t\t\tvalue = value.value;\r\n\t\t\t}\r\n\t\t\tif (value!=null){\r\n\t\t\t\tvalue=value.toString();\r\n\t\t\t}\r\n\t\t\t//modify by tw\r\n\t\t\tm.call(eles,value,type);\r\n\t\t\tif(showValue !=null ||(value==null && showValue==null)){\r\n\t\t\t\tvar setTextMethod = setTexts[type];\r\n\t\t\t\tif(setTextMethod != null)\r\n\t\t\t\t\tsetTextMethod.call(eles,showValue,type);\r\n\t\t\t}\r\n\t\t\t//else{\r\n\t\t\t//\tm.call(eles,value,type);\r\n\t\t\t//}\r\n\t\t},\r\n\t\t/**\r\n\t\t * 设置参数值\r\n\t\t */\r\n\t\tsetCompParameter:function(v){\r\n\t\t\tsetCompAttr(this,setParams,v);\r\n\t\t},\r\n\t\t/**\r\n\t\t * 设置参数值\r\n\t\t */\r\n\t\tclearCompValue:function(){\r\n\t\t\tsetCompAttr(this,clearValues);\r\n\t\t}\r\n\t});\r\n\treturn $;\r\n});\r\n\t\n",
    "/**\r\n * 表单验证\r\n * @author Mr.T\r\n */\r\ndefine('app/widgets/form/app-validate',[\"jquery\",localeFile,\"jquery/jquery.validate\",\"jquery/jquery.metadata\"],function($,$lang){\r\n\t$.validator.addMethod(\"alphanumeric\", function(value, element) {\r\n\t\treturn this.optional(element) || /^\\w+$/i.test(value);\r\n\t}, \"Letters, numbers or underscores only please\");\r\n\t\r\n\t$.validator.addMethod(\"lettersonly\", function(value, element) {\r\n\t\treturn this.optional(element) || /^[a-z]+$/i.test(value);\r\n\t}, \"Letters only please\"); \r\n\t\r\n\t$.validator.addMethod(\"phone\", function(v, element) {\r\n\t    v = v.replace(/\\s+/g, \"\"); \r\n\t\treturn this.optional(element) || v.match(/^[0-9 \\(\\)]{7,30}$/);\r\n\t}, \"Please specify a valid phone number\");\r\n\t\r\n\t$.validator.addMethod(\"postcode\", function(v, element) {\r\n\t    v = v.replace(/\\s+/g, \"\"); \r\n\t\treturn this.optional(element) || v.match(/^[0-9 A-Za-z]{5,20}$/);\r\n\t}, \"Please specify a valid postcode\");\r\n\t\r\n\t$.validator.addMethod(\"date\", function(v, element) {\r\n\t    v = v.replace(/\\s+/g, \"\"); \r\n\t\treturn this.optional(element) || v.match(/^\\d{4}[\\/-]\\d{1,2}[\\/-]\\d{1,2}$/);\r\n\t});\r\n\t// http://docs.jquery.com/Plugins/Validation/Methods/equalTo\r\n\t$.validator.addMethod(\"equalTo\",function(value, element, param) {\r\n\t\t// bind to the blur event of the target in order to revalidate whenever the target field is updated\r\n\t\t// TODO find a way to bind the event just once, avoiding the unbind-rebind overhead\r\n\t\tvar target = $(param);\r\n\t\tif (this.settings.onfocusout) {\r\n\t\t\ttarget.unbind(\".validate-equalTo\").bind(\"blur.validate-equalTo\", function() {\r\n\t\t\t\t$(element).valid();\r\n\t\t\t});\r\n\t\t}\r\n\t\tif($(element).parent().hasClass('app-wrapper')){\r\n\t\t\ttarget.unbind(\".validate-equalTo\").bind(\"change.validate-equalTo\", function() {\r\n\t\t\t\t$(element).valid();\r\n\t\t\t});\r\n\t\t}\r\n\t\treturn value === target.val();\r\n\t});\r\n\t\r\n\t$.validator.addMethod(\"laterThan\",function(value, element, param) {\r\n\t\tvar target = $(param);\r\n\t\tif (this.settings.onfocusout) {\r\n\t\t\ttarget.unbind(\".validate-equalTo\").bind(\"blur.validate-equalTo\", function() {\r\n\t\t\t\t$(element).valid();\r\n\t\t\t});\r\n\t\t}\r\n\t\tif($(element).parent().hasClass('app-wrapper')){\r\n\t\t\ttarget.unbind(\".validate-equalTo\").bind(\"change.validate-equalTo\", function() {\r\n\t\t\t\t$(element).valid();\r\n\t\t\t});\r\n\t\t}\r\n\t\treturn value >= target.val();\r\n\t});\r\n\t\r\n\t// http://docs.jquery.com/Plugins/Validation/Methods/remote\r\n\t$.validator.addMethod('remote',function(value, element, param) {\r\n\t\tif ( this.optional(element) ) {\r\n\t\t\treturn \"dependency-mismatch\";\r\n\t\t}\r\n\t\tvar previous = this.previousValue(element);\r\n\t\tif (!this.settings.messages[element.name] ) {\r\n\t\t\tthis.settings.messages[element.name] = {};\r\n\t\t}\r\n\t\tprevious.originalMessage = this.settings.messages[element.name].remote;\r\n\t\tthis.settings.messages[element.name].remote = previous.message;\r\n\r\n\t\tparam = typeof param === \"string\" && {url:param} || param;\r\n\r\n\t\tif ( this.pending[element.name] ) {\r\n\t\t\treturn \"pending\";\r\n\t\t}\r\n\t\tif ( previous.old === value ) {\r\n\t\t\treturn previous.valid;\r\n\t\t}\r\n\r\n\t\tprevious.old = value;\r\n\t\tvar validator = this;\r\n\t\tthis.startRequest(element);\r\n\t\tvar data = {};\r\n\t\tdata[element.name] = value;\r\n\t\tappendParams(data,this,param);\r\n\t\t$.ajax($.extend(true, {\r\n\t\t\turl: param,\r\n\t\t\tmode: \"abort\",\r\n\t\t\tport: \"validate\" + element.name,\r\n\t\t\tdataType: \"json\",\r\n\t\t\tdata: data,\r\n\t\t\tsuccess: function(response) {\r\n\t\t\t\tvalidator.settings.messages[element.name].remote = previous.originalMessage;\r\n\t\t\t\tvar valid = response === true || response === \"true\";\r\n\t\t\t\tif ( valid ) {\r\n\t\t\t\t\tvar submitted = validator.formSubmitted;\r\n\t\t\t\t\tvalidator.prepareElement(element);\r\n\t\t\t\t\tvalidator.formSubmitted = submitted;\r\n\t\t\t\t\tvalidator.successList.push(element);\r\n\t\t\t\t\tdelete validator.invalid[element.name];\r\n\t\t\t\t\tvalidator.showErrors();\r\n\t\t\t\t} else {\r\n\t\t\t\t\tvar errors = {};\r\n\t\t\t\t\tvar message = response || validator.defaultMessage( element, \"remote\" );\r\n\t\t\t\t\terrors[element.name] = previous.message = $.isFunction(message) ? message(value) : message;\r\n\t\t\t\t\tvalidator.invalid[element.name] = true;\r\n\t\t\t\t\tvalidator.showErrors(errors);\r\n\t\t\t\t}\r\n\t\t\t\tprevious.valid = valid;\r\n\t\t\t\tvalidator.stopRequest(element, valid);\r\n\t\t\t}\r\n\t\t}, param));\r\n\t\treturn \"pending\";\r\n\t\t/**\r\n\t\t * 扩展方法 追加其他的参数\r\n\t\t * @param data 原请求参数\r\n\t\t * @param validator 表单校验器\r\n\t\t * @param params 参数\r\n\t\t */\r\n\t\tfunction appendParams(data,validator,params){\r\n\t\t\tif(params.withHidden){\r\n\t\t\t\tvar hidden = $(validator.currentForm).find('input:hidden');\r\n\t\t\t\tfor(var i = 0; i<hidden.length; i++){\r\n\t\t\t\t\tvar h = $(hidden[i]);\r\n\t\t\t\t\tdata[h.attr('name')] = h.val();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tvar t = $.extend({},params);\r\n\t\t\tdelete t.url;\r\n\t\t\t$.extend(data,t);\r\n\t\t}\r\n\t});\r\n\t\r\n\t$.validator.addClassRules({\r\n\t\tdate: {date: false},\r\n\t\talphanumeric: { alphanumeric: true },\r\n\t\tlettersonly: { lettersonly: true },\r\n\t\tphone: { phone: true },\r\n\t\tpostcode: {postcode: true}\r\n\t});\r\n\t$.validator.setDefaults({\r\n\t\thighlight:function(element,errorClass,validClass){\r\n\t\t\t$(element).parents('.form-group:first').addClass(errorClass).removeClass(validClass);\r\n\t\t},\r\n\t\tunhighlight:function(element,errorClass,validClass){\r\n\t\t\t$grp = $(element).parents('.form-group:first');\r\n\t\t\t$grp.removeClass(errorClass).removeClass(validClass);\r\n\t\t\tthis.showHelps(element);\r\n\t\t},\r\n\t\tsuccess:function(label,element){\r\n\t\t\t$grp = $(element).parents('.form-group:first');\r\n\t\t\t$grp.removeClass(\"error\");\r\n\t\t\t$grp.addClass(\"success\");\r\n\t\t\tthis.hideHelps(element);\r\n\t\t\tlabel.html(\"<i class='icon icon-green icon-check'></i>\");\r\n\t\t},\r\n\t\t/**\r\n\t\t * 扩展出值改变事件\r\n\t\t */\r\n\t\tonchange:function(element, event){\r\n\t\t\tthis.element(element);\r\n\t\t},\r\n\t\tinvalidHandler:function(form, validator) {\r\n\t\t\tvar list = validator.errorList;\r\n\t\t\tfor(var i=0;i<list.length;i++){\r\n\t\t\t\tvar el = $(list[i].element);\r\n\t\t\t\tvar p = el.parent();\r\n\t\t\t\tif(p.is('.app-wrapper')){\r\n\t\t\t\t\tp.addClass('errorTarger');\r\n\t\t\t\t}else{\r\n\t\t\t\t\tel.addClass('errorTarger');\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\terrorClass:\"error\",\r\n\t\tvalidClass:\"success\",\r\n\t\terrorElement:\"span\",\r\n\t\tfocusInvalid: false,\r\n\t\tfocusCleanup: true,\r\n\t\tignore: '.ignore',\r\n\t\tonkeyup:$.emptyFunction\r\n\t});\r\n\t$.validator.autoCreateRanges=true;\r\n\t$.extend($.validator.prototype,{\r\n\t\tinit: function() {\r\n\t\t\tthis.labelContainer = $(this.settings.errorLabelContainer);\r\n\t\t\tthis.errorContext = this.labelContainer.length && this.labelContainer || $(this.currentForm);\r\n\t\t\tthis.containers = $(this.settings.errorContainer).add( this.settings.errorLabelContainer );\r\n\t\t\tthis.submitted = {};\r\n\t\t\tthis.valueCache = {};\r\n\t\t\tthis.pendingRequest = 0;\r\n\t\t\tthis.pending = {};\r\n\t\t\tthis.invalid = {};\r\n\t\t\tthis.reset();\r\n\r\n\t\t\tvar groups = (this.groups = {});\r\n\t\t\t$.each(this.settings.groups, function(key, value) {\r\n\t\t\t\t$.each(value.split(/\\s/), function(index, name) {\r\n\t\t\t\t\tgroups[name] = key;\r\n\t\t\t\t});\r\n\t\t\t});\r\n\t\t\tvar rules = this.settings.rules;\r\n\t\t\t$.each(rules, function(key, value) {\r\n\t\t\t\trules[key] = $.validator.normalizeRule(value);\r\n\t\t\t});\r\n\r\n\t\t\tfunction delegate(event) {\r\n\t\t\t\tvar validator = $.data(this[0].form, \"validator\"),\r\n\t\t\t\t\teventType = \"on\" + event.type.replace(/^validate/, \"\");\r\n\t\t\t\tif (validator.settings[eventType]) {\r\n\t\t\t\t\tvalidator.settings[eventType].call(validator, this[0], event);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t$(this.currentForm)\r\n\t\t\t\t.validateDelegate(\":text, [type='text'], [type='password'], \" +\r\n\t\t\t\t\t\"[type='showValue'], [type='file'], [type='number'], [type='tel'], \" +\r\n\t\t\t\t\t\"[type='url'], [type='email'], select, textarea \",\r\n\t\t\t\t\t\"focusin focusout keyup\", delegate)\r\n\t\t\t\t.validateDelegate(\"[type='radio'], [type='checkbox'], select, option\", \"click\", delegate);\r\n\t\t\t//扩展出App控件\r\n\t\t\twrapperDelegate($(this.currentForm));\r\n\r\n\t\t\t/**\r\n\t\t\t * 自定义控件进行验证事件的委托\r\n\t\t\t * @param $form\r\n\t\t\t */\r\n\t\t\tfunction wrapperDelegate($form){\r\n\t\t\t\t//隐藏值改变触发一次验证\r\n\t\t\t\t$form.validateDelegate(\".app-wrapper input:first-child\", \"change\", delegate);\r\n\t\t\t\t//下拉展开面板触发一次验证\r\n//\t\t\t\tvar dropBtn = $form.find(\".app-wrapper\").find('a.wrapper-open');\r\n//\t\t\t\tdropBtn.on('click.validate.api',function(){\r\n//\t\t\t\t\tvar $value = $(this).parent().children(':first-child')[0];\r\n//\t\t\t\t\tvar validator = $.data($value.form, 'validator');\r\n//\t\t\t\t\tvalidator.settings.onchange.call(validator, $value, event);\r\n//\t\t\t\t});\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tif (this.settings.invalidHandler) {\r\n\t\t\t\t$(this.currentForm).bind(\"invalid-form.validate\", this.settings.invalidHandler);\r\n\t\t\t}\r\n\t\t},\r\n\t\telementValue: function( element ) {\r\n\t\t\tvar $element = $(element)\r\n\t\t\t\t,type = $element.attr('type'),\r\n\t\t\t\tval = $element.val();\r\n\r\n\t\t\tif ( type === 'radio' || type === 'checkbox' ) {\r\n\t\t\t\treturn $('input[name=\"' + $element.attr('name') + '\"]:checked').val();\r\n\t\t\t}\r\n\t\t\tvar $parent = $element.parent(); \r\n\t\t\t//扩展app控件的值获取\r\n\t\t\tif( $parent.hasClass('app-wrapper') \r\n\t\t\t\t\t&& $parent.find('input:first-child').data('context').setting.multiple){\r\n\t\t\t\treturn val.split(',');\r\n\t\t\t}\r\n\r\n\t\t\tif ( typeof val === 'string' ) {\r\n\t\t\t\treturn val.replace(/\\r/g, \"\");\r\n\t\t\t}\r\n\t\t\treturn val;\r\n\t\t},\r\n\t\tshowHelps:function(element){\r\n\t\t\t$(element).parents('.form-group:first').find('.help-inline:not([for]),.help-block:not([for])').show();\r\n\t\t},\r\n\t\thideHelps:function(element){\r\n\t\t\t$(element).parents('.form-group:first').find('.help-inline:not([for]),.help-block:not([for])').hide();\r\n\t\t},\r\n\t\tshowLabel:function(element, message) {\r\n\t\t\tvar label = this.errorsFor( element );\r\n\t\t\tif ( label.length ) {\r\n\t\t\t\t// check if we have a generated label, replace the message then\r\n\t\t\t\tif ( label.attr(\"generated\") ) {\r\n\t\t\t\t\tlabel.html(message);\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tvar cls =$(element).parents('.form-group:first').attr('helpType')=='block'?'help-block':'help-inline';\r\n\t\t\t\t// create label\r\n\t\t\t\tlabel = $(\"<\" + this.settings.errorElement + \"/>\")\r\n\t\t\t\t\t.attr({\"for\":  this.idOrName(element), generated: true})\r\n\t\t\t\t\t.addClass(cls)\r\n\t\t\t\t\t.html(message || \"\");\r\n\t\t\t\tif ( !this.labelContainer.append(label).length ) {\r\n\t\t\t\t\tif ( this.settings.errorPlacement ) {\r\n\t\t\t\t\t\tthis.settings.errorPlacement(label, $(element) );\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tdefaultPosition(label, $(element));\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif ( !message && this.settings.success ) {\r\n\t\t\t\tlabel.text(\"\");\r\n\t\t\t\tif ( typeof this.settings.success === \"string\" ) {\r\n\t\t\t\t\tlabel.addClass( this.settings.success );\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.settings.success.call(this,label, element );\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tthis.toShow = this.toShow.add(label);\r\n\t\t\tthis.hideHelps(element);\r\n\t\t\t/**\r\n\t\t\t * 默认的错误标签显示位置\r\n\t\t\t * @param label 错误描述标签\r\n\t\t\t * @param $element 出现错误元素\r\n\t\t\t */\r\n\t\t\tfunction defaultPosition(label, $element){\r\n\t\t\t\tvar $targer = $element; \r\n\t\t\t\tvar $p = $element.parent();\r\n\t\t\t\tif($p.hasClass('app-wrapper')){\r\n\t\t\t\t\t$targer = $p;\r\n\t\t\t\t}else if($p.parent().hasClass('multipleboxDiv')){\r\n\t\t\t\t\t$targer = $p.parent();\r\n\t\t\t\t}\r\n\t\t\t\tvar wrap = $targer.data('errorWrapper');\r\n\t\t\t\tif(!wrap){\r\n\t\t\t\t\tvar $wrapper = $('<div class=\\\"errorWrapper\\\"><div><div></div></div></div>');\r\n\t\t\t\t\t$wrapper.css('width',$targer.outerWidth());\r\n\t\t\t\t\t$wrapper.appendTo($.$appPanelContainer);\r\n\t\t\t\t\t$targer.data('errorWrapper', $wrapper);\r\n\t\t\t\t\tlabel.insertBefore($wrapper.find('div div'));\r\n\t\t\t\t\thoverShowErrors($targer);\r\n\t\t\t\t}else{\r\n\t\t\t\t\twrap.find('div>span').text(label.text());\r\n\t\t\t\t}\r\n\t\t\t\t/**\r\n\t\t\t\t * 绑定浮动显示错误事件\r\n\t\t\t\t * @param $targer\r\n\t\t\t\t */\r\n\t\t\t\tfunction hoverShowErrors($targer){\r\n\t\t\t\t\t$targer.hover(function(){\r\n\t\t\t\t\t\tvar $this = $(this);\r\n\t\t\t\t\t\tvar $wrapper = $this.data('errorWrapper');\r\n\t\t\t\t\t\tif($wrapper.text()){\r\n\t\t\t\t\t\t\t$this.addClass('errorTarger');\r\n\t\t\t\t\t\t\tvar css = $this.offset()\r\n\t\t\t\t\t\t\t\t,$thisTop = $this.offset().top;\r\n\t\t\t\t\t\t\tcss.display = 'block';\r\n\t\t\t\t\t\t\tif($thisTop < $wrapper.outerHeight()){\r\n\t\t\t\t\t\t\t\tcss.top = css.top + $this.outerHeight();\r\n\t\t\t\t\t\t\t\t$wrapper.addClass('up');\r\n\t\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\t\tcss.top = css.top -  $wrapper.outerHeight();\r\n\t\t\t\t\t\t\t\t$wrapper.removeClass('up');\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t$wrapper.css(css);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},function(){\r\n\t\t\t\t\t\tvar $this = $(this);\r\n\t\t\t\t\t\t$this.removeClass('errorTarger');\r\n\t\t\t\t\t\tvar $wrapper = $this.data('errorWrapper');\r\n\t\t\t\t\t\tvar css = {display:'none'};\r\n\t\t\t\t\t\t$wrapper.css(css);\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\thideErrors: function() {\r\n\t\t\tthis.showHelps(this.toHide);\r\n\t\t\tthis.addWrapper( this.toHide ).hide();\r\n\t\t},\r\n\t\telements: function() {\r\n\t\t\tvar validator = this,\r\n\t\t\t\trulesCache = {};\r\n\r\n\t\t\t// select all valid inputs inside the form (no submit or reset buttons)\r\n\t\t\treturn $(this.currentForm)\r\n\t\t\t.find(\"input[type!=showValue], select, textarea\")\r\n\t\t\t.not(\":submit, :reset, :image, [disabled]\")\r\n\t\t\t.not( this.settings.ignore )\r\n\t\t\t.filter(function() {\r\n\t\t\t\tif ( !this.name && validator.settings.debug && window.console ) {\r\n\t\t\t\t\tconsole.error( \"%o has no name assigned\", this);\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// select only the first element for each name, and only those with rules specified\r\n\t\t\t\tif ( this.name in rulesCache || !validator.objectLength($(this).rules()) ) {\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}\r\n\r\n\t\t\t\trulesCache[this.name] = true;\r\n\t\t\t\treturn true;\r\n\t\t\t});\r\n\t\t},\r\n\t\terrors: function() {\r\n\t\t\treturn $( '.errorWrapper', this.errorContext );\r\n\t\t},\r\n\t\tvalidElements: function() {\r\n\t\t\treturn this.currentElements.not(this.invalidElements()).not(this.successList);\r\n\t\t},\r\n\t\tform: function() {\r\n\t\t\t//校验前 去除之前错误的样式 Mr.T 2014年11月19日10:59:25\r\n\t\t\t$(this.currentForm).find('.errorTarger').removeClass('errorTarger');\r\n\t\t\t$(this.currentForm).find('.errorWrapper').remove();\r\n\r\n\t\t\tthis.checkForm();\r\n\t\t\t\r\n\t\t\t$.extend(this.submitted, this.errorMap);\r\n\t\t\tthis.invalid = $.extend({}, this.errorMap);\r\n\t\t\tif (!this.valid()) {\r\n\t\t\t\t$(this.currentForm).triggerHandler(\"invalid-form\", [this]);\r\n\t\t\t}\r\n\t\t\tthis.showErrors();\r\n\t\t\tif (this.errorList&& this.errorList.length>0){\r\n\t\t\t\r\n\t\t\t\tvar firstEl=this.errorList[0];\r\n\t\t\t\t\r\n\t\t\t\t\t$(firstEl.element).parent().find(\"input:visible,textarea:visible,select:visible\").focus()\r\n\t\t\t\r\n\t\t\t}\r\n\t\t\treturn this.valid();\r\n\t\t}\r\n\r\n\r\n\t});\r\n\treturn $;\r\n});\r\n\n",
    "/**\r\n * 表单方法扩展\r\n */\r\ndefine('app/widgets/form/app-form',[\"app/core/app-jquery\",\"app/data/app-ajax\",\"app/widgets/form/app-validate\",\"app/widgets/form/app-comp\"],function($,$ajax) {\r\n\t\r\n\t/**\r\n\t * @class \r\n\t * @name appform\r\n\t * @desc  jquery methods set表单对象的jquery方法集\r\n\t */\r\n\t$.fn.extend({\r\n\t\t/*\r\n\t\t * 初始化表单\r\n\t\t */\r\n\t\tinitForm:function(){\r\n\t\t\treturn $(this).each(function () {\r\n\t\t\t\tvar $el = $(this),$form=$el.isTag('form')?$el:$($el.attr(\"app-form\"))\r\n\t\t\t\t,state=$form.attr(\"opstate\")||\"EDIT\";\r\n\t\t\t\tvar $items=$form.find(\".formitem\");\r\n\t\t\t\t$form.bind($A.eventType.pageLoad, function() {\r\n\t\t\t\t\tstate=$form.attr(\"opstate\") || \"EDIT\";\r\n\t\t\t\t\t//切换状态时 先清除旧状态  以免被返回 by sjq 2014/11/06\r\n\t\t\t\t\t$form.attr(\"opstate\",\"\");\r\n\t\t\t\t\t$form.switchFormState(state);\r\n\t\t\t\t});\r\n\t\t\t\tvar initFormUI=false;\r\n\t\t\t\t$items.each(function(){\r\n\t\t\t\t\tvar $o=$(this)\r\n\t\t\t\t\t,$r=$o.find(\"div.render\")\r\n\t\t\t\t\t,editor = $o.attr(\"editor\");\r\n\t\t\t\t\tif($o.find(\".editor\").length==0){\r\n\t\t\t\t\tif (editor){\r\n\t\t\t\t\t\t$e=$(\"<div class=\\\"editor\\\">\"+editor+\"</div>\");\r\n\t\t\t\t\t\t//改表单状态切换时，复选及单选的展示方式 by sjq 2014/09/26\r\n\t\t\t\t\t\tvar $edior=$e.getFormEditor(),type=$edior.getCompType();\r\n\t\t\t\t\t\t$e.appendTo($o);\r\n\t\t\t\t\t\tinitFormUI=true;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\t});\r\n\t\t\t\tif (initFormUI){\r\n\t\t\t\t\t\r\n\t\t\t\t\t$form.initPageUI();\r\n\t\t\t\t}\r\n\t\t\t\t//$form.attr(\"init\",\"true\");\r\n\t\t\t\t//改表单状态切换时，复选及单选的展示方式 by sjq 2014/09/26\r\n\t\t\t\t//$form.attr(\"opstate\",\"\");\r\n\t\t\t\t//控制初始化后表单切状态 sjq 2014/10/30\r\n\t\t\t\t//\r\n\t\t\t\t$form.attr(\"initedit\",\"true\");\r\n\t\t\t\t\r\n\t\t\t});\r\n\t\t\t\r\n\t\t},\r\n\t\t/**\r\n\t\t * @memberof appform\r\n\t\t * @function\r\n\t\t * @instance\r\n\t\t * @name loadFormData\r\n\t\t * @desc 通过ajax加载表单数据\r\n\t\t * @param {object} [params] - 新参数\r\n\t\t * @param {function} [callback] - 加载完成后的回调函数\r\n\t\t */\r\n\t\tloadFormData:function(params,callback){\r\n\t\t\t$(this).each(function(){\r\n\t\t\t\tvar $el = $(this),\r\n\t\t\t\t$form=$el.isTag('form')?$el:$($el.attr(\"app-form\")),\r\n\t\t\t\tloadurl = (params?(params[\"loadurl\"]?params[\"loadurl\"]:$el.attr('loadUrl')):$el.attr('loadUrl'));\r\n\t\t\t\tif(!loadurl)\r\n\t\t\t\t\treturn;\r\n\t\t\t\tvar formParams=$form.attr(\"loadParams\");\r\n\t\t\t\tif(formParams){\r\n\t\t\t\t\tformParams=$.extend(formParams,params);\r\n\t\t\t\t}else{\r\n\t\t\t\t\tformParams = params;\r\n\t\t\t\t}\r\n\t\t\t\tvar transor = $form.attr(\"transor\");\r\n\t\t\t\tif(transor){\r\n\t\t\t\t\tformParams[\"__transor\"]=transor;\r\n\t\t\t\t}\r\n\t\t\t\t$form.attr(\"loadParams\",formParams);\r\n\t\t\t\top = {\r\n\t\t\t\t\ttype:$form.attr(\"method\") || 'POST',\r\n\t\t\t\t\turl:loadurl,\r\n\t\t\t\t\tdata:formParams,\r\n\t\t\t\t\tdataType:\"json\",\r\n\t\t\t\t\tcache: false,\r\n\t\t\t\t\ttoggle:$form,\r\n\t\t\t\t\tsuccess: function(json){\r\n\t\t\t\t\t\t$form.refreshFormData(json);\r\n\t\t\t\t\t\tif(callback){\r\n\t\t\t\t\t\t\tcallback(json);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t\terror: $ajax.ajaxError\r\n\t\t\t\t};\r\n\t\t\t\t$ajax.ajaxCall(op);\r\n\t\t\t});\r\n\t\t\t\r\n\t\t\t\r\n\t\t},\r\n\t\t\r\n\t\t/*\r\n\t\t * 清空表单Editor的值(暂不提供取消checkbox选中的方法)\r\n\t\t * add by tw\r\n\t\t */\r\n\t\tclearFormEditorValue : function(){\r\n\t\t\tvar $e = $(this);\r\n\t\t\tvar field=$e.parent().attr(\"item-field\");\r\n\t\t\t$e.find(\"input[id=\"+field+\"],textarea[id=\"+field+\"]\").clearCompValue();\r\n\t\t},\r\n\t\t\r\n\t\t/*\r\n\t\t * 设置表单项目编辑器的值\r\n\t\t * @param value 值对象\r\n\t\t * @param showValue 显示值\r\n\t\t */\r\n\t\tsetFormEditorValue:function(value,showValue){\r\n\t\t\tvar $e = $(this);\r\n\t\t\tvar field=$e.parent().attr(\"item-field\");\r\n\t\t\t$e.find(\"input[id=\"+field+\"],textarea[id=\"+field+\"]\").setCompData(value,showValue);\r\n\t\t},\r\n\t\t\r\n\t\taddFieldRequired : function(field){\r\n\t\t\tvar $label =  $A(\"#label_\"+field);\r\n\t\t\tif($label.find(\"span.required\").length>0){\r\n\t\t\t\t$label.find(\"span.required\").text(\"*\");\r\n\t\t\t}else{\r\n\t\t\t\t$label.prepend(\"<span class=\\\"required\\\">*</span>\");\r\n\t\t\t}\r\n\t\t\t$A(\"#\"+field).attr('required',true);\r\n\t\t},\r\n\t\t//隐藏某个字段\r\n\t\thideField : function(field){\r\n\t\t\t$A(\".\"+field).hide();\r\n\t\t},\r\n\t\tremoveFieldRequired : function(field){\r\n\t\t\tvar $label =  $A(\"#label_\"+field);\r\n\t\t\t$label.find(\"span.required\").remove();\r\n\t\t\t$A(\"#\"+field).attr('required',false);\r\n\t\t},\r\n\t\t/*\r\n\t\t * 取得表单项目的编辑器值\r\n\t\t * @return \r\n\t\t */\r\n\t\tgetFormEditorValue:function(){\r\n\t\t\tvar $e=$(this);\r\n\t\t\tvar field=$e.parent().attr(\"item-field\");\r\n\t\t\treturn $e.find(\"input[id=\"+field+\"],textarea[id=\"+field+\"]\").getCompData();\r\n\t\t},\r\n\t\t\r\n\t\tgetFormEditor:function(){\r\n\t\t\tvar $e=$(this);\r\n\t\t\tvar field=$e.parent().attr(\"item-field\");\r\n\t\t\treturn $e.find(\"input[id=\"+field+\"],textarea[id=\"+field+\"]\");\r\n\t\t},\r\n\t\t/*\r\n\t\t * 设置表单项目的显示值\r\n\t\t * @param value 值\r\n\t\t * @param showValue 显示值\r\n\t\t */\r\n\t\tsetFormRenderValue:function(value,showValue){\r\n\t\t\tvar $o=$(this),$r=$o.find(\"div.render\");;\r\n\t\t\tif($r.length == 0)\r\n\t\t\t\treturn;\r\n\t\t\tvar rendertype=$o.attr(\"rendertype\")\r\n\t\t\t\r\n\t\t\t,render = $o.attr(\"render\");\r\n\t\t\tvar $edior=$o.getFormEditor(),type=$edior.getCompType();\r\n\t\t\tif(type==\"radio\"||type==\"checkbox\"){\r\n\t\t\t\t\tif (value==$edior.val()){\r\n\t\t\t\t\t\t$edior[0].checked=true;\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\t$edior[0].checked=false;\r\n\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tif(rendertype==\"TEMPLATE\"){\r\n\t\t\t\t$r.html($template(render,{value:value,showValue:showValue}));\r\n\t\t\t}else if(rendertype==\"FUNC\"){\r\n\t\t\t\t/*先取缓存*/\r\n\t\t\t\tvar cach = $r.data(\"render\");\r\n\t\t\t\tif(cach){\r\n\t\t\t\t\trender = cach;\r\n\t\t\t\t}else{\r\n\t\t\t\t\trender= $o.getJsFunction(\"return \"+render)();\r\n\t\t\t\t\t$r.data(\"render\",render);\r\n\t\t\t\t}\r\n\t\t\t\tvar rhtml = render(value,showValue,$r);\r\n\t\t\t\tif(rhtml !==false){\r\n\t\t\t\t\t$r.html(rhtml);\r\n\t\t\t\t\t$r.attr(\"title\",rhtml);\r\n\t\t\t\t}\r\n\t\t\t}else{\r\n\t\t\t\tif(showValue == null)\r\n\t\t\t\t\tshowValue = value;\r\n\t\t\t\t$r.html(showValue);\r\n\t\t\t\t$r.attr(\"title\",showValue);\r\n\t\t\t}\r\n\t\t},\r\n\t\t/*\r\n\t\t * 设置表单项目的值\r\n\t\t * @param value {string} 表单值\r\n\t\t * @param showValue {string} 表单显示值\r\n\t\t */\r\n\t\tsetFormItemValue:function(value,showValue,md){\r\n\t\t\tvar $o=$(this)\r\n\t\t\t,$e=$o.find(\"div.editor\");\r\n\t\t\t$o.attr(\"fieldvalue\",value);\r\n\t\t\tif(showValue){\r\n\t\t\t\t$o.attr(\"fieldshowvalue\",showValue);\r\n\t\t\t}\r\n\t\t\tif($e.size()>0){\r\n\t\t\t\tif (value===undefined||value===null){\r\n\t\t\t\t\tvalue=\"\";\r\n\t\t\t\t}\r\n\t\t\t\t$e.setFormEditorValue(value,showValue);\r\n\t\t\t\t\r\n\t\t\t\tif (!showValue){\r\n\t\t\t\t\tvar objVal=$e.getFormEditorValue();\r\n\t\t\t\t\tif (objVal){\r\n\t\t\t\t\t\tshowValue=objVal[\"showValue\"];\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t$o.setFormRenderValue(value,showValue);\r\n\t\t},\r\n\t\t\r\n\t\t/*\r\n\t\t *清空表单项的值 \r\n\t\t */\r\n\t\tclearFormItemValue : function(){\r\n\t\t\tvar $o=$(this)\r\n\t\t\t,$e=$o.find(\"div.editor\");\r\n\t\t\t$o.attr(\"fieldvalue\",\"\");\r\n\t\t\t$o.attr(\"fieldshowvalue\",\"\");\r\n\t\t\tif($e.size()>0){\r\n\t\t\t\t$e.clearFormEditorValue();\r\n\t\t\t}\r\n\t\t\t//TODO\r\n\t\t\t$o.setFormRenderValue(\"\",\"\");\r\n\t\t},\r\n\t\t\r\n\t\tclearFormData : function(){\r\n\t\t\treturn this.each(function () {\r\n\t\t\t\tvar $el = $(this),$form=$el.isTag('form')?$el:$($el.attr(\"app-form\"))\r\n\t\t\t\t,$items=$form.find(\".formitem\"),$hitems =$form.find(\"[hiddencomp=true]\");\r\n\t\t\t\t\r\n\t\t\t\t$hitems.each(function(){\r\n\t\t\t\t\tvar $o=$(this);\r\n\t\t\t\t\t$o.val(\"\");\r\n\t\t\t\t});\r\n\t\t\t\t$items.each(function(){\r\n\t\t\t\t\tvar $o=$(this);\r\n\t\t\t\t\t$o.clearFormItemValue();\r\n\t\t\t\t});\r\n\t\t\t\tif($form.attr(\"init\")!=\"true\"){\r\n\t\t\t\t\t$form.attr(\"refresh\",\"true\");\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t},\r\n\t\t\r\n\t\t/**\r\n\t\t * @memberof appform\r\n\t\t * @function\r\n\t\t * @instance\r\n\t\t * @name loadFormData\r\n\t\t * @desc 刷新整个表单数据\r\n\t\t * @param {json} [data]\r\n\t\t */\r\n\t\trefreshFormData:function(data){\r\n\t\t\treturn this.each(function () {\r\n\t\t\t\tvar $el = $(this),$form=$el.isTag('form')?$el:$($el.attr(\"app-form\"))\r\n\t\t\t\t,$items=$form.find(\".formitem\"),model=$form.attr(\"model\"),$hitems =$form.find(\"[hiddencomp=true]\");\r\n\t\t\t\tvar md = data;\r\n\t\t\t\tif(model){\r\n\t\t\t\t\tif(model.indexOf(\".\")>1){\r\n\t\t\t\t\t\t$.each(model.split(\".\"),function(i){\r\n\t\t\t\t\t\t\tmd = md[this];\r\n\t\t\t\t\t\t\tif(md==null)\r\n\t\t\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\tmd = md[model];\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif(md == null)\r\n\t\t\t\t\t\tmd=data;\r\n\t\t\t\t}\r\n\t\t\t\t$hitems.each(function(){\r\n\t\t\t\t\tvar $o=$(this),itemmodel=$o.attr(\"model\"),field=$o.attr(\"field\");\r\n\t\t\t\t\tvar imd = md;\r\n\t\t\t\t\tif(itemmodel!=model){\r\n\t\t\t\t\t\tif(itemmodel.indexOf(\".\")>1){\r\n\t\t\t\t\t\t\t$.each(itemmodel.split(\".\"),function(i){\r\n\t\t\t\t\t\t\t\timd = imd[this];\r\n\t\t\t\t\t\t\t\tif(imd==null)\r\n\t\t\t\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\timd = imd[itemmodel];\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif(imd == null)\r\n\t\t\t\t\t\t\timd=md;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tvar v=imd[field];\r\n\t\t\t\t\t$o.val(v);\r\n\t\t\t\t});\r\n\t\t\t\t$items.each(function(){\r\n\t\t\t\t\tvar $o=$(this),itemmodel=$o.attr(\"item-model\"),field=$o.attr(\"item-field\"),showField=$o.attr(\"item-showfield\");\r\n\t\t\t\t\tvar imd = md;\r\n\t\t\t\t\tif(itemmodel!=model){\r\n\t\t\t\t\t\tif(itemmodel.indexOf(\".\")>1){\r\n\t\t\t\t\t\t\t$.each(itemmodel.split(\".\"),function(i){\r\n\t\t\t\t\t\t\t\timd = imd[this];\r\n\t\t\t\t\t\t\t\tif(imd==null)\r\n\t\t\t\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\timd = imd[itemmodel];\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif(imd == null)\r\n\t\t\t\t\t\t\timd=md;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tvar v=imd[field];\r\n\t\t\t\t\tvar sv=null;\r\n\t\t\t\t\tif(showField){\r\n\t\t\t\t\t\tsv=imd[showField];\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\r\n\t\t\t\t\t$o.setFormItemValue(v,sv,md);\r\n\t\t\t\t});\r\n\t\t\t\tif($form.attr(\"init\")!=\"true\"){\r\n\t\t\t\t\t$form.attr(\"refresh\",\"true\");\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t},\r\n\t\t/*\r\n\t\t * 触发状态切换\r\n\t\t */\r\n\t\ttoggleFormState:function(){\r\n\t\t\tvar $el = $(this),$form=$el.isTag('form')?$el:$($el.attr(\"app-form\"))\r\n\t\t\t,state=$form.attr(\"opstate\")||\"EDIT\";\r\n\t\t\tif(state == \"VIEW\")\r\n\t\t\t\t$form.switchFormState(\"EDIT\");\r\n\t\t\telse\r\n\t\t\t\t$form.switchFormState(\"VIEW\");\r\n\t\t},\r\n\t\ttoggleFormState2:function(state){\r\n\t\t\tif(state == \"VIEW\")\r\n\t\t\t\t$form.switchFormState(\"VIEW\");\r\n\t\t\telse\r\n\t\t\t\t$form.switchFormState(\"EDIT\");\r\n\t\t},\r\n\t\t/*\r\n\t\t * 切换表单状态\r\n\t\t * @param state 新的表单状态\r\n\t\t */\r\n\t\tswitchFormState:function(state){\r\n\t\t\tthis.each(function () {\r\n\t\t\t\tvar $el = $(this),$form=$el.isTag('form')?$el:$($el.attr(\"app-form\"))\r\n\t\t\t\t,$items=$form.find(\".formitem\"),oldstate=$form.attr(\"opstate\")||\"EDIT\";\r\n\t\t\t\tif(state == oldstate||(state!=\"EDIT\"&&state!=\"VIEW\"))\r\n\t\t\t\t\treturn;\r\n\t\t\t\t$form.attr(\"opstate\",state);\r\n\t\t\t\t$form.addClass(\"formview\");\r\n\t\t\t\t$items.each(function(index,element){\r\n\t\t\t\t\tvar customwidth=$(element).attr(\"customwidth\");\r\n\t\t\t\t\t\r\n\t\t\t\t\tvar $o=$(this)\r\n\t\t\t\t\t,$r=$o.find(\"div.render\")\r\n\t\t\t\t\t,$e=$o.find(\"div.editor\")\r\n\t\t\t\t\t,$edior=$e.getFormEditor()\r\n\t\t\t\t\t, type=$edior.getCompType();\r\n\t\t\t\t\tif(state==\"VIEW\"){\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tif($e.size()>0){\r\n\t\t\t\t\t\t\t//console.log($e.getFormEditor());\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tvar v = $e.getFormEditorValue();\r\n\t\t\t\t\t\t\tif(v){\r\n\t\t\t\t\t\t\t\tif(typeof v ==\"string\"){\r\n\t\t\t\t\t\t\t\t\t$o.attr(\"fieldvalue\",v);\r\n\t\t\t\t\t\t\t\t}else if(typeof v==\"object\"){\r\n\t\t\t\t\t\t\t\t\t$o.attr(\"fieldvalue\",v.value);\r\n\t\t\t\t\t\t\t\t\t$o.attr(\"fieldshowvalue\",v.showValue);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t$e.hide();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tif($r.size()==0){\r\n\t\t\t\t\t\t\tif(customwidth!=undefined){\r\n\t\t\t\t\t\t\t\t$r=$(\"<div class=\\\"render \"+type+\"-render\\\" style=\\\"width:\"+customwidth+\";\\\"></div>\");\r\n\t\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\t\t$r=$(\"<div class=\\\"render \"+type+\"-render\\\"  ></div>\");\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t$r.appendTo($o);\r\n\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t$r.show();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tvar value =$o.attr(\"fieldvalue\")\r\n\t\t\t\t\t\t,showValue=$o.attr(\"fieldshowvalue\")\r\n\t\t\t\t\t\t,rendertype=$o.attr(\"rendertype\")\r\n\t\t\t\t\t\t,render = $o.attr(\"render\")\r\n\t\t\t\t\t\t;\r\n\t\t\t\t\t\tif(type==\"radio\"||type==\"checkbox\"){//控制表单切换成查看 时 复选框及单选框 显示方式  by sjq   2014-09-26\r\n\t\t\t\t\t\t\t$e.show();\r\n\t\t\t\t\t\t\t$edior.attr(\"disabled\",true);\r\n\t\t\t\t\t\t\t$r.html(\"\");\r\n\t\t\t\t\t\t\t$r.attr(\"title\",\"\")\r\n\t\t\t\t\t\t\t//$r.hide();\r\n\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif(rendertype==\"TEMPLATE\"){\r\n\t\t\t\t\t\t\t$r.html($template(render,{value:value,showValue:showValue}));\r\n\t\t\t\t\t\t}else if(rendertype==\"FUNC\"){\r\n\t\t\t\t\t\t\trender= $o.getJsFunction(\"return \"+render)();\r\n\t\t\t\t\t\t\tif (render){\r\n\t\t\t\t\t\t\t\t$r.html(render(value,showValue,$r));\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\tif(!showValue)\r\n\t\t\t\t\t\t\t\tshowValue = value;\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tvar htmlEncode = function (value){\r\n\t\t\t\t\t\t\t\treturn !value ? value : String(value).replace(/&/g, \"&amp;\").replace(/\\\"/g, \"&quot;\").replace(/</g, \"&lt;\").replace(/>/g, \"&gt;\");\r\n\t\t\t\t\t\t\t};\r\n\t\t\t\t\t\t\t$r.attr(\"title\",showValue)\r\n\t\t\t\t\t\t\t$r.html(htmlEncode(showValue));\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t$form.find(\"div.formmore\").show();\r\n\t\t\t\t\t}else if(state==\"EDIT\"){\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tif($r.size()>0){\r\n\t\t\t\t\t\t\t$r.hide();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif($e.size()>0){\r\n\t\t\t\t\t\t\t$e.show();\r\n\t\t\t\t\t\t\t//控制表单切换成查看 时 复选框及单选框 显示方式  by sjq 2014-09-26\r\n\t\t\t\t\t\t\tvar $edior=$e.getFormEditor()\r\n\t\t\t\t\t\t\t,type=$edior.getCompType();\r\n\t\t\t\t\t\t\tif(type==\"radio\"||type==\"checkbox\"){\r\n\t\t\t\t\t\t\t\t$edior.attr(\"disabled\",false);\r\n\t\t\t\t\t\t\t\t$r.html(\"\");\r\n\t\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\tvar value =$o.attr(\"fieldvalue\")\r\n\t\t\t\t\t\t\t,showValue=$o.attr(\"fieldshowvalue\")\r\n\t\t\t\t\t\t\t,field=$o.attr(\"item-field\")\r\n\t\t\t\t\t\t\t,showField=$o.attr(\"item-showfield\")\r\n\t\t\t\t\t\t\t,editor = $o.attr(\"editor\");\r\n\t\t\t\t\t\t\tif (editor){\r\n\t\t\t\t\t\t\t\t$e=$(\"<div class=\\\"editor\\\">\"+editor+\"</div>\");\r\n\t\t\t\t\t\t\t\t$e.appendTo($o);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tvar ev = $e.find(\"[field=\"+field+\"]\");\r\n\t\t\t\t\t\t\tif(ev.isTag(\"input\")||ev.isTag(\"select\")){\r\n\t\t\t\t\t\t\t\tev.val(value);\r\n\t\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\t\tev.html(value);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tif(showField){\r\n\t\t\t\t\t\t\t\tvar sev = $e.find(\"[field=\"+showField+\"]\");\r\n\t\t\t\t\t\t\t\tif(sev.length>0){\r\n\t\t\t\t\t\t\t\t\tif(sev.isTag(\"input\")||sev.isTag(\"select\")){\r\n\t\t\t\t\t\t\t\t\t\tsev.val(showValue);\r\n\t\t\t\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\t\t\t\tev.html(sev);\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tvar $edior=$e.getFormEditor(),type=$edior.getCompType();\r\n\t\t\t\t\t\t\tif(type==\"radio\"||type==\"checkbox\"){\r\n\t\t\t\t\t\t\t\t$edior.attr(\"disabled\",false);\r\n\t\t\t\t\t\t\t\t$r.html(\"\");\r\n\t\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t$form.find(\"div.formmore\").hide();\r\n\t\t\t\t\t\t$form.openFormDetail(null,\"all\");\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t\tif(state == \"EDIT\" && $form.attr(\"initedit\")!=\"true\"){\r\n\t\t\t\t\t$form.initPageUI();\r\n\t\t\t\t\t$form.attr(\"initedit\",\"true\");\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\t\r\n\t\t},\r\n\t\t/*\r\n\t\t * 打开表单详细内容\r\n\t\t * @param {string} [target] - jquery filter指定的表单对象\r\n\t\t */\r\n\t\topenFormDetail:function(target,sstate){\r\n\t\t\tvar $e =$(this),$form = target?$(target):($e.isTag(\"form\")?$e:($e.attr(\"app-form\")?$($e.attr(\"app-form\")):$e.parents(\"form:first\")));\r\n\t\t\tvar exSum=$form.attr(\"summary\")==\"true\"\r\n\t\t\t\t,durl=$form.attr(\"detailurl\")\r\n\t\t\t\t,dparam=$form.attr(\"detailparameter\")\r\n\t\t\t\t,sumCount=$form.attr(\"sumcount\")*1\r\n\t\t\t\t,sumstate=$form.attr(\"sumstate\")||\"simple\";\r\n\t\t\tif(sstate==sumstate)\r\n\t\t\t\treturn;\r\n\t\t\tif(exSum && sumCount>0){\r\n\t\t\t\tvar $trs=$form.find(\"table>tbody>tr:gt(\"+(sumCount-1)+\")\");\r\n\t\t\t\tif(sumstate == \"simple\"){\r\n\t\t\t\t\t$trs.show();\r\n\t\t\t\t\t$form.attr(\"sumstate\",\"all\");\r\n\t\t\t\t\t$form.find(\"div.formmore>a\").html(\"收起\");\r\n\t\t\t\t}else{\r\n\t\t\t\t\t$trs.hide();\r\n\t\t\t\t\t$form.attr(\"sumstate\",\"simple\");\r\n\t\t\t\t\t$form.find(\"div.formmore>a\").html(\"更多信息\");\r\n\t\t\t\t}\r\n\t\t\t}else if(durl){\r\n\t\t\t\tif(!dparam){\r\n\t\t\t\t\tdparam=\"id:${id}\";\r\n\t\t\t\t}\r\n\t\t\t\tvar params={};\r\n\t\t\t\t$form.find(\"[field]\").each(function(){\r\n\t\t\t\t\tvar $o =$(this),fd=$o.attr(\"field\"),v=$o.val()||$o.attr(\"fieldvalue\")||$o.html();\r\n\t\t\t\t\tparam[fd]=v;\r\n\t\t\t\t});\r\n\t\t\t\tvar pa=$template(dparam,param);\r\n\t\t\t\tparams=eval(\"{\"+pa+\"}\");\r\n\t\t\t\tvar options = {\r\n\t\t\t\t\thref:_contextPath+durl,\r\n\t\t\t\t\tparam:params,\r\n\t\t\t\t\tisWrapper:true,\r\n\t\t\t\t\tisReload:true\r\n\t\t\t\t};\r\n\t\t\t\trequire([\"app/widgets/window/app-dialog\"],function(){\r\n\t\t\t\t\t$.openModalDialog(options);\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t},\r\n\t\tisForm:function(){\r\n\t\t\t$form = $(this).getForm();\r\n\t\t\treturn $form.length>0;\r\n\t\t},\r\n\t\tgetForm:function(){\r\n\t\t\tvar $t = $(this)\r\n\t\t\t,$form = $t.isTag('form')?$t:$($t.attr(\"app-form\"));\r\n\t\t\treturn $form;\t\r\n\t\t},\r\n\r\n\t\t/**\r\n\t\t * @memberof appform\r\n\t\t * @function\r\n\t\t * @instance\r\n\t\t * @name getSumbitData\r\n\t\t * @desc 取得所有组件的数据\r\n\t\t * @param {object} [options] - 提交选项如{url:\"\",model:false,params:{gridId:gridParamName}}\r\n\t\t */\r\n\t\tgetSumbitData:function(options){\r\n\t\t\tif(!options){\r\n\t\t\t\toptions={};\r\n\t\t\t}\r\n\t\t\tvar submitData={}\r\n\t\t\t,url = options.url\r\n\t\t\t,$toggle = null\r\n\t\t\t,valid = true\r\n\t\t\t,transorObj = {}\r\n\t\t\t,hasTrans = false;\r\n\t\t\t$(this).each(function () {\r\n\t\t\t\tvar $el = $(this);\r\n\t\t\t\tif($el.isForm()){\r\n\t\t\t\t\tvar $form = $el.getForm();\r\n\t\t\t\t\tif(!$toggle)\r\n\t\t\t\t\t\t$toggle=$form;\r\n\t\t\t\t\tif($form.attr(\"validate\")!=\"false\" && !$form.valid()){\r\n\t\t\t\t\t\tvalid = false;\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif(!url){\r\n\t\t\t\t\t\turl = $form.attr(\"action\");\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif(options[\"model\"] == true){\r\n\t\t\t\t\t\tvar $fields = $form.find(\"input[model][field],select[model][field]\");\r\n\t\t\t\t\t\tif($fields.length == 0){\r\n\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tvar data = {};\r\n\t\t\t\t\t\t$fields.each(function(){\r\n\t\t\t\t\t\t\tvar $t = $(this);\r\n\t\t\t\t\t\t\tdata[$t.attr(\"field\")]=$.fn.unescapeHtml($t.val());\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\t$.extend(submitData,data);\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\t$.each($form.serializeArray(),function(i,obj){\r\n\t\t\t\t\t\t\tsubmitData[obj.name]=$.fn.unescapeHtml(obj.value);\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t\tvar transor = $form.attr(\"transor\");\r\n\t\t\t\t\tif(transor){\r\n\t\t\t\t\t\ttransor = $A.jsonEval(transor);\r\n\t\t\t\t\t\ttransorObj[$form.attr(\"id\")] = transor;\r\n\t\t\t\t\t\thasTrans = true;\r\n\t\t\t\t\t}\r\n\t\t\t\t}else if($el.data(\"grid\")){\r\n\t\t\t\t\t$el.data(\"grid\").endEdit();\r\n\t\t\t\t\tif($el.grid('isValid') == false){\r\n\t\t\t\t\t\tvalid = false;\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tvar data = $el.grid(\"getAllData\");\r\n\t\t\t\t\tvar id = $el.attr('id');\r\n\t\t\t\t\tdata = JSON.stringify(data);\r\n\t\t\t\t\tvar target = options.params?(options.params[id]||id):id;\r\n\t\t\t\t\tsubmitData[target] = data;\r\n\t\t\t\t\t\r\n\t\t\t\t\tvar fixeddata = $el.grid(\"getFixedParameter\");\r\n\t\t\t\t\tif(fixeddata && fixeddata.__transor){\r\n\t\t\t\t\t\t//data[\"__transor\"] = fixeddata[\"__transor\"];\r\n\t\t\t\t\t\tvar transor = fixeddata.__transor;\r\n\t\t\t\t\t\tif(transor){\r\n\t\t\t\t\t\t\ttransorObj[$el.attr(\"id\")] = transor;\r\n\t\t\t\t\t\t\thasTrans = true;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\t}else if($el.isGrid()){\r\n\t\t\t\t\t$el=$A($el);\r\n\t\t\t\t\t\r\n\t\t\t\t\tvar id = $el.bsgrid(\"getGridId\");\r\n\t\t\t\t\tvar target = options.params?(options.params[id]||id):id;\r\n\t\t\t\t\tvar data;\r\n\t\t\t\t\tif(options.submitMode==\"all\"){\r\n\t\t\t\t\t\tif(!$el.bsgrid(\"setEditEnabled\",false)){\r\n\t\t\t\t\t\t\tvalid = false;\r\n\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tdata = $el.bsgrid(\"getRowData\");\r\n\t\t\t\t\t\t$el.bsgrid(\"setEditEnabled\",true);\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\tdata = $el.bsgrid(\"getSubmitData\");\r\n\t\t\t\t\t\tif(data == null){\r\n\t\t\t\t\t\t\tvalid = false;\r\n\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tsubmitData[target]=JSON.stringify(data);\r\n\t\t\t\t\tvar transor = $el.attr(\"transor\");\r\n\t\t\t\t\tif(transor){\r\n\t\t\t\t\t\ttransor = $A.jsonEval(transor);\r\n\t\t\t\t\t\ttransorObj[$el.attr(\"id\")] = transor;\r\n\t\t\t\t\t\thasTrans = true;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\tif(!valid)\r\n\t\t\t\treturn valid;\r\n\t\t\tif(hasTrans)\r\n\t\t\t\tsubmitData.__transor = JSON.stringify(transorObj);\r\n\t\t\treturn {url:url,toggle:$toggle,data:submitData};\r\n\t\t},\r\n\t\t/**\r\n\t\t * @memberof appform\r\n\t\t * @function\r\n\t\t * @instance\r\n\t\t * @name sumbitData\r\n\t\t * @desc 提交指定的数据\r\n\t\t * @param {object} [options] - 提交选项如{url:\"\",type:'POST',dataType:'json',cache:false}\r\n\t\t * @param {json} [data] - 提交的json数据\r\n\t\t */\r\n\t\tsumbitData:function(options,data){\r\n\t\t\tvar op = $.extend({\r\n\t\t\t\ttype:'POST',\r\n\t\t\t\tdataType:\"json\",\r\n\t\t\t\tcache: false\r\n\t\t\t\t},options,data);\r\n\t\t\t$ajax.ajaxCall(op);\r\n\t\t},\r\n\t\t/**\r\n\t\t * @memberof appform\r\n\t\t * @function\r\n\t\t * @instance\r\n\t\t * @name sumbitAllComp\r\n\t\t * @desc 提交所有组件数据\r\n\t\t * @param {object} [options] - 提交选项如{url:\"\",type:'POST',dataType:'json',cache:false,model:false,params:{gridId:gridParamName}}\r\n\t\t */\r\n\t\tsumbitAllComp:function(options){\r\n\t\t\tvar data = this.getSumbitData(options);\r\n\t\t\tif(data)\r\n\t\t\t\tthis.sumbitData(options,data);\r\n\t\t},\r\n\t\tserializeFieldArray:function(){\r\n\t\t\treturn this.map(function(){\r\n\t\t\t\tvar elements = $.prop( this, \"elements\" );\r\n\t\t\t\treturn elements ? jQuery.makeArray( elements ) : this;\r\n\t\t\t}).filter(function(){\r\n\t\t\t\tvar type = this.type;\r\n\t\t\t\t// Use .is(\":disabled\") so that fieldset[disabled] works\r\n\t\t\t\treturn this.field && !jQuery( this ).is( \":disabled\" ) &&\r\n\t\t\t\t\trsubmittable.test( this.nodeName ) && !rsubmitterTypes.test( type ) &&\r\n\t\t\t\t\t( this.checked || !manipulation_rcheckableType.test( type ) );\r\n\t\t\t}).map(function( i, elem ){\r\n\t\t\t\tvar val = jQuery( this ).val();\r\n\r\n\t\t\t\treturn val == null ?\r\n\t\t\t\t\tnull :\r\n\t\t\t\t\tjQuery.isArray( val ) ?\r\n\t\t\t\t\t\tjQuery.map( val, function( val ){\r\n\t\t\t\t\t\t\treturn { name: elem.field, value: val.replace( rCRLF, \"\\r\\n\" ) };\r\n\t\t\t\t\t\t}) :\r\n\t\t\t\t\t\t{ name: elem.field, value: val.replace( rCRLF, \"\\r\\n\" ) };\r\n\t\t\t}).get();\r\n\t\t},\r\n\t\t/**\r\n\t\t * @memberof appform\r\n\t\t * @function\r\n\t\t * @instance\r\n\t\t * @name submitForm\r\n\t\t * @desc 表单提交方法\r\n\t\t * @param {object} [options] - 提交选项如{url:\"\",type:'POST',dataType:'json',cache:false,model:false}\r\n\t\t */\r\n\t\tsubmitForm:function(options){\r\n\t\t\t//add by tw\r\n\t\t\toptions = options||{};\r\n\t\t\treturn this.each(function () {\r\n\t\t\t\tvar el = $(this),$form=el.isTag('form')?el:$(el.attr(\"app-form\"));\r\n\t\t\t\tif($form.attr(\"validate\")!=\"false\"){\r\n\t\t\t\t\tif (!$form.valid()) {\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\t//add by tw如果参数中带了url，使用参数中的url\r\n\t\t\t\tvar url = options.url || $form.attr(\"action\");\r\n\t\t\t\tif (!url) {\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}\r\n\t\t\t\turl =url.evalTemplate(el);\r\n\t\t\t\tvar op = null,data=null;\r\n\t\t\t\tvar $div = $(\"<div style=\\\"display:hidden;\\\"></div>\");\r\n\t\t\t\t//add by tw 添加附加值\r\n\t\t\t\tif(options.attachData){\r\n\t\t\t\t\tfor(var key in options.attachData){\r\n\t\t\t\t\t\tvar val = options.attachData[key];\r\n\t\t\t\t\t\tif($.isArray(val)){\r\n\t\t\t\t\t\t\tfor(var i=0;i<val.length;i++){\r\n\t\t\t\t\t\t\t\tvar $input = $(\"<input type=\\\"hidden\\\" name=\\\"\"+key+\"\\\" />\").appendTo($div);\r\n\t\t\t\t\t\t\t\t$input.val(val[i]);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\tvar $input = $(\"<input type=\\\"hidden\\\" name=\\\"\"+key+\"\\\" />\").appendTo($div);\r\n\t\t\t\t\t\t\t$input.val(options.attachData[key]);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\t$form.append($div);\r\n\t\t\t\t\r\n\t\t\t\tif(options[\"model\"]==true){\r\n\t\t\t\t\tdata = $form.serializeFieldArray();\r\n\t\t\t\t}else{\r\n\t\t\t\t\tdata=$form.serializeArray();\r\n\t\t\t\t}\r\n\t\t\t\t//移除附加值\r\n\t\t\t\t$div.remove();\r\n\t\t\t\top = $.extend({\r\n\t\t\t\t\t\"type\":$form.attr(\"method\") || 'POST',\r\n\t\t\t\t\t\"url\":url,\r\n\t\t\t\t\t\"data\":data,\r\n\t\t\t\t\t\"dataType\":\"json\",\r\n\t\t\t\t\t\"cache\": false,\r\n\t\t\t\t\t\"toggle\":$form\r\n\t\t\t\t\t},options);\r\n\t\t\t\t\r\n\t\t\t\t$ajax.ajaxCall(op);\r\n\t\t\t});\r\n\t\t}\r\n\t});\r\n\t$(\"body\").on(\"click.data-api\",\"[app-form]\",function ( e ) {\r\n\t\tif(e)e.preventDefault();\r\n\t\t$(this).submitForm();\r\n\t});\r\n});\n",
    "/**\r\n * \r\n * \r\n * \r\n */\r\ndefine(\t'app/widgets/form/app-formgroup',[\"app/core/app-jquery\", \"app/data/app-ajax\", \"app/widgets/form/app-form\", \"app/widgets/form/app-validate\",\r\n\t\t\t\t\"app/widgets/form/app-comp\",\"app/widgets/app-jqgrid\"], function($, $ajax) {\r\n\t\t\tvar r20 = /%20/g, rbracket = /\\[\\]$/, rCRLF = /\\r?\\n/g, rsubmitterTypes = /^(?:submit|button|image|reset|file)$/i, rsubmittable = /^(?:input|select|textarea|keygen)/i, manipulation_rcheckableType = /^(?:checkbox|radio)$/i;\r\n\t\t\tvar AppFormGroup = function() {\r\n\t\t\t\treturn {\r\n\r\n\t\t\t\t\t/**\r\n\t\t\t\t\t * 加载分组表单数据\r\n\t\t\t\t\t */\r\n\t\t\t\t\tloadGroupFromData : function(id, url, params, callback) {\r\n\t\t\t\t\t\tvar op = {\r\n\t\t\t\t\t\t\ttype : 'POST',\r\n\t\t\t\t\t\t\turl : url,\r\n\t\t\t\t\t\t\tdata : params,\r\n\t\t\t\t\t\t\tdataType : \"json\",\r\n\t\t\t\t\t\t\tcache : false,\r\n\t\t\t\t\t\t\t// toggle : $form,\r\n\t\t\t\t\t\t\tsuccess : function(json) {\r\n\t\t\t\t\t\t\t\t$.fn.refreshGroupFormData(id, json);\r\n\t\t\t\t\t\t\t\tif (callback) {\r\n\t\t\t\t\t\t\t\t\tcallback(json);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\terror : $ajax.ajaxError\r\n\t\t\t\t\t\t};\r\n\t\t\t\t\t\t$ajax.ajaxCall(op);\r\n\r\n\t\t\t\t\t},\r\n\t\t\t\t\t/**\r\n\t\t\t\t\t * @memberof appform\r\n\t\t\t\t\t * @function\r\n\t\t\t\t\t * @instance\r\n\t\t\t\t\t * @name sumbitGroupAllComp\r\n\t\t\t\t\t * @desc 提交所有组件数据及分组数据\r\n\t\t\t\t\t * @param {object}\r\n\t\t\t\t\t *            [options] -\r\n\t\t\t\t\t *            提交选项如{id:'groupId',url:\"\",type:'POST',dataType:'json',cache:false,model:false,params:{gridId:gridParamName}}\r\n\t\t\t\t\t */\r\n\t\t\t\t\tsumbitGroupAllComp : function(options) {\r\n\t\t\t\t\t\tvar data = this.getSubmitGroupFormData(options);\r\n\t\t\t\t\t\tif (data)\r\n\t\t\t\t\t\t\t$.fn.sumbitData(options, {data:data});\r\n\t\t\t\t\t},\r\n\r\n\t\t\t\t\tsubmitGroupForm : function(options) {\r\n\t\t\t\t\t\toptions = options || {};\r\n\t\t\t\t\t\t// return this.each(function() {\r\n\t\t\t\t\t\tif (!options.id) {\r\n\t\t\t\t\t\t\treturn null;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t/*\r\n\t\t\t\t\t\t * if (!this.validGroupForm(options.id)){ return ; }\r\n\t\t\t\t\t\t */\r\n\t\t\t\t\t\t// add by tw如果参数中带了url，使用参数中的url\r\n\t\t\t\t\t\tvar url = options.url;\r\n\t\t\t\t\t\tif (!url) {\r\n\t\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t// url = url.evalTemplate($el);\r\n\t\t\t\t\t\tvar op = null, data = null;\r\n\t\t\t\t\t\tvar $div = $(\"<div style=\\\"display:hidden;\\\"></div>\");\r\n\t\t\t\t\t\t// add by tw 添加附加值\r\n\t\t\t\t\t\tif (options.attachData) {\r\n\t\t\t\t\t\t\tfor (var key in options.attachData) {\r\n\t\t\t\t\t\t\t\tvar val = options.attachData[key];\r\n\t\t\t\t\t\t\t\tif (typeof(val) == \"array\") {\r\n\t\t\t\t\t\t\t\t\tfor (var i = 0; i < val.length; i++) {\r\n\t\t\t\t\t\t\t\t\t\tvar $input = $(\"<input hiddencomp=true forForm=\\\"\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t+ options.id\r\n\t\t\t\t\t\t\t\t\t\t\t\t+ \"\\\" type=\\\"hidden\\\" name=\\\"\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t+ key + \"\\\" />\").appendTo($div);\r\n\t\t\t\t\t\t\t\t\t\t$input.val(val[i]);\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\tvar $input = $(\"<input type=\\\"hidden\\\" hiddencomp=true forForm=\\\"\"\r\n\t\t\t\t\t\t\t\t\t\t\t+ options.id\r\n\t\t\t\t\t\t\t\t\t\t\t+ \"\\\" name=\\\"\"\r\n\t\t\t\t\t\t\t\t\t\t\t+ key\r\n\t\t\t\t\t\t\t\t\t\t\t+ \"\\\" />\").appendTo($div);\r\n\t\t\t\t\t\t\t\t\t$input.val(options.attachData[key]);\r\n\t\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t$A.getContainer().append($div);\r\n\t\t\t\t\t\tvar data = this.getSubmitGroupFormData(options);\r\n\r\n\t\t\t\t\t\t// 移除附加值\r\n\t\t\t\t\t\t$div.remove();\r\n\t\t\t\t\t\top = $.extend({\r\n\t\t\t\t\t\t\t\t\t\"type\" : 'POST',\r\n\t\t\t\t\t\t\t\t\t//\"url\" : url,\r\n\t\t\t\t\t\t\t\t\t\"data\" : data,\r\n\t\t\t\t\t\t\t\t\t\"dataType\" : \"json\",\r\n\r\n\t\t\t\t\t\t\t\t\t\"cache\" : false\r\n\t\t\t\t\t\t\t\t}, options);\r\n\t\t\t\t\t\t$ajax.ajaxCall(op);\r\n\t\t\t\t\t},\r\n\t\t\t\t\tfindGroupForms : function(id) {\r\n\r\n\t\t\t\t\t\tvar $items = $A(\".formitem[forform='\" + id + \"']\"), $hitems = $A(\"[forform='\"\r\n\t\t\t\t\t\t\t\t+ id + \"'][hiddencomp=true]\");\r\n\t\t\t\t\t\tvar fromMap = {};\r\n\t\t\t\t\t\tvar fromList = [];\r\n\t\t\t\t\t\tvar elments = $items\r\n\t\t\t\t\t\t\t\t.find(\"input[type!=showValue], select, textarea\");\r\n\t\t\t\t\t\telments.each(function() {\r\n\t\t\t\t\t\t\t\t\tif (this.form) {\r\n\t\t\t\t\t\t\t\t\t\tvar id = $(this.form).attr(\"id\");\r\n\t\t\t\t\t\t\t\t\t\tif (!fromMap[id]) {\r\n\t\t\t\t\t\t\t\t\t\t\tfromMap[id] = this.form;\r\n\t\t\t\t\t\t\t\t\t\t\tfromList.push(this.form);\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\treturn fromList;\r\n\t\t\t\t\t},\r\n\t\t\t\t\thideFormItem:function(id,parentHide){\r\n\t\t\t\t\t\tvar item=$A(\".\"+id);\r\n\t\t\t\t\t\titem.hide();\r\n\t\t\t\t\t\tvar panelId= item.attr(\"forpanel\");\r\n\t\t\t\t\r\n\t\t\t\t\t\t  if (parentHide&&panelId){\r\n\t\t\t\t\t\t  \t$A(\"#\"+panelId).panel(\"hide\");\r\n\t\t\t\t\t\t  }else{\r\n\t\t\t\t\t\t\t  if ($A(\".\"+id).parents(\"div.form\").length>0){\r\n\t\t\t\t\t\t\t\t  var formObj=$A(\".\"+id).parents(\"div.form\").children(\"form\").children(\"div\");\r\n\t\t\t\t\t\t\t\t  \r\n\t\t\t\t\t\t\t\t  if (formObj.children(\":visible\").length==0){\r\n\t\t\t\t\t\t\t\t\t  $A(\".\"+id).parents(\"div.form\").hide();\r\n\t\t\t\t\t\t\t\t  }\r\n\t\t\t\t\t\t\t  }\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t \r\n\t\t\t\t\t   \r\n\t\t\t\t\t},\r\n\t\t\t\t\tshowFormItem:function(id,parentHide){\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tvar item=$A(\".\"+id);\r\n\t\t\t\t\t\titem.show();\r\n\t\t\t\t\t\tvar panelId= item.attr(\"forpanel\");\r\n\t\t\t\t\t\t  if (parentHide&&panelId){\r\n\t\t\t\t\t\t  \t$A(\"#\"+panelId).panel(\"show\");\r\n\t\t\t\t\t\t  }else{\r\n\t\t\t\t\t\t\t  if ($A(\".\"+id).parents(\"div.form\").length>0){\r\n\t\t\t\t\t\t\t\t  var formObj=$A(\".\"+id).parents(\"div.form\").children(\"form\").children(\"div\");\r\n\t\t\t\t\t\t\t\t  \r\n\t\t\t\t\t\t\t\t  if (formObj.children(\":visible\").length==0){\r\n\t\t\t\t\t\t\t\t\t  $A(\".\"+id).parents(\"div.form\").show();\r\n\t\t\t\t\t\t\t\t  }\r\n\t\t\t\t\t\t\t  }\r\n\t\t\t\t\t\t  }\r\n\t\t\t\t\t},\r\n\t\t\t\t\tvalidGroupForm : function(id) {\r\n\r\n\t\t\t\t\t\tvar valid = true;\r\n\t\t\t\t\t\tvar fromList = this.findGroupForms(id)\r\n\t\t\t\t\t\tfor (var i = 0; i < fromList.length; i++) {\r\n\t\t\t\t\t\t\tvalid = valid && $(fromList[i]).valid();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\treturn valid;\r\n\t\t\t\t\t},\r\n\t\t\t\t\t/**\r\n\t\t\t\t\t * @memberof appformgroup\r\n\t\t\t\t\t * @function\r\n\t\t\t\t\t * @instance\r\n\t\t\t\t\t * @name getSubmitGroupFormData\r\n\t\t\t\t\t * @desc 获取分组数据\r\n\t\t\t\t\t * @param {object}\r\n\t\t\t\t\t *            [options] -\r\n\t\t\t\t\t *            提交选项如{id:'groupId',url:\"\",type:'POST',dataType:'json',cache:false,model:false,params:{gridId:gridParamName}}\r\n\t\t\t\t\t */\r\n\t\t\t\t\tgetSubmitGroupFormData : function(options) {\r\n\t\t\t\t\t\tvar submitData = {}, fromData = null, valid = true, transorObj = {}, hasTrans = false;\r\n\t\t\t\t\t\tif (options.id) {\r\n\t\t\t\t\t\t\tvar ids = options.id.split(\",\");\r\n\t\t\t\t\t\t\tfor (var i=0;i<ids.length;i++) {\r\n\t\t\t\t\t\t\t\tvar id=ids[i];\r\n\t\t\t\t\t\t\t\tvar $el = $A(\"#\" + id);\r\n\t\t\t\t\t\t\t\tif ($el.data(\"grid\")) {\r\n\t\t\t\t\t\t\t\t\t$el.data(\"grid\").endEdit();\r\n\t\t\t\t\t\t\t\t\tif ($el.grid('isValid') == false) {\r\n\t\t\t\t\t\t\t\t\t\tvalid = false;\r\n\t\t\t\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\tvar data = $el.grid(\"getAllData\");\r\n\t\t\t\t\t\t\t\t\tvar id = $el.attr('id');\r\n\t\t\t\t\t\t\t\t\tdata = JSON.stringify(data);\r\n\t\t\t\t\t\t\t\t\tvar target = options.params\r\n\t\t\t\t\t\t\t\t\t\t\t? (options.params[id] || id)\r\n\t\t\t\t\t\t\t\t\t\t\t: id;\r\n\t\t\t\t\t\t\t\t\tsubmitData[target] = data;\r\n\r\n\t\t\t\t\t\t\t\t\tvar fixeddata = $el\r\n\t\t\t\t\t\t\t\t\t\t\t.grid(\"getFixedParameter\");\r\n\t\t\t\t\t\t\t\t\tif (fixeddata && fixeddata.__transor) {\r\n\t\t\t\t\t\t\t\t\t\t// data[\"__transor\"] =\r\n\t\t\t\t\t\t\t\t\t\t// fixeddata[\"__transor\"];\r\n\t\t\t\t\t\t\t\t\t\tvar transor = fixeddata.__transor;\r\n\t\t\t\t\t\t\t\t\t\tif (transor) {\r\n\t\t\t\t\t\t\t\t\t\t\ttransorObj[$el.attr(\"id\")] = transor;\r\n\t\t\t\t\t\t\t\t\t\t\thasTrans = true;\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t\t} else if ($el.isGrid()) {\r\n\t\t\t\t\t\t\t\t\t\r\n\r\n\t\t\t\t\t\t\t\t\tvar id = $el.bsgrid(\"getGridId\");\r\n\t\t\t\t\t\t\t\t\tvar target = options.params\r\n\t\t\t\t\t\t\t\t\t\t\t? (options.params[id] || id)\r\n\t\t\t\t\t\t\t\t\t\t\t: id;\r\n\t\t\t\t\t\t\t\t\tvar data;\r\n\t\t\t\t\t\t\t\t\tif (options.submitMode == \"all\") {\r\n\t\t\t\t\t\t\t\t\t\tif (!$el\r\n\t\t\t\t\t\t\t\t\t\t\t\t.bsgrid(\"setEditEnabled\", false)) {\r\n\t\t\t\t\t\t\t\t\t\t\tvalid = false;\r\n\t\t\t\t\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\tdata = $el.bsgrid(\"getRowData\");\r\n\t\t\t\t\t\t\t\t\t\t$el.bsgrid(\"setEditEnabled\", true);\r\n\t\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\t\tdata = $el.bsgrid(\"getSubmitData\");\r\n\t\t\t\t\t\t\t\t\t\tif (data == null) {\r\n\t\t\t\t\t\t\t\t\t\t\tvalid = false;\r\n\t\t\t\t\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\tsubmitData[target] = JSON.stringify(data);\r\n\t\t\t\t\t\t\t\t\tvar transor = $el.attr(\"transor\");\r\n\t\t\t\t\t\t\t\t\tif (transor) {\r\n\t\t\t\t\t\t\t\t\t\ttransor = $A.jsonEval(transor);\r\n\t\t\t\t\t\t\t\t\t\ttransorObj[$el.attr(\"id\")] = transor;\r\n\t\t\t\t\t\t\t\t\t\thasTrans = true;\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t} else {\r\n\r\n\t\t\t\t\t\t\t\t\tvar $items = $A(\".formitem[forform='\" + id\r\n\t\t\t\t\t\t\t\t\t\t\t+ \"']\"), $hitems = $A(\"[forform='\"\r\n\t\t\t\t\t\t\t\t\t\t\t+ id + \"'][hiddencomp=true]\");\r\n\r\n\t\t\t\t\t\t\t\t\tif (!$.fn.validGroupForm(id)) {\r\n\t\t\t\t\t\t\t\t\t\treturn null;\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\tvar fromData = $items.getGroupFormData(id,\r\n\t\t\t\t\t\t\t\t\t\t\toptions[\"model\"]);\r\n\r\n\t\t\t\t\t\t\t\t\t$.each(fromData, function(i, obj) {\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\tsubmitData[obj.name] = obj.value;\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tif (!valid)\r\n\t\t\t\t\t\t\treturn valid;\r\n\t\t\t\t\t\tif (hasTrans)\r\n\t\t\t\t\t\t\tsubmitData.__transor = JSON.stringify(transorObj);\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t return submitData;\r\n\r\n\t\t\t\t\t},\r\n\t\t\t\t\tfindGroupFormItem : function(id) {\r\n\t\t\t\t\t\tvar $items = $A(\"[forform='\" + id + \"']\");\r\n\t\t\t\t\t\tvar formItem = $items.map(function() {\r\n\t\t\t\t\t\t\tvar elements = $.attr(this, \"hiddencomp\");\r\n\t\t\t\t\t\t\tif (elements==\"true\"){\r\n\t\t\t\t\t\t\t\treturn this;\r\n\t\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\t\tvar inputs=[];\r\n\t\t\t\t\t\t\t\t$A(\"input,select, textarea\",this).each(function(){\r\n\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\tinputs.push(this);\r\n\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\treturn inputs\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\treturn formItem;\r\n\t\t\t\t\t},\r\n\t\t\t\t\t/**\r\n\t\t\t\t\t * @memberof appformgroup\r\n\t\t\t\t\t * @function\r\n\t\t\t\t\t * @instance\r\n\t\t\t\t\t * @name getGroupFormData\r\n\t\t\t\t\t * @desc 获取分组数据\r\n\t\t\t\t\t * @param {String}\r\n\t\t\t\t\t *            [id] -分组id\r\n\t\t\t\t\t * @param {Boolean}\r\n\t\t\t\t\t *            [isField] -是否以字名为key键\r\n\t\t\t\t\t */\r\n\r\n\t\t\t\t\tgetGroupFormData : function(id, isField) {\r\n\r\n\t\t\t\t\t\treturn this.findGroupFormItem(id).filter(function() {\r\n\t\t\t\t\t\t\tvar type = this.type;\r\n\t\t\t\t\t\t\t// Use .is(\":disabled\") so that fieldset[disabled]\r\n\t\t\t\t\t\t\t// works\r\n\t\t\t\t\t\t\tvar hasField = true;\r\n\t\t\t\t\t\t\tif (isField) {\r\n\t\t\t\t\t\t\t\thasField = this.field;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\treturn hasField\r\n\t\t\t\t\t\t\t\t\t&& !jQuery(this).is(\":disabled\")\r\n\t\t\t\t\t\t\t\t\t&& rsubmittable.test(this.nodeName)\r\n\t\t\t\t\t\t\t\t\t&& !rsubmitterTypes.test(type)\r\n\t\t\t\t\t\t\t\t\t&& (this.checked || !manipulation_rcheckableType\r\n\t\t\t\t\t\t\t\t\t\t\t.test(type));\r\n\t\t\t\t\t\t}).map(function(i, elem) {\r\n\t\t\t\t\t\t\tvar val = jQuery(this).val();\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tif (val==null){\r\n\t\t\t\t\t\t\t\treturn null;\r\n\t\t\t\t\t\t\t}else if ( jQuery.isArray(val)){\r\n\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\treturn jQuery.map(val, function(val) {\r\n\t\t\t\t\t\t\t\t\treturn {\r\n\t\t\t\t\t\t\t\t\t\tname : isField\r\n\t\t\t\t\t\t\t\t\t\t\t\t? elem.field\r\n\t\t\t\t\t\t\t\t\t\t\t\t: elem.name\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t|| elem.id,\r\n\t\t\t\t\t\t\t\t\t\tvalue : $.fn\r\n\t\t\t\t\t\t\t\t\t\t\t\t.unescapeHtml(val\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t.replace(\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\trCRLF,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\"\\r\\n\"))\r\n\t\t\t\t\t\t\t\t\t};\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\t\treturn {\r\n\t\t\t\t\t\t\t\t\tname : isField ? elem.field : elem.name\r\n\t\t\t\t\t\t\t\t\t\t\t|| elem.id,\r\n\t\t\t\t\t\t\t\t\tvalue : $.fn.unescapeHtml(val.replace(\r\n\t\t\t\t\t\t\t\t\t\t\trCRLF, \"\\r\\n\"))\r\n\t\t\t\t\t\t\t\t};\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t}).get();\r\n\t\t\t\t\t},\r\n\t\t\t\t\trefreshGroupFormData : function(id, data) {\r\n\r\n\t\t\t\t\t\tvar $items = $A(\".formitem[forform='\" + id + \"']\"), $hitems = $A(\"[forform='\"\r\n\t\t\t\t\t\t\t\t+ id + \"'][hiddencomp=true]\");\r\n\t\t\t\t\t\tvar md = data, model;\r\n\t\t\t\t\t\t/*\r\n\t\t\t\t\t\t * if (model) { if (model.indexOf(\".\") > 1) {\r\n\t\t\t\t\t\t * $.each(model.split(\".\"), function(i) { md = md[this];\r\n\t\t\t\t\t\t * if (md == null) return false; }); } else { md =\r\n\t\t\t\t\t\t * md[model]; } if (md == null) md = data; }\r\n\t\t\t\t\t\t */\r\n\t\t\t\t\t\t$hitems.each(function() {\r\n\t\t\t\t\t\t\tvar $o = $(this), itemmodel = $o.attr(\"model\"), field = $o\r\n\t\t\t\t\t\t\t\t\t.attr(\"field\");\r\n\t\t\t\t\t\t\tvar imd = md;\r\n\t\t\t\t\t\t\tif (itemmodel != model) {\r\n\t\t\t\t\t\t\t\tif (itemmodel.indexOf(\".\") > 1) {\r\n\t\t\t\t\t\t\t\t\t$.each(itemmodel.split(\".\"), function(i) {\r\n\t\t\t\t\t\t\t\t\t\t\t\timd = imd[this];\r\n\t\t\t\t\t\t\t\t\t\t\t\tif (imd == null)\r\n\t\t\t\t\t\t\t\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\timd = imd[itemmodel];\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tif (imd == null)\r\n\t\t\t\t\t\t\t\t\timd = md;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tvar v = imd[field];\r\n\t\t\t\t\t\t\t$o.val(v);\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\t$items.each(function() {\r\n\t\t\t\t\t\t\tvar $o = $(this), itemmodel = $o.attr(\"item-model\"), field = $o\r\n\t\t\t\t\t\t\t\t\t.attr(\"item-field\"), showField = $o\r\n\t\t\t\t\t\t\t\t\t.attr(\"item-showfield\");\r\n\t\t\t\t\t\t\tvar imd = md;\r\n\t\t\t\t\t\t\tif (itemmodel != model) {\r\n\t\t\t\t\t\t\t\tif (itemmodel.indexOf(\".\") > 1) {\r\n\t\t\t\t\t\t\t\t\t$.each(itemmodel.split(\".\"), function(i) {\r\n\t\t\t\t\t\t\t\t\t\t\t\timd = imd[this];\r\n\t\t\t\t\t\t\t\t\t\t\t\tif (imd == null)\r\n\t\t\t\t\t\t\t\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\timd = imd[itemmodel];\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tif (imd == null)\r\n\t\t\t\t\t\t\t\t\timd = md;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tvar v = imd[field];\r\n\t\t\t\t\t\t\tvar sv = null;\r\n\t\t\t\t\t\t\tif (showField) {\r\n\t\t\t\t\t\t\t\tsv = imd[showField];\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t$o.setFormItemValue(v, sv, md);\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\t/*if ($form.attr(\"init\") != \"true\") {\r\n\t\t\t\t\t\t\t$form.attr(\"refresh\", \"true\");\r\n\t\t\t\t\t\t}*/\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}();\r\n\r\n\t\t\t$.fn.extend(AppFormGroup)\r\n\r\n\t\t\treturn AppFormGroup;\r\n\t\t});\n",
    "/**\r\n * 表单验证\r\n */\r\ndefine('app/widgets/form/app-rule',[\"jquery\",\"app/core/app-core\",\"app/widgets/form/app-comp\"],function($,$A){\r\n\t$A.gearRules={\r\n\t\trules:{\r\n\t\t\tmnemonic:{\r\n\t\t\t\tname:\"mnemonic\",\r\n\t\t\t\ttrigger:\"change\",\r\n\t\t\t\thandle:function($s,$t,c){\r\n\t\t\t\t\tvar t = $s.getCompText();\r\n\t\t\t\t\tif(t){\r\n\t\t\t\t\t\tvar pinyin = t.toUpperInitials();\r\n\t\t\t\t\t\t$t.setCompValue(pinyin);\r\n\t\t\t\t\t\t$t.setCompText(pinyin);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tgear:{\r\n\t\t\t\tname:\"gear\",\r\n\t\t\t\ttrigger:\"change\",\r\n\t\t\t\tinit:true,\r\n\t\t\t\thandle:function($s,$t,c){\r\n\t\t\t\t\tvar map = c.map||{}\r\n\t\t\t\t\t,clear=c.clear!==false;\r\n\t\t\t\t\tvar param={};\r\n\t\t\t\t\t$s.each(function(){\r\n\t\t\t\t\t\tvar $o = $(this)\r\n\t\t\t\t\t\t,v=$o.getCompValue()\r\n\t\t\t\t\t\t,t =$o.getCompText()\r\n\t\t\t\t\t\t,n=$o.attr(\"name\")\r\n\t\t\t\t\t\t,sn=$o.attr(\"showName\");\r\n\t\t\t\t\t\tn=map[n]||n;\r\n\t\t\t\t\t\tparam[n]=v;\r\n\t\t\t\t\t\tif(sn){\r\n\t\t\t\t\t\t\tsn=map[sn]||sn;\r\n\t\t\t\t\t\t\tparam[sn]=t;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t})\r\n\t\t\t\t\t$t.setCompParameter(param);\r\n\t\t\t\t\t$t.clearCompValue();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\taddRule:function(name,rule){\r\n\t\t\tif(typeof name == \"object\"){\r\n\t\t\t\trule = name;\r\n\t\t\t}else{\r\n\t\t\t\trule.name=name;\r\n\t\t\t}\r\n\t\t\trules[rule.name]=rule;\r\n\t\t}\r\n\t};\r\n\t\r\n\t/**\r\n\t * 创建规则对象\r\n\t * @param rules{object}额外规则\r\n\t */\r\n\t$.fn.gearRule = function(rules){\r\n\t\trules = $.extend({},$A.gearRules.rules,rules);\r\n\t\t$(this).each(function(){\r\n\t\t\tvar $target = $(this)\r\n\t\t\t,elRules=$target.attr(\"gearRules\");\r\n\t\t\tif(!elRules)\r\n\t\t\t\treturn;\r\n\t\t\telRules=$A.jsonEval(elRules);\r\n\t\t\t$.each(elRules, function(prop, val) {\r\n\t\t\t\tif(!val)\r\n\t\t\t\t\treturn;\r\n\t\t\t\tvar rule = rules[prop];\r\n\t\t\t\tif(rule == null)\r\n\t\t\t\t\treturn;\r\n\t\t\t\tvar trigger = rule.trigger||\"change\";\r\n\t\t\t\tvar config = val;\r\n\t\t\t\tvar init = rule.init;\r\n\t\t\t\tif(typeof val!=\"string\"){\r\n\t\t\t\t\tval=config.depend;\r\n\t\t\t\t\tif(config.init !== undefined){\r\n\t\t\t\t\t\tinit = config.init;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tvar $source = $target;\r\n\t\t\t\tif(val){\r\n\t\t\t\t\t$source = $A(val);\r\n\t\t\t\t\tif($source.size() == 0)\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tif(init){\r\n\t\t\t\t\tif(typeof init == \"function\"){\r\n\t\t\t\t\t\tinit($source,$target,config);\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\trule.handle($source,$target,config);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\t$source.on(trigger,function(){\r\n\t\t\t\t\trule.handle($(this),$target,config);\r\n\t\t\t\t});\r\n\t\t\t});\r\n\t\t});\r\n\t};\r\n\treturn $;\r\n});\r\n\n",
    "/**\r\n * 预输入控件--继承Combo\r\n * @author Mr.T\r\n */\r\ndefine('app/widgets/form/app-typeahead',['app/core/app-jquery', 'app/core/app-core', 'app/core/app-options', 'app/data/app-ajax',\r\n        'app/widgets/form/app-combo'], function($, App, Options, AppAjax, Combo) {\r\n\t\r\n\t'use strict';\r\n\t/**\r\n\t * @class \r\n\t * @classdesc 预输入框\r\n\t * <span class=\"type-signature static\">extend</span>combo\r\n\t * @see {@link combo-class} typeahead继承至combo\r\n\t * @name typeahead-class\r\n\t * @desc 预输入框的初始化方法\r\n\t * @param {DOMElement} input 要渲染的input组件\r\n\t * @param {Object} options 组件的选项设置 \r\n\t * @author Mr.T\r\n\t * @example &lt;input &#9;class=\"app-typeahead\"\r\n\t * &#9;_options=\"{\r\n\t * &#9;&#9;suggest: 'html/example/app-input/data/typeahead.do'\r\n\t * &#9;}\"\r\n\t * />\r\n\t * @example $('#demo').typeahead({\r\n\t * &#9;suggest: 'html/example/app-input/data/typeahead.do'\r\n\t * });\r\n\t */\r\n\tvar Typeahead = Combo.extend({\r\n\t\tinitialize: function (input, options) {\r\n\t\t\tif(!options){\r\n\t\t\t\toptions = {};\r\n\t\t\t}\r\n\t\t\toptions._ = Options.appDefaults.Typeahead;\r\n\t\t\tTypeahead.superclass.initialize.call(this, input, options);\r\n\t\t\tthis._init();\r\n\t\t},\r\n\t\t/**\r\n\t\t * 初始化\r\n\t\t */\r\n\t\t_init: function(){\r\n\t\t\tthis._editable();\r\n\t\t\tthis._initOptions();\r\n\t\t\tthis._initPanelContent();\r\n\t\t\tthis._registEvents();\r\n\t\t\tif(this.setting.value){\r\n\t\t\t\tthis.setText(this.setting.value);\r\n\t\t\t}\r\n\t\t},\r\n\t\t/**\r\n\t\t * 初始化设置\r\n\t\t */\r\n\t\t_initOptions: function(){\r\n\t\t\tvar s = this.setting;\r\n\t\t\t//如果没有设置suggest地址，则使用url\r\n\t\t\tif((s.suggest == '' || s.suggest == true)\r\n\t\t\t\t\t&& s.url){\r\n\t\t\t\ts.suggest = s.url;\r\n\t\t\t}\r\n\t\t\tif(s.suggest == false){\r\n\t\t\t\ts.suggest = '';\r\n\t\t\t}\r\n\t\t\t//远程加载，可以是remote 或 async\r\n\t\t\tif(!s.remote && s.async){\r\n\t\t\t\ts.remote = true; \r\n\t\t\t}\r\n\t\t},\r\n\t\t/**\r\n\t\t * 初始化下拉面板的内容\r\n\t\t */\r\n\t\t_initPanelContent: function(){\r\n\t\t\tvar $list = $('<ul class=\"combo-list\"></ul>');\r\n\t\t\t$list.appendTo(this.$dropPanelMain);\r\n\t\t\tthis.$list = $list;\r\n\t\t},\r\n\t\t/**\r\n\t\t * 注册事件\r\n\t\t */\r\n\t\t_registEvents: function(){\r\n\t\t\tvar typeahead = this;\r\n\t\t\tthis.$openBtn.on('click.typeahead.api',function(e){\r\n\t\t\t\ttypeahead.$text.focus();\r\n\t\t\t});\r\n\t\t\tthis.$text.on('change.typeahead.api',function(){\r\n\t\t\t\ttypeahead.setValue(this.value);\r\n\t\t\t});\r\n\t\t\tthis._liveItemClickEvent();\r\n\t\t},\r\n\t\t/**\r\n\t\t * 绑定点击事件\r\n\t\t */\r\n\t\t_liveItemClickEvent: function(){\r\n\t\t\tvar typeahead = this;\r\n\t\t\t/**\r\n\t\t\t * Li选择项点击事件\r\n\t\t\t * 1、如果存在自定义点击前事件，先执行该事件，如果不返回true则结束选择，否则执行2\r\n\t\t\t * 2、单选则设值当前选择项为值，并关闭下拉框；多选则追加当前选择项为值\r\n\t\t\t * 3、如果存在自定义点击后事件，则执行该事件\r\n\t\t\t */\r\n\t\t\tthis.$list.on('click.typeahead.api', 'li', function(){\r\n\t\t\t\tvar $this = $(this);\r\n\t\t\t\ttypeahead.setValue($this.text());\r\n\t\t\t\ttypeahead.hidePanel();\r\n\t\t\t\ttypeahead.$text.focus();\r\n\t\t\t});\r\n\t\t},\r\n\t\t/**\r\n\t\t * 按键事件\r\n\t\t * 1、联想\r\n\t\t * 2、导航\r\n\t\t */\r\n\t\t_keyManager: function(e){\r\n\t\t\tif(this._dealSysKey(e)){\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tif(this._mainDivIsVisiable()){\r\n\t\t\t\tkeyForVisiblePanel.call(this, e);\r\n\t\t\t}else{\r\n\t\t\t\tkeyForHiddenPanel.call(this, e);\r\n\t\t\t}\r\n\t\t},\r\n\t\t/**\r\n\t\t * 根据输入内容进行延迟联想\r\n\t\t */\r\n\t\tsuggest: function(){\r\n\t\t\tvar typeahead = this;\r\n\t\t\t//保持延迟时间内只触发一次联想操作\r\n\t\t\tclearTimeout(typeahead.timeout);\r\n\t\t\ttypeahead.timeout = \r\n\t\t\t\tsetTimeout(function(){\r\n\t\t\t\t\ttypeahead._suggestFunc();\r\n\t\t\t\t},typeahead.setting.lazy);\r\n\t\t},\r\n\t\t/**\r\n\t\t * 根据输入框的文本进行联想\r\n\t\t * 1、保持联想面板打开状态\r\n\t\t */\r\n\t\t_suggestFunc: function(){\r\n\t\t\t//如果联想面板不是打开状态，则打开渲染。否则只进行联想\r\n\t\t\tif(!this._mainDivIsVisiable()){\r\n\t\t\t\tthis.showPanel();\r\n\t\t\t}\r\n\t\t\tif(this._preventSuggest()){\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tif(this.setting.remote){\r\n\t\t\t\tthis._suggestByRemote();\r\n\t\t\t}else{\r\n\t\t\t\tthis._suggestByLocal();\r\n\t\t\t}\r\n\t\t},\r\n\t\t/**\r\n\t\t * 阻止联想事件\r\n\t\t * 1、当联想的关键字为空\r\n\t\t * 2、当联想的关键字与上次联想的相同\r\n\t\t * 3、当上次联想为空 且这次的关键字以上次的关键字开头\r\n\t\t * @returns true 进行阻止\r\n\t\t */\r\n\t\t_preventSuggest: function(){\r\n\t\t\tvar key = this.getText();\r\n\t\t\tif(!$.trim(key)){\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\t\t\tif(!this.prevKey){\r\n\t\t\t\t\r\n\t\t\t}else if(this.prevKey == key){\r\n\t\t\t\treturn true;\r\n\t\t\t}else if((this.suggestItems == undefined || this.suggestItems.length == 0)\r\n\t\t\t\t\t&& key.length >= this.prevKey.length\r\n\t\t\t\t\t&& key.indexOf(this.prevKey) == 0){\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\t\t\tthis.prevKey = key;\r\n\t\t\treturn false;\r\n\t\t},\r\n\t\t/**\r\n\t\t * 根据本地数据源进行匹配\r\n\t\t */\r\n\t\t_suggestByLocal: function(){\r\n\t\t\tthis._initDataByParameter();\r\n\t\t\tif(this.setting.data != undefined){\r\n\t\t\t\tthis._setSuggestItemsByNameLazy();\r\n\t\t\t\tthis._renderSuggestItem();\r\n\t\t\t\tthis.showPanel();\r\n\t\t\t}else{\r\n\t\t\t\tvar url = this.setting.suggest\r\n\t\t\t\t\t,typeahead = this;\r\n\t\t\t\tif(url){\r\n\t\t\t\t\tAppAjax.ajaxCall({\r\n\t\t\t\t\t\turl: url,\r\n\t\t\t\t\t\tdata: this.getParameter(),\r\n\t\t\t\t\t\tdataType: 'json',\r\n\t\t\t\t\t\ttype: 'POST',\r\n\t\t\t\t\t\tsuccess: function(data){\r\n\t\t\t\t\t\t\ttypeahead.setting.data = data;\r\n\t\t\t\t\t\t\ttypeahead._suggestByLocal();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\t\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\t/**\r\n\t\t * 根据查询参数重置预输入的数据源\r\n\t\t */\r\n\t\t_initDataByParameter: function(){\r\n\t\t\tvar currParam = this.getParameter();\r\n\t\t\tif(currParam){\r\n\t\t\t\tif(this.lastParam != currParam){\r\n\t\t\t\t\tthis.setting.data = undefined;\r\n\t\t\t\t}\r\n\t\t\t\tthis.lastParam = currParam;\r\n\t\t\t}\r\n\t\t},\r\n\t\t/**\r\n\t\t * 根据远程设置地址进行联想\r\n\t\t */\r\n\t\t_suggestByRemote: function(){\r\n\t\t\tvar url = this.setting.suggest\r\n\t\t\t\t,typeahead = this;\r\n\t\t\tif(url){\r\n\t\t\t\tif(url.indexOf('?') != -1){\r\n\t\t\t\t\turl += '&_key=' + this.getText();\r\n\t\t\t\t}else{\r\n\t\t\t\t\turl += '?_key=' + this.getText();\r\n\t\t\t\t}\r\n\t\t\t\tAppAjax.ajaxCall({\r\n\t\t\t\t\turl: url,\r\n\t\t\t\t\tdata: this.getParameter(),\r\n\t\t\t\t\tdataType: 'json',\r\n\t\t\t\t\ttype: 'POST',\r\n\t\t\t\t\tsuccess: function(data){\r\n\t\t\t\t\t\ttypeahead.suggestItems = data;\r\n\t\t\t\t\t\ttypeahead._renderSuggestItem();\r\n\t\t\t\t\t}\r\n\t\t\t\t});\t\r\n\t\t\t}\r\n\t\t},\r\n\t\t/**\r\n\t\t * 根据数据源按照key模糊匹配节点，并设置联想项\r\n\t\t * @param data 节点数据源数组\r\n\t\t * @param key 匹配关键字\r\n\t\t */\r\n\t\t_setSuggestItemsByNameLazy: function(){\r\n\t\t\tvar data = this.setting.data\r\n\t\t\t\t,key = this.getText()\r\n\t\t\t\t,result = [];\r\n\t\t\tfor(var i = 0; i<data.length; i++){\r\n\t\t\t\tvar text = data[i];\r\n\t\t\t\tif(text.indexOf(key) != -1)\r\n\t\t\t\t\tresult.push(text);\r\n\t\t\t}\r\n\t\t\tthis.suggestItems = result;\r\n\t\t},\r\n\t\t/**\r\n\t\t * 渲染联想项列表\r\n\t\t */\r\n\t\t_renderSuggestItem: function(){\r\n\t\t\tvar data = this.suggestItems\r\n\t\t\t\t,key = this.getText()\r\n\t\t\t\t,items = [];\r\n\t\t\tthis.$list.html('');\r\n\t\t\tif(!data) return;\r\n\t\t\tfor ( var i = 0; i < data.length; i++) {\r\n\t\t\t\titems.push(this._createSuggestItems(i, data[i], key));\r\n\t\t\t}\r\n\t\t\tthis.$list.append(items);\r\n\t\t\t\r\n\t\t},\r\n\t\t/**\r\n\t\t * 追加联想项\r\n\t\t * @param index 当前联想项的index\r\n\t\t * @param item 联想数据\r\n\t\t */\r\n\t\t_createSuggestItems: function(i, text, key){\r\n\t\t\tvar $suggestItem = $('<li ' + (i%2 == 1 ? 'class=\"li-odd\"' : '') +\r\n\t\t\t\t\t'><i class=\"icon-ok\"></i>' + \r\n\t\t\t\t\tthis._getName(text, key) + '</li>');\r\n\t\t\treturn $suggestItem;\r\n\t\t},\r\n\t\t/**\r\n\t\t * 获取显示名称\r\n\t\t * @param name\r\n\t\t * @param key\r\n\t\t * @returns {String}\r\n\t\t */\r\n\t\t_getName: function(name, key){\r\n\t\t\tif(key == ''){\r\n\t\t\t\treturn name;\r\n\t\t\t}\r\n\t\t\tvar index = name.indexOf(key);\r\n\t\t\tif(index == -1){\r\n\t\t\t\treturn name;\r\n\t\t\t}\r\n\t\t\tvar keyLen = key.length;\r\n\t\t\treturn name.substring(0,index) +\r\n\t\t\t\t'<em>'+key+'</em>' +\r\n\t\t\t\tname.substring(keyLen + index);\r\n\t\t},\r\n\t\t/**\r\n\t\t * 显示当前对象的联想面板\r\n\t\t * 1、关闭其他可见的联想面板\r\n\t\t * 2、根据隐藏值进行渲染选择项\r\n\t\t * 3、开启点击html关闭该面板的操作\r\n\t\t */\r\n\t\tshowPanel: function(){\r\n\t\t\tthis._showPanel();\r\n\t\t},\r\n\t\t/**\r\n\t\t * 载入联想数据源\r\n\t\t * @param {Array} data 联想的数据源\r\n\t\t * @todo 根据数据渲染下拉面板的内容\r\n\t\t * @todo 设置联想为本地联想\r\n\t\t * @example $('#demo').typeahead('loadData',['选项1','选项2','选项3']);\r\n\t\t * @memberof typeahead-class\r\n\t\t * @instance\r\n\t\t */\r\n\t\tloadData: function(data){\r\n\t\t\tthis.setting.data = data;\r\n\t\t\tthis.setting.remote = false; \r\n\t\t},\r\n\t\t/**\r\n\t\t * 根据url载入数据源作为联想的数据源\r\n\t\t * @param {url} url 要加载的url\r\n\t\t * @todo 根据数据渲染下拉面板的内容\r\n\t\t * @todo 设置联想为本地联想\r\n\t\t * @example $('#demo').typeahead('reload','a.do');\r\n\t\t * @memberof typeahead-class\r\n\t\t * @instance\r\n\t\t */\r\n\t\treload: function(url){\r\n\t\t\tif(url){\r\n\t\t\t\tvar suggest = this;\r\n\t\t\t\tAppAjax.ajaxCall({\r\n\t\t\t\t\turl: url,\r\n\t\t\t\t\tdata: this.getParameter(),\r\n\t\t\t\t\tdataType: 'json',\r\n\t\t\t\t\ttype: 'POST',\r\n\t\t\t\t\tsuccess: function(data){\r\n\t\t\t\t\t\tsuggest.data = data;\r\n\t\t\t\t\t}\r\n\t\t\t\t});\t\r\n\t\t\t}\r\n\t\t},\r\n\t\t/**\r\n\t\t * <span class=\"type-signature static\">override</span>\r\n\t\t * 设置隐藏值，尝试设置显示值\r\n\t\t * @param {String} val 隐藏值\r\n\t\t * @see typeahead#setValue\r\n\t\t * @todo 当隐藏值为空时，显示值也为空\r\n\t\t * @example $('#demo').typeahead('setValue','val');\r\n\t\t * @memberof typeahead-class\r\n\t\t * @instance\r\n\t\t */\r\n\t\tsetValue: function(val, noTrigger){\r\n\t\t\tthis.setText(val);\r\n\t\t\tthis._setValue(val, noTrigger);\r\n\t\t}\r\n\t});\r\n\t$.fn.typeahead = function (option, value) {\r\n\t\tvar methodReturn = undefined\r\n\t\t\t,args = arguments\r\n\t\t\t,componentName = 'typeahead';\r\n\t\tthis.each(function () {\r\n\t\t\tvar $this = $(this);\r\n\t\t\tif(!$this.is('input')){\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\t\t\tvar component = App.getComponent($this, componentName);\r\n\t\t\tif(typeof option === 'string'){\r\n\t\t\t\ttry{\r\n\t\t\t\t\tvar methodArgs = Array.prototype.slice.call(args, 1);\r\n\t\t\t\t\tmethodReturn = App.componentMethodApply(component, option, methodArgs);\r\n\t\t\t\t}catch(e){\r\n\t\t\t\t\tApp.throwCompMethodError($this, componentName, option, e);\r\n\t\t\t\t}\r\n\t\t\t}else{\r\n\t\t\t\tif(!component){\r\n\t\t\t\t\tcomponent = new Typeahead(this, option);\r\n\t\t\t\t\t$this.data(componentName, component);\r\n\t\t\t\t}else{\r\n\t\t\t\t\tApp.throwCompInitError($this, componentName);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\t\treturn methodReturn;\r\n\t};\r\n\t/**\r\n\t * 面板可见状态下的按键事件处理\r\n\t */\r\n\tfunction keyForVisiblePanel(e){\r\n\t\tvar keyCode = e.keyCode\r\n\t\t\t,s = this.setting;\r\n\t\te.stopPropagation();\r\n\t\tif(App.containKeyCode(e, s.keyNextNode)){\r\n\t\t\tkeyNextNode.call(this, e);\r\n\t\t}else if(App.containKeyCode(e, s.keyPrevNode)){\r\n\t\t\tkeyPrevNode.call(this, e);\r\n\t\t}else if(App.containKeyCode(e, s.keyPickNode)){\r\n\t\t\tkeyPickNode.call(this, e);\r\n\t\t}else if(App.containKeyCode(e, s.keyHidePanel)){\r\n\t\t\tthis._keyHidePanel(e);\r\n\t\t}else if(this._keyFilterSuggest(e)){\r\n\t\t\tthis.suggest();\r\n\t\t}\r\n\t}\r\n\t/**\r\n\t * 面板不可见状态下的按键事件处理\r\n\t */\r\n\tfunction keyForHiddenPanel(e){\r\n\t\tvar keyCode = e.keyCode;\r\n\t\tif(this._isKeyCursorPos(keyCode)){\r\n\t\t\tthis._keyCursorPos(e);\r\n\t\t}else if(this._keyFilterSuggest(e)){\r\n\t\t\tthis.suggest();\r\n\t\t}\r\n\t}\r\n\t/**\r\n\t * 上一个节点\r\n\t */\r\n\tfunction keyPrevNode(e){\r\n\t\tvar $l = this.$list;\r\n\t\tif($l.find('>li').length == 0){\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tvar $c = $l.find('.current')\r\n\t\t\t,$n = $c.prev();\r\n\t\tif($n.length == 0){\r\n\t\t\t$n = $l.find('li:last-child');\r\n\t\t}\r\n\t\tthis.setValue($n.text());\r\n\t\t$c.removeClass('current');\r\n\t\t$n.addClass('current');\r\n\t}\r\n\t/**\r\n\t * 下一个节点\r\n\t */\r\n\tfunction keyNextNode(e){\r\n\t\tvar $l = this.$list;\r\n\t\tif($l.find('>li').length == 0){\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tvar $c = $l.find('.current')\r\n\t\t\t,$n = $c.next();\r\n\t\tif($n.length == 0){\r\n\t\t\t$n = $l.find('li:first-child');\r\n\t\t}\r\n\t\tthis.setValue($n.text());\r\n\t\t$c.removeClass('current');\r\n\t\t$n.addClass('current');\r\n\t}\r\n\t/**\r\n\t * 选中节点\r\n\t */\r\n\tfunction keyPickNode(e){\r\n\t\tvar $c = this.$dropPanel.find('.current');\r\n\t\tif($c.length == 0){\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tthis.setValue($c.text());\r\n\t\tthis.hidePanel();\r\n\t\te.stopPropagation();\r\n\t}\r\n\treturn Typeahead;\r\n});\n",
    "/**\r\n * 上传控件\r\n * @author Mr.T\r\n */\r\ndefine('app/widgets/form/app-upload',['app/core/app-base', 'app/core/app-jquery', 'app/core/app-core', 'app/core/app-options', 'app/widgets/app-progressbar',\r\n        'app/data/app-ajax', 'app/util/app-utils', 'jquery/jquery.upload'],\r\n        function(Base, $, App, Options, ProgressBar, AppAjax, Utils) {\r\n\t\r\n\t'use strict';\r\n\t/**\r\n\t * @class \r\n\t * @classdesc 上传组件，该组件上传的文件会加入一个groupId，代表该文件所属的组\r\n\t * \t\t文件上传完成会返回fileId，前台可以通过fileId删除该文件\r\n\t * @name upload-class\r\n\t * @desc 上传组件的初始化方法\r\n\t * @param {input} input 要渲染的input组件\r\n\t * @param {object} options 组件的选项设置 \r\n\t * @author Mr.T\r\n\t * @example $('#demo').upload({\r\n\t * &#9;groupId: 'testGroupId2',\r\n\t * &#9;progress: true,\r\n\t * &#9;toolbarPosition: 'bottom',\r\n\t * &#9;style: 'border:1px solid green;border-radius: 4px;top:260px;left: 0px;',\r\n\t * &#9;css: 'uploadDemoClass',\r\n\t * &#9;fileWidth:'200px',\r\n\t * &#9;requestFile: true\r\n\t * });\r\n\t */\r\n\tvar Upload = Base.extend({\r\n\t\tinitialize: function (input, options) {\r\n\t\t\tthis.$input = $(input);\r\n\t\t\tthis.options = options;\r\n\t\t\tthis._init();\r\n\t\t\tthis._eventRegister();\r\n\t\t},\r\n\t\t/**\r\n\t\t * 初始化\r\n\t\t * @param options\r\n\t\t */\r\n\t\t_init: function(){\r\n\t\t\tthis._initOptions();\r\n\t\t\tthis.$input.css('display','none');\r\n\t\t\tthis._initHTML();\r\n\t\t\tif(this.setting.requestFile){\r\n\t\t\t\tthis.initLoadedFile(this.setting.fileUrl);\r\n\t\t\t}\r\n\t\t\tvar upload = this;\r\n\t\t\tthis.$element.on('click', '.file-item .file-icon', function(e){\r\n\t\t\t\tif(upload.setting.selectable){\r\n\t\t\t\t\t$(this).parent().toggleClass('selected');\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\tif($.isFunction(upload.setting.createDownloadUrl)){\r\n\t\t\t\tthis.$element.on('click', '.file-name', function(e){\r\n\t\t\t\t\tvar fileId = $(this).closest('.file-item').attr('fileId');\r\n\t\t\t\t\tvar url = upload.setting.createDownloadUrl(fileId);\r\n\t\t\t\t\tdownload(url, {});\r\n\t\t\t\t});\r\n\t\t\t}else{\r\n\t\t\t\tthis.$element.addClass('un-download');\r\n\t\t\t}\r\n\t\t\tfunction download(url,params,_blank){\r\n\t\t\t\tvar $form = $(\"<form style=\\\"display:none;\\\"></form>\").attr(\"action\",url).attr(\"method\",\"post\");\r\n\t\t\t\tif(_blank){\r\n\t\t\t\t\t$form.attr(\"target\",\"_blank\");\r\n\t\t\t\t}\r\n\t\t\t\tfor(var key in params){\r\n\t\t\t\t\t$(\"<input type=\\\"hidden\\\" />\").attr(\"name\",key).val(params[key]).appendTo($form);\r\n\t\t\t\t}\r\n\t\t\t\t$(\"body\").append($form);\r\n\t\t\t\t$form.submit();\r\n\t\t\t\t$form.remove();\r\n\t\t\t}\r\n\t\t},\r\n\t\t/**\r\n\t\t * 初始化配置\r\n\t\t */\r\n\t\t_initOptions: function(){\r\n\t\t\tvar customSetting = $.extend(App.getAttrFromElement(this.$input), this.options);\r\n\t\t\tif($.isFunction(customSetting.beforeRender)){\r\n\t\t\t\tcustomSetting.beforeRender.call(this, customSetting);\r\n\t\t\t}\r\n\t\t\tthis.setting = $.extend({}, Options.appDefaults.upload, customSetting);\r\n\t\t\tif(this.setting.exts){\r\n\t\t\t\tvar exts = this.setting.exts.toLowerCase();\r\n\t\t\t\tthis._exts = exts.split(',');\r\n\t\t\t}\r\n\t\t\t//初始化回调事件\r\n\t\t\tvar callback = {}; \r\n\t\t\tvar events = this.setting.events;\r\n\t\t\tif(events){\r\n\t\t\t\tif(typeof(events) == 'string'){\r\n\t\t\t\t\tcallback = this.$input.getJsEvent(events);\r\n\t\t\t\t}else{\r\n\t\t\t\t\tcallback = events;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tthis.callback = callback;\r\n\t\t\tif(this.setting.groupId){\r\n\t\t\t\tthis.groupId = this.setting.groupId; \r\n\t\t\t}else{\r\n\t\t\t\tthis.groupId = 'g-'+ new Date().getTime(); \r\n\t\t\t}\r\n\t\t},\r\n\t\t/**\r\n\t\t * 事件注册器\r\n\t\t */\r\n\t\t_eventRegister: function(){\r\n\t\t\tvar s = this.setting;\r\n\t\t\tif($.isFunction(s.afterDelete)){\r\n\t\t\t\tthis.on('afterDelete', s.afterDelete);\r\n\t\t\t}\r\n\t\t\tif($.isFunction(s.startUpload)){\r\n\t\t\t\tthis.on('startUpload', s.startUpload);\r\n\t\t\t}\r\n\t\t\tif($.isFunction(s.uploadError)){\r\n\t\t\t\tthis.on('uploadError', s.uploadError);\r\n\t\t\t}\r\n\t\t\tif($.isFunction(s.uploadSuccess)){\r\n\t\t\t\tthis.on('uploadSuccess', s.uploadSuccess);\r\n\t\t\t}\r\n\t\t},\r\n\t\t/**\r\n\t\t * 初始化HTML\r\n\t\t */\r\n\t\t_initHTML: function(){\r\n\t\t\tvar s = this.setting;\r\n\t\t\tthis.$element = \r\n\t\t\t$('<div class=\"app-upload empty ' +s.css + '\" ' + ( s.style ? 'style=\"' + s.style + '\"' : '' ) + '>' +\r\n\t\t\t\t'<div class=\"content\">' +\r\n\t\t\t\t\t'<div class=\"upload-btn\">' +\r\n\t\t\t\t\t\t'<div class=\"file-icon icon-upload\"></div>' +\r\n\t\t\t\t\t'</div>' +\r\n\t\t\t\t'</div>' +\r\n\t\t\t\t'<input class=\"upload-progress\"></input>' +\r\n\t\t\t\t'<div class=\"upload-mask\"></div>' +\r\n\t\t\t'</div>').insertAfter(this.$input);\r\n\t\t\tthis.$uploadItem = this.$element.find('.upload-btn');\r\n\t\t\tthis.$uploadBtn = this.$element.find('.upload-btn .icon-upload');\r\n\t\t\tthis.$fileList = this.$element.find('.content');\r\n\t\t\tthis.progressbar = new ProgressBar(this.$element.find('.upload-progress'), {width: '70%', height:'20px'});\r\n\t\t\tthis.$mask = this.$element.find('.upload-mask');\r\n\t\t\tthis.$input.appendTo(this.$element);\r\n\t\t\tthis.$input.removeClass('app-upload');\r\n\t\t\tthis.$element.data('upload', this);\r\n\t\t\tthis._new$File();\r\n\t\t},\r\n\t\t/**\r\n\t\t * 初始化已上传文件的列表，请求文件列表时会传入groupId\r\n\t\t * @param {Url} url 根据url进行加载文件\r\n\t\t * @example $('#demo').upload('initLoadedFile', 'fileList.do');\r\n\t\t * @memberof upload-class\r\n\t\t * @instance\r\n\t\t */\r\n\t\tinitLoadedFile: function(url){\r\n\t\t\tif(url){\r\n\t\t\t\tvar upload = this;\r\n\t\t\t\tAppAjax.ajaxCall({\r\n\t\t\t\t\turl: url,\r\n\t\t\t\t\tdataType: 'json',\r\n\t\t\t\t\tdata: {groupId: upload.groupId},\r\n\t\t\t\t\ttype: 'POST',\r\n\t\t\t\t\tsuccess: function(files){\r\n\t\t\t\t\t\tupload.appendHasLoadFile(files);\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t},\r\n\t\t/**\r\n\t\t * 清除删除前台展现的文件列表，不清除文件\r\n\t\t * @example $('#demo').upload('resetFileList');\r\n\t\t * @memberof upload-class\r\n\t\t * @instance\r\n\t\t */\r\n\t\tresetFileList: function(){\r\n\t\t\tthis.$fileList.html('');\r\n\t\t},\r\n\t\t/**\r\n\t\t * 载入新的已上传完成的文件\r\n\t\t * @param {Object|Array} files 文件列表\r\n\t\t * @param {String} files.name 文件名\r\n\t\t * @param {Number} [files.size] 字节数\r\n\t\t * @example $('#demo').upload('appendHasLoadFile', [{name:'file1',size:100},{name:'file2'}]);\r\n\t\t * @memberof upload-class\r\n\t\t * @instance\r\n\t\t */\r\n\t\tappendHasLoadFile: function(files){\r\n\t\t\tif(!$.isArray(files)){\r\n\t\t\t\tfiles = [files];\r\n\t\t\t}\r\n\t\t\tfor ( var i = files.length-1; i >= 0; i--) {\r\n\t\t\t\tvar file = files[i];\r\n\t\t\t\tfile.ext = getFileExt(file.name);\r\n\t\t\t\tthis._initFileElement(file).show();\r\n\t\t\t}\r\n\t\t\tthis.$element.scrollTop(this.$element[0].scrollHeight);\r\n\t\t},\r\n\t\t/**\r\n\t\t * 在选择文件按钮上加入一个新的文件选择组件\r\n\t\t */\r\n\t\t_new$File: function(){\r\n\t\t\tvar $fileInput = this.$fileInput = $('<input id=\"' + App.uuid('upload-') \r\n\t\t\t\t\t+ '\" type=\"file\" name=\"file\"/>')\r\n\t\t\t\t,upload = this;\r\n\t\t\tif(this.setting.extsApply){\r\n\t\t\t\t$fileInput.attr('accept', this.setting.exts);\r\n\t\t\t}\r\n\t\t\tthis.$uploadBtn.empty().append($fileInput);\r\n\t\t\t$fileInput.on('change.upload-append.api',function(){\r\n\t\t\t\tvar fileName = $(this).val().replace(/.*(\\/|\\\\)/, '')\r\n\t\t\t\t\t,ext = getFileExt(fileName);\r\n\t\t\t\tif(includeExt(ext, upload._exts)){\r\n\t\t\t\t\tvar $file = upload._initFileElement({name: fileName, ext: ext});\r\n\t\t\t\t\tupload._ajaxUpload($file);\r\n\t\t\t\t}else{\r\n\t\t\t\t\t$messager.warn('请上传扩展名为[' + upload.setting.exts + ']的文件');\r\n\t\t\t\t}\r\n\t\t\t\tupload._new$File();\r\n\t\t\t});\r\n\t\t\t$fileInput.on('click.upload-append.api',function(e){\r\n\t\t\t\tif(!upload.setting.promptMessage){\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tif(!upload.$fileInput.parent().hasClass('.upload-btn')){\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\te.stopPropagation();\r\n\t\t\t\te.preventDefault();\r\n\t\t\t\t$messager.confirm(upload.setting.promptMessage);\r\n\t\t\t\t$($('#_alertMsgBox .btn')[0]).css('position','relative').append(upload.$fileInput);\r\n\t\t\t\t$('#_alertMsgBox .btn').on('click', function(){\r\n\t\t\t\t\tupload.$uploadBtn.append(upload.$fileInput);\r\n\t\t\t\t});\r\n\t\t\t});\r\n\t\t},\r\n\t\t/**\r\n\t\t * 设置提示信息\r\n\t\t * @example $('#demo').upload('setPromptMessage', '是否继续上传？');\r\n\t\t * @memberof upload-class\r\n\t\t * @instance\r\n\t\t */\r\n\t\tsetPromptMessage: function(msg){\r\n\t\t\tthis.setting.promptMessage = msg;\r\n\t\t},\r\n\t\t/**\r\n\t\t * 获取提示信息\r\n\t\t * @return {String} msg \r\n\t\t * @example $('#demo').upload('getPromptMessage');\r\n\t\t * @memberof upload-class\r\n\t\t * @instance\r\n\t\t */\r\n\t\tgetPromptMessage: function(){\r\n\t\t\treturn this.setting.promptMessage;\r\n\t\t},\r\n\t\t/**\r\n\t\t * 生成界面的文件\r\n\t\t */\r\n\t\t_initFileElement: function(fileInfos){\r\n\t\t\tvar download = '';\r\n\t\t\tif(this.setting.createDownloadUrl){\r\n\t\t\t\tdownload = this.setting.createDownloadUrl(fileInfos);\r\n\t\t\t}else{\r\n\t\t\t\tdownload = 'javascript:void(0);';\r\n\t\t\t}\r\n\t\t\tvar $file = $('<div class=\"file-item\" title=\"' + fileInfos.name + '\">' +\r\n\t\t\t\t\t\t\t'<div ' + getFileIconCls(fileInfos.ext) + '></div>' +\r\n\t\t\t\t\t\t\tnameHtml(fileInfos.name) + \r\n\t\t\t\t\t\t\t'<div class=\"file-selected\"><i></i></div>' +\r\n\t\t\t\t\t\t\t'<div class=\"file-delete\"><i></i></div>' +\r\n\t\t\t\t\t\t'</div>');\r\n\t\t\tif(fileInfos.id){\r\n\t\t\t\t$file.attr('fileId', fileInfos.id);\r\n\t\t\t}\r\n\t\t\t$file.hide();\r\n\t\t\tthis.$uploadItem.after($file);\r\n\t\t\tthis._liveDelete($file);\r\n\t\t\tafterFileListChange.call(this);\r\n\t\t\treturn $file;\r\n\t\t},\r\n\t\t/**\r\n\t\t * 文件绑定删除事件\r\n\t\t */\r\n\t\t_liveDelete: function($file){\r\n\t\t\tif(this.setting.canDelete){\r\n\t\t\t\tvar upload = this;\r\n\t\t\t\t$file.find('.file-delete').on('click.upload.api',function(){\r\n\t\t\t\t\t$messager.confirm('是否确认删除？', {\r\n\t\t\t\t\t\tokCall: function(ok){\r\n\t\t\t\t\t\t\tupload._deleteFile($file);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t});\r\n\t\t\t}else{\r\n\t\t\t\t$file.addClass('un-delete');\r\n\t\t\t}\r\n\t\t},\r\n\t\t/**\r\n\t\t * 设置该组件上传的组文件id\r\n\t\t * @param {String} groupId 组文件id\r\n\t\t * @example $('#demo').upload('setGroupId','String');\r\n\t\t * @memberof upload-class\r\n\t\t * @instance\r\n\t\t */\r\n\t\tsetGroupId: function(groupId){\r\n\t\t\tif(groupId){\r\n\t\t\t\tthis.groupId = groupId;\r\n\t\t\t}\r\n\t\t},\r\n\t\t/**\r\n\t\t * 获取该组件上传的一组文件id\r\n\t\t * @return {String} groupId 组文件id\r\n\t\t * @example $('#demo').upload('getGroupId');\r\n\t\t * @memberof upload-class\r\n\t\t * @instance\r\n\t\t */\r\n\t\tgetGroupId: function(){\r\n\t\t\treturn this.groupId;\r\n\t\t},\r\n\t\t/**\r\n\t\t * 上传文件\r\n\t\t * @param $file\r\n\t\t */\r\n\t\t_ajaxUpload: function($file){\r\n\t\t\tvar upload = this\r\n\t\t\t\t,fileId = this.$fileInput.attr('id');\r\n\t\t\tthis.progressbar.setValue(0);\r\n\t\t\tthis.progressbar.active();\r\n\t\t\tthis.progressbar.$element.show();\r\n\t\t\tlocalProgress(this.progressbar);\r\n\t\t\tthis.$mask.show();\r\n\t\t\t/**\r\n\t\t\t * 开始上传事件\r\n\t\t\t * @event upload-class#startUpload\r\n\t\t\t */\r\n\t\t\tthis.trigger('startUpload');\r\n\t\t\t$.ajaxFileUpload({\r\n\t\t\t\turl: this.setting.uploadUrl,\r\n\t\t\t\tsecureuri: false,\r\n\t\t\t\tdataType: 'json',\r\n\t\t\t\tdata: {groupId: upload.groupId},\r\n\t\t\t\tfileElementId: fileId,\r\n\t\t\t\tsuccess: function(infos) {\r\n\t\t\t\t\tif(infos.errorMsg){\r\n\t\t\t\t\t\tupload._fileUploadError(infos, $file);\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tupload._onFileFinish(infos, $file);\r\n\t\t\t\t},\r\n\t\t\t\terror: function(obj) {\r\n\t\t\t\t\tupload._fileUploadError(obj, $file);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t},\r\n\t\t/**\r\n\t\t * 上传完成时触发的事件\r\n\t\t * @param $file\r\n\t\t * @param progressbar\r\n\t\t * @param infos\r\n\t\t */\r\n\t\t_onFileFinish: function(infos, $file){\r\n\t\t\t$file.attr('fileId', infos.id);\r\n\t\t\tclearInterval(this.progressbar.interval);\r\n\t\t\tthis.progressbar.setValue(100);\r\n\t\t\tthis.progressbar.unactive();\r\n\t\t\tvar upload = this;\r\n\t\t\tsetTimeout(function(){\r\n\t\t\t\tupload.progressbar.$element.hide(200);\r\n\t\t\t}, 300);\r\n\t\t\tthis.$mask.hide();\r\n\t\t\t$file.show(500, function(){\r\n\t\t\t\tupload.$element.scrollTop(upload.$element[0].scrollHeight);\r\n\t\t\t});\r\n\t\t\t/**\r\n\t\t\t * 上传完成事件\r\n\t\t\t * @param {Object} fileInfos 文件信息\r\n\t\t\t * @event upload-class#uploadSuccess\r\n\t\t\t */\r\n\t\t\tthis.trigger('uploadSuccess', infos);\r\n\t\t},\r\n\t\t/**\r\n\t\t * 上传失败\r\n\t\t */\r\n\t\t_fileUploadError: function(obj, $file){\r\n\t\t\t$file.remove();\r\n\t\t\tafterFileListChange.call(this);\r\n\t\t\tclearInterval(this.progressbar.interval);\r\n\t\t\tthis.progressbar.unactive();\r\n\t\t\tif(!this.setting.ignorUploadError){\r\n\t\t\t\tvar msg = '上传失败';\r\n\t\t\t\tif(obj.errorMsg){\r\n\t\t\t\t\tmsg += ':' + obj.errorMsg;\r\n\t\t\t\t}else if(obj.responseText){\r\n\t\t\t\t\tmsg += ':' + $(obj.responseText).find('h1').text();\r\n\t\t\t\t}\r\n\t\t\t\t$messager.warn(msg);\r\n\t\t\t}\r\n\t\t\tthis.progressbar.$element.hide();\r\n\t\t\tthis.$mask.hide();\r\n\t\t\t/**\r\n\t\t\t * 上传失败事件\r\n\t\t\t * @event upload-class#uploadError\r\n\t\t\t */\r\n\t\t\tthis.trigger('uploadError', obj);\r\n\t\t},\r\n\t\t/**\r\n\t\t * 删除文件\r\n\t\t * @param $file\r\n\t\t */\r\n\t\t_deleteFile: function($file){\r\n\t\t\tvar fileId = $file.attr('fileId')\r\n\t\t\t\t,upload = this;\r\n\t\t\tif(this.setting.deleteUrl && fileId){\r\n\t\t\t\tAppAjax.ajaxCall({\r\n\t\t\t\t\turl: this.setting.deleteUrl,\r\n\t\t\t\t\tdataType: 'json',\r\n\t\t\t\t\ttype: 'POST',\r\n\t\t\t\t\tdata: {fileId: fileId},\r\n\t\t\t\t\tsuccess: function(flag){\r\n\t\t\t\t\t\tif(flag){\r\n\t\t\t\t\t\t\t$file.remove();\r\n\t\t\t\t\t\t\tafterFileListChange.call(upload);\r\n\t\t\t\t\t\t\tupload.trigger('afterDelete');\r\n\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\t$messager.warn('文件无法完成删除！');\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t}else{\r\n\t\t\t\t$file.remove();\r\n\t\t\t\tafterFileListChange.call(this);\r\n\t\t\t\tthis.trigger('afterDelete');\r\n\t\t\t}\r\n\t\t},\r\n\t\t/**\r\n\t\t * 获取已上传文件列表\r\n\t\t * @return {Array} files 上传文件的列表\r\n\t\t * @example $('#demo').upload('getFileList');\r\n\t\t * @memberof upload-class\r\n\t\t * @instance\r\n\t\t */\r\n\t\tgetFileList: function(){\r\n\t\t\tvar $file = this.$fileList.find('.file-item')\r\n\t\t\t\t,files = [];\r\n\t\t\t$file.each(function(){\r\n\t\t\t\tvar file = {}\r\n\t\t\t\t\t,$file = $(this);\r\n\t\t\t\tfile.name = $file.attr('title');\r\n\t\t\t\tfile.id = $file.attr('fileid');\r\n\t\t\t\tfiles.push(file);\r\n\t\t\t});\r\n\t\t\treturn files;\r\n\t\t},\r\n\t\t/**\r\n\t\t * 获取勾选的文件列表\r\n\t\t * @return {Array} files 上传文件的列表\r\n\t\t * @example $('#demo').upload('getSelectedFiles');\r\n\t\t * @memberof upload-class\r\n\t\t * @instance\r\n\t\t */\r\n\t\tgetSelectedFiles: function(){\r\n\t\t\tvar $file = this.$fileList.find('.file-item.selected')\r\n\t\t\t\t,files = [];\r\n\t\t\t$file.each(function(){\r\n\t\t\t\tvar file = {}\r\n\t\t\t\t\t,$file = $(this);\r\n\t\t\t\tfile.name = $file.attr('title');\r\n\t\t\t\tfile.id = $file.attr('fileid');\r\n\t\t\t\tfiles.push(file);\r\n\t\t\t});\r\n\t\t\treturn files;\r\n\t\t},\r\n\t\t/**\r\n\t\t * 禁用上传组件\r\n\t\t * @example $('#demo').upload('disableUpload');\r\n\t\t * @memberof upload-class\r\n\t\t * @instance\r\n\t\t */\r\n\t\tdisableUpload: function(){\r\n\t\t\tthis.readonly(true);\r\n\t\t},\r\n\t\t/**\r\n\t\t * 启用上传组件\r\n\t\t * @example $('#demo').upload('enableUpload');\r\n\t\t * @memberof upload-class\r\n\t\t * @instance\r\n\t\t */\r\n\t\tenableUpload: function(){\r\n\t\t\tthis.readonly(false);\r\n\t\t},\r\n\t\t/**\r\n\t\t * 切换只读状态\r\n\t\t * @example $('#demo').upload('readonly', false);\r\n\t\t * @memberof upload-class\r\n\t\t * @instance\r\n\t\t */\r\n\t\treadonly: function(readonly){\r\n\t\t\tif(readonly === false){\r\n\t\t\t\tthis.$element.removeClass('readonly');\r\n\t\t\t}else{\r\n\t\t\t\tthis.$element.addClass('readonly');\r\n\t\t\t}\r\n\t\t},\r\n\t\t/**\r\n\t\t * 销毁删除组件\r\n\t\t */\r\n\t\tdestroy: function(){\r\n\t\t\t\r\n\t\t}\r\n\t});\r\n\t\r\n\t$.fn.upload = function (option, value) {\r\n\t\tvar methodReturn = undefined;\r\n\t\tvar args = arguments;\r\n\t\tthis.each(function () {\r\n\t\t\tvar $this = $(this)\r\n\t\t\t\t,component = $this.data('upload');\r\n\t\t\tif(typeof option === 'string'){\r\n\t\t\t\ttry{\r\n\t\t\t\t\tvar methodArgs = Array.prototype.slice.call(args, 1);\r\n\t\t\t\t\tmethodReturn = App.componentMethodApply(component, option, methodArgs);\r\n\t\t\t\t}catch(e){\r\n\t\t\t\t\tvar id = $this.attr('id');\r\n\t\t\t\t\tif(!id){\r\n\t\t\t\t\t\tid = $this[0].outerHTML;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tthrow new Error('组件upload[' + id + ']调用' + option +'方法:' + e);\r\n\t\t\t\t}\r\n\t\t\t}else{\r\n\t\t\t\tif(!component){\r\n\t\t\t\t\tcomponent = new Upload(this, option);\r\n\t\t\t\t\t$this.data('upload', component);\r\n\t\t\t\t}else{\r\n\t\t\t\t\tvar id = $this.attr('id');\r\n\t\t\t\t\tif(!id){\r\n\t\t\t\t\t\tid = $this[0].outerHTML;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tthrow new Error('组件upload[' + id + ']无法重复初始化');\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\t\treturn methodReturn;\r\n\t};\r\n\r\n\t$.fn.upload.Constructor = Upload;\r\n\t/**\r\n\t * 上传文件列表数量变化后\r\n\t */\r\n\tfunction afterFileListChange(){\r\n\t\tvar listLen = this.getFileList().length;\r\n\t\tif(listLen > 0){\r\n\t\t\tthis.$element.removeClass('empty');\r\n\t\t}else{\r\n\t\t\tthis.$element.addClass('empty');\r\n\t\t}\r\n\t\tif(!this.setting.multiple){\r\n\t\t\tif(listLen > 0){\r\n\t\t\t\tthis.$element.addClass('un-upload');\r\n\t\t\t}else{\r\n\t\t\t\tthis.$element.removeClass('un-upload');\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\t/**\r\n\t * 对文件类型进行检查\r\n\t */\r\n\tfunction getFileExt(fileName){\r\n\t\treturn fileName.substring(fileName.lastIndexOf('.')+1,fileName.length);\r\n\t}\r\n\t/**\r\n\t * 根据文件扩展名获取文件类型图标样式\r\n\t * @param ext\r\n\t */\r\n\tfunction getFileIconCls(ext){\r\n\t\tvar result = 'file-icon'\r\n\t\t\t,ext = ext.toLowerCase()\r\n\t\t\t,icon = '';\r\n\t\tswitch (ext) {\r\n\t\tcase 'txt':\r\n\t\t\ticon = 'icon-txt';\r\n\t\t\tbreak;\r\n\t\tcase 'rar':\r\n\t\t\ticon = 'icon-rar';\r\n\t\t\tbreak;\r\n\t\tcase 'zip':\r\n\t\t\ticon = 'icon-zip';\r\n\t\t\tbreak;\r\n\t\tcase 'doc':\r\n\t\tcase 'docx':\r\n\t\t\ticon = 'icon-word';\r\n\t\t\tbreak;\r\n\t\tcase 'ppt':\r\n\t\tcase 'pptx':\r\n\t\t\ticon = 'icon-ppt';\r\n\t\t\tbreak;\r\n\t\tcase 'xls':\r\n\t\tcase 'xlsx':\r\n\t\t\ticon = 'icon-excel';\r\n\t\t\tbreak;\r\n\t\tcase 'pdf':\r\n\t\t\ticon = 'icon-pdf';\r\n\t\t\tbreak;\r\n\t\tcase 'gif':\r\n\t\tcase 'png':\r\n\t\tcase 'jpg':\r\n\t\tcase 'jpeg':\r\n\t\tcase 'bmp':\r\n\t\t\ticon = 'icon-image';\r\n\t\t\tbreak;\r\n\t\tcase 'avi':\r\n\t\tcase 'rmvb':\r\n\t\tcase 'qmv':\r\n\t\tcase 'mkv':\r\n\t\tcase 'rm':\r\n\t\t\ticon = 'icon-video';\r\n\t\t\tbreak;\r\n\t\tdefault:\r\n\t\t\tbreak;\r\n\t\t}\r\n\t\treturn 'class=\"' + result + ' '+ icon +'\"';\r\n\t}\r\n\t/**\r\n\t * 名称分割\r\n\t */\r\n\tfunction nameHtml(fileName){\r\n\t\tvar namegbLen = fileName.gblen()\r\n\t\t\t,firstLen = 12;\r\n\t\tif(namegbLen <= firstLen){\r\n\t\t\treturn '<div class=\"file-name\" title=\"' + fileName + '\">' + fileName + '</div>'; \r\n\t\t}\r\n\t\tvar name1 = ''\r\n\t\t\t,name2 = ''\r\n\t\tif(namegbLen <= 20){\r\n\t\t\tname1 = cutstr(fileName, namegbLen - 12);\r\n\t\t\tname2 = fileName.replace(name1, '');\r\n\t\t}else{\r\n\t\t\tname1 = cutstr(fileName, firstLen);\r\n\t\t\tif(name1.gblen() == name1.length){\r\n\t\t\t\tname1 = name1.substr(0,11);\r\n\t\t\t}\r\n\t\t\tname2 = fileName.replace(name1, '');\r\n\t\t}\r\n\t\treturn ('<div class=\"file-name\" title=\"' + fileName + '\">' + name1 + '</div>'\r\n\t\t\t\t+ '<div class=\"file-name\" title=\"' + fileName + '\">' + name2 + '</div>'); \r\n\t}\r\n\t/**\r\n\t * 本地进度（假进度）\r\n\t * @param progressbar\r\n\t */\r\n\tfunction localProgress(progressbar){\r\n\t\tprogressbar.interval = setInterval(function(){\r\n\t\t\tif(progressbar.getPercent() < 50){\r\n\t\t\t\tprogressbar.setValue(progressbar.getValue() + Math.random()*2);\r\n\t\t\t}else if(progressbar.getPercent() < 80){\r\n\t\t\t\tprogressbar.setValue(progressbar.getValue() + Math.random());\r\n\t\t\t}else if(progressbar.getPercent() < 95){\r\n\t\t\t\tprogressbar.setValue(progressbar.getValue() + Math.random()*0.5);\r\n\t\t\t}else if(progressbar.getPercent() < 99){\r\n\t\t\t\tprogressbar.setValue(progressbar.getValue() + Math.random()*0.1);\r\n\t\t\t}else if(progressbar.getPercent() < 99.9){\r\n\t\t\t\tprogressbar.unactive();\r\n\t\t\t\tclearInterval(progressbar.interval);\r\n\t\t\t}\r\n\t\t},500);\r\n\t}\r\n\t/**\r\n\t * 对文件类型进行检查\r\n\t */\r\n\tfunction includeExt(ext, exts){\r\n\t\tvar result = false;\r\n\t\text = '.' + ext;\r\n\t\tif(exts){\r\n\t\t\tfor (var i = 0; i < exts.length; i++) {\r\n\t\t\t\tif(exts[i].toLowerCase() == ext.toLowerCase()){\r\n\t\t\t\t\tresult = true;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}else{\r\n\t\t\tresult = true;\r\n\t\t}\r\n\t\treturn result;\r\n\t}\r\n\t/**\r\n\t * 获取文字的字符串长度\r\n\t */\r\n\tfunction cutstr(str, len) {\r\n        var str_length = 0;\r\n        var str_len = str.length;\r\n        var result = new String();\r\n        for (var i = 0; i < str_len; i++) {\r\n            var a = str.charAt(i);\r\n            str_length++;\r\n            if (escape(a).length > 4) {\r\n                //中文字符的长度经编码之后大于4  \r\n                str_length++;\r\n            }\r\n            result = result.concat(a);\r\n            if (str_length >= len) {\r\n                return result;\r\n            }\r\n        }\r\n        //如果给定字符串小于指定长度，则返回源字符串；  \r\n        if (str_length < len) {\r\n            return str;\r\n        }\r\n    }\r\n\treturn Upload;\r\n});\n",
    "/**\r\n * 查询对象\r\n */\r\ndefine('app/widgets/form/app-xquery',[\"app/core/app-jquery\",\"app/widgets/window/app-dialog\",\"app/widgets/form/app-comp\"],function($) {\r\n\t\"use strict\";\r\n\t/**\r\n\t * 构造方法\r\n\t */\r\n\tvar QueryComp= function (element, options) {\r\n\t\tvar o = this\r\n\t\t,$el = o.$element = $A(element)\r\n\t\t,target = $el.attr(\"query-target\")\r\n\t\t,manual = $el.attr(\"manual\")==\"true\";\r\n\t\tthis.init=false;\r\n\t\tthis.displaymode=$el.attr(\"displaymode\");\r\n\t\to.$element.bind(\"_resize\",function(){\r\n\t\t\tif (o.oldElHeight){\r\n\t\t\t\tvar p=o.$element.parent();\r\n\t\t\t\tif (p&&p.attr(\"region\")){\r\n\t\t\t\tif (o.oldElHeight!=o.$element.height()){\r\n\t\t\t\t\to.oldElHeight=o.$element.height();\r\n\t\t\t\t\tp.panel(\"resize\",{height:o.oldHeight+o.$element.outerHeight()});\r\n\t\t\t\t\tp.parents(\"div.app-layout\").layout(\"resize\");\r\n\t\t\t\t};\r\n\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\t\tvar $target = $(target);\r\n\t\tif($target.length>0){\r\n\t\t\to.$target=$target;\r\n\t\t}else{\r\n\t\t\t$target = $A(\"#\"+target);\r\n\t\t\tif($target.length>0){\r\n\t\t\t\to.$target=$target;\r\n\t\t\t}else{\r\n\t\t\t\tvar dialogid=$A(\"[query-target]\").parents(\".dialog\").attr(\"id\");\r\n\t\t\t\tvar queryDom=$(\"[dialogid=\"+dialogid+\"]\");\r\n\t\t\t\tvar obj=queryDom.data(\"xquery\");\r\n\t\t\t\tif (obj){\r\n\t\t\t\t\to.$target=obj.$target;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t};\r\n\t\to.manual =manual;\r\n\t\to.hiddenCon={};\r\n\t\t\r\n\t};\r\n\t/**\r\n\t * 条件参数收集\r\n\t * @param ${object} options 查询组件范围\r\n\t * @return {object} 参数对象\r\n\t */\r\n\tfunction collectionCondition(o){\r\n\t\tvar params = [],$e=o.$element,con=o.hiddenCon;\r\n\t\tvar reqparams = {};\r\n\t\tif(con != null){\r\n\t\t\t$.each(con,function(key){\r\n\t\t\t\tif(con[key]){\r\n\t\t\t\t\tparams.push(param);\r\n\t\t\t\t};\r\n\t\t\t});\r\n\t\t}\r\n\t\t$(\"[field]\",$e).each(function(){\r\n\t\t\tvar $t = $(this), checkFields={}\r\n\t\t\t,v=$t.val();\r\n\t\t\tvar type=$t.attr(\"type\");\r\n\r\n\t\t\tif(v!=null && v!=\"\"){\r\n\t\t\t\tif( $t.attr(\"manual\")!=\"true\"){\r\n\t\t\t\t\tvar m=$t.attr(\"model\")\r\n\t\t\t\t\t,f=$t.attr(\"field\")\r\n\t\t\t\t\t,op=$t.attr(\"operator\")\r\n\t\t\t\t\t,p = m==null?f:m+\".\"+f\r\n\t\t\t\t\t,param={};\r\n\t\t\t\t\tparam[\"prop\"]=p;\r\n\t\t\t\t\tif(op)\r\n\t\t\t\t\t\tparam[\"op\"]=op;\r\n\t\t\t\t\tif (f){\r\n\t\t\t\t\tif (type==\"checkbox\"||type==\"radio\"){\r\n\t\t\t\t\t\tif (!checkFields[p]){\r\n\t\t\t\t\t\t\tcheckFields[p]=p;\r\n\t\t\t\t\t\t$(\"[field=\"+f+\"]:checkbox\",$e).each(function () {\r\n\t\t                   if (this.checked){\r\n\t\t                \t   if (!param[\"val\"]){\r\n\t\t                \t\t   param[\"val\"]=[];\r\n\t\t                \t   }\r\n\t\t                \t    param[\"val\"].push(v);\r\n\t\t                   }\r\n\t\t                \t});\r\n\t\t\t\t\t\t\t\tparam[\"val\"]=param[\"val\"].join(\",\");\r\n\t\t\t\t\t\t\t\tparams.push(param);\r\n\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\tparam[\"val\"]=v;\r\n\t\t\t\t\t\tparams.push(param);\r\n\r\n\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}else{\r\n\t\t\t\t\tvar f=$t.attr(\"field\");\r\n\t\t\t\t\tif (f){\r\n\t\t\t\t\tif (type==\"checkbox\"||type==\"radio\"){\r\n\t\t\t\t\t\tif (!checkFields[f]){\r\n\t\t\t\t\t\t\tcheckFields[f]=f;\r\n\t\t\t\t\t\t\treqparams[f]=[];\r\n\t\t\t\t\t\t\t$(\"[field=\"+f+\"]:checkbox\",$e).each(function () {\r\n\t\t\t\t                   if (this.checked){\r\n\t\t\t\t                \t   reqparams[f].push(v)\r\n\t\t\t\t                   }\r\n\t\t\t                });\r\n\t\t\t\t\t\t\treqparams[f]=reqparams[f].join(\",\");\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\treqparams[f] = v;\r\n\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\r\n\t\t});\r\n\t\treqparams[\"__xquery\"] = JSON.stringify(params);\r\n\t\treturn reqparams;\r\n\t};\r\n\t/**\r\n\t * 条件参数收集\r\n\t * @param ${object} 查询组件范围\r\n\t * @return {object} 参数对象\r\n\t */\r\n\tfunction collectionParams(o){\r\n\t\tvar $e=o.$element,params = $.extend({},o.hiddenCon);\r\n\t\tvar checkFields={};\r\n\t\t$(\"[field]\",$e).each(function(){\r\n\t\t\tvar $t = $(this)\r\n\t\t\t,v=$t.val();\r\n\t\t\tif(v!=null && v!=\"\"){\r\n\t\t\t\tvar f=$t.attr(\"field\");\r\n\t\t\t\tvar type=$t.attr(\"type\");\r\n\t\t\t\tif (f){\r\n\t\t\t\t\tif (type==\"checkbox\"||type==\"radio\"){\r\n\t\t\t\t\t\tif (!checkFields[f]){\r\n\t\t\t\t\t\t\tcheckFields[f]=f;\r\n\t\t\t\t\t\t\tparams[f]=[];\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif ($t[0].checked){\r\n\t\t\t\t\t\t\tparams[f].push(v);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\tparams[f]=v;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t}\r\n\t\t});\r\n\t\tfor(var key in checkFields){\r\n\t\t\tif (params[key]){\r\n\t\t\t\tparams[key]=params[key].join(\",\")\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn params;\r\n\t};\r\n\t/**\r\n\t * 原型定义\r\n\t */\r\n\tQueryComp.prototype = {\r\n\t\t/**\r\n\t\t * 快速查询\r\n\t\t */\r\n\t\tquickQuery:function(){\r\n\t\t\tvar b = true;\r\n\t\t\tvar validator = this.$element.getJsonAttr(\"quick_validator\");\r\n\t\t\tif($.isFunction(validator)){\r\n\t\t\t\tb = validator(this.$element);\r\n\t\t\t}\r\n\t\t\tif(!b){\r\n\t\t\t\treturn b;\r\n\t\t\t}\r\n\t\t\tvar param;\r\n\t\t\tif(this.manual){\r\n\t\t\t\tparam = collectionParams(this);\r\n\t\t\t}else{\r\n\t\t\t\tparam = collectionCondition(this);\r\n\t\t\t}\r\n\t\t\tif(this.$target.isGrid && this.$target.isGrid()){\r\n\t\t\t\tthis.$target.bsgrid(\"load\",param);\r\n\t\t\t}else if(this.$target.data(\"grid\")){\r\n\t\t\t\tthis.$target.grid(\"setParameter\",param);\r\n\t\t\t\tthis.$target.grid(\"load\");\r\n\t\t\t}\r\n\t\t\treturn b;\r\n\t\t},\r\n\t\tclearQuery:function(){\r\n\t\t\t\r\n\t\t\t\r\n\t\t\tthis.$element.find(\"input,textarea\").each(function(){\r\n\t\t\t\tif ($(this).attr(\"id\")!=null){\t\t\t\t\t\r\n\t\t\t\t\t$(this).clearCompValue()\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t\t\r\n\t\t},\r\n\t\tclose:function(){\r\n\t\t\t\r\n\t\t\tif (this.displaymode==\"float\"){\r\n\t\t\t\tthis.$element.hide();\r\n\t\t\t}else{\r\n\t\t\t\tfuncs.closeDialog();\r\n\t\t\t}\r\n\t\t},\r\n\t\t/**\r\n\t\t * 高级查询\r\n\t\t */\r\n\t\tadvQuery:function(){\r\n\t\t\tvar b = true;\r\n\t\t\tvar validator = this.$element.getJsonAttr(\"adv_validator\");\r\n\t\t\tif(validator){\r\n\t\t\t\tb = validator(this.$element);\r\n\t\t\t}\r\n\t\t\tif(!b){\r\n\t\t\t\treturn b;\r\n\t\t\t}\r\n\t\t\tvar param;\r\n\t\t\tif(this.manual){\r\n\t\t\t\tparam = collectionParams(this);\r\n\t\t\t}else{\r\n\t\t\t\tparam = collectionCondition(this);\r\n\t\t\t}\r\n\t\t\tif(this.$target.isGrid && this.$target.isGrid()){\r\n\t\t\t\tthis.$target.bsgrid(\"load\",param);\r\n\t\t\t}else if(this.$target.data(\"grid\")){\r\n\t\t\t\tthis.$target.grid(\"setParameter\",param);\r\n\t\t\t\tthis.$target.grid(\"load\");\r\n\t\t\t}\r\n\t\t\treturn b;\r\n\t\t},\r\n\t\tclear:function(){\r\n\t\t\t$(\"[field]\",$e).each(function(){\r\n\t\t\t\tvar $t = $(this);\r\n\t\t\t\t$t.val(\"\");\r\n\t\t\t});\r\n\t\t},\r\n\t\taddParameter:function(key,val,op){\r\n\t\t\tvar con = this.hiddenCon;\r\n\t\t\tif(val==null||val==\"\"){\r\n\t\t\t\tcon[key] = null;\r\n\t\t\t\tdelete con[key];\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tif(this.manual){\r\n\t\t\t\tcon[key]=v;\r\n\t\t\t}else{\r\n\t\t\t\tvar param = con[key];\r\n\t\t\t\tif(param == null){\r\n\t\t\t\t\tparam = {prop:key};\r\n\t\t\t\t\tcon[key]=param;\r\n\t\t\t\t}\r\n\t\t\t\tif(op)\r\n\t\t\t\t\tparam[\"op\"]=op;\r\n\t\t\t\tparam[\"val\"]=v;\r\n\t\t\t}\r\n\t\t},\r\n\t\topenQuery:function(){\r\n\t\t\tvar content = this.$element.attr(\"advance\");\r\n\t\t\t\r\n\t\t\tif (!content){\r\n\t\t\t\tvar id=\"#\"+this.$element.attr(\"id\")+\"_advance_content\";\r\n\t\t\t\tcontent=this.$element.find(id).val();\r\n\t\r\n\t\t\t}\r\n\t\t    var dlgId = this.$element.attr(\"dialogId\");\r\n\t\t    if(!dlgId){\r\n\t\t    \tdlgId = \"advquery\"+$A.nextId();\r\n\t\t    \tthis.$element.attr(\"dialogId\",dlgId);\r\n\t\t    }\r\n\t\t    var $dlg=$(\"#\"+dlgId);\r\n\t\t    if ($dlg.length>0){\r\n\t\t    \t\r\n\t\t    \tvar pagejsobj=$dlg.data(\"jsObject\");\r\n\t    \t    if (pagejsobj){\r\n\t    \t    \t$($dlg[0]).setAppJsObject(pagejsobj.param.split(\",\"),pagejsobj.objs);\r\n\t    \t    }\r\n\r\n\t\t\t\t$A.dialog.setCurrent($dlg);\r\n\t\t\t\t$dlg.show();\r\n\t\t\t\tif(pagejsobj){\r\n                    var pageobj=pagejsobj.objs[0];\r\n                    if(pageobj.listeners&&pageobj.listeners.onQueryPageLoad){\r\n                        pageobj.listeners.onQueryPageLoad();\r\n                    }\r\n                }\r\n\t\t\t\t$(\"#_dialogMask\").show();\r\n\t\t\t\treturn;\r\n\r\n\t\t    }\r\n\t\t    var showFn=function(dlg){\r\n\t\t    \tvar pagejsobj;\r\n\t\t    \tif ($A.getWorkSpace()){\r\n\t\t    \t\t\r\n\t\t    \t\tvar actionPage= $A.getWorkSpace().getActionPage()\r\n\t\t    \t\tpagejsobj=$(actionPage).getAppJsObject();\r\n\t\t    \t}\r\n\r\n\t\t\t    if (pagejsobj){\r\n\t\t\t    \t  dlg.data(\"jsObject\",pagejsobj);\r\n\t\t\t   \t\t $(dlg[0]).setAppJsObject(pagejsobj.param.split(\",\"),pagejsobj.objs);\r\n\t\t\t    }\r\n\t\t    };\r\n\t\t    \r\n\t\t    var $content = $(content);\r\n\t\t   //.css(\"display\",\"block\");\r\n\t\t   $content.children().css(\"visibility\", \"hidden\");\r\n\r\n\t\t    var $dlg=$.openModalDialog({beforShow:showFn,afterShow:showFn,afterClose:function(dlg){\r\n\t\t    \t $(dlg[0]).clearAppJsObject();\r\n\t\t    } ,url:$content,title:\"高级查询\",dialogId:dlgId,reload:false,mode:\"node\",onPageLoad:function(){\r\n\t\t    \tvar pagejsobj;\r\n\t\t   \t$content.children().css(\"visibility\", \"\");\r\n\t\t    \tif ($A.getWorkSpace()){\r\n\t\t    \t\tvar actionPage= $A.getWorkSpace().getActionPage()\r\n\t\t    \t\tpagejsobj=$(actionPage).getAppJsObject();\r\n\t\t    \t}\r\n\t\t    \t\r\n\t\t    \t   if (pagejsobj&&pagejsobj.objs){\r\n\t\t    \t   \t\tvar pageobj=pagejsobj.objs[0];\r\n\t\t    \t   \t\tif (pageobj.bindEvents){\r\n\t\t    \t   \t\t\tpageobj.bindEvents();\r\n\t\t    \t   \t\t}\r\n                       if(pageobj.listeners&&pageobj.listeners.onQueryPageLoad){\r\n                           pageobj.listeners.onQueryPageLoad();\r\n                       }\r\n\t\t    \t   }\r\n\t\t    \t  \r\n\t\t    }});\r\n\r\n\t\t    \r\n\t\t    return $dlg;\r\n\t\t},hide : function() {\r\n\t\t\tif (this.displaymode==\"float\"){\r\n\t\t\t\tthis.$element.hide();\r\n\t\t\t}else{\r\n\t\t\tif (this.$element){\r\n\t\t\t\tthis.$element[0].style.display='none';\r\n\t\t\t\tvar p=this.$element.parent();\r\n\t\t\t\t\r\n\t\t\t\tif (p){\r\n\t\t\t\t\tvar options=p.panel(\"options\")\r\n\t\t\t\t\tif (options.region){\r\n\t\t\t\t\t\tp.panel(\"resize\",{height:this.oldHeight});\r\n\t\t\t\t\t\tp.parents(\"div.app-layout\").layout(\"resize\");\r\n\t\t\t\t\t}\r\n\t\t\t\t\t//p.parent().layout(\"resize\");\r\n\t\t\t\t};\r\n\t\t\t}\r\n\t\t\t}\r\n\t\t},show : function(e) {\r\n\t\t\t\r\n\t\t\tif (this.displaymode==\"float\"){\r\n\t\t\t\tif (e){\r\n\t\t\t\tif (this.init==false){\r\n\t\t\t\t\t$A.getContainer().append(this.$element);\r\n\t\t\t\t\tvar quicksContentId=\"#\"+this.$element.attr(\"id\")+\"_quicks_content\"\r\n\t\t\t\t\t,advancesContentId=\"#\"+this.$element.attr(\"id\")+\"_advances_content\"\r\n\t\t\t\t\t,quicksContent=this.$element.find(quicksContentId).val()\r\n\t\t\t\t\t,advancesContent=this.$element.find(advancesContentId).val()\r\n\t\t\t\t\t,$quicksItems=this.$element.find(\".xquery-quicks-items .xquery-content\")\r\n\t\t\t\t\t,$advanceItems=this.$element.find(\".xquery-advance-items .xquery-content\");\r\n\t\t\t\t\t//$quicksItems.html(quicksContent);\r\n\t\t\t\t\t//$advanceItems.html(advancesContent);\r\n\t\t\t\t\tvar $xquerybox=$(e.currentTarget).parents(\".app-xquerybox\");\r\n\t\t\t\t\tvar pos=$xquerybox.offset();\r\n\t\t\t\t\tpos.top=pos.top+$xquerybox.outerHeight()+1;\r\n\t\t\t\t\tthis.$element.css({top:pos.top+\"px\"});\r\n\t\t\t\t\tthis.$element.find(\".arrow\").on(\"click\",function(){\r\n\t\t\t\t\t  var $this=$A(this);\r\n\t\t\t\t\t  var $advanceItems= $this.parents(\".xquery-advance-items\");\r\n\t\t\t\t\t   var $quicksItems= $this.parents(\".xquery-quicks-items\");\r\n\t\t\t\t\t   var indexDom=$advanceItems.length>0?$advanceItems:$quicksItems;\r\n\t\t\t\t\t  if ($this.hasClass(\"arrow-up\")){\r\n\t\t\t\t\t\t  $this.removeClass(\"arrow-up\").addClass(\"arrow-down\");\r\n\t\t\t\t\t\t  indexDom.find(\".xquery-content\").hide()\r\n\t\t\t\t\t  }else{\r\n\t\t\t\t\t\t  $this.removeClass(\"arrow-down\").addClass(\"arrow-up\")\r\n\t\t\t\t\t\t   indexDom.find(\".xquery-content\").show()\r\n\t\t\t\t\t  }\r\n\t\t\t\t\t  \r\n\t\t\t\t\t});\r\n\t\t\t\t\tvar _self=this;\r\n\t\t\t\t\t\r\n\t\t\t\t$(document).on('click',function (e) {\r\n\t\t\t\t\tvar $target=$(e.target);\r\n\t\t\t        if (!($target.parents(\".xquery\").length>0||$target.hasClass(\".xquery\")))\r\n\t\t\t        \t_self.close();\r\n\t\t\t\t\t\t\r\n\t\t\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\tthis.init=true;\r\n\t\t\t\t\t//this.$element.initPageUI();\r\n\t\t\t\t}\r\n\t\t\t\tthis.$element.show();\r\n\t\t\t\t}\r\n\t\t\t}else{\r\n\t\t\t\tif (this.$element){\r\n\t\t\t\tvar p=this.$element.parent();\r\n\t\t\t\tif (!this.oldHeight){\r\n\t\t\t\t\tthis.oldHeight=p.outerHeight();\r\n\t\t\t\t}\r\n\t\t\t\tif (!this.oldElHeight){\r\n\t\t\t\t\tthis.oldElHeight=this.$element.outerHeight();\r\n\t\t\t\t}\r\n\t\t\t\tthis.$element[0].style.display='inline-block';\r\n\t\t\t\tif (p){\r\n\t\t\t\t\tvar opt=p.panel(\"options\");\r\n\t\t\t\t\tif (opt&&opt.region){\r\n\t\t\t\t\tp.panel(\"resize\",{height:p.height()+this.$element.outerHeight()});\r\n\t\t\t\t\tp.parents(\"div.app-layout\").layout(\"resize\");\r\n\t\t\t\t\t}\r\n\t\t\t\t};\r\n\t\t\t}\r\n\t\t\t}\r\n\t\t},toggle:function(e){\r\n\t\t\r\n\t\t\tif (this.$element.is(\":hidden\")){\r\n\t\t\t\tthis.show(e);\r\n\t\t\t}else{\r\n\t\t\t\tthis.hide();\t\r\n\t\t\t}\r\n\t\t},destroy:function(){\r\n\t\t\t var dlgId = this.$element.attr(\"dialogId\");\r\n\t\t\t if(dlgId){\r\n\t\t\t\t var $dlg=$(\"#\"+dlgId);\r\n\t\t\t\t if ($dlg.length>0){\r\n\t\t\t\t\t $A.destroyDom($dlg);\r\n\t\t\t\t\t $dlg.trigger($A.eventType.pageDestroy).remove();\r\n\t\t\t\t }\r\n\t\t\t }\t\t\t\r\n\t\t}\r\n\t};\r\n\t/**\r\n\t * jquery方法扩展xquery\r\n\t */\r\n\t$.fn.xquery=function(option){\r\n\t\tvar methodReturn = undefined\r\n\t\t,options = typeof option === 'object'? $.extend({},option):null;\r\n\t\tvar methodName = null;\r\n\t\tvar args = [];\r\n\t\tif(typeof option === 'string' ){\r\n\t\t\tmethodName = option;\r\n\t\t\t args = $.makeArray(arguments).slice(1);\r\n\t\t}\r\n\t\t\r\n\t\tvar $set = this.each(function () {\r\n\t\t\tvar $this = $(this);\r\n\t\t\tvar data = $this.data('xquery');\r\n\t\t\tif (!data) $this.data('xquery', (data = new QueryComp(this, options)));\r\n\t\t\tif (methodName){\r\n\t\t\t\tvar method =  data[methodName];\r\n\t\t\t\tif(method){\r\n\t\t\t\t\tmethodReturn = method.apply(data,args);\r\n\t\t\t\t}\r\n\t\t\t\t//methodReturn = data[option]();\r\n\t\t\t}\r\n\t\t});\r\n\t\treturn (methodReturn === undefined) ? $set : methodReturn;\r\n\t};\r\n\t\r\n\t$.fn.initXquery=function(option__){\r\n\t\treturn $(this).each(function(){\r\n\t\t\tvar $el = $(this);\r\n\t\t\t$el.find(\".queryitem[visible=false]\").hide();\r\n\t\t});\r\n\t};\r\n\t\r\n\t$.fn.xquery.Constructor = QueryComp;\r\n\t$(document).on('click.xquery.data-api', 'div.xquery .xquery-quick-button', function (e) {\r\n\t\tvar $this = $(this);\r\n\t\te.preventDefault();\r\n\t\t$this.parents(\".xquery\").xquery('quickQuery');\r\n\t});\r\n\t$(document).on('click.xquery.data-api', 'div.xquery .xquery-adv-button', function (e) {\r\n\t\tvar $this = $(this);\r\n\t    e.preventDefault();\r\n\t    var $query = $this.parents(\"div.xquery:first\");\r\n\t    $query.xquery(\"openQuery\");\r\n\t});\r\n\t$(document).on('click.xquery.data-api', 'a.advancequery.ok', function (e) {\r\n\t\te.preventDefault();\r\n\t\tif($A(\"[query-target]\").xquery('advQuery')){\r\n\t\t\r\n\t\t\t$A(\"[query-target]\").xquery('close');\r\n\r\n\t\t\t\r\n\t\t}\r\n\t\t\r\n\t});\r\n\t\r\n\t$(document).on('click.xquery.data-api', 'a.advancequery.rest', function (e) {\r\n\t\t$A(\"[query-target]\").xquery('clearQuery');\r\n\t});\r\n\t\r\n\t$(document).on('click.xquery.data-api', 'a.advancequery.cancel', function (e) {\r\n\t\te.preventDefault();\r\n\t\t$A(\"[query-target]\").xquery('close');\r\n\t});\r\n\t\r\n \treturn $;\r\n});\n",
    "/**\r\n * 联想框控件--继承Combo\r\n * @author Mr.T\r\n */\r\ndefine('app/widgets/form/app-xquerybox',['app/core/app-jquery', 'app/core/app-core', 'app/core/app-options', 'app/data/app-ajax',\r\n        'app/widgets/form/app-suggest'], function($, App, Options, AppAjax, Suggest) {\r\n\t\r\n\t'use strict';\r\n\r\n\t/**\r\n\t * @class \r\n\t * @classdesc 联想框\r\n\t * <span class=\"type-signature static\">extend</span>combo\r\n\t * @see {@link combo-class} suggest继承至combo\r\n\t * @name suggest-class\r\n\t * @desc 联想框的初始化方法\r\n\t * @param {DOMElement} input 要渲染的input组件\r\n\t * @param {Object} options 组件的选项设置 \r\n\t * @author Mr.T\r\n\t * @example &lt;input &#9;class=\"app-suggest\"\r\n\t * &#9;_options=\"{\r\n\t * &#9;&#9;suggest: 'html/example/app-input/data/data.idAndName'\r\n\t * &#9;}\"\r\n\t * />\r\n\t * @example $('#demo').suggest({\r\n\t * &#9;suggest: 'html/example/app-input/data/data.idAndName'\r\n\t * });\r\n\t */\r\n\tvar XqueryBox = Suggest.extend({\r\n\t\tinitialize: function (input, options) {\r\n\t\t\tif(!options){\r\n\t\t\t\toptions = {};\r\n\t\t\t}\r\n\t\t\toptions.className = 'app-xquerybox';\r\n\t\t\toptions._ = Options.appDefaults.Suggest;\r\n\t\t\tXqueryBox.superclass.initialize.call(this, input, options);\r\n\t\t\tXqueryBox.superclass._init.call(this);\r\n\t\t\t\r\n\t\t\t//this._init();\r\n\t\t},\r\n\t\t/**\r\n\t\t * 初始化\r\n\t\t */\r\n\t\t_init: function(){\r\n\t\t\r\n\t\t\tthis.setting.valuefield='field';\r\n\t\t\tthis.setting.textfield='textValue';\r\n\t\t\tthis.setting.fieldname='name';\r\n\t\t\tthis.setting.multiple=false;\r\n\t\t\tvar queryId=this.setting[\"queryid\"];\r\n\t\t\tthis.on(\"afterSelected\",this.queryTargetLoad);\r\n\t\t\tthis.$searchBtn=$('<a class=\"wrapper-btn wrapper-search\"><i></i></a>');\r\n\t\t\tthis.$searchBtn.insertBefore(this.$openBtn);\r\n\t\t\tthis.$element.on('mousedown.textbox.api', '.wrapper-btn.wrapper-open', function(e){\r\n\t\t\t\tif (queryId){\r\n\t\t\t\t\t$A(\"#\"+queryId).xquery(\"toggle\",e);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\tthis.$element.on('mousedown.textbox.api', 'input', function(e){\r\n\t\t\t\tif (queryId){\r\n\t\t\t\t\t$A(\"#\"+queryId).xquery(\"close\");\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\tvar _self=this;\r\n\t\t\tthis.$element.on('mousedown.textbox.api', '.wrapper-btn.wrapper-search',function(){\r\n\t\t\t\tvar node=_self.getSelectedNode();\r\n\t\t\t\t\r\n\t\t\t\t_self.queryTargetLoad(node);\r\n\t\t\t})\r\n\t\t\tthis.$element.addClass(\"app-xquerybox\");\r\n\t\t\tthis.$element.removeClass(\"app-suggest\")\r\n\t\t},\r\n\t\tqueryTargetLoad:function(node,all){\r\n\t\t\tvar queryTarget=this.setting[\"querytarget\"];\r\n\t\t\tvar params=[],reqparams={};\r\n\t\t\tif (queryTarget){\r\n\t\t\t\t if (node){\r\n\t\t\t\t\tparams.push({op:'like',prop:node[\"field\"],val:node[\"value\"]})\r\n\t\t\t\t\treqparams[\"__xquery\"] = JSON.stringify(params);\r\n\t\t\t\t}else{\r\n\t\t\t\t\tif (all){\r\n\t\t\t\t\t\tvar data=this.setting.data,len=data.length;\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tfor (var i=0;i<len;i++){\r\n\t\t\t\t\t\t\tparams.push({op:'like',prop:data[i][\"field\"],val:data[i][\"value\"]})\r\n\t\t\t\t\t\t\treqparams[\"__xquery\"] = JSON.stringify(params);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\treqparams[\"__xquery\"]=null;\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\r\n\t\t\t\t}\r\n\t\t\t\t$A(\"#\"+queryTarget).grid(\"setParameter\",reqparams);\r\n\r\n\t\t\t\t $A(\"#\"+queryTarget).grid(\"load\");\r\n\t\t\t}\r\n\t\t\t\r\n\t\t},\r\n\t\t/**\r\n\t\t * 初始化设置\r\n\t\t */\r\n\t\t_initOptions: function(){\r\n\t\t\tvar s = this.setting;\r\n\t\t\t//如果没有设置suggest地址，则使用url\r\n\t\t\tif((s.suggest == '' || s.suggest == true)\r\n\t\t\t\t\t&& s.url){\r\n\t\t\t\ts.suggest = s.url;\r\n\t\t\t}\r\n\t\t\tif(s.suggest == false){\r\n\t\t\t\ts.suggest = '';\r\n\t\t\t}\r\n\t\t\t//远程加载，可以是remote 或 async\r\n\t\t\tif(!s.remote && s.async){\r\n\t\t\t\ts.remote = true; \r\n\t\t\t}\r\n\t\t\tif(s.textfield == s.valuefield){\r\n\t\t\t\tthis.setText(s.value);\r\n\t\t\t}\r\n\t\t\tif(!s.suggestfield){\r\n\t\t\t\ts.suggestfield = s.textfield;\r\n\t\t\t}\r\n\t\t\tif(s.suggestClear && !s.multiple){\r\n\t\t\t\ts.suggestClear = true;\r\n\t\t\t}else{\r\n\t\t\t\ts.suggestClear = false;\r\n\t\t\t}\r\n\t\t},\r\n\t\t/**\r\n\t\t * 初始化下拉面板的内容\r\n\t\t */\r\n\t\t_initPanelContent: function(){\r\n\t\t\tthis._fixSuggestPanel();\r\n\t\t\tthis.$dropPanelMain.append('<div class=\"suggest-list\">' +\r\n\t\t\t\t      \t\t\t\t'<ul></ul>' +\t\t\r\n\t\t\t\t      \t\t\t'</div>');\r\n\t\t\tthis.$dropPanelCustom.append('<div class=\"selected-list\"></div>');\r\n\t\t\tthis.$dropPanelCustom.css('overflow', 'auto');\r\n\t\t\tthis.$suggest = this.$dropPanel.find('.suggest-list');\r\n\t\t\tthis.$suggestList = this.$suggest.find('>ul');\r\n\t\t\tthis.$selectedList = this.$dropPanelCustom.find('.selected-list');\r\n\t\t},\r\n\t\t/**\r\n\t\t * 修复下拉面板的占比高度\r\n\t\t */\r\n\t\t_fixSuggestPanel: function(){\r\n\t\t\tvar slt_height = 0\r\n\t\t\t\t,setting = this.setting;\r\n\t\t\tif(setting.acceptText){\r\n\t\t\t\tslt_height = 0;\r\n\t\t\t}else if(setting.slt_area){\r\n\t\t\t\tslt_height = Number(setting.slt_area);\r\n\t\t\t}\r\n\t\t\tif(isNaN(slt_height)){\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tthis.$dropPanelCustom.css('height', slt_height);\r\n\t\t\tthis.$dropPanel.css('padding-bottom', slt_height);\r\n\t\t},\r\n\t\t/**\r\n\t\t * 事件注册器\r\n\t\t */\r\n\t\t_eventRegister: function(){\r\n\t\t\tvar s = this.setting;\r\n\t\t\tif($.isFunction(s.afterSelected)){\r\n\t\t\t\tthis.on('afterSelected', s.afterSelected);\r\n\t\t\t}\r\n\t\t\tif($.isFunction(s.beforeSelected)){\r\n\t\t\t\tthis.on('beforeSelected', s.beforeSelected);\r\n\t\t\t}\r\n\t\t},\r\n\t\t/**\r\n\t\t * 注册控件事件\r\n\t\t */\r\n\t\t_registEvents: function(){\r\n\t\t\tthis.$text.on('focus.suggest.api', $.proxy(this._textFocusEvent, this));\r\n\t\t\tvar that = this;\r\n\t\t\t//当联想框作为单独的主体控件\r\n\t\t\tif(this.$element.hasClass('app-suggest')){\r\n\t\t\t\tthis.$openBtn.off('click.textbox.api');\r\n\t\t\t\tthis.$openBtn.on('click.suggest.api', function(e){\r\n\t\t\t\t\tthat.$text.focus();\r\n\t\t\t\t});\r\n\t\t\t}else{\r\n\t\t\t\tthis.$element.data('suggest', this);\r\n\t\t\t}\r\n\t\t\tthis.$suggestList.on('click.suggest.api', 'li', function(){\r\n\t\t\t\tthat._suggestItemActive($(this));\r\n\t\t\t});\r\n\t\t\tthis._onSelectedNodeDeleteEvent();\r\n\t\t\tthis._bindShowHistory();\r\n\t\t},\r\n\t\t/**\r\n\t\t * 覆盖父类的绑定方法\r\n\t\t */\r\n\t\t_textChangeEvent: function(){\r\n\t\t\tif(this.setting.acceptText){\r\n\t\t\t\tvar that = this;\r\n\t\t\t\tthis.$text.on('change.textbox.api',function(){\r\n\t\t\t\t\tvar selectedNode = that.getSelectedNode()\r\n\t\t\t\t\t\t,nodeText = that._getSelectedNodeText(selectedNode)\r\n\t\t\t\t\t\t,text = that.getText();\r\n\t\t\t\t\tif(nodeText != text){\r\n\t\t\t\t\t\tselectedNode = that._createSelectedNode(text);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tthat.setSelectedNode(selectedNode);\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t},\r\n\t\t/**\r\n\t\t * 显示值文本框获得焦点事件\r\n\t\t */\r\n\t\t_textFocusEvent: function(){\r\n\t\t\tvar $text = this.$text;\r\n\t\t\t$text.data('oriText', $text.val());\r\n\t\t},\r\n\t\t_bindShowHistory: function(){\r\n\t\t\tif(!this._localStorage){\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tvar that = this;\r\n\t\t\tthis.$text.on('fucus.suggest.api click.suggest.api', function(){\r\n\t\t\t\tif($.trim(that.getText())){\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tthat._showHistory();\r\n\t\t\t}).on('keyup.suggest.api', function(e){\r\n\t\t\t\tif(that._mainDivIsVisiable()){\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tif(e.keyCode == App.keyCode.DOWN){\r\n\t\t\t\t\tthat._showHistory();\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tif($.trim(that.getText())){\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tthat._showHistory();\r\n\t\t\t});\r\n\t\t},\r\n\t\t_showHistory: function(){\r\n\t\t\tvar nodes = this._localStorage.get();\r\n\t\t\tif(!nodes){\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tthis._render$SuggestNode(nodes);\r\n\t\t\tthis.$dropPanel.show();\r\n\t\t\tthis.place();\r\n\t\t},\r\n\t\t/**\r\n\t\t * 设置已选项的删除按钮事件\r\n\t\t */\r\n\t\t_onSelectedNodeDeleteEvent: function(){\r\n\t\t\tvar that = this;\r\n\t\t\tthis.$selectedList.on('click.suggest.api', '.sd-close-btn', function(){\r\n\t\t\t\tvar $selectedNode = $(this).parent()\r\n\t\t\t\t\t,node = that._getNode($selectedNode);\r\n\t\t\t\tthat.$suggestList.find('.selected[_v=\"' + node[that.setting.valuefield] + '\"]').removeClass('selected');\r\n\t\t\t\t$selectedNode.remove();\r\n\t\t\t\tthat._setSelectedNodeBySltArea();\r\n\t\t\t});\r\n\t\t},\r\n\t\t/**\r\n\t\t * 按键事件\r\n\t\t * 1、联想\r\n\t\t * 2、导航\r\n\t\t */\r\n\t\t_keyManager: function(e){\r\n\t\t\t\r\n\t\t\tif(this.stopKeyEvent){\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tif(this._dealSysKey(e)){\r\n\t\t\t\t\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tif(this._mainDivIsVisiable()){\r\n\t\t\t\r\n\t\t\t\tthis._keyForVisiblePanel(e);\r\n\t\t\t}else{\r\n\t\t\t\r\n\t\t\t\tthis._keyForHiddenPanel(e);\r\n\t\t\t}\r\n\t\t},\r\n\t\t/**\r\n\t\t * 面板可见状态下的按键事件处理\r\n\t\t */\r\n\t\t_keyForVisiblePanel: function(e){\r\n\t\t\tvar keyCode = e.keyCode\r\n\t\t\t\t,s = this.setting;\r\n\r\n\t\t\te.stopPropagation();\r\n\t\t\tif(App.containKeyCode(e, s.keyNextNode)){\r\n\t\t\t\tthis._keyNextNode(e);\r\n\t\t\t}else if(App.containKeyCode(e, s.keyPrevNode)){\r\n\t\t\t\tthis._keyPrevNode(e);\r\n\t\t\t}else if(App.containKeyCode(e, s.keyPickNode)){\r\n\t\t\t\tthis._keyPickNode(e);\r\n\t\t\t}else if(App.containKeyCode(e, s.keyNextSltNode)){\r\n\t\t\t\tthis._keyNextSltNode(e);\r\n\t\t\t}else if(App.containKeyCode(e, s.keyPrevSltNode)){\r\n\t\t\t\tthis._keyPrevSltNode(e);\r\n\t\t\t}else if(App.containKeyCode(e, s.keyHidePanel)){\r\n\t\t\t\tthis._keyHidePanel(e);\r\n\t\t\t}else if(this._keyFilterSuggest(e)){\r\n\t\t\t\tthis.suggest();\r\n\t\t\t}\r\n\t\t},\r\n\t\t/**\r\n\t\t * 面板不可见状态下的按键事件处理\r\n\t\t */\r\n\t\t_keyForHiddenPanel: function(e){\r\n\t\t\tvar keyCode = e.keyCode;\r\n\t\t\tif(this._isKeyCursorPos(keyCode)){\r\n\t\t\t\tthis._keyCursorPos(e);\r\n\t\t\t}else if(this._keyFilterSuggest(e)){\r\n\t\t\t\tthis.suggest();\r\n\t\t\t}\r\n\t\t},\r\n\t\t/**\r\n\t\t * 切换到联想项区域\r\n\t\t *    并从当前滚动到的可视选项中开始导航\r\n\t\t */\r\n\t\t_switchSuggest: function(){\r\n\t\t\tvar $c = this.$selectedList.find('.selected-item.current');\r\n\t\t\tif($c.length > 0){\r\n\t\t\t\t$c.removeClass('current');\r\n\t\t\t\tvar top = this.$suggest.scrollTop()\r\n\t\t\t\t\t,$nodes = this.$suggestList.find('>li')\r\n\t\t\t\t\t,h = $($nodes[0]).outerHeight()\r\n\t\t\t\t\t,index =  Math.floor(top/h);\r\n\t\t\t\t$($nodes[index]).addClass('current');\r\n\t\t\t}\r\n\t\t},\r\n\t\t/**\r\n\t\t * 切换到联想区域，定位上一个节点\r\n\t\t */\r\n\t\t_keyPrevNode: function(e){\r\n\t\t\te.preventDefault();\r\n\t\t\tvar $l = this.$suggestList;\r\n\t\t\tif($l.find('>li').length == 0){\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tvar $c = $l.find('.current')\r\n\t\t\t\t,$n = $c.prev();\r\n\t\t\tif($n.length == 0){\r\n\t\t\t\t$n = $l.find('li:last-child');\r\n\t\t\t}\r\n\t\t\tthis._switchSuggest();\r\n\t\t\t$c.removeClass('current');\r\n\t\t\t$n.addClass('current');\r\n\t\t\tthis._locateSuggest();\r\n\t\t},\r\n\t\t/**\r\n\t\t * 切换到联想区域，并定位下一个节点\r\n\t\t */\r\n\t\t_keyNextNode: function(e){\r\n\t\t\te.preventDefault();\r\n\t\t\tthis._locateNextNode();\r\n\t\t},\r\n\t\t/**\r\n\t\t * 定位下一个节点\r\n\t\t */\r\n\t\t_locateNextNode: function(){\r\n\t\t\tvar $l = this.$suggestList;\r\n\t\t\tif($l.find('>li').length == 0){\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tvar $c = $l.find('.current')\r\n\t\t\t\t,$n = $c.next();\r\n\t\t\tif($n.length == 0){\r\n\t\t\t\t$n = $l.find('li:first-child');\r\n\t\t\t}\r\n\t\t\tthis._switchSuggest();\r\n\t\t\t$c.removeClass('current');\r\n\t\t\t$n.addClass('current');\r\n\t\t\tthis._locateSuggest();\r\n\t\t},\r\n\t\t/**\r\n\t\t * 选中一个节点\r\n\t\t */\r\n\t\t_keyPickNode: function(e){\r\n\t\t\te.preventDefault();\r\n\t\t\tvar $c = this.$dropPanel.find('.current');\r\n\t\t\tif($c.length == 0){\r\n\t\t\t\tthis.queryTargetLoad(null,true)\r\n\t\t\t}\r\n\t\t\tif($c.hasClass('selected-item')){\r\n\t\t\t\t$c.find('.sd-close-btn').click();\r\n\t\t\t\tthis._keyNextSltNode(e);\r\n\t\t\t}else{\r\n\t\t\t\tthis._suggestItemActive($c);\r\n\t\t\t\tthis._locateNextNode();\r\n\t\t\t}\r\n\t\t},\r\n\t\t/**\r\n\t\t * 联想项的定位到当前项\r\n\t\t */\r\n\t\t_locateSuggest: function(){\r\n\t\t\tvar $c = this.$suggestList.find('li.current');\r\n\t\t\tif($c.length != 1){\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tvar top = $c.offset().top + $c.outerHeight() - this.$suggestList.offset().top\r\n\t\t\t\t,containerHeight = this.$suggest.outerHeight() -2\r\n\t\t\t\t,scrollTop = this.$suggest.scrollTop();\r\n\t\t\tif(top <= scrollTop){\r\n\t\t\t\tthis.$suggest.scrollTop(top - $c.outerHeight());\r\n\t\t\t}else if(top >= scrollTop + containerHeight){\r\n\t\t\t\tthis.$suggest.scrollTop(top - containerHeight);\r\n\t\t\t}\r\n\t\t},\r\n\t\t/**\r\n\t\t * 切换到已选项区域\r\n\t\t */\r\n\t\t_switchSelected: function(){\r\n\t\t\tthis.$suggestList.find('li.current').removeClass('current');\r\n\t\t},\r\n\t\t/**\r\n\t\t * 切换到已选区域，定位上一个已选择节点\r\n\t\t */\r\n\t\t_keyPrevSltNode: function(e){\r\n\t\t\te.preventDefault();\r\n\t\t\tvar $slts = this.$selectedList.find('>div');\r\n\t\t\tif($slts.length == 0){\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tvar $c = this.$selectedList.find('>div.current')\r\n\t\t\t\t,$n = $c.prev();\r\n\t\t\tif($n.length == 0){\r\n\t\t\t\t$n = $($slts[$slts.length-1]);\r\n\t\t\t}\r\n\t\t\tthis._switchSelected();\r\n\t\t\t$c.removeClass('current');\r\n\t\t\t$n.addClass('current');\r\n\t\t\tthis._locateSelected();\r\n\t\t},\r\n\t\t/**\r\n\t\t * 切换到已选区域，定位下一个已选择节点\r\n\t\t */\r\n\t\t_keyNextSltNode: function(e){\r\n\t\t\tvar $slts = this.$selectedList.find('>div');\r\n\t\t\tif($slts.length == 0){\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tvar $c = this.$selectedList.find('>div.current')\r\n\t\t\t\t,$n = $c.next();\r\n\t\t\tif($n.length == 0){\r\n\t\t\t\t$n = $($slts[0]);\r\n\t\t\t}\r\n\t\t\tthis._switchSelected();\r\n\t\t\t$c.removeClass('current');\r\n\t\t\t$n.addClass('current');\r\n\t\t\tthis._locateSelected();\r\n\t\t},\r\n\t\t/**\r\n\t\t * 选择项的定位\r\n\t\t */\r\n\t\t_locateSelected: function(){\r\n\t\t\tvar $c = this.$selectedList.find('>div.current');\r\n\t\t\tif($c.length != 1){\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tvar t = $c.offset().top - $c.parent().offset().top;\r\n\t\t\tthis.$selectedList.scrollTop(t);\r\n\t\t},\r\n\t\t/**\r\n\t\t * 根据输入内容进行延迟联想\r\n\t\t */\r\n\t\tsuggest: function(){\r\n\t\t\tvar that = this;\r\n\t\t\t//保持延迟时间内只触发一次联想操作\r\n\t\t\tclearTimeout(this.timeout);\r\n\t\t\tthis.timeout = \r\n\t\t\t\tsetTimeout(function(){\r\n\t\t\t\t\tthat._suggestFunc();\r\n\t\t\t\t}, this.setting.lazy);\r\n\t\t},\r\n\t\t/**\r\n\t\t * 根据输入的值进行联想\r\n\t\t * \t保持联想面板打开状态\r\n\t\t */\r\n\t\t_suggestFunc: function(){\r\n\t\t\tif(this.stopKeyEvent){\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\r\n\t\t\tif(this.setting.suggestClear){\r\n\t\t\t\tthis.setSelectedNode(null, true);\r\n\t\t\t\tthis._setValue('');\r\n\t\t\t}\r\n\t\t\tif(!this.isActive()){\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\r\n\t\t\t//如果联想面板不是打开状态，则打开渲染。否则只进行联想\r\n \t\t\tif(!this._mainDivIsVisiable() && !this.setting.acceptText){\r\n \t\t\t\tthis.showPanel();\r\n \t\t\t}\r\n\t\t\tif(this._preventSuggest()){\r\n\t\t\t\tthis.$input.data('selectNode',null);\r\n\t\t\t\tthis.hidePanel();\r\n\t\t\t\tthis.queryTargetLoad(null,false);\r\n\t\t\t\t//this._selected$SuggestNode();\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tif(this.setting.acceptText){\r\n\t\t\t\tthis.$selectedList.html('');\r\n\t\t\t}\r\n\t\t\tif(this._onBeforeLoad() === false){\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tif(this.setting.remote){\r\n\t\t\t\tthis._suggestByRemote();\r\n\t\t\t}else{\r\n\t\t\t\tthis._suggestByLocal();\r\n\t\t\t}\r\n\t\t},\r\n\t\t/**\r\n\t\t * 阻止联想事件\r\n\t\t * 1、当联想的关键字为空\r\n\t\t * 2、当联想的关键字与上次联想的相同\r\n\t\t * 3、当上次联想为空 且这次的关键字以上次的关键字开头\r\n\t\t * @returns true 进行阻止\r\n\t\t */\r\n\t\t_preventSuggest: function(){\r\n\t\t\tvar key = this.getText()\r\n\t\t\t\t,stop = false;\r\n\t\t\tif(!$.trim(key)){\r\n\t\t\t\tstop = true;\r\n\t\t\t}else if(!this.prevKey){\r\n\t\t\t\t\r\n\t\t\t}else if(this.prevKey == key && !this.setting.acceptText){\r\n\t\t\t\tstop = true;\r\n\t\t\t}\r\n\t\t\tthis.prevKey = key;\r\n\t\t\treturn stop;\r\n\t\t},\r\n\t\t/**\r\n\t\t * 根据远程设置地址进行联想\r\n\t\t * @param sugest 联想框全局对象\r\n\t\t */\r\n\t\t_suggestByRemote: function(){\r\n\t\t\tvar url = this.setting.suggest\r\n\t\t\t\t,onlyleaf = this.setting.onlyleaf\r\n\t\t\t\t,that = this;\r\n\t\t\tif(url){\r\n\t\t\t\tvar queryParams = $.extend({}, this.getParameter());\r\n\t\t\t\tqueryParams._key = this.getText();\r\n\t\t\t\tqueryParams.suggestfield = this.setting.suggestfield;\r\n\t\t\t\tthis.$dropPanelLoading.show();\r\n\t\t\t\tAppAjax.ajaxCall({\r\n\t\t\t\t\turl: url,\r\n\t\t\t\t\tdata: queryParams,\r\n\t\t\t\t\tdataType: 'json',\r\n\t\t\t\t\ttype: 'POST',\r\n\t\t\t\t\tsuccess: function(data){\r\n\t\t\t\t\t\tthat.$dropPanelLoading.hide();\r\n\t\t\t\t\t\tvar result = [];\r\n\t\t\t\t\t\tif(onlyleaf){\r\n\t\t\t\t\t\t\tfor(var i = 0; i < data.length; i ++){\r\n\t\t\t\t\t\t\t\tif(that._isLeaf(data, data[i]))\r\n\t\t\t\t\t\t\t\t\tresult.push(data[i]);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}else\r\n\t\t\t\t\t\t\tresult = data;\r\n\t\t\t\t\t\tthat._render$SuggestNode(result);\r\n\t\t\t\t\t}\r\n\t\t\t\t});\t\r\n\t\t\t}\r\n\t\t},\r\n\t\t/**\r\n\t\t * 根据本地数据源进行匹配\r\n\t\t * 1、如果存在本地数据源则直接进行匹配\r\n\t\t * 2、如果不存在，本地数据源，则根据suggest资源地址初始化数据源后，再进行匹配\r\n\t\t */\r\n\t\t_suggestByLocal: function(){\r\n\t\t\tthis._initDataByParameter();\r\n\t\t\tif(this.setting.data != undefined){\r\n\t\t\t\tvar suggestData = this._filterByKey();\r\n\t\t\t\tthis._render$SuggestNode(suggestData);\r\n\t\t\t}else{\r\n\t\t\t\tvar url = this.setting.suggest\r\n\t\t\t\t\t,that = this;\r\n\t\t\t\tif(url){\r\n\t\t\t\t\tthis.$dropPanelLoading.show();\r\n\t\t\t\t\tAppAjax.ajaxCall({\r\n\t\t\t\t\t\turl: url,\r\n\t\t\t\t\t\tdata: this.getParameter(),\r\n\t\t\t\t\t\tdataType: 'json',\r\n\t\t\t\t\t\ttype: 'POST',\r\n\t\t\t\t\t\tsuccess: function(data){\r\n\t\t\t\t\t\t\tthat.$dropPanelLoading.hide();\r\n\t\t\t\t\t\t\tthat.setting.data = data;\r\n\t\t\t\t\t\t\tthat._suggestByLocal();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\t\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\t\r\n\t\t/**\r\n\t\t * 根据查询参数重置联想框的数据源\r\n\t\t */\r\n\t\t_initDataByParameter: function(){\r\n\t\t\tvar currParam = this.getParameter();\r\n\t\t\tif(currParam){\r\n\t\t\t\tif(JSON.stringify(this.lastParam) != JSON.stringify(currParam)){\r\n\t\t\t\t\tthis.setting.data = undefined;\r\n\t\t\t\t}\r\n\t\t\t\tthis.lastParam = currParam;\r\n\t\t\t}\r\n\t\t},\r\n\t\t/**\r\n\t\t * 根据数据源按照key模糊匹配节点，并设置联想项\r\n\t\t * @param data 节点数据源数组\r\n\t\t * @param key 匹配关键字\r\n\t\t * @returns {Array} 匹配的节点数组\r\n\t\t */\r\n\t\t_filterByKey: function(){\r\n\t\t\tvar data = this.setting.data,\r\n\t\t\tkey = this.getText(),result = [];\r\n\t\t\t\r\n\t\t\t\t/*\t,,field = this.setting.suggestfield\r\n\t\t\t\t,onlyleaf = this.setting.onlyleaf\r\n\t\t\t\t\r\n\t\t\tif(!field){\r\n\t\t\t\tfield = this.setting.textfield;\r\n\t\t\t}\r\n\t\t\tvar fs = field.split(',');*/\r\n\t\t\tfor(var i = 0; i < data.length; i++){\r\n\t\t\t\tkey=key.replace(data[i][this.setting.fieldname],\"\");\r\n\t\t\t\tkey=key.replace(\":\",\"\");\r\n\t\t\t\t\r\n\t\t\t}\r\n\t\t\tfor(var i = 0; i < data.length; i++){\r\n\t\t\t\tdata[i][\"textValue\"]=data[i][this.setting.fieldname]+\":\"+key;\r\n\t\t\t\tdata[i][\"value\"]=key;\r\n\t\t\t\tresult.push(data[i]);\r\n\t\t\t\t/*for ( var j = 0; j < fs.length; j++) {\r\n\t\t\t\t\tvar val = data[i][fs[j]];\r\n\t\t\t\t\tif(val){\r\n\t\t\t\t\t\tval = val.toUpperCase();\t\t\t\t\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\tif(val.indexOf(key) != -1){\r\n\t\t\t\t\t\t\tif(onlyleaf && !this._isLeaf(data, data[i])){\r\n\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}*/\r\n\t\t\t}\r\n\t\t\treturn result;\r\n\t\t},\r\n\t\t/**\r\n\t\t * 当只能选择叶子节点时，判断传入的该节点是否为叶子节点，否则返回true\r\n\t\t * @param id\r\n\t\t */\r\n\t\t_isLeaf: function(data, node){\r\n\t\t\tvar pidfield = this.setting.pidfield\r\n\t\t\t\t,valuefield = this.setting.valuefield;\r\n\t\t\tif(node['isParent'] == 'true' || node['isParent'] == true)\r\n\t\t\t\treturn false;\r\n\t\t\tfor(var i = 0; i < data.length; i++){\r\n\t\t\t\tif(data[i][pidfield] == node[valuefield])\r\n\t\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t\treturn true;\r\n\t\t},\r\n\t\t/**\r\n\t\t * 渲染联想项列表\r\n\t\t */\r\n\t\t_render$SuggestNode: function(data){\r\n\t\t\tthis.$suggestList.html('');\r\n\t\t\tvar vf = this.setting.valuefield\r\n\t\t\t\t,tf = this.setting.textfield\r\n\t\t\t\t,key = this.getText();\r\n\t\t\tif(data.length == 0){\r\n\t\t\t\tthis.$dropPanelEmpty.show();\r\n\t\t\t}else{\r\n\t\t\t\tthis.$dropPanelEmpty.hide();\r\n\t\t\t}\r\n\t\t\tfor ( var i = 0; i < data.length; i++) {\r\n\t\t\t\tvar node = data[i]\r\n\t\t\t\t\t,$suggestItem = $('<li _v=\"' + node[vf] + '\"><i class=\"icon-ok\"></i>' + \r\n\t\t\t\t\t\t\t\t\tthis._getSuggestText(node[tf], key) + '</li>');\r\n\t\t\t\tthis.$suggestList.append($suggestItem);\r\n\t\t\t\tthis._setNode($suggestItem, node);\r\n\t\t\t}\r\n\t\t\tthis._selected$SuggestNode();\r\n\t\t\tif(data.length == 1){\r\n\t\t\t\tthis._locateNextNode();\r\n\t\t\t}\r\n\t\t\tif(this.setting.acceptText){\r\n\t\t\t\tif(data.length == 0){\r\n\t\t\t\t\tthis.hidePanel();\r\n\t\t\t\t}else{\r\n\t\t\t\t\tthis.showPanel();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\t/**\r\n\t\t * 获取显示名称\r\n\t\t * @param text\r\n\t\t * @param key\r\n\t\t * @returns {String}\r\n\t\t */\r\n\t\t_getSuggestText: function(text, key){\r\n\t\t\tif(this.setting.suggestfield \r\n\t\t\t\t\t&& this.setting.suggestfield != this.setting.textfield){\r\n\t\t\t\treturn text;\r\n\t\t\t}\r\n\t\t\tif(key == ''){\r\n\t\t\t\treturn text;\r\n\t\t\t}\r\n\t\t\tvar index = text.indexOf(key);\r\n\t\t\tif(index == -1){\r\n\t\t\t\tindex = text.toUpperCase().indexOf(key.toUpperCase());\r\n\t\t\t\tif(index == -1){\r\n\t\t\t\t\treturn text;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tvar keyLen = key.length;\r\n\t\t\treturn text.substring(0,index) +\r\n\t\t\t\t'<em>' + text.substring(index, index+keyLen) +'</em>' +\r\n\t\t\t\ttext.substring(keyLen + index);\r\n\t\t},\r\n\t\t/**\r\n\t\t * 按照已选节点进行渲染联想项\r\n\t\t */\r\n\t\t_selected$SuggestNode: function(){\r\n\t\t\tvar selectedNode = this.getSelectedNode()\r\n\t\t\t\t,vf = this.setting.valuefield\r\n\t\t\t\t,that = this;\r\n\t\t\tif(!selectedNode){\r\n\t\t\t\tselectedNode = [];\r\n\t\t\t}else{\r\n\t\t\t\tif(!$.isArray(selectedNode)){\r\n\t\t\t\t\tselectedNode = [selectedNode];\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tfor(var i = 0; i < selectedNode.length; i++){\r\n\t\t\t\tvar $select = this.$suggestList.find('li[_v=\"' + selectedNode[i][vf] + '\"]');\r\n\t\t\t\t$select.addClass('selected');\r\n\t\t\t}\r\n\t\t},\r\n\t\t/**\r\n\t\t * <span class=\"type-signature static\">override</span>\r\n\t\t * 显示或隐藏下拉面板，该方法已绑定在组件的右边按钮中\r\n\t\t */\r\n\t\ttogglePanel: function(){\r\n\t\t\t\r\n\t\t},\r\n\t\t/**\r\n\t\t * 显示当前对象的联想面板\r\n\t\t * 1、关闭其他可见的联想面板\r\n\t\t * 2、根据隐藏值进行渲染选择项\r\n\t\t * 3、开启点击html关闭该面板的操作\r\n\t\t */\r\n\t\tshowPanel: function(){\r\n\t\t\tthis._render$SelectedNode();\r\n\t\t\tthis._showPanel();\r\n\t\t},\r\n\t\t/**\r\n\t\t * 根据隐藏值进行渲染选择项\r\n\t\t * 1、如果已设置显示值，则根据显示值结合隐藏值进行匹配设置，\r\n\t\t * \t\t如果显示值和隐藏值不匹配，则无法完成渲染\r\n\t\t * 2、如果没有设置显示值，而使用本地数据源，则根据隐藏值匹配出显示值，并渲染选择项\r\n\t\t */\r\n\t\t_render$SelectedNode: function(){\r\n\t\t\tthis._resetRender();\r\n\t\t\tthis._reset$SelectedNode();\r\n\t\t\tvar selectedNode = this.getSelectedNode();\r\n\t\t\tif(!selectedNode){\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tif($.isArray(selectedNode)){\r\n\t\t\t\tfor (var i = 0; i < selectedNode.length; i++) {\r\n\t\t\t\t\tthis._appendSelectedItem(selectedNode[i]);\r\n\t\t\t\t}\r\n\t\t\t}else{\r\n\t\t\t\tthis._appendSelectedItem(selectedNode);\r\n\t\t\t}\r\n\t\t},\r\n\t\t/**\r\n\t\t * 设置选中节点\r\n\t\t */\r\n\t\t_reset$SelectedNode: function(){\r\n\t\t\tvar node = this.getSelectedNode();\r\n\t\t\tif(node){\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tvar value = this.getValue();\r\n\t\t\tif(!value){\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tvar vs = value.split(',')\r\n\t\t\t\t,text = this.$text.data('oriText')\r\n\t\t\t\t,vf = this.setting.valuefield\r\n\t\t\t\t,tf = this.setting.textfield\r\n\t\t\t\t,multiple = this.setting.multiple\r\n\t\t\t\t,selectedNode = [];\r\n\t\t\tif(text){\r\n\t\t\t\tvar ts = text.split(',');\r\n\t\t\t\tfor ( var i = 0; i < vs.length; i++) {\r\n\t\t\t\t\tvar node = {};\r\n\t\t\t\t\tnode[vf] = vs[i];\r\n\t\t\t\t\tnode[tf] = ts[i];\r\n\t\t\t\t\tselectedNode.push(node);\r\n\t\t\t\t}\r\n\t\t\t}else if(this._isLocalSuggest()){\r\n\t\t\t\tselectedNode = this._getSelectedNodeByValue(vs);\r\n\t\t\t}\r\n\t\t\tif(multiple){\r\n\t\t\t\tthis.setSelectedNode(selectedNode, true);\r\n\t\t\t}else{\r\n\t\t\t\tthis.setSelectedNode(selectedNode[0], true);\r\n\t\t\t}\r\n\t\t},\r\n\t\t/**\r\n\t\t * 根据隐藏值匹配数据源，并生成选择项数据\r\n\t\t * @param vs 隐藏值数组\r\n\t\t */\r\n\t\t_getSelectedNodeByValue: function(vs){\r\n\t\t\tvar result = []\r\n\t\t\t\t,data = this.setting.data\r\n\t\t\t\t,valueField = this.setting.valuefield;\r\n\t\t\tfor ( var i = 0; i < vs.length; i++) {\r\n\t\t\t\tfor(var j =0; j < data.length; j++){\r\n\t\t\t\t\tif(vs[i] == data[j][valueField]){\r\n\t\t\t\t\t\tresult.push(data[j]);\r\n\t\t\t\t\t\tcontinue;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn result;\r\n\t\t},\r\n\t\t/**\r\n\t\t * 判断是否为本地数据源联想\r\n\t\t * @returns true\r\n\t\t */\r\n\t\t_isLocalSuggest: function(suggest){\r\n\t\t\tif(this.setting.data != undefined \r\n\t\t\t\t\t&& !this.setting.async){\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\t\t\treturn false;\r\n\t\t},\r\n\t\t/**\r\n\t\t * 隐藏联想框\r\n\t\t * 1、关闭html的click.suggest.api事件代理\r\n\t\t * 2、根据当前选择项设置联想框的显示值和隐藏值\r\n\t\t */\r\n\t\thidePanel: function(){\r\n\t\t\tif(this._mainDivIsVisiable()){\r\n\t\t\t\tthis.$dropPanel.hide();\r\n\t\t\t\t$(document).off('click.combo.api');\r\n\t\t\t\tif(!this.setting.acceptText){\r\n\t\t\t\t\tthis.setSelectedNode(this.getSelectedNode());\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\t/**\r\n\t\t * 根据文本生成一个固定节点\r\n\t\t */\r\n\t\t_createSelectedNode: function(text){\r\n\t\t\tvar selectedNode = {};\r\n\t\t\tselectedNode[this.setting.textfield] = text;\r\n\t\t\tselectedNode[this.setting.valuefield] = text;\r\n\t\t\treturn selectedNode;\r\n\t\t},\r\n\t\t/**\r\n\t\t * 获取以选中节点的文本\r\n\t\t */\r\n\t\t_getSelectedNodeText: function(nodes){\r\n\t\t\tif(!nodes){\r\n\t\t\t\treturn '';\r\n\t\t\t}\r\n\t\t\tvar text = ''\r\n\t\t\t\t,tf = this.setting.textfield;\r\n\t\t\tif($.isArray(nodes)){\r\n\t\t\t\tfor(var i = 0; i < nodes.length; i++){\r\n\t\t\t\t\ttext += nodes[i][tf] + ',';\r\n\t\t\t\t}\r\n\t\t\t\tif (text.length > 0 ) text = text.substring(0, text.length-1);\r\n\t\t\t}else{\r\n\t\t\t\ttext = nodes[tf] ? nodes[tf] : '';\r\n\t\t\t}\r\n\t\t\treturn text;\r\n\t\t},\r\n\t\t/**\r\n\t\t * 载入数据，并根据数据渲染下拉面板\r\n\t\t * @param {Array.<Node>} data 载入的数据列表\r\n\t\t * @todo 根据数据渲染下拉面板的内容\r\n\t\t * @todo 设置联想为本地联想\r\n\t\t * @example $('#demo').suggest('loadData',[{id:1,name:'是'},{id:0,name:'否'}]);\r\n\t\t * @memberof suggest-class\r\n\t\t * @instance\r\n\t\t */\r\n\t\tloadData: function(data){\r\n\t\t\tthis.setting.data = data;\r\n\t\t\tthis.setting.remote = false; \r\n\t\t},\r\n\t\t/**\r\n\t\t * 根据url载入数据源作为联想的数据源\r\n\t\t * @param {url} url 要加载的url\r\n\t\t * @todo 根据数据渲染下拉面板的内容\r\n\t\t * @todo 设置联想为本地联想\r\n\t\t * @example $('#demo').combobox('reload','a.do');\r\n\t\t * @memberof suggest-class\r\n\t\t * @instance\r\n\t\t */\r\n\t\treload: function(url){\r\n\t\t\tif(url){\r\n\t\t\t\tvar that = this;\r\n\t\t\t\tthis.$dropPanelLoading.show();\r\n\t\t\t\tAppAjax.ajaxCall({\r\n\t\t\t\t\turl: url,\r\n\t\t\t\t\tdata: this.getParameter(),\r\n\t\t\t\t\tdataType: 'json',\r\n\t\t\t\t\ttype: 'POST',\r\n\t\t\t\t\tsuccess: function(data){\r\n\t\t\t\t\t\tthat.$dropPanelLoading.hide();\r\n\t\t\t\t\t\tthat.loadData(data);\r\n\t\t\t\t\t}\r\n\t\t\t\t});\t\r\n\t\t\t}\r\n\t\t},\r\n\t\t/**\r\n\t\t * <span class=\"type-signature static\">override</span>\r\n\t\t * 清除值\r\n\t\t * @todo 清除隐藏值\r\n\t\t * @todo 清除显示值\r\n\t\t * @todo 清除面板的选择项\r\n\t\t * @memberof suggest-class\r\n\t\t * @instance\r\n\t\t */\r\n\t\tclearValue: function(){\r\n\t\t\tthis.setText('');\r\n\t\t\tthis.setValue('');\r\n\t\t\tthis._resetRender();\r\n\t\t\tthis.setSelectedNode(null);\r\n\t\t},\r\n\t\t/**\r\n\t\t * 重置当前联想项列表的选中状态和已选项项节点\r\n\t\t */\r\n\t\t_resetRender: function(){\r\n\t\t\tthis.$suggestList.find('li.selected').removeClass('selected');\r\n\t\t\tthis.$selectedList.html('');\r\n\t\t},\r\n\t\t/**\r\n\t\t * 根据已选框的选项设置组件的已选节点\r\n\t\t */\r\n\t\t_setSelectedNodeBySltArea: function(){\r\n\t\t\tvar $selectedNodes = this.$selectedList.children()\r\n\t\t\t\t,selectedNode = [];\r\n\t\t\tfor(var i = 0; i< $selectedNodes.length; i++){\r\n\t\t\t\tselectedNode.push(this._getNode($($selectedNodes[i])));\r\n\t\t\t}\r\n\t\t\tif(!this.setting.multiple){\r\n\t\t\t\tselectedNode = selectedNode[0];\r\n\t\t\t\tif(selectedNode == undefined){\r\n\t\t\t\t\tselectedNode = null;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tthis.setSelectedNode(selectedNode, !this.setting.acceptText);\r\n\t\t},\r\n\t\t/**\r\n\t\t * 联想被激发\r\n\t\t * 1、如果存在自定义选择前事件，先执行该事件，如果返回false 则结束选择，否则执行2\r\n\t\t * 2、单选则设值当前选择项为值，并关闭下拉框；多选则追加当前选择项为值\r\n\t\t * 3、如果存在自定义选择后事件，则执行该事件\r\n\t\t * @param $node 被激发的联想项\r\n\t\t */\r\n\t\t_suggestItemActive: function($node){\r\n\t\t\tif(this._isSelected($node)){\r\n\t\t\t\tthis._unselect$SuggestNode($node);\r\n\t\t\t\tthis._setSelectedNodeBySltArea();\r\n\t\t\t}else{\r\n\t\t\t\tthis._select$SuggestNode($node);\r\n\t\t\t}\r\n\t\t},\r\n\t\t/**\r\n\t\t * 判断该节点是否已经被选中\r\n\t\t */\r\n\t\t_isSelected: function($node){\r\n\t\t\treturn $node.hasClass('selected');\r\n\t\t},\r\n\t\t/**\r\n\t\t * 将节点设置为选中的样式\r\n\t\t */\r\n\t\t_select$SuggestNode: function($node){\r\n\t\t\t/**\r\n\t\t\t * 节点被选择前事件，并返回一个值，当为false时取消选择操作\r\n\t\t\t * @event suggest-class#beforeSelected\r\n\t\t\t * @param {Node} node 被选择的节点\r\n\t\t\t * @returns {Boolean} boolean 返回值为false 取消选择\r\n\t\t\t */\r\n\t\t\tif(this._active$NodeEvent('beforeSelected', $node) === false){\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tvar node = this._getNode($node);\r\n\t\t\tif(this.setting.multiple){\r\n\t\t\t\t$node.addClass('selected');\r\n\t\t\t\tthis._appendSelectedItem(node);\r\n\t\t\t\tthis._setSelectedNodeBySltArea();\r\n\t\t\t}else{\r\n\t\t\t\tthis.$suggestList.find('li.selected').removeClass('selected');\r\n\t\t\t\tthis.$selectedList.html('');\r\n\t\t\t\t$node.addClass('selected');\r\n\t\t\t\tthis._appendSelectedItem(node);\r\n\t\t\t\tthis._setSelectedNodeBySltArea();\r\n\t\t\t\tthis.hidePanel();\r\n\t\t\t}\r\n\t\t\t/**\r\n\t\t\t * 节点选择后事件\r\n\t\t\t * @event suggest-class#afterSelected\r\n\t\t\t * @param {Node} node 被选择的节点\r\n\t\t\t */\r\n\t\t\tthis._active$NodeEvent('afterSelected', $node);\r\n\t\t},\r\n\t\t/**\r\n\t\t * 将节点设置为未选中的样式\r\n\t\t */\r\n\t\t_unselect$SuggestNode: function($node){\r\n\t\t\t$node.removeClass('selected');\r\n\t\t\tvar node = this._getNode($node);\r\n\t\t\tthis.$selectedList.find('.selected-item[_v=\"' + node[this.setting.valuefield] + '\"]').remove();\r\n\t\t},\r\n\t\t/**\r\n\t\t * 执行自定义选择前事件\r\n\t\t * @param $node 当前被点击的选择项\r\n\t\t * @returns {Boolean} false 结束点击事件\r\n\t\t */\r\n\t\t_active$NodeEvent: function(eventName, $node){\r\n\t\t\tif(this.hasBindEvent(eventName)){\r\n\t\t\t\treturn this.trigger(eventName, this._getNode($node));\r\n\t\t\t}\r\n\t\t},\r\n\t\t/**\r\n\t\t * 根据Li选择项获取当前节点\r\n\t\t * @param li Li选择项\r\n\t\t * @returns {}\r\n\t\t */\r\n\t\t_getNode: function ($node){\r\n\t\t\treturn $node.data('node');\r\n\t\t},\r\n\t\t/**\r\n\t\t * 设置Li选择项获取当前节点\r\n\t\t * @param li Li选择项\r\n\t\t * @returns {}\r\n\t\t */\r\n\t\t_setNode: function ($node, node){\r\n\t\t\t$node.data('node', node);\r\n\t\t},\r\n\t\t/**\r\n\t\t * 追加选择项到已选面板\r\n\t\t * @param node 节点数据\r\n\t\t */\r\n\t\t_appendSelectedItem: function(node){\r\n\t\t\tif(this.$selectedList.find('.selected-item[_v=\"' + node[this.setting.valuefield] + '\"]').length == 0){\r\n\t\t\t\tvar $selectedNode = $('<div class=\"selected-item\" _v=\"' + node[this.setting.valuefield] + '\">' + \r\n\t\t\t\t\t\tnode[this.setting.textfield] + '<span class=\"sd-close-btn\"></span></div>');\r\n\t\t\t\tthis._setNode($selectedNode, node);\r\n\t\t\t\tthis.$selectedList.append($selectedNode);\r\n\t\t\t}\r\n\t\t}\r\n\t});\r\n\t\r\n\t$.fn.xquerybox = function (option, value) {\r\n\t\tvar methodReturn = undefined\r\n\t\t\t,args = arguments\r\n\t\t\t,componentName = 'xquerybox';\r\n\t\tthis.each(function () {\r\n\t\t\tvar $this = $(this);\r\n\t\t\tif(!$this.is('input')){\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\t\t\tvar component = $this.data(componentName);\r\n\t\t\tif(typeof option === 'string'){\r\n\t\t\t\ttry{\r\n\t\t\t\t\tvar methodArgs = Array.prototype.slice.call(args, 1);\r\n\t\t\t\t\tmethodReturn = App.componentMethodApply(component, option, methodArgs);\r\n\t\t\t\t}catch(e){\r\n\t\t\t\t\tApp.throwCompMethodError($this, componentName, option, e);\r\n\t\t\t\t}\r\n\t\t\t}else{\r\n\t\t\t\tif(!component){\r\n\t\t\t\t\tcomponent = new XqueryBox(this, option);\r\n\t\t\t\t\t$this.data(componentName, component);\r\n\t\t\t\t}else{\r\n\t\t\t\t\tApp.throwCompInitError($this, componentName);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\t\treturn methodReturn;\r\n\t};\r\n\r\n\treturn XqueryBox;\r\n});\n",
    "define(\t'app/widgets/panel/app-panel',[\"app/core/app-jquery\", \"app/core/app-core\", \"app/core/app-options\",\r\n\t\t\t\t\"jquery/jquery-ui\", \"app/widgets/app-widget\"], function($, $A, Opts,\r\n\t\t\t\tresizable, Widget) {\r\n\t\t\tvar timeout = null;\r\n\t\t\t$(window).unbind('.panel').bind('resize.panel', function() {\r\n\t\t\t\t// console.log('sdfsdf');\r\n\t\t\t\tif (timeout) {\r\n\t\t\t\t\tclearTimeout(timeout);\r\n\t\t\t\t}\r\n\t\t\t\ttimeout = setTimeout(function() {\r\n\t\t\t\t\t\t\tvar layout = $A('body.layout');\r\n\t\t\t\t\t\t\t// var layout = $('body.layout');\r\n\t\t\t\t\t\t\tif (layout.length) {\r\n\t\t\t\t\t\t\t\tlayout.layout('resize');\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tvar layouts = $A('.app-layout');\r\n\t\t\t\t\t\t\t\tvar boxLayout = $A('.app-vboxLayout,.app-hboxLayout');\r\n\t\t\t\t\t\t\t\tif (layouts.length) {\r\n\t\t\t\t\t\t\t\t\t$A(layouts[0]).layout('resize');\r\n\t\t\t\t\t\t\t\t} else if (boxLayout.length) {\r\n\t\t\t\t\t\t\t\t\tboxLayout.triggerHandler('_resize');\r\n\r\n\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\t$A('body>div.panel')\r\n\t\t\t\t\t\t\t\t\t\t\t.triggerHandler('_resize');\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}, 100);\r\n\t\t\t});\r\n\r\n\t\t\tvar Panel = Widget.extend({\r\n\t\t\t\tinitialize : function(el, options) {\r\n\t\t\t\t\tif (!options) {\r\n\t\t\t\t\t\toptions = {};\r\n\t\t\t\t\t}\r\n\t\t\t\t\tPanel.superclass.initialize.call(this, options);\r\n\r\n\t\t\t\t\tvar t = $(el);\r\n\t\t\t\t\tthis.element=el;\r\n\t\t\t\t\tvar opts = $.extend({}, Opts.appDefaults.Panel, Panel\r\n\t\t\t\t\t\t\t\t\t.parseOptions(el), options);\r\n\t\t\t\t\t$.data(el, \"panel\", {\r\n\t\t\t\t\t\t\t\toptions : opts,\r\n\t\t\t\t\t\t\t\tpanel : this.wrapPanel(el),\r\n\t\t\t\t\t\t\t\tisLoaded : false\r\n\t\t\t\t\t\t\t});\r\n\r\n\t\t\t\t},\r\n\t\t\t\t_init : function(target) {\r\n\t\t\t\t\tvar opts = $.data(target, 'panel').options;\r\n\t\t\t\t\tvar panel = $.data(target, 'panel').panel;\r\n\r\n\t\t\t\t\tif (opts.content) {\r\n\t\t\t\t\t\t$(this).html(opts.content);\r\n\t\t\t\t\t\tif ($.parser) {\r\n\t\t\t\t\t\t\t$.parser.parse(this);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tthis.addEvents(\"onBeforeLoad\",\"onLoad\",\"onLoadError\",\"onBeforeOpen\",\"onOpen\",\"onBeforeClose\",\"onClose\",\"onBeforeDestroy\",\"onDestroy\",\"BeforeCollapse\",\"onCollapse\",\"onBeforeExpand\",\"onExpand\",\"onResize\",\"onMove\",\"onMove\",\"onMaximize\",\"onRestore\",\"onMinimize\");\r\n\t\t\t\t\tthis.addHeader(target);\r\n\t\t\t\t\tthis.setBorder(target);\r\n\t\t\t\t\t// loadData(this);\r\n\r\n\t\t\t\t\tif (opts.doSize == true) {\r\n\t\t\t\t\t\t// panel.css('display', 'block');\r\n\t\t\t\t\t\tthis._setSize(target);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (opts.closed == true || opts.minimized == true) {\r\n\t\t\t\t\t\tpanel.hide();\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tthis._openPanel(target);\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\tpanel : function(target) {\r\n\t\t\t\t\t\r\n\t\t\t\t\tvar panel = $.data(target, 'panel').panel;\r\n\t\t\t\t\treturn panel;\r\n\t\t\t\t},\r\n\t\t\t\tremoveNode : function(node) {\r\n\t\t\t\t\tnode.each(function() {\r\n\t\t\t\t\t\t\t\t$(this).remove();\r\n\t\t\t\t\t\t\t\tif ($.browser.msie) {\r\n\t\t\t\t\t\t\t\t\tthis.outerHTML = '';\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t},\r\n\r\n\t\t\t\t_setSize : function(target, param) {\r\n\r\n\t\t\t\t\tvar opts = $.data(target, 'panel').options;\r\n\t\t\t\t\tvar panel = $.data(target, 'panel').panel;\r\n\t\t\t\t\tvar pheader = panel.find('>div.panel-header');\r\n\t\t\t\t\tvar pbody = panel.find('>div.panel-body');\r\n\r\n\t\t\t\t\tif (param) {\r\n\t\t\t\t\t\tif (param.width)\r\n\t\t\t\t\t\t\topts.width = param.width;\r\n\t\t\t\t\t\tif (param.height)\r\n\t\t\t\t\t\t\topts.height = param.height;\r\n\t\t\t\t\t\tif (param.left != null)\r\n\t\t\t\t\t\t\topts.left = param.left;\r\n\t\t\t\t\t\tif (param.top != null)\r\n\t\t\t\t\t\t\topts.top = param.top;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif (opts.fit == true) {\r\n\t\t\t\t\t\tvar p = panel.parent();\r\n\t\t\t\t\t\topts.width = p.width();\r\n\t\t\t\t\t\topts.height = p.height();\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tpanel.css({\r\n\t\t\t\t\t\t\t\tleft : opts.left,\r\n\t\t\t\t\t\t\t\ttop : opts.top\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\tpanel.css(opts.style);\r\n\t\t\t\t\tpanel.addClass(opts.cls);\r\n\t\t\t\t\tpheader.addClass(opts.headerCls);\r\n\t\t\t\t\tpbody.addClass(opts.bodyCls);\r\n\t\t\t\t\tif (!isNaN(opts.width)) {\r\n\t\t\t\t\t\tpanel.outerWidth(opts.width);\r\n\t\t\t\t\t\t/*\r\n\t\t\t\t\t\t * if ($.boxModel == true){ panel.width(opts.width -\r\n\t\t\t\t\t\t * (panel.outerWidth() - panel.width()));\r\n\t\t\t\t\t\t * console.log(panel.width())\r\n\t\t\t\t\t\t * pheader.width(panel.width() - (pheader.outerWidth() -\r\n\t\t\t\t\t\t * pheader.width())); pbody.width(panel.width() -\r\n\t\t\t\t\t\t * (pbody.outerWidth() - pbody.width())); } else {\r\n\t\t\t\t\t\t * panel.width(opts.width);\r\n\t\t\t\t\t\t * pheader.width(panel.width());\r\n\t\t\t\t\t\t * pbody.width(panel.width()); }\r\n\t\t\t\t\t\t */\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tpanel.width('auto');\r\n\t\t\t\t\t\tpbody.width('auto');\r\n\t\t\t\t\t}\r\n\t\t\t\t\t// console.log(panel.width())\r\n\t\t\t\t\tpheader.add(pbody)._outerWidth(panel.width());\r\n\r\n\t\t\t\t\tif (!isNaN(opts.height)) {\r\n\t\t\t\t\t\t// var height = opts.height -\r\n\t\t\t\t\t\t// (panel.outerHeight()-panel.height()) -\r\n\t\t\t\t\t\t// pheader.outerHeight();\r\n\t\t\t\t\t\t// if ($.boxModel == true){\r\n\t\t\t\t\t\t// height -= pbody.outerHeight() - pbody.height();\r\n\t\t\t\t\t\t// }\r\n\t\t\t\t\t\t// pbody.height(height);\r\n\r\n\t\t\t\t\t\tpanel.outerHeight(opts.height);\r\n\t\t\t\t\t\tpbody.outerHeight(panel.outerHeight()\r\n\t\t\t\t\t\t\t\t- pheader.outerHeight());\r\n\t\t\t\t\t\t/*\r\n\t\t\t\t\t\t * if ($.boxModel == true){ panel.height(opts.height -\r\n\t\t\t\t\t\t * (panel.outerHeight() - panel.height()));\r\n\t\t\t\t\t\t * pbody.height(panel.height() - pheader.outerHeight() -\r\n\t\t\t\t\t\t * (pbody.outerHeight() - pbody.height())); } else {\r\n\t\t\t\t\t\t * panel.height(opts.height);\r\n\t\t\t\t\t\t * pbody.height(panel.height() - pheader.outerHeight()); }\r\n\t\t\t\t\t\t */\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tpbody.height('auto');\r\n\r\n\t\t\t\t\t}\r\n\t\t\t\t\tpanel.css('height', \"\");\r\n\t\t\t\t\tthis.trigger(\"onResize\",opts.width, opts.height)\r\n\t\t\t\t\t//opts..apply(target, [opts.width, opts.height]);\r\n\t\t\t\t\t// panel.find('>div.panel-body>div').triggerHandler('_resize');\r\n\t\t\t\t\t$(target).panel(\"doLayout\");\r\n\t\t\t\t},\r\n\r\n\t\t\t\t_movePanel : function(target, param) {\r\n\t\t\t\t\tvar opts = $.data(target, 'panel').options;\r\n\t\t\t\t\tvar panel = $.data(target, 'panel').panel;\r\n\t\t\t\t\tif (param) {\r\n\t\t\t\t\t\tif (param.left != null)\r\n\t\t\t\t\t\t\topts.left = param.left;\r\n\t\t\t\t\t\tif (param.top != null)\r\n\t\t\t\t\t\t\topts.top = param.top;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tpanel.css({\r\n\t\t\t\t\t\t\t\tleft : opts.left,\r\n\t\t\t\t\t\t\t\ttop : opts.top\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\topts.onMove.apply(target, [opts.left, opts.top]);\r\n\t\t\t\t},\r\n\r\n\t\t\t\twrapPanel : function(target) {\r\n\t\t\t\t\tvar panel = $(target).addClass('panel-body').css({\r\n\t\t\t\t\t\t\t\tmargin : 0\r\n\t\t\t\t\t\t\t}).wrap('<div class=\"panel\"></div>').parent();\r\n\t\t\t\t\tvar _self = this;\r\n\t\t\t\t\tpanel.bind('_resize', function() {\r\n\t\t\t\t\t\t\t\tvar opts = $.data(target, 'panel').options;\r\n\t\t\t\t\t\t\t\tif (opts.fit == true) {\r\n\t\t\t\t\t\t\t\t\t_self._setSize(target);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t\t\t});\r\n\r\n\t\t\t\t\treturn panel;\r\n\t\t\t\t},\r\n\r\n\t\t\t\taddHeader : function(target) {\r\n\t\t\t\t\tvar opts = $.data(target, 'panel').options;\r\n\t\t\t\t\tvar panel = $.data(target, 'panel').panel;\r\n\t\t\t\t\tvar _self = this;\r\n\t\t\t\t\tthis.removeNode(panel.find('>div.panel-header'));\r\n\r\n\t\t\t\t\tif (opts.title && !opts.noheader) {\r\n\t\t\t\t\t\tvar header = $('<div class=\"panel-header\"><div class=\"panel-title\">'\r\n\t\t\t\t\t\t\t\t+ opts.title + '</div></div>').prependTo(panel);\r\n\t\t\t\t\t\tif (opts.iconCls) {\r\n\t\t\t\t\t\t\theader.find('.panel-title')\r\n\t\t\t\t\t\t\t\t\t.addClass('panel-with-icon');\r\n\t\t\t\t\t\t\t$('<div class=\"panel-icon\"></div>')\r\n\t\t\t\t\t\t\t\t\t.addClass(opts.iconCls).appendTo(header);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tvar tool = $('<div class=\"panel-tool\"></div>')\r\n\t\t\t\t\t\t\t\t.appendTo(header);\r\n\t\t\t\t\t\tif (opts.closable) {\r\n\t\t\t\t\t\t\t$('<a class=\"panel-tool-close\"></a>')\r\n\t\t\t\t\t\t\t\t\t.appendTo(tool).bind('click', function(){\r\n\t\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\t\t_self.trigger(\"onClose\",target)\r\n\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (opts.maximizable) {\r\n\t\t\t\t\t\t\t$('<a class=\"panel-tool-max\"></a>')\r\n\t\t\t\t\t\t\t\t\t.appendTo(tool).bind('click', function(){\r\n\t\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\t\t_self.trigger(\"onMax\",target)\r\n\t\t\t\t\t\t\t\t\t} );\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (opts.minimizable) {\r\n\t\t\t\t\t\t\t$('<a class=\"panel-tool-min\"></a>')\r\n\t\t\t\t\t\t\t\t\t.appendTo(tool).bind('click',  function(){\r\n\t\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\t\t_self.trigger(\"onMin\",target)\r\n\t\t\t\t\t\t\t\t\t} );\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (opts.collapsible) {\r\n\t\t\t\t\t\t\t$('<a class=\"panel-tool-collapse\"></a>')\r\n\t\t\t\t\t\t\t\t\t.appendTo(tool).bind('click', function(){\r\n\t\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\t\tonToggle($(this));\r\n\t\t\t\t\t\t\t\t\t\t_self.trigger(\"onToggle\",target)\r\n\t\t\t\t\t\t\t\t\t} );\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (opts.tools) {\r\n\t\t\t\t\t\t\tif (typeof opts.tools == \"string\") {\r\n\t\t\t\t\t\t\t\t$(opts.tools).children().each(function() {\r\n\t\t\t\t\t\t\t\t\t$(this).addClass($(this).attr(\"iconCls\"))\r\n\t\t\t\t\t\t\t\t\t\t\t.addClass(\"panel-tool-a\")\r\n\t\t\t\t\t\t\t\t\t\t\t.appendTo(tool);\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tfor (var i = 0; i < opts.tools.length; i++) {\r\n\t\t\t\t\t\t\t\t\tvar t = $(\"<a href=\\\"javascript:void(0)\\\"></a>\")\r\n\t\t\t\t\t\t\t\t\t\t\t.addClass(opts.tools[i].iconCls)\r\n\t\t\t\t\t\t\t\t\t\t\t.appendTo(tool);\r\n\t\t\t\t\t\t\t\t\tif (opts.tools[i].handler) {\r\n\t\t\t\t\t\t\t\t\t\tt.bind(\"click\",\r\n\t\t\t\t\t\t\t\t\t\t\t\teval(opts.tools[i].handler));\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t/*\r\n\t\t\t\t\t\t\t * for(var i=opts.tools.length-1; i>=0; i--){ var t =\r\n\t\t\t\t\t\t\t * $('<div></div>').addClass(opts.tools[i].iconCls).appendTo(tool);\r\n\t\t\t\t\t\t\t * if (opts.tools[i].handler){ t.bind('click',\r\n\t\t\t\t\t\t\t * eval(opts.tools[i].handler)); } }\r\n\t\t\t\t\t\t\t */\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\ttool.find('div').hover(function() {\r\n\t\t\t\t\t\t\t\t\t$(this).addClass('panel-tool-over');\r\n\t\t\t\t\t\t\t\t}, function() {\r\n\t\t\t\t\t\t\t\t\t$(this).removeClass('panel-tool-over');\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\tpanel.find('>div.panel-body')\r\n\t\t\t\t\t\t\t\t.removeClass('panel-body-noheader');\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tpanel.find('>div.panel-body')\r\n\t\t\t\t\t\t\t\t.addClass('panel-body-noheader');\r\n\t\t\t\t\t};\r\n\r\n\t\t\t\t\tfunction onToggle(toggleTarget) {\r\n\t\t\t\t\t\tif (toggleTarget.hasClass('panel-tool-expand')) {\r\n\t\t\t\t\t\t\t_self._expandPanel(target, false);\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t_self._collapsePanel(target, false);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t};\r\n\r\n\t\t\t\t\tfunction onMin() {\r\n\t\t\t\t\t\t_self._minimizePanel(target);\r\n\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t};\r\n\r\n\t\t\t\t\tfunction onMax() {\r\n\t\t\t\t\t\tif ($(this).hasClass('panel-tool-restore')) {\r\n\t\t\t\t\t\t\t_self._restorePanel(target);\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t_self._maximizePanel(target);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t};\r\n\r\n\t\t\t\t\tfunction onClose() {\r\n\t\t\t\t\t\t_self._closePanel(target);\r\n\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t};\r\n\t\t\t\t},\r\n\r\n\t\t\t\t/**\r\n\t\t\t\t * load content from remote site if the href attribute is\r\n\t\t\t\t * defined\r\n\t\t\t\t */\r\n\t\t\t\tloadData : function(target) {\r\n\r\n\t\t\t\t\tvar panel = $.data(target, \"panel\");\r\n\t\t\t\t\tvar opts = panel.options;\r\n\t\t\t\t\tvar me=this;\r\n\t\t\t\t\tif (opts.href) {\r\n\t\t\t\t\t\tif (!panel.isLoaded || !opts.cache) {\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tif (this.trigger(\"onBeforeLoad\",target) == false) {\r\n\t\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tpanel.isLoaded = false;\r\n\t\t\t\t\t\t\tdestroyContent(target);\r\n\t\t\t\t\t\t\tif (opts.loadingMessage) {\r\n\t\t\t\t\t\t\t\t$(target)\r\n\t\t\t\t\t\t\t\t\t\t.html($(\"<div class=\\\"panel-loading\\\"></div>\")\r\n\t\t\t\t\t\t\t\t\t\t\t\t.html(opts.loadingMessage));\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t$.ajax({\r\n\t\t\t\t\t\t\t\t\t\turl : opts.href,\r\n\t\t\t\t\t\t\t\t\t\tcache : false,\r\n\t\t\t\t\t\t\t\t\t\tdataType : \"html\",\r\n\t\t\t\t\t\t\t\t\t\tsuccess : function(data, textStatus) {\r\n\t\t\t\t\t\t\t\t\t\t\tsetHtml(opts.extractor.call(target,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tdata));\r\n\t\t\t\t\t\t\t\t\t\t\tme.trigger(\"onLoad\",target,arguments) \r\n\t\t\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\t\t\tpanel.isLoaded = true;\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tif (opts.content) {\r\n\t\t\t\t\t\t\tif (!panel.isLoaded) {\r\n\t\t\t\t\t\t\t\tdestroyContent(target);\r\n\t\t\t\t\t\t\t\tsetHtml(opts.content);\r\n\t\t\t\t\t\t\t\tpanel.isLoaded = true;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tfunction setHtml(html) {\r\n\t\t\t\t\t\t$(target).html(html);\r\n\t\t\t\t\t\tif ($.parser) {\r\n\t\t\t\t\t\t\t$.parser.parse($(target));\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t};\r\n\t\t\t\t\t/*\r\n\t\t\t\t\t * var state = $.data(target, 'panel'); if\r\n\t\t\t\t\t * (state.options.href && (!state.isLoaded ||\r\n\t\t\t\t\t * !state.options.cache)){ state.isLoaded = false; var pbody =\r\n\t\t\t\t\t * state.panel.find('>div.panel-body'); pbody.html($('<div\r\n\t\t\t\t\t * class=\"panel-loading\"></div>').html(state.options.loadingMessage));\r\n\t\t\t\t\t * pbody.load(state.options.href, null, function(){ if\r\n\t\t\t\t\t * ($.parser){ $.parser.parse(pbody); }\r\n\t\t\t\t\t * state.options.onLoad.apply(target, arguments);\r\n\t\t\t\t\t * state.isLoaded = true; }); }\r\n\t\t\t\t\t */\r\n\t\t\t\t},\r\n\r\n\t\t\t\tdestroyContent : function(target) {\r\n\t\t\t\t\tvar t = $(target);\r\n\t\t\t\t\tt.find(\".combo-f\").each(function() {\r\n\t\t\t\t\t\t\t\t$(this).combo(\"destroy\");\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\tt.find(\".m-btn\").each(function() {\r\n\t\t\t\t\t\t\t\t$(this).menubutton(\"destroy\");\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\tt.find(\".s-btn\").each(function() {\r\n\t\t\t\t\t\t\t\t$(this).splitbutton(\"destroy\");\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t// t.find(\".tooltip-f\").tooltip(\"destroy\");\r\n\t\t\t\t},\r\n\t\t\t\tdestroy : function(target, forceOpen) {\r\n\t\t\t\t\tvar opts = $.data(target, 'panel').options;\r\n\t\t\t\t\tvar panel = $.data(target, 'panel').panel;\r\n\r\n\t\t\t\t\tif (forceDestroy != true) {\r\n\t\t\t\t\t\tif (this.trigger(\"onBeforeDestroy\",target) == false)\r\n\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tthis.removeNode(panel);\r\n\t\t\t\t\r\n\t\t\t\t\tthis.trigger(\"onDestroy\",target)\r\n\t\t\t\t},\r\n\t\t\t\t_openPanel : function(target, forceOpen) {\r\n\t\t\t\t\tvar opts = $.data(target, 'panel').options;\r\n\t\t\t\t\tvar panel = $.data(target, 'panel').panel;\r\n\r\n\t\t\t\t\tif (forceOpen != true) {\r\n\t\t\t\t\t\tif (this.trigger(\"onBeforeOpen\",target) == false)\r\n\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tpanel.show();\r\n\t\t\t\t\topts.closed = false;\r\n\t\t\t\t\topts.minimized = false;\r\n\t\t\t\t\tvar restore = panel.children(\"div.panel-header\")\r\n\t\t\t\t\t\t\t.find(\"a.panel-tool-restore\");\r\n\t\t\t\t\tif (restore.length) {\r\n\t\t\t\t\t\topts.maximized = true;\r\n\t\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\t\tthis.trigger(\"onOpen\",target)\r\n\t\t\t\t\tif (opts.maximized == true) {\r\n\t\t\t\t\t\t_maximizePanel(target);\r\n\t\t\t\t\t\topts.maximized = false;\r\n\t\t\t\t\t}\r\n\t\t\t\t\t// if (opts.minimized == true) _minimizePanel(target);\r\n\t\t\t\t\tif (opts.collapsed == true) {\r\n\t\t\t\t\t\topts.collapsed = false;\r\n\t\t\t\t\t\tthis._collapsePanel(target);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (!opts.collapsed) {\r\n\t\t\t\t\t\tthis.loadData(target);\r\n\t\t\t\t\t\tthis.doLayout(target);\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\r\n\t\t\t\t_closePanel : function(target, forceClose) {\r\n\t\t\t\t\tvar opts = $.data(target, 'panel').options;\r\n\t\t\t\t\tvar panel = $.data(target, 'panel').panel;\r\n\r\n\t\t\t\t\tif (forceClose != true) {\r\n\t\t\t\t\t\tif (this.trigger(\"onBeforeClose\",target) == false)\r\n\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tpanel.hide();\r\n\t\t\t\t\topts.closed = true;\r\n\t\t\t\t\t//opts.onClose.call(target);\r\n\r\n\t\t\t\t\tthis.trigger(\"onClose\",target) \r\n\r\n\t\t\t\t},\r\n\r\n\t\t\t\t_destroyPanel : function(target, forceDestroy) {\r\n\t\t\t\t\tvar opts = $.data(target, 'panel').options;\r\n\t\t\t\t\tvar panel = $.data(target, 'panel').panel;\r\n\r\n\t\t\t\t\tif (forceDestroy != true) {\r\n\t\t\t\t\t\tif (this.trigger(\"onBeforeDestroy\",target)  == false)\r\n\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tthis.removeNode(panel);\r\n\t\t\t\t\tthis.trigger(\"onDestroy\",target);\r\n\t\t\t\t},\r\n\r\n\t\t\t\t_collapsePanel : function(target, animate) {\r\n\t\t\t\t\tvar _self=this;\r\n\t\t\t\t\tvar opts = $.data(target, 'panel').options;\r\n\t\t\t\t\tvar panel = $.data(target, 'panel').panel;\r\n\t\t\t\t\tvar body = panel.find('>div.panel-body');\r\n\t\t\t\t\tvar tool = panel\r\n\t\t\t\t\t\t\t.find('>div.panel-header .panel-tool-collapse');\r\n\r\n\t\t\t\t\t/*\r\n\t\t\t\t\t * if (tool.hasClass('panel-tool-expand')) return;\r\n\t\t\t\t\t */\r\n\t\t\t\t\t\r\n\t\t\t\t\tbody.stop(true, true); // stop animation\r\n\t\t\t\t\tif (this.trigger(\"onBeforeCollapse\",target) == false)\r\n\t\t\t\t\t\treturn;\r\n\r\n\t\t\t\t\ttool.addClass('panel-tool-expand');\r\n\t\t\t\t\tif (animate == true) {\r\n\t\t\t\t\t\tbody.slideUp('normal', function() {\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\topts.collapsed = true;\r\n\t\t\t\t\t\t\t\t\t_self.trigger(\"onCollapse\",target) \r\n\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tbody.hide();\r\n\t\t\t\t\t\topts.collapsed = true;\r\n\t\t\t\t\t\t_self.trigger(\"onCollapse\",target) \r\n\r\n\t\t\t\t\t}\r\n\t\t\t\t\r\n\r\n\t\t\t\t},\r\n\r\n\t\t\t\t_expandPanel : function(target, animate) {\r\n\t\t\t\t\tvar _self=this;\r\n\t\t\t\t\tvar opts = $.data(target, \"panel\").options;\r\n\t\t\t\t\tvar panel = $.data(target, \"panel\").panel;\r\n\t\t\t\t\tvar body = panel.children(\"div.panel-body\");\r\n\t\t\t\t\tvar _self = this;\r\n\t\t\t\t\tvar header = panel.children(\"div.panel-header\")\r\n\t\t\t\t\t\t\t.find(\"a.panel-tool-collapse\");\r\n\t\t\t\t\tif (opts.collapsed == false) {\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tbody.stop(true, true);\r\n\t\t\t\t\tif (this.trigger(\"onBeforeExpand\",target) == false) {\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\t\t\t\t\theader.removeClass(\"panel-tool-expand\");\r\n\t\t\t\t\tif (animate == true) {\r\n\t\t\t\t\t\tbody.slideDown(\"normal\", function() {\r\n\t\t\t\t\t\t\t\t\topts.collapsed = false;\r\n\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\t_self.trigger(\"onExpand\",target)\r\n\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\t_self.loadData(target);\r\n\t\t\t\t\t\t\t\t\t_self.doLayout(target);\r\n\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tbody.show();\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\topts.collapsed = false;\r\n\t\t\t\t\t\t_self.trigger(\"onExpand\",target)\r\n\t\t\t\t\t\t_self.loadData(target);\r\n\t\t\t\t\t\t_self.doLayout(target);\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\r\n\t\t\t\t\t/*\r\n\t\t\t\t\t * var opts = $.data(target, 'panel').options; var panel =\r\n\t\t\t\t\t * $.data(target, 'panel').panel; var body =\r\n\t\t\t\t\t * panel.find('>div.panel-body'); var tool =\r\n\t\t\t\t\t * panel.find('>div.panel-header .panel-tool-collapse');\r\n\t\t\t\t\t * \r\n\t\t\t\t\t * if (!tool.hasClass('panel-tool-expand')) return;\r\n\t\t\t\t\t * \r\n\t\t\t\t\t * body.stop(true, true); // stop animation if\r\n\t\t\t\t\t * (opts.onBeforeExpand.call(target) == false) return;\r\n\t\t\t\t\t * \r\n\t\t\t\t\t * tool.removeClass('panel-tool-expand'); if (animate ==\r\n\t\t\t\t\t * true){ body.slideDown('normal', function(){\r\n\t\t\t\t\t * opts.collapsed = false; opts.onExpand.call(target);\r\n\t\t\t\t\t * loadData(target); }); } else { body.show();\r\n\t\t\t\t\t * opts.collapsed = false; opts.onExpand.call(target);\r\n\t\t\t\t\t * loadData(target); }\r\n\t\t\t\t\t */\r\n\t\t\t\t},\r\n\r\n\t\t\t\tdoLayout : function(target) {\r\n\t\t\t\t\tvar $body = $(target).panel(\"body\");\r\n\t\t\t\t\tvar h = $body.height();\r\n\t\t\t\t\tvar w = $body.width();\r\n\r\n\t\t\t\t\tif ($body.data(\"layoutObj\")) {\r\n\t\t\t\t\t\t$body.layout(\"resize\");\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif ($body.data(\"HBoxLayout\") || $body.data(\"VBoxLayout\")) {\r\n\t\t\t\t\t\t$body.triggerHandler('_resize');\r\n\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\t$body\r\n\t\t\t\t\t\t\t\t.children(\"div.panel:visible,div.app-grid:visible,div.accordion:visible,div.tabs-container:visible,div.layout:visible,div.xquery:visible,div.grid-container:visible,div.ztree-container:visible,div.app-vboxLayout:visible,div.app-hboxLayout:visible,div.datagrid:visible,div.tab-container:visible\")\r\n\t\t\t\t\t\t\t\t.each(function() {\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\t$(this).triggerHandler(\"_resize\",\r\n\t\t\t\t\t\t\t\t\t\t\t[true, w, h, $(target)]);\r\n\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\t_maximizePanel : function(target) {\r\n\t\t\t\t\tvar opts = $.data(target, 'panel').options;\r\n\t\t\t\t\tvar panel = $.data(target, 'panel').panel;\r\n\t\t\t\t\tvar tool = panel.find('>div.panel-header .panel-tool-max');\r\n\r\n\t\t\t\t\tif (tool.hasClass('panel-tool-restore'))\r\n\t\t\t\t\t\treturn;\r\n\r\n\t\t\t\t\ttool.addClass('panel-tool-restore');\r\n\r\n\t\t\t\t\t$.data(target, 'panel').original = {\r\n\t\t\t\t\t\twidth : opts.width,\r\n\t\t\t\t\t\theight : opts.height,\r\n\t\t\t\t\t\tleft : opts.left,\r\n\t\t\t\t\t\ttop : opts.top,\r\n\t\t\t\t\t\tfit : opts.fit\r\n\t\t\t\t\t};\r\n\t\t\t\t\topts.left = 0;\r\n\t\t\t\t\topts.top = 0;\r\n\t\t\t\t\topts.fit = true;\r\n\t\t\t\t\tthis._setSize(target);\r\n\t\t\t\t\topts.minimized = false;\r\n\t\t\t\t\topts.maximized = true;\r\n\t\t\t\t\tthis.trigger(\"onMaximize\",target,target)\r\n\r\n\t\t\t\t},\r\n\r\n\t\t\t\t_minimizePanel : function(target) {\r\n\t\t\t\t\tvar opts = $.data(target, 'panel').options;\r\n\t\t\t\t\tvar panel = $.data(target, 'panel').panel;\r\n\t\t\t\t\tpanel.hide();\r\n\t\t\t\t\topts.minimized = true;\r\n\t\t\t\t\topts.maximized = false;\r\n\t\t\t\t\t//opts.onMinimize.call(target);\r\n\t\t\t\t\tthis.trigger(\"onMinimize\",target,target)\r\n\t\t\t\t},\r\n\r\n\t\t\t\t_restorePanel : function(target) {\r\n\t\t\t\t\tvar opts = $.data(target, 'panel').options;\r\n\t\t\t\t\tvar panel = $.data(target, 'panel').panel;\r\n\t\t\t\t\tvar tool = panel.find('>div.panel-header .panel-tool-max');\r\n\r\n\t\t\t\t\tif (!tool.hasClass('panel-tool-restore'))\r\n\t\t\t\t\t\treturn;\r\n\r\n\t\t\t\t\tpanel.show();\r\n\t\t\t\t\ttool.removeClass('panel-tool-restore');\r\n\t\t\t\t\tvar original = $.data(target, 'panel').original;\r\n\t\t\t\t\topts.width = original.width;\r\n\t\t\t\t\topts.height = original.height;\r\n\t\t\t\t\topts.left = original.left;\r\n\t\t\t\t\topts.top = original.top;\r\n\t\t\t\t\topts.fit = original.fit;\r\n\t\t\t\t\tthis._setSize(target);\r\n\t\t\t\t\topts.minimized = false;\r\n\t\t\t\t\topts.maximized = false;\r\n\t\t\t\t\t//opts.onRestore.call(target);\r\n\t\t\t\t\tthis.trigger(\"onResize\",target)\r\n\t\t\t\t},\r\n\r\n\t\t\t\tsetBorder : function(target) {\r\n\t\t\t\t\tvar opts = $.data(target, 'panel').options;\r\n\t\t\t\t\tvar panel = $.data(target, 'panel').panel;\r\n\t\t\t\t\tvar header = $(target).panel(\"header\");\r\n\t\t\t\t\tvar body = $(target).panel(\"body\");\r\n\t\t\t\t\tpanel.css(opts.style);\r\n\t\t\t\t\tpanel.addClass(opts.cls);\r\n\r\n\t\t\t\t\tif (opts.border == true) {\r\n\t\t\t\t\t\tpanel.find('>div.panel-header')\r\n\t\t\t\t\t\t\t\t.removeClass('panel-header-noborder');\r\n\t\t\t\t\t\tpanel.find('>div.panel-body')\r\n\t\t\t\t\t\t\t\t.removeClass('panel-body-noborder');\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tpanel.find('>div.panel-header')\r\n\t\t\t\t\t\t\t\t.addClass('panel-header-noborder');\r\n\t\t\t\t\t\tpanel.find('>div.panel-body')\r\n\t\t\t\t\t\t\t\t.addClass('panel-body-noborder');\r\n\t\t\t\t\t}\r\n\t\t\t\t\theader.addClass(opts.headerCls);\r\n\t\t\t\t\tbody.addClass(opts.bodyCls);\r\n\t\t\t\t\tif (opts.id) {\r\n\t\t\t\t\t\t$(target).attr(\"id\", opts.id);\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\t$(target).attr(\"id\", \"\");\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\tsetTitle : function(target, title) {\r\n\t\t\t\t\t$.data(target, 'panel').options.title = title;\r\n\t\t\t\t\t$(target).panel('header').find('div.panel-title')\r\n\t\t\t\t\t\t\t.html(title);\r\n\t\t\t\t},\r\n\t\t\t\toptions : function(target) {\r\n\t\t\t\t\treturn $.data(target, 'panel').options;\r\n\t\t\t\t},\r\n\t\t\t\tpanel : function(target) {\r\n\t\t\t\t\treturn $.data(target, 'panel').panel;\r\n\t\t\t\t},\r\n\t\t\t\theader : function(target) {\r\n\t\t\t\t\treturn $.data(target, 'panel').panel\r\n\t\t\t\t\t\t\t.find('>div.panel-header');\r\n\t\t\t\t},\r\n\t\t\t\tbody : function(target) {\r\n\t\t\t\t\treturn $.data(target, 'panel').panel\r\n\t\t\t\t\t\t\t.find('>div.panel-body');\r\n\t\t\t\t},\r\n\t\t\t\topen : function(target, param) {\r\n\t\t\t\t\tvar opts = this.options(target);\r\n\t\t\t\t\tthis._openPanel(target, param);\r\n\t\t\t\t\tif (opts[\"layout\"]) {\r\n\t\t\t\t\t\topts[\"layout\"].layout(\"resize\");\r\n\t\t\t\t\t}\r\n\t\t\t\t\t$(\".xquery\",target).show();\r\n\t\t\t\t},\r\n\t\t\t\tclose : function(target, param) {\r\n\t\t\t\t\tvar opts = this.options(target);\r\n\r\n\t\t\t\t\tthis._closePanel(target, param);\r\n\t\t\t\t\tif (opts[\"layout\"]) {\r\n\t\t\t\t\t\topts[\"layout\"].layout(\"resize\");\r\n\t\t\t\t\t}\r\n\t\t\t\t\t$(\".xquery\",target).hide();\r\n\t\t\t\t},\r\n\t\t\t\tdestroy : function(target, param) {\r\n\t\t\t\t\tthis._destroyPanel(target, param);\r\n\t\t\t\t},\r\n\t\t\t\trefresh : function(target, param) {\r\n\t\t\t\t\t$.data(target, 'panel').isLoaded = false;\r\n\t\t\t\t\tthis.loadData(this);\r\n\t\t\t\t},\r\n\t\t\t\tresize : function(target, param) {\r\n\t\t\t\t\tthis._setSize(target, param);\r\n\t\t\t\t},\r\n\t\t\t\tmove : function(target, param) {\r\n\t\t\t\t\tthis._movePanel(target, param);\r\n\t\t\t\t},\r\n\t\t\t\thide : function(target, param) {\r\n\t\t\t\t\tthis.close(target, param);\r\n\r\n\t\t\t\t},\r\n\t\t\t\tshow : function(target, param) {\r\n\t\t\t\t\tthis.open(target, param);\r\n\r\n\t\t\t\t},\r\n\r\n\t\t\t\tmaximize : function(target, param) {\r\n\t\t\t\t\tthis._maximizePanel(target, param);\r\n\t\t\t\t},\r\n\t\t\t\tminimize : function(target, param) {\r\n\t\t\t\t\tthis._minimizePanel(target, param);\r\n\t\t\t\t},\r\n\t\t\t\trestore : function(target) {\r\n\t\t\t\t\tthis._restorePanel(target);\r\n\t\t\t\t},\r\n\t\t\t\tcollapse : function(target, param) {\r\n\t\t\t\t\tthis._collapsePanel(target, param);\r\n\t\t\t\t},\r\n\t\t\t\texpand : function(target, param) {\r\n\t\t\t\t\tthis._expandPanel(target, param);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\tPanel.parseOptions = function(target) {\r\n\t\t\t\tvar t = $(target);\r\n\t\t\t\tvar padding = [];\r\n\t\t\t\tvar margins = [];\r\n\t\t\t\tvar options=t.parseOptions(target, [\"id\",\r\n\t\t\t\t\t\t\t\t\t\t\"width\", \"height\", \"left\", \"top\",\r\n\t\t\t\t\t\t\t\t\t\t\"title\", \"iconCls\", \"cls\", \"headerCls\",\r\n\t\t\t\t\t\t\t\t\t\t\"bodyCls\", \"tools\", \"region\", \"href\", {\r\n\t\t\t\t\t\t\t\t\t\t\tcache : \"boolean\",\r\n\t\t\t\t\t\t\t\t\t\t\tfit : \"boolean\",\r\n\t\t\t\t\t\t\t\t\t\t\tborder : \"boolean\",\r\n\t\t\t\t\t\t\t\t\t\t\tnoheader : \"boolean\"\r\n\t\t\t\t\t\t\t\t\t\t}, {\r\n\t\t\t\t\t\t\t\t\t\t\tcollapsible : \"boolean\",\r\n\t\t\t\t\t\t\t\t\t\t\tminimizable : \"boolean\",\r\n\t\t\t\t\t\t\t\t\t\t\tmaximizable : \"boolean\",\r\n\t\t\t\t\t\t\t\t\t\t\twidth : \"number\",\r\n\t\t\t\t\t\t\t\t\t\t\theight : \"number\"\r\n\t\t\t\t\t\t\t\t\t\t}, {\r\n\t\t\t\t\t\t\t\t\t\t\tclosable : \"boolean\",\r\n\t\t\t\t\t\t\t\t\t\t\tcollapsed : \"boolean\",\r\n\t\t\t\t\t\t\t\t\t\t\tminimized : \"boolean\",\r\n\t\t\t\t\t\t\t\t\t\t\tmaximized : \"boolean\",\r\n\t\t\t\t\t\t\t\t\t\t\tclosed : \"boolean\"\r\n\t\t\t\t\t\t\t\t\t\t}])\r\n\t\t\t\t options= $.extend(options,  {\r\n\t\t\t\t\t\t\tloadingMessage : (t.attr(\"loadingMessage\") != undefined\r\n\t\t\t\t\t\t\t\t\t? t.attr(\"loadingMessage\")\r\n\t\t\t\t\t\t\t\t\t: undefined)\r\n\t\t\t\t\t\t});\r\n\r\n\t\t\t\tif (options[\"width\"] && options[\"width\"] != \"auto\") {\r\n\t\t\t\t\toptions[\"width\"] = parseInt(options[\"width\"]);\r\n\t\t\t\t}\r\n\t\t\t\tif (options[\"height\"] && options[\"height\"] != \"auto\") {\r\n\t\t\t\t\toptions[\"height\"] = parseInt(options[\"height\"]);\r\n\t\t\t\t}\r\n\t\t\t\treturn options;\r\n\r\n\t\t\t};\r\n\t\t\t$.fn.panel = function(options, param) {\r\n\t\t\t// console.log(arguments)\r\n\t\t\t\tvar methodReturn;\r\n\r\n\t\t\t\toptions = options || {};\r\n\t\t\t\t$set = this.each(function() {\r\n\t\t\t\t\t\t\tvar $this = $(this);\r\n\t\t\t\t\t\t\tvar state = $.data(this, 'panel');\r\n\t\t\t\t\t\t\tvar data = $this.data('panelObj');\r\n\t\t\t\t\t\t\tif (state) {\r\n\t\t\t\t\t\t\t\tif (typeof options === 'object') {\r\n\t\t\t\t\t\t\t\t\topts = $.extend(state.options, options);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tdata = new Panel(this, options);\r\n\t\t\t\t\t\t\t\t$this.data('panelObj', data);\r\n\t\t\t\t\t\t\t\tdata._init(this);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tif (typeof options === 'string')\r\n\t\t\t\t\t\t\t\tmethodReturn = data[options](this, param);\r\n\t\t\t\t\t\t});\r\n\t\t\t\treturn (methodReturn === undefined) ? $set : methodReturn;\r\n\t\t\t};\r\n\r\n\t\t\treturn Panel;\r\n\t\t});\r\n\n",
    "define('app/widgets/layout/app-containerLayout',[\"app/core/app-jquery\", \"app/core/app-core\", \"app/widgets/app-widget\"], function($, $A,\r\n\t\t\t\tWidget) {\r\n\t\t\tContainerLayout = Widget.extend({\r\n\t\t\t\t\t\tparseMargins : function(v) {\r\n\t\t\t\t\t\t\tif ($.isNumeric(v)) {\r\n\t\t\t\t\t\t\t\tv = v.toString();\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tvar ms = v.split(' '), len = ms.length;\r\n\r\n\t\t\t\t\t\t\tif (len == 1) {\r\n\t\t\t\t\t\t\t\tms[1] = ms[2] = ms[3] = ms[0];\r\n\t\t\t\t\t\t\t} else if (len == 2) {\r\n\t\t\t\t\t\t\t\tms[2] = ms[0];\r\n\t\t\t\t\t\t\t\tms[3] = ms[1];\r\n\t\t\t\t\t\t\t} else if (len == 3) {\r\n\t\t\t\t\t\t\t\tms[3] = ms[1];\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\treturn {\r\n\t\t\t\t\t\t\t\ttop : parseInt(ms[0], 10) || 0,\r\n\t\t\t\t\t\t\t\tright : parseInt(ms[1], 10) || 0,\r\n\t\t\t\t\t\t\t\tbottom : parseInt(ms[2], 10) || 0,\r\n\t\t\t\t\t\t\t\tleft : parseInt(ms[3], 10) || 0\r\n\t\t\t\t\t\t\t};\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tgetPadding : function(target) {\r\n\t\t\t\t\t\t\tvar padding = [];\r\n\t\t\t\t\t\t\t$.map(\t[\"padding-top\", \"padding-right\",\r\n\t\t\t\t\t\t\t\t\t\t\t\"padding-bottom\", \"padding-left\"],\r\n\t\t\t\t\t\t\t\t\tfunction(p) {\r\n\t\t\t\t\t\t\t\t\t\tvar pv = $.trim(target.style[p] || '0');\r\n\t\t\t\t\t\t\t\t\t\tif (pv) {\r\n\t\t\t\t\t\t\t\t\t\t\tif (pv.indexOf('%') == -1) {\r\n\t\t\t\t\t\t\t\t\t\t\t\tpv = parseInt(pv) || 0;\r\n\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\tpadding.push(pv);\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\treturn this.parseMargins(padding.join(\" \"));\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tgetMargins : function(target) {\r\n\t\t\t\t\t\t\tvar margins = [];\r\n\t\t\t\t\t\t\t$.map(\t[\"margin-top\", \"margin-right\",\r\n\t\t\t\t\t\t\t\t\t\t\t\"margin-bottom\", \"margin-left\"],\r\n\t\t\t\t\t\t\t\t\tfunction(p) {\r\n\t\t\t\t\t\t\t\t\t\tvar pv = $.trim(target.style[p] || '0');\r\n\t\t\t\t\t\t\t\t\t\tif (pv) {\r\n\t\t\t\t\t\t\t\t\t\t\tif (pv.indexOf('%') == -1) {\r\n\t\t\t\t\t\t\t\t\t\t\t\tpv = parseInt(pv) || 0;\r\n\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\tmargins.push(pv);\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\treturn this.parseMargins(margins.join(\" \"));\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\treturn ContainerLayout;\r\n\r\n\t\t});\n",
    "define(\r\n\t\t'app/widgets/layout/app-boxlayout',[\"app/core/app-jquery\", \"app/core/app-core\", \"app/core/app-options\",\r\n\t\t\t\t\"app/widgets/app-resizable\", \"app/widgets/panel/app-panel\", \"app/widgets/layout/app-containerLayout\"],\r\n\t\tfunction($, $A, Options, resizable, Panel, ContainerLayout) {\r\n\r\n\t\t\tvar BoxLayout = ContainerLayout.extend({\r\n\t\t\t\tattrs : {\r\n\t\t\t\t\ttype : null,\r\n\t\t\t\t\titems : [],\r\n\t\t\t\t\tfit : null,\r\n\t\t\t\t\twidth : null,\r\n\t\t\t\t\theight : null,\r\n\t\t\t\t\tpadding : null,\r\n\t\t\t\t\tmargins : null\r\n\t\t\t\t},\r\n\t\t\t\tinitialize : function(options) {\r\n\t\t\t\t\tif (!options) {\r\n\t\t\t\t\t\toptions = {};\r\n\t\t\t\t\t};\r\n\t\t\t\t\tBoxLayout.superclass.initialize.call(this, options);\r\n\t\t\t\t\toptions = $.extend({}, this.parseOptions(), options);\r\n\t\t\t\t\tthis.initAttrs(options);\r\n\t\t\t\t\tthis.padding = this.padding\r\n\t\t\t\t\t\t\t|| this.getPadding(this.element);\r\n\t\t\t\t\tthis.margins = this.margins\r\n\t\t\t\t\t\t\t|| this.getMargins(this.element);\r\n\t\t\t\t\tthis.init();\r\n\r\n\t\t\t\t\tif (!this.get(\"width\")) {\r\n\t\t\t\t\t\tif ($(this.element).width()){\r\n\t\t\t\t\t\t\tthis.set(\"width\", $(this.element).width());\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (!this.get(\"height\")) {\r\n\t\t\t\t\t\tif ($(this.element).width()){\r\n\t\t\t\t\t\tthis.set(\"height\", $(this.element).height());\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tthis.setSize({\r\n\t\t\t\t\t\t\t\twidth : this.get(\"width\"),\r\n\t\t\t\t\t\t\t\theight : this.get(\"height\")\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\tvar _self = this;\r\n\t\t\t\t\t$(this.element).bind('_resize', function() {\r\n\t\t\t\t\t\t\t\t//if (_self.get(\"fit\") == true) {\r\n\t\t\t\t\t\t\t\t\t_self.setSize();\r\n\t\t\t\t\t\t\t\t//}\r\n\t\t\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t},\r\n\t\t\t\tparseOptions : function() {\r\n\t\t\t\t\tvar t = $(this.element);\r\n\t\t\t\t\treturn $.extend({}, t.parseOptions(this.element, [\"fit\",\r\n\t\t\t\t\t\t\t\t\t\t\t\"id\"]));\r\n\t\t\t\t},\r\n\t\t\t\tsetSize : function(param) {\r\n\t\t\t\t\tvar opts = this.attrs;\r\n\t\t\t\t\tvar container = this.element;\r\n\t\t\t\t\tvar cc = $(container);\r\n\t\t\t\t\tif (param) {\r\n\t\t\t\t\t\t$.extend(opts, {\r\n\t\t\t\t\t\t\t\t\twidth : param.width||1,\r\n\t\t\t\t\t\t\t\t\theight : param.height||1\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\tcc.width(opts.width).height(opts.height);\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif (this.get(\"fit\") == true) {\r\n\t\t\t\t\t\tvar p = cc.parent();\r\n\t\t\t\t\t\tvar width=p.innerWidth()?p.innerWidth():1;\r\n\t\t\t\t\t\tvar height=p.innerHeight()?p.innerHeight():1;\r\n\t\t\t\t\t\tcc.outerWidth(width).outerHeight(height);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tthis.doLayout();\r\n\t\t\t\t},\r\n\t\t\t\tresize : function() {\r\n\t\t\t\t},\r\n\t\t\t\t//需要反复用到的\r\n\t\t\t\tinitProps : function() {\r\n\t\t\t\t\tthis.items = this.get('items');\r\n\t\t\t\t\tthis.padding = this.get('padding');\r\n\t\t\t\t\tthis.padding = this.get('margins');\r\n\t\t\t\t},\r\n\r\n\t\t\t\tinit : function() {\r\n\t\t\t\t\tvar _self = this;\r\n\r\n\t\t\t\t\t$(this.element).addClass('layout').children(\"div\").each(\r\n\t\t\t\t\t\t\tfunction() {\r\n\t\t\t\t\t\t\t\tvar panelOptions = _self\r\n\t\t\t\t\t\t\t\t\t\t.parsePanelOptions(this);\r\n\t\t\t\t\t\t\t\tpanelOptions[\"padding\"] = _self\r\n\t\t\t\t\t\t\t\t\t\t.getPadding(this);\r\n\t\t\t\t\t\t\t\tpanelOptions[\"margins\"] = _self\r\n\t\t\t\t\t\t\t\t\t\t.getMargins(this);\r\n\r\n\t\t\t\t\t\t\t\t$(this).removeClass(\"app-panel\");\r\n\t\t\t\t\t\t\t\t_self.items.push(_self.createPanel(this,\r\n\t\t\t\t\t\t\t\t\t\tpanelOptions));\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t},\r\n\t\t\t\tparsePanelOptions : function(panel) {\r\n\t\t\t\t\tvar t = $(panel);\r\n\t\t\t\t\treturn $.extend({}, Panel.parseOptions(panel), t\r\n\t\t\t\t\t\t\t\t\t.parseOptions(panel, [{\"fit\":\"boolean\", \"flex\":\"number\", \"height\":\"number\", \"width\":\"number\"}]));\r\n\t\t\t\t},\r\n\t\t\t\tcreatePanel : function(panel, options) {\r\n\t\t\t\t\tvar pp = $(panel, this.element).addClass('layout-body');\r\n\t\t\t\t\tvar config={};\r\n\t\t\t\t\tvar _self=this;\r\n\t\t\t\t\tvar onExpand=function(target){\r\n\t\t\t\t\t\tbodyHeight=$(target).data(\"_panelBodyHeight\")||0;\r\n\t\t\t\t\t\tvar opts = $.data(target, 'panel').options;\r\n\t\t\t\t\t\topts.height=opts.height+bodyHeight;\r\n\t\t\t\t\t\t_self.doLayout();\r\n\t\t\t\t\t};\r\n\t\t\t\t\tvar onCollapse=function(target){\r\n\t\t\t\t\t\tbodyHeight=$(target).panel(\"body\").height();\r\n\t\t\t\t\t\tvar opts = $.data(target, 'panel').options;\r\n\t\t\t\t\t\topts.height=opts.height-bodyHeight;\r\n\t\t\t\t\t\t$(target).data(\"_panelBodyHeight\",bodyHeight);\r\n\t\t\t\t\t\t_self.doLayout();\r\n\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (options.onExpand){\r\n\t\t\t\t\t\toptions.onExpand=function(target){\r\n\t\t\t\t\t\t\toptions.onExpand.call(target);\r\n\t\t\t\t\t\t\tonCollapse(target);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\toptions.onExpand=onExpand;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (options.onCollapse){\r\n\t\t\t\t\t\toptions.onCollapse=function(target){\r\n\t\t\t\t\t\t\toptions.onCollapse.call(target);\r\n\t\t\t\t\t\t\tonCollapse(target);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\toptions.onCollapse=onCollapse\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (this.get(\"type\")==\"vbox\"){\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tconfig={\r\n\t\t\t\t\t\t\t\twidth : (pp.length\r\n\t\t\t\t\t\t\t\t\t\t? parseInt(pp[0].style.width)\r\n\t\t\t\t\t\t\t\t\t\t\t\t|| pp.outerWidth()\r\n\t\t\t\t\t\t\t\t\t\t: \"auto\"),\r\n\t\t\t\t\t\t\t\theight : (options[\"flex\"] ? \"auto\" : pp.length\r\n\t\t\t\t\t\t\t\t\t\t? parseInt(pp[0].style.height)\r\n\t\t\t\t\t\t\t\t\t\t\t\t|| pp.outerHeight()\r\n\t\t\t\t\t\t\t\t\t\t: \"auto\"),\r\n\t\t\t\t\t\t\t\tdoSize : false,\r\n\t\t\t\t\t\t\t\t//tools : [toolItem],\r\n\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\tbodyCls : \"layout-body\",\r\n\t\t\t\t\t\t\t\tcls : 'x-box-item'\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tconfig={\r\n\t\t\t\t\t\t\t\theight : $(this.element).height(),\r\n\t\t\t\t\t\t\t\twidth : (options[\"flex\"] ? \"auto\" : pp.length\r\n\t\t\t\t\t\t\t\t\t\t? parseInt(pp[0].style.width)\r\n\t\t\t\t\t\t\t\t\t\t\t\t|| pp.outerWidth()\r\n\t\t\t\t\t\t\t\t\t\t: \"auto\"),\r\n\t\t\t\t\t\t\t\tdoSize : false,\r\n\t\t\t\t\t\t\t\tbodyCls : \"layout-body\",\r\n\t\t\t\t\t\t\t\tcls : 'x-box-item'\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tvar opt = $.extend({},config , options);\r\n\t\t\t\t\t/*if (this.get(\"type\")==\"vbox\"&&options[\"flex\"]){\r\n\t\t\t\t\t\tdelete opt[\"height\"];\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (this.get(\"type\")==\"hbox\"&&options[\"flex\"]){\r\n\t\t\t\t\t\tdelete opt[\"height\"];\r\n\t\t\t\t\t}*/\r\n\t\t\t\t\treturn $(pp).panel(opt);\r\n\t\t\t\t},\r\n\t\t\t\tupdateInnerCtSize : function() {\r\n\r\n\t\t\t\t},\r\n\t\t\t\tgetVisibleItems : function() {\r\n\t\t\t\t\tvar items = [], panels = this.items, len = panels.length, i, p;\r\n\t\t\t\t\tfor (i = 0; i < len; i++) {\r\n\t\t\t\t\t\tp = panels[i];\r\n\t\t\t\t\t\tvar opts = p.panel(\"options\");\r\n\t\t\t\t\t\tvar panel = p.panel(\"panel\");\r\n\t\t\t\t\t\t// && opts.collapsed !== true\r\n\t\t\t\t\t\tif (opts.closed !== true&& panel.css(\"display\")!=\"none\") {\r\n\t\t\t\t\t\t\titems.push(p);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\treturn items;\r\n\t\t\t\t},\r\n\t\t\t\tgetLayoutTargetSize : function() {\r\n\t\t\t\t\tvar target = $(this.element), ret = null;;\r\n\t\t\t\t\tif (target) {\r\n\t\t\t\t\t\tret = {};\r\n\t\t\t\t\t\tret.height = target.innerHeight();\r\n\t\t\t\t\t\tret.width = target.innerWidth();\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn ret;\r\n\t\t\t\t},\r\n\t\t\t\tdoLayout : function() {\r\n\t\t\t\t\tvar items = this.getVisibleItems(this.element), tSize = this\r\n\t\t\t\t\t\t\t.getLayoutTargetSize();\r\n\t\t\t\t\t/**\r\n\t\t\t\t\t * @private\r\n\t\t\t\t\t * @property layoutTargetLastSize\r\n\t\t\t\t\t * @type Object Private cache of the last measured size of\r\n\t\t\t\t\t *       the layout target. This should never be used except\r\n\t\t\t\t\t *       by BoxLayout subclasses during their onLayout run.\r\n\t\t\t\t\t */\r\n\t\t\t\t\tthis.layoutTargetLastSize = tSize;\r\n\r\n\t\t\t\t\t/**\r\n\t\t\t\t\t * @private\r\n\t\t\t\t\t * @property childBoxCache\r\n\t\t\t\t\t * @type Array Array of the last calculated height, width,\r\n\t\t\t\t\t *       top and left positions of each visible rendered\r\n\t\t\t\t\t *       component within the Box layout.\r\n\t\t\t\t\t */\r\n\t\t\t\t\tthis.childBoxCache = this.calculateChildBoxes(items, tSize);\r\n\t\t\t\t\t//this.updateInnerCtSize(tSize, this.childBoxCache);\r\n\t\t\t\t\tthis.updateChildBoxes(this.childBoxCache.boxes);\r\n\t\t\t\t\t// Putting a box layout into an overflowed container is NOT\r\n\t\t\t\t\t// correct and will make a second layout pass necessary.\r\n\t\t\t\t\t//this.handleTargetOverflow(tSize, container, target);\r\n\t\t\t\t},\r\n\t\t\t\tupdateChildBoxes : function(boxes) {\r\n\t\t\t\t\tfor (var i = 0, length = boxes.length; i < length; i++) {\r\n\t\t\t\t\t\tvar box = boxes[i], comp = box.component;\r\n\r\n\t\t\t\t\t\tif (box.dirtySize) {\r\n\t\t\t\t\t\t\tcomp.panel(\"resize\", box)\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t// Don't set positions to NaN\r\n\t\t\t\t\t\tif (isNaN(box.left) || isNaN(box.top)) {\r\n\t\t\t\t\t\t\tcontinue;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t//comp.setPosition(box.left, box.top);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t\tvar VBoxLayout = BoxLayout.extend({\r\n\t\t\t\tattrs : {\r\n\t\t\t\t\ttype : 'vbox'\r\n\t\t\t\t},\r\n\t\t\t\tcalculateChildBoxes : function(visibleItems, targetSize) {\r\n\t\t\t\t\tvar visibleCount = visibleItems.length, padding = this.padding, topOffset = padding.top, leftOffset = padding.left, paddingHoriz = leftOffset\r\n\t\t\t\t\t\t\t+ padding.right,\r\n\r\n\t\t\t\t\tpaddingVert = topOffset + padding.bottom, paddingHoriz = leftOffset\r\n\t\t\t\t\t\t\t+ padding.right, width = targetSize.width, height = targetSize.height, availWidth = Math\r\n\t\t\t\t\t\t\t.max(0, width - paddingHoriz),\r\n\r\n\t\t\t\t\tnonFlexHeight = 0, maxWidth = 0, totalFlex = 0, childMargins,\r\n\r\n\t\t\t\t\t//used to cache the calculated size and position values for each child item\r\n\t\t\t\t\tboxes = [],\r\n\r\n\t\t\t\t\t//used in the for loops below, just declared here for brevity\r\n\t\t\t\t\tchild, childWidth, childHeight, i, calcs, flexedHeight, opts;\r\n\t\t\t\t\tfor (i = 0; i < visibleCount; i++) {\r\n\t\t\t\t\t\tchild = visibleItems[i], opts = child.panel(\"options\");\r\n\t\t\t\t\t\tchildHeight = opts.height;\r\n\t\t\t\t\t\tchildWidth = opts.width;\r\n\t\t\t\t\t\t// Static height (numeric) requires no calcs\r\n\t\t\t\t\t\t//if (!$.isNumeric(childHeight)) {\r\n\t\t\t\t\t\t// flex and not 'auto' height\r\n\t\t\t\t\t\tif (opts.flex) {\r\n\t\t\t\t\t\t\ttotalFlex += opts.flex;\r\n\t\t\t\t\t\t\tchildHeight = 0;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t//}\r\n\t\t\t\t\t\tchildMargins = opts.margins;\r\n\t\t\t\t\t\tnonFlexHeight += (childHeight || 0) + childMargins.top\r\n\t\t\t\t\t\t\t\t+ childMargins.bottom;\r\n\t\t\t\t\t\t// Max width for align - force layout of non-layed out subcontainers without a numeric width\r\n\t\t\t\t\t\tif (!$.isNumeric(childWidth)) {\r\n\t\t\t\t\t\t\tchildWidth = child._outerWidth();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tmaxWidth = Math.max(maxWidth, childWidth);\r\n\r\n\t\t\t\t\t\t//cache the size of each child component\r\n\t\t\t\t\t\tboxes.push({\r\n\t\t\t\t\t\t\t\t\tcomponent : child,\r\n\t\t\t\t\t\t\t\t\theight : childHeight || undefined,\r\n\t\t\t\t\t\t\t\t\twidth : availWidth || undefined\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t//the height available to the flexed items\r\n\t\t\t\t\tvar availableHeight = Math.max(0,\r\n\t\t\t\t\t\t\t(height - nonFlexHeight - paddingVert));\r\n\r\n\t\t\t\t\t//temporary variables used in the flex height calculations below\r\n\t\t\t\t\tvar remainingHeight = availableHeight, remainingFlex = totalFlex;\r\n\r\n\t\t\t\t\t//calculate the height of each flexed item, and the left + top positions of every item\r\n\t\t\t\t\tfor (i = 0; i < visibleCount; i++) {\r\n\t\t\t\t\t\tchild = visibleItems[i], opts = child.panel(\"options\");\r\n\t\t\t\t\t\tchildHeight = opts.height;\r\n\t\t\t\t\t\tchildWidth = opts.width;\r\n\t\t\t\t\t\tcalcs = boxes[i];\r\n\t\t\t\t\t\tchildMargins = opts.margins;\r\n\r\n\t\t\t\t\t\ttopOffset += childMargins.top;\r\n\t\t\t\t\t\tif (opts.flex) {\r\n\t\t\t\t\t\t\tflexedHeight = Math\r\n\t\t\t\t\t\t\t\t\t.ceil((opts.flex / remainingFlex)\r\n\t\t\t\t\t\t\t\t\t\t\t* remainingHeight);\r\n\t\t\t\t\t\t\tremainingHeight -= flexedHeight;\r\n\t\t\t\t\t\t\tremainingFlex -= opts.flex;\r\n\r\n\t\t\t\t\t\t\tcalcs.height = flexedHeight;\r\n\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tcalcs.dirtySize = true;\r\n\t\t\t\t\t\tcalcs.left = leftOffset;\r\n\t\t\t\t\t\tcalcs.top = topOffset;\r\n\t\t\t\t\t\ttopOffset += calcs.height;\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn {\r\n\t\t\t\t\t\tboxes : boxes,\r\n\t\t\t\t\t\tmeta : {\r\n\t\t\t\t\t\t\tmaxWidth : maxWidth\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t};\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\t$.fn.VBoxLayout = function(options, param) {\r\n\t\t\t\tvar methodReturn = null;\r\n\t\t\t\tvar $set = this.each(function() {\r\n\t\t\t\t\tvar $this = $(this);\r\n\r\n\t\t\t\t\tvar data = $.data(this, 'VBoxLayout');\r\n\t\t\t\t\tif (!data) {\r\n\t\t\t\t\t\tvar opts = $.extend({}, {\r\n\t\t\t\t\t\t\t\t\telement : this\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t$this.data('VBoxLayout', (data = new VBoxLayout(opts)));\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (typeof options == 'string') {\r\n\t\t\t\t\t\tmethodReturn = data[options](this, param);\r\n\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t\treturn (methodReturn === undefined) ? $set : methodReturn;\r\n\t\t\t};\r\n\r\n\t\t\tvar HBoxLayout = BoxLayout.extend({\r\n\t\t\t\tattrs : {\r\n\t\t\t\t\ttype : 'hbox'\r\n\t\t\t\t},\r\n\t\t\t\tcalculateChildBoxes : function(visibleItems, targetSize) {\r\n\t\t\t\t\tvar visibleCount = visibleItems.length, padding = this.padding, topOffset = padding.top, leftOffset = padding.left, paddingHoriz = leftOffset\r\n\t\t\t\t\t\t\t+ padding.right,\r\n\r\n\t\t\t\t\tpaddingVert = topOffset + padding.bottom, paddingHoriz = leftOffset\r\n\t\t\t\t\t\t\t+ padding.right, width = targetSize.width, height = targetSize.height, availHeight = Math\r\n\t\t\t\t\t\t\t.max(0, height - paddingVert),\r\n\r\n\t\t\t\t\tnonFlexWidth = 0, maxHeight = 0, totalFlex = 0, childMargins,\r\n\r\n\t\t\t\t\t//used to cache the calculated size and position values for each child item\r\n\t\t\t\t\tboxes = [],\r\n\r\n\t\t\t\t\t//used in the for loops below, just declared here for brevity\r\n\t\t\t\t\tchild, childWidth, childHeight, i, calcs, flexedWidth, opts;\r\n\t\t\t\t\tfor (i = 0; i < visibleCount; i++) {\r\n\t\t\t\t\t\tchild = visibleItems[i], opts = child.panel(\"options\");\r\n\t\t\t\t\t\tchildHeight = opts.height;\r\n\t\t\t\t\t\tchildWidth = opts.width;\r\n\t\t\t\t\t\t// Static height (numeric) requires no calcs\r\n\t\t\t\t\t\t//if (!$.isNumeric(childWidth)) {\r\n\t\t\t\t\t\t// flex and not 'auto' height\r\n\t\t\t\t\t\tif (opts.flex) {\r\n\t\t\t\t\t\t\ttotalFlex += opts.flex;\r\n\t\t\t\t\t\t\tchildWidth = 0;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t//}\r\n\t\t\t\t\t\tchildMargins = opts.margins||this.getMargins(child);\r\n\t\t\t\t\t\tnonFlexWidth += (childWidth || 0) + childMargins.left\r\n\t\t\t\t\t\t\t\t+ childMargins.right;\r\n\t\t\t\t\t\t// Max width for align - force layout of non-layed out subcontainers without a numeric width\r\n\t\t\t\t\t\tif (!$.isNumeric(childHeight)||childHeight==0) {\r\n\t\t\t\t\t\t\tchildHeight = child._outerHeight();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tmaxHeight = Math.max(maxHeight, childHeight);\r\n\r\n\t\t\t\t\t\t//cache the size of each child component\r\n\t\t\t\t\t\tboxes.push({\r\n\t\t\t\t\t\t\t\t\tcomponent : child,\r\n\t\t\t\t\t\t\t\t\theight : availHeight || undefined,\r\n\t\t\t\t\t\t\t\t\twidth :  childWidth|| undefined\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t//the height available to the flexed items\r\n\t\t\t\t\tvar availableWidth = Math.max(0,\r\n\t\t\t\t\t\t\t(width - nonFlexWidth - paddingVert));\r\n\r\n\t\t\t\t\t//temporary variables used in the flex height calculations below\r\n\t\t\t\t\tvar remainingWidth = availableWidth, remainingFlex = totalFlex;\r\n\r\n\t\t\t\t\t//calculate the height of each flexed item, and the left + top positions of every item\r\n\t\t\t\t\tfor (i = 0; i < visibleCount; i++) {\r\n\t\t\t\t\t\tchild = visibleItems[i], opts = child.panel(\"options\");\r\n\t\t\t\t\t\tchildHeight = opts.height;\r\n\t\t\t\t\t\tchildWidth = opts.width;\r\n\t\t\t\t\t\tcalcs = boxes[i];\r\n\t\t\t\t\t\tchildMargins = opts.margins;\r\n\t\t\t\t\t\ttopOffset += childMargins.top;\r\n\t\t\t\t\t\ttopOffset += childMargins.bottom;\r\n\t\t\t\t\t\r\n\t\t\t\t\t\tif (opts.flex) {\r\n\t\t\t\t\t\t\tflexedWidth = Math.ceil((opts.flex / remainingFlex)\r\n\t\t\t\t\t\t\t\t\t* remainingWidth);\r\n\t\t\t\t\t\t\tremainingWidth -= flexedWidth;\r\n\t\t\t\t\t\t\tremainingFlex -= opts.flex;\r\n\t\t\t\t\t\t\tcalcs.width = flexedWidth;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tcalcs.dirtySize = true;\r\n\t\t\t\t\t\tcalcs.left = leftOffset;\r\n\t\t\t\t\t\tcalcs.top = topOffset;\r\n\t\t\t\t\t\tleftOffset+=childMargins.left;\r\n\t\t\t\t\t\tleftOffset+=childMargins.right;\r\n\t\t\t\t\t\tleftOffset += calcs.width;\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn {\r\n\t\t\t\t\t\tboxes : boxes,\r\n\t\t\t\t\t\tmeta : {\r\n\t\t\t\t\t\t\tmaxHeight : maxHeight\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t};\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\t$.fn.HBoxLayout = function(options, param) {\r\n\t\t\t\tvar methodReturn = null;\r\n\t\t\t\tvar $set = this.each(function() {\r\n\t\t\t\t\tvar $this = $(this);\r\n\r\n\t\t\t\t\tvar data = $.data(this, 'HBoxLayout');\r\n\t\t\t\t\tif (!data) {\r\n\t\t\t\t\t\tvar opts = $.extend({}, {\r\n\t\t\t\t\t\t\t\t\telement : this\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t$this.data('HBoxLayout', (data = new HBoxLayout(opts)));\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (typeof options == 'string') {\r\n\t\t\t\t\t\tmethodReturn = data[options](this, param);\r\n\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t\treturn (methodReturn === undefined) ? $set : methodReturn;\r\n\t\t\t}\r\n\r\n\t\t});\r\n\n",
    "/**\r\n * 应用框架布局\r\n */\r\ndefine('app/widgets/layout/app-layout',[\"app/core/app-jquery\",\"app/core/app-core\"],function($,$A){\r\n\t$.fn.extend({\r\n\t\t/**\r\n\t\t * 取得窗口大小\r\n\t\t */\r\n\t\tgetWindowSize: function(){\r\n\t\t\tif ($.browser.opera) { return { width: window.innerWidth, height: window.innerHeight }; }\r\n\t\t\treturn { width: $(window).width(), height: $(window).height() };\r\n\t\t},\r\n\t\t/**\r\n\t\t * 滚动到屏幕中间\r\n\t\t * @param options 选项\r\n\t\t */\t\t\r\n\t\tscrollCenter: function(options){\r\n\t\t\t// 扩展参数\r\n\t\t\tvar op = $.extend({ z: 1000000, mode:\"WH\"}, options);\r\n\t\t\t\r\n\t\t\t// 追加到 document.body 并设置其样式\r\n\t\t\tvar windowSize = this.getWindowSize();\r\n\t\r\n\t\t\treturn this.each(function(){\r\n\t\t\t\tvar $this = $(this).css({\r\n\t\t\t\t\t'position': 'absolute',\r\n\t\t\t\t\t'z-index': op.z\r\n\t\t\t\t});\r\n\t\t\t\t\r\n\t\t\t\t// 当前位置参数\r\n\t\t\t\tvar bodyScrollTop = $(document).scrollTop();\r\n\t\t\t\tvar bodyScrollLeft = $(document).scrollLeft();\r\n\t\t\t\tvar movedivTop = (windowSize.height - $this.height()) / 2 + bodyScrollTop;\r\n\t\t\t\tvar movedivLeft = (windowSize.width - $this.width()) / 2 + bodyScrollLeft;\r\n\t\t\t\t\r\n\t\t\t\tif (op.mode == \"W\") {\r\n\t\t\t\t\t$this.appendTo(document.body).css({\r\n\t\t\t\t\t\t'left': movedivLeft + 'px'\r\n\t\t\t\t\t});\r\n\t\t\t\t} else if (op.model == \"H\"){\r\n\t\t\t\t\t$this.appendTo(document.body).css({\r\n\t\t\t\t\t\t'top': movedivTop + 'px'\r\n\t\t\t\t\t});\t\r\n\t\t\t\t} else {\r\n\t\t\t\t\t$this.appendTo(document.body).css({\r\n\t\t\t\t\t\t'top': (windowSize.height - $this.height()) / 2 + $(window).scrollTop() + 'px',\r\n\t\t\t\t\t\t'left': movedivLeft + 'px'\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\t// 滚动事件\r\n\t\t\t\t$(window).scroll(function(e){\r\n\t\t\t\t\tvar windowSize = $this.getWindowSize();\r\n\t\t\t\t\tvar tmpBodyScrollTop = $(document).scrollTop();\r\n\t\t\t\t\tvar tmpBodyScrollLeft = $(document).scrollLeft();\r\n\t\t\t\t\t\r\n\t\t\t\t\tmovedivTop += tmpBodyScrollTop - bodyScrollTop;\r\n\t\t\t\t\tmovedivLeft += tmpBodyScrollLeft - bodyScrollLeft;\r\n\t\t\t\t\tbodyScrollTop = tmpBodyScrollTop;\r\n\t\t\t\t\tbodyScrollLeft = tmpBodyScrollLeft;\r\n\t\r\n\t\t\t\t\t// 以动画方式进行移动\r\n\t\t\t\t\tif (op.mode == \"W\") {\r\n\t\t\t\t\t\t$this.stop().animate({\r\n\t\t\t\t\t\t\t'left': movedivLeft + 'px'\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t} else if (op.mode == \"H\") {\r\n\t\t\t\t\t\t$this.stop().animate({\r\n\t\t\t\t\t\t\t'top': movedivTop + 'px'\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\t$this.stop().animate({\r\n\t\t\t\t\t\t\t'top': movedivTop + 'px',\r\n\t\t\t\t\t\t\t'left': movedivLeft + 'px'\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\r\n\t\t\t\t});\r\n\t\t\t\t\r\n\t\t\t\t// 窗口大小重设事件\r\n\t\t\t\t$(window).resize(function(){\r\n\t\t\t\t\tvar windowSize = $this.getWindowSize();\r\n\t\t\t\t\tmovedivTop = (windowSize.height - $this.height()) / 2 + $(document).scrollTop();\r\n\t\t\t\t\tmovedivLeft = (windowSize.width - $this.width()) / 2 + $(document).scrollLeft();\r\n\t\t\t\t\t\r\n\t\t\t\t\tif (op.mode == \"W\") {\r\n\t\t\t\t\t\t$this.stop().animate({\r\n\t\t\t\t\t\t\t'left': movedivLeft + 'px'\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t} else if (op.mode == \"H\") {\r\n\t\t\t\t\t\t$this.stop().animate({\r\n\t\t\t\t\t\t\t'top': movedivTop + 'px'\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\t$this.stop().animate({\r\n\t\t\t\t\t\t\t'top': movedivTop + 'px',\r\n\t\t\t\t\t\t\t'left': movedivLeft + 'px'\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\r\n\t\t\t\t});\r\n\t\t\t});\r\n\t\t\t\r\n\t\t},\r\n\t\t/**\r\n\t\t * 自动调节相对高度\r\n\t\t * @param $refBox{$DOM} 需要调节的范围\r\n\t\t */\r\n\t\tlayoutHeight: function($refBox){\r\n\t\t\treturn this.each(function(){\r\n\t\t\t\tvar $this = $(this);\r\n\t\t\t\t\r\n\t\t\t\tif (! $refBox) $refBox = $this.parents(\"div.layoutBox:first\");\r\n\t\t\t\tvar iRefH = $refBox.height();\r\n\t\t\t\tvar ilayoutHeight = parseInt($this.attr(\"layoutHeight\"));\r\n\t\t\t\tif(isNaN(ilayoutHeight))\r\n\t\t\t\t\treturn;\r\n\t\t\t\tvar iH = iRefH - ilayoutHeight > 50 ? iRefH - ilayoutHeight : 50;\r\n\t\t\t\t\r\n\t\t\t\tif ($this.isTag(\"table\")) {\r\n\t\t\t\r\n\t\t\t\t\tif($this.hasClass(\"flexigrid\")){\r\n\t\t\t\t\t\tif($this.grid)\r\n\t\t\t\t\t\t\t$this.grid.fixHeight(iH);\r\n\t\t\t\t\t\telse\r\n\t\t\t\t\t\t\t$this.attr(\"height\",iH);\r\n\t\t\t\t\t}else if($this.hasClass(\"jqgrid\")){\r\n\t\t\t\t\t\tif($this.attr(\"init\")==\"true\"){\r\n\t\t\t\t\t\t\tvar h = $this.attr(\"pageHeight\")*1;\r\n\t\t\t\t\t\t\tif(!h){\r\n\t\t\t\t\t\t\t\th = 0;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t$this.jqGrid('setGridHeight',iH-h);\r\n\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\t$this.attr(\"height\",iH);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\t$this.removeAttr(\"layoutHeight\").wrap('<div layoutHeight=\"'+ilayoutHeight+'\" style=\"overflow:auto;height:'+iH+'px\"></div>');\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\t$this.height(iH).css(\"overflow\",\"auto\");\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t},\r\n\t\t/**\r\n\t\t * 自动填充\r\n\t\t */\r\n\t\tfillSpace:function(){\r\n\t\t\tvar $this = $(this)\r\n\t\t\t,padd = $this.attr(\"fillpadd\")\r\n\t\t\t,$fillEl = $this.find($this.attr(\"fillSpace\"));\r\n\t\t\tpadd= parseInt(padd,10);\r\n\t\t\tpadd = isNaN(padd)?0:padd;\r\n\t\t\t\r\n\t\t\tvar parent = $this.parent();\r\n\t\t\tvar height = parent.height() - padd;\r\n\t\r\n\t\t\tvar os = parent.children().not($this);\r\n\t\t\t$.each(os, function(i){\r\n\t\t\t\theight -= $(os[i]).outerHeight();\r\n\t\t\t});\r\n\t\t\tif($fillEl.length==0){\r\n\t\t\t\t$fillEl = $this;\r\n\t\t\t}\r\n\t\t\t$fillEl.height(height/$fillEl.length);\r\n\t\t\tif($this.attr(\"_fillSpaceEvent\")==null){\r\n\t\t\t\t$this.on(\"fillSpace\",function(){\r\n\t\t\t\t\tsetTimeout(function(){\r\n\t\t\t\t\t\t$this.fillSpace();\r\n\t\t\t\t\t}, 100);\r\n\t\t\t\t});\r\n\t\t\t\t$this.attr(\"_fillSpaceEvent\",\"true\");\r\n\t\t\t}\r\n\t\t}\r\n\t});\r\n\r\n\t\r\n\t/**\r\n\t * 注册初始化处理方法\r\n\t */\r\n\t$A.regInitMethod(function($box){\r\n\t\t//$(\"[fillSpace]\",$box).fillSpace();\r\n\t\t//$(\"[layoutHeight]\",$box).layoutHeight();\r\n\t});\r\n\treturn $A;\r\n});\r\n\r\n\r\n\n",
    "define('app/widgets/layout/app-layout2',[\"app/core/app-jquery\", \"app/core/app-core\", \"app/core/app-options\", \"jquery/jquery-ui\", \"app/widgets/panel/app-panel\", \"app/widgets/layout/app-containerLayout\"], function($, $A,\r\n\t\tOptions,resizable,Panel,Widget) {\r\n\tvar resizing = false;\r\n\t//console.log(Panel.parseOptions)\r\n\t/**\r\n\t * @class\r\n\t * @name Layout\r\n\t * @classdesc 布局控件\r\n\t * @extends Widget\r\n\t * @example\r\n\t * \r\n\t * //html\r\n\t *  //<div class=\"app-layout\" style=\"height:100%;width:100%\">\r\n\t *  \t<div data_options=\"{region:\"\"}\">\r\n\t *  \r\n\t *  //</div>\r\n\t * //\r\n\t * \r\n\t * \r\n\t */\r\n\tvar Layout = ContainerLayout.extend({\r\n\t\t\t\tinitialize : function(options) {\r\n\t\t\t\t\tif (!options){\r\n\t\t\t\t\t\toptions={};\r\n\t\t\t\t\t};\r\n\t\t\t\t\toptions= $.extend(options,this.parseOptions(options.element));\r\n\t\t\t\t\r\n\t\t\t\t\tLayout.superclass.initialize.call(this, options);\r\n\t\t\t\t\tthis.padding=this.padding||this.getPadding(this.element);\r\n\t\t\t\t\tthis.margins=this.margins||this.getMargins(this.element);\r\n\t\t\t\t\tthis.panels=this.init();\r\n\t\t\t\t\tthis.bindEvents();\r\n\t\t\t\t\t\r\n\t\t\t\t\tthis._setSize();\r\n\t\t\t\t},\r\n\t\t\t\t /**\r\n\t\t\t\t * @memberof Layout\r\n\t\t\t     * 设置布局面板大小 \r\n\t\t\t     * @param param \r\n\t\t\t     * @namespace param\r\n\t\t\t     * @property param.width {number} \r\n\t\t\t     * @property  param.height {number} \r\n\t\t\t     */\r\n\t\t\t\tresize : function(jq,param) {\r\n\t\t\t\t\tthis._setSize(param);\r\n\t\t\t\t},\r\n\t\t\t\tparseOptions:function(element){\r\n\t\t\t\t\t\r\n\t\t\t\t\tvar t = $(element);\r\n\t\t\t\t\treturn $.extend({}, t.parseOptions(element, [{\"fit\":\"boolean\"}]));\r\n\t\t\t\t},\r\n\t\t\t\tupdateChildBoxes : function(boxes) {\r\n\t\t\t\t\tfor (var i = 0, length = boxes.length; i < length; i++) {\r\n\t\t\t\t\t\tvar box = boxes[i], comp = box.component;\r\n\r\n\t\t\t\t\t\t//if (box.dirtySize) {\r\n\t\t\t\t\t\t\tcomp.panel(\"resize\",box)\r\n\t\t\t\t\t\t//}\r\n\t\t\t\t\t\t// Don't set positions to NaN\r\n\t\t\t\t\t\tif (isNaN(box.left) || isNaN(box.top)) {\r\n\t\t\t\t\t\t\tcontinue;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t//comp.setPosition(box.left, box.top);\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\t/**\r\n\t\t\t\t * 获取布局内面板初始化参数\r\n\t\t\t\t */\r\n\t\t\t\tparsePanelOptions:function(panel){\r\n\t\t\t\t\tvar t = $(panel);\r\n\t\t\t\t\tvar options=$.extend({}, Panel.parseOptions(panel), t\r\n\t\t\t\t\t\t.parseOptions(panel, [\"region\", {\r\n\t\t\t\t\t\t\t\t\t\t\tsplit : \"boolean\",\r\n\t\t\t\t\t\t\t\t\t\t\tcollpasedSize : \"number\",\r\n\t\t\t\t\t\t\t\t\t\t\tminWidth : \"number\",\r\n\t\t\t\t\t\t\t\t\t\t\tminHeight : \"number\",\r\n\t\t\t\t\t\t\t\t\t\t\tmaxWidth : \"number\",\r\n\t\t\t\t\t\t\t\t\t\t\tmaxHeight : \"number\",\r\n\t\t\t\t\t\t\t\t\t\t\t\twidth : \"number\",\r\n\t\t\t\t\t\t\t\t\t\t\t\theight : \"number\"\r\n\t\t\t\t\t\t\t\t\t\t}]));\r\n\t\t\t\t\tif (options[\"width\"]&&options[\"width\"]!=\"auto\"){\r\n\t\t\t\t\t\toptions[\"width\"]=parseInt(options[\"width\"]);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (options[\"height\"]&&options[\"height\"]!=\"auto\"){\r\n\t\t\t\t\t\toptions[\"height\"]=parseInt(options[\"height\"]);\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn options;\r\n\t\t\t\t},\r\n\t\t\t    /**\r\n\t\t\t     * 设置布局大小\r\n\t\t\t     * @param param \r\n\t\t\t     * @namespace param\r\n\t\t\t     * @property param.width {number} \r\n\t\t\t     * @property  param.height {number} \r\n\t\t\t     */\r\n\t\t\t\t_setSize : function(param) {\r\n\t\t\t\t\tvar opts = this.attrs;\r\n\t\t\t\t\tvar panels = this.panels;\r\n\t\t\t\t\tvar container=this.element\r\n\t\t\t\t\tif (param) {\r\n\t\t\t\t\t\t$.extend(opts, {\r\n\t\t\t\t\t\t\t\t\twidth : param.width,\r\n\t\t\t\t\t\t\t\t\theight : param.height\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t\tvar cc = $(container);\r\n\t\t\t\t\tif (this.get(\"fit\") == true) {\r\n\t\t\t\t\t\r\n\t\t\t\t\t\t\tvar p = cc.parent();\r\n\t\t\t\t\t\tif (p.width()!=0&&p.height()!=0){\r\n\t\t\t\t\t\t\tcc.width(p.width()).height(p.height());\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tvar tSize = this.getLayoutTargetSize();\r\n\t\t\t\t\tvar boxs=this.calculateChildBoxes(tSize);\r\n\t\t\t\t\t\r\n\t\t\t\t\tthis.updateChildBoxes(boxs)\r\n\t\t\t\t\t/*var cpos = {\r\n\t\t\t\t\t\ttop : 0,\r\n\t\t\t\t\t\tleft : 0,\r\n\t\t\t\t\t\twidth : cc.width(),\r\n\t\t\t\t\t\theight : cc.height()\r\n\t\t\t\t\t};\r\n\r\n\t\t\t\t\t// set north panel size\r\n\t\t\t\t\tfunction setNorthSize(pp) {\r\n\t\t\t\t\t\tif (pp.length == 0)\r\n\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\tpp.panel('resize', {\r\n\t\t\t\t\t\t\t\t\twidth : cc.width(),\r\n\t\t\t\t\t\t\t\t\theight : pp.panel('options').height,\r\n\t\t\t\t\t\t\t\t\tleft : 0,\r\n\t\t\t\t\t\t\t\t\ttop : 0\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\tcpos.top +=  parseInt(pp.panel('options').height);\r\n\t\t\t\t\t\tcpos.height -=  parseInt(pp.panel('options').height);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (this.isVisible(panels.expandNorth)) {\r\n\t\t\t\t\t\tsetNorthSize(panels.expandNorth);\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tsetNorthSize(panels.north);\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t// set south panel size\r\n\t\t\t\t\tfunction setSouthSize(pp) {\r\n\t\t\t\t\t\tif (pp.length == 0)\r\n\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\tpp.panel('resize', {\r\n\t\t\t\t\t\t\t\t\twidth : cc.width(),\r\n\t\t\t\t\t\t\t\t\theight : pp.panel('options').height,\r\n\t\t\t\t\t\t\t\t\tleft : 0,\r\n\t\t\t\t\t\t\t\t\ttop : cc.height()\r\n\t\t\t\t\t\t\t\t\t\t\t-  parseInt(pp.panel('options').height)\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\tcpos.height -= pp.panel('options').height;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (this.isVisible(panels.expandSouth)) {\r\n\t\t\t\t\t\tsetSouthSize(panels.expandSouth);\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tsetSouthSize(panels.south);\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t// set east panel size\r\n\t\t\t\t\tfunction setEastSize(pp) {\r\n\t\t\t\t\t\tif (pp.length == 0)\r\n\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\tpp.panel('resize', {\r\n\t\t\t\t\t\t\t\t\twidth : pp.panel('options').width,\r\n\t\t\t\t\t\t\t\t\theight : cpos.height,\r\n\t\t\t\t\t\t\t\t\tleft : cc.width()\r\n\t\t\t\t\t\t\t\t\t\t\t- parseInt(pp.panel('options').width),\r\n\t\t\t\t\t\t\t\t\ttop : cpos.top\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\tcpos.width -= pp.panel('options').width;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (this.isVisible(panels.expandEast)) {\r\n\t\t\t\t\t\tsetEastSize(panels.expandEast);\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tsetEastSize(panels.east);\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t// set west panel size\r\n\t\t\t\t\tfunction setWestSize(pp) {\r\n\t\t\t\t\t\tif (pp.length == 0)\r\n\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\tpp.panel('resize', {\r\n\t\t\t\t\t\t\t\t\twidth : pp.panel('options').width,\r\n\t\t\t\t\t\t\t\t\theight : cpos.height,\r\n\t\t\t\t\t\t\t\t\tleft : 0,\r\n\t\t\t\t\t\t\t\t\ttop : cpos.top\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\tcpos.left += parseInt(pp.panel('options').width);\r\n\t\t\t\t\t\tcpos.width -= parseInt(pp.panel('options').width);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (this.isVisible(panels.expandWest)) {\r\n\t\t\t\t\t\tsetWestSize(panels.expandWest);\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tsetWestSize(panels.west);\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tpanels.center.panel('resize', cpos);*/\r\n\t\t\t\t},\r\n\t\t\t\tcalculateChildBoxes:function(targetSize){\r\n\t\t\t\t\tvar width=targetSize.width,height=targetSize.height,panels=this.panels,\r\n\t\t\t\t\tpadding      = this.padding,\r\n\t\t            topOffset    = padding.top,\r\n\t\t            leftOffset   = padding.left,\r\n\t\t          //  paddingVert  = topOffset  + padding.bottom,\r\n\t\t            //paddingHoriz = leftOffset + padding.right,\r\n\t\t\t\t\twidth = targetSize.width ,\r\n\t\t\t\t\theight = targetSize.height,\r\n\t\t\t\t\tavailableHeight=height-0,\r\n\t\t\t\t\tavailableWidth=width-0,\r\n\t\t\t\t\tboxes=[],box;\r\n\t\t\t\t\tvar regions = {\r\n\t\t\t\t\t\tnorth : null,\r\n\t\t\t\t\t\tsouth :null,\r\n\t\t\t\t\t\twest : null,\r\n\t\t\t\t\t\teast : null,\r\n\t\t\t\t\t\tcenter : null\r\n\t\t\t\t\t};\r\n\t\t\t\t\tfor(var key in regions){\r\n\t\t\t\t\t\tbox={};\r\n\t\t\t\t\t\tvar child=panels[key],opt=child.panel(\"options\"),childMargins=opt.margins,region=opt.region;\r\n\t\t\t\t\t\tif (panels[key].length==0){\r\n\t\t\t\t\t\t\tcontinue;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (child.length>0&&!this.isVisible(child)){\r\n\t\t\t\t\t\t\t\tchild=panels[\"expand\"+key];\r\n\t\t\t\t\t\t\t\tif (!child||child.length==0){\r\n\t\t\t\t\t\t\t\t\tcontinue;\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tregion=opt.region;\r\n\t\t\t\t\t\t\t\topt=child.panel(\"options\");\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tswitch(region){\r\n\t\t\t\t\t\t\tcase \"west\" :\r\n\t\t\t\t\t\t\t\t// topOffset  += childMargins.top;\r\n\t\t\t\t\t\t\t\t// leftOffset   += childMargins.left;\r\n\t\t\t\t\t\t\t\t//availableHeight=availableHeight-childMargins.top-childMargins.bottom\r\n\t\t\t\t\t\t\t\t availableWidth=availableWidth- childMargins.left-childMargins.right-opt.width;\r\n\t\t\t\t\t\t\t\t box[\"height\"]=availableHeight-childMargins.top-childMargins.bottom;\r\n\t\t\t\t\t\t\t\t box[\"wdth\"]=opt.width;\r\n\t\t\t\t\t\t\t\t box[\"top\"]=topOffset+childMargins.top;\r\n\t\t\t\t\t\t\t\t box[\"left\"]=leftOffset+childMargins.left;\r\n\t\t\t\t\t\t\t\t box[\"component\"]=child;\r\n\t\t\t\t\t\t\t\t leftOffset=opt.width+leftOffset+childMargins.left+ childMargins.right;\r\n\t\t\t\t\t\t\t\t //availableHeight=availableHeight- childMargins.top- childMargins.left\r\n\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\tcase \"east\" :\r\n\t\t\t\t\t\t\t\t// topOffset  += childMargins.top;\r\n\t\t\t\t\t\t\t\t// leftOffset   += childMargins.left;\r\n\t\t\t\t\t\t\t\t availableWidth=availableWidth- childMargins.left-opt.width- childMargins.right;\r\n\t\t\t\t\t\t\t\t box[\"height\"]=availableHeight-childMargins.top-childMargins.bottom;\r\n\t\t\t\t\t\t\t\t box[\"wdth\"]=opt.width;\r\n\t\t\t\t\t\t\t\t box[\"top\"]=topOffset+childMargins.top;\r\n\t\t\t\t\t\t\t\t box[\"left\"]=width-opt.width-childMargins.left;\r\n\t\t\t\t\t\t\t\t box[\"component\"]=child;\r\n\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\tcase \"north\" :\r\n \t\t\t\t\t\t\t\t availableHeight=availableHeight- childMargins.top- childMargins.bottom-opt.height;\r\n \t\t\t\t\t\t\t\t //availableWidth=availableWidth-childMargins.left-childMargins.right;\r\n\t\t\t\t\t\t\t\t box[\"height\"]=opt.height;\r\n\t\t\t\t\t\t\t\t box[\"width\"]=availableWidth-childMargins.left- childMargins.right;\r\n\t\t\t\t\t\t\t\t box[\"top\"]=topOffset+childMargins.top;\r\n\t\t\t\t\t\t\t\t box[\"left\"]=topOffset+childMargins.left;\r\n\t\t\t\t\t\t\t\t box[\"component\"]=child;\r\n\t\t\t\t\t\t\t\t topOffset=opt.height+childMargins.top+childMargins.bottom;\r\n\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\tcase \"south\" :\r\n\t\t\t\t\t\t\t\t availableHeight=availableHeight-childMargins.top-childMargins.bottom-opt.height;\r\n \t\t\t\t\t\t\t\t// availableWidth=availableWidth-childMargins.left-childMargins.right;\r\n\t\t\t\t\t\t\t\t box[\"height\"]=opt.height;\r\n\t\t\t\t\t\t\t\t box[\"width\"]=availableWidth-childMargins.left- childMargins.right;;\r\n\t\t\t\t\t\t\t\t box[\"top\"]=height-opt.height-childMargins.top-childMargins.bottom;\r\n\t\t\t\t\t\t\t\t box[\"left\"]=leftOffset+childMargins.left;\r\n\t\t\t\t\t\t\t\t box[\"component\"]=child;\r\n\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\tcase \"center\" :\r\n\t\t\t\t\t\t\t \t box[\"height\"]=availableHeight- childMargins.top- childMargins.bottom;\r\n\t\t\t\t\t\t\t\t box[\"width\"]=availableWidth;\r\n\t\t\t\t\t\t\t\t box[\"top\"]=topOffset+childMargins.top;\r\n\t\t\t\t\t\t\t\t box[\"left\"]=leftOffset+childMargins.left;\r\n\t\t\t\t\t\t\t\t box[\"component\"]=child;\r\n\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (child.length>0){\r\n\t\t\t\t\t\t\tbox[\"region\"]=region;\r\n\t\t\t\t\t\t\tboxes.push(box);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t};\r\n\t\t\t\t\treturn boxes;\r\n\t\t\t\t\r\n\t\t\t\t},\r\n\t\t\t\tgetLayoutTargetSize : function() {\r\n\t\t\t\t\tvar target = $(this.element), ret=null;;\r\n\t\t\t\t\tif (target) {\r\n\t\t\t\t\t\tret={};\r\n\t\t\t\t\t\tret.height = target.innerHeight();\r\n\t\t\t\t\t\tret.width = target.innerWidth();\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn ret;\r\n\t\t\t\t},\r\n\t\t\t\t/**\r\n\t\t\t\t * initialize and wrap the layout\r\n\t\t\t\t */\r\n\t\t\t\tinit : function() {\r\n\t\t\t\t\tvar container=this.element;\r\n\t\t\t\t\tvar cc = $(container);\r\n\t\t\t\t\tvar _self = this;\r\n\t\t\t\t\tif (cc[0].tagName == 'BODY') {\r\n\t\t\t\t\t\t$('html').css({\r\n\t\t\t\t\t\t\t\t\theight : '100%',\r\n\t\t\t\t\t\t\t\t\toverflow : 'hidden'\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t$('body').css({\r\n\t\t\t\t\t\t\t\t\theight : '100%',\r\n\t\t\t\t\t\t\t\t\toverflow : 'hidden',\r\n\t\t\t\t\t\t\t\t\tborder : 'none'\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t\tcc.addClass('layout');\r\n\t\t\t\t\tcc.css({\r\n\t\t\t\t\t\t\t\tmargin : 0,\r\n\t\t\t\t\t\t\t\tpadding : 0\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\r\n\t\t\t\t\tfunction createPanel(panel,options,dir) {\r\n\t\t\t\t\t\tvar pp = $(panel, container)\r\n\t\t\t\t\t\t\t\t.addClass('layout-body');\r\n\r\n\t\t\t\t\t\tvar toolCls = null;\r\n\t\t\t\t\t\tif (dir == 'north') {\r\n\t\t\t\t\t\t\ttoolCls = 'layout-button-up';\r\n\t\t\t\t\t\t} else if (dir == 'south') {\r\n\t\t\t\t\t\t\ttoolCls = 'layout-button-down';\r\n\t\t\t\t\t\t} else if (dir == 'east') {\r\n\t\t\t\t\t\t\ttoolCls = 'layout-button-right';\r\n\t\t\t\t\t\t} else if (dir == 'west') {\r\n\t\t\t\t\t\t\ttoolCls = 'layout-button-left';\r\n\t\t\t\t\t\t}\r\n\t\r\n\t\t\t\t\t\tvar cls = 'layout-panel layout-panel-' + dir+\" layout-panel-broder-\" + dir;\r\n\t\t\t\t\t\tif (options['split'] == 'true'||options['split']===true) {\r\n\t\t\t\t\t\t\tcls += ' layout-split-' + dir;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tvar toolItem={\r\n\t\t\t\t\t\t\t\t\t\ticonCls : toolCls,\r\n\t\t\t\t\t\t\t\t\t\thandler : function() {\r\n\t\t\t\t\t\t\t\t\t\t\t_self.collapsePanel(dir);\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t};\r\n\t\t\t\t\t\tif (dir == 'center'){\r\n\t\t\t\t\t\t\ttoolItem={};\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (!options.collapsible){\r\n\t\t\t\t\t\t\ttoolItem={};\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tvar opt = $.extend({}, options,{\r\n\t\t\t\t\t\t\t//width : (pp.length ? parseInt(pp[0].style.width)\r\n\t\t\t\t\t\t\t\t//\t|| pp.outerWidth() : \"auto\"),\r\n\t\t\t\t\t\t\t//height : (pp.length ? parseInt(pp[0].style.height)\r\n\t\t\t\t\t\t\t\t//\t|| pp.outerHeight() : \"auto\"),\r\n\t\t\t\t\t\t\tdoSize : pp.height()<=0,\r\n\t\t\t\t\t\t\tcollapsible : false,\r\n\t\t\t\t\t\t\tcls : cls,\r\n\t\t\t\t\t\t\ttools : [toolItem],\r\n\t\t\t\t\t\t\tbodyCls : \"layout-body\"\r\n\t\t\t\t\t\t\t\t/*\r\n\t\t\t\t\t\t\t\t * onOpen : function() { var _1c =\r\n\t\t\t\t\t\t\t\t * $(this).panel(\"header\")\r\n\t\t\t\t\t\t\t\t * .children(\"div.panel-tool\");\r\n\t\t\t\t\t\t\t\t * _1c.children(\"a.panel-tool-collapse\").hide();\r\n\t\t\t\t\t\t\t\t * var _1d = { north : \"up\", south : \"down\",\r\n\t\t\t\t\t\t\t\t * east : \"right\", west : \"left\" }; if\r\n\t\t\t\t\t\t\t\t * (!_1d[dir]) { return; } var _1e =\r\n\t\t\t\t\t\t\t\t * \"layout-button-\" + _1d[dir]; var t =\r\n\t\t\t\t\t\t\t\t * _1c.children(\"a.\" + _1e); if (!t.length) { t =\r\n\t\t\t\t\t\t\t\t * $(\"<a href=\\\"javascript:void(0)\\\"></a>\")\r\n\t\t\t\t\t\t\t\t * .addClass(_1e).appendTo(_1c); t.bind(\"click\", {\r\n\t\t\t\t\t\t\t\t * dir : dir }, function(e) { _2b(_18,\r\n\t\t\t\t\t\t\t\t * e.data.dir); return false; }); }\r\n\t\t\t\t\t\t\t\t * $(this).panel(\"options\").collapsible ?\r\n\t\t\t\t\t\t\t\t * t.show() : t .hide(); }\r\n\t\t\t\t\t\t\t\t */\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\tif (dir == \"center\"){\r\n\t\t\t\t\t\t\topt[\"height\"]=1;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tpp.panel(opt);\r\n\r\n\t\t\t\t\t\tif (opt['split'] == 'true'||opt['split']===true) {\r\n\t\t\t\t\t\t\tvar panel = pp.panel('panel');\r\n\r\n\t\t\t\t\t\t\tvar handles = '';\r\n\t\t\t\t\t\t\tif (dir == 'north')\r\n\t\t\t\t\t\t\t\thandles = 's';\r\n\t\t\t\t\t\t\tif (dir == 'south')\r\n\t\t\t\t\t\t\t\thandles = 'n';\r\n\t\t\t\t\t\t\tif (dir == 'east')\r\n\t\t\t\t\t\t\t\thandles = 'w';\r\n\t\t\t\t\t\t\tif (dir == 'west')\r\n\t\t\t\t\t\t\t\thandles = 'e';\r\n\r\n\t\t\t\t\t\t\tpanel.resizable({\r\n\t\t\t\t\t\t\t\thandles : handles,\r\n\t\t\t\t\t\t\t\thelper:function(){\r\n\t\t\t\t\t\t\t\t\tif (dir == 'north' || dir == 'south') {\r\n\t\t\t\t\t\t\t\t\t\t\tvar proxy = $(\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t'>div.layout-split-proxy-v',\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tcontainer);\r\n\t\t\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\t\t\tvar proxy = $(\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t'>div.layout-split-proxy-h',\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tcontainer);\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\treturn proxy;\r\n\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\tstart : function(e,data) {\r\n\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\tresizing = true;\r\n\r\n\t\t\t\t\t\t\t\t\tif (dir == 'north' || dir == 'south') {\r\n\t\t\t\t\t\t\t\t\t\tvar proxy = $(\r\n\t\t\t\t\t\t\t\t\t\t\t\t'>div.layout-split-proxy-v',\r\n\t\t\t\t\t\t\t\t\t\t\t\tcontainer);\r\n\t\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\t\tvar proxy = $(\r\n\t\t\t\t\t\t\t\t\t\t\t\t'>div.layout-split-proxy-h',\r\n\t\t\t\t\t\t\t\t\t\t\t\tcontainer);\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\tvar top = 0, left = 0, width = 0, height = 0;\r\n\t\t\t\t\t\t\t\t\tvar pos = {\r\n\t\t\t\t\t\t\t\t\t\tdisplay : 'block'\r\n\t\t\t\t\t\t\t\t\t};\r\n\t\t\t\t\t\t\t\t\tif (dir == 'north') {\r\n\t\t\t\t\t\t\t\t\t\tpos.top = parseInt(panel.css('top'))\r\n\t\t\t\t\t\t\t\t\t\t\t\t+ panel.outerHeight()\r\n\t\t\t\t\t\t\t\t\t\t\t\t- proxy.height();\r\n\t\t\t\t\t\t\t\t\t\tpos.left = parseInt(panel.css('left'));\r\n\t\t\t\t\t\t\t\t\t\tpos.width = panel.outerWidth();\r\n\t\t\t\t\t\t\t\t\t\tpos.height = proxy.height();\r\n\t\t\t\t\t\t\t\t\t} else if (dir == 'south') {\r\n\t\t\t\t\t\t\t\t\t\tpos.top = parseInt(panel.css('top'));\r\n\t\t\t\t\t\t\t\t\t\tpos.left = parseInt(panel.css('left'));\r\n\t\t\t\t\t\t\t\t\t\tpos.width = panel.outerWidth();\r\n\t\t\t\t\t\t\t\t\t\tpos.height = proxy.height();\r\n\t\t\t\t\t\t\t\t\t} else if (dir == 'east') {\r\n\t\t\t\t\t\t\t\t\t\tpos.top = parseInt(panel.css('top'))\r\n\t\t\t\t\t\t\t\t\t\t\t\t|| 0;\r\n\t\t\t\t\t\t\t\t\t\tpos.left = parseInt(panel.css('left'))\r\n\t\t\t\t\t\t\t\t\t\t\t\t|| 0;\r\n\t\t\t\t\t\t\t\t\t\tpos.width = proxy.width();\r\n\t\t\t\t\t\t\t\t\t\tpos.height = panel.outerHeight();\r\n\t\t\t\t\t\t\t\t\t} else if (dir == 'west') {\r\n\t\t\t\t\t\t\t\t\t\tpos.top = parseInt(panel.css('top'))\r\n\t\t\t\t\t\t\t\t\t\t\t\t|| 0;\r\n\t\t\t\t\t\t\t\t\t\tpos.left = panel.outerWidth()\r\n\t\t\t\t\t\t\t\t\t\t\t\t- proxy.width();\r\n\t\t\t\t\t\t\t\t\t\tpos.width = proxy.width();\r\n\t\t\t\t\t\t\t\t\t\tpos.height = panel.outerHeight();\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\tproxy.css(pos);\r\n\t\t\t\t\t\t\t\t\t$('<div class=\"layout-mask\"></div>').css({\r\n\t\t\t\t\t\t\t\t\t\t\t\tleft : 0,\r\n\t\t\t\t\t\t\t\t\t\t\t\ttop : 0,\r\n\t\t\t\t\t\t\t\t\t\t\t\twidth : cc.width(),\r\n\t\t\t\t\t\t\t\t\t\t\t\theight : cc.height()\r\n\t\t\t\t\t\t\t\t\t\t\t}).appendTo(cc);\r\n\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\tresize : function(e) {\r\n\t\t\t\t\t\t\t\t\tif (dir == 'north' || dir == 'south') {\r\n\t\t\t\t\t\t\t\t\t\tvar proxy = $(\r\n\t\t\t\t\t\t\t\t\t\t\t\t'>div.layout-split-proxy-v',\r\n\t\t\t\t\t\t\t\t\t\t\t\tcontainer);\r\n\t\t\t\t\t\t\t\t\t\tproxy.css('top',e.pageY- $(container).offset().top- proxy.height()/ 2);\r\n\t\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\t\tvar proxy = $('>div.layout-split-proxy-h',container);\r\n\t\t\t\t\t\t\t\t\t\tproxy.css('left',e.pageX- $(container).offset().left- proxy.width()/ 2);\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\tstop : function(event,data) {\r\n\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\t$('>div.layout-split-proxy-v', container)\r\n\t\t\t\t\t\t\t\t\t\t\t.css('display', 'none');\r\n\t\t\t\t\t\t\t\t\t$('>div.layout-split-proxy-h', container)\r\n\t\t\t\t\t\t\t\t\t\t\t.css('display', 'none');\r\n\t\t\t\t\t\t\t\t\tvar size=data.size\r\n\t\t\t\t\t\t\t\t\tvar opts = pp.panel('options');\r\n\t\t\t\t\t\t\t\t\topts.width = panel.outerWidth();\r\n\t\t\t\t\t\t\t\t\topts.height = panel.outerHeight();\r\n\t\t\t\t\t\t\t\t\topts.left = panel.css('left');\r\n\t\t\t\t\t\t\t\t\topts.top = panel.css('top');\r\n\t\t\t\t\t\t\t\t\tpp.panel('resize');\r\n\t\t\t\t\t\t\t\t\t_self._setSize();\r\n\t\t\t\t\t\t\t\t\tresizing = false;\r\n\r\n\t\t\t\t\t\t\t\t\tcc.find('>div.layout-mask').remove();\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\treturn pp;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tvar panels = {\r\n\t\t\t\t\t\tnorth : $(),\r\n\t\t\t\t\t\tsouth : $(),\r\n\t\t\t\t\t\twest : $(),\r\n\t\t\t\t\t\teast : $(),\r\n\t\t\t\t\t\tcenter : $()\r\n\t\t\t\t\t};\r\n\t\t\t\t\tvar _self = this;\r\n\t\t\t\t\t\tcc.children(\"div\").each(function() {\r\n\t\t\t\t\t\t\t\tvar panelOptions = _self.parsePanelOptions(this);\r\n\t\t\t\t\t\t\t\tpanelOptions[\"layout\"]=cc;\r\n\t\t\t\t\t\t\t\t\t$(this).removeClass(\"app-panel\");\r\n\t\t\t\t\t\t\t\tif (\"north,south,east,west,center\".indexOf(panelOptions.region) >= 0) {\r\n\t\t\t\t\t\t\t\t\t panelOptions[\"padding\"]=_self.getPadding(this);\r\n\t\t\t    \t\t \t\t\t\tpanelOptions[\"margins\"]=_self.getMargins(this);\r\n\t\t\t\t\t\t\t\t\tpanels[panelOptions.region]=createPanel(this, panelOptions,panelOptions.region);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t});\r\n\r\n\t\t\t\t\t$('<div class=\"layout-split-proxy-h\"></div>').appendTo(cc);\r\n\t\t\t\t\t$('<div class=\"layout-split-proxy-v\"></div>').appendTo(cc);\r\n\t\t\t\t\t$(container).bind('_resize', function() {\r\n\t\t\t\t\t\t\t\tif (_self.get(\"fit\") == true) {\r\n\t\t\t\t\t\t\t\t\t_self._setSize();\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t\t\t});\r\n\r\n\t\t\t\t\t/*\r\n\t\t\t\t\t * $(window).resize(function() { _self._setSize(container);\r\n\t\t\t\t\t * });\r\n\t\t\t\t\t */\r\n\r\n\t\t\t\t\treturn panels;\r\n\t\t\t\t},\r\n\t\t\t\t\r\n\t\t\t\t/**\r\n\t\t\t\t * \r\n\t\t\t\t * 根据位置获取布局中的面板 west,center,east,south,north\r\n\t\t\t\t * @memberof Layout\r\n\t\t\t\t * @param region {String}  \r\n\t\t\t\t */\r\n\t\t\t\tgetPanel : function(region) {\r\n\t\t\t\t\tvar panels = this.panels;\r\n\t\t\t\t\tif (!panels)\r\n\t\t\t\t\t\treturn null;\r\n\t\t\t\t\treturn panels[region];\r\n\t\t\t\t},\r\n\t\t\t\t/**\r\n\t\t\t\t * \r\n\t\t\t\t * 根据位置隐藏布局中的面板 west,center,east,south,north\r\n\t\t\t\t * @memberof Layout\r\n\t\t\t\t * @param region {String}  \r\n\t\t\t\t */\r\n\t\t\t\tcollapsePanel : function(region) {\r\n\t\t\t\t\tvar container=this.element;\r\n\t\t\t\t\tvar panels = this.panels;\r\n\t\t\t\t\tvar _self = this;\r\n\t\t\t\t\tvar cc = $(container);\r\n\t\t\t\t\tvar expandPanel=\"expand\"+region;\r\n\t\t\t\t\tfunction createExpandPanel(dir) {\r\n\t\t\t\t\t\tvar icon;\r\n\t\t\t\t\t\tif (dir == 'east')\r\n\t\t\t\t\t\t\ticon = 'layout-button-left'\r\n\t\t\t\t\t\telse if (dir == 'west')\r\n\t\t\t\t\t\t\ticon = 'layout-button-right'\r\n\t\t\t\t\t\telse if (dir == 'north')\r\n\t\t\t\t\t\t\ticon = 'layout-button-down'\r\n\t\t\t\t\t\telse if (dir == 'south')\r\n\t\t\t\t\t\t\ticon = 'layout-button-up';\r\n\t\t\t\t\t\tvar options=panels[dir].panel(\"options\");\r\n\t\t\t\t\t\tvar p = $('<div></div>').appendTo(cc).panel({\r\n\t\t\t\t\t\t\t\t\tcls : 'layout-expand',\r\n\t\t\t\t\t\t\t\t\ttitle : '&nbsp;',\r\n\t\t\t\t\t\t\t\t\ttitle:options.title,\r\n\t\t\t\t\t\t\t\t\tclosed : true,\r\n\t\t\t\t\t\t\t\t\tdoSize : false,\r\n\t\t\t\t\t\t\t\t\theight:28,\r\n\t\t\t\t\t\t\t\t\twidth:28,\r\n\t\t\t\t\t\t\t\t\tmargins:options.margins,\r\n\t\t\t\t\t\t\t\t\ttools : [{\r\n\t\t\t\t\t\t\t\t\t\t\t\ticonCls : icon,\r\n\t\t\t\t\t\t\t\t\t\t\t\thandler : function() {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t_self.expandPanel(region);\r\n\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t}]\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\tp.panel('panel').hover(function() {\r\n\t\t\t\t\t\t\t\t\t$(this).addClass('layout-expand-over');\r\n\t\t\t\t\t\t\t\t}, function() {\r\n\t\t\t\t\t\t\t\t\t$(this).removeClass('layout-expand-over');\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\treturn p;\r\n\t\t\t\t\t};\r\n\t\t\t\t\tif (panels[region]){\r\n\t\t\t\t\t\tpanels[region].panel('close');\r\n\t\t\t\t\t}\r\n\t\t\t\r\n\t\t\t\t\tif (!panels[expandPanel]) {\r\n\t\t\t\t\t\t\tpanels[expandPanel] = createExpandPanel(region);\r\n\t\t\t\t\t\t\tpanels[expandPanel].panel('panel').click(function() {\r\n\t\t\t\t\t\t\t\t_self.expandPanel(region);\r\n\t\t\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t};\r\n\t\t\t\t\tpanels[expandPanel].panel('open');\r\n\t\t\t\t\tthis._setSize();\r\n\t\t\t\r\n\t\t\t\t\t//if expandEast\r\n\t\t\t\t\t/*if (region == 'east') {\r\n\t\t\t\t\t\tif (panels.east.panel('options').onBeforeCollapse\r\n\t\t\t\t\t\t\t\t.call(panels.east) == false)\r\n\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\tpanels.center.panel('resize', {\r\n\t\t\t\t\t\t\t\t\twidth : panels.center.panel('options').width\r\n\t\t\t\t\t\t\t\t\t\t\t+ panels.east.panel('options').width\r\n\t\t\t\t\t\t\t\t\t\t\t- 28\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\tpanels.east.panel('panel').animate({\r\n\t\t\t\t\t\t\t\t\tleft : cc.width()\r\n\t\t\t\t\t\t\t\t}, function() {\r\n\t\t\t\t\t\t\t\t\tpanels.east.panel('close');\r\n\t\t\t\t\t\t\t\t\tpanels.expandEast.panel('open').panel(\r\n\t\t\t\t\t\t\t\t\t\t\t'resize', {\r\n\t\t\t\t\t\t\t\t\t\t\t\ttop : panels.east\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t.panel('options').top,\r\n\t\t\t\t\t\t\t\t\t\t\t\tleft : cc.width() - 28,\r\n\t\t\t\t\t\t\t\t\t\t\t\twidth : 28,\r\n\t\t\t\t\t\t\t\t\t\t\t\theight : panels.east\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t.panel('options').height\r\n\t\t\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t\tpanels.east.panel('options').onCollapse\r\n\t\t\t\t\t\t\t\t\t\t\t.call(panels.east);\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\tif (!panels.expandEast) {\r\n\t\t\t\t\t\t\tpanels.expandEast = createExpandPanel('east');\r\n\t\t\t\t\t\t\tpanels.expandEast.panel('panel').click(function() {\r\n\t\t\t\t\t\t\t\tpanels.east.panel('open').panel('resize', {\r\n\t\t\t\t\t\t\t\t\t\t\tleft : cc.width()\r\n\t\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\tpanels.east.panel('panel').animate({\r\n\t\t\t\t\t\t\t\t\tleft : cc.width()\r\n\t\t\t\t\t\t\t\t\t\t\t- panels.east.panel('options').width\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t} else if (region == 'west') {\r\n\t\t\t\t\t\tif (panels.west.panel('options').onBeforeCollapse\r\n\t\t\t\t\t\t\t\t.call(panels.west) == false)\r\n\t\t\t\t\t\t\treturn;\r\n\r\n\t\t\t\t\t\tpanels.center.panel('resize', {\r\n\t\t\t\t\t\t\t\t\twidth : panels.center.panel('options').width\r\n\t\t\t\t\t\t\t\t\t\t\t+ panels.west.panel('options').width\r\n\t\t\t\t\t\t\t\t\t\t\t- 28,\r\n\t\t\t\t\t\t\t\t\tleft : 28\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\tpanels.west.panel('panel').animate({\r\n\t\t\t\t\t\t\t\t\tleft : -panels.west.panel('options').width\r\n\t\t\t\t\t\t\t\t}, function() {\r\n\t\t\t\t\t\t\t\t\tpanels.west.panel('close');\r\n\t\t\t\t\t\t\t\t\tpanels.expandWest.panel('open').panel(\r\n\t\t\t\t\t\t\t\t\t\t\t'resize', {\r\n\t\t\t\t\t\t\t\t\t\t\t\ttop : panels.west\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t.panel('options').top,\r\n\t\t\t\t\t\t\t\t\t\t\t\tleft : 0,\r\n\t\t\t\t\t\t\t\t\t\t\t\twidth : 28,\r\n\t\t\t\t\t\t\t\t\t\t\t\theight : panels.west\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t.panel('options').height\r\n\t\t\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t\tpanels.west.panel('options').onCollapse\r\n\t\t\t\t\t\t\t\t\t\t\t.call(panels.west);\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\tif (!panels.expandWest) {\r\n\t\t\t\t\t\t\tpanels.expandWest = createExpandPanel('west');\r\n\t\t\t\t\t\t\tpanels.expandWest.panel('panel').click(function() {\r\n\t\t\t\t\t\t\t\tpanels.west.panel('open').panel('resize', {\r\n\t\t\t\t\t\t\t\t\t\t\tleft : -panels.west\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t.panel('options').width\r\n\t\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\tpanels.west.panel('panel').animate({\r\n\t\t\t\t\t\t\t\t\t\t\tleft : 0\r\n\t\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t} else if (region == 'north') {\r\n\t\t\t\t\t\tif (panels.north.panel('options').onBeforeCollapse\r\n\t\t\t\t\t\t\t\t.call(panels.north) == false)\r\n\t\t\t\t\t\t\treturn;\r\n\r\n\t\t\t\t\t\tvar hh = cc.height() - 28;\r\n\t\t\t\t\t\tif (_self.isVisible(panels.expandSouth)) {\r\n\t\t\t\t\t\t\thh -= panels.expandSouth.panel('options').height;\r\n\t\t\t\t\t\t} else if (_self.isVisible(panels.south)) {\r\n\t\t\t\t\t\t\thh -= panels.south.panel('options').height;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tpanels.center.panel('resize', {\r\n\t\t\t\t\t\t\t\t\ttop : 28,\r\n\t\t\t\t\t\t\t\t\theight : hh\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\tpanels.east.panel('resize', {\r\n\t\t\t\t\t\t\t\t\ttop : 28,\r\n\t\t\t\t\t\t\t\t\theight : hh\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\tpanels.west.panel('resize', {\r\n\t\t\t\t\t\t\t\t\ttop : 28,\r\n\t\t\t\t\t\t\t\t\theight : hh\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\tif (_self.isVisible(panels.expandEast))\r\n\t\t\t\t\t\t\tpanels.expandEast.panel('resize', {\r\n\t\t\t\t\t\t\t\t\t\ttop : 28,\r\n\t\t\t\t\t\t\t\t\t\theight : hh\r\n\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\tif (_self.isVisible(panels.expandWest))\r\n\t\t\t\t\t\t\tpanels.expandWest.panel('resize', {\r\n\t\t\t\t\t\t\t\t\t\ttop : 28,\r\n\t\t\t\t\t\t\t\t\t\theight : hh\r\n\t\t\t\t\t\t\t\t\t});\r\n\r\n\t\t\t\t\t\tpanels.north.panel('panel').animate({\r\n\t\t\t\t\t\t\t\t\ttop : -panels.north.panel('options').height\r\n\t\t\t\t\t\t\t\t}, function() {\r\n\t\t\t\t\t\t\t\t\tpanels.north.panel('close');\r\n\t\t\t\t\t\t\t\t\tpanels.expandNorth.panel('open').panel(\r\n\t\t\t\t\t\t\t\t\t\t\t'resize', {\r\n\t\t\t\t\t\t\t\t\t\t\t\ttop : 0,\r\n\t\t\t\t\t\t\t\t\t\t\t\tleft : 0,\r\n\t\t\t\t\t\t\t\t\t\t\t\twidth : cc.width(),\r\n\t\t\t\t\t\t\t\t\t\t\t\theight : 28\r\n\t\t\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t\tpanels.north.panel('options').onCollapse\r\n\t\t\t\t\t\t\t\t\t\t\t.call(panels.north);\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\tif (!panels.expandNorth) {\r\n\t\t\t\t\t\t\tpanels.expandNorth = createExpandPanel('north');\r\n\t\t\t\t\t\t\tpanels.expandNorth.panel('panel').click(function() {\r\n\t\t\t\t\t\t\t\tpanels.north.panel('open').panel('resize', {\r\n\t\t\t\t\t\t\t\t\t\t\ttop : -panels.north\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t.panel('options').height\r\n\t\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\tpanels.north.panel('panel').animate({\r\n\t\t\t\t\t\t\t\t\t\t\ttop : 0\r\n\t\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t} else if (region == 'south') {\r\n\t\t\t\t\t\tif (panels.south.panel('options').onBeforeCollapse\r\n\t\t\t\t\t\t\t\t.call(panels.south) == false)\r\n\t\t\t\t\t\t\treturn;\r\n\r\n\t\t\t\t\t\tvar hh = cc.height() - 28;\r\n\t\t\t\t\t\tif (_self.isVisible(panels.expandNorth)) {\r\n\t\t\t\t\t\t\thh -= panels.expandNorth.panel('options').height;\r\n\t\t\t\t\t\t} else if (_self.isVisible(panels.north)) {\r\n\t\t\t\t\t\t\thh -= panels.north.panel('options').height;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tpanels.center.panel('resize', {\r\n\t\t\t\t\t\t\t\t\theight : hh\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\tpanels.east.panel('resize', {\r\n\t\t\t\t\t\t\t\t\theight : hh\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\tpanels.west.panel('resize', {\r\n\t\t\t\t\t\t\t\t\theight : hh\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\tif (_self.isVisible(panels.expandEast))\r\n\t\t\t\t\t\t\tpanels.expandEast.panel('resize', {\r\n\t\t\t\t\t\t\t\t\t\theight : hh\r\n\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\tif (_self.isVisible(panels.expandWest))\r\n\t\t\t\t\t\t\tpanels.expandWest.panel('resize', {\r\n\t\t\t\t\t\t\t\t\t\theight : hh\r\n\t\t\t\t\t\t\t\t\t});\r\n\r\n\t\t\t\t\t\tpanels.south.panel('panel').animate({\r\n\t\t\t\t\t\t\t\t\ttop : cc.height()\r\n\t\t\t\t\t\t\t\t}, function() {\r\n\t\t\t\t\t\t\t\t\tpanels.south.panel('close');\r\n\t\t\t\t\t\t\t\t\tpanels.expandSouth.panel('open').panel(\r\n\t\t\t\t\t\t\t\t\t\t\t'resize', {\r\n\t\t\t\t\t\t\t\t\t\t\t\ttop : cc.height() - 28,\r\n\t\t\t\t\t\t\t\t\t\t\t\tleft : 0,\r\n\t\t\t\t\t\t\t\t\t\t\t\twidth : cc.width(),\r\n\t\t\t\t\t\t\t\t\t\t\t\theight : 28\r\n\t\t\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t\tpanels.south.panel('options').onCollapse\r\n\t\t\t\t\t\t\t\t\t\t\t.call(panels.south);\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\tif (!panels.expandSouth) {\r\n\t\t\t\t\t\t\tpanels.expandSouth = createExpandPanel('south');\r\n\t\t\t\t\t\t\tpanels.expandSouth.panel('panel').click(function() {\r\n\t\t\t\t\t\t\t\tpanels.south.panel('open').panel('resize', {\r\n\t\t\t\t\t\t\t\t\t\t\ttop : cc.height()\r\n\t\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\tpanels.south.panel('panel').animate({\r\n\t\t\t\t\t\t\t\t\ttop : cc.height()\r\n\t\t\t\t\t\t\t\t\t\t\t- panels.south.panel('options').height\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}*/\r\n\t\t\t\t},\r\n/**\r\n\t\t\t\t * \r\n\t\t\t\t * 根据位置展开布局中的面板 west,center,east,south,north\r\n\t\t\t\t * @memberof Layout\r\n\t\t\t\t * @param region {String}  \r\n\t\t\t\t */\r\n\t\t\t\texpandPanel : function(region) {\r\n\t\t\t\t\tvar container=this.element;\r\n\t\t\t\t\tvar panels =this.panels;\r\n\t\t\t\t\tvar cc = $(container);\r\n\t\t\t\t\tvar _self=this;\r\n\t\t\t\t\tvar expandPanel=\"expand\"+region;\r\n\t\t\t\t\tpanels[expandPanel].panel('close');\r\n\t\t\t\t\tpanels[region].panel('open');\r\n\t\t\t\t\tthis._setSize();\r\n\t\t\t\t\t/*if (region == 'east' && panels.expandEast) {\r\n\t\t\t\t\t\tif (panels.east.panel('options').onBeforeExpand\r\n\t\t\t\t\t\t\t\t.call(panels.east) == false)\r\n\t\t\t\t\t\t\treturn;\r\n\r\n\t\t\t\t\t\tpanels.expandEast.panel('close');\r\n\t\t\t\t\t\tpanels.east.panel('panel').stop(true, true);\r\n\t\t\t\t\t\tpanels.east.panel('open').panel('resize', {\r\n\t\t\t\t\t\t\t\t\tleft : cc.width()\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\tpanels.east.panel('panel').animate({\r\n\t\t\t\t\t\t\tleft : cc.width()\r\n\t\t\t\t\t\t\t\t\t- panels.east.panel('options').width\r\n\t\t\t\t\t\t}, function() {\r\n\t\t\t\t\t\t\t_self._setSize();\r\n\t\t\t\t\t\t\tpanels.east.panel('options').onExpand\r\n\t\t\t\t\t\t\t\t\t.call(panels.east);\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t} else if (region == 'west' && panels.expandWest) {\r\n\t\t\t\t\t\tif (panels.west.panel('options').onBeforeExpand\r\n\t\t\t\t\t\t\t\t.call(panels.west) == false)\r\n\t\t\t\t\t\t\treturn;\r\n\r\n\t\t\t\t\t\tpanels.expandWest.panel('close');\r\n\t\t\t\t\t\tpanels.west.panel('panel').stop(true, true);\r\n\t\t\t\t\t\tpanels.west.panel('open').panel('resize', {\r\n\t\t\t\t\t\t\t\t\tleft : -panels.west.panel('options').width\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\tpanels.west.panel('panel').animate({\r\n\t\t\t\t\t\t\t\t\tleft : 0\r\n\t\t\t\t\t\t\t\t}, function() {\r\n\t\t\t\t\t\t\t\t\t_self._setSize();\r\n\t\t\t\t\t\t\t\t\tpanels.west.panel('options').onExpand\r\n\t\t\t\t\t\t\t\t\t\t\t.call(panels.west);\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t} else if (region == 'north' && panels.expandNorth) {\r\n\t\t\t\t\t\tif (panels.north.panel('options').onBeforeExpand\r\n\t\t\t\t\t\t\t\t.call(panels.north) == false)\r\n\t\t\t\t\t\t\treturn;\r\n\r\n\t\t\t\t\t\tpanels.expandNorth.panel('close');\r\n\t\t\t\t\t\tpanels.north.panel('panel').stop(true, true);\r\n\t\t\t\t\t\tpanels.north.panel('open').panel('resize', {\r\n\t\t\t\t\t\t\t\t\ttop : -panels.north.panel('options').height\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\tpanels.north.panel('panel').animate({\r\n\t\t\t\t\t\t\t\t\ttop : 0\r\n\t\t\t\t\t\t\t\t}, function() {\r\n\t\t\t\t\t\t\t\t\t_self._setSize();\r\n\t\t\t\t\t\t\t\t\tpanels.north.panel('options').onExpand\r\n\t\t\t\t\t\t\t\t\t\t\t.call(panels.north);\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t} else if (region == 'south' && panels.expandSouth) {\r\n\t\t\t\t\t\tif (panels.south.panel('options').onBeforeExpand\r\n\t\t\t\t\t\t\t\t.call(panels.south) == false)\r\n\t\t\t\t\t\t\treturn;\r\n\r\n\t\t\t\t\t\tpanels.expandSouth.panel('close');\r\n\t\t\t\t\t\tpanels.south.panel('panel').stop(true, true);\r\n\t\t\t\t\t\tpanels.south.panel('open').panel('resize', {\r\n\t\t\t\t\t\t\t\t\ttop : cc.height()\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\tpanels.south.panel('panel').animate({\r\n\t\t\t\t\t\t\ttop : cc.height()\r\n\t\t\t\t\t\t\t\t\t- panels.south.panel('options').height\r\n\t\t\t\t\t\t}, function() {\r\n\t\t\t\t\t\t\t_self._setSize();\r\n\t\t\t\t\t\t\tpanels.south.panel('options').onExpand\r\n\t\t\t\t\t\t\t\t\t.call(panels.south);\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}*/\r\n\t\t\t\t},\r\n\t\t\t\t/**\r\n\t\t\t\t *绑定布局内面板事件\r\n\t\t\t\t */\r\n\t\t\t\tbindEvents : function() {\r\n\t\t\t\t\tvar container=this.element;\r\n\t\t\t\t\tvar _slef = this;\r\n\t\t\t\t\tvar panels = this.panels;\r\n\t\t\t\t\tvar cc = $(container);\r\n\r\n\t\t\t\t\t// bind east panel events\r\n\t\t\t\t\tif (panels.east.length) {\r\n\t\t\t\t\t\tpanels.east.panel('panel').bind('mouseover', 'east',\r\n\t\t\t\t\t\t\t\tcollapsePanel);\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t// bind west panel events\r\n\t\t\t\t\tif (panels.west.length) {\r\n\t\t\t\t\t\tpanels.west.panel('panel').bind('mouseover', 'west',\r\n\t\t\t\t\t\t\t\tcollapsePanel);\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t// bind north panel events\r\n\t\t\t\t\tif (panels.north.length) {\r\n\t\t\t\t\t\tpanels.north.panel('panel').bind('mouseover', 'north',\r\n\t\t\t\t\t\t\t\tcollapsePanel);\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t// bind south panel events\r\n\t\t\t\t\tif (panels.south.length) {\r\n\t\t\t\t\t\tpanels.south.panel('panel').bind('mouseover', 'south',\r\n\t\t\t\t\t\t\t\tcollapsePanel);\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tpanels.center.panel('panel').bind('mouseover', 'center',\r\n\t\t\t\t\t\t\tcollapsePanel);\r\n\r\n\t\t\t\t\tfunction collapsePanel(e) {\r\n\t\t\t\t\t\tif (resizing == true)\r\n\t\t\t\t\t\t\treturn;\r\n\r\n\t\t\t\t\t\tif (e.data != 'east' && _slef.isVisible(panels.east)\r\n\t\t\t\t\t\t\t\t&& _slef.isVisible(panels.expandEast)) {\r\n\t\t\t\t\t\t\tpanels.east.panel('panel').animate({\r\n\t\t\t\t\t\t\t\t\t\tleft : cc.width()\r\n\t\t\t\t\t\t\t\t\t}, function() {\r\n\t\t\t\t\t\t\t\t\t\tpanels.east.panel('close');\r\n\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (e.data != 'west' && _slef.isVisible(panels.west)\r\n\t\t\t\t\t\t\t\t&& _slef.isVisible(panels.expandWest)) {\r\n\t\t\t\t\t\t\tpanels.west.panel('panel').animate({\r\n\t\t\t\t\t\t\t\t\t\tleft : -panels.west.panel('options').width\r\n\t\t\t\t\t\t\t\t\t}, function() {\r\n\t\t\t\t\t\t\t\t\t\tpanels.west.panel('close');\r\n\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (e.data != 'north' && _slef.isVisible(panels.north)\r\n\t\t\t\t\t\t\t\t&& _slef.isVisible(panels.expandNorth)) {\r\n\t\t\t\t\t\t\tpanels.north.panel('panel').animate({\r\n\t\t\t\t\t\t\t\t\t\ttop : -panels.north.panel('options').height\r\n\t\t\t\t\t\t\t\t\t}, function() {\r\n\t\t\t\t\t\t\t\t\t\tpanels.north.panel('close');\r\n\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (e.data != 'south' && _slef.isVisible(panels.south)\r\n\t\t\t\t\t\t\t\t&& _slef.isVisible(panels.expandSouth)) {\r\n\t\t\t\t\t\t\tpanels.south.panel('panel').animate({\r\n\t\t\t\t\t\t\t\t\t\ttop : cc.height()\r\n\t\t\t\t\t\t\t\t\t}, function() {\r\n\t\t\t\t\t\t\t\t\t\tpanels.south.panel('close');\r\n\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t},\r\n\t\t\t\tisVisible : function(pp) {\r\n\t\t\t\t\tif (!pp)\r\n\t\t\t\t\t\treturn false;\r\n\t\t\t\t\tif (pp.length) {\r\n\t\t\t\t\t\treturn  pp.panel('panel').css(\"display\")!=\"none\";\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\r\n\r\n\t\r\n\t$.fn.layout = function(options, param) {\r\n\t\tvar methodReturn=null;\r\n\t\t $set=this.each(function() {\r\n\t\t\t\t\tvar $this = $(this);\r\n\t\t\t\t\tvar state = $.data(this, 'layout');\r\n\t\t\t\t\tvar data = $.data(this, 'layoutObj');\r\n\t\t\t\t\tif (!data) {\r\n\t\t\t\t\t\tvar opts = $.extend({}, {\r\n\t\t\t\t\t\t\t\t\telement:this\r\n\t\t\t\t\t\t\t\t\t//fit : $(this).attr('fit') == 'true'\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t$this.data('layoutObj', (data = new Layout(opts)));\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (typeof options == 'string') {\r\n\r\n\t\t\t\t\t\tmethodReturn = data[options](this, param);\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\treturn (methodReturn === undefined) ? $set : methodReturn;\r\n\t};\r\n\treturn Layout;\r\n});\r\n\n",
    "define('app/widgets/menu/app-contextmenu',[\"app/core/app-jquery\",\"app/core/app-core\"],function($,App,navTab){\r\n\tvar menu, shadow, hash;\r\n\t$.fn.extend({\r\n\t\tcontextMenu: function(id, options){\r\n\t\t\tvar op = $.extend({\r\n\t\t\t\t    shadow : true,\r\n\t\t\t\t    bindings:{},\r\n\t\t\t\t\tctrSub:null\r\n\t\t\t\t}, options\r\n\t\t\t);\r\n\t\t\t\r\n\t\t\tif (!menu) {\r\n\t\t\t\tmenu = $('<div id=\"contextmenu\"></div>').appendTo('body').hide();\r\n\t\t\t}\r\n\t\t\tif (!shadow) {\r\n\t\t\t\tshadow = $('<div id=\"contextmenuShadow\"></div>').appendTo('body').hide();\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\thash = hash || [];\r\n\t\t\thash.push({\r\n\t\t\t\tid : id,\r\n\t\t\t\tshadow: op.shadow,\r\n\t\t\t\tbindings: op.bindings || {},\r\n\t\t\t\tctrSub: op.ctrSub\r\n\t\t\t});\r\n\t\t\t\r\n\t\t\tvar index = hash.length - 1;\r\n\t\t\t$(this).bind('contextmenu', function(e) {\r\n\t\t\t\tdisplay(index, this, e, op);\r\n\t\t\t\treturn false;\r\n\t\t\t});\r\n\t\t\treturn this;\r\n\t\t}\r\n\t});\r\n\t\r\n\tfunction display(index, trigger, e, options) {\r\n\t\tvar cur = hash[index];\r\n\r\n\t\tvar content = $(App.frags[cur.id]);\r\n\t\tcontent.find('li').hoverClass();\r\n\t\r\n\t\t// Send the content to the menu\r\n\t\tmenu.html(content);\r\n\t\r\n\t\t$.each(cur.bindings, function(id, func) {\r\n\t\t\t$(\"[rel='\"+id+\"']\", menu).bind('click', function(e) {\r\n\t\t\t\thide();\r\n\t\t\t\tfunc($(trigger), $(\"#\"+cur.id));\r\n\t\t\t});\r\n\t\t});\r\n\t\t\r\n\t\tvar posX = e.pageX;\r\n\t\tvar posY = e.pageY;\r\n\t\tif ($(window).width() < posX + menu.width()) posX -= menu.width();\r\n\t\tif ($(window).height() < posY + menu.height()) posY -= menu.height();\r\n\r\n\t\tmenu.css({'left':posX,'top':posY}).show();\r\n\t\tif (cur.shadow) shadow.css({width:menu.width(),height:menu.height(),left:posX+3,top:posY+3}).show();\r\n\t\t$(document).one('click', hide);\r\n\t\t\r\n\t\tif ($.isFunction(cur.ctrSub)) {cur.ctrSub($(trigger), $(\"#\"+cur.id));}\r\n\t}\r\n\tfunction hide() {\r\n\t\tmenu.hide();\r\n\t\tshadow.hide();\r\n\t}\r\n});\r\n\r\n\n",
    "define('app/widgets/portlet/app-portal',[\"app/core/app-jquery\", \"app/data/app-ajax\",\"jquery/jquery-ui\"], function() {\r\n\r\n\tPortal = {\r\n\t\tConfig : {\r\n\t\t\ttableCls : \"form-list\",\r\n\t\t\ttdCls : \"form-text\",\r\n\t\t\ttdCls2 : \"single\",\r\n\t\t\tulCls : \"tag-list\",\r\n\t\t\tlayCls : \"layout-list\",\r\n\t\t\tmin : \"min\",\r\n\t\t\tmintext : \"\\u6536\\u8d77\",\r\n\t\t\tmax : \"max\",\r\n\t\t\tmaxtext : \"\\u5c55\\u5f00\",\r\n\t\t\tclose : \"close\",\r\n\t\t\tclosetext : \"\\u5173\\u95ed\",\r\n\t\t\trefreshtext : \"\\u5237\\u65b0\",\r\n\t\t\trefresh : \"refresh\",\r\n\t\t\t_groupItemContent : \"itemContent\",\r\n\t\t\t_groupItemHead : \"itemHeader\",\r\n\t\t\t_groupWrapperClass : \"groupWrapper\",\r\n\t\t\t_groupItemClass : \"groupItem\"\r\n\t\t}\r\n\t};\r\n\tPortal.Layout = function() {\r\n\t\treturn {\r\n\t\t\tlocation : {\r\n\t\t\t\tleft : \"portal_l\",\r\n\t\t\t\tcenter : \"portal_m\",\r\n\t\t\t\tright : \"portal_r\"\r\n\t\t\t},\r\n\t\t\tlocationId : {\r\n\t\t\t\tleft : \"#portal_l\",\r\n\t\t\t\tcenter : \"#portal_m\",\r\n\t\t\t\tright : \"#portal_r\"\r\n\t\t\t},\r\n\t\t\tlayoutCss : {\r\n\t\t\t\t0 : \"1:3\",\r\n\t\t\t\t1 : \"3:1\",\r\n\t\t\t\t2 : \"1:2:1\",\r\n\t\t\t\t3 : \"1:1:2\",\r\n\t\t\t\t4 : \"2:1:1\",\r\n\t\t\t\t5 : \"1:1:1\"\r\n\t\t\t},\r\n\t\t\tlayoutText : {\r\n\t\t\t\t\"0\" : \"w250 w750 wnone\",\r\n\t\t\t\t1 : \"w750 w250 wnone\",\r\n\t\t\t\t2 : \"w250 w500 w250\",\r\n\t\t\t\t3 : \"w250 w250 w500\",\r\n\t\t\t\t4 : \"w500 w250 w250\",\r\n\t\t\t\t5 : \"w250 w250 w250\"\r\n\t\t\t}\r\n\t\t}\r\n\t}();\r\n\tPortal.Util = {\r\n\t\tformat : function(a, b) {\r\n\t\t\tfor (var c in b)\r\n\t\t\t\ta = a.replace(RegExp(\"{\" + c + \"}\", \"g\"), b[c]);\r\n\t\t\treturn a\r\n\t\t},\r\n\t\trefresh : function() {\r\n\t\t\t$A(\"#\" + Portal.Layout.left, \"#\" + Portal.Layout.center,\r\n\t\t\t\t\t\"#\" + Portal.Layout.right).sortable(\"refresh\")\r\n\t\t},\r\n\t\ttoBody : function(a) {\r\n\t\t\t$A(\".portal\").append(a)\r\n\t\t}\r\n\t};\r\n\tPortal.fn = function(a) {\r\n\t\treturn a = {\r\n\t\t\tinit : function(b) {\r\n\t\t\t\ta._ele = {};\r\n\t\t\t\ta._create();\r\n\t\t\t\ta._createWrap(b);\r\n\t\t\t\ta._bindEvent()\r\n\t\t\t},\r\n\t\t\t_create : function() {\r\n\t\t\t\tvar b = $(\"<div id='header'/>\");\r\n\t\t\t\ta.box = b;\r\n\t\t\t\tPortal.Util.toBody(b)\r\n\t\t\t},\r\n\t\t\t_createWrap : function(b) {\r\n\t\t\t\tvar c = a._createTable(Portal.Config.tableCls);\r\n\t\t\t\ta._ele.table = c;\r\n\t\t\t\ta._createModuleList(b);\r\n\t\t\t\ta._createActionButton();\r\n\t\t\t\ta._addPanel(c)\r\n\t\t\t},\r\n\t\t\t_createTable : function(b) {\r\n\t\t\t\tb = $(\"<table/>\").addClass(b);\r\n\t\t\t\t$(\"<tbody/>\").append(a._createLayoutTr()).append(a\r\n\t\t\t\t\t\t._createBaseTr()).append(a._createActionTr())\r\n\t\t\t\t\t\t.appendTo(b);\r\n\t\t\t\treturn b\r\n\t\t\t},\r\n\t\t\t_createBaseTr : function() {\r\n\t\t\t\tvar b = a._createTd(Portal.Config.tdCls2), c = $(\"<tr>\")\r\n\t\t\t\t\t\t.append(a._createTd(Portal.Config.tdCls,\r\n\t\t\t\t\t\t\t\t\"\\u529f\\u80fd\\u6a21\\u5757\\u8bbe\\u7f6e\\uff1a\"))\r\n\t\t\t\t\t\t.append(b);\r\n\t\t\t\ta._ele.mtd = b;\r\n\t\t\t\treturn c\r\n\t\t\t},\r\n\t\t\t_createActionTr : function() {\r\n\t\t\t\tvar b = a._createTd(Portal.Config.tdCls2), c = $(\"<tr>\")\r\n\t\t\t\t\t\t.append(a._createTd(Portal.Config.tdCls)).append(b);\r\n\t\t\t\ta._ele.atd = b;\r\n\t\t\t\treturn c\r\n\t\t\t},\r\n\t\t\t_createLayoutTr : function() {\r\n\t\t\t\tvar b = a._createTd(Portal.Config.tdCls2);\r\n\t\t\t\t$(\"<div/>\")\r\n\t\t\t\t\t\t.addClass(Portal.Config.layCls)\r\n\t\t\t\t\t\t.append(a._createA(\"1:3\"))\r\n\t\t\t\t\t\t.append(a._createA(\"3:1\"))\r\n\t\t\t\t\t\t.append(a._createA(\"1:1:2\"))\r\n\t\t\t\t\t\t.append(a._createA(\"1:2:1\"))\r\n\t\t\t\t\t\t.append(a._createA(\"2:1:1\"))\r\n\t\t\t\t\t\t.append(\"<a href='javascript:void(0);' class='active' rel='1:1:1'>\\u9ed8\\u8ba4</a>\")\r\n\t\t\t\t\t\t.appendTo(b);\r\n\t\t\t\tvar c = $(\"<tr>\").append(a._createTd(Portal.Config.tdCls,\r\n\t\t\t\t\t\t\"\\u5e03\\u5c40\\u8bbe\\u7f6e\\uff1a\")).append(b);\r\n\t\t\t\ta._ele.layoutTd = b;\r\n\t\t\t\treturn c\r\n\t\t\t},\r\n\t\t\t_createModuleList : function(b) {\r\n\t\t\t\tvar c = $(\"<ul/>\").addClass(Portal.Config.ulCls);\r\n\t\t\t\ta._createLis(b.appL, c);\r\n\t\t\t\ta._createLis(b.appM, c);\r\n\t\t\t\ta._createLis(b.appR, c);\r\n\t\t\t\ta._ele.ul = c;\r\n\t\t\t\tc.appendTo(a._ele.mtd)\r\n\t\t\t},\r\n\t\t\t_createActionButton : function() {\r\n\t\t\t\tvar b = $(\"<a class='button b' href='#' >\\u6dfb\\u52a0\\u6a21\\u5757</a>\"), c = $(\"<a class='button b' href='#' >\\u4fdd\\u5b58\\u914d\\u7f6e</a>\");\r\n\t\t\t\ta._ele.atd.append(b).append(c);\r\n\t\t\t\ta._bindAdd(b);\r\n\t\t\t\ta._bindSave(c)\r\n\t\t\t},\r\n\t\t\t_createLis : function(b, c) {\r\n\t\t\t\t$.each(b, function(b, d) {\r\n\t\t\t\t\t\t\tc.append(a._createLi(b, d))\r\n\t\t\t\t\t\t})\r\n\t\t\t},\r\n\t\t\t_createA : function(a) {\r\n\t\t\t\treturn $(\"<a href='javascript:void(0);' rel='\" + a + \"'>\" + a\r\n\t\t\t\t\t\t+ \"</a>\")\r\n\t\t\t},\r\n\t\t\t_createLi : function(a, c) {\r\n\t\t\t\treturn $(\"<li/>\").append(\"<a href='#' rel='\" + a + \"'>\" + c\r\n\t\t\t\t\t\t+ \"</a>\").append(\"<span class='ok'></span>\")\r\n\t\t\t},\r\n\t\t\t_createTd : function(a, c) {\r\n\t\t\t\tvar e = $(\"<td>\").addClass(a);\r\n\t\t\t\tvoid 0 != c && e.text(c);\r\n\t\t\t\treturn e\r\n\t\t\t},\r\n\t\t\t_addPanel : function(b) {\r\n\t\t\t\ta.box.append(b)\r\n\t\t\t},\r\n\t\t\t_bindAdd : function(b) {\r\n\t\t\t\tb.click(function() {\r\n\t\t\t\t\t$.fallr(\"show\", {\r\n\t\t\t\t\t\tbuttons : {\r\n\t\t\t\t\t\t\tbutton1 : {\r\n\t\t\t\t\t\t\t\ttext : \"\\u786e\\u5b9a\",\r\n\t\t\t\t\t\t\t\tonclick : function() {\r\n\t\t\t\t\t\t\t\t\tvar b = $(this).children(\"form\"), e = b\r\n\t\t\t\t\t\t\t\t\t\t\t.children(\"#modulename\").val(), d = b\r\n\t\t\t\t\t\t\t\t\t\t\t.children(\"#modulekey\").val(), b = b\r\n\t\t\t\t\t\t\t\t\t\t\t.children(\"input[name='modulelayout']:checked\")\r\n\t\t\t\t\t\t\t\t\t\t\t.val(), b = \"left\" == b\r\n\t\t\t\t\t\t\t\t\t\t\t? $(\"#\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t+ Portal.Layout.location.left)\r\n\t\t\t\t\t\t\t\t\t\t\t: \"center\" == b\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t? $(\"#\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t+ Portal.Layout.location.center)\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t: $(\"#\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t+ Portal.Layout.location.right);\r\n\t\t\t\t\t\t\t\t\ta._ele.ul.append(a._createLi(d, e));\r\n\t\t\t\t\t\t\t\t\tb.append(Portal.Portal._createPortalOne(d,\r\n\t\t\t\t\t\t\t\t\t\t\te));\r\n\t\t\t\t\t\t\t\t\t$.fallr(\"hide\")\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\tbutton2 : {\r\n\t\t\t\t\t\t\t\ttext : \"\\u53d6\\u6d88\"\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tcontent : '<form style=\"margin-left:20px\"><p>\\u6a21\\u5757\\u540d\\uff1a</p><input type=\"text\" size=\"15\" id=\"modulename\" /><p>\\u6a21\\u5757Code\\uff1a</p><input type=\"text\" size=\"15\" id=\"modulekey\" /><p>\\u6a21\\u5757\\u4f4d\\u7f6e\\uff1a</p>\\u5de6:<input type=\"radio\" name=\"modulelayout\" checked=\"checked\" value=\"left\"/>&nbsp&nbsp\\u4e2d:<input type=\"radio\" name=\"modulelayout\" value=\"center\"/>&nbsp&nbsp\\u53f3:<input type=\"radio\" name=\"modulelayout\" value=\"right\"/></form>',\r\n\t\t\t\t\t\ticon : \"add\",\r\n\t\t\t\t\t\tposition : \"center\"\r\n\t\t\t\t\t})\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\t_bindSave : function(a) {\r\n\t\t\t\ta.click(function() {\r\n\t\t\t\t\tvar a = $(\"#\" + Portal.Layout.location.left)\r\n\t\t\t\t\t\t\t.sortable(\"toArray\"), b = $(\"#\"\r\n\t\t\t\t\t\t\t+ Portal.Layout.location.center)\r\n\t\t\t\t\t\t\t.sortable(\"toArray\"), d = $(\"#\"\r\n\t\t\t\t\t\t\t+ Portal.Layout.location.right).sortable(\"toArray\"), f = \"\";\r\n\t\t\t\t\t$(\".\" + Portal.Config.layCls + \" a\").each(function() {\r\n\t\t\t\t\t\t\t\t$(this).hasClass(\"active\")\r\n\t\t\t\t\t\t\t\t\t\t&& (f = $(this).attr(\"rel\"))\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\"1:1:1\" == f && (f = \"\\u9ed8\\u8ba4\");\r\n\t\t\t\t\t$.fallr(\"show\", {\r\n\t\t\t\t\t\t\t\tcontent : \"<p>left:[\" + a + \"]</p><p>center:[\"\r\n\t\t\t\t\t\t\t\t\t\t+ b + \"]</p><p>right[\" + d\r\n\t\t\t\t\t\t\t\t\t\t+ \"]</p><p>\\u5f53\\u524d\\u5e03\\u5c40:\"\r\n\t\t\t\t\t\t\t\t\t\t+ f + \"</p>\",\r\n\t\t\t\t\t\t\t\tposition : \"center\"\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\t_bindEvent : function() {\r\n\t\t\t\ta._moduleLiClick();\r\n\t\t\t\ta._layoutAClick()\r\n\t\t\t},\r\n\t\t\t_moduleLiClick : function() {\r\n\t\t\t\t$(\".\" + Portal.Config.ulCls + \" li\").on(\"click\", function() {\r\n\t\t\t\t\tvar a = $(this), c = a.find(\"a\").attr(\"rel\"), c = $(\"#\" + c), a = a\r\n\t\t\t\t\t\t\t.find(\".ok\");\r\n\t\t\t\t\ta.is(\":visible\") ? (a.hide(), c.hide()) : (a.show(), c\r\n\t\t\t\t\t\t\t.show());\r\n\t\t\t\t\tPortal.Util.refresh()\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\t_layoutAClick : function() {\r\n\t\t\t\t$(\".\" + Portal.Config.layCls + \" a\").click(function() {\r\n\t\t\t\t\t\t\tvar b = $(this), c = b.attr(\"rel\");\r\n\t\t\t\t\t\t\ta._ToLayout(c);\r\n\t\t\t\t\t\t\tb.addClass(\"active\").siblings()\r\n\t\t\t\t\t\t\t\t\t.removeClass(\"active\")\r\n\t\t\t\t\t\t})\r\n\t\t\t},\r\n\t\t\t_ToLayout : function(a) {\r\n\t\t\t\tvar c = Portal.Layout.layoutText, e = Portal.Layout.locationId, d = 0, f = \"\";\r\n\t\t\t\t$.each(Portal.Layout.layoutCss, function(c, j) {\r\n\t\t\t\t\t\t\ta == j && (d = c)\r\n\t\t\t\t\t\t});\r\n\t\t\t\t$.each(e, function(a, b) {\r\n\t\t\t\t\t\t\tvar g = $(b), h = c[d].split(/\\s+/);\r\n\t\t\t\t\t\t\tswitch (a) {\r\n\t\t\t\t\t\t\t\tcase \"left\" :\r\n\t\t\t\t\t\t\t\t\ta = 0;\r\n\t\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\t\tcase \"center\" :\r\n\t\t\t\t\t\t\t\t\ta = 1;\r\n\t\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\t\tcase \"right\" :\r\n\t\t\t\t\t\t\t\t\ta = 2\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\"wnone\" == h[a]\r\n\t\t\t\t\t\t\t\t\t&& (f = g.sortable(\"toArray\"), $.each(f,\r\n\t\t\t\t\t\t\t\t\t\t\tfunction(a, b) {\r\n\t\t\t\t\t\t\t\t\t\t\t\t$(\"#\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t+ Portal.Layout.location.left)\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t.append($(\"#\" + b))\r\n\t\t\t\t\t\t\t\t\t\t\t}), g.empty());\r\n\t\t\t\t\t\t\tg.removeClass(\"w250 w750 w500 wnone\")\r\n\t\t\t\t\t\t\t\t\t.addClass(h[a])\r\n\t\t\t\t\t\t})\r\n\t\t\t}\r\n\t\t}\r\n\t}();\r\n\tPortal.Portlet = function(a) {\r\n\t\tvar b = \"<div id='\" + Portal.Layout.location.left + \"' class='\"\r\n\t\t\t\t+ Portal.Config._groupWrapperClass + \" w250'/>\", c = \"<div id='\"\r\n\t\t\t\t+ Portal.Layout.location.center\r\n\t\t\t\t+ \"' class='\"\r\n\t\t\t\t+ Portal.Config._groupWrapperClass + \" w250'/>\", e = \"<div id='\"\r\n\t\t\t\t+ Portal.Layout.location.right\r\n\t\t\t\t+ \"' class='\"\r\n\t\t\t\t+ Portal.Config._groupWrapperClass + \" w250'/>\", d = \"<div id='{key}' class='\"\r\n\t\t\t\t+ Portal.Config._groupItemClass + \"'/>\", f = \"<div class='\"\r\n\t\t\t\t+ Portal.Config._groupItemHead + \"'><h3>{name}</h3></div>\", i = \"<div class='\"\r\n\t\t\t\t+ Portal.Config._groupItemContent + \"'/>\";\r\n\t\treturn a = {\r\n\t\t\tinit : function(b) {\r\n\t\t\t\ta._create();\r\n\t\t\t\ta._bindData(b);\r\n\t\t\t\ta._bindEvent()\r\n\t\t\t},\r\n\t\t\t_create : function() {\r\n\t\t\t\ta.box = $(\"<div id='portal'></div>\");\r\n\t\t\t\ta._elements = {};\r\n\t\t\t\ta._createModulesWrap();\r\n\t\t\t\tPortal.Util.toBody(a.box)\r\n\t\t\t},\r\n\t\t\t_bindData : function(b) {\r\n\t\t\t\t$.each(b, function(b, c) {\r\n\t\t\t\t\t\t\ta._createPortal(b, c)\r\n\t\t\t\t\t\t})\r\n\t\t\t},\r\n\t\t\t_createModulesWrap : function() {\r\n\t\t\t\ta._elements.m_l = $(b);\r\n\t\t\t\ta._elements.m_m = $(c);\r\n\t\t\t\ta._elements.m_r = $(e);\r\n\t\t\t\ta._addPanel(a._elements.m_l);\r\n\t\t\t\ta._addPanel(a._elements.m_m);\r\n\t\t\t\ta._addPanel(a._elements.m_r)\r\n\t\t\t},\r\n\t\t\t_addPanel : function(b) {\r\n\t\t\t\ta.box.append(b)\r\n\t\t\t},\r\n\t\t\t_createPortal : function(b, c) {\r\n\t\t\t\tvar d;\r\n\t\t\t\tswitch (b) {\r\n\t\t\t\t\tcase \"appL\" :\r\n\t\t\t\t\t\td = a._elements.m_l;\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase \"appM\" :\r\n\t\t\t\t\t\td = a._elements.m_m;\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase \"appR\" :\r\n\t\t\t\t\t\td = a._elements.m_r\r\n\t\t\t\t}\r\n\t\t\t\t$.each(c, function(b, c) {\r\n\t\t\t\t\t\t\td.append(a._createPortalOne(b, c))\r\n\t\t\t\t\t\t})\r\n\t\t\t},\r\n\t\t\t_createPortalOne : function(b, c) {\r\n\t\t\t\tvar e = a._createItemHeader(c), f = a._createItemContent();\r\n\t\t\t\treturn $(Portal.Util.format(d, {\r\n\t\t\t\t\t\t\tkey : b\r\n\t\t\t\t\t\t})).append(e).append(f)\r\n\t\t\t},\r\n\t\t\t_createItemHeader : function(b) {\r\n\t\t\t\tvar b = $(Portal.Util.format(f, {\r\n\t\t\t\t\t\t\tname : b\r\n\t\t\t\t\t\t})), c = a._createDiv(\"action\").hide().appendTo(b);\r\n\t\t\t\ta\r\n\t\t\t\t\t\t._createA(Portal.Config.refresh,\r\n\t\t\t\t\t\t\t\tPortal.Config.refreshtext, !0).appendTo(c);\r\n\t\t\t\ta._createA(Portal.Config.min, Portal.Config.mintext, !0)\r\n\t\t\t\t\t\t.appendTo(c);\r\n\t\t\t\ta._createA(Portal.Config.max, Portal.Config.maxtext, !1)\r\n\t\t\t\t\t\t.appendTo(c);\r\n\t\t\t\ta._createA(Portal.Config.close, Portal.Config.closetext, !0)\r\n\t\t\t\t\t\t.appendTo(c);\r\n\t\t\t\tb.hover(function() {\r\n\t\t\t\t\t\t\t$(this).find(\".action\").show()\r\n\t\t\t\t\t\t}, function() {\r\n\t\t\t\t\t\t\t$(this).find(\".action\").hide()\r\n\t\t\t\t\t\t});\r\n\t\t\t\treturn b\r\n\t\t\t},\r\n\t\t\t_createItemContent : function() {\r\n\t\t\t\tvar a = $(i);\r\n\t\t\t\t$(\"<ul style='width:250px;'><li>xiaofanV587</li><li>xiaofanV587</li><li>xiaofanV587</li><li>xiaofanV587</li></ul>\")\r\n\t\t\t\t\t\t.appendTo(a);\r\n\t\t\t\treturn a\r\n\t\t\t},\r\n\t\t\t_createDiv : function(a) {\r\n\t\t\t\treturn $(\"<div/>\").addClass(a)\r\n\t\t\t},\r\n\t\t\t_createA : function(a, b, c) {\r\n\t\t\t\ta = $(\"<a href='javascript:void(0);' class='\" + a + \"' title='\"\r\n\t\t\t\t\t\t+ b + \"'/>\");\r\n\t\t\t\tc || a.hide();\r\n\t\t\t\treturn a\r\n\t\t\t},\r\n\t\t\t_eventMin : function() {\r\n\t\t\t\t$(\".\" + Portal.Config.min).on(\"click\", function() {\r\n\t\t\t\t\t\t\tvar a = $(this), b = a.parent().parent().parent();\r\n\t\t\t\t\t\t\tb.find(\".\" + Portal.Config._groupItemContent)\r\n\t\t\t\t\t\t\t\t\t.hide();\r\n\t\t\t\t\t\t\tb.find(\".\" + Portal.Config.max).show();\r\n\t\t\t\t\t\t\ta.hide()\r\n\t\t\t\t\t\t})\r\n\t\t\t},\r\n\t\t\t_eventMax : function() {\r\n\t\t\t\t$(\".\" + Portal.Config.max).on(\"click\", function() {\r\n\t\t\t\t\t\t\tvar a = $(this), b = a.parent().parent().parent();\r\n\t\t\t\t\t\t\tb.find(\".\" + Portal.Config._groupItemContent)\r\n\t\t\t\t\t\t\t\t\t.show();\r\n\t\t\t\t\t\t\tb.find(\".\" + Portal.Config.min).show();\r\n\t\t\t\t\t\t\ta.hide()\r\n\t\t\t\t\t\t})\r\n\t\t\t},\r\n\t\t\t_eventRemove : function() {\r\n\t\t\t\t$(\".\" + Portal.Config.close).on(\"click\", function() {\r\n\t\t\t\t\t$(this).parent().parent().parent().fadeOut(\"500\",\r\n\t\t\t\t\t\t\tfunction() {\r\n\t\t\t\t\t\t\t\tvar a = $(this), b = a.attr(\"id\"), b = $(\".tag-list\")\r\n\t\t\t\t\t\t\t\t\t\t.find(\"a[rel='\" + b + \"']\");\r\n\t\t\t\t\t\t\t\ta.remove();\r\n\t\t\t\t\t\t\t\tb.parent().remove()\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\t_eventRefresh : function() {\r\n\t\t\t\t$(\".\" + Portal.Config.refresh).on(\"click\", function() {\r\n\t\t\t\t\t$(this).parent().parent().parent().find(\"ul\").empty()\r\n\t\t\t\t\t\t\t.append(\"<li>\\u5237\\u65b0\\u4e86</li>\")\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\t_eventSortable : function() {\r\n\t\t\t\t$(\".\" + Portal.Config._groupWrapperClass).sortable({\r\n\t\t\t\t\t\t\tconnectWith : \".\"\r\n\t\t\t\t\t\t\t\t\t+ Portal.Config._groupWrapperClass,\r\n\t\t\t\t\t\t\topacity : \"0.6\",\r\n\t\t\t\t\t\t\tdropOnEmpty : !0\r\n\t\t\t\t\t\t}).disableSelection()\r\n\t\t\t},\r\n\t\t\t_bindEvent : function() {\r\n\t\t\t\ta._eventSortable();\r\n\t\t\t\ta._eventRefresh();\r\n\t\t\t\ta._eventRemove();\r\n\t\t\t\ta._eventMax();\r\n\t\t\t\ta._eventMin()\r\n\t\t\t}\r\n\t\t}\r\n\t}();\r\n\r\nreturn Portal;\r\n})\r\n;\n",
    "/**\r\n * 对话框扩展\r\n */\r\ndefine(\r\n\t\t'app/widgets/tabs/app-tab',[ \"app/core/app-jquery\", \"app/core/app-core\", \"app/util/app-utils\", \"app/data/app-ajax\",\r\n\t\t\t\t\"app/widgets/app-widget\", \"app/widgets/button/app-button\"],\r\n\t\tfunction($, $A, $utils, ajax, Widget) {\r\n\t\t\t/**\r\n\t\t\t * 页签组件\r\n\t\t\t */\r\n\t\t\tvar AppTabs = Widget.extend({\r\n\r\n\t\t\t\tinitialize : function(element, option) {\r\n\t\t\t\t\tif (!option) {\r\n\t\t\t\t\t\toption = {};\r\n\t\t\t\t\t}\r\n\t\t\t\t\toption.element = element;\r\n\r\n\t\t\t\t\tAppTabs.superclass.initialize.call(this, option);\r\n\t\t\t\t\tthis.element = element;\r\n\r\n\t\t\t\t\t// TODO 暂时处理一下，日后改善\r\n\t\t\t\t\tthis.option = option;\r\n\t\t\t\t\t/* 初始化找到对应的页签头 */\r\n\t\t\t\t\tvar $this = $(element);\r\n\t\t\t\t\tthis.element = $this;\r\n\t\t\t\t\tvar $header = $this.find(\">ul.nav-header\");\r\n\t\t\t\t\tif ($header.length > 0) {\r\n\t\t\t\t\t\tthis.$header = $header;\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\r\n\t\t\t\t\tsetHeaderButton($header, option);\r\n\r\n\t\t\t\t\tvar $content = $this.find(\">div.tab-content\");\r\n\t\t\t\t\tthis.$content = $content;\r\n\r\n\t\t\t\t\tvar $currTab = (function() {\r\n\t\t\t\t\t\tvar $currTab = $content.find(\">.tab-pane.active\");\r\n\t\t\t\t\t\tif ($currTab.length == 0) {\r\n\t\t\t\t\t\t\t$currTab = $content.find(\">.tab-pane:first\");\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t$currTab = $($currTab[0]);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\treturn $currTab;\r\n\t\t\t\t\t})($this);\r\n\r\n\t\t\t\t\t$content.find(\">.tab-pane\").each(\r\n\t\t\t\t\t\t\tfunction() {\r\n\t\t\t\t\t\t\t\tif (this != $currTab[0]) {\r\n\t\t\t\t\t\t\t\t\t$(this).addClass(\"inactive\").removeClass(\r\n\t\t\t\t\t\t\t\t\t\t\t\"active\");\r\n\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\t$(this).removeClass(\"inactive\").addClass(\r\n\t\t\t\t\t\t\t\t\t\t\t\"active\").removeClass(\"lazy\");\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t// this.setScroll($currTab);\r\n\t\t\t\t\tvar _self = this;\r\n\t\t\t\t\tsetTimeout(function() {\r\n\t\t\t\t\t\t_self.setScroll($currTab);\r\n\r\n\t\t\t\t\t}, 100)\r\n\t\t\t\t\t/* 初始化话切换页签事件 */\r\n\t\t\t\t\tvar onSwitchTab = $this.attr(\"beforeSwitchTab\");\r\n\t\t\t\t\tif (onSwitchTab) {\r\n\t\t\t\t\t\tonSwitchTab = $this.getPageJsProperty(onSwitchTab);// 获取页面绑定的js方法对象\r\n\t\t\t\t\t\tthis.on(\"beforeSwitchTab\", onSwitchTab);\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\r\n\t\t\t\t\tvar _self = this;\r\n\t\t\t\t\t//if (option.fit == true) {\r\n\r\n\t\t\t\t\t\t$content.find(\">.tab-pane\").addClass(\"layout-body\");\r\n\t\t\t\t\t\tthis.element.bind(\"_resize\",\r\n\t\t\t\t\t\t\t\t\t\tfunction(event, r, w, h) {\r\n\t\t\t\t\t\t\t\t\t\t\tvar mt = $header.css(\"marginTop\")\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t.replace('px', '');\r\n\t\t\t\t\t\t\t\t\t\t\tvar mb = $header\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t.css(\"marginBottom\")\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t.replace('px', '');\r\n\t\t\t\t\t\t\t\t\t\t\th = h - mt - mb;\r\n\t\t\t\t\t\t\t\t\t\t\tif (option.fit == true) {\r\n\t\t\t\t\t\t\t\t\t\t\t\t$this.outerHeight(h);\r\n\t\t\t\t\t\t\t\t\t\t\t\t$this.outerWidth(w);\r\n\t\t\t\t\t\t\t\t\t\t\t\tvar th = $header.outerHeight();\r\n\t\t\t\t\t\t\t\t\t\t\t\th = h - th;// (th+parseInt(mt)+parseInt(mb));\r\n\t\t\t\t\t\t\t\t\t\t\t\t$content.outerHeight(h);\r\n\t\t\t\t\t\t\t\t\t\t\t\t$content.find(\">.tab-pane\").outerHeight(h);\r\n\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\t\t\t$content.outerWidth($this.width());\r\n\t\t\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\t\t\t$content.find(\">.tab-pane\").outerWidth($this.width());\r\n\t\t\t\t\t\t\t\t\t\t\t_self.doLayout();\r\n\t\t\t\t\t\t\t\t\t\t\tif (_self.activateTab){\r\n\t\t\t\t\t\t\t\t\t\t\t\t_self.setScroll(_self.activateTab);\r\n\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t//}\r\n\t\t\t\t\tvar afterSwitchTab = $this.attr(\"afterSwitchTab\");\r\n\t\t\t\t\tif (afterSwitchTab) {\r\n\t\t\t\t\t\tafterSwitchTab = $this.getPageJsProperty(afterSwitchTab);// 获取页面绑定的js方法对象\r\n\t\t\t\t\t\tthis.on(\"afterSwitchTab\", afterSwitchTab);\r\n\t\t\t\t\t}\r\n\t\t\t\t\t//this.doLayout();\r\n\r\n\t\t\t\t\t/* 在切换后的时间中对页签内容进行懒初始化 \r\n\t\t\t\t\tthis.on(\"afterSwitchTab\", function(activeTab) {\r\n\t\t\t\t\t\tvar $pane = e.activeTab;\r\n\t\t\t\t\t\tif ($pane.is(\".lazy\")) {\r\n\t\t\t\t\t\t\tif ($pane.length > 0) {\r\n\t\t\t\t\t\t\t\t$pane.removeClass(\"lazy\");\r\n\t\t\t\t\t\t\t\t$pane.initPageUI(option);\r\n\t\t\t\t\t\t\t\t$pane.attr(\"init\", true);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tif (afterSwitchTab) {\r\n\t\t\t\t\t\t\tafterSwitchTab(e);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});*/\r\n\t\t\t\t},\r\n\t\t\tdoLayout : function() {\r\n\t\t\t\tvar $this = this.element, $content = this.$content\r\n\t\t\t\tvar $prev = $content.find(\">.tab-pane.active\");\r\n\t\t\t\tvar h = $prev.height();\r\n\t\t\t\tvar w = $prev.width();\r\n\r\n\t\t\t\t$prev.children(\"div.panel:visible,div.app-grid:visible,div.accordion:visible,div.tabs-container:visible,div.layout:visible,div.xquery:visible,div.grid-container:visible,div.ztree-container:visible,div.app-vboxLayout,div.app-hboxLayout,div.datagrid:visible\").each(\r\n\t\t\t\t\t\t\t\tfunction() {\r\n\t\t\t\t\t\t\t\t\t$(this).triggerHandler(\"_resize\",\r\n\t\t\t\t\t\t\t\t\t\t\t[ true, w, h ]);\r\n\t\t\t\t\t\t\t\t});\r\n\r\n\t\t\t},\r\n\r\n\t\t\t/**\r\n\t\t\t * 显示页签\r\n\t\t\t */\r\n\t\t\tshow : function($tab) {\r\n\t\t\t\tvar $this = this.element, $ul = this.$header, $content = this.$content, $tabHead, $prev, $prevHead, e;\r\n\t\t\t\tif (!$tab) {\r\n\t\t\t\t\t$tab = $content.find(\">.tab-pane:first\");\r\n\t\t\t\t}\r\n\t\t\t\tif (typeof $tab == \"string\") {\r\n\t\t\t\t\tif ($tab.indexOf(\"#\") != 0) {\r\n\t\t\t\t\t\t$tab = \"#\" + $tab;\r\n\t\t\t\t\t}\r\n\t\t\t\t\t$tab = $content.find($tab);\r\n\t\t\t\t}\r\n\t\t\t\tif ($tab.hasClass('active'))\r\n\t\t\t\t\treturn;\r\n\t\t\t\t$prev = $content.find(\">.tab-pane.active\");\r\n\t\t\t\tif ($ul) {\r\n\t\t\t\t\t$prevHead = $ul.find(\">.active>a\");\r\n\t\t\t\t\t$tabHead = $ul.find(\"a[data-toggle=tab][data-target=#\"\r\n\t\t\t\t\t\t\t+ $tab.attr(\"id\") + \"]\");\r\n\t\t\t\t}\r\n\r\n\t\t\t\te = $.Event('beforeSwitchTab', {\r\n\t\t\t\t\tpreviousTab : $prev,\r\n\t\t\t\t\tpreviousHead : $prevHead,\r\n\t\t\t\t\tactiveTab : $tab,\r\n\t\t\t\t\tactiveHead : $tabHead\r\n\t\t\t\t});\r\n\t\t\t\t$this.trigger(e);\r\n\t\t\t\tif (e.isDefaultPrevented())\r\n\t\t\t\t\treturn;\r\n\t\t\t\tif ($prevHead) {\r\n\t\t\t\t\t$prevHead.parent(\"li\").removeClass(\"active\");\r\n\t\t\t\t}\r\n\t\t\t\tif ($tabHead) {\r\n\t\t\t\t\t$tabHead.parent(\"li\").addClass(\"active\");\r\n\t\t\t\t}\r\n\t\t\t\tvar _self=this;\r\n\t\t\t\tthis.activate($tab, $prev, function() {\r\n\t\t\t\t\tvar $pane = $tab;\r\n\t\t\t\t\tif ($pane.is(\".lazy\")) {\r\n\t\t\t\t\t\tif ($pane.length > 0) {\r\n\t\t\t\t\t\t\t$pane.removeClass(\"lazy\");\r\n\t\t\t\t\t\t\t$pane.initPageUI(_self.option);\r\n\t\t\t\t\t\t\t$pane.attr(\"init\", true);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\t_self.trigger(\"afterSwitchTab\",$prev, $prevHead,$prevHead, $tab, $tabHead);\r\n\t\t\t\t});\r\n\t\t\t\tthis.doLayout();\r\n\t\t\t},\r\n\t\t\tsetScroll : function(cruTab) {\r\n\t\t\t\tvar $cur = cruTab\r\n\r\n\t\t\t\tif (this.option.fit == true) {\r\n\t\t\t\t\t// modify by tw\r\n\t\t\t\t\t// 暂时处理一下，回头让小苏再看看\r\n\t\t\t\t\t// $cur.css(\"overflow-y\",\"auto\");\r\n\t\t\t\t\t// $cur.css(\"overflow-x\",\"auto\");\r\n\r\n\t\t\t\t\tif ($cur[0].scrollHeight - $cur[0].offsetHeight > 5) {\r\n\t\t\t\t\t\t$cur.css(\"overflow-y\", \"auto\");\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\t$cur.css(\"overflow-y\", \"hide\");\r\n\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif ($cur[0].scrollWidth - $cur[0].offsetWidth > 5) {\r\n\t\t\t\t\t\t$cur.css(\"overflow-x\", \"auto\");\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\t$cur.css(\"overflow-x\", \"hide\");\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t/**\r\n\t\t\t * 激活\r\n\t\t\t */\r\n\t\t\t,\r\n\t\t\tactivate : function($cur, $pre, callback) {\r\n\t\t\t\tvar transition = callback && $.support.transition\r\n\t\t\t\t\t\t&& $pre.hasClass('fade');\r\n\t\t\t\tfunction next() {\r\n\t\t\t\t\t$pre.removeClass('active').addClass('inactive');\r\n\t\t\t\t\t$cur.addClass('active').removeClass('inactive');\r\n\t\t\t\t\tif (transition) {\r\n\t\t\t\t\t\t$cur[0].offsetWidth;// reflow for transition\r\n\t\t\t\t\t\t$cur.addClass('in');\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\t$cur.removeClass('fade');\r\n\t\t\t\t\t}\r\n\t\t\t\t\tcallback && callback();\r\n\t\t\t\t}\r\n\t\t\t\ttransition ? $active.one($.support.transition.end, next)\r\n\t\t\t\t\t\t: next();\r\n\t\t\t\t$pre.removeClass('in');\r\n\t\t\t\t// this.setScroll($cur);\r\n\r\n\t\t\t\t// this.setScroll($currTab);\r\n\t\t\t\tvar _self = this;\r\n\t\t\t\tthis.activateTab=$cur;\r\n\t\t\t\tsetTimeout(function() {\r\n\t\t\t\t\t_self.setScroll($cur);\r\n\r\n\t\t\t\t}, 100)\r\n\r\n\t\t\t},\r\n\t\t\tgetCurrPane : function() {\r\n\t\t\t\tvar $panel = this.$content.find(\">.tab-pane.active\");\r\n\t\t\t\treturn $panel;\r\n\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t\t\r\n\t\t\t/**\r\n\t\t\t * 页签定义\r\n\t\t\t */\r\n\t\r\n\t\t\t$.fn.appTabs = function(option, param) {\r\n\t\t\t\tvar result = undefined;\r\n\t\t\t\tvar $this = $(this).each(\r\n\t\t\t\t\t\tfunction() {\r\n\t\t\t\t\t\t\tvar $this = $(this), data = $this.data('appTabs');\r\n\t\t\t\t\t\t\tif (!data) {\r\n\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\toption = $.extend($this.parseOptions(this, [{\r\n\t\t\t\t\t\t\t\t\tfit : \"boolean\"\r\n\t\t\t\t\t\t\t\t}]), option);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tif (!data)\r\n\t\t\t\t\t\t\t\t$this.data('appTabs', (data = new AppTabs(this,\r\n\t\t\t\t\t\t\t\t\t\toption)));\r\n\t\t\t\t\t\t\tif (typeof option == 'string') {\r\n\t\t\t\t\t\t\t\tresult = data[option](param);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t});\r\n\t\t\t\tif (result !== undefined) {\r\n\t\t\t\t\treturn result;\r\n\t\t\t\t}\r\n\t\t\t\treturn $this;\r\n\t\t\t};\r\n\r\n\t\t\t/* TAB DATA-API\r\n\t\t\t * ============ */\r\n\t\t\t$(document).on(\r\n\t\t\t\t\t'click.tab.data-api',\r\n\t\t\t\t\t'[data-toggle=\"tab\"], [data-toggle=\"pill\"]',\r\n\t\t\t\t\tfunction(e) {\r\n\t\t\t\t\t\te.preventDefault();\r\n\t\t\t\t\t\tvar selector = $(this).attr('data-target');\r\n\t\t\t\t\t\tif (!selector)\r\n\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\tif (!selector) {\r\n\t\t\t\t\t\t\tselector = $this.attr('href');\r\n\t\t\t\t\t\t\tselector = selector\r\n\t\t\t\t\t\t\t\t\t&& selector.replace(/.*(?=#[^\\s]*$)/, ''); //strip for ie7\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tvar $target = $A(selector);\r\n\t\t\t\t\t\tif ($target.length == 0)\r\n\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\tvar $appTabs = $target.parent(\".tab-content\").parent();\r\n\t\t\t\t\t\tif ($appTabs.length == 0)\r\n\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t$appTabs.appTabs('show', $target);\r\n\t\t\t\t\t});\r\n\t\t\treturn $;\r\n\t\t\t/**\r\n\t\t\t * 生成按钮区\r\n\t\t\t */\r\n\t\t\tfunction setHeaderButton($header, option){\r\n\t\t\t\tvar btns = option.buttons;\r\n\t\t\t\tif(btns){\r\n\t\t\t\t\t$header.wrap('<div class=\"tabs-header\" />');\r\n\t\t\t\t\tvar $wrap = $header.parent();\r\n\t\t\t\t\t$wrap.append(createButton(btns));\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tfunction createButton(btns){\r\n\t\t\t\tvar $btnarea = $('<div class=\"tabs-header-btns\"></div>');\r\n\t\t\t\tfor(var i = 0; i < btns.length; i++){\r\n\t\t\t\t\tvar btn = btns[i];\r\n\t\t\t\t\tvar $btn = $('<a class=\"app-button\" title=\"' + btn.tips + '\">' + btn.text+ '</a>')\r\n\t\t\t\t\t$btnarea.append($btn);\r\n\t\t\t\t\t$btn.button(btn);\r\n\t\t\t\t}\r\n\t\t\t\treturn $btnarea;\r\n\t\t\t}\r\n\t\t});\n",
    "/**\r\n * tabs页\r\n * @author sjq\r\n * \r\n */\r\ndefine('app/widgets/tabs/app-tabs',[ \"app/core/app-jquery\", \"app/core/app-core\", \"app/util/app-utils\",\r\n\t\t\"app/data/app-ajax\", \"app/widgets/app-widget\",\"app/core/app-options\",\r\n\t\t\"app/widgets/button/app-menubutton\",\"app/widgets/panel/app-panel\"],\r\n\t\tfunction($, $A, $utils, ajax, Widget,Opt,button,panel) {\r\n\r\n\t\t\tvar Tabs = Widget.extend({\r\n\t\t\t\tinitialize : function(el, options) {\r\n\t\t\t\t\tif (!options) {\r\n\t\t\t\t\t\toptions = {};\r\n\t\t\t\t\t}\r\n\t\t\t\t\tTabs.superclass.initialize.call(this, options);\r\n\r\n\t\t\t\t\tvar t = $(el);\r\n\t\t\t\t\tthis.element=el;\r\n\t\t\t\t\tvar opts = $.extend({}, Tabs.defaults, Tabs\r\n\t\t\t\t\t\t\t\t\t.parseOptions(el), options);\r\n\t\t\t\t\t$.data(el, \"tabsObj\", {\r\n\t\t\t\t\t\toptions:opts,\r\n\t\t\t\t\t\ttabs: [],\r\n\t\t\t\t\t\tselectHis: []\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\tthis._init();\r\n\t\t\t\t},\r\n\t\t\t    _init:function(){\r\n\t\t\t    \tthis._wrapTabs();\r\n\t\t\t    \tthis._addTools();\r\n\t\t\t    \tthis._setProperties();\r\n\t\t\t    \tthis._setSize();\r\n\t\t\t    \tthis._bindEvents();\r\n\t\t\t\t\tthis.addEvents(\"onLoad\",\"onSelect\",\"onBeforeClose\",\"onUnselect\",\"onClose\",\"onAdd\",\"onBeforeDestroy\",\"onUpdate\",\"onContextMenu\");\r\n\r\n\t\t\t    \tthis._doFirstSelect();\r\n\t\t\t    }\r\n\t\t\t    ,options: function(){\r\n\t\t\t\t\tvar cc = this.element;\r\n\t\t\t\t\tvar opts = $.data(cc, 'tabsObj').options;\r\n\t\t\t\t\tvar s =this._getSelectedTab();\r\n\t\t\t\t\topts.selected = s ? this._getTabIndex(s) : -1;\r\n\t\t\t\t\treturn opts;\r\n\t\t\t\t},\r\n\t\t\t\ttabs: function(){\r\n\t\t\t\t\treturn $.data(this.element, 'tabsObj');\r\n\t\t\t\t},\r\n\t\t\t\tresize: function(param){\r\n\t\t\t\t\r\n\t\t\t\t\t\tthis._setSize(param);\r\n\t\t\t\t\t\tthis.setSelectedSize();\r\n\t\t\t\t\r\n\t\t\t\t},\r\n\t\t\t\tadd: function(options){\r\n\t\t\t\t\treturn this._addTab(options);\r\n\t\t\t\t\t\r\n\t\t\t\t},\r\n\t\t\t\tclose: function(which){\r\n\t\t\t\t\treturn this._closeTab(which);\r\n\t\t\t\t\t\r\n\t\t\t\t},\r\n\t\t\t\tgetTab: function( which){\r\n\t\t\t\t\treturn this._getTab(which);\r\n\t\t\t\t\t\r\n\t\t\t\t},\r\n\t\t\t\tgetTabIndex: function(tab){\r\n\t\t\t\t\treturn this._getTabIndex(tab);\r\n\t\t\t\t},\r\n\t\t\t\tgetSelected: function(){\r\n\t\t\t\t\treturn this._getSelectedTab();\r\n\t\t\t\t},\r\n\t\t\t\tselect: function( which){\r\n                    if($.type(which) === 'string'){\r\n                        var container=this.element;\r\n                        var tabs = $.data(container, 'tabsObj').tabs;\r\n                        for(var i=0;i<tabs.length;i++){\r\n                        \tvar $tab = tabs[i];\r\n                            if($tab.attr('id')===which){\r\n                                which = i;\r\n                                break;\r\n                            }\r\n\t\t\t\t\t\t}\r\n                    }\r\n\t\t\t\t\tthis._selectTab(which);\r\n\t\t\t\t},\r\n\t\t\t\tunselect: function(which){\r\n\t\t\t\t\tthis._unselectTab(which);\r\n\t\t\t\t\t\r\n\t\t\t\t},\r\n\t\t\t\texists: function( which){\r\n\t\t\t\t\t\r\n\t\t\t\t\treturn this.exists(which);\r\n\t\t\t\t},\r\n\t\t\t\tupdate: function( options){\r\n\t\t\t\t\treturn this._updateTab(options);\r\n\t\t\t\t\t\r\n\t\t\t\t},\r\n\t\t\t\tenableTab: function(which){\r\n\t\t\t\t\tvar opts =  this.getTab(which).panel('options')\r\n\t\t\t\t\topts.tab.removeClass('tabs-disabled');\r\n\t\t\t\t\topts.disabled = false;\r\n\t\t\t\t\t\r\n\t\t\t\t},\r\n\t\t\t\tdisableTab: function(which){\r\n\t\t\t\t\tvar opts =  this.getTab(which).panel('options')\r\n\t\t\t\t\topts.tab.addClass('tabs-disabled');\r\n\t\t\t\t\topts.disabled = true;\r\n\t\t\t\t},\r\n\t\t\t\tshowHeader: function(){\r\n\t\t\t\t\t\r\n\t\t\t\t\t\tthis._showHeader(true);\r\n\t\t\t\t\t\r\n\t\t\t\t},\r\n\t\t\t\thideHeader: function(){\r\n\t\t\t\t\tthis._showHeader( false);\r\n\t\t\t\t\t\r\n\t\t\t\t},\r\n\t\t\t\tshowTool: function(){\r\n\t\t\t\t\r\n\t\t\t\t\tthis._showTool(true);\r\n\t\t\t\t\t\r\n\t\t\t\t},\r\n\t\t\t\thideTool: function(jq){\r\n\t\t\t\t\tthis._showTool(this, false);\r\n\t\t\t\t},\r\n\t\t\t\tscrollBy: function( deltaX){\t// scroll the tab header by the specified amount of pixels\r\n\t\t\t\t\tvar container=this.element;\r\n\r\n\t\t\t\t\t\tvar opts =this.options();\r\n\t\t\t\t\t\tvar wrap = $(container).find('>div.tabs-header>div.tabs-wrap');\r\n\t\t\t\t\t\tvar pos = Math.min(wrap._scrollLeft() + deltaX, getMaxScrollWidth());\r\n\t\t\t\t\t\twrap.animate({scrollLeft: pos}, opts.scrollDuration);\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tfunction getMaxScrollWidth(){\r\n\t\t\t\t\t\t\tvar w = 0;\r\n\t\t\t\t\t\t\tvar ul = wrap.children('ul');\r\n\t\t\t\t\t\t\tul.children('li').each(function(){\r\n\t\t\t\t\t\t\t\tw += $(this).outerWidth(true);\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\treturn w - wrap.width() + (ul.outerWidth() - ul.width());\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\r\n\t\t\t\t},\r\n\t\t\t\t\r\n\t\t\t\t_showHeader:function(visible){\r\n\t\t\t\t\tvar opts = $.data(this.element, 'tabsObj').options;\r\n\t\t\t\t\topts.showHeader = visible;\r\n\t\t\t\t\tthis.resize();\r\n\t\t\t\t},\r\n\t\t\t\t\r\n\t\t\t\t_showTool:function(visible){\r\n\t\t\t\t\tvar tool = $(this.element).find('>.tabs-header>.tabs-tool');\r\n\t\t\t\t\tif (visible){\r\n\t\t\t\t\t\ttool.removeClass('tabs-tool-hidden').show();\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\ttool.addClass('tabs-tool-hidden').hide();\r\n\t\t\t\t\t}\r\n\t\t\t\t\tthis.resize();\r\n\t\t\t\t\tthis.scrollBy(0)\r\n\t\t\t\t\t\r\n\t\t\t\t}, _getContentWidth:function(c){\r\n\t\t\t\t\tvar w = 0;\r\n\t\t\t\t\t$(c).children().each(function(){\r\n\t\t\t\t\t\tw += $(this).outerWidth(true);\r\n\t\t\t\t\t});\r\n\t\t\t\t\treturn w;\r\n\t\t\t\t},\t/**\r\n\t\t\t\t * set the tabs scrollers to show or not,\r\n\t\t\t\t * dependent on the tabs count and width\r\n\t\t\t\t */\r\n\t\t\t\t _setScrollers:function() {\r\n\t\t\t\t\tvar opts = $.data(this.element, 'tabsObj').options;\r\n\t\t\t\t\tif (opts.tabPosition == 'left' || opts.tabPosition == 'right' || !opts.showHeader){return}\r\n\t\t\t\t\t\r\n\t\t\t\t\tvar header = $(this.element).children('div.tabs-header');\r\n\t\t\t\t\tvar tool = header.children('div.tabs-tool:not(.tabs-tool-hidden)');\r\n\t\t\t\t\tvar sLeft = header.children('div.tabs-scroller-left');\r\n\t\t\t\t\tvar sRight = header.children('div.tabs-scroller-right');\r\n\t\t\t\t\tvar wrap = header.children('div.tabs-wrap');\r\n\t\t\t\t\t\r\n\t\t\t\t\t// set the tool height\r\n\t\t\t\t\tvar tHeight = header.outerHeight();\r\n\t\t\t\t\tif (opts.plain){\r\n\t\t\t\t\t\ttHeight -= tHeight - header.height();\r\n\t\t\t\t\t}\r\n\t\t\t\t\ttool._outerHeight(tHeight);\r\n\t\t\t\t\t\r\n\t\t\t\t\tvar tabsWidth = this._getContentWidth(header.find('ul.tabs'));\r\n\t\t\t\t\tvar cWidth = header.width() - tool._outerWidth();\r\n\t\t\t\t\t\r\n\t\t\t\t\tif (tabsWidth > cWidth) {\r\n\t\t\t\t\t\tsLeft.add(sRight).show()._outerHeight(tHeight);\r\n\t\t\t\t\t\tif (opts.toolPosition == 'left'){\r\n\t\t\t\t\t\t\ttool.css({\r\n\t\t\t\t\t\t\t\tleft: sLeft.outerWidth(),\r\n\t\t\t\t\t\t\t\tright: ''\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\twrap.css({\r\n\t\t\t\t\t\t\t\tmarginLeft: sLeft.outerWidth() + tool._outerWidth(),\r\n\t\t\t\t\t\t\t\tmarginRight: sRight._outerWidth(),\r\n\t\t\t\t\t\t\t\twidth: cWidth - sLeft.outerWidth() - sRight.outerWidth()\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\ttool.css({\r\n\t\t\t\t\t\t\t\tleft: '',\r\n\t\t\t\t\t\t\t\tright: sRight.outerWidth()\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\twrap.css({\r\n\t\t\t\t\t\t\t\tmarginLeft: sLeft.outerWidth(),\r\n\t\t\t\t\t\t\t\tmarginRight: sRight.outerWidth() + tool._outerWidth(),\r\n\t\t\t\t\t\t\t\twidth: cWidth - sLeft.outerWidth() - sRight.outerWidth()\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tsLeft.add(sRight).hide();\r\n\t\t\t\t\t\tif (opts.toolPosition == 'left'){\r\n\t\t\t\t\t\t\ttool.css({\r\n\t\t\t\t\t\t\t\tleft: 0,\r\n\t\t\t\t\t\t\t\tright: ''\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\twrap.css({\r\n\t\t\t\t\t\t\t\tmarginLeft: tool._outerWidth(),\r\n\t\t\t\t\t\t\t\tmarginRight: 0,\r\n\t\t\t\t\t\t\t\twidth: cWidth\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\ttool.css({\r\n\t\t\t\t\t\t\t\tleft: '',\r\n\t\t\t\t\t\t\t\tright: 0\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\twrap.css({\r\n\t\t\t\t\t\t\t\tmarginLeft: 0,\r\n\t\t\t\t\t\t\t\tmarginRight: tool._outerWidth(),\r\n\t\t\t\t\t\t\t\twidth: cWidth\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\t_addTools:function (){\r\n\t\t\t\t\tvar opts = $.data(this.element, 'tabsObj').options;\r\n\t\t\t\t\tvar header = $(this.element).children('div.tabs-header');\r\n\t\t\t\t\tif (opts.tools) {\r\n\t\t\t\t\t\tif (typeof opts.tools == 'string'){\r\n\t\t\t\t\t\t\t$(opts.tools).addClass('tabs-tool').appendTo(header);\r\n\t\t\t\t\t\t\t$(opts.tools).show();\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\theader.children('div.tabs-tool').remove();\r\n\t\t\t\t\t\t\tvar tools = $('<div class=\"tabs-tool\"><table cellspacing=\"0\" cellpadding=\"0\" style=\"height:100%\"><tr></tr></table></div>').appendTo(header);\r\n\t\t\t\t\t\t\tvar tr = tools.find('tr');\r\n\t\t\t\t\t\t\tfor(var i=0; i<opts.tools.length; i++){\r\n\t\t\t\t\t\t\t\tvar td = $('<td></td>').appendTo(tr);\r\n\t\t\t\t\t\t\t\tif(opts.tools[i].children){\r\n\t\t\t\t\t\t\t\t\tvar btn = $.extend(true, {}, opts.tools[i], {\r\n\t\t\t\t\t\t\t\t\t\tplain: true\r\n\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t\tvar $btn = initMenuButtonHtml(btn);\r\n\t\t\t\t\t\t\t\t\ttd.append($btn);\r\n\t\t\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\t\t\tvar tool = $('<a></a>').appendTo(td);\r\n\t\t\t\t\t\t\t\t\ttool[0].onclick = eval(opts.tools[i].handler || function(){});\r\n\t\t\t\t\t\t\t\t\ttool.button($.extend({}, opts.tools[i], {\r\n\t\t\t\t\t\t\t\t\t\tplain: true\r\n\t\t\t\t\t\t\t\t\t}));\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\theader.children('div.tabs-tool').remove();\r\n\t\t\t\t\t}\r\n\t\t\t\t},_setSize:function(param) {\r\n\t\t\t\t\tvar state = $.data(this.element, 'tabsObj');\r\n\t\t\t\t\tvar opts = state.options;\r\n\t\t\t\t\tvar cc = $(this.element);\r\n\t\t\t\t\t\r\n\t\t\t\t\tif (!opts.doSize){return}\r\n\t\t\t\t\tif (param){\r\n\t\t\t\t\t\t$.extend(opts, {\r\n\t\t\t\t\t\t\twidth: param.width,\r\n\t\t\t\t\t\t\theight: param.height\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t\tcc._size(opts);\r\n\r\n\t\t\t\t\tvar header = cc.children('div.tabs-header');\r\n\t\t\t\t\tvar panels = cc.children('div.tabs-panels');\r\n\t\t\t\t\tvar wrap = header.find('div.tabs-wrap');\r\n\t\t\t\t\tvar ul = wrap.find('.tabs');\r\n\t\t\t\t\tul.children('li').removeClass('tabs-first tabs-last');\r\n\t\t\t\t\tul.children('li:first').addClass('tabs-first');\r\n\t\t\t\t\tul.children('li:last').addClass('tabs-last');\r\n\t\t\t\t\t\r\n\t\t\t\t\tif (opts.tabPosition == 'left' || opts.tabPosition == 'right'){\r\n\t\t\t\t\t\theader._outerWidth(opts.showHeader ? opts.headerWidth : 0);\r\n\t\t\t\t\t\tpanels._outerWidth(cc.width() - header.outerWidth());\r\n\t\t\t\t\t\theader.add(panels)._size('height', isNaN(parseInt(opts.height)) ? '' : cc.height());\r\n\t\t\t\t\t\twrap._outerWidth(header.width());\r\n\t\t\t\t\t\tul._outerWidth(wrap.width()).css('height','');\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\theader.children('div.tabs-scroller-left,div.tabs-scroller-right,div.tabs-tool:not(.tabs-tool-hidden)').css('display', opts.showHeader?'block':'none');\r\n\t\t\t\t\t\theader._outerWidth(cc.width()).css('height','');\r\n\t\t\t\t\t\tif (opts.showHeader){\r\n\t\t\t\t\t\t\theader.css('background-color','');\r\n\t\t\t\t\t\t\twrap.css('height','');\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\theader.css('background-color','transparent');\r\n\t\t\t\t\t\t\theader._outerHeight(0);\r\n\t\t\t\t\t\t\twrap._outerHeight(0);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tul._outerHeight(opts.tabHeight).css('width','');\r\n\t\t\t\t\t\tul._outerHeight(ul.outerHeight()-ul.height()-1+opts.tabHeight).css('width','');\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tpanels._size('height', isNaN(parseInt(opts.height)) ? '' : (cc.height()-header.outerHeight()));\r\n\t\t\t\t\t\tpanels._size('width', cc.width());\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif (state.tabs.length){\r\n\t\t\t\t\t\tvar d1 = ul.outerWidth(true) - ul.width();\r\n\t\t\t\t\t\tvar li = ul.children('li:first');\r\n\t\t\t\t\t\tvar d2 = li.outerWidth(true) - li.width();\r\n\t\t\t\t\t\tvar hwidth = header.width() - header.children('.tabs-tool:not(.tabs-tool-hidden)')._outerWidth();\r\n\t\t\t\t\t\tvar justifiedWidth = Math.floor((hwidth-d1-d2*state.tabs.length)/state.tabs.length);\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t$.map(state.tabs, function(p){\r\n\t\t\t\t\t\t\tsetTabSize(p, (opts.justified && $.inArray(opts.tabPosition,['top','bottom'])>=0) ? justifiedWidth : undefined);\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\tif (opts.justified && $.inArray(opts.tabPosition,['top','bottom'])>=0){\r\n\t\t\t\t\t\t\tvar deltaWidth = hwidth - d1 - this._getContentWidth(ul);\r\n\t\t\t\t\t\t\tsetTabSize(state.tabs[state.tabs.length-1], justifiedWidth+deltaWidth);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tthis._setScrollers();\r\n\r\n\t\t\t\t\tfunction setTabSize(p, width){\r\n\t\t\t\t\t\tvar p_opts = p.panel('options');\r\n\t\t\t\t\t\tvar p_t = p_opts.tab.find('a.tabs-inner');\r\n\t\t\t\t\t\tvar width = width ? width : (parseInt(p_opts.tabWidth||opts.tabWidth||undefined));\r\n\t\t\t\t\t\tif (width){\r\n\t\t\t\t\t\t\tp_t._outerWidth(width);\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tp_t.css('width', '');\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tp_t._outerHeight(opts.tabHeight);\r\n\t\t\t\t\t\tp_t.css('lineHeight', p_t.height()+'px');\r\n\t\t\t\t\t\tp_t.find('.app-fluid:visible').triggerHandler('_resize');\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\t/**\r\n\t\t\t\t * set selected tab panel size\r\n\t\t\t\t */\r\n\t\t\t\t_setSelectedSize:function(){\r\n\t\t\t\t\tvar opts = $.data(this.element, 'tabsObj').options;\r\n\t\t\t\t\tvar tab = this._getSelectedTab();\r\n\t\t\t\t\tif (tab){\r\n\t\t\t\t\t\tvar panels = $(this.element).children('div.tabs-panels');\r\n\t\t\t\t\t\tvar width = opts.width=='auto' ? 'auto' : panels.width();\r\n\t\t\t\t\t\tvar height = opts.height=='auto' ? 'auto' : panels.height();\r\n\t\t\t\t\t\ttab.panel('resize', {\r\n\t\t\t\t\t\t\twidth: width,\r\n\t\t\t\t\t\t\theight: height\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t},\t/**\r\n\t\t\t\t * wrap the tabs header and body\r\n\t\t\t\t */\r\n\t\t\t\t_wrapTabs:function () {\r\n\t\t\t\t\tvar tabs = $.data(this.element, 'tabsObj').tabs;\r\n\t\t\t\t\tvar _self=this;\r\n\t\t\t\t\tvar cc = $(this.element).addClass('tabs-container');\r\n\t\t\t\t\tvar panels = $('<div class=\"tabs-panels\"></div>').insertBefore(cc);\r\n\t\t\t\t\tcc.children('div').each(function(){\r\n\t\t\t\t\t\tpanels[0].appendChild(this);\r\n\t\t\t\t\t});\r\n\t\t\t\t\tcc[0].appendChild(panels[0]);\r\n\t\t\t\t\t$('<div class=\"tabs-header\">'\r\n\t\t\t\t\t\t\t+ '<div class=\"tabs-scroller-left\"></div>'\r\n\t\t\t\t\t\t\t+ '<div class=\"tabs-scroller-right\"></div>'\r\n\t\t\t\t\t\t\t+ '<div class=\"tabs-wrap\">'\r\n\t\t\t\t\t\t\t+ '<ul class=\"tabs\"></ul>'\r\n\t\t\t\t\t\t\t+ '</div>'\r\n\t\t\t\t\t\t\t+ '</div>').prependTo(this.element);\r\n\t\t\t\t\t\r\n\t\t\t\t\tcc.children('div.tabs-panels').children('div').each(function(i){\r\n\t\t\t\t\t\tvar opts = $.extend({}, $(this).parseOptions(this), {\r\n\t\t\t\t\t\t\tdisabled: ($(this).attr('disabled') ? true : undefined),\r\n\t\t\t\t\t\t\tselected: ($(this).attr('selected') ? true : undefined)\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\t_self._createTab(opts, $(this));\r\n\t\t\t\t\t});\r\n\t\t\t\t\t\r\n\t\t\t\t\tcc.children('div.tabs-header').find('.tabs-scroller-left, .tabs-scroller-right').hover(\r\n\t\t\t\t\t\t\tfunction(){$(this).addClass('tabs-scroller-over');},\r\n\t\t\t\t\t\t\tfunction(){$(this).removeClass('tabs-scroller-over');}\r\n\t\t\t\t\t);\r\n\t\t\t\t\tvar _self=this;\r\n\t\t\t\t\tcc.bind('_resize', function(e,force){\r\n\t\t\t\t\t\tif ($(this).hasClass('app-fluid') || force){\r\n\t\t\t\t\t\t\t_self._setSize();\r\n\t\t\t\t\t\t\t_self._setSelectedSize();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t});\r\n\t\t\t\t},_bindEvents:function(){\r\n\t\t\t\t\tvar state = $.data(this.element, 'tabsObj')\r\n\t\t\t\t\tvar opts = state.options;\r\n\t\t\t\t\tvar _self=this;\r\n\t\t\t\t\t$(this.element).children('div.tabs-header').unbind().bind('click', function(e){\r\n\t\t\t\t\t\tif ($(e.target).hasClass('tabs-scroller-left')){\r\n\t\t\t\t\t\t\t$(_self.element).tabs('scrollBy', -opts.scrollIncrement);\r\n\t\t\t\t\t\t} else if ($(e.target).hasClass('tabs-scroller-right')){\r\n\t\t\t\t\t\t\t$(_self.element).tabs('scrollBy', opts.scrollIncrement);\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tvar li = $(e.target).closest('li');\r\n\t\t\t\t\t\t\tif (li.hasClass('tabs-disabled')){return false;}\r\n\t\t\t\t\t\t\tvar a = $(e.target).closest('a.tabs-close');\r\n\t\t\t\t\t\t\tif (a.length){\r\n\t\t\t\t\t\t\t\t_self._closeTab(getLiIndex(li));\r\n\t\t\t\t\t\t\t} else if (li.length){\r\n//\t\t\t\t\t\t\t\tselectTab(this.element, getLiIndex(li));\r\n\t\t\t\t\t\t\t\tvar index = getLiIndex(li);\r\n\t\t\t\t\t\t\t\tvar popts = state.tabs[index].panel('options');\r\n\t\t\t\t\t\t\t\tif (popts.collapsible){\r\n\t\t\t\t\t\t\t\t\tpopts.closed ? _self._selectTab(index) : _self._unselectTab( index);\r\n\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\t_self._selectTab(index);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}).bind('contextmenu', function(e){\r\n\t\t\t\t\t\tvar li = $(e.target).closest('li');\r\n\t\t\t\t\t\tif (li.hasClass('tabs-disabled')){return;}\r\n\t\t\t\t\t\tif (li.length){\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t_self.trigger(\"onContextMenu\",e, li.find('span.tabs-title').html(),getLiIndex(li))\r\n\t\t\t\t\t\t\t//opts.onContextMenu.call(_self.element, e, li.find('span.tabs-title').html(), getLiIndex(li));\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t\t\r\n\t\t\t\t\tfunction getLiIndex(li){\r\n\t\t\t\t\t\tvar index = 0;\r\n\t\t\t\t\t\tli.parent().children('li').each(function(i){\r\n\t\t\t\t\t\t\tif (li[0] == this){\r\n\t\t\t\t\t\t\t\tindex = i;\r\n\t\t\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\treturn index;\r\n\t\t\t\t\t}\r\n\t\t\t\t}, _setProperties:function(){\r\n\t\t\t\t\tvar opts = $.data(this.element, 'tabsObj').options;\r\n\t\t\t\t\tvar header = $(this.element).children('div.tabs-header');\r\n\t\t\t\t\tvar panels = $(this.element).children('div.tabs-panels');\r\n\t\t\t\t\t\r\n\t\t\t\t\theader.removeClass('tabs-header-top tabs-header-bottom tabs-header-left tabs-header-right');\r\n\t\t\t\t\tpanels.removeClass('tabs-panels-top tabs-panels-bottom tabs-panels-left tabs-panels-right');\r\n\t\t\t\t\tif (opts.tabPosition == 'top'){\r\n\t\t\t\t\t\theader.insertBefore(panels);\r\n\t\t\t\t\t} else if (opts.tabPosition == 'bottom'){\r\n\t\t\t\t\t\theader.insertAfter(panels);\r\n\t\t\t\t\t\theader.addClass('tabs-header-bottom');\r\n\t\t\t\t\t\tpanels.addClass('tabs-panels-top');\r\n\t\t\t\t\t} else if (opts.tabPosition == 'left'){\r\n\t\t\t\t\t\theader.addClass('tabs-header-left');\r\n\t\t\t\t\t\tpanels.addClass('tabs-panels-right');\r\n\t\t\t\t\t} else if (opts.tabPosition == 'right'){\r\n\t\t\t\t\t\theader.addClass('tabs-header-right');\r\n\t\t\t\t\t\tpanels.addClass('tabs-panels-left');\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\r\n\t\t\t\t\tif (opts.plain == true) {\r\n\t\t\t\t\t\theader.addClass('tabs-header-plain');\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\theader.removeClass('tabs-header-plain');\r\n\t\t\t\t\t}\r\n\t\t\t\t\theader.removeClass('tabs-header-narrow').addClass(opts.narrow?'tabs-header-narrow':'');\r\n\t\t\t\t\tvar tabs = header.find('.tabs');\r\n\t\t\t\t\ttabs.removeClass('tabs-pill').addClass(opts.pill?'tabs-pill':'');\r\n\t\t\t\t\ttabs.removeClass('tabs-narrow').addClass(opts.narrow?'tabs-narrow':'');\r\n\t\t\t\t\ttabs.removeClass('tabs-justified').addClass(opts.justified?'tabs-justified':'');\r\n\t\t\t\t\tif (opts.border == true){\r\n\t\t\t\t\t\theader.removeClass('tabs-header-noborder');\r\n\t\t\t\t\t\tpanels.removeClass('tabs-panels-noborder');\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\theader.addClass('tabs-header-noborder');\r\n\t\t\t\t\t\tpanels.addClass('tabs-panels-noborder');\r\n\t\t\t\t\t}\r\n\t\t\t\t\topts.doSize = true;\r\n\t\t\t\t}, _createTab:function( options, pp) {\r\n\t\t\t\t\toptions = options || {};\r\n\t\t\t\t\tvar container=this.element;\r\n\t\t\t\t\tvar state = $.data(container, 'tabsObj');\r\n\t\t\t\t\tvar tabs = state.tabs;\r\n\t\t\t\t\tvar _self=this;\r\n\t\t\t\t\tif (options.index == undefined || options.index > tabs.length){options.index = tabs.length}\r\n\t\t\t\t\tif (options.index < 0){options.index = 0}\r\n\t\t\t\t\t\r\n\t\t\t\t\tvar ul = $(container).children('div.tabs-header').find('ul.tabs');\r\n\t\t\t\t\tvar panels = $(container).children('div.tabs-panels');\r\n\t\t\t\t\tvar tab = $(\r\n\t\t\t\t\t\t\t'<li>' +\r\n\t\t\t\t\t\t\t'<a href=\"javascript:void(0);\" class=\"tabs-inner\">' +\r\n\t\t\t\t\t\t\t'<span class=\"tabs-title\"></span>' +\r\n\t\t\t\t\t\t\t'<span class=\"tabs-icon\"></span>' +\r\n\t\t\t\t\t\t\t'</a>' +\r\n\t\t\t\t\t\t\t'</li>');\r\n\t\t\t\t\tif (!pp){pp = $('<div></div>');}\r\n\t\t\t\t\tif (options.index >= tabs.length){\r\n\t\t\t\t\t\ttab.appendTo(ul);\r\n\t\t\t\t\t\tpp.appendTo(panels);\r\n\t\t\t\t\t\ttabs.push(pp);\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\ttab.insertBefore(ul.children('li:eq('+options.index+')'));\r\n\t\t\t\t\t\tpp.insertBefore(panels.children('div.panel:eq('+options.index+')'));\r\n\t\t\t\t\t\ttabs.splice(options.index, 0, pp);\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t// create panel\r\n\t\t\t\t\tpp.panel($.extend({}, options, {\r\n\t\t\t\t\t\ttab: tab,\r\n\t\t\t\t\t\tborder: false,\r\n\t\t\t\t\t\tnoheader: true,\r\n\t\t\t\t\t\tclosed: true,\r\n\t\t\t\t\t\tdoSize: false,\r\n\t\t\t\t\t\ticonCls: (options.icon ? options.icon : undefined),\r\n\t\t\t\t\t\tonLoad: function(){\r\n\t\t\t\t\t\t\t/*if (options.onLoad){\r\n\t\t\t\t\t\t\t\toptions.onLoad.call(this, arguments);\r\n\t\t\t\t\t\t\t}*/\r\n\t\t\t\t\t\t\t_self.trigger(\"onLoad\",container)\r\n\t\t\t\t\t\t\t//state.options.onLoad.call(container, $(this));\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tonBeforeOpen: function(target){\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tif (_self.trigger(\"onBeforeOpen\",container) == false){return false;};\r\n\t\t\t\t\t\t\tvar p = _self.getSelected();\r\n\t\t\t\t\t\t\tvar  tabIndex=_self.getTabIndex(p);\r\n\t\t\t\t\t\t\tvar tabPanel=_self._getTab(tabIndex);\r\n\t\t\t\t\t\t\t_self.trigger(\"beforeSwitchTab\", tabIndex,tabPanel);\r\n\t\t\t\t\t\t\tif (p){\r\n\t\t\t\t\t\t\t\tif (p[0] != this){\r\n\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\t_self.unselect(tabIndex);\r\n\t\t\t\t\t\t\t\t\tp = _self.getSelected();\r\n\t\t\t\t\t\t\t\t\tif (p){\r\n\t\t\t\t\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\t_self._setSelectedSize();\r\n\t\t\t\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tvar popts = $(target).panel('options');\r\n\t\t\t\t\t\t\tpopts.tab.addClass('tabs-selected');\r\n\t\t\t\t\t\t\t// scroll the tab to center position if required.\r\n\t\t\t\t\t\t\tvar wrap = $(container).find('>div.tabs-header>div.tabs-wrap');\r\n\t\t\t\t\t\t\tvar left = popts.tab.position().left;\r\n\t\t\t\t\t\t\tvar right = left + popts.tab.outerWidth();\r\n\t\t\t\t\t\t\tif (left < 0 || right > wrap.width()){\r\n\t\t\t\t\t\t\t\tvar deltaX = left - (wrap.width()-popts.tab.width()) / 2;\r\n\t\t\t\t\t\t\t\t_self.scrollBy(deltaX);\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t_self.scrollBy(0);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tvar panel = $(target).panel('panel');\r\n\t\t\t\t\t\t\tpanel.css('display','block');\r\n\t\t\t\t\t\t\t_self._setSelectedSize();\r\n\t\t\t\t\t\t\tpanel.css('display','none');\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tonOpen: function(target){\r\n\t\t\t\t\t\t\tvar popts = $(target).panel('options');\r\n\t\t\t\t\t\t\tvar  tabIndex=_self.getTabIndex(pp);\r\n\t\t\t\t\t\t\tvar tabPanel=_self._getTab(tabIndex);\r\n\t\t\t\t\t\t\t/*if (options.onOpen){\r\n\t\t\t\t\t\t\t\t//options.onOpen.call(this);\r\n\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t_self.trigger(\"onOpen\", popts.title, tabIndex,tabPanel);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t*/\r\n\t\t\t\t\t\t\t_self.trigger(\"onOpen\", popts.title, tabIndex,tabPanel);\r\n\t\t\t\t\t\t\tstate.selectHis.push(popts.title);\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t_self.trigger(\"onSelect\", popts.title, tabIndex,tabPanel);\r\n\t\t\t\t\t\t\t_self.trigger(\"afterSwitchTab\", popts.title, tabIndex,tabPanel);\r\n\r\n\t\t\t\t\t\t\t//state.options.onSelect.call(container, popts.title, _self.getTabIndex(this));\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tonBeforeClose: function(target){\r\n\t\t\t\t\t\t\tif (options.onBeforeClose){\r\n\t\t\t\t\t\t\t\tif (options.onBeforeClose.call(this) == false){return false;}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tif (_self.trigger(\"onBeforeClose\",container) == false){return false;};\r\n\t\t\t\t\t\t\t$(target).panel('options').tab.removeClass('tabs-selected');\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tonClose: function(target){\r\n\t\t\t\t\t\t\tvar  tabIndex=_self.getTabIndex(pp);\r\n\t\t\t\t\t\t\tvar tabPanel=_self._getTab(tabIndex);\r\n\t\t\t\t\t\t\t/*if (options.onClose){\r\n\t\t\t\t\t\t\t\toptions.onClose.call(this);\r\n\t\t\t\t\t\t\t}*/\r\n\t\t\t\t\t\t\t_self.trigger(\"onClose\",container);\r\n\t\t\t\t\t\t\tvar popts = $(target).panel('options');\r\n\t\t\t\t\t\t\t_self.trigger(\"onUnselect\", popts.title,tabIndex,tabPanel)\r\n\r\n\t\t\t\t\t\t\t//state.options.onUnselect.call(container, popts.title, _self.getTabIndex(this));\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}));\r\n\t\t\t\t\tthis.update({\r\n\t\t\t\t\t\ttab: pp,\r\n\t\t\t\t\t\toptions: pp.panel('options'),\r\n\t\t\t\t\t\ttype: 'header'\r\n\t\t\t\t\t})\r\n\t\t\t\t\t// only update the tab header\r\n\t\t\t\t\t//$(container).tabs('update', );\r\n\t\t\t\t},_addTab:function(options) {\r\n\t\t\t\t\tvar container=this.element;\r\n\t\t\t\t\tvar state = $.data(container, 'tabsObj');\r\n\t\t\t\t\tvar opts = state.options;\r\n\t\t\t\t\tif (options.selected == undefined) options.selected = true;\r\n\t\t\t\t\t\r\n\t\t\t\t\tthis._createTab( options);\r\n\t\t\t\t\tthis.trigger(\"onAdd\", options.title,options.index)\r\n\t\t\t\t\t//opts.onAdd.call(container, options.title, options.index);\r\n\t\t\t\t\tif (options.selected){\r\n\t\t\t\t\t\tthis._selectTab(options.index);\t// select the added tab panel\r\n\t\t\t\t\t}\r\n\t\t\t\t},/**\r\n\t\t\t\t * update tab panel, param has following properties:\r\n\t\t\t\t * tab: the tab panel to be updated\r\n\t\t\t\t * options: the tab panel options\r\n\t\t\t\t * type: the update type, possible values are: 'header','body','all'\r\n\t\t\t\t */\r\n\t\t\t\t_updateTab:function ( param){\r\n\t\t\t\t\tvar container=this.element;\r\n\t\t\t\t\tparam.type = param.type || 'all';\r\n\t\t\t\t\tvar selectHis = $.data(container, 'tabsObj').selectHis;\r\n\t\t\t\t\tvar pp = param.tab;\t// the tab panel\r\n\t\t\t\t\tvar opts = pp.panel('options');\t// get the tab panel options\r\n\t\t\t\t\tvar oldTitle = opts.title;\r\n\t\t\t\t\t$.extend(opts, param.options, {\r\n\t\t\t\t\t\ticonCls: (param.options.icon ? param.options.icon : undefined)\r\n\t\t\t\t\t});\r\n\r\n\t\t\t\t\tif (param.type == 'all' || param.type == 'body'){\r\n\t\t\t\t\t\tpp.panel();\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (param.type == 'all' || param.type == 'header'){\r\n\t\t\t\t\t\tvar tab = opts.tab;\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tif (opts.header){\r\n\t\t\t\t\t\t\ttab.find('.tabs-inner').html($(opts.header));\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tvar s_title = tab.find('span.tabs-title');\r\n\t\t\t\t\t\t\tvar s_icon = tab.find('span.tabs-icon');\r\n\t\t\t\t\t\t\ts_title.html(opts.title);\r\n\t\t\t\t\t\t\ts_icon.attr('class', 'tabs-icon');\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\ttab.find('a.tabs-close').remove();\r\n\t\t\t\t\t\t\tif (opts.closable){\r\n\t\t\t\t\t\t\t\ts_title.addClass('tabs-closable');\r\n\t\t\t\t\t\t\t\t$('<a href=\"javascript:void(0);\" class=\"tabs-close\"></a>').appendTo(tab);\r\n\t\t\t\t\t\t\t} else{\r\n\t\t\t\t\t\t\t\ts_title.removeClass('tabs-closable');\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tif (opts.iconCls){\r\n\t\t\t\t\t\t\t\ts_title.addClass('tabs-with-icon');\r\n\t\t\t\t\t\t\t\ts_icon.addClass(opts.iconCls);\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\ts_title.removeClass('tabs-with-icon');\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tif (opts.tools){\r\n\t\t\t\t\t\t\t\tvar p_tool = tab.find('span.tabs-p-tool');\r\n\t\t\t\t\t\t\t\tif (!p_tool.length){\r\n\t\t\t\t\t\t\t\t\tvar p_tool = $('<span class=\"tabs-p-tool\"></span>').insertAfter(tab.find('a.tabs-inner'));\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tif ($.isArray(opts.tools)){\r\n\t\t\t\t\t\t\t\t\tp_tool.empty();\r\n\t\t\t\t\t\t\t\t\tfor(var i=0; i<opts.tools.length; i++){\r\n\t\t\t\t\t\t\t\t\t\tvar t = $('<a href=\"javascript:void(0);\"></a>').appendTo(p_tool);\r\n\t\t\t\t\t\t\t\t\t\tt.addClass(opts.tools[i].iconCls);\r\n\t\t\t\t\t\t\t\t\t\tif (opts.tools[i].handler){\r\n\t\t\t\t\t\t\t\t\t\t\tt.bind('click', {handler:opts.tools[i].handler}, function(e){\r\n\t\t\t\t\t\t\t\t\t\t\t\tif ($(this).parents('li').hasClass('tabs-disabled')){return;}\r\n\t\t\t\t\t\t\t\t\t\t\t\te.data.handler.call(this);\r\n\t\t\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\t$(opts.tools).children().appendTo(p_tool);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tvar pr = p_tool.children().length * 12;\r\n\t\t\t\t\t\t\t\tif (opts.closable) {\r\n\t\t\t\t\t\t\t\t\tpr += 8;\r\n\t\t\t\t\t\t\t\t\tp_tool.css('right', '');\r\n\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\tpr -= 3;\r\n\t\t\t\t\t\t\t\t\tp_tool.css('right','5px');\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\ts_title.css('padding-right', pr+'px');\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\ttab.find('span.tabs-p-tool').remove();\r\n\t\t\t\t\t\t\t\ts_title.css('padding-right', '');\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (oldTitle != opts.title){\r\n\t\t\t\t\t\t\tfor(var i=0; i<selectHis.length; i++){\r\n\t\t\t\t\t\t\t\tif (selectHis[i] == oldTitle){\r\n\t\t\t\t\t\t\t\t\tselectHis[i] = opts.title;\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (opts.disabled){\r\n\t\t\t\t\t\topts.tab.addClass('tabs-disabled');\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\topts.tab.removeClass('tabs-disabled');\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\r\n\t\t\t\t\tthis._setSize();\r\n\t\t\t\t\t\r\n\t\t\t\t\t$.data(container, 'tabsObj').options.onUpdate.call(container, opts.title, this._getTabIndex(pp));\r\n\t\t\t\t},_closeTab:function (which) {\r\n\t\t\t\t\tvar container=this.element;\r\n\t\t\t\t\tvar opts = $.data(container, 'tabsObj').options;\r\n\t\t\t\t\tvar tabs = $.data(container, 'tabsObj').tabs;\r\n\t\t\t\t\tvar selectHis = $.data(container, 'tabsObj').selectHis;\r\n\t\t\t\t\t\r\n\t\t\t\t\tif (!this._exists( which)) return;\r\n\t\t\t\t\t\r\n\t\t\t\t\tvar tab = this._getTab(which);\r\n\t\t\t\t\tvar title = tab.panel('options').title;\r\n\t\t\t\t\tvar index = this._getTabIndex(tab);\r\n\t\t\t\t\t\r\n\t\t\t\t\t\r\n\t\t\t\t\tif (this.trigger(\"onBeforeClose\",title, index) == false){return false;};\r\n\t\t\t\t\t\r\n\t\t\t\t\tvar tab = this._getTab(which, true);\r\n\t\t\t\t\ttab.panel('options').tab.remove();\r\n\t\t\t\t\ttab.panel('destroy');\r\n\t\t\t\t\t\r\n\t\t\t\t\r\n\t\t\t\t\tthis.trigger(\"onClose\",title, index)\r\n//\t\t\t\t\tsetScrollers(container);\r\n\t\t\t\t\tthis._setSize();\r\n\t\t\t\t\t// remove the select history item\r\n\t\t\t\t\tfor(var i=0; i<selectHis.length; i++){\r\n\t\t\t\t\t\tif (selectHis[i] == title){\r\n\t\t\t\t\t\t\tselectHis.splice(i, 1);\r\n\t\t\t\t\t\t\ti --;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\t// select the nearest tab panel\r\n\t\t\t\t\tvar hisTitle = selectHis.pop();\r\n\t\t\t\t\tif (hisTitle){\r\n\t\t\t\t\t\tthis._selectTab(hisTitle);\r\n\t\t\t\t\t} else if (tabs.length){\r\n\t\t\t\t\t\tthis._selectTab(0);\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\t\r\n\t\t\t\t/**\r\n\t\t\t\t * get the specified tab panel\r\n\t\t\t\t */\r\n\t\t\t\t_getTab:function (which, removeit){\r\n\t\t\t\t\tvar container=this.element;\r\n\t\t\t\t\tvar tabs = $.data(container, 'tabsObj').tabs;\r\n\t\t\t\t\tvar tab = null;\r\n\t\t\t\t\tif (typeof which == 'number'){\r\n\t\t\t\t\t\tif (which >=0 && which < tabs.length){\r\n\t\t\t\t\t\t\ttab = tabs[which];\r\n\t\t\t\t\t\t\tif (removeit){\r\n\t\t\t\t\t\t\t\ttabs.splice(which, 1);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tvar tmp = $('<span></span>');\r\n\t\t\t\t\t\tfor(var i=0; i<tabs.length; i++){\r\n\t\t\t\t\t\t\tvar p = tabs[i];\r\n\t\t\t\t\t\t\tvar panelOpt=p.panel('options');\r\n\t\t\t\t\t\t\tif (panelOpt.id){\r\n\t\t\t\t\t\t\t\tif (panelOpt.id == which){\r\n\t\t\t\t\t\t\t\t\ttab = p;\r\n\t\t\t\t\t\t\t\t\tif (removeit){\r\n\t\t\t\t\t\t\t\t\t\ttabs.splice(i, 1);\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\t\ttmp.html(p.panel('options').title);\r\n\t\t\t\t\t\t\t\tif (tmp.text() == which){\r\n\t\t\t\t\t\t\t\t\ttab = p;\r\n\t\t\t\t\t\t\t\t\tif (removeit){\r\n\t\t\t\t\t\t\t\t\t\ttabs.splice(i, 1);\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\ttmp.remove();\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn tab;\r\n\t\t\t\t},\r\n\t\t\t\t\r\n\t\t\t\t _getTabIndex:function(tab){\r\n\t\t\t\t\t var container=this.element;\r\n\t\t\t\t\tvar tabs = $.data(container, 'tabsObj').tabs;\r\n\t\t\t\t\tfor(var i=0; i<tabs.length; i++){\r\n\t\t\t\t\t\tif (tabs[i][0] == $(tab)[0]){\r\n\t\t\t\t\t\t\treturn i;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn -1;\r\n\t\t\t\t},\r\n\t\t\t\t\r\n\t\t\t\t_getSelectedTab:function (){\r\n\t\t\t\t\tvar container=this.element;\r\n\t\t\t\t\tvar tabs = $.data(container, 'tabsObj').tabs;\r\n\t\t\t\t\tfor(var i=0; i<tabs.length; i++){\r\n\t\t\t\t\t\tvar tab = tabs[i];\r\n\t\t\t\t\t\tif (tab.panel('options').tab.hasClass('tabs-selected')){\r\n\t\t\t\t\t\t\treturn tab;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn null;\r\n\t\t\t\t},\r\n\t\t\t\t\r\n\t\t\t\t/**\r\n\t\t\t\t * do first select action, if no tab is setted the first tab will be selected.\r\n\t\t\t\t */\r\n\t\t\t\t_doFirstSelect:function (){\r\n\t\t\t\t\tvar container=this.element;\r\n\t\t\t\t\tvar state = $.data(container, 'tabsObj')\r\n\t\t\t\t\tvar tabs = state.tabs;\r\n\t\t\t\t\tfor(var i=0; i<tabs.length; i++){\r\n\t\t\t\t\t\tvar opts = tabs[i].panel('options');\r\n\t\t\t\t\t\tif (opts.selected && !opts.disabled){\r\n\t\t\t\t\t\t\tthis._selectTab(i);\r\n\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tthis._selectTab(state.options.selected);\r\n\t\t\t\t},\r\n\t\t\t\t\r\n\t\t\t\t_selectTab:function ( which){\r\n\t\t\t\t\tvar p = this._getTab( which);\r\n\t\t\t\t\tif (p && !p.is(':visible')){\r\n\t\t\t\t\t\tthis._stopAnimate();\r\n\t\t\t\t\t\tif (!p.panel('options').disabled){\r\n\t\t\t\t\t\t\tp.panel('open');\t\t\t\t\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\t\r\n\t\t\t\t_unselectTab:function (which){\r\n\t\t\t\t\tvar p = this._getTab( which);\r\n\t\t\t\t\tif (p && p.css('display') != 'none'){\r\n\t\t\t\t\t\tthis._stopAnimate();\r\n\t\t\t\t\t\tp.panel('close');\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\r\n\t\t\t\t _stopAnimate:function(){\r\n\t\t\t\t\t var container=this.element;\r\n\t\t\t\t\t$(container).children('div.tabs-panels').each(function(){\r\n\t\t\t\t\t\t$(this).stop(true, true);\r\n\t\t\t\t\t});\r\n\t\t\t\t},\r\n\t\t\t\t\r\n\t\t\t\t_exists:function ( which){\r\n\t\t\t\t\t var container=this.element;\r\n\t\t\t\t\treturn this._getTab(which) != null;\r\n\t\t\t\t},\r\n\t\t\t\thideTab:function(whichs){\r\n\t\t\t\t\t\r\n\t\t\t\t\tvar witchList=whichs.split(\",\"),which;\r\n\t\t\t\t\tfor(var i=0;i<witchList.length;i++){\r\n\t\t\t\t\t\twhich=witchList[i]\r\n\t\t\t\t\t\tvar tabPanel=this.getTab(which);\r\n\t\t\t\t\t\tvar opts =  tabPanel.panel('options');\t\t\r\n\t\t\t\t\t\tif (opts){\r\n\t\t\t\t\t\t\topts.tab.hide();\r\n\t\t\t\t\t\t\t tabPanel.panel('hide');\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\tshowTab:function(whichs){\r\n\t\t\t\t\tvar witchList=whichs.split(\",\"),which;\r\n\t\t\t\t\tfor(var i=0;i<witchList.length;i++){\r\n\t\t\t\t\t\twhich=witchList[i]\r\n\t\t\t\t\t\tvar tabPanel=this.getTab(which);\r\n\t\t\t\t\t\tvar opts =  tabPanel.panel('options');\t\t\r\n\t\t\t\t\t\tif (opts){\r\n\t\t\t\t\t\t\topts.tab.show();\r\n\t\t\t\t\t\t\t tabPanel.panel('show');\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\t\r\n\t\t\r\n\t\t\t\r\n\t\t\t\r\n\r\n\t\t\tTabs.parseOptions = function(target){\r\n\t\t\t\tvar t = $(target);\r\n\t\t\t\treturn $.extend({}, t.parseOptions(target, [\r\n\t\t\t\t\t'tools','toolPosition','tabPosition',\r\n\t\t\t\t\t{fit:'boolean',border:'boolean',plain:'boolean'},\r\n\t\t\t\t\t{headerWidth:'number',tabWidth:'number',tabHeight:'number',selected:'number'},\r\n\t\t\t\t\t{showHeader:'boolean',justified:'boolean',narrow:'boolean',pill:'boolean'}\r\n\t\t\t\t]));\r\n\t\t\t};\r\n\t\t\t\r\n\t\t\tTabs.defaults = {\r\n\t\t\t\twidth : 'auto',\r\n\t\t\t\theight : 'auto',\r\n\t\t\t\theaderWidth : 150, // the tab header width, it is valid only when tabPosition set to 'left' or 'right' \r\n\t\t\t\ttabWidth : 'auto', // the tab width\r\n\t\t\t\ttabHeight : 27, // the tab height\r\n\t\t\t\tselected : 0, // the initialized selected tab index\r\n\t\t\t\tshowHeader : true,\r\n\t\t\t\tplain : false,\r\n\t\t\t\tfit : false,\r\n\t\t\t\tborder : true,\r\n\t\t\t\tjustified : false,\r\n\t\t\t\tnarrow : false,\r\n\t\t\t\tpill : false,\r\n\t\t\t\ttools : null,\r\n\t\t\t\ttoolPosition : 'right', // left,right\r\n\t\t\t\ttabPosition : 'top', // possible values: top,bottom\r\n\t\t\t\tscrollIncrement : 100,\r\n\t\t\t\tscrollDuration : 400,\r\n\t\t\t\tonLoad : function(panel) {\r\n\t\t\t\t},\r\n\t\t\t\tonSelect : function(title, index) {\r\n\t\t\t\t},\r\n\t\t\t\tonUnselect : function(title, index) {\r\n\t\t\t\t},\r\n\t\t\t\tonBeforeClose : function(title, index) {\r\n\t\t\t\t},\r\n\t\t\t\tonClose : function(title, index) {\r\n\t\t\t\t},\r\n\t\t\t\tonAdd : function(title, index) {\r\n\t\t\t\t},\r\n\t\t\t\tonUpdate : function(title, index) {\r\n\t\t\t\t},\r\n\t\t\t\tonContextMenu : function(e, title, index) {\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t$.fn.tabs = function(options, param) {\r\n\t\t\r\n\t\t\t\tvar methodReturn;\r\n\r\n\t\t\t\toptions = options || {};\r\n\t\t\t\t$set = this.each(function() {\r\n\t\t\t\t\t\t\tvar $this = $(this);\r\n\t\t\t\t\t\t\tvar state = $.data(this, 'tabsObj');\r\n\t\t\t\t\t\t\tvar data = $this.data('tabs');\r\n\t\t\t\t\t\t\tif (state) {\r\n\t\t\t\t\t\t\t\tif (typeof options === 'object') {\r\n\t\t\t\t\t\t\t\t\topts = $.extend(state.options, options);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tdata = new Tabs(this, options);\r\n\t\t\t\t\t\t\t\t$this.data('tabs', data);\r\n\t\t\t\t\t\t\t\t//data._init(this);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tif (typeof options === 'string')\r\n\t\t\t\t\t\t\t\tmethodReturn = data[options](param);\r\n\t\t\t\t\t\t});\r\n\t\t\t\treturn (methodReturn === undefined) ? $set : methodReturn;\r\n\t\t\t};\r\n\t/**\r\n\t *生成菜单按钮\r\n\t */\r\n\tfunction initMenuButtonHtml(btn){\r\n\t\tvar $btn = $('<a id=\"' + btn.id + '\" >' + btn.text + '</a>');\r\n\t\tbtn.menuId = $A.uuid();\r\n\t\tinitMenu(btn);\r\n\t\t$btn.menubutton({\r\n\t\t\ticonCls: btn.iconCls,\r\n\t\t\tonClick: btn.onClick,\r\n\t\t\tplain: false,\r\n\t\t\tmenu: btn.menuId,\r\n\t\t\tmenuStyle: btn.style ? btn.style : 'width:150px'\r\n\t\t});\r\n\t\treturn $btn;\r\n\t\tfunction initMenu(btn){\r\n\t\t\tvar children = btn.children\r\n\t\t\t\t,$menu = $('<div id=\"' + btn.menuId + '\" style=\"' + btn.menuStyle + ';display:none;\"></div>');\r\n\t\t\tfor(var i = 0; i < children.length; i++){\r\n\t\t\t\tvar child = children[i];\r\n\t\t\t\tif(child.menuSep){\r\n\t\t\t\t\t$menu.append('<div class=\"menu-sep\"></div>');\r\n\t\t\t\t}else{\r\n\t\t\t\t\tinitMenuItem(child);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t$.$appPanelContainer.append($menu);\r\n\t\t\tfunction initMenuItem(child){\r\n\t\t\t\tif(!child.id){\r\n\t\t\t\t\tchild.id = $A.uuid();\r\n\t\t\t\t}\r\n\t\t\t\tvar $child = $('<div id=\"' + child.id \r\n\t\t\t\t\t+ '\" ' + getDataOptions(child) + '>' + child.text + '</div>');\r\n\t\t\t\t$menu.append($child);\r\n\t\t\t\t$child.on('click', function(e){\r\n\t\t\t\t\tif(child.onClick){\r\n\t\t\t\t\t\tchild.onClick();\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t\tfunction getDataOptions(btn){\r\n\t\t\t\tvar result = '';\r\n\t\t\t\tif(btn.iconCls){\r\n\t\t\t\t\tresult += 'iconCls:\\'' + btn.iconCls + '\\'';\r\n\t\t\t\t}\r\n\t\t\t\tif(result){\r\n\t\t\t\t\tresult = 'data-options=\"'+ result +'\"';\r\n\t\t\t\t}\r\n\t\t\t\treturn result;\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\treturn Tabs;\r\n});\n",
    "/**\r\n * 表格扩展\r\n */\r\ndefine('app/widgets/tree/app-ztree',[\"app/core/app-jquery\",\"app/core/app-core\",\"app/data/app-ajax\",\r\n\"app/core/app-events\", \"jquery/jquery.ztree\"],function($,$A,$ajax, Events) {\r\n\t\r\n\t/**\r\n\t * 取得ztree的jquery对象\r\n\t */\r\n\t$.fn.getAppZTree=function(){\r\n\t\tvar $this=$(this);\r\n\t\tif(!$this.isZTree())\r\n\t\t\treturn\r\n\t\tif($this.attr(\"isztree\")==\"true\"){\r\n\t\t\treturn $.fn.zTree.getZTreeObj($this.attr(\"id\"));\r\n\t\t}\r\n\t\treturn  $.fn.zTree.getZTreeObj($this.attr(\"ztreeid\"));\r\n\t};\r\n\t\r\n\t/**\r\n\t * 判断当前对象是否是jqgrid对象\r\n\t */\r\n\t$.fn.isZTree=function(){\r\n\t\treturn $(this).attr(\"isztree\")==\"true\" || $(this).attr(\"ztreeid\");\r\n\t};\r\n\t\r\n//\t/**\r\n//\t * 更新搜索列表中的节点\r\n//\t * add by tw\r\n//\t */\r\n//\t$.fn.zTree.updateSearchRow = function(row){\r\n//\t\tvar treePnl = $(\"#\"+id).parent().parent();\r\n//\t\tvar $slst = treePnl.find(\".serachList\");\r\n//\t\tvar $a = $slst.find(\"li>a[val=\"+row[idKey]+\"]\");\r\n//\t\t$a.text(row[nameKey]).data(\"bindData\",row);\r\n//\t};\r\n\t\r\n\t/**\r\n\t * 树搜索\r\n\t */\r\n\t$.fn.zTree.search=function(id){\r\n\t\tvar $ele = $(\"#\"+id);\r\n\t\tvar treeObj = $ele.getAppZTree();//树对象\r\n\t\tvar setting = treeObj.setting;//取树配置\r\n\t\tvar dataSet = setting.data\r\n\t\t\t,idKey=dataSet.simpleData.idKey\r\n\t\t\t,titKey=dataSet.key.title\r\n\t\t\t,nameKey=dataSet.key.name;//取树数据配置\r\n\t\tvar searchFields=dataSet.searchFields\r\n\t\tvar treePnl = $(\"#\"+id).parent().parent();\r\n\t\tvar slst = treePnl.find(\".serachList\");\r\n\t\tvar edt =  treePnl.find(\".searchBar input\");\r\n\t\tvar txtVal = edt.val();//树搜索框值\r\n\t\tvar data={};\r\n\t\tif(txtVal){\r\n\t\t\tif (searchFields){\r\n\t\t\t\tdata[\"searchFields\"]=searchFields;\r\n\t\t\t\tdata[\"_key\"]=txtVal;\r\n\t\t\t}else{\r\n\t\t\t\tdata[idKey]=txtVal;\r\n\t\t\t};\t\t\t\r\n\t\t}else{//无值\r\n\t\t\t$(\"#\"+id).show();//隐藏树\r\n\t\t\tslst.hide();//显示搜索列表\r\n\t\t\ttreePnl.find(\".searchBar a\").attr(\"title\",\"请输入内容后再执行搜索。\");\r\n\t\t\tsetTimeout(function(){\r\n\t\t\t\ttreePnl.find(\".searchBar a\").attr(\"title\",\"执行搜索\");\r\n\t\t\t}, 3000);\r\n\t\t\treturn ;\r\n\t\t}\r\n\t\tif(setting.async && setting.async.otherParam) {//其它参数\r\n\t\t\t$.extend(data,setting.async.otherParam);\r\n\t\t\t//data.otherParam=setting.otherParam;\r\n\t\t}\r\n\t\t\r\n\t\ttry{\r\n\t\t\t$ajax.ajaxCall({\r\n\t\t\t\t url:setting.qryUrl,\r\n\t\t\t\t data:data,\r\n\t\t\t\t dataType:'json',\r\n\t\t\t\t type:setting.method,\r\n\t\t\t\t success:function(data){\r\n\t\t\t\t\t edt.focus();\r\n\t\t\t\t\t edt[0].select();\r\n\t\t\t\t\t $(\"#\"+id).hide();//隐藏树\r\n\t\t\t\t\t slst.empty();\r\n\t\t\t\t\t if(data && data.length>0){//生成搜索列表\r\n\t\t\t\t\t\tfor(var i=0;i<data.length;i++){\r\n\t\t\t\t\t\t\t\tvar row = data[i];\r\n\t\t\t\t\t\t\t\tvar $el = $('<li><a val=\"'+row[idKey]+'\" title=\"'+row[titKey]+'\" href=\"javascript:void(0)\" onkeyup=\"$.fn.zTree.searchListKey.call(this,event)\">'+row[nameKey]+'</a></li>');\r\n\t\t\t\t\t\t\t\tslst.append($el);\r\n\t\t\t\t\t\t\t\t$el.find(\">a\").data(\"bindData\",row);\r\n\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t }else{\r\n\t\t\t\t\t\t  //html.push(\"<li>没有找到数据。</li>\");\r\n\t\t\t\t\t\t slst.empty().append($(\"<li>没有找到数据。</li>\"));\r\n\t\t\t\t\t }\r\n\t\t\t\t\t //slst.html(html.join(''));\r\n\t\t\t\t\tif(!setting.clickSearchNode){\r\n\t\t\t\t\t\tsetting.clickSearchNode = setting.callback.onClick;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif(setting.clickSearchNode){//与树的单击事件绑定\r\n\t\t\t\t\t\t\tvar aObj = slst.find(\"a\");\r\n\t\t\t\t\t\t\taObj.click(aObj,function(e){\r\n\t\t\t\t\t\t\t\taObj.removeClass(\"select\");\r\n\t\t\t\t\t\t\t\t$(this).addClass(\"select\");\r\n\t\t\t\t\t\t\t\tvar $ths= $(this);//,json = {};\r\n\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t//json[idKey]=$ths.attr(\"val\");\r\n\t\t\t\t\t\t\t\t//json[titKey]=$ths.attr(\"title\");\r\n\t\t\t\t\t\t\t\t//json[nameKey]=$ths.html();\r\n\t\t\t\t\t\t\t\t//json[\"bindData\"] = $this.data(\"bindData\");\r\n\t\t\t\t\t\t\t\t//add by tw\r\n\t\t\t\t\t\t\t\tvar nodeData = $ths.data(\"bindData\");\r\n\t\t\t\t\t\t\t\tnodeData[\"idKey\"] = $ths.attr(\"val\");\r\n\t\t\t\t\t\t\t\tnodeData[\"titKey\"] = $ths.attr(\"title\");\r\n\t\t\t\t\t\t\t\tnodeData[\"nameKey\"] = $ths.html();\r\n                                treeObj.selectNode(treeObj.getNodeByParam($ele.attr('idField'),nodeData[\"idKey\"],null))\r\n\t\t\t\t\t\t\t\tsetting.clickSearchNode(e,$ths.attr(\"val\"),nodeData);\r\n\r\n                            });\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif(setting.callback.onDblClick){//与树的双击事件绑定\r\n\t\t\t\t\t\t\tvar aObj = slst.find(\"a\");\r\n\t\t\t\t\t\t\taObj.dblclick(function(e){\r\n\t\t\t\t\t\t\t\taObj.removeClass(\"select\");\r\n\t\t\t\t\t\t\t\t$(this).addClass(\"select\");\r\n\t\t\t\t\t\t\t\tvar $ths= $(this),json = {};\r\n\t\t\t\t\t\t\t\tjson[idKey]=$ths.attr(\"val\");\r\n\t\t\t\t\t\t\t\tjson[titKey]=$ths.attr(\"title\");\r\n\t\t\t\t\t\t\t\tjson[nameKey]=$ths.html();\r\n                                treeObj.selectNode(treeObj.getNodeByParam($ele.attr('idField'),nodeData[\"idKey\"],null))\r\n\r\n\t\t\t\t\t\t\t\tsetting.callback.onDblClick(e,$ths.attr(\"val\"),json);\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t\tslst.show();//显示搜索列表\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}catch (e) {\r\n\t\t}\r\n\t};\r\n\t/**\r\n\t * 搜索列表通过方向键移动选中行\r\n\t */\r\n\t$.fn.zTree.searchListKey = function(e){\r\n\t\tif(e.keyCode==40 || e.keyCode==38){//按了↓键或↓键\r\n\t\t\tvar down =e.keyCode==40;//是否↓键\r\n\t\t\tvar lst= this.nodeName.toUpperCase()==\"INPUT\"?$(this).parent().parent().find(\".serachList\"):$(this).parent().parent();\r\n\t\t\tvar row = lst.find(\"a\"),rowCnt = row.size();\r\n\t\t\tif(rowCnt>0){//如果搜索列表有记录时\r\n\t\t\t\tvar sltRow = lst.find(\"a.select\"),index = row.index(sltRow),willRow;\r\n\t\t\t\tif(sltRow.size()==0 || (index+1==rowCnt && down)){//如果没有选中行时或者是按↓键且最后一行时\r\n\t\t\t\t\twillRow = down?row.first():row.last();\r\n\t\t\t\t}else if(!down && index==0){\r\n\t\t\t\t\twillRow = row.last();\r\n\t\t\t\t}else{\r\n\t\t\t\t\twillRow = down?sltRow.parent().next():sltRow.parent().prev();\r\n\t\t\t\t\twillRow = willRow.find(\"a\");\r\n\t\t\t\t}\r\n\t\t\t\tsltRow.removeClass(\"select\");\r\n\t\t\t\twillRow.addClass(\"select\").focus();\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\t/**\r\n\t * 生成树的搜索栏\r\n\t * 20140528 lzj 增加\r\n\t */\r\n\t$.fn.zTree.bulidSearchBar=function(id){\r\n\t\tvar $this = $(this),con = $this.parent();\r\n\t\tvar h = con.innerHeight();//,w = con.width();\r\n\t\tcon.resize(function(){\r\n\t\t\tvar h = $(this).innerHeight();\r\n\t\t\t$(this).find(\".treePnl\").height(h-pnl.find(\".searchBar\").outerHeight());\r\n\t\t});\r\n\t\t//生成搜索栏\r\n\t\t$this.wrap('<div class=\"treePnl\"></div>');\r\n\t\tvar pnl = $this.parent().parent();\r\n\t\tpnl.prepend('<div class=\"searchBar\"><input  placeholder=\"搜索\"/><div><a href=\"javascript:$.fn.zTree.search(\\''+id+'\\')\" title=\"执行搜索\"><span></span></a></div></div>');\r\n\t\tpnl.height(h-pnl.find(\".searchBar\").outerHeight());//父容器高度减去搜索栏高度\r\n\t\t\r\n\t\t$this.parent(\".treePnl\").append(\"<ul class='serachList'></ul>\");//追加搜索列表\r\n\t\tpnl.find(\".searchBar input\").unbind(\"keyup\").keyup(id,function(e){\r\n\t\t\tif(!this.value){//无值时显示树，隐藏列表\r\n\t\t\t\t$(this).parent().parent().find(\".serachList\").hide();\r\n\t\t\t\t$(\"#\"+id).show();\r\n\t\t\t}else{//有值时,回车执行搜索\r\n\t\t\t\tif(e.keyCode==13){\r\n\t\t\t\t\t$.fn.zTree.search(id);\r\n\t\t\t\t\te.stopPropagation();//阻止冒泡\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}else{\r\n\t\t\t\t\t$.fn.zTree.searchListKey.call(this,e);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\t};\r\n\t/**\r\n\t * 初始化树\r\n\t */\r\n\t$.fn.initZTree=function(){\r\n\t\tthis.each(function(){\r\n\t\t\tvar $this = $(this)\r\n\t\t\t,id=$this.attr(\"id\")||(\"ztree\"+$A.nextId())\r\n\t\t\t,url=$this.attr(\"url\")\r\n\t\t\t,qryUrl=$this.attr(\"qryUrl\")||url //搜索栏的服务端请求地址,2013-05-28 lzj增加\r\n\t\t\t,hasQry=$this.attr(\"hasQry\")!=\"false\"//是否需要搜索栏,2013-05-28 lzj增加\r\n\t\t\t,async=$this.attr(\"isasync\")==\"true\"\r\n\t\t\t,autoParams=$this.attr(\"autoParam\")?$this.attr(\"autoParam\").split(\",\"):[]\r\n\t\t\t,otherParam=$this.attr(\"otherParam\")?$this.getJsonAttr(\"otherParam\"):{}    \r\n\t\t\t,method=$this.attr(\"method\")||\"POST\"\r\n\t\t\t,checkable=$this.attr(\"checkable\")==\"true\"\r\n\t\t\t,checkboxType=$this.attr(\"checkboxType\")\r\n            ,checkField=$this.attr(\"checkField\")||\"checked\"\r\n            ,childrenField=$this.attr(\"childrenField\")||\"children\"\r\n            ,nameField=$this.attr(\"nameField\")||\"name\"\r\n            ,titleField=$this.attr(\"titleField\")||nameField\r\n            ,idField=$this.attr(\"idField\")||\"id\"\r\n            ,parentField=$this.attr(\"parentField\")||\"pid\"\r\n            ,rootId=$this.attr(\"rootId\")\r\n            ,oneroot=$this.attr(\"oneRoot\")==\"true\"\r\n            ,events=$this.attr(\"events\")||$this.html()\r\n            ,hasRoot=$this.attr(\"hasRoot\")==\"true\"\r\n            ,rootNode = $this.getJsonAttr(\"rootNode\")\r\n            ,rootName=$this.attr(\"rootName\")\r\n            ,showIcon=$this.attr(\"showIcon\")!=\"false\"\r\n            ,searchFields=$this.attr(\"searchFields\")\r\n            ,showLine=$this.attr(\"showLine\")\r\n            //,autoLoad = $this.attr(\"autoLoad\")!=\"false\"\r\n\t\t\t,sortable = $this.attr(\"sortable\")==\"true\"\r\n\t\t\t//add by tw 是否允许同时选中多个节点\r\n\t\t\t,selectedMulti = $this.attr(\"selectedMulti\")==\"true\"\r\n\t\t\t,clickSearchNode = $this.getJsonAttr(\"clickSearchNode\")\t\r\n\t\t\t$this.html(\"\");\r\n\t\t\t$this.attr(\"isztree\",\"true\");\r\n\t\t\tvar setting={treeId:id};\r\n\t\t\t$this.attr(\"id\",id),$container=null,fit=$this.attr(\"fit\")==\"true\";\r\n\t\t\t//20140528 lzj 增加，树搜索\r\n\t\t\tif(hasQry){//需要搜索时\r\n//\t\t\t\tqryUrl=\"http://localhost/platform/agency/qryDw.do\";//测试用，临时增加\r\n\t\t\t\tsetting[\"qryUrl\"]=qryUrl;\r\n\t\t\t\tif(!setting['async']){\r\n\t\t\t\t\tsetting['async'] = {};\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tsetting['async']['otherParam']=otherParam;\r\n\t\t\t\tsetting['method']=method;\r\n\t\t\t\tsetting['clickSearchNode'] = clickSearchNode;\r\n\t\t\t\t$.fn.zTree.bulidSearchBar.call(this, id);\r\n\t\t\t\t//add by tw\r\n\t\t\t\r\n\t\t\t\t//暂时先处理一下，由于有搜索框的时候结构变了，这是个bug\r\n\t\t\t\tif($this.parent().parent().hasClass(\"ztree-container\")){\r\n\t\t\t\t\t$container = $this.parent().parent();\r\n\t\t\t\t\t\r\n\t\t\t\t}\r\n\t\t\t}else{\r\n\t\t\t\t//add by tw\r\n\t\t\t\t//暂时先处理一下，由于有搜索框的时候结构变了，这是个bug\r\n\t\t\t\tif($this.parent().hasClass(\"ztree-container\")){\r\n\t\t\t\t\t$container = $this.parent();\r\n\t\t\t\t\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t$container.attr(\"ztreeid\",id);\r\n\t\t\t\r\n\t\t\t$container.css(\"overflow\",\"auto\");\r\n\t\t\tif (fit){\r\n\t\t\t\t$container.bind(\"_resize\",function(){\r\n\t\t\t\t\tvar treePanel=$(this);\r\n\t\t\t\t\tvar p=$(this).parent();\r\n\t\t\t\t\tvar pwidth=p.width();\r\n\t\t\t\t\tvar pheight=p.height();\r\n\t\t\t\t\tvar cwidth=$container.width();\r\n\t\t\t\t\tvar cheight=$container.height();\r\n\t\t\t\t\r\n\t\t\t\t\tif (pwidth>cwidth){\r\n\t\t\t\t\t\tp.css({'overflow-x':'hidden'});\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (pheight>cheight){\r\n\t\t\t\t\t\tp.css({'overflow-y':'hidden'});\r\n\t\t\t\t\t}\r\n\t\t\t\t\ttreePanel.width(pwidth);\r\n\t\t\t\t\ttreePanel.height(pheight);\r\n\t\t\t\t\tif (hasQry){\r\n\t\t\t\t\t\ttreePanel.find()\r\n\t\t\t\t\t\ttreePanel.find(\".treePnl\").height(pheight-treePanel.find(\".searchBar\").outerHeight());\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t};\r\n\t\t\t\r\n\t\t\t\r\n\t\t\tif(async){\r\n\t\t\t\tsetting[\"async\"]={\r\n\t\t\t\t\tenable:true,\r\n\t\t\t\t\turl:url,\r\n\t\t\t\t\tdataType:\"json\",\r\n\t\t\t\t\tautoParam:autoParams,\r\n\t\t\t\t\totherParam:otherParam,\r\n\t\t\t\t\ttype:method\r\n\t\t\t\t};\r\n\t\t\t}else{\r\n\t\t\t\tsetting[\"async\"]={enable:false};\r\n\t\t\t}\r\n\t\t\tif(events){\r\n\t\t\t\tsetting[\"callback\"]=$this.getJsEvent(events);\r\n\t\t\t}\r\n\t\t\tif(checkable){\r\n\t\t\t\tsetting[\"check\"]={enable:true,check:true};\r\n\t\t\t\tif(checkboxType){\r\n\t\t\t\t\tsetting[\"check\"][\"chkboxType\"]=$A.jsonEval(checkboxType);\r\n\t\t\t\t}\r\n\t\t\t}else{\r\n\t\t\t\tsetting[\"check\"]={enable:false};\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tvar dataSetting={\r\n\t\t\t\tkey:{\r\n\t\t\t\t\tchecked:checkField,\r\n\t\t\t\t\tchildren:childrenField,\r\n\t\t\t\t\tname:nameField,\r\n\t\t\t\t\ttitle:titleField\r\n\t\t\t\t},\r\n\t\t\t\tsimpleData:{\r\n\t\t\t\t\tenable:true,\r\n\t\t\t\t\tidKey:idField,\r\n\t\t\t\t\tpIdKey:parentField,\r\n\t\t\t\t\trootPId:rootId\r\n\t\t\t\t},\r\n\t\t\t\tkeep:{\r\n\t\t\t\t\tparent : true\r\n\t\t\t\t},\r\n\t\t\t\tsearchFields:searchFields\r\n\t\t\t};\r\n\t\t\tsetting[\"data\"]=dataSetting;\r\n\t\t\tsetting[\"view\"]={\r\n\t\t\t\tshowIcon:showIcon,\r\n\t\t\t\tselectedMulti:selectedMulti\r\n\t\t\t};\r\n\t\t\t\r\n\t\t/*\tif(oneroot){\r\n\t\t\t\tsetting[\"view\"][\"showLine\"] = function(treeId, treeNode){\r\n\t\t\t\t\treturn treeNode.level > 0;\r\n\t\t\t\t};\r\n\t\t\t}*/\r\n\t\t\tif (showLine==\"true\"){\r\n\t\t\t\tsetting[\"view\"][\"showLine\"]=true\r\n\t\t\t}else{\r\n\t\t\t\tsetting[\"view\"][\"showLine\"]=false\r\n\t\t\t}\r\n\r\n\t\t\tvar root={isParent:true,open:true};\r\n\t\t\troot[idField]=rootId;\r\n\t\t\troot[nameField]=rootName;\r\n\t\t\tif(rootNode){\r\n\t\t\t\t$.extend(root,rootNode);\r\n\t\t\t}\r\n\t\t\r\n\t\t\tif(!async && url){\r\n\t\t\t\t$ajax.ajaxCall({\r\n\t\t\t\t\t url:url,\r\n\t\t\t\t\t data:otherParam,\r\n\t\t\t\t\t dataType:'json',\r\n\t\t\t\t\t type:method,\r\n\t\t\t\t\t success:function(data){\r\n\t\t\t\t\t\t\tif(hasRoot)\r\n\t\t\t\t\t\t\t\tdata.push(root);\r\n\t\t\t\t\t\tif(hasRoot){\r\n\t\t\t\t\t\t\tinitZtree();\r\n\t\t\t\t\t\t\tvar treeObj=$this.getAppZTree();\r\n\t\t\t\t\t\t\ttreeObj.addNodes(null,data);\r\n\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\tinitZtree(data);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t\t\r\n\t\t\t}else{\r\n\t\t\t\tvar data=[];\r\n\t\t\t\tif(hasRoot){\r\n\t\t\t\t\tdata.push(root);\r\n\t\t\t\t}\r\n\t\t\t\tif(sortable){\r\n\t\t\t\t\tsetting.edit = {\r\n\t\t\t\t\t\t\tdrag: {\r\n\t\t\t\t\t\t\t\tautoExpandTrigger: true,\r\n\t\t\t\t\t\t\t\tprev: true,\r\n\t\t\t\t\t\t\t\tinner: false,\r\n\t\t\t\t\t\t\t\tnext: true\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\tenable: true,\r\n\t\t\t\t\t\t\tshowRemoveBtn: false,\r\n\t\t\t\t\t\t\tshowRenameBtn: false\r\n\t\t\t\t\t};\r\n\t\t\t\t}\r\n\t\t\t\t//添加initUIExtConfig属性注入\r\n                if(!$container.attr(\"_options\")){\r\n                    $container.attr(\"_options\",\"{}\")\r\n\t\t\t\t}\r\n                var customSetting = $container.getJsonAttr('_options');\r\n                if($.isFunction(customSetting.beforeRender)){\r\n                    customSetting.beforeRender.call(this, setting);\r\n                }\r\n\t\t\t\tinitZtree(data);\r\n\t\t\t}\r\n\t\t\t/**\r\n\t\t\t * 抽取共同的初始化方法\r\n\t\t\t * @author Mr.T\r\n\t\t\t */\r\n\t\t\tfunction initZtree(data){\r\n\t\t\t\t$.fn.zTree.init($this, setting, data);\r\n\t\t\t\tvar ztree = $.fn.zTree.getZTreeObj(id);\r\n\t\t\t\tif(hasRoot){\r\n\t\t\t\t\tvar node = ztree.getNodesByParam(\"id\",root[idField]);\r\n\t\t\t\t\tif (node != null) {\r\n\t\t\t\t\t\tztree.expandNode(node[0], true, false, false);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tattachEvent(ztree);\r\n\t\t\t}\r\n\t\t\t/**\r\n\t\t\t * 给树对象 附加事件机制\r\n\t\t\t * @author Mr.T\r\n\t\t\t */\t\t\r\n\t\t\tfunction attachEvent(ztree){\r\n\t\t\t\tEvents.enhance(ztree);\r\n\t\t\t\t\r\n\t\t\t\tvar cb = ztree.setting.callback;\r\n\t\t\t\tfor(var event in cb){\r\n\t\t\t\t\tif(cb[event]){\r\n\t\t\t\t\t\tztree.on(event, cb[event]);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tcb[event] = (function(e){\r\n\t\t\t\t\t\treturn function(){\r\n\t\t\t\t\t\t\tvar args = Array.prototype.slice.call(arguments, 0);\r\n\t\t\t\t\t\t\targs.splice(0, 0, e);\r\n\t\t\t\t\t\t\treturn ztree.trigger.apply(ztree, args);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t})(event);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\t\t\r\n\t};\r\n\t\t\r\n});\n",
    "define('app/widgets/treegrid/app-pagination',[\"app/core/app-jquery\", \"app/core/app-core\",],function($, $A){\r\n\tfunction _1(_2) {\r\n\t\tvar _3 = $.data(_2, \"pagination\");\r\n\t\tvar _4 = _3.options;\r\n\t\tvar bb = _3.bb = {};\r\n\t\tvar _5 = $(_2)\r\n\t\t\t\t.addClass(\"pagination\")\r\n\t\t\t\t.html(\r\n\t\t\t\t\t\t\"<table cellspacing=\\\"0\\\" cellpadding=\\\"0\\\" border=\\\"0\\\"><tr></tr></table>\");\r\n\t\tvar tr = _5.find(\"tr\");\r\n\t\tvar aa = $.extend([], _4.layout);\r\n\t\tif (!_4.showPageList) {\r\n\t\t\t_6(aa, \"list\");\r\n\t\t}\r\n\t\tif (!_4.showRefresh) {\r\n\t\t\t_6(aa, \"refresh\");\r\n\t\t}\r\n\t\tif (aa[0] == \"sep\") {\r\n\t\t\taa.shift();\r\n\t\t}\r\n\t\tif (aa[aa.length - 1] == \"sep\") {\r\n\t\t\taa.pop();\r\n\t\t}\r\n\t\tfor (var _7 = 0; _7 < aa.length; _7++) {\r\n\t\t\tvar _8 = aa[_7];\r\n\t\t\tif (_8 == \"list\") {\r\n\t\t\t\tvar ps = $(\"<select class=\\\"pagination-page-list\\\"></select>\");\r\n\t\t\t\tps.bind(\"change\", function() {\r\n\t\t\t\t\t_4.pageSize = parseInt($(this).val());\r\n\t\t\t\t\t_4.onChangePageSize.call(_2, _4.pageSize);\r\n\t\t\t\t\t_10(_2, _4.pageNumber);\r\n\t\t\t\t});\r\n\t\t\t\tfor (var i = 0; i < _4.pageList.length; i++) {\r\n\t\t\t\t\t$(\"<option></option>\").text(_4.pageList[i]).appendTo(ps);\r\n\t\t\t\t}\r\n\t\t\t\t$(\"<td></td>\").append(ps).appendTo(tr);\r\n\t\t\t} else {\r\n\t\t\t\tif (_8 == \"sep\") {\r\n\t\t\t\t\t$(\"<td><div class=\\\"pagination-btn-separator\\\"></div></td>\")\r\n\t\t\t\t\t\t\t.appendTo(tr);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tif (_8 == \"first\") {\r\n\t\t\t\t\t\tbb.first = _9(\"first\");\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tif (_8 == \"prev\") {\r\n\t\t\t\t\t\t\tbb.prev = _9(\"prev\");\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tif (_8 == \"next\") {\r\n\t\t\t\t\t\t\t\tbb.next = _9(\"next\");\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tif (_8 == \"last\") {\r\n\t\t\t\t\t\t\t\t\tbb.last = _9(\"last\");\r\n\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\tif (_8 == \"manual\") {\r\n\t\t\t\t\t\t\t\t\t\t$(\r\n\t\t\t\t\t\t\t\t\t\t\t\t\"<span style=\\\"padding-left:6px;\\\"></span>\")\r\n\t\t\t\t\t\t\t\t\t\t\t\t.html(_4.beforePageText)\r\n\t\t\t\t\t\t\t\t\t\t\t\t.appendTo(tr).wrap(\"<td></td>\");\r\n\t\t\t\t\t\t\t\t\t\tbb.num = $(\r\n\t\t\t\t\t\t\t\t\t\t\t\t\"<input class=\\\"pagination-num\\\" type=\\\"text\\\" value=\\\"1\\\" size=\\\"2\\\">\")\r\n\t\t\t\t\t\t\t\t\t\t\t\t.appendTo(tr).wrap(\"<td></td>\");\r\n\t\t\t\t\t\t\t\t\t\tbb.num\r\n\t\t\t\t\t\t\t\t\t\t\t\t.unbind(\".pagination\")\r\n\t\t\t\t\t\t\t\t\t\t\t\t.bind(\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\"keydown.pagination\",\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tfunction(e) {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tif (e.keyCode == 13) {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvar _a = parseInt($(\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tthis)\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t.val()) || 1;\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t_10(_2, _a);\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t\t\tbb.after = $(\r\n\t\t\t\t\t\t\t\t\t\t\t\t\"<span style=\\\"padding-right:6px;\\\"></span>\")\r\n\t\t\t\t\t\t\t\t\t\t\t\t.appendTo(tr).wrap(\"<td></td>\");\r\n\t\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\t\tif (_8 == \"refresh\") {\r\n\t\t\t\t\t\t\t\t\t\t\tbb.refresh = _9(\"refresh\");\r\n\t\t\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\t\t\tif (_8 == \"links\") {\r\n\t\t\t\t\t\t\t\t\t\t\t\t$(\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\"<td class=\\\"pagination-links\\\"></td>\")\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t.appendTo(tr);\r\n\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\tif (_4.buttons) {\r\n\t\t\t$(\"<td><div class=\\\"pagination-btn-separator\\\"></div></td>\")\r\n\t\t\t\t\t.appendTo(tr);\r\n\t\t\tif ($.isArray(_4.buttons)) {\r\n\t\t\t\tfor (var i = 0; i < _4.buttons.length; i++) {\r\n\t\t\t\t\tvar _b = _4.buttons[i];\r\n\t\t\t\t\tif (_b == \"-\") {\r\n\t\t\t\t\t\t$(\r\n\t\t\t\t\t\t\t\t\"<td><div class=\\\"pagination-btn-separator\\\"></div></td>\")\r\n\t\t\t\t\t\t\t\t.appendTo(tr);\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tvar td = $(\"<td></td>\").appendTo(tr);\r\n\t\t\t\t\t\tvar a = $(\"<a href=\\\"javascript:void(0)\\\"></a>\")\r\n\t\t\t\t\t\t\t\t.appendTo(td);\r\n\t\t\t\t\t\ta[0].onclick = eval(_b.handler || function() {\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\ta.linkbutton($.extend({}, _b, {\r\n\t\t\t\t\t\t\tplain : true\r\n\t\t\t\t\t\t}));\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tvar td = $(\"<td></td>\").appendTo(tr);\r\n\t\t\t\t$(_4.buttons).appendTo(td).show();\r\n\t\t\t}\r\n\t\t}\r\n\t\t$(\"<div class=\\\"pagination-info\\\"></div>\").appendTo(_5);\r\n\t\t$(\"<div style=\\\"clear:both;\\\"></div>\").appendTo(_5);\r\n\t\tfunction _9(_c) {\r\n\t\t\tvar _d = _4.nav[_c];\r\n\t\t\tvar a = $(\"<a href=\\\"javascript:void(0)\\\"></a>\").appendTo(tr);\r\n\t\t\ta.wrap(\"<td></td>\");\r\n\t\t\ta.linkbutton({\r\n\t\t\t\ticonCls : _d.iconCls,\r\n\t\t\t\tplain : true\r\n\t\t\t}).unbind(\".pagination\").bind(\"click.pagination\", function() {\r\n\t\t\t\t_d.handler.call(_2);\r\n\t\t\t});\r\n\t\t\treturn a;\r\n\t\t}\r\n\t\t;\r\n\t\tfunction _6(aa, _e) {\r\n\t\t\tvar _f = $.inArray(_e, aa);\r\n\t\t\tif (_f >= 0) {\r\n\t\t\t\taa.splice(_f, 1);\r\n\t\t\t}\r\n\t\t\treturn aa;\r\n\t\t}\r\n\t\t;\r\n\t}\r\n\t;\r\n\tfunction _10(_11, _12) {\r\n\t\tvar _13 = $.data(_11, \"pagination\").options;\r\n\t\t_14(_11, {\r\n\t\t\tpageNumber : _12\r\n\t\t});\r\n\t\t_13.onSelectPage.call(_11, _13.pageNumber, _13.pageSize);\r\n\t}\r\n\t;\r\n\tfunction _14(_15, _16) {\r\n\t\tvar _17 = $.data(_15, \"pagination\");\r\n\t\tvar _18 = _17.options;\r\n\t\tvar bb = _17.bb;\r\n\t\t$.extend(_18, _16 || {});\r\n\t\tvar ps = $(_15).find(\"select.pagination-page-list\");\r\n\t\tif (ps.length) {\r\n\t\t\tps.val(_18.pageSize + \"\");\r\n\t\t\t_18.pageSize = parseInt(ps.val());\r\n\t\t}\r\n\t\tvar _19 = Math.ceil(_18.total / _18.pageSize) || 1;\r\n\t\tif (_18.pageNumber < 1) {\r\n\t\t\t_18.pageNumber = 1;\r\n\t\t}\r\n\t\tif (_18.pageNumber > _19) {\r\n\t\t\t_18.pageNumber = _19;\r\n\t\t}\r\n\t\tif (_18.total == 0) {\r\n\t\t\t_18.pageNumber = 0;\r\n\t\t\t_19 = 0;\r\n\t\t}\r\n\t\tif (bb.num) {\r\n\t\t\tbb.num.val(_18.pageNumber);\r\n\t\t}\r\n\t\tif (bb.after) {\r\n\t\t\tbb.after.html(_18.afterPageText.replace(/{pages}/, _19));\r\n\t\t}\r\n\t\tvar td = $(_15).find(\"td.pagination-links\");\r\n\t\tif (td.length) {\r\n\t\t\ttd.empty();\r\n\t\t\tvar _1a = _18.pageNumber - Math.floor(_18.links / 2);\r\n\t\t\tif (_1a < 1) {\r\n\t\t\t\t_1a = 1;\r\n\t\t\t}\r\n\t\t\tvar _1b = _1a + _18.links - 1;\r\n\t\t\tif (_1b > _19) {\r\n\t\t\t\t_1b = _19;\r\n\t\t\t}\r\n\t\t\t_1a = _1b - _18.links + 1;\r\n\t\t\tif (_1a < 1) {\r\n\t\t\t\t_1a = 1;\r\n\t\t\t}\r\n\t\t\tfor (var i = _1a; i <= _1b; i++) {\r\n\t\t\t\tvar a = $(\r\n\t\t\t\t\t\t\"<a class=\\\"pagination-link\\\" href=\\\"javascript:void(0)\\\"></a>\")\r\n\t\t\t\t\t\t.appendTo(td);\r\n\t\t\t\ta.linkbutton({\r\n\t\t\t\t\tplain : true,\r\n\t\t\t\t\ttext : i\r\n\t\t\t\t});\r\n\t\t\t\tif (i == _18.pageNumber) {\r\n\t\t\t\t\ta.linkbutton(\"select\");\r\n\t\t\t\t} else {\r\n\t\t\t\t\ta.unbind(\".pagination\").bind(\"click.pagination\", {\r\n\t\t\t\t\t\tpageNumber : i\r\n\t\t\t\t\t}, function(e) {\r\n\t\t\t\t\t\t_10(_15, e.data.pageNumber);\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\tvar _1c = _18.displayMsg;\r\n\t\t_1c = _1c.replace(/{from}/, _18.total == 0 ? 0 : _18.pageSize\r\n\t\t\t\t* (_18.pageNumber - 1) + 1);\r\n\t\t_1c = _1c.replace(/{to}/, Math.min(_18.pageSize * (_18.pageNumber),\r\n\t\t\t\t_18.total));\r\n\t\t_1c = _1c.replace(/{total}/, _18.total);\r\n\t\t$(_15).find(\"div.pagination-info\").html(_1c);\r\n\t\tif (bb.first) {\r\n\t\t\tbb.first.linkbutton({\r\n\t\t\t\tdisabled : ((!_18.total) || _18.pageNumber == 1)\r\n\t\t\t});\r\n\t\t}\r\n\t\tif (bb.prev) {\r\n\t\t\tbb.prev.linkbutton({\r\n\t\t\t\tdisabled : ((!_18.total) || _18.pageNumber == 1)\r\n\t\t\t});\r\n\t\t}\r\n\t\tif (bb.next) {\r\n\t\t\tbb.next.linkbutton({\r\n\t\t\t\tdisabled : (_18.pageNumber == _19)\r\n\t\t\t});\r\n\t\t}\r\n\t\tif (bb.last) {\r\n\t\t\tbb.last.linkbutton({\r\n\t\t\t\tdisabled : (_18.pageNumber == _19)\r\n\t\t\t});\r\n\t\t}\r\n\t\t_1d(_15, _18.loading);\r\n\t}\r\n\t;\r\n\tfunction _1d(_1e, _1f) {\r\n\t\tvar _20 = $.data(_1e, \"pagination\");\r\n\t\tvar _21 = _20.options;\r\n\t\t_21.loading = _1f;\r\n\t\tif (_21.showRefresh && _20.bb.refresh) {\r\n\t\t\t_20.bb.refresh.linkbutton({\r\n\t\t\t\ticonCls : (_21.loading ? \"pagination-loading\"\r\n\t\t\t\t\t\t: \"pagination-load\")\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\t;\r\n\t$.fn.pagination = function(_22, _23) {\r\n\t\tif (typeof _22 == \"string\") {\r\n\t\t\treturn $.fn.pagination.methods[_22](this, _23);\r\n\t\t}\r\n\t\t_22 = _22 || {};\r\n\t\treturn this.each(function() {\r\n\t\t\tvar _24;\r\n\t\t\tvar _25 = $.data(this, \"pagination\");\r\n\t\t\tif (_25) {\r\n\t\t\t\t_24 = $.extend(_25.options, _22);\r\n\t\t\t} else {\r\n\t\t\t\t_24 = $.extend({}, $.fn.pagination.defaults, $.fn.pagination\r\n\t\t\t\t\t\t.parseOptions(this), _22);\r\n\t\t\t\t$.data(this, \"pagination\", {\r\n\t\t\t\t\toptions : _24\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t\t_1(this);\r\n\t\t\t_14(this);\r\n\t\t});\r\n\t};\r\n\t$.fn.pagination.methods = {\r\n\t\toptions : function(jq) {\r\n\t\t\treturn $.data(jq[0], \"pagination\").options;\r\n\t\t},\r\n\t\tloading : function(jq) {\r\n\t\t\treturn jq.each(function() {\r\n\t\t\t\t_1d(this, true);\r\n\t\t\t});\r\n\t\t},\r\n\t\tloaded : function(jq) {\r\n\t\t\treturn jq.each(function() {\r\n\t\t\t\t_1d(this, false);\r\n\t\t\t});\r\n\t\t},\r\n\t\trefresh : function(jq, _26) {\r\n\t\t\treturn jq.each(function() {\r\n\t\t\t\t_14(this, _26);\r\n\t\t\t});\r\n\t\t},\r\n\t\tselect : function(jq, _27) {\r\n\t\t\treturn jq.each(function() {\r\n\t\t\t\t_10(this, _27);\r\n\t\t\t});\r\n\t\t}\r\n\t};\r\n\t$.fn.pagination.parseOptions = function(_28) {\r\n\t\tvar t = $(_28);\r\n\t\treturn $.extend({}, $.parser.parseOptions(_28, [ {\r\n\t\t\ttotal : \"number\",\r\n\t\t\tpageSize : \"number\",\r\n\t\t\tpageNumber : \"number\",\r\n\t\t\tlinks : \"number\"\r\n\t\t}, {\r\n\t\t\tloading : \"boolean\",\r\n\t\t\tshowPageList : \"boolean\",\r\n\t\t\tshowRefresh : \"boolean\"\r\n\t\t} ]), {\r\n\t\t\tpageList : (t.attr(\"pageList\") ? eval(t.attr(\"pageList\"))\r\n\t\t\t\t\t: undefined)\r\n\t\t});\r\n\t};\r\n\t$.fn.pagination.defaults = {\r\n\t\ttotal : 1,\r\n\t\tpageSize : 10,\r\n\t\tpageNumber : 1,\r\n\t\tpageList : [ 10, 20, 30, 50 ],\r\n\t\tloading : false,\r\n\t\tbuttons : null,\r\n\t\tshowPageList : true,\r\n\t\tshowRefresh : true,\r\n\t\tlinks : 10,\r\n\t\tlayout : [ \"list\", \"sep\", \"first\", \"prev\", \"sep\", \"manual\", \"sep\",\r\n\t\t\t\t\"next\", \"last\", \"sep\", \"refresh\" ],\r\n\t\tonSelectPage : function(_29, _2a) {\r\n\t\t},\r\n\t\tonBeforeRefresh : function(_2b, _2c) {\r\n\t\t},\r\n\t\tonRefresh : function(_2d, _2e) {\r\n\t\t},\r\n\t\tonChangePageSize : function(_2f) {\r\n\t\t},\r\n\t\tbeforePageText : \"Page\",\r\n\t\tafterPageText : \"of {pages}\",\r\n\t\tdisplayMsg : \"Displaying {from} to {to} of {total} items\",\r\n\t\tnav : {\r\n\t\t\tfirst : {\r\n\t\t\t\ticonCls : \"pagination-first\",\r\n\t\t\t\thandler : function() {\r\n\t\t\t\t\tvar _30 = $(this).pagination(\"options\");\r\n\t\t\t\t\tif (_30.pageNumber > 1) {\r\n\t\t\t\t\t\t$(this).pagination(\"select\", 1);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tprev : {\r\n\t\t\t\ticonCls : \"pagination-prev\",\r\n\t\t\t\thandler : function() {\r\n\t\t\t\t\tvar _31 = $(this).pagination(\"options\");\r\n\t\t\t\t\tif (_31.pageNumber > 1) {\r\n\t\t\t\t\t\t$(this).pagination(\"select\", _31.pageNumber - 1);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tnext : {\r\n\t\t\t\ticonCls : \"pagination-next\",\r\n\t\t\t\thandler : function() {\r\n\t\t\t\t\tvar _32 = $(this).pagination(\"options\");\r\n\t\t\t\t\tvar _33 = Math.ceil(_32.total / _32.pageSize);\r\n\t\t\t\t\tif (_32.pageNumber < _33) {\r\n\t\t\t\t\t\t$(this).pagination(\"select\", _32.pageNumber + 1);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tlast : {\r\n\t\t\t\ticonCls : \"pagination-last\",\r\n\t\t\t\thandler : function() {\r\n\t\t\t\t\tvar _34 = $(this).pagination(\"options\");\r\n\t\t\t\t\tvar _35 = Math.ceil(_34.total / _34.pageSize);\r\n\t\t\t\t\tif (_34.pageNumber < _35) {\r\n\t\t\t\t\t\t$(this).pagination(\"select\", _35);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\trefresh : {\r\n\t\t\t\ticonCls : \"pagination-refresh\",\r\n\t\t\t\thandler : function() {\r\n\t\t\t\t\tvar _36 = $(this).pagination(\"options\");\r\n\t\t\t\t\tif (_36.onBeforeRefresh.call(this, _36.pageNumber,\r\n\t\t\t\t\t\t\t_36.pageSize) != false) {\r\n\t\t\t\t\t\t$(this).pagination(\"select\", _36.pageNumber);\r\n\t\t\t\t\t\t_36.onRefresh.call(this, _36.pageNumber, _36.pageSize);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n});\r\n\n",
    "/**\r\n * \r\n */\r\n\r\ndefine(\t'app/widgets/treegrid/app-datagrid',[\"app/core/app-jquery\", \"app/core/app-core\", \"app/core/app-options\",\r\n\t\t\t\t\"jquery/jquery-ui\", \"app/widgets/app-widget\",\r\n\t\t\t\t\"app/widgets/panel/app-panel\",\r\n\t\t\t\t\"app/widgets/treegrid/app-pagination\"], function($, $A, Opts,\r\n\t\t\t\tresizable, Widget, Panel) {\r\n\t\t\tvar _1 = 0;\r\n\t\t\t// =_2(\r\n\t\t\tvar findArrayIndex = function(arrayList, value) {\r\n\t\t\t\tfor (var i = 0, len = arrayList.length; i < len; i++) {\r\n\t\t\t\t\tif (arrayList[i] == value) {\r\n\t\t\t\t\t\treturn i;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\treturn -1;\r\n\t\t\t}\r\n\t\t\tfunction addArrayMap(a, o, r) {\r\n\t\t\t\tfor (var i = 0, _8 = a.length; i < _8; i++) {\r\n\t\t\t\t\tif (a[i][o] == r[o]) {\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\ta.push(r);\r\n\t\t\t};\r\n\r\n\t\t\tfunction removeArrayMap(a, o, id) {\r\n\t\t\t\tif (typeof o == \"string\") {\r\n\t\t\t\t\tfor (var i = 0, _5 = a.length; i < _5; i++) {\r\n\t\t\t\t\t\tif (a[i][o] == id) {\r\n\t\t\t\t\t\t\ta.splice(i, 1);\r\n\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\tvar _6 = _2(a, o);\r\n\t\t\t\t\tif (_6 != -1) {\r\n\t\t\t\t\t\ta.splice(_6, 1);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t};\r\n\t\t\tvar DataGrid = Widget.extend({\r\n\t\t\t\toperator:{},\r\n\t\t\t\t\r\n\t\t\t\tinitColumnButton:function(columns){\r\n\t\t\t\t\tif (columns){\r\n\t\t\t\t\tfor (var i=0;i<columns.length;i++){\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tfor (var j=0;j<columns[i].length;j++){\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tvar col=columns[i][j];\r\n\t\t\t\t\t\t\tif (col.buttons){\r\n\t\t\t\t\t\t\t\tfor(var m=0;m<col.buttons.length;m++){\r\n\t\t\t\t\t\t\t\t\tvar btn=col.buttons[m];\r\n\t\t\t\t\t\t\t\t\tthis.operator[btn[\"id\"]]=btn[\"handler\"];\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\t\r\n\t\t\t\t\r\n\t\t\t\tinitialize : function(el, opt) {\r\n\t\t\t\t\tvar data = $.data(el, \"datagrid\");\r\n\t\t\t\t\tvar opts;\r\n\t\t\t\t\tthis.element = el;\r\n\t\t\t\t\tif (data) {\r\n\t\t\t\t\t\topts = $.extend(data.options, opt);\r\n\t\t\t\t\t\tdata.options = opts;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\topts = $.extend({}, $.extend({}, DataGrid.defaults, {\r\n\t\t\t\t\t\t\t\t\t\t\tqueryParams : {}\r\n\t\t\t\t\t\t\t\t\t\t}), DataGrid.parseOptions(el), opt);\r\n\t\t\t\t\t\t$(this).css(\"width\", \"\").css(\"height\", \"\");\r\n\t\t\t\t\t\tvar wrapResult = this.wrapGrid(opts.rownumbers);\r\n\t\t\t\t\t\tif (!opts.view) {\r\n\t\t\t\t\t\t\topts.view = new GridView(this);\r\n\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (!opts.columns) {\r\n\t\t\t\t\t\t\topts.columns = wrapResult.columns;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\r\n\t\t\t\t\t\tif (!opts.frozenColumns) {\r\n\t\t\t\t\t\t\topts.frozenColumns = wrapResult.frozenColumns;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\topts.columns = $.extend(true, [], opts.columns);\r\n\t\t\t\t\t\topts.frozenColumns = $.extend(true, [],\r\n\t\t\t\t\t\t\t\topts.frozenColumns);\r\n\t\t\t\t\t\topts.view = $.extend({}, opts.view);\r\n\t\t\t\t\t\tthis.initColumnButton(opts.columns);\r\n\t\t\t\t\t\tthis.initColumnButton(opts.frozenColumns);\r\n\t\t\t\t\t\t$.data(el, \"datagrid\", {\r\n\t\t\t\t\t\t\t\t\toptions : opts,\r\n\t\t\t\t\t\t\t\t\tpanel : wrapResult.panel,\r\n\t\t\t\t\t\t\t\t\tdc : wrapResult.dc,\r\n\t\t\t\t\t\t\t\t\tss : null,\r\n\t\t\t\t\t\t\t\t\tselectedRows : [],\r\n\t\t\t\t\t\t\t\t\tcheckedRows : [],\r\n\t\t\t\t\t\t\t\t\tdata : {\r\n\t\t\t\t\t\t\t\t\t\ttotal : 0,\r\n\t\t\t\t\t\t\t\t\t\trows : []\r\n\t\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t\toriginalRows : [],\r\n\t\t\t\t\t\t\t\t\tupdatedRows : [],\r\n\t\t\t\t\t\t\t\t\tinsertedRows : [],\r\n\t\t\t\t\t\t\t\t\tdeletedRows : []\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t\tthis.render();\r\n\t\t\t\t\tthis.renderGridWarp();\r\n\t\t\t\t\tthis.resize();\r\n\t\t\t\t\tif (opts.data) {\r\n\t\t\t\t\t\tthis.loadData(opts.data);\r\n\t\t\t\t\t\tthis.clearEditData();\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tvar data = this.parseData();\r\n\t\t\t\t\t\tif (data.total > 0) {\r\n\t\t\t\t\t\t\tthis.loadData(data);\r\n\t\t\t\t\t\t\tthis.clearEditData();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (opts.autoLoad) {\r\n\t\t\t\t\t\tthis.load();\r\n\t\t\t\t\t}\r\n\t\t\t\t\tDataGrid.superclass.initialize.call(this, opts);\r\n\t\t\t\t\tthis.addEvents(\"onLoadSuccess\", \"onLoadError\",\r\n\t\t\t\t\t\t\t\"onBeforeLoad\", \"onClickRow\", \"onDblClickRow\",\r\n\t\t\t\t\t\t\t\"onClickCell\", \"onDblClickCell\", \"onSortColumn\",\r\n\t\t\t\t\t\t\t\"onResizeColumn\", \"onSelect\", \"onUnselect\",\r\n\t\t\t\t\t\t\t\"onSelectAll\", \"onUnselectAll\", \"onCheck\",\r\n\t\t\t\t\t\t\t\"onUncheck\", \"onCheckAll\", \"onUncheckAll\",\r\n\t\t\t\t\t\t\t\"onBeforeEdit\", \"onAfterEdit\", \"onCancelEdit\",\r\n\t\t\t\t\t\t\t\"onHeaderContextMenu\", \"onAfterRender\",\r\n\t\t\t\t\t\t\t\"onRowContextMenu\");\r\n\t\t\t\t},\r\n\t\t\t\tregisterEvent : function(opts) {\r\n\t\t\t\t\tvar events = [];\r\n\t\t\t\t\tfor (var i = 0; i < events.length; i++) {\r\n\t\t\t\t\t\tif (opts[events[i]]) {\r\n\t\t\t\t\t\t\tthis.on(events[i], opts[events[i]]);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t},\r\n\t\t\t\tgetPager : function() {\r\n\t\t\t\t\treturn $.data(this.element, \"datagrid\").panel\r\n\t\t\t\t\t\t\t.children(\"div.datagrid-pager\");\r\n\t\t\t\t},\r\n\r\n\t\t\t\tsetSelectionState : function() {\r\n\t\t\t\t\tvar target = this.element;\r\n\t\t\t\t\tvar _e5 = $.data(target, \"datagrid\");\r\n\t\t\t\t\tvar _e6 = _e5.options;\r\n\t\t\t\t\tvar dc = _e5.dc;\r\n\t\t\t\t\tdc.header1.add(dc.header2).find(\"input[type=checkbox]\")\r\n\t\t\t\t\t\t\t.attr(\"checked\", false);\r\n\t\t\t\t\tif (_e6.idField) {\r\n\t\t\t\t\t\tvar _e7 = $.data(target, \"treegrid\") ? true : false;\r\n\t\t\t\t\t\tvar _e8 = _e6.onSelect;\r\n\t\t\t\t\t\tvar _e9 = _e6.onCheck;\r\n\t\t\t\t\t\t_e6.onSelect = _e6.onCheck = function() {\r\n\t\t\t\t\t\t};\r\n\t\t\t\t\t\tvar _ea = _e6.finder.getRows.call(this, target);\r\n\t\t\t\t\t\tfor (var i = 0; i < _ea.length; i++) {\r\n\t\t\t\t\t\t\tvar row = _ea[i];\r\n\t\t\t\t\t\t\tvar _eb = _e7 ? row[_e6.idField] : i;\r\n\t\t\t\t\t\t\tif (_ec(_e5.selectedRows, row)) {\r\n\t\t\t\t\t\t\t\tthis.selectRow(_eb, true);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tif (_ec(_e5.checkedRows, row)) {\r\n\t\t\t\t\t\t\t\tthis.checkRow(_eb, true);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t_e6.onSelect = _e8;\r\n\t\t\t\t\t\t_e6.onCheck = _e9;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tfunction _ec(a, r) {\r\n\t\t\t\t\t\tfor (var i = 0; i < a.length; i++) {\r\n\t\t\t\t\t\t\tif (a[i][_e6.idField] == r[_e6.idField]) {\r\n\t\t\t\t\t\t\t\ta[i] = r;\r\n\t\t\t\t\t\t\t\treturn true;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t};\r\n\t\t\t\t},\r\n\t\t\t\tparseData : function() {\r\n\t\t\t\t\tvar t = $(this.element);\r\n\t\t\t\t\tvar data = {\r\n\t\t\t\t\t\ttotal : 0,\r\n\t\t\t\t\t\trows : []\r\n\t\t\t\t\t};\r\n\t\t\t\t\tvar _1e6 = this.getColumnFields(true).concat(this\r\n\t\t\t\t\t\t\t.getColumnFields(false));\r\n\t\t\t\t\tt.find(\"tbody tr\").each(function() {\r\n\t\t\t\t\t\tdata.total++;\r\n\t\t\t\t\t\tvar row = {};\r\n\t\t\t\t\t\t$.extend(row, $.fn.parseOptions(this, [\"iconCls\",\r\n\t\t\t\t\t\t\t\t\t\t\t\t\"state\"]));\r\n\t\t\t\t\t\tfor (var i = 0; i < _1e6.length; i++) {\r\n\t\t\t\t\t\t\trow[_1e6[i]] = $(this).find(\"td:eq(\" + i + \")\")\r\n\t\t\t\t\t\t\t\t\t.html();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tdata.rows.push(row);\r\n\t\t\t\t\t});\r\n\r\n\t\t\t\t\treturn data;\r\n\t\t\t\t},\r\n\t\t\t\tsetViewSize : function() {\r\n\t\t\t\t\tvar target = this.element;\r\n\t\t\t\t\tvar gridData = $.data(target, \"datagrid\");\r\n\t\t\t\t\tvar opts = gridData.options;\r\n\t\t\t\t\tvar dc = gridData.dc;\r\n\t\t\t\t\tvar panel = gridData.panel;\r\n\t\t\t\t\tvar panelWidth = panel.width();\r\n\t\t\t\t\tvar panelHeight = panel.height();\r\n\t\t\t\t\tvar view = dc.view;\r\n\t\t\t\t\tvar view1 = dc.view1;\r\n\t\t\t\t\tvar view2 = dc.view2;\r\n\t\t\t\t\tvar view1Header = view1.children(\"div.datagrid-header\");\r\n\t\t\t\t\tvar view2Header = view2.children(\"div.datagrid-header\");\r\n\t\t\t\t\tvar view1Table = view1Header.find(\"table\");\r\n\t\t\t\t\tvar view2Table = view2Header.find(\"table\");\r\n\t\t\t\t\tview.width(panelWidth);\r\n\t\t\t\t\tvar _30 = view1Header.children(\"div.datagrid-header-inner\")\r\n\t\t\t\t\t\t\t.show();\r\n\t\t\t\t\tview1.width(_30.find(\"table\").width());\r\n\t\t\t\t\tif (!opts.showHeader) {\r\n\t\t\t\t\t\t_30.hide();\r\n\t\t\t\t\t}\r\n\t\t\t\t\tview2.width(panelWidth - view1._outerWidth());\r\n\r\n\t\t\t\t\tview1\r\n\t\t\t\t\t\t\t.children(\"div.datagrid-header,div.datagrid-body,div.datagrid-footer\")\r\n\t\t\t\t\t\t\t.width(view1.width());\r\n\t\t\t\t\tview2\r\n\t\t\t\t\t\t\t.children(\"div.datagrid-header,div.datagrid-body,div.datagrid-footer\")\r\n\t\t\t\t\t\t\t.width(view2.width());\r\n\t\t\t\t\tvar hh;\r\n\t\t\t\t\tview1Header.add(view2Header).css(\"height\", \"\");\r\n\t\t\t\t\tview1Table.add(view2Table).css(\"height\", \"\");\r\n\t\t\t\t\thh = Math.max(view1Table.height(), view2Table.height());\r\n\t\t\t\t\tview1Table.add(view2Table).height(hh);\r\n\t\t\t\t\tview1Header.add(view2Header)._outerHeight(hh);\r\n\t\t\t\t\tdc.body1.add(dc.body2)\r\n\t\t\t\t\t\t\t.children(\"table.datagrid-btable-frozen\").css({\r\n\t\t\t\t\t\t\t\t\t\tposition : \"absolute\",\r\n\t\t\t\t\t\t\t\t\t\ttop : dc.header2._outerHeight()\r\n\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\tvar frozen2Height = dc.body2\r\n\t\t\t\t\t\t\t.children(\"table.datagrid-btable-frozen\")\r\n\t\t\t\t\t\t\t._outerHeight();\r\n\t\t\t\t\tvar pagerHeight = frozen2Height\r\n\t\t\t\t\t\t\t+ view2.children(\"div.datagrid-header\")\r\n\t\t\t\t\t\t\t\t\t._outerHeight()\r\n\t\t\t\t\t\t\t+ view2.children(\"div.datagrid-footer\")\r\n\t\t\t\t\t\t\t\t\t._outerHeight()\r\n\t\t\t\t\t\t\t+ panel.children(\"div.datagrid-toolbar\")\r\n\t\t\t\t\t\t\t\t\t._outerHeight();\r\n\t\t\t\t\tpanel.children(\"div.datagrid-pager\").each(function() {\r\n\t\t\t\t\t\t\t\tpagerHeight += $(this)._outerHeight();\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\tvar boxHeight = panel.outerHeight() - panel.height();\r\n\t\t\t\t\tvar panelMinHeight = panel._size(\"minHeight\") || \"\";\r\n\t\t\t\t\tvar panelMaxHeight = panel._size(\"maxHeight\") || \"\";\r\n\t\t\t\t\tview1.add(view2).children(\"div.datagrid-body\").css({\r\n\t\t\t\t\t\tmarginTop : frozen2Height,\r\n\t\t\t\t\t\theight : (isNaN(parseInt(opts.height))\r\n\t\t\t\t\t\t\t\t? \"\"\r\n\t\t\t\t\t\t\t\t: (panelHeight - pagerHeight)),\r\n\t\t\t\t\t\tminHeight : (panelMinHeight ? panelMinHeight\r\n\t\t\t\t\t\t\t\t- boxHeight - pagerHeight : \"\"),\r\n\t\t\t\t\t\tmaxHeight : (panelMaxHeight ? panelMaxHeight\r\n\t\t\t\t\t\t\t\t- boxHeight - pagerHeight : \"\")\r\n\t\t\t\t\t});\r\n\t\t\t\t\tview.height(view2.height());\r\n\r\n\t\t\t\t},\r\n\t\t\t\tloading : function(jq) {\r\n\r\n\t\t\t\t\tvar opts = $.data(this.element, \"datagrid\").options;\r\n\t\t\t\t\tthis.getPager().pagination(\"loading\");\r\n\t\t\t\t\tif (opts.loadMsg) {\r\n\t\t\t\t\t\tvar _1c0 = this.getPanel();\r\n\t\t\t\t\t\tif (!_1c0.children(\"div.datagrid-mask\").length) {\r\n\t\t\t\t\t\t\t$(\"<div class=\\\"datagrid-mask\\\" style=\\\"display:block\\\"></div>\")\r\n\t\t\t\t\t\t\t\t\t.appendTo(_1c0);\r\n\t\t\t\t\t\t\tvar msg = $(\"<div class=\\\"datagrid-mask-msg\\\" style=\\\"display:block;left:50%\\\"></div>\")\r\n\t\t\t\t\t\t\t\t\t.html(opts.loadMsg).appendTo(_1c0);\r\n\t\t\t\t\t\t\tmsg._outerHeight(40);\r\n\t\t\t\t\t\t\tmsg.css({\r\n\t\t\t\t\t\t\t\t\t\tmarginLeft : (-msg.outerWidth() / 2),\r\n\t\t\t\t\t\t\t\t\t\tlineHeight : (msg.height() + \"px\")\r\n\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t},\r\n\t\t\t\toptions : function() {\r\n\t\t\t\t\tvar _1b7 = $.data(this.element, \"datagrid\").options;\r\n\t\t\t\t\tvar _1b8 = $.data(this.element, \"datagrid\").panel\r\n\t\t\t\t\t\t\t.panel(\"options\");\r\n\t\t\t\t\tvar opts = $.extend(_1b7, {\r\n\t\t\t\t\t\t\t\twidth : _1b8.width,\r\n\t\t\t\t\t\t\t\theight : _1b8.height,\r\n\t\t\t\t\t\t\t\tclosed : _1b8.closed,\r\n\t\t\t\t\t\t\t\tcollapsed : _1b8.collapsed,\r\n\t\t\t\t\t\t\t\tminimized : _1b8.minimized,\r\n\t\t\t\t\t\t\t\tmaximized : _1b8.maximized\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\treturn opts;\r\n\t\t\t\t},\r\n\t\t\t\tgetPanel : function() {\r\n\t\t\t\t\treturn $.data(this.element, \"datagrid\").panel;\r\n\t\t\t\t},\r\n\t\t\t\treload : function(_1be) {\r\n\t\t\t\t\t\r\n\t\t\t\t\tvar opts = $(this.element).datagrid(\"options\");\r\n\t\t\t\t\tif (typeof _1be == \"string\") {\r\n\t\t\t\t\t\t\t\t\topts.url = _1be;\r\n\t\t\t\t\t\t\t\t\t_1be = null;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tthis.load( _1be);\r\n\t\t\t\t\t\t\r\n\t\t\t\t},\r\n\t\t\t\treloadFooter : function(_1bf) {\r\n\t\t\t\t\t\r\n\t\t\t\t\t\t\t\tvar opts = $.data(this.element, \"datagrid\").options;\r\n\t\t\t\t\t\t\t\tvar dc = $.data(this.element, \"datagrid\").dc;\r\n\t\t\t\t\t\t\t\tif (_1bf) {\r\n\t\t\t\t\t\t\t\t\t$.data(this.element, \"datagrid\").footer = _1bf;\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tif (opts.showFooter) {\r\n\t\t\t\t\t\t\t\t\topts.view.renderFooter.call(opts.view,\r\n\t\t\t\t\t\t\t\t\t\t\tthis, dc.footer2, false);\r\n\t\t\t\t\t\t\t\t\topts.view.renderFooter.call(opts.view,\r\n\t\t\t\t\t\t\t\t\t\t\tthis, dc.footer1, true);\r\n\t\t\t\t\t\t\t\t\tif (opts.view.onAfterRender) {\r\n\t\t\t\t\t\t\t\t\t\topts.view.onAfterRender.call(opts.view,\r\n\t\t\t\t\t\t\t\t\t\t\t\tthis);\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\tthis.fixRowHeight();\r\n\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\r\n\t\t\t\t},\r\n\r\n\t\t\t\tloaded : function() {\r\n\r\n\t\t\t\t\tthis.getPager().pagination(\"loaded\");\r\n\t\t\t\t\tvar _1c1 = this.getPanel();\r\n\t\t\t\t\t_1c1.children(\"div.datagrid-mask-msg\").remove();\r\n\t\t\t\t\t_1c1.children(\"div.datagrid-mask\").remove();\r\n\r\n\t\t\t\t},\r\n\r\n\t\t\t\tfreezeRow : function(_1c4) {\r\n\t\t\t\t\tvar target = this.element;\r\n\t\t\t\t\tvar _4a = $.data(target, \"datagrid\");\r\n\t\t\t\t\tvar _4b = _4a.options;\r\n\t\t\t\t\tvar dc = _4a.dc;\r\n\t\t\t\t\tif (!dc.body2.children(\"table.datagrid-btable-frozen\").length) {\r\n\t\t\t\t\t\tdc.body1\r\n\t\t\t\t\t\t\t\t.add(dc.body2)\r\n\t\t\t\t\t\t\t\t.prepend(\"<table class=\\\"datagrid-btable datagrid-btable-frozen\\\" cellspacing=\\\"0\\\" cellpadding=\\\"0\\\"></table>\");\r\n\t\t\t\t\t}\r\n\t\t\t\t\t_4c(true);\r\n\t\t\t\t\t_4c(false);\r\n\t\t\t\t\tthis.setViewSize();\r\n\t\t\t\t\tfunction _4c(_4d) {\r\n\t\t\t\t\t\tvar _4e = _4d ? 1 : 2;\r\n\t\t\t\t\t\tvar tr = _4b.finder.getTr(target, _49, \"body\", _4e);\r\n\t\t\t\t\t\t(_4d ? dc.body1 : dc.body2)\r\n\t\t\t\t\t\t\t\t.children(\"table.datagrid-btable-frozen\")\r\n\t\t\t\t\t\t\t\t.append(tr);\r\n\t\t\t\t\t};\r\n\t\t\t\t},\r\n\t\t\t\tautoSizeColumn : function(_ae) {\r\n\t\t\t\t\tvar target = this.element;\r\n\t\t\t\t\tvar _af = $.data(target, \"datagrid\");\r\n\t\t\t\t\tvar _b0 = _af.options;\r\n\t\t\t\t\tvar dc = _af.dc;\r\n\t\t\t\t\tvar _self = this;\r\n\t\t\t\t\tvar tmp = $(\"<div class=\\\"datagrid-cell\\\" style=\\\"position:absolute;left:-9999px\\\"></div>\")\r\n\t\t\t\t\t\t\t.appendTo(\"body\");\r\n\t\t\t\t\tif (_ae) {\r\n\t\t\t\t\t\t_1c(_ae);\r\n\t\t\t\t\t\tif (_b0.fitColumns) {\r\n\t\t\t\t\t\t\tthis.setViewSize();\r\n\t\t\t\t\t\t\tthis.fitColumns();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tvar _b1 = false;\r\n\t\t\t\t\t\tvar _b2 = this.getColumnFields(true).concat(this\r\n\t\t\t\t\t\t\t\t.getColumnFields(false));\r\n\t\t\t\t\t\tfor (var i = 0; i < _b2.length; i++) {\r\n\t\t\t\t\t\t\tvar _ae = _b2[i];\r\n\t\t\t\t\t\t\tvar col = this.getColumnOption(_ae);\r\n\t\t\t\t\t\t\tif (col.auto) {\r\n\t\t\t\t\t\t\t\t_1c(_ae);\r\n\t\t\t\t\t\t\t\t_b1 = true;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (_b1 && _b0.fitColumns) {\r\n\t\t\t\t\t\t\tthis.setViewSize();\r\n\t\t\t\t\t\t\tthis.fitColumns();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\ttmp.remove();\r\n\t\t\t\t\tfunction _1c(_b3) {\r\n\t\t\t\t\t\tvar _b4 = dc.view\r\n\t\t\t\t\t\t\t\t.find(\"div.datagrid-header td[field=\\\"\" + _b3\r\n\t\t\t\t\t\t\t\t\t\t+ \"\\\"] div.datagrid-cell\");\r\n\t\t\t\t\t\t_b4.css(\"width\", \"\");\r\n\t\t\t\t\t\tvar col = _self.getColumnOption(_b3);\r\n\t\t\t\t\t\tcol.width = undefined;\r\n\t\t\t\t\t\tcol.boxWidth = undefined;\r\n\t\t\t\t\t\tcol.auto = true;\r\n\t\t\t\t\t\t_self.fixColumnSize(_b3)\r\n\t\t\t\t\t\t// $(target).datagrid(\"fixColumnSize\", _b3);\r\n\t\t\t\t\t\tvar _b5 = Math.max(_b6(\"header\"), _b6(\"allbody\"),\r\n\t\t\t\t\t\t\t\t_b6(\"allfooter\"))\r\n\t\t\t\t\t\t\t\t+ 1;\r\n\t\t\t\t\t\t_b4._outerWidth(_b5 - 1);\r\n\t\t\t\t\t\tcol.width = _b5;\r\n\t\t\t\t\t\tcol.boxWidth = parseInt(_b4[0].style.width);\r\n\t\t\t\t\t\tcol.deltaWidth = _b5 - col.boxWidth;\r\n\t\t\t\t\t\t_b4.css(\"width\", \"\");\r\n\t\t\t\t\t\t_self.fixColumnSize(_b3);\r\n\t\t\t\t\t\t_b0.onResizeColumn.call(target, _b3, col.width);\r\n\t\t\t\t\t\tfunction _b6(_b7) {\r\n\t\t\t\t\t\t\tvar _b8 = 0;\r\n\t\t\t\t\t\t\tif (_b7 == \"header\") {\r\n\t\t\t\t\t\t\t\t_b8 = _b9(_b4);\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t_b0.finder.getTr(target, 0, _b7)\r\n\t\t\t\t\t\t\t\t\t\t.find(\"td[field=\\\"\" + _b3\r\n\t\t\t\t\t\t\t\t\t\t\t\t+ \"\\\"] div.datagrid-cell\")\r\n\t\t\t\t\t\t\t\t\t\t.each(function() {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tvar w = _b9($(this));\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tif (_b8 < w) {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t_b8 = w;\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\treturn _b8;\r\n\t\t\t\t\t\t\tfunction _b9(_ba) {\r\n\t\t\t\t\t\t\t\treturn _ba.is(\":visible\")\r\n\t\t\t\t\t\t\t\t\t\t? _ba._outerWidth()\r\n\t\t\t\t\t\t\t\t\t\t: tmp.html(_ba.html())._outerWidth();\r\n\t\t\t\t\t\t\t};\r\n\t\t\t\t\t\t};\r\n\t\t\t\t\t};\r\n\t\t\t\t},\r\n\t\t\t\tgetData : function() {\r\n\t\t\t\t\treturn $.data(this.element, \"datagrid\").data;\r\n\t\t\t\t},\r\n\t\t\t\tgetRows : function() {\r\n\t\t\t\t\treturn $.data(this.element, \"datagrid\").data.rows;\r\n\t\t\t\t},\r\n\t\t\t\tgetFooterRows : function() {\r\n\t\t\t\t\treturn $.data(this.element, \"datagrid\").footer;\r\n\t\t\t\t},\r\n\t\t\t\tgetRowIndex : function(id) {\r\n\t\t\t\t\tvar _ef = $.data(this.element, \"datagrid\");\r\n\t\t\t\t\tvar _f0 = _ef.options;\r\n\t\t\t\t\tvar _f1 = _ef.data.rows;\r\n\t\t\t\t\tif (typeof row == \"object\") {\r\n\t\t\t\t\t\treturn findArrayIndex(_f1, row);\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tfor (var i = 0; i < _f1.length; i++) {\r\n\t\t\t\t\t\t\tif (_f1[i][_f0.idField] == row) {\r\n\t\t\t\t\t\t\t\treturn i;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\treturn -1;\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\tgetChecked : function() {\r\n\t\t\t\t\tvar _fa = $.data(this.element, \"datagrid\");\r\n\t\t\t\t\tvar _fb = _fa.options;\r\n\t\t\t\t\tif (_fb.idField) {\r\n\t\t\t\t\t\treturn _fa.checkedRows;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tvar _fc = [];\r\n\t\t\t\t\t\t_fb.finder.getTr(_f9, \"\", \"checked\", 2).each(\r\n\t\t\t\t\t\t\t\tfunction() {\r\n\t\t\t\t\t\t\t\t\t_fc.push(_fb.finder.getRow(_f9, $(this)));\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\treturn _fc;\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\tgetSelected : function() {\r\n\t\t\t\t\tvar rows = this.getSelections();\r\n\t\t\t\t\treturn rows.length > 0 ? rows[0] : null;\r\n\t\t\t\t},\r\n\t\t\t\tgetSelections : function() {\r\n\t\t\t\t\tvar _f4 = $.data(this.element, \"datagrid\");\r\n\t\t\t\t\tvar _f5 = _f4.options;\r\n\t\t\t\t\tvar _f6 = _f4.data;\r\n\t\t\t\t\tif (_f5.idField) {\r\n\t\t\t\t\t\treturn _f4.selectedRows;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tvar _f7 = [];\r\n\t\t\t\t\t\t_f5.finder.getTr(_f3, \"\", \"selected\", 2).each(\r\n\t\t\t\t\t\t\t\tfunction() {\r\n\t\t\t\t\t\t\t\t\t_f7.push(_f5.finder.getRow(_f3, $(this)));\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\treturn _f7;\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\tclearSelections : function() {\r\n\t\t\t\t\tvar _1c6 = $.data(this.element, \"datagrid\");\r\n\t\t\t\t\tvar _1c7 = _1c6.selectedRows;\r\n\t\t\t\t\tvar _1c8 = _1c6.checkedRows;\r\n\t\t\t\t\t_1c7.splice(0, _1c7.length);\r\n\t\t\t\t\t_10e(this);\r\n\t\t\t\t\tif (_1c6.options.checkOnSelect) {\r\n\t\t\t\t\t\t_1c8.splice(0, _1c8.length);\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\tclearChecked : function() {\r\n\r\n\t\t\t\t\tvar _1c9 = $.data(this.element, \"datagrid\");\r\n\t\t\t\t\tvar _1ca = _1c9.selectedRows;\r\n\t\t\t\t\tvar _1cb = _1c9.checkedRows;\r\n\t\t\t\t\t_1cb.splice(0, _1cb.length);\r\n\t\t\t\t\tthis.uncheckAll();\r\n\t\t\t\t\tif (_1c9.options.selectOnCheck) {\r\n\t\t\t\t\t\t_1ca.splice(0, _1ca.length);\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t},\r\n\t\t\t\tscrollTo : function(rowIndex) {\r\n\t\t\t\t\tvar _100 = $.data(this.element, \"datagrid\");\r\n\t\t\t\t\tvar dc = _100.dc;\r\n\t\t\t\t\tvar opts = _100.options;\r\n\t\t\t\t\tvar tr = opts.finder.getTr(this.element, rowIndex);\r\n\t\t\t\t\tif (tr.length) {\r\n\t\t\t\t\t\tif (tr.closest(\"table\")\r\n\t\t\t\t\t\t\t\t.hasClass(\"datagrid-btable-frozen\")) {\r\n\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tvar _101 = dc.view2.children(\"div.datagrid-header\")\r\n\t\t\t\t\t\t\t\t._outerHeight();\r\n\t\t\t\t\t\tvar _102 = dc.body2;\r\n\t\t\t\t\t\tvar _103 = _102.outerHeight(true) - _102.outerHeight();\r\n\t\t\t\t\t\tvar top = tr.position().top - _101 - _103;\r\n\t\t\t\t\t\tif (top < 0) {\r\n\t\t\t\t\t\t\t_102.scrollTop(_102.scrollTop() + top);\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tif (top + tr._outerHeight() > _102.height() - 18) {\r\n\t\t\t\t\t\t\t\t_102.scrollTop(_102.scrollTop() + top\r\n\t\t\t\t\t\t\t\t\t\t+ tr._outerHeight() - _102.height()\r\n\t\t\t\t\t\t\t\t\t\t+ 18);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\trowOver : function(rowIndex) {\r\n\t\t\t\t\tvar gridData = $.data(this.element, \"datagrid\");\r\n\t\t\t\t\tvar opts = gridData.options;\r\n\t\t\t\t\topts.finder.getTr(this.element, gridData.highlightIndex)\r\n\t\t\t\t\t\t\t.removeClass(\"datagrid-row-over\");\r\n\t\t\t\t\topts.finder.getTr(this.element, rowIndex)\r\n\t\t\t\t\t\t\t.addClass(\"datagrid-row-over\");\r\n\t\t\t\t\tgridData.highlightIndex = rowIndex;\r\n\t\t\t\t},\r\n\t\t\t\thighlightRow : function(_1cd) {\r\n\t\t\t\t\tthis.rowOver(_1cd);\r\n\t\t\t\t\tthis.scrollTo(_1cd);\r\n\t\t\t\t},\r\n\t\t\t\tselectAll : function() {\r\n\t\t\t\t\tvar target = this.element;\r\n\t\t\t\t\tvar _11a = $.data(this.element, \"datagrid\");\r\n\t\t\t\t\tvar opts = _11a.options;\r\n\t\t\t\t\tvar rows = opts.finder.getRows.call(this, target);\r\n\t\t\t\t\tvar _11b = $.data(this.element, \"datagrid\").selectedRows;\r\n\t\t\t\t\tif (!_119 && opts.checkOnSelect) {\r\n\t\t\t\t\t\tthis.checkAll(true);\r\n\t\t\t\t\t}\r\n\t\t\t\t\topts.finder.getTr(this.element, \"\", \"allbody\")\r\n\t\t\t\t\t\t\t.addClass(\"datagrid-row-selected\");\r\n\t\t\t\t\tif (opts.idField) {\r\n\t\t\t\t\t\tfor (var _11d = 0; _11d < rows.length; _11d++) {\r\n\t\t\t\t\t\t\tremoveArrayMap(_11b, opts.idField, rows[_11d]);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tthis.trigger(\"onSelectAll\", rows)\r\n\t\t\t\t},\r\n\t\t\t\tunselectAll : function(_11f) {\r\n\t\t\t\t\tvar target = this.element;\r\n\t\t\t\t\tvar _120 = $.data(target, \"datagrid\");\r\n\t\t\t\t\tvar opts = _120.options;\r\n\t\t\t\t\tvar rows = opts.finder.getRows.call(this, target);\r\n\t\t\t\t\tvar _121 = $.data(target, \"datagrid\").selectedRows;\r\n\t\t\t\t\tif (!_11f && opts.checkOnSelect) {\r\n\t\t\t\t\t\tthis.uncheckAll(true);\r\n\t\t\t\t\t}\r\n\t\t\t\t\topts.finder.getTr(target, \"\", \"selected\")\r\n\t\t\t\t\t\t\t.removeClass(\"datagrid-row-selected\");\r\n\t\t\t\t\tif (opts.idField) {\r\n\t\t\t\t\t\tfor (var _123 = 0; _123 < rows.length; _123++) {\r\n\t\t\t\t\t\t\tremoveArrayMap(_121, opts.idField,\r\n\t\t\t\t\t\t\t\t\trows[_123][opts.idField]);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tthis.trigger(\"onUnselectAll\", rows);\r\n\t\t\t\t},\r\n\t\t\t\tselectRow : function(rowIndex, _10b) {\r\n\t\t\t\t\tvar target = this.element;\r\n\t\t\t\t\tvar _10c = $.data(target, \"datagrid\");\r\n\t\t\t\t\tvar dc = _10c.dc;\r\n\t\t\t\t\tvar opts = _10c.options;\r\n\t\t\t\t\tvar selectedRows = _10c.selectedRows;\r\n\t\t\t\t\tif (opts.singleSelect) {\r\n\t\t\t\t\t\tthis.unselectAll();\r\n\t\t\t\t\t\tselectedRows.splice(0, selectedRows.length);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (!_10b && opts.checkOnSelect) {\r\n\t\t\t\t\t\tthis.checkRow(rowIndex, true);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tvar row = opts.finder.getRow.call(this, rowIndex);\r\n\t\t\t\t\tif (opts.idField) {\r\n\t\t\t\t\t\taddArrayMap(selectedRows, opts.idField, row);\r\n\t\t\t\t\t}\r\n\t\t\t\t\topts.finder.getTr(target, rowIndex)\r\n\t\t\t\t\t\t\t.addClass(\"datagrid-row-selected\");\r\n\t\t\t\t\t// opts.onSelect.call(target, rowIndex, row);\r\n\t\t\t\t\tthis.trigger(\"onSelect\", rowIndex, row);\r\n\r\n\t\t\t\t\tthis.scrollTo(rowIndex);\r\n\t\t\t\t},\r\n\t\t\t\tselectRecord : function( id) {\r\n\t\t\t\t\r\n\t\t\t\t\tvar opts = $.data(this.element, \"datagrid\").options;\r\n\t\t\t\t\tif (opts.idField) {\r\n\t\t\t\t\t\t\tvar _1cf = _ed(this, id);\r\n\t\t\t\t\t\t\t\t\tif (_1cf >= 0) {\r\n\t\t\t\t\t\t\t\t\t\tthis.selectRow(_1cf)\r\n\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\r\n\t\t\t\t},\r\n\t\t\t\tunselectRow : function(rowIndex, _113) {\r\n\t\t\t\t\tvar target = this.element;\r\n\t\t\t\t\tvar _114 = $.data(target, \"datagrid\");\r\n\t\t\t\t\tvar dc = _114.dc;\r\n\t\t\t\t\tvar opts = _114.options;\r\n\t\t\t\t\tvar _115 = $.data(target, \"datagrid\").selectedRows;\r\n\t\t\t\t\tif (!_113 && opts.checkOnSelect) {\r\n\t\t\t\t\t\tthis.uncheckRow(rowIndex, true);\r\n\t\t\t\t\t}\r\n\t\t\t\t\topts.finder.getTr(target, rowIndex)\r\n\t\t\t\t\t\t\t.removeClass(\"datagrid-row-selected\");\r\n\t\t\t\t\tvar row = opts.finder.getRow(this, target, rowIndex);\r\n\t\t\t\t\tif (opts.idField) {\r\n\t\t\t\t\t\tremoveArrayMap(_115, opts.idField, row[opts.idField]);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tthis.trigger(\"onUnselect\", rowIndex, row)\r\n\t\t\t\t},\r\n\t\t\t\tcheckRow : function(rowIndex, _126) {\r\n\t\t\t\t\tvar target = this.element;\r\n\t\t\t\t\tvar _127 = $.data(target, \"datagrid\");\r\n\t\t\t\t\tvar opts = _127.options;\r\n\t\t\t\t\tif (!_126 && opts.selectOnCheck) {\r\n\t\t\t\t\t\tthis.selectRow(rowIndex, true);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tvar tr = opts.finder.getTr(target, rowIndex)\r\n\t\t\t\t\t\t\t.addClass(\"datagrid-row-checked\");\r\n\t\t\t\t\tvar ck = tr\r\n\t\t\t\t\t\t\t.find(\"div.datagrid-cell-check input[type=checkbox]\");\r\n\t\t\t\t\tck.attr(\"checked\", true);\r\n\t\t\t\t\ttr = opts.finder.getTr(target, \"\", \"checked\", 2);\r\n\t\t\t\t\tif (tr.length == opts.finder.getRows.call(this, target).length) {\r\n\t\t\t\t\t\tvar dc = _127.dc;\r\n\t\t\t\t\t\tvar _128 = dc.header1.add(dc.header2);\r\n\t\t\t\t\t\t_128.find(\"input[type=checkbox]\").attr(\"checked\", true);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tvar row = opts.finder.getRow.call(this, rowIndex);\r\n\t\t\t\t\tif (opts.idField) {\r\n\t\t\t\t\t\taddArrayMap(_127.checkedRows, opts.idField, row);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tthis.trigger(\"onCheck\", rowIndex, row)\r\n\r\n\t\t\t\t},\r\n\t\t\t\tuncheckRow : function(_12a, _12b) {\r\n\t\t\t\t\tvar target = this.element;\r\n\t\t\t\t\tvar _12c = $.data(target, \"datagrid\");\r\n\t\t\t\t\tvar opts = _12c.options;\r\n\t\t\t\t\tif (!_12b && opts.selectOnCheck) {\r\n\t\t\t\t\t\tthis.unselectRow(target, _12a, true);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tvar tr = opts.finder.getTr(target, _12a)\r\n\t\t\t\t\t\t\t.removeClass(\"datagrid-row-checked\");\r\n\t\t\t\t\tvar ck = tr\r\n\t\t\t\t\t\t\t.find(\"div.datagrid-cell-check input[type=checkbox]\");\r\n\t\t\t\t\tck.attr(\"checked\", false);\r\n\t\t\t\t\tvar dc = _12c.dc;\r\n\t\t\t\t\tvar _12d = dc.header1.add(dc.header2);\r\n\t\t\t\t\t_12d.find(\"input[type=checkbox]\").attr(\"checked\", false);\r\n\t\t\t\t\tvar row = opts.finder.getRow.call(this, target, _12a);\r\n\t\t\t\t\tif (opts.idField) {\r\n\t\t\t\t\t\tremoveArrayMap(_12c.checkedRows, opts.idField,\r\n\t\t\t\t\t\t\t\trow[opts.idField]);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tthis.trigger(\"onUncheck\", _12a, row)\r\n\r\n\t\t\t\t},\r\n\t\t\t\tbeginEdit : function(rowIndex) {\r\n\t\t\t\t\tvar target = this.element;\r\n\t\t\t\t\tvar opts = $.data(target, \"datagrid\").options;\r\n\t\t\t\t\tvar tr = opts.finder.getTr(target, rowIndex);\r\n\t\t\t\t\tvar row = opts.finder.getRow.call(this, rowIndex);\r\n\t\t\t\t\tif (tr.hasClass(\"datagrid-row-editing\")) {\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (this.trigger(\"onBeforeEdit\", rowIndex, row) == false) {\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\t\t\t\t\ttr.addClass(\"datagrid-row-editing\");\r\n\t\t\t\t\tthis.showEditor(rowIndex);\r\n\t\t\t\t\tthis.setEditorWidth();\r\n\t\t\t\t\ttr.find(\"div.datagrid-editable\").each(function() {\r\n\t\t\t\t\t\t\t\tvar _138 = $(this).parent().attr(\"field\");\r\n\t\t\t\t\t\t\t\tvar ed = $.data(this, \"datagrid.editor\");\r\n\t\t\t\t\t\t\t\ted.actions.setValue(ed.target, row[_138]);\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\tthis.validateRow(rowIndex);\r\n\t\t\t\t\tthis.trigger(\"onBeginEdit\", rowIndex, row);\r\n\t\t\t\t},\r\n\t\t\t\tshowEditor : function(rowIndex) {\r\n\t\t\t\t\tvar target = this.element;\r\n\t\t\t\t\tvar opts = $.data(target, \"datagrid\").options;\r\n\t\t\t\t\tvar tr = opts.finder.getTr(target, _14f);\r\n\t\t\t\t\ttr.children(\"td\").each(function() {\r\n\t\t\t\t\t\tvar cell = $(this).find(\"div.datagrid-cell\");\r\n\t\t\t\t\t\tvar _150 = $(this).attr(\"field\");\r\n\t\t\t\t\t\tvar col = getColumnOption(_150);\r\n\t\t\t\t\t\tif (col && col.editor) {\r\n\t\t\t\t\t\t\tvar _151, _152;\r\n\t\t\t\t\t\t\tif (typeof col.editor == \"string\") {\r\n\t\t\t\t\t\t\t\t_151 = col.editor;\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t_151 = col.editor.type;\r\n\t\t\t\t\t\t\t\t_152 = col.editor.options;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tvar _153 = opts.editors[_151];\r\n\t\t\t\t\t\t\tif (_153) {\r\n\t\t\t\t\t\t\t\tvar _154 = cell.html();\r\n\t\t\t\t\t\t\t\tvar _155 = cell._outerWidth();\r\n\t\t\t\t\t\t\t\tcell.addClass(\"datagrid-editable\");\r\n\t\t\t\t\t\t\t\tcell._outerWidth(_155);\r\n\t\t\t\t\t\t\t\tcell\r\n\t\t\t\t\t\t\t\t\t\t.html(\"<table border=\\\"0\\\" cellspacing=\\\"0\\\" cellpadding=\\\"1\\\"><tr><td></td></tr></table>\");\r\n\t\t\t\t\t\t\t\tcell.children(\"table\").bind(\r\n\t\t\t\t\t\t\t\t\t\t\"click dblclick contextmenu\",\r\n\t\t\t\t\t\t\t\t\t\tfunction(e) {\r\n\t\t\t\t\t\t\t\t\t\t\te.stopPropagation();\r\n\t\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t$.data(cell[0], \"datagrid.editor\", {\r\n\t\t\t\t\t\t\t\t\t\t\tactions : _153,\r\n\t\t\t\t\t\t\t\t\t\t\ttarget : _153.init(cell.find(\"td\"),\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t_152),\r\n\t\t\t\t\t\t\t\t\t\t\tfield : _150,\r\n\t\t\t\t\t\t\t\t\t\t\ttype : _151,\r\n\t\t\t\t\t\t\t\t\t\t\toldHtml : _154\r\n\t\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t\tthis.fixRowHeight(_14f, true);\r\n\t\t\t\t},\r\n\t\t\t\tendEdit : function(rowIndex, notValidate) {\r\n\t\t\t\t\tvar target = this.element;\r\n\t\t\t\t\tvar _13e = $.data(target, \"datagrid\");\r\n\t\t\t\t\tvar opts = _13e.options;\r\n\t\t\t\t\tvar _13f = _13e.updatedRows;\r\n\t\t\t\t\tvar _140 = _13e.insertedRows;\r\n\t\t\t\t\tvar tr = opts.finder.getTr(target, rowIndex);\r\n\t\t\t\t\tvar row = opts.finder.getRow.call(this, rowIndex);\r\n\t\t\t\t\tif (!tr.hasClass(\"datagrid-row-editing\")) {\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (!notValidate) {\r\n\t\t\t\t\t\tif (!this.validateRow(rowIndex)) {\r\n\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tvar _141 = false;\r\n\t\t\t\t\t\tvar _142 = {};\r\n\t\t\t\t\t\ttr.find(\"div.datagrid-editable\").each(function() {\r\n\t\t\t\t\t\t\t\t\tvar _143 = $(this).parent().attr(\"field\");\r\n\t\t\t\t\t\t\t\t\tvar ed = $.data(this, \"datagrid.editor\");\r\n\t\t\t\t\t\t\t\t\tvar _144 = ed.actions.getValue(ed.target);\r\n\t\t\t\t\t\t\t\t\tif (row[_143] != _144) {\r\n\t\t\t\t\t\t\t\t\t\trow[_143] = _144;\r\n\t\t\t\t\t\t\t\t\t\t_141 = true;\r\n\t\t\t\t\t\t\t\t\t\t_142[_143] = _144;\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\tif (_141) {\r\n\t\t\t\t\t\t\tif (_2(_140, row) == -1) {\r\n\t\t\t\t\t\t\t\tif (_2(_13f, row) == -1) {\r\n\t\t\t\t\t\t\t\t\t_13f.push(row);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tthis.trigger(\"onEndEdit\", rowIndex, row, _142);\r\n\t\t\t\t\t}\r\n\t\t\t\t\ttr.removeClass(\"datagrid-row-editing\");\r\n\t\t\t\t\tthis.endEditRow(rowIndex);\r\n\t\t\t\t\t$(target).datagrid(\"refreshRow\", rowIndex);\r\n\t\t\t\t\tif (!notValidate) {\r\n\r\n\t\t\t\t\t\tthis.trigger(\"onAfterEdit\", rowIndex, row, _142);\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tthis.trigger(\"onCancelEdit\", rowIndex, row);\r\n\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\r\n\t\t\t\tendEditRow : function(rowIndex) {\r\n\t\t\t\t\tvar target = this.element;\r\n\t\t\t\t\tvar opts = $.data(target, \"datagrid\").options;\r\n\t\t\t\t\tvar tr = opts.finder.getTr(target, _157);\r\n\t\t\t\t\ttr.children(\"td\").each(function() {\r\n\t\t\t\t\t\t\t\tvar cell = $(this)\r\n\t\t\t\t\t\t\t\t\t\t.find(\"div.datagrid-editable\");\r\n\t\t\t\t\t\t\t\tif (cell.length) {\r\n\t\t\t\t\t\t\t\t\tvar ed = $.data(cell[0], \"datagrid.editor\");\r\n\t\t\t\t\t\t\t\t\tif (ed.actions.destroy) {\r\n\t\t\t\t\t\t\t\t\t\ted.actions.destroy(ed.target);\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\tcell.html(ed.oldHtml);\r\n\t\t\t\t\t\t\t\t\t$.removeData(cell[0], \"datagrid.editor\");\r\n\t\t\t\t\t\t\t\t\tcell.removeClass(\"datagrid-editable\");\r\n\t\t\t\t\t\t\t\t\tcell.css(\"width\", \"\");\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t},\r\n\t\t\t\tcancelEdit : function(rowIndex) {\r\n\t\t\t\t\treturn this.endEdit(rowIndex, true);\r\n\t\t\t\t},\r\n\t\t\t\tgetEditors : function(rowIndex) {\r\n\t\t\t\t\tvar target = this.element;\r\n\t\t\t\t\tvar opts = $.data(target, \"datagrid\").options;\r\n\t\t\t\t\tvar tr = opts.finder.getTr(target, rowIndex);\r\n\t\t\t\t\tvar _149 = [];\r\n\t\t\t\t\ttr.children(\"td\").each(function() {\r\n\t\t\t\t\t\t\t\tvar cell = $(this)\r\n\t\t\t\t\t\t\t\t\t\t.find(\"div.datagrid-editable\");\r\n\t\t\t\t\t\t\t\tif (cell.length) {\r\n\t\t\t\t\t\t\t\t\tvar ed = $.data(cell[0], \"datagrid.editor\");\r\n\t\t\t\t\t\t\t\t\t_149.push(ed);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\treturn _149;\r\n\t\t\t\t},\r\n\t\t\t\tgetEditor : function(editorInfo) {\r\n\t\t\t\t\tvar _14d = this.getEditors(editorInfo.index != undefined\r\n\t\t\t\t\t\t\t? editorInfo.index\r\n\t\t\t\t\t\t\t: editorInfo.id);\r\n\t\t\t\t\tfor (var i = 0; i < _14d.length; i++) {\r\n\t\t\t\t\t\tif (_14d[i].field == editorInfo.field) {\r\n\t\t\t\t\t\t\treturn _14d[i];\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn null;\r\n\t\t\t\t},\r\n\t\t\t\trefreshRow : function(index) {\r\n\t\t\t\t\tvar opts = $.data(this.element, \"datagrid\").options;\r\n\t\t\t\t\topts.view.refreshRow.call(opts.view, this, index);\r\n\r\n\t\t\t\t},\r\n\t\t\t\tvalidateRow : function(rowIndex) {\r\n\t\t\t\t\tvar target = this.element;\r\n\t\t\t\t\tvar tr = $.data(target, \"datagrid\").options.finder.getTr(\r\n\t\t\t\t\t\t\ttarget, rowIndex);\r\n\t\t\t\t\tif (!tr.hasClass(\"datagrid-row-editing\")) {\r\n\t\t\t\t\t\treturn true;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tvar vbox = tr.find(\".validatebox-text\");\r\n\t\t\t\t\tvbox.validatebox(\"validate\");\r\n\t\t\t\t\tvbox.trigger(\"mouseleave\");\r\n\t\t\t\t\tvar _15a = tr.find(\".validatebox-invalid\");\r\n\t\t\t\t\treturn _15a.length == 0;\r\n\t\t\t\t},\r\n\t\t\t\tupdateRow : function(_1da) {\r\n\r\n\t\t\t\t\tvar opts = $.data(this.element, \"datagrid\").options;\r\n\t\t\t\t\topts.view.updateRow.call(opts.view, this, _1da.index,\r\n\t\t\t\t\t\t\t_1da.row);\r\n\r\n\t\t\t\t},\r\n\t\t\t\tappendRow : function(row) {\r\n\t\t\t\t\tvar target = this.element;\r\n\t\t\t\t\tvar data = $.data(target, \"datagrid\").data;\r\n\t\t\t\t\tvar view = $.data(target, \"datagrid\").options.view;\r\n\t\t\t\t\tvar _16d = $.data(target, \"datagrid\").insertedRows;\r\n\t\t\t\t\tview.insertRow.call(view, null, row);\r\n\t\t\t\t\t_16d.push(row);\r\n\t\t\t\t\t$(target).datagrid(\"getPager\").pagination(\"refresh\", {\r\n\t\t\t\t\t\t\t\ttotal : data.total\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t},\r\n\t\t\t\tinsertRow : function(insertRow) {\r\n\t\t\t\t\tvar target = this.element;\r\n\t\t\t\t\tvar data = $.data(target, \"datagrid\").data;\r\n\t\t\t\t\tvar view = $.data(target, \"datagrid\").options.view;\r\n\t\t\t\t\tvar _16a = $.data(target, \"datagrid\").insertedRows;\r\n\t\t\t\t\tview.insertRow.call(view, insertRow.index, insertRow.row);\r\n\t\t\t\t\t_16a.push(insertRow.row);\r\n\t\t\t\t\t$(target).datagrid(\"getPager\").pagination(\"refresh\", {\r\n\t\t\t\t\t\t\t\ttotal : data.total\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t},\r\n\t\t\t\tdeleteRow : function(_1dc) {\r\n\t\t\t\t\tvar target = this.element;\r\n\t\t\t\t\tvar _164 = $.data(target, \"datagrid\");\r\n\t\t\t\t\tvar opts = _164.options;\r\n\t\t\t\t\tvar data = _164.data;\r\n\t\t\t\t\tvar _165 = _164.insertedRows;\r\n\t\t\t\t\tvar _166 = _164.deletedRows;\r\n\t\t\t\t\t$(target).datagrid(\"cancelEdit\", _163);\r\n\t\t\t\t\tvar row = opts.finder.getRow.call(this, target, _163);\r\n\t\t\t\t\tif (findArrayIndex(_165, row) >= 0) {\r\n\t\t\t\t\t\tremoveArrayMap(_165, row);\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\t_166.push(row);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tremoveArrayMap(_164.selectedRows, opts.idField,\r\n\t\t\t\t\t\t\trow[opts.idField]);\r\n\t\t\t\t\tremoveArrayMap(_164.checkedRows, opts.idField,\r\n\t\t\t\t\t\t\trow[opts.idField]);\r\n\t\t\t\t\topts.view.deleteRow.call(opts.view, _163);\r\n\t\t\t\t\tif (opts.height == \"auto\") {\r\n\t\t\t\t\t\tthis.fixRowHeight();\r\n\t\t\t\t\t}\r\n\t\t\t\t\t$(target).datagrid(\"getPager\").pagination(\"refresh\", {\r\n\t\t\t\t\t\t\t\ttotal : data.total\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t},\r\n\t\t\t\tgetChanges : function(_15d) {\r\n\t\t\t\t\tvar target = this.element;\r\n\t\t\t\t\tvar _15e = $.data(target, \"datagrid\").insertedRows;\r\n\t\t\t\t\tvar _15f = $.data(target, \"datagrid\").deletedRows;\r\n\t\t\t\t\tvar _160 = $.data(target, \"datagrid\").updatedRows;\r\n\t\t\t\t\tif (!_15d) {\r\n\t\t\t\t\t\tvar rows = [];\r\n\t\t\t\t\t\trows = rows.concat(_15e);\r\n\t\t\t\t\t\trows = rows.concat(_15f);\r\n\t\t\t\t\t\trows = rows.concat(_160);\r\n\t\t\t\t\t\treturn rows;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tif (_15d == \"inserted\") {\r\n\t\t\t\t\t\t\treturn _15e;\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tif (_15d == \"deleted\") {\r\n\t\t\t\t\t\t\t\treturn _15f;\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tif (_15d == \"updated\") {\r\n\t\t\t\t\t\t\t\t\treturn _160;\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn [];\r\n\t\t\t\t},\r\n\t\t\t\tacceptChanges : function() {\r\n\t\t\t\t\tvar target = this.element;\r\n\t\t\t\t\tvar data = $.data(target, \"datagrid\").data;\r\n\t\t\t\t\tvar ok = true;\r\n\t\t\t\t\tfor (var i = 0, len = data.rows.length; i < len; i++) {\r\n\t\t\t\t\t\tif (validateRow(i)) {\r\n\t\t\t\t\t\t\t$(target).datagrid(\"endEdit\", i);\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tok = false;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (ok) {\r\n\t\t\t\t\t\tclearEditData(target);\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\trejectChanges : function(jq) {\r\n\t\t\t\t\t/*\r\n\t\t\t\t\t * return jq.each(function() { _174(this); });\r\n\t\t\t\t\t */\r\n\t\t\t\t},\r\n\t\t\t\tmergeCells : function(options) {\r\n\t\t\t\t\tvar target = this.element;\r\n\t\t\t\t\tvar opts = $.data(target, \"datagrid\").options;\r\n\t\t\t\t\toptions.type = options.type || \"body\";\r\n\t\t\t\t\toptions.rowspan = options.rowspan || 1;\r\n\t\t\t\t\toptions.colspan = options.colspan || 1;\r\n\t\t\t\t\tif (options.rowspan == 1 && options.colspan == 1) {\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tvar tr = opts.finder.getTr(target,\r\n\t\t\t\t\t\t\t(options.index != undefined\r\n\t\t\t\t\t\t\t\t\t? options.index\r\n\t\t\t\t\t\t\t\t\t: options.id), options.type);\r\n\t\t\t\t\tif (!tr.length) {\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tvar td = tr.find(\"td[field=\\\"\" + options.field + \"\\\"]\");\r\n\t\t\t\t\ttd.attr(\"rowspan\", options.rowspan).attr(\"colspan\",\r\n\t\t\t\t\t\t\toptions.colspan);\r\n\t\t\t\t\ttd.addClass(\"datagrid-td-merged\");\r\n\t\t\t\t\t_18a(td.next(), options.colspan - 1);\r\n\t\t\t\t\tfor (var i = 1; i < options.rowspan; i++) {\r\n\t\t\t\t\t\ttr = tr.next();\r\n\t\t\t\t\t\tif (!tr.length) {\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\ttd = tr.find(\"td[field=\\\"\" + options.field + \"\\\"]\");\r\n\t\t\t\t\t\t_18a(td, options.colspan);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tthis.setCellWidth();\r\n\t\t\t\t\tfunction _18a(td, _18b) {\r\n\t\t\t\t\t\tfor (var i = 0; i < _18b; i++) {\r\n\t\t\t\t\t\t\ttd.hide();\r\n\t\t\t\t\t\t\ttd = td.next();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t};\r\n\t\t\t\t},\r\n\t\t\t\tshowColumn : function(field) {\r\n\t\t\t\t\tvar panel = this.getPanel();\r\n\t\t\t\t\tpanel.find(\"td[field=\\\"\" + field + \"\\\"]\").show();\r\n\t\t\t\t\tthis.getColumnOption(field).hidden = false;\r\n\t\t\t\t\tthis.fitColumns(field)\r\n\r\n\t\t\t\t},\r\n\t\t\t\thideColumn : function(field) {\r\n\t\t\t\t\tvar panel = this.getPanel();\r\n\t\t\t\t\tpanel.find(\"td[field=\\\"\" + field + \"\\\"]\").hide();\r\n\t\t\t\t\tthis.getColumnOption(field).hidden = true;\r\n\t\t\t\t\tthis.fitColumns(field)\r\n\r\n\t\t\t\t},\r\n\t\t\t\tresize : function(size) {\r\n\t\t\t\t\tvar target = this.element;\r\n\t\t\t\t\tvar gridData = $.data(target, \"datagrid\");\r\n\t\t\t\t\tvar opts = gridData.options;\r\n\t\t\t\t\tvar panel = gridData.panel;\r\n\t\t\t\t\tif (size) {\r\n\t\t\t\t\t\t$.extend(opts, size);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (opts.fit == true) {\r\n\t\t\t\t\t\tvar p = panel.panel(\"panel\").parent();\r\n\t\t\t\t\t\topts.width = p.width();\r\n\t\t\t\t\t\topts.height = p.height();\r\n\t\t\t\t\t}\r\n\t\t\t\t\tpanel.panel(\"resize\", opts);\r\n\t\t\t\t},\r\n\t\t\t\tcheckAll : function() {\r\n\t\t\t\t\tvar target = this.element;\r\n\t\t\t\t\tvar gridData = $.data(target, \"datagrid\");\r\n\t\t\t\t\tvar opts = gridData.options;\r\n\t\t\t\t\tvar rows = opts.finder.getRows.call(this, target);\r\n\t\t\t\t\tif (!_12f && opts.selectOnCheck) {\r\n\t\t\t\t\t\t_117(target, true);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tvar dc = gridData.dc;\r\n\t\t\t\t\tvar hck = dc.header1.add(dc.header2)\r\n\t\t\t\t\t\t\t.find(\"input[type=checkbox]\");\r\n\t\t\t\t\tvar bck = opts.finder\r\n\t\t\t\t\t\t\t.getTr(target, \"\", \"allbody\")\r\n\t\t\t\t\t\t\t.addClass(\"datagrid-row-checked\")\r\n\t\t\t\t\t\t\t.find(\"div.datagrid-cell-check input[type=checkbox]\");\r\n\t\t\t\t\thck.add(bck).attr(\"checked\", true);\r\n\t\t\t\t\tif (opts.idField) {\r\n\t\t\t\t\t\tfor (var i = 0; i < rows.length; i++) {\r\n\t\t\t\t\t\t\taddArrayMap(gridData.checkedRows, opts.idField,\r\n\t\t\t\t\t\t\t\t\trows[i]);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tthis.trigger(\"onCheckAll\", rows);\r\n\r\n\t\t\t\t},\r\n\t\t\t\tuncheckAll : function(_132) {\r\n\t\t\t\t\tvar target = this.element;\r\n\t\t\t\t\tvar gridData = $.data(target, \"datagrid\");\r\n\t\t\t\t\tvar opts = gridData.options;\r\n\t\t\t\t\tvar rows = opts.finder.getRows.call(this, target);\r\n\t\t\t\t\tif (!_132 && opts.selectOnCheck) {\r\n\t\t\t\t\t\t_10e(target, true);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tvar dc = gridData.dc;\r\n\t\t\t\t\tvar hck = dc.header1.add(dc.header2)\r\n\t\t\t\t\t\t\t.find(\"input[type=checkbox]\");\r\n\t\t\t\t\tvar bck = opts.finder\r\n\t\t\t\t\t\t\t.getTr(target, \"\", \"checked\")\r\n\t\t\t\t\t\t\t.removeClass(\"datagrid-row-checked\")\r\n\t\t\t\t\t\t\t.find(\"div.datagrid-cell-check input[type=checkbox]\");\r\n\t\t\t\t\thck.add(bck).attr(\"checked\", false);\r\n\t\t\t\t\tif (opts.idField) {\r\n\t\t\t\t\t\tfor (var i = 0; i < rows.length; i++) {\r\n\t\t\t\t\t\t\tremoveArrayMap(gridData.checkedRows, opts.idField,\r\n\t\t\t\t\t\t\t\t\trows[i][opts.idField]);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tthis.trigger(\"onUncheckAll\", rows);\r\n\r\n\t\t\t\t},\r\n\t\t\t\tsort : function(sortObj) {\r\n\t\t\t\t\tvar target = this.element;\r\n\t\t\t\t\tvar gridData = $.data(target, \"datagrid\");\r\n\t\t\t\t\tvar opts = gridData.options;\r\n\t\t\t\t\tsortObj = sortObj || {};\r\n\t\t\t\t\tvar newSortObj = {\r\n\t\t\t\t\t\tsortName : opts.sortName,\r\n\t\t\t\t\t\tsortOrder : opts.sortOrder\r\n\t\t\t\t\t};\r\n\t\t\t\t\tif (typeof sortObj == \"object\") {\r\n\t\t\t\t\t\t$.extend(newSortObj, sortObj);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tvar sortNames = [];\r\n\t\t\t\t\tvar sortOrder = [];\r\n\t\t\t\t\tif (newSortObj.sortName) {\r\n\t\t\t\t\t\tsortNames = newSortObj.sortName.split(\",\");\r\n\t\t\t\t\t\tsortOrder = newSortObj.sortOrder.split(\",\");\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (typeof sortObj == \"string\") {\r\n\t\t\t\t\t\tvar sortField = sortObj;\r\n\t\t\t\t\t\tvar col = this.getColumnOption(sortField);\r\n\t\t\t\t\t\tif (!col.sortable || gridData.resizing) {\r\n\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tvar colOrder = col.colOrder || \"asc\";\r\n\t\t\t\t\t\tvar pos = findArrayIndex(sortNames, sortField);\r\n\t\t\t\t\t\tif (pos >= 0) {\r\n\t\t\t\t\t\t\tvar sortOrder = sortOrder[pos] == \"asc\"\r\n\t\t\t\t\t\t\t\t\t? \"desc\"\r\n\t\t\t\t\t\t\t\t\t: \"asc\";\r\n\t\t\t\t\t\t\tif (opts.multiSort && sortOrder == colOrder) {\r\n\t\t\t\t\t\t\t\tsortNames.splice(pos, 1);\r\n\t\t\t\t\t\t\t\tsortOrder.splice(pos, 1);\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tsortOrder[pos] = sortOrder;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tif (opts.multiSort) {\r\n\t\t\t\t\t\t\t\tsortNames.push(sortField);\r\n\t\t\t\t\t\t\t\tsortOrder.push(colOrder);\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tsortNames = [sortField];\r\n\t\t\t\t\t\t\t\tsortOrder = [colOrder];\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tnewSortObj.sortName = sortNames.join(\",\");\r\n\t\t\t\t\t\tnewSortObj.sortOrder = sortOrder.join(\",\");\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (this.trigger(\"onBeforeSortColumn\", newSortObj.sortName,\r\n\t\t\t\t\t\t\tnewSortObj.sortOrder) == false) {\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\t\t\t\t\t$.extend(opts, newSortObj);\r\n\t\t\t\t\tvar dc = gridData.dc;\r\n\t\t\t\t\tvar _97 = dc.header1.add(dc.header2);\r\n\t\t\t\t\t_97\r\n\t\t\t\t\t\t\t.find(\"div.datagrid-cell\")\r\n\t\t\t\t\t\t\t.removeClass(\"datagrid-sort-asc datagrid-sort-desc\");\r\n\t\t\t\t\tfor (var i = 0; i < sortNames.length; i++) {\r\n\t\t\t\t\t\tvar col = this.getColumnOption(sortNames[i]);\r\n\t\t\t\t\t\t_97.find(\"div.\" + col.cellClass)\r\n\t\t\t\t\t\t\t\t.addClass(\"datagrid-sort-\" + sortOrder[i]);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (opts.remoteSort) {\r\n\t\t\t\t\t\tthis.load();\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tthis.loadData($(target).datagrid(\"getData\"));\r\n\t\t\t\t\t}\r\n\t\t\t\t\tthis.trigger(\"onSortColumn\", opts.sortName, opts.sortOrder)\r\n\r\n\t\t\t\t},\r\n\t\t\t\trenderGridWarp : function() {\r\n\t\t\t\t\tvar gridData = $.data(this.element, \"datagrid\");\r\n\t\t\t\t\tvar panel = gridData.panel;\r\n\t\t\t\t\tvar options = gridData.options;\r\n\t\t\t\t\tvar dc = gridData.dc;\r\n\t\t\t\t\tvar headers = dc.header1.add(dc.header2);\r\n\t\t\t\t\tvar _self = this;\r\n\t\t\t\t\theaders.unbind(\".datagrid\");\r\n\t\t\t\t\tfor (var key in options.headerEvents) {\r\n\t\t\t\t\t\theaders.bind(key + \".datagrid\",\r\n\t\t\t\t\t\t\t\toptions.headerEvents[key]);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tvar headerTd = headers.find(\"div.datagrid-cell\");\r\n\t\t\t\t\tvar resizeHandle = options.resizeHandle == \"right\"\r\n\t\t\t\t\t\t\t? \"e\"\r\n\t\t\t\t\t\t\t: (options.resizeHandle == \"left\" ? \"w\" : \"e,w\");\r\n\t\t\t\t\theaderTd.each(function() {\r\n\t\t\t\t\t\t$(this).resizable({\r\n\t\t\t\t\t\t\thandles : resizeHandle,\r\n\t\t\t\t\t\t\tdisabled : ($(this).attr(\"resizable\") ? $(this)\r\n\t\t\t\t\t\t\t\t\t.attr(\"resizable\") == \"false\" : false),\r\n\t\t\t\t\t\t\tminWidth : 25,\r\n\t\t\t\t\t\t\tstart : function(e) {\r\n\t\t\t\t\t\t\t\tgridData.resizing = true;\r\n\t\t\t\t\t\t\t\theaders.css(\"cursor\", $(\"body\").css(\"cursor\"));\r\n\t\t\t\t\t\t\t\tif (!gridData.proxy) {\r\n\t\t\t\t\t\t\t\t\tgridData.proxy = $(\"<div class=\\\"datagrid-resize-proxy\\\"></div>\")\r\n\t\t\t\t\t\t\t\t\t\t\t.appendTo(dc.view);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tgridData.proxy.css({\r\n\t\t\t\t\t\t\t\t\tleft : e.pageX - $(panel).offset().left - 1,\r\n\t\t\t\t\t\t\t\t\tdisplay : \"none\"\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\tsetTimeout(function() {\r\n\t\t\t\t\t\t\t\t\t\t\tif (gridData.proxy) {\r\n\t\t\t\t\t\t\t\t\t\t\t\tgridData.proxy.show();\r\n\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t}, 500);\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\tresize : function(e) {\r\n\t\t\t\t\t\t\t\tgridData.proxy.css({\r\n\t\t\t\t\t\t\t\t\tleft : e.pageX - $(panel).offset().left - 1,\r\n\t\t\t\t\t\t\t\t\tdisplay : \"block\"\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\tstop : function(e) {\r\n\t\t\t\t\t\t\t\theaders.css(\"cursor\", \"\");\r\n\t\t\t\t\t\t\t\t$(this).css(\"height\", \"\");\r\n\t\t\t\t\t\t\t\tvar field = $(this).parent().attr(\"field\");\r\n\t\t\t\t\t\t\t\tvar col = _self.getColumnOption(field);\r\n\t\t\t\t\t\t\t\tcol.width = $(this)._outerWidth();\r\n\t\t\t\t\t\t\t\tcol.boxWidth = col.width - col.deltaWidth;\r\n\t\t\t\t\t\t\t\tcol.auto = undefined;\r\n\t\t\t\t\t\t\t\t$(this).css(\"width\", \"\");\r\n\t\t\t\t\t\t\t\t_self.fixColumnSize(field);\r\n\t\t\t\t\t\t\t\tgridData.proxy.remove();\r\n\t\t\t\t\t\t\t\tgridData.proxy = null;\r\n\t\t\t\t\t\t\t\tif ($(this)\r\n\t\t\t\t\t\t\t\t\t\t.parents(\"div:first.datagrid-header\")\r\n\t\t\t\t\t\t\t\t\t\t.parent().hasClass(\"datagrid-view1\")) {\r\n\t\t\t\t\t\t\t\t\t_self.setViewSize();\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t_self.fitColumns();\r\n\t\t\t\t\t\t\t\t_self.trigger(\"onResizeColumn\", field,\r\n\t\t\t\t\t\t\t\t\t\tcol.width);\r\n\r\n\t\t\t\t\t\t\t\tsetTimeout(function() {\r\n\t\t\t\t\t\t\t\t\t\t\tgridData.resizing = false;\r\n\t\t\t\t\t\t\t\t\t\t}, 0);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t});\r\n\t\t\t\t\tvar bb = dc.body1.add(dc.body2);\r\n\t\t\t\t\tbb.unbind();\r\n\t\t\t\t\tfor (var key in options.rowEvents) {\r\n\t\t\t\t\t\tbb.bind(key, options.rowEvents[key]);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tdc.body1.bind(\"mousewheel DOMMouseScroll\", function(e) {\r\n\t\t\t\t\t\t\t\te.preventDefault();\r\n\t\t\t\t\t\t\t\tvar e1 = e.originalEvent || window.event;\r\n\t\t\t\t\t\t\t\tvar wheelDelta = e1.wheelDelta || e1.detail\r\n\t\t\t\t\t\t\t\t\t\t* (-1);\r\n\t\t\t\t\t\t\t\tif (\"deltaY\" in e1) {\r\n\t\t\t\t\t\t\t\t\twheelDelta = e1.deltaY * -1;\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tvar dg = $(e.target)\r\n\t\t\t\t\t\t\t\t\t\t.closest(\"div.datagrid-view\")\r\n\t\t\t\t\t\t\t\t\t\t.children(\".datagrid-f\");\r\n\t\t\t\t\t\t\t\tvar dc = dg.data(\"datagrid\").dc;\r\n\t\t\t\t\t\t\t\tdc.body2.scrollTop(dc.body2.scrollTop()\r\n\t\t\t\t\t\t\t\t\t\t- wheelDelta);\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\tdc.body2.bind(\"scroll\", function() {\r\n\t\t\t\t\t\tvar b1 = dc.view1.children(\"div.datagrid-body\");\r\n\t\t\t\t\t\tb1.scrollTop($(this).scrollTop());\r\n\t\t\t\t\t\tvar c1 = dc.body1.children(\":first\");\r\n\t\t\t\t\t\tvar c2 = dc.body2.children(\":first\");\r\n\t\t\t\t\t\tif (c1.length && c2.length) {\r\n\t\t\t\t\t\t\tvar _80 = c1.offset().top;\r\n\t\t\t\t\t\t\tvar _81 = c2.offset().top;\r\n\t\t\t\t\t\t\tif (_80 != _81) {\r\n\t\t\t\t\t\t\t\tb1.scrollTop(b1.scrollTop() + _80 - _81);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tdc.view2\r\n\t\t\t\t\t\t\t\t.children(\"div.datagrid-header,div.datagrid-footer\")\r\n\t\t\t\t\t\t\t\t._scrollLeft($(this)._scrollLeft());\r\n\t\t\t\t\t\tdc.body2.children(\"table.datagrid-btable-frozen\").css(\r\n\t\t\t\t\t\t\t\t\"left\", -$(this)._scrollLeft());\r\n\t\t\t\t\t});\r\n\t\t\t\t},\r\n\r\n\t\t\t\tfixRowHeight : function(rowIndex, fixRowBody) {\r\n\t\t\t\t\tvar target = this.element;\r\n\t\t\t\t\tvar rows = $.data(target, \"datagrid\").data.rows;\r\n\t\t\t\t\tvar opts = $.data(target, \"datagrid\").options;\r\n\t\t\t\t\tvar dc = $.data(target, \"datagrid\").dc;\r\n\t\t\t\t\tif (!dc.body1.is(\":empty\")\r\n\t\t\t\t\t\t\t&& (!opts.nowrap || opts.autoRowHeight || fixRowBody)) {\r\n\t\t\t\t\t\tif (rowIndex != undefined) {\r\n\t\t\t\t\t\t\tvar tr1 = opts.finder.getTr(target, rowIndex,\r\n\t\t\t\t\t\t\t\t\t\"body\", 1);\r\n\t\t\t\t\t\t\tvar tr2 = opts.finder.getTr(target, rowIndex,\r\n\t\t\t\t\t\t\t\t\t\"body\", 2);\r\n\t\t\t\t\t\t\tsetRowHeight(tr1, tr2);\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tvar tr1 = opts.finder\r\n\t\t\t\t\t\t\t\t\t.getTr(target, 0, \"allbody\", 1);\r\n\t\t\t\t\t\t\tvar tr2 = opts.finder\r\n\t\t\t\t\t\t\t\t\t.getTr(target, 0, \"allbody\", 2);\r\n\t\t\t\t\t\t\tsetRowHeight(tr1, tr2);\r\n\t\t\t\t\t\t\tif (opts.showFooter) {\r\n\t\t\t\t\t\t\t\tvar tr1 = opts.finder.getTr(target, 0,\r\n\t\t\t\t\t\t\t\t\t\t\"allfooter\", 1);\r\n\t\t\t\t\t\t\t\tvar tr2 = opts.finder.getTr(target, 0,\r\n\t\t\t\t\t\t\t\t\t\t\"allfooter\", 2);\r\n\t\t\t\t\t\t\t\tsetRowHeight(tr1, tr2);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tthis.setViewSize();\r\n\t\t\t\t\tif (opts.height == \"auto\") {\r\n\t\t\t\t\t\tvar gridWarp = dc.body1.parent();\r\n\t\t\t\t\t\tvar body2 = dc.body2;\r\n\t\t\t\t\t\tvar body2Size = getBodySize(body2);\r\n\t\t\t\t\t\tvar bodyHeight = body2Size.height;\r\n\t\t\t\t\t\tif (body2Size.width > body2.width()) {\r\n\t\t\t\t\t\t\tbodyHeight += 18;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tbodyHeight -= parseInt(body2.css(\"marginTop\")) || 0;\r\n\t\t\t\t\t\tgridWarp.height(bodyHeight);\r\n\t\t\t\t\t\tbody2.height(bodyHeight);\r\n\t\t\t\t\t\tdc.view.height(dc.view2.height());\r\n\t\t\t\t\t}\r\n\t\t\t\t\tdc.body2.triggerHandler(\"scroll\");\r\n\t\t\t\t\tfunction setRowHeight(tr1, tr2) {\r\n\t\t\t\t\t\tfor (var i = 0; i < tr2.length; i++) {\r\n\t\t\t\t\t\t\tvar tr1 = $(tr1[i]);\r\n\t\t\t\t\t\t\tvar tr2 = $(tr2[i]);\r\n\t\t\t\t\t\t\ttr1.css(\"height\", \"\");\r\n\t\t\t\t\t\t\ttr2.css(\"height\", \"\");\r\n\t\t\t\t\t\t\tvar height = Math.max(tr1.height(), tr2.height());\r\n\t\t\t\t\t\t\ttr1.css(\"height\", height);\r\n\t\t\t\t\t\t\ttr2.css(\"height\", height);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t};\r\n\t\t\t\t\tfunction getBodySize(cc) {\r\n\t\t\t\t\t\tvar width = 0;\r\n\t\t\t\t\t\tvar height = 0;\r\n\t\t\t\t\t\t$(cc).children().each(function() {\r\n\t\t\t\t\t\t\t\t\tvar c = $(this);\r\n\t\t\t\t\t\t\t\t\tif (c.is(\":visible\")) {\r\n\t\t\t\t\t\t\t\t\t\theight += c._outerHeight();\r\n\t\t\t\t\t\t\t\t\t\tif (width < c._outerWidth()) {\r\n\t\t\t\t\t\t\t\t\t\t\twidth = c._outerWidth();\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\treturn {\r\n\t\t\t\t\t\t\twidth : width,\r\n\t\t\t\t\t\t\theight : height\r\n\t\t\t\t\t\t};\r\n\t\t\t\t\t};\r\n\t\t\t\t},\r\n\r\n\t\t\t\tgetColumnOption : function(field) {\r\n\t\t\t\t\tfunction findCol(_cd) {\r\n\t\t\t\t\t\tif (_cd) {\r\n\t\t\t\t\t\t\tfor (var i = 0; i < _cd.length; i++) {\r\n\t\t\t\t\t\t\t\tvar cc = _cd[i];\r\n\t\t\t\t\t\t\t\tfor (var j = 0; j < cc.length; j++) {\r\n\t\t\t\t\t\t\t\t\tvar c = cc[j];\r\n\t\t\t\t\t\t\t\t\tif (c.field == field) {\r\n\t\t\t\t\t\t\t\t\t\treturn c;\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\treturn null;\r\n\t\t\t\t\t};\r\n\t\t\t\t\tvar gridData = $.data(this.element, \"datagrid\").options;\r\n\t\t\t\t\tvar col = findCol(gridData.columns);\r\n\t\t\t\t\tif (!col) {\r\n\t\t\t\t\t\tcol = findCol(gridData.frozenColumns);\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn col;\r\n\t\t\t\t},\r\n\r\n\t\t\t\tsetEditorWidth : function() {\r\n\t\t\t\t\tvar target = this.element;\r\n\t\t\t\t\tvar dc = $.data(target, \"datagrid\").dc;\r\n\t\t\t\t\tdc.view.find(\"div.datagrid-editable\").each(function() {\r\n\t\t\t\t\t\t\t\tvar _c8 = $(this);\r\n\t\t\t\t\t\t\t\tvar _c9 = _c8.parent().attr(\"field\");\r\n\t\t\t\t\t\t\t\tvar col = $(target).datagrid(\"getColumnOption\",\r\n\t\t\t\t\t\t\t\t\t\t_c9);\r\n\t\t\t\t\t\t\t\t_c8._outerWidth(col.boxWidth + col.deltaWidth\r\n\t\t\t\t\t\t\t\t\t\t- 1);\r\n\t\t\t\t\t\t\t\tvar ed = $.data(this, \"datagrid.editor\");\r\n\t\t\t\t\t\t\t\tif (ed.actions.resize) {\r\n\t\t\t\t\t\t\t\t\ted.actions.resize(ed.target, _c8.width());\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t},\r\n\t\t\t\tsetCellWidth : function() {\r\n\t\t\t\t\tvar target = this.element;\r\n\t\t\t\t\tvar dc = $.data(target, \"datagrid\").dc;\r\n\t\t\t\t\tdc.view.find(\"td.datagrid-td-merged\").each(function() {\r\n\t\t\t\t\t\tvar td = $(this);\r\n\t\t\t\t\t\tvar _c5 = td.attr(\"colspan\") || 1;\r\n\t\t\t\t\t\tvar col = this.getColumnOption(td.attr(\"field\"));\r\n\t\t\t\t\t\tvar cellWidth = col.boxWidth + col.deltaWidth - 1;\r\n\t\t\t\t\t\tfor (var i = 1; i < _c5; i++) {\r\n\t\t\t\t\t\t\ttd = td.next();\r\n\t\t\t\t\t\t\tcol = this.getColumnOption(td.attr(\"field\"));\r\n\t\t\t\t\t\t\tcellWidth += col.boxWidth + col.deltaWidth;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t$(this).children(\"div.datagrid-cell\")\r\n\t\t\t\t\t\t\t\t._outerWidth(cellWidth);\r\n\t\t\t\t\t});\r\n\t\t\t\t},\r\n\r\n\t\t\t\tfixColumnSize : function(field) {\r\n\t\t\t\t\tvar _self = this;\r\n\t\t\t\t\tvar target = this.element;\r\n\t\t\t\t\tvar gridData = $.data(target, \"datagrid\");\r\n\t\t\t\t\tvar options = gridData.options;\r\n\t\t\t\t\tvar dc = gridData.dc;\r\n\t\t\t\t\tvar gridtable = dc.view\r\n\t\t\t\t\t\t\t.find(\"table.datagrid-btable,table.datagrid-ftable\");\r\n\t\t\t\t\tgridtable.css(\"table-layout\", \"fixed\");\r\n\t\t\t\t\tif (field) {\r\n\t\t\t\t\t\tfix(field);\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tvar ff = _self.getColumnFields(true).concat(_self\r\n\t\t\t\t\t\t\t\t.getColumnFields(false));\r\n\t\t\t\t\t\tfor (var i = 0; i < ff.length; i++) {\r\n\t\t\t\t\t\t\tfix(ff[i]);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tgridtable.css(\"table-layout\", \"auto\");\r\n\t\t\t\t\tthis.setCellWidth();\r\n\t\t\t\t\tthis.fixRowHeight();\r\n\t\t\t\t\tthis.setEditorWidth();\r\n\t\t\t\t\tfunction fix(field) {\r\n\t\t\t\t\t\tvar col = _self.getColumnOption(field);\r\n\t\t\t\t\t\tif (col.cellClass) {\r\n\t\t\t\t\t\t\tgridData.ss.set(\".\" + col.cellClass, col.boxWidth\r\n\t\t\t\t\t\t\t\t\t\t\t? col.boxWidth + \"px\"\r\n\t\t\t\t\t\t\t\t\t\t\t: \"auto\");\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t};\r\n\t\t\t\t},\r\n\r\n\t\t\t\tfitColumns : function() {\r\n\t\t\t\t\tvar target = this.element;\r\n\t\t\t\t\tvar gridData = $.data(target, \"datagrid\");\r\n\t\t\t\t\tvar options = gridData.options;\r\n\t\t\t\t\tvar dc = gridData.dc;\r\n\t\t\t\t\tvar _self = this;\r\n\t\t\t\t\tvar headers = dc.view2.children(\"div.datagrid-header\");\r\n\t\t\t\t\tdc.body2.css(\"overflow-x\", \"\");\r\n\t\t\t\t\t_9f();\r\n\t\t\t\t\t_a0();\r\n\t\t\t\t\tif (headers.width() >= headers.find(\"table\").width()) {\r\n\t\t\t\t\t\tdc.body2.css(\"overflow-x\", \"hidden\");\r\n\t\t\t\t\t}\r\n\t\t\t\t\tfunction _a0() {\r\n\t\t\t\t\t\tif (!options.fitColumns) {\r\n\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (!gridData.leftWidth) {\r\n\t\t\t\t\t\t\tgridData.leftWidth = 0;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tvar _a1 = 0;\r\n\t\t\t\t\t\tvar cc = [];\r\n\t\t\t\t\t\tvar _a2 = _self.getColumnFields(false);\r\n\t\t\t\t\t\tfor (var i = 0; i < _a2.length; i++) {\r\n\t\t\t\t\t\t\tvar col = _self.getColumnOption(_a2[i]);\r\n\t\t\t\t\t\t\tif (_a3(col)) {\r\n\t\t\t\t\t\t\t\t_a1 += col.width;\r\n\t\t\t\t\t\t\t\tcc.push({\r\n\t\t\t\t\t\t\t\t\t\t\tfield : col.field,\r\n\t\t\t\t\t\t\t\t\t\t\tcol : col,\r\n\t\t\t\t\t\t\t\t\t\t\taddingWidth : 0\r\n\t\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (!_a1) {\r\n\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tcc[cc.length - 1].addingWidth -= gridData.leftWidth;\r\n\t\t\t\t\t\tvar _a4 = headers.children(\"div.datagrid-header-inner\")\r\n\t\t\t\t\t\t\t\t.show();\r\n\t\t\t\t\t\tvar _a5 = headers.width()\r\n\t\t\t\t\t\t\t\t- headers.find(\"table\").width()\r\n\t\t\t\t\t\t\t\t- options.scrollbarSize + gridData.leftWidth;\r\n\t\t\t\t\t\tvar _a6 = _a5 / _a1;\r\n\t\t\t\t\t\tif (!options.showHeader) {\r\n\t\t\t\t\t\t\t_a4.hide();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tfor (var i = 0; i < cc.length; i++) {\r\n\t\t\t\t\t\t\tvar c = cc[i];\r\n\t\t\t\t\t\t\tvar _a7 = parseInt(c.col.width * _a6);\r\n\t\t\t\t\t\t\tc.addingWidth += _a7;\r\n\t\t\t\t\t\t\t_a5 -= _a7;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tcc[cc.length - 1].addingWidth += _a5;\r\n\t\t\t\t\t\tfor (var i = 0; i < cc.length; i++) {\r\n\t\t\t\t\t\t\tvar c = cc[i];\r\n\t\t\t\t\t\t\tif (c.col.boxWidth + c.addingWidth > 0) {\r\n\t\t\t\t\t\t\t\tc.col.boxWidth += c.addingWidth;\r\n\t\t\t\t\t\t\t\tc.col.width += c.addingWidth;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tgridData.leftWidth = _a5;\r\n\t\t\t\t\t\t_self.fixColumnSize();\r\n\t\t\t\t\t};\r\n\t\t\t\t\tfunction _9f() {\r\n\t\t\t\t\t\tvar _a8 = false;\r\n\t\t\t\t\t\tvar _a9 = _self.getColumnFields(true).concat(_self\r\n\t\t\t\t\t\t\t\t.getColumnFields(false));\r\n\t\t\t\t\t\t$.map(_a9, function(_aa) {\r\n\t\t\t\t\t\t\t\t\tvar col = _self.getColumnOption(_aa);\r\n\t\t\t\t\t\t\t\t\tif (String(col.width || \"\").indexOf(\"%\") >= 0) {\r\n\t\t\t\t\t\t\t\t\t\tvar _ab = $.fn.parseValue(\"width\",\r\n\t\t\t\t\t\t\t\t\t\t\t\tcol.width, dc.view,\r\n\t\t\t\t\t\t\t\t\t\t\t\toptions.scrollbarSize)\r\n\t\t\t\t\t\t\t\t\t\t\t\t- col.deltaWidth;\r\n\t\t\t\t\t\t\t\t\t\tif (_ab > 0) {\r\n\t\t\t\t\t\t\t\t\t\t\tcol.boxWidth = _ab;\r\n\t\t\t\t\t\t\t\t\t\t\t_a8 = true;\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\tif (_a8) {\r\n\t\t\t\t\t\t\t_bb(target);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t};\r\n\t\t\t\t\tfunction _a3(col) {\r\n\t\t\t\t\t\tif (String(col.width || \"\").indexOf(\"%\") >= 0) {\r\n\t\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (!col.hidden && !col.checkbox && !col.auto\r\n\t\t\t\t\t\t\t\t&& !col.fixed) {\r\n\t\t\t\t\t\t\treturn true;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t};\r\n\r\n\t\t\t\t},\r\n\t\t\t\tgetColumnFields : function(frozen) {\r\n\t\t\t\t\tvar target = this.element;\r\n\t\t\t\t\tvar gridData = $.data(target, \"datagrid\").options;\r\n\t\t\t\t\tvar columns = (frozen == true)\r\n\t\t\t\t\t\t\t? (gridData.frozenColumns || [[]])\r\n\t\t\t\t\t\t\t: gridData.columns;\r\n\t\t\t\t\tif (columns.length == 0) {\r\n\t\t\t\t\t\treturn [];\r\n\t\t\t\t\t}\r\n\t\t\t\t\tvar aa = [];\r\n\t\t\t\t\tvar colspanCount = getColspanCount();\r\n\t\t\t\t\tfor (var i = 0; i < columns.length; i++) {\r\n\t\t\t\t\t\taa[i] = new Array(colspanCount);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tfor (var i = 0; i < columns.length; i++) {\r\n\t\t\t\t\t\t$.map(columns[i], function(col) {\r\n\t\t\t\t\t\t\tvar _d6 = getColumnIndex(aa[i]);\r\n\t\t\t\t\t\t\tif (_d6 >= 0) {\r\n\t\t\t\t\t\t\t\tvar _d8 = col.field || \"\";\r\n\t\t\t\t\t\t\t\tfor (var c = 0; c < (col.colspan || 1); c++) {\r\n\t\t\t\t\t\t\t\t\tfor (var r = 0; r < (col.rowspan || 1); r++) {\r\n\t\t\t\t\t\t\t\t\t\taa[i + r][_d6] = _d8;\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t_d6++;\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn aa[aa.length - 1];\r\n\t\t\t\t\tfunction getColspanCount() {\r\n\t\t\t\t\t\tvar colspanCount = 0;\r\n\t\t\t\t\t\t$.map(columns[0], function(col) {\r\n\t\t\t\t\t\t\t\t\tcolspanCount += col.colspan || 1;\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\treturn colspanCount;\r\n\t\t\t\t\t};\r\n\t\t\t\t\tfunction getColumnIndex(a) {\r\n\t\t\t\t\t\tfor (var i = 0; i < a.length; i++) {\r\n\t\t\t\t\t\t\tif (a[i] == undefined) {\r\n\t\t\t\t\t\t\t\treturn i;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\treturn -1;\r\n\t\t\t\t\t};\r\n\t\t\t\t},\r\n\t\t\t\tloadData : function(data) {\r\n\t\t\t\t\tvar target = this.element;\r\n\t\t\t\t\tvar _dc = $.data(target, \"datagrid\");\r\n\t\t\t\t\tvar _dd = _dc.options;\r\n\t\t\t\t\tvar dc = _dc.dc;\r\n\t\t\t\t\tdata = _dd.loadFilter.call(target, data);\r\n\t\t\t\t\tdata.total = parseInt(data.total);\r\n\t\t\t\t\t_dc.data = data;\r\n\t\t\t\t\tif (data.footer) {\r\n\t\t\t\t\t\t_dc.footer = data.footer;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (!_dd.remoteSort && _dd.sortName) {\r\n\t\t\t\t\t\tvar _de = _dd.sortName.split(\",\");\r\n\t\t\t\t\t\tvar _df = _dd.sortOrder.split(\",\");\r\n\t\t\t\t\t\tdata.rows.sort(function(r1, r2) {\r\n\t\t\t\t\t\t\t\t\tvar r = 0;\r\n\t\t\t\t\t\t\t\t\tfor (var i = 0; i < _de.length; i++) {\r\n\t\t\t\t\t\t\t\t\t\tvar sn = _de[i];\r\n\t\t\t\t\t\t\t\t\t\tvar so = _df[i];\r\n\t\t\t\t\t\t\t\t\t\tvar col = getColumnOption(target, sn);\r\n\t\t\t\t\t\t\t\t\t\tvar _e0 = col.sorter || function(a, b) {\r\n\t\t\t\t\t\t\t\t\t\t\treturn a == b\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t? 0\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t: (a > b ? 1 : -1);\r\n\t\t\t\t\t\t\t\t\t\t};\r\n\t\t\t\t\t\t\t\t\t\tr = _e0(r1[sn], r2[sn])\r\n\t\t\t\t\t\t\t\t\t\t\t\t* (so == \"asc\" ? 1 : -1);\r\n\t\t\t\t\t\t\t\t\t\tif (r != 0) {\r\n\t\t\t\t\t\t\t\t\t\t\treturn r;\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\treturn r;\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (_dd.view.onBeforeRender) {\r\n\t\t\t\t\t\t_dd.view.onBeforeRender.call(_dd.view, data.rows);\r\n\t\t\t\t\t}\r\n\t\t\t\t\t_dd.view.render.call(_dd.view, dc.body2, false);\r\n\t\t\t\t\t_dd.view.render.call(_dd.view, dc.body1, true);\r\n\t\t\t\t\tif (_dd.showFooter) {\r\n\t\t\t\t\t\t_dd.view.renderFooter.call(_dd.view, dc.footer2, false);\r\n\t\t\t\t\t\t_dd.view.renderFooter.call(_dd.view, dc.footer1, true);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (_dd.view.onAfterRender) {\r\n\t\t\t\t\t\t_dd.view.onAfterRender.call(_dd.view, target);\r\n\t\t\t\t\t}\r\n\t\t\t\t\t_dc.ss.clean();\r\n\t\t\t\t\tvar pager = this.getPager();\r\n\t\t\t\t\tif (pager.length) {\r\n\t\t\t\t\t\tvar _e2 = pager.pagination(\"options\");\r\n\t\t\t\t\t\tif (_e2.total != data.total) {\r\n\t\t\t\t\t\t\tpager.pagination(\"refresh\", {\r\n\t\t\t\t\t\t\t\t\t\ttotal : data.total\r\n\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\tif (_dd.pageNumber != _e2.pageNumber) {\r\n\t\t\t\t\t\t\t\t_dd.pageNumber = _e2.pageNumber;\r\n\t\t\t\t\t\t\t\tload(target);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tthis.fixRowHeight();\r\n\t\t\t\t\tdc.body2.triggerHandler(\"scroll\");\r\n\t\t\t\t\tthis.setSelectionState();\r\n\t\t\t\t\tthis.autoSizeColumn();\r\n\t\t\t\t\t// $(target).datagrid(\"setSelectionState\");\r\n\t\t\t\t\t// $(target).datagrid(\"autoSizeColumn\");\r\n\t\t\t\t\tthis.trigger(\"onLoadSuccess\", target, data)\r\n\r\n\t\t\t\t},\r\n\t\t\t\tload : function(queryParams) {\r\n\t\t\t\t\tvar target = this.element;\r\n\t\t\t\t\tvar _self = this;\r\n\t\t\t\t\tvar opts = $.data(target, \"datagrid\").options;\r\n\t\t\t\t\tif (queryParams) {\r\n\t\t\t\t\t\topts.queryParams = queryParams;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tvar params = $.extend({}, opts.queryParams);\r\n\t\t\t\t\tif (opts.pagination) {\r\n\t\t\t\t\t\t$.extend(params, {\r\n\t\t\t\t\t\t\t\t\tpage : opts.pageNumber,\r\n\t\t\t\t\t\t\t\t\trows : opts.pageSize\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (opts.sortName) {\r\n\t\t\t\t\t\t$.extend(params, {\r\n\t\t\t\t\t\t\t\t\tsort : opts.sortName,\r\n\t\t\t\t\t\t\t\t\torder : opts.sortOrder\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (this.trigger(\"onBeforeLoad\", target, params) == false) {\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tthis.loading();\r\n\t\t\t\t\tsetTimeout(function() {\r\n\t\t\t\t\t\t\t\tloadAfter();\r\n\t\t\t\t\t\t\t}, 0);\r\n\t\t\t\t\tfunction loadAfter() {\r\n\t\t\t\t\t\tvar value = opts.loader.call(_self, params, function(\r\n\t\t\t\t\t\t\t\t\t\tdata) {\r\n\t\t\t\t\t\t\t\t\tsetTimeout(function() {\r\n\t\t\t\t\t\t\t\t\t\t\t\t_self.loaded();\r\n\t\t\t\t\t\t\t\t\t\t\t}, 0);\r\n\t\t\t\t\t\t\t\t\tloadData(data);\r\n\t\t\t\t\t\t\t\t\tsetTimeout(function() {\r\n\t\t\t\t\t\t\t\t\t\t\t\tclearEditData();\r\n\t\t\t\t\t\t\t\t\t\t\t}, 0);\r\n\t\t\t\t\t\t\t\t}, function() {\r\n\t\t\t\t\t\t\t\t\tsetTimeout(function() {\r\n\t\t\t\t\t\t\t\t\t\t\t\t_self.loaded();\r\n\t\t\t\t\t\t\t\t\t\t\t}, 0);\r\n\r\n\t\t\t\t\t\t\t\t\t_self.trigger(\"onLoadError\", target,\r\n\t\t\t\t\t\t\t\t\t\t\targuments)\r\n\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\tif (value == false) {\r\n\t\t\t\t\t\t\t_self.loaded();;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t};\r\n\t\t\t\t},\r\n\t\t\t\tclearEditData : function() {\r\n\t\t\t\t\tvar target = this.element;\r\n\t\t\t\t\tvar gridData = $.data(target, \"datagrid\");\r\n\t\t\t\t\tvar data = gridData.data;\r\n\t\t\t\t\tvar rows = data.rows;\r\n\t\t\t\t\tvar originalRows = [];\r\n\t\t\t\t\tfor (var i = 0; i < rows.length; i++) {\r\n\t\t\t\t\t\toriginalRows.push($.extend({}, rows[i]));\r\n\t\t\t\t\t}\r\n\t\t\t\t\tgridData.originalRows = originalRows;\r\n\t\t\t\t\tgridData.updatedRows = [];\r\n\t\t\t\t\tgridData.insertedRows = [];\r\n\t\t\t\t\tgridData.deletedRows = [];\r\n\r\n\t\t\t\t},\r\n\t\t\t\tcreateStyleSheet : function() {\r\n\t\t\t\t\tvar target = this.element;\r\n\t\t\t\t\tvar _b = $.data(target, \"datagrid\");\r\n\t\t\t\t\tvar _c = _b.options;\r\n\t\t\t\t\tvar _d = _b.panel;\r\n\t\t\t\t\tvar dc = _b.dc;\r\n\t\t\t\t\tvar ss = null;\r\n\t\t\t\t\tif (_c.sharedStyleSheet) {\r\n\t\t\t\t\t\tss = typeof _c.sharedStyleSheet == \"boolean\"\r\n\t\t\t\t\t\t\t\t? \"head\"\r\n\t\t\t\t\t\t\t\t: _c.sharedStyleSheet;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tss = _d.closest(\"div.datagrid-view\");\r\n\t\t\t\t\t\tif (!ss.length) {\r\n\t\t\t\t\t\t\tss = dc.view;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tvar cc = $(ss);\r\n\t\t\t\t\tvar _e = $.data(cc[0], \"ss\");\r\n\t\t\t\t\tif (!_e) {\r\n\t\t\t\t\t\t_e = $.data(cc[0], \"ss\", {\r\n\t\t\t\t\t\t\t\t\tcache : {},\r\n\t\t\t\t\t\t\t\t\tdirty : []\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn {\r\n\t\t\t\t\t\tadd : function(_f) {\r\n\t\t\t\t\t\t\tvar ss = [\"<style type=\\\"text/css\\\" appui=\\\"true\\\">\"];\r\n\t\t\t\t\t\t\tfor (var i = 0; i < _f.length; i++) {\r\n\t\t\t\t\t\t\t\t_e.cache[_f[i][0]] = {\r\n\t\t\t\t\t\t\t\t\twidth : _f[i][1]\r\n\t\t\t\t\t\t\t\t};\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tvar _10 = 0;\r\n\t\t\t\t\t\t\tfor (var s in _e.cache) {\r\n\t\t\t\t\t\t\t\tvar _11 = _e.cache[s];\r\n\t\t\t\t\t\t\t\t_11.index = _10++;\r\n\t\t\t\t\t\t\t\tss.push(s + \"{width:\" + _11.width + \"}\");\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tss.push(\"</style>\");\r\n\t\t\t\t\t\t\t$(ss.join(\"\\n\")).appendTo(cc);\r\n\t\t\t\t\t\t\tcc.children(\"style[appui]:not(:last)\").remove();\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tgetRule : function(_12) {\r\n\t\t\t\t\t\t\tvar _13 = cc.children(\"style[appui]:last\")[0];\r\n\t\t\t\t\t\t\tvar _14 = _13.styleSheet\r\n\t\t\t\t\t\t\t\t\t? _13.styleSheet\r\n\t\t\t\t\t\t\t\t\t: (_13.sheet || document.styleSheets[document.styleSheets.length\r\n\t\t\t\t\t\t\t\t\t\t\t- 1]);\r\n\t\t\t\t\t\t\tvar _15 = _14.cssRules || _14.rules;\r\n\t\t\t\t\t\t\treturn _15[_12];\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tset : function(_16, _17) {\r\n\t\t\t\t\t\t\tvar _18 = _e.cache[_16];\r\n\t\t\t\t\t\t\tif (_18) {\r\n\t\t\t\t\t\t\t\t_18.width = _17;\r\n\t\t\t\t\t\t\t\tvar _19 = this.getRule(_18.index);\r\n\t\t\t\t\t\t\t\tif (_19) {\r\n\t\t\t\t\t\t\t\t\t_19.style[\"width\"] = _17;\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tremove : function(_1a) {\r\n\t\t\t\t\t\t\tvar tmp = [];\r\n\t\t\t\t\t\t\tfor (var s in _e.cache) {\r\n\t\t\t\t\t\t\t\tif (s.indexOf(_1a) == -1) {\r\n\t\t\t\t\t\t\t\t\ttmp.push([s, _e.cache[s].width]);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t_e.cache = {};\r\n\t\t\t\t\t\t\tthis.add(tmp);\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tdirty : function(_1b) {\r\n\t\t\t\t\t\t\tif (_1b) {\r\n\t\t\t\t\t\t\t\t_e.dirty.push(_1b);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tclean : function() {\r\n\t\t\t\t\t\t\tfor (var i = 0; i < _e.dirty.length; i++) {\r\n\t\t\t\t\t\t\t\tthis.remove(_e.dirty[i]);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t_e.dirty = [];\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t};\r\n\r\n\t\t\t\t},\r\n\t\t\t\trender : function() {\r\n\t\t\t\t\tvar wrapdata = $.data(this.element, \"datagrid\");\r\n\t\t\t\t\tvar opts = wrapdata.options;\r\n\t\t\t\t\tvar _self = this;\r\n\t\t\t\t\tvar dc = wrapdata.dc;\r\n\t\t\t\t\tvar gridPanel = wrapdata.panel;\r\n\t\t\t\t\tvar gridEl = this.element;\r\n\t\t\t\t\twrapdata.ss = this.createStyleSheet();\r\n\t\t\t\t\tgridPanel.panel($.extend({}, opts, {\r\n\t\t\t\t\t\t\t\tid : null,\r\n\t\t\t\t\t\t\t\tdoSize : false,\r\n\t\t\t\t\t\t\t\tonResize : function(_5f, _60) {\r\n\t\t\t\t\t\t\t\t\tsetTimeout(function() {\r\n\t\t\t\t\t\t\t\t\t\t\t\tif ($.data(gridEl, \"datagrid\")) {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t_self.setViewSize();\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t_self.fitColumns();\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t_self\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t.trigger(\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\"onResize\",\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tgridPanel,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t_5f, _60)\r\n\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t}, 0);\r\n\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\tonExpand : function() {\r\n\t\t\t\t\t\t\t\t\tfixRowHeight(gridEl);\r\n\t\t\t\t\t\t\t\t\t_self.trigger(\"onExpand\", gridPanel);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}));\r\n\t\t\t\t\twrapdata.rowIdPrefix = \"datagrid-row-r\" + (++_1);\r\n\t\t\t\t\twrapdata.cellClassPrefix = \"datagrid-cell-c\" + _1;\r\n\t\t\t\t\tcreateColumnHeader(dc.header1, opts.frozenColumns, true);\r\n\t\t\t\t\tcreateColumnHeader(dc.header2, opts.columns, false);\r\n\t\t\t\t\tcreateColumnCheckBox();\r\n\t\t\t\t\tdc.header1.add(dc.header2).css(\"display\",\r\n\t\t\t\t\t\t\topts.showHeader ? \"block\" : \"none\");\r\n\t\t\t\t\tdc.footer1.add(dc.footer2).css(\"display\",\r\n\t\t\t\t\t\t\topts.showFooter ? \"block\" : \"none\");\r\n\t\t\t\t\tif (opts.toolbar) {\r\n\t\t\t\t\t\tif ($.isArray(opts.toolbar)) {\r\n\t\t\t\t\t\t\t$(\"div.datagrid-toolbar\", gridPanel).remove();\r\n\t\t\t\t\t\t\tvar tb = $(\"<div class=\\\"datagrid-toolbar\\\"><table cellspacing=\\\"0\\\" cellpadding=\\\"0\\\"><tr></tr></table></div>\")\r\n\t\t\t\t\t\t\t\t\t.prependTo(gridPanel);\r\n\t\t\t\t\t\t\tvar tr = tb.find(\"tr\");\r\n\t\t\t\t\t\t\tfor (var i = 0; i < opts.toolbar.length; i++) {\r\n\t\t\t\t\t\t\t\tvar btn = opts.toolbar[i];\r\n\t\t\t\t\t\t\t\tif (btn == \"-\") {\r\n\t\t\t\t\t\t\t\t\t$(\"<td><div class=\\\"datagrid-btn-separator\\\"></div></td>\")\r\n\t\t\t\t\t\t\t\t\t\t\t.appendTo(tr);\r\n\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\tvar td = $(\"<td></td>\").appendTo(tr);\r\n\t\t\t\t\t\t\t\t\tvar btn = $(\"<a href=\\\"javascript:void(0)\\\"></a>\")\r\n\t\t\t\t\t\t\t\t\t\t\t.appendTo(td);\r\n\t\t\t\t\t\t\t\t\tbtn[0].onclick = eval(btn.handler\r\n\t\t\t\t\t\t\t\t\t\t\t|| function() {\r\n\t\t\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t\tbtn.linkbutton($.extend({}, btn, {\r\n\t\t\t\t\t\t\t\t\t\t\t\tplain : true\r\n\t\t\t\t\t\t\t\t\t\t\t}));\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t$(opts.toolbar).addClass(\"datagrid-toolbar\")\r\n\t\t\t\t\t\t\t\t\t.prependTo(gridPanel);\r\n\t\t\t\t\t\t\t$(opts.toolbar).show();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\t$(\"div.datagrid-toolbar\", gridPanel).remove();\r\n\t\t\t\t\t}\r\n\t\t\t\t\t$(\"div.datagrid-pager\", gridPanel).remove();\r\n\t\t\t\t\tif (opts.pagination) {\r\n\t\t\t\t\t\tvar pagerDom = $(\"<div class=\\\"datagrid-pager\\\"></div>\");\r\n\t\t\t\t\t\tif (opts.pagePosition == \"bottom\") {\r\n\t\t\t\t\t\t\tpagerDom.appendTo(gridPanel);\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tif (opts.pagePosition == \"top\") {\r\n\t\t\t\t\t\t\t\tpagerDom.addClass(\"datagrid-pager-top\")\r\n\t\t\t\t\t\t\t\t\t\t.prependTo(gridPanel);\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tvar pagertop = $(\"<div class=\\\"datagrid-pager datagrid-pager-top\\\"></div>\")\r\n\t\t\t\t\t\t\t\t\t\t.prependTo(gridPanel);\r\n\t\t\t\t\t\t\t\tpagerDom.appendTo(gridPanel);\r\n\t\t\t\t\t\t\t\tpagerDom = pagerDom.add(pagertop);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tpagerDom.pagination({\r\n\t\t\t\t\t\t\t\t\ttotal : (opts.pageNumber * opts.pageSize),\r\n\t\t\t\t\t\t\t\t\tpageNumber : opts.pageNumber,\r\n\t\t\t\t\t\t\t\t\tpageSize : opts.pageSize,\r\n\t\t\t\t\t\t\t\t\tpageList : opts.pageList,\r\n\t\t\t\t\t\t\t\t\tonSelectPage : function(pageNumber,\r\n\t\t\t\t\t\t\t\t\t\t\tpageSize) {\r\n\t\t\t\t\t\t\t\t\t\topts.pageNumber = pageNumber;\r\n\t\t\t\t\t\t\t\t\t\topts.pageSize = pageSize;\r\n\t\t\t\t\t\t\t\t\t\tpagerDom.pagination(\"refresh\", {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tpageNumber : pageNumber,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tpageSize : pageSize\r\n\t\t\t\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t\t\tload();\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\topts.pageSize = pagerDom.pagination(\"options\").pageSize;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tfunction createColumnHeader(headerDom, columns,\r\n\t\t\t\t\t\t\tisShowRownumbers) {\r\n\t\t\t\t\t\tif (!columns) {\r\n\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t$(headerDom).show();\r\n\t\t\t\t\t\t$(headerDom).empty();\r\n\t\t\t\t\t\tvar sortFields = [];\r\n\t\t\t\t\t\tvar orderFields = [];\r\n\t\t\t\t\t\tif (opts.sortName) {\r\n\t\t\t\t\t\t\tsortFields = opts.sortName.split(\",\");\r\n\t\t\t\t\t\t\torderFields = opts.sortOrder.split(\",\");\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tvar t = $(\"<table class=\\\"datagrid-htable\\\" border=\\\"0\\\" cellspacing=\\\"0\\\" cellpadding=\\\"0\\\"><tbody></tbody></table>\")\r\n\t\t\t\t\t\t\t\t.appendTo(headerDom);\r\n\t\t\t\t\t\tfor (var i = 0; i < columns.length; i++) {\r\n\t\t\t\t\t\t\tvar tr = $(\"<tr class=\\\"datagrid-header-row\\\"></tr>\")\r\n\t\t\t\t\t\t\t\t\t.appendTo($(\"tbody\", t));\r\n\t\t\t\t\t\t\tvar subCols = columns[i];\r\n\t\t\t\t\t\t\tfor (var j = 0; j < subCols.length; j++) {\r\n\t\t\t\t\t\t\t\tvar col = subCols[j];\r\n\t\t\t\t\t\t\t\tvar headerHtml = \"\";\r\n\t\t\t\t\t\t\t\tif (col.rowspan) {\r\n\t\t\t\t\t\t\t\t\theaderHtml += \"rowspan=\\\"\" + col.rowspan\r\n\t\t\t\t\t\t\t\t\t\t\t+ \"\\\" \";\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tif (col.colspan) {\r\n\t\t\t\t\t\t\t\t\theaderHtml += \"colspan=\\\"\" + col.colspan\r\n\t\t\t\t\t\t\t\t\t\t\t+ \"\\\" \";\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tvar td = $(\"<td \" + headerHtml + \"></td>\")\r\n\t\t\t\t\t\t\t\t\t\t.appendTo(tr);\r\n\t\t\t\t\t\t\t\tif (col.checkbox) {\r\n\t\t\t\t\t\t\t\t\ttd.attr(\"field\", col.field);\r\n\t\t\t\t\t\t\t\t\t$(\"<div class=\\\"datagrid-header-check\\\"></div>\")\r\n\t\t\t\t\t\t\t\t\t\t\t.html(\"<input type=\\\"checkbox\\\"/>\")\r\n\t\t\t\t\t\t\t\t\t\t\t.appendTo(td);\r\n\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\tif (col.field) {\r\n\t\t\t\t\t\t\t\t\t\ttd.attr(\"field\", col.field);\r\n\t\t\t\t\t\t\t\t\t\ttd\r\n\t\t\t\t\t\t\t\t\t\t\t\t.append(\"<div class=\\\"datagrid-cell\\\"><span></span><span class=\\\"datagrid-sort-icon\\\"></span></div>\");\r\n\t\t\t\t\t\t\t\t\t\t$(\"span\", td).html(col.title);\r\n\t\t\t\t\t\t\t\t\t\t$(\"span.datagrid-sort-icon\", td)\r\n\t\t\t\t\t\t\t\t\t\t\t\t.html(\"&nbsp;\");\r\n\t\t\t\t\t\t\t\t\t\tvar headerCell = td\r\n\t\t\t\t\t\t\t\t\t\t\t\t.find(\"div.datagrid-cell\");\r\n\t\t\t\t\t\t\t\t\t\tvar pos = findArrayIndex(sortFields,\r\n\t\t\t\t\t\t\t\t\t\t\t\tcol.field);\r\n\t\t\t\t\t\t\t\t\t\tif (pos >= 0) {\r\n\t\t\t\t\t\t\t\t\t\t\theaderCell\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t.addClass(\"datagrid-sort-\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t+ orderFields[pos]);\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\tif (col.resizable == false) {\r\n\t\t\t\t\t\t\t\t\t\t\theaderCell.attr(\"resizable\",\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\"false\");\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\tif (col.width) {\r\n\t\t\t\t\t\t\t\t\t\t\tvar colWidth = $.fn\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t.parseValue(\"width\",\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tcol.width, dc.view,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\topts.scrollbarSize);\r\n\t\t\t\t\t\t\t\t\t\t\theaderCell\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t._outerWidth(colWidth - 1);\r\n\t\t\t\t\t\t\t\t\t\t\tcol.boxWidth = parseInt(headerCell[0].style.width);\r\n\t\t\t\t\t\t\t\t\t\t\tcol.deltaWidth = colWidth\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t- col.boxWidth;\r\n\t\t\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\t\t\tcol.auto = true;\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\theaderCell\r\n\t\t\t\t\t\t\t\t\t\t\t\t.css(\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\"text-align\",\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t(col.halign\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t|| col.align || \"\"));\r\n\t\t\t\t\t\t\t\t\t\tcol.cellClass = wrapdata.cellClassPrefix\r\n\t\t\t\t\t\t\t\t\t\t\t\t+ \"-\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t+ col.field.replace(/[\\.|\\s]/g,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\"-\");\r\n\t\t\t\t\t\t\t\t\t\theaderCell.addClass(col.cellClass).css(\r\n\t\t\t\t\t\t\t\t\t\t\t\t\"width\", \"\");\r\n\t\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\t\t$(\"<div class=\\\"datagrid-cell-group\\\"></div>\")\r\n\t\t\t\t\t\t\t\t\t\t\t\t.html(col.title).appendTo(td);\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tif (col.hidden) {\r\n\t\t\t\t\t\t\t\t\ttd.hide();\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (isShowRownumbers && opts.rownumbers) {\r\n\t\t\t\t\t\t\tvar td = $(\"<td rowspan=\\\"\"\r\n\t\t\t\t\t\t\t\t\t+ opts.frozenColumns.length\r\n\t\t\t\t\t\t\t\t\t+ \"\\\"><div class=\\\"datagrid-header-rownumber\\\"></div></td>\");\r\n\t\t\t\t\t\t\tif ($(\"tr\", t).length == 0) {\r\n\t\t\t\t\t\t\t\ttd\r\n\t\t\t\t\t\t\t\t\t\t.wrap(\"<tr class=\\\"datagrid-header-row\\\"></tr>\")\r\n\t\t\t\t\t\t\t\t\t\t.parent().appendTo($(\"tbody\", t));\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\ttd.prependTo($(\"tr:first\", t));\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t};\r\n\t\t\t\t\tfunction createColumnCheckBox() {\r\n\t\t\t\t\t\tvar checkBoxColumns = [];\r\n\t\t\t\t\t\tvar columnFields = _self.getColumnFields(true)\r\n\t\t\t\t\t\t\t\t.concat(_self.getColumnFields(gridEl));\r\n\t\t\t\t\t\tfor (var i = 0; i < columnFields.length; i++) {\r\n\t\t\t\t\t\t\tvar col = _self.getColumnOption(columnFields[i]);\r\n\t\t\t\t\t\t\tif (col && !col.checkbox) {\r\n\t\t\t\t\t\t\t\tcheckBoxColumns.push([\r\n\t\t\t\t\t\t\t\t\t\t\".\" + col.cellClass,\r\n\t\t\t\t\t\t\t\t\t\tcol.boxWidth\r\n\t\t\t\t\t\t\t\t\t\t\t\t? col.boxWidth + \"px\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t: \"auto\"]);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\twrapdata.ss.add(checkBoxColumns);\r\n\t\t\t\t\t\twrapdata.ss.dirty(wrapdata.cellSelectorPrefix);\r\n\t\t\t\t\t\twrapdata.cellSelectorPrefix = \".\"\r\n\t\t\t\t\t\t\t\t+ wrapdata.cellClassPrefix;\r\n\t\t\t\t\t};\r\n\t\t\t\t},\r\n\t\t\t\twrapGrid : function(rownumbers) {\r\n\t\t\t\t\tvar $this = $(this.element)\r\n\t\t\t\t\tfunction getColumns() {\r\n\t\t\t\t\t\tvar frozenColumns = [];\r\n\t\t\t\t\t\tvar columns = [];\r\n\r\n\t\t\t\t\t\t$this.children(\"thead\").each(function() {\r\n\t\t\t\t\t\t\tvar opt = $this.parseOptions(this, [{\r\n\t\t\t\t\t\t\t\t\t\t\t\tfrozen : \"boolean\"\r\n\t\t\t\t\t\t\t\t\t\t\t}]);\r\n\t\t\t\t\t\t\t$(this).find(\"tr\").each(function() {\r\n\t\t\t\t\t\t\t\tvar column = [];\r\n\t\t\t\t\t\t\t\t$(this).find(\"th\").each(function() {\r\n\t\t\t\t\t\t\t\t\tvar th = $(this);\r\n\t\t\t\t\t\t\t\t\tvar col = $.extend({}, th.parseOptions(\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tthis, [\"field\", \"align\",\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\"halign\", \"order\",\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\"width\", {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tsortable : \"boolean\",\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tcheckbox : \"boolean\",\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tresizable : \"boolean\",\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tfixed : \"boolean\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}, {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\trowspan : \"number\",\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tcolspan : \"number\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}]), {\r\n\t\t\t\t\t\t\t\t\t\t\t\ttitle : (th.html() || undefined),\r\n\t\t\t\t\t\t\t\t\t\t\t\thidden : (th.attr(\"hidden\")\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t? true\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t: undefined),\r\n\t\t\t\t\t\t\t\t\t\t\t\tformatter : (th\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t.attr(\"formatter\")\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t? eval(th\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t.attr(\"formatter\"))\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t: undefined),\r\n\t\t\t\t\t\t\t\t\t\t\t\tstyler : (th.attr(\"styler\")\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t? eval(th\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t.attr(\"styler\"))\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t: undefined),\r\n\t\t\t\t\t\t\t\t\t\t\t\tsorter : (th.attr(\"sorter\")\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t? eval(th\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t.attr(\"sorter\"))\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t: undefined)\r\n\t\t\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t\tif (col.width\r\n\t\t\t\t\t\t\t\t\t\t\t&& String(col.width).indexOf(\"%\") == -1) {\r\n\t\t\t\t\t\t\t\t\t\tcol.width = parseInt(col.width);\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\tif (th.attr(\"editor\")) {\r\n\t\t\t\t\t\t\t\t\t\tvar s = $.trim(th.attr(\"editor\"));\r\n\t\t\t\t\t\t\t\t\t\tif (s.substr(0, 1) == \"{\") {\r\n\t\t\t\t\t\t\t\t\t\t\tcol.editor = eval(\"(\" + s + \")\");\r\n\t\t\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\t\t\tcol.editor = s;\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\tcolumn.push(col);\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\topt.frozen\r\n\t\t\t\t\t\t\t\t\t\t? frozenColumns.push(column)\r\n\t\t\t\t\t\t\t\t\t\t: columns.push(column);\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\treturn [frozenColumns, columns];\r\n\t\t\t\t\t};\r\n\t\t\t\t\tvar wrap = $(\"<div class=\\\"datagrid-wrap\\\">\"\r\n\t\t\t\t\t\t\t+ \"<div class=\\\"datagrid-view\\\">\"\r\n\t\t\t\t\t\t\t+ \"<div class=\\\"datagrid-view1\\\">\"\r\n\t\t\t\t\t\t\t+ \"<div class=\\\"datagrid-header\\\">\"\r\n\t\t\t\t\t\t\t+ \"<div class=\\\"datagrid-header-inner\\\"></div>\"\r\n\t\t\t\t\t\t\t+ \"</div>\" + \"<div class=\\\"datagrid-body\\\">\"\r\n\t\t\t\t\t\t\t+ \"<div class=\\\"datagrid-body-inner\\\"></div>\"\r\n\t\t\t\t\t\t\t+ \"</div>\" + \"<div class=\\\"datagrid-footer\\\">\"\r\n\t\t\t\t\t\t\t+ \"<div class=\\\"datagrid-footer-inner\\\"></div>\"\r\n\t\t\t\t\t\t\t+ \"</div>\" + \"</div>\"\r\n\t\t\t\t\t\t\t+ \"<div class=\\\"datagrid-view2\\\">\"\r\n\t\t\t\t\t\t\t+ \"<div class=\\\"datagrid-header\\\">\"\r\n\t\t\t\t\t\t\t+ \"<div class=\\\"datagrid-header-inner\\\"></div>\"\r\n\t\t\t\t\t\t\t+ \"</div>\" + \"<div class=\\\"datagrid-body\\\"></div>\"\r\n\t\t\t\t\t\t\t+ \"<div class=\\\"datagrid-footer\\\">\"\r\n\t\t\t\t\t\t\t+ \"<div class=\\\"datagrid-footer-inner\\\"></div>\"\r\n\t\t\t\t\t\t\t+ \"</div>\" + \"</div>\" + \"</div>\" + \"</div>\")\r\n\t\t\t\t\t\t\t.insertAfter($this);\r\n\t\t\t\t\twrap.panel({\r\n\t\t\t\t\t\t\t\tdoSize : false,\r\n\t\t\t\t\t\t\t\tcls : \"datagrid\"\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t$($this).addClass(\"datagrid-f\").hide()\r\n\t\t\t\t\t\t\t.appendTo(wrap.children(\"div.datagrid-view\"));\r\n\t\t\t\t\tvar columns = getColumns();\r\n\t\t\t\t\tvar gridViewWrap = wrap.children(\"div.datagrid-view\");\r\n\t\t\t\t\tvar gridViewWrap1 = gridViewWrap\r\n\t\t\t\t\t\t\t.children(\"div.datagrid-view1\");\r\n\t\t\t\t\tvar gridViewWrap2 = gridViewWrap\r\n\t\t\t\t\t\t\t.children(\"div.datagrid-view2\");\r\n\t\t\t\t\treturn {\r\n\t\t\t\t\t\tpanel : wrap,\r\n\t\t\t\t\t\tfrozenColumns : columns[0],\r\n\t\t\t\t\t\tcolumns : columns[1],\r\n\t\t\t\t\t\tdc : {\r\n\t\t\t\t\t\t\tview : gridViewWrap,\r\n\t\t\t\t\t\t\tview1 : gridViewWrap1,\r\n\t\t\t\t\t\t\tview2 : gridViewWrap2,\r\n\t\t\t\t\t\t\theader1 : gridViewWrap1\r\n\t\t\t\t\t\t\t\t\t.children(\"div.datagrid-header\")\r\n\t\t\t\t\t\t\t\t\t.children(\"div.datagrid-header-inner\"),\r\n\t\t\t\t\t\t\theader2 : gridViewWrap2\r\n\t\t\t\t\t\t\t\t\t.children(\"div.datagrid-header\")\r\n\t\t\t\t\t\t\t\t\t.children(\"div.datagrid-header-inner\"),\r\n\t\t\t\t\t\t\tbody1 : gridViewWrap1.children(\"div.datagrid-body\")\r\n\t\t\t\t\t\t\t\t\t.children(\"div.datagrid-body-inner\"),\r\n\t\t\t\t\t\t\tbody2 : gridViewWrap2.children(\"div.datagrid-body\"),\r\n\t\t\t\t\t\t\tfooter1 : gridViewWrap1\r\n\t\t\t\t\t\t\t\t\t.children(\"div.datagrid-footer\")\r\n\t\t\t\t\t\t\t\t\t.children(\"div.datagrid-footer-inner\"),\r\n\t\t\t\t\t\t\tfooter2 : gridViewWrap2\r\n\t\t\t\t\t\t\t\t\t.children(\"div.datagrid-footer\")\r\n\t\t\t\t\t\t\t\t\t.children(\"div.datagrid-footer-inner\")\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t};\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t});\r\n\r\n\t\t\tvar GridView = Widget.extend({\r\n\t\t\t\tinitialize : function(datagrid) {\r\n\t\t\t\t\tthis.grid = datagrid;\r\n\t\t\t\t},\r\n\r\n\t\t\t\tgetStyleValue : function(css) {\r\n\t\t\t\t\tvar _225 = \"\";\r\n\t\t\t\t\tvar _226 = \"\";\r\n\t\t\t\t\tif (typeof css == \"string\") {\r\n\t\t\t\t\t\t_226 = css;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tif (css) {\r\n\t\t\t\t\t\t\t_225 = css[\"class\"] || \"\";\r\n\t\t\t\t\t\t\t_226 = css[\"style\"] || \"\";\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn {\r\n\t\t\t\t\t\tc : _225,\r\n\t\t\t\t\t\ts : _226\r\n\t\t\t\t\t};\r\n\t\t\t\t},\r\n\t\t\t\trender : function(_1e9, _1ea) {\r\n\t\t\t\t\tvar _1eb = $.data(this.grid.element, \"datagrid\");\r\n\t\t\t\t\tvar opts = _1eb.options;\r\n\t\t\t\t\tvar rows = _1eb.data.rows;\r\n\t\t\t\t\tvar columnFields = this.grid.getColumnFields();\r\n\t\t\t\t\tif (_1ea) {\r\n\t\t\t\t\t\tif (!(opts.rownumbers || (opts.frozenColumns && opts.frozenColumns.length))) {\r\n\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tvar dataTableHtml = [\"<table class=\\\"datagrid-btable\\\" cellspacing=\\\"0\\\" cellpadding=\\\"0\\\" border=\\\"0\\\"><tbody>\"];\r\n\t\t\t\t\tfor (var i = 0; i < rows.length; i++) {\r\n\t\t\t\t\t\tvar css = opts.rowStyler ? opts.rowStyler.call(\r\n\t\t\t\t\t\t\t\tthis.grid.element, i, rows[i]) : \"\";\r\n\t\t\t\t\t\tvar _1ee = \"\";\r\n\t\t\t\t\t\tvar _1ef = \"\";\r\n\t\t\t\t\t\tif (typeof css == \"string\") {\r\n\t\t\t\t\t\t\t_1ef = css;\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tif (css) {\r\n\t\t\t\t\t\t\t\t_1ee = css[\"class\"] || \"\";\r\n\t\t\t\t\t\t\t\t_1ef = css[\"style\"] || \"\";\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tvar cls = \"class=\\\"datagrid-row \"\r\n\t\t\t\t\t\t\t\t+ (i % 2 && opts.striped\r\n\t\t\t\t\t\t\t\t\t\t? \"datagrid-row-alt \"\r\n\t\t\t\t\t\t\t\t\t\t: \" \") + _1ee + \"\\\"\";\r\n\t\t\t\t\t\tvar _1f0 = _1ef ? \"style=\\\"\" + _1ef + \"\\\"\" : \"\";\r\n\t\t\t\t\t\tvar _1f1 = _1eb.rowIdPrefix + \"-\" + (_1ea ? 1 : 2)\r\n\t\t\t\t\t\t\t\t+ \"-\" + i;\r\n\t\t\t\t\t\tdataTableHtml.push(\"<tr id=\\\"\" + _1f1\r\n\t\t\t\t\t\t\t\t+ \"\\\" datagrid-row-index=\\\"\" + i + \"\\\" \" + cls\r\n\t\t\t\t\t\t\t\t+ \" \" + _1f0 + \">\");\r\n\t\t\t\t\t\tdataTableHtml.push(this.renderRow.call(this,\r\n\t\t\t\t\t\t\t\tcolumnFields, _1ea, i, rows[i]));\r\n\t\t\t\t\t\tdataTableHtml.push(\"</tr>\");\r\n\t\t\t\t\t}\r\n\t\t\t\t\tdataTableHtml.push(\"</tbody></table>\");\r\n\t\t\t\t\t$(_1e9).html(dataTableHtml.join(\"\"));\r\n\t\t\t\t},\r\n\t\t\t\trenderFooter : function(_1f3, _1f4) {\r\n\t\t\t\t\tvar opts = $.data(this.grid.element, \"datagrid\").options;\r\n\t\t\t\t\tvar rows = $.data(this.grid.element, \"datagrid\").footer\r\n\t\t\t\t\t\t\t|| [];\r\n\t\t\t\t\tvar _1f5 = this.grid.getColumnFields(_1f4)\r\n\t\t\t\t\tvar _1f6 = [\"<table class=\\\"datagrid-ftable\\\" cellspacing=\\\"0\\\" cellpadding=\\\"0\\\" border=\\\"0\\\"><tbody>\"];\r\n\t\t\t\t\tfor (var i = 0; i < rows.length; i++) {\r\n\t\t\t\t\t\t_1f6\r\n\t\t\t\t\t\t\t\t.push(\"<tr class=\\\"datagrid-row\\\" datagrid-row-index=\\\"\"\r\n\t\t\t\t\t\t\t\t\t\t+ i + \"\\\">\");\r\n\t\t\t\t\t\t_1f6.push(this.renderRow.call(this, _1f5, _1f4, i,\r\n\t\t\t\t\t\t\t\trows[i]));\r\n\t\t\t\t\t\t_1f6.push(\"</tr>\");\r\n\t\t\t\t\t}\r\n\t\t\t\t\t_1f6.push(\"</tbody></table>\");\r\n\t\t\t\t\t$(_1f3).html(_1f6.join(\"\"));\r\n\t\t\t\t},\r\n\t\t\t\trenderRow : function(_1f8, _1f9, _1fa, _1fb) {\r\n\t\t\t\t\tvar opts = $.data(this.grid.element, \"datagrid\").options;\r\n\t\t\t\t\tvar cc = [];\r\n\t\t\t\t\tif (_1f9 && opts.rownumbers) {\r\n\t\t\t\t\t\tvar _1fc = _1fa + 1;\r\n\t\t\t\t\t\tif (opts.pagination) {\r\n\t\t\t\t\t\t\t_1fc += (opts.pageNumber - 1) * opts.pageSize;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tcc\r\n\t\t\t\t\t\t\t\t.push(\"<td class=\\\"datagrid-td-rownumber\\\"><div class=\\\"datagrid-cell-rownumber\\\">\"\r\n\t\t\t\t\t\t\t\t\t\t+ _1fc + \"</div></td>\");\r\n\t\t\t\t\t}\r\n\t\t\t\t\tfor (var i = 0; i < _1f8.length; i++) {\r\n\t\t\t\t\t\tvar _1fd = _1f8[i];\r\n\t\t\t\t\t\tvar col = this.grid.getColumnOption(_1fd);\r\n\t\t\t\t\t\tif (col) {\r\n\t\t\t\t\t\t\tvar _1fe = _1fb[_1fd];\r\n\t\t\t\t\t\t\tvar css = col.styler ? (col\r\n\t\t\t\t\t\t\t\t\t.styler(_1fe, _1fb, _1fa) || \"\") : \"\";\r\n\t\t\t\t\t\t\tvar _1ff = \"\";\r\n\t\t\t\t\t\t\tvar _200 = \"\";\r\n\t\t\t\t\t\t\tif (typeof css == \"string\") {\r\n\t\t\t\t\t\t\t\t_200 = css;\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tif (css) {\r\n\t\t\t\t\t\t\t\t\t_1ff = css[\"class\"] || \"\";\r\n\t\t\t\t\t\t\t\t\t_200 = css[\"style\"] || \"\";\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tvar cls = _1ff ? \"class=\\\"\" + _1ff + \"\\\"\" : \"\";\r\n\t\t\t\t\t\t\tvar _201 = col.hidden ? \"style=\\\"display:none;\"\r\n\t\t\t\t\t\t\t\t\t+ _200 + \"\\\"\" : (_200 ? \"style=\\\"\" + _200\r\n\t\t\t\t\t\t\t\t\t+ \"\\\"\" : \"\");\r\n\t\t\t\t\t\t\tcc.push(\"<td field=\\\"\" + _1fd + \"\\\" \" + cls + \" \"\r\n\t\t\t\t\t\t\t\t\t+ _201 + \">\");\r\n\t\t\t\t\t\t\tvar _201 = \"\";\r\n\t\t\t\t\t\t\tif (!col.checkbox) {\r\n\t\t\t\t\t\t\t\tif (col.align) {\r\n\t\t\t\t\t\t\t\t\t_201 += \"text-align:\" + col.align + \";\";\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tif (!opts.nowrap) {\r\n\t\t\t\t\t\t\t\t\t_201 += \"white-space:normal;height:auto;\";\r\n\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\tif (opts.autoRowHeight) {\r\n\t\t\t\t\t\t\t\t\t\t_201 += \"height:auto;\";\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tcc.push(\"<div style=\\\"\" + _201 + \"\\\" \");\r\n\t\t\t\t\t\t\tcc.push(col.checkbox\r\n\t\t\t\t\t\t\t\t\t? \"class=\\\"datagrid-cell-check\\\"\"\r\n\t\t\t\t\t\t\t\t\t: \"class=\\\"datagrid-cell \" + col.cellClass\r\n\t\t\t\t\t\t\t\t\t\t\t+ \"\\\"\");\r\n\t\t\t\t\t\t\tcc.push(\">\");\r\n\t\t\t\t\t\t\tif (col.checkbox) {\r\n\t\t\t\t\t\t\t\tcc.push(\"<input type=\\\"checkbox\\\" \"\r\n\t\t\t\t\t\t\t\t\t\t+ (_1fb.checked\r\n\t\t\t\t\t\t\t\t\t\t\t\t? \"checked=\\\"checked\\\"\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t: \"\"));\r\n\t\t\t\t\t\t\t\tcc.push(\" name=\\\"\" + _1fd + \"\\\" value=\\\"\"\r\n\t\t\t\t\t\t\t\t\t\t+ (_1fe != undefined ? _1fe : \"\")\r\n\t\t\t\t\t\t\t\t\t\t+ \"\\\">\");\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tif (col.formatter) {\r\n\t\t\t\t\t\t\t\t\tcc.push(col.formatter(_1fe, _1fb, _1fa));\r\n\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\tcc.push(_1fe);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tcc.push(\"</div>\");\r\n\t\t\t\t\t\t\tcc.push(\"</td>\");\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn cc.join(\"\");\r\n\t\t\t\t},\r\n\t\t\t\trefreshRow : function(_202, _203) {\r\n\t\t\t\t\tthis.updateRow.call(this, _202, _203, {});\r\n\t\t\t\t},\r\n\t\t\t\tupdateRow : function(_204, _205, row) {\r\n\t\t\t\t\tvar opts = $.data(this.grid.element, \"datagrid\").options;\r\n\t\t\t\t\tvar rows = $(this.grid.element).datagrid(\"getRows\");\r\n\t\t\t\t\t$.extend(rows[_205], row);\r\n\t\t\t\t\tvar css = opts.rowStyler ? opts.rowStyler.call(\r\n\t\t\t\t\t\t\tthis.grid.element, _205, rows[_205]) : \"\";\r\n\t\t\t\t\tvar _206 = \"\";\r\n\t\t\t\t\tvar _207 = \"\";\r\n\t\t\t\t\tif (typeof css == \"string\") {\r\n\t\t\t\t\t\t_207 = css;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tif (css) {\r\n\t\t\t\t\t\t\t_206 = css[\"class\"] || \"\";\r\n\t\t\t\t\t\t\t_207 = css[\"style\"] || \"\";\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tvar _206 = \"datagrid-row \"\r\n\t\t\t\t\t\t\t+ (_205 % 2 && opts.striped\r\n\t\t\t\t\t\t\t\t\t? \"datagrid-row-alt \"\r\n\t\t\t\t\t\t\t\t\t: \" \") + _206;\r\n\t\t\t\t\tfunction _208(_209) {\r\n\t\t\t\t\t\tvar _20a = $(this.grid.element).datagrid(\r\n\t\t\t\t\t\t\t\t\"getColumnFields\", _209);\r\n\t\t\t\t\t\tvar tr = opts.finder.getTr(this.grid.element, _205,\r\n\t\t\t\t\t\t\t\t\"body\", (_209 ? 1 : 2));\r\n\t\t\t\t\t\tvar _20b = tr\r\n\t\t\t\t\t\t\t\t.find(\"div.datagrid-cell-check input[type=checkbox]\")\r\n\t\t\t\t\t\t\t\t.is(\":checked\");\r\n\t\t\t\t\t\ttr.html(this.renderRow.call(this, this.grid.element,\r\n\t\t\t\t\t\t\t\t_20a, _209, _205, rows[_205]));\r\n\t\t\t\t\t\ttr.attr(\"style\", _207).attr(\r\n\t\t\t\t\t\t\t\t\"class\",\r\n\t\t\t\t\t\t\t\ttr.hasClass(\"datagrid-row-selected\") ? _206\r\n\t\t\t\t\t\t\t\t\t\t+ \" datagrid-row-selected\" : _206);\r\n\t\t\t\t\t\tif (_20b) {\r\n\t\t\t\t\t\t\ttr\r\n\t\t\t\t\t\t\t\t\t.find(\"div.datagrid-cell-check input[type=checkbox]\")\r\n\t\t\t\t\t\t\t\t\t.attr(\"checked\", true);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t};\r\n\t\t\t\t\t_208.call(this, true);\r\n\t\t\t\t\t_208.call(this, false);\r\n\t\t\t\t\tthis.grid.fixRowHeight(_205);\r\n\t\t\t\t\t// $(_204).datagrid(\"fixRowHeight\", _205);\r\n\t\t\t\t},\r\n\t\t\t\tinsertRow : function(_20d, row) {\r\n\t\t\t\t\tvar _20e = $.data(this.grid.element, \"datagrid\");\r\n\t\t\t\t\tvar opts = _20e.options;\r\n\t\t\t\t\tvar dc = _20e.dc;\r\n\t\t\t\t\tvar data = _20e.data;\r\n\t\t\t\t\tif (_20d == undefined || _20d == null) {\r\n\t\t\t\t\t\t_20d = data.rows.length;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (_20d > data.rows.length) {\r\n\t\t\t\t\t\t_20d = data.rows.length;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tfunction _20f(_210) {\r\n\t\t\t\t\t\tvar _211 = _210 ? 1 : 2;\r\n\t\t\t\t\t\tfor (var i = data.rows.length - 1; i >= _20d; i--) {\r\n\t\t\t\t\t\t\tvar tr = opts.finder.getTr(this.grid.element, i,\r\n\t\t\t\t\t\t\t\t\t\"body\", _211);\r\n\t\t\t\t\t\t\ttr.attr(\"datagrid-row-index\", i + 1);\r\n\t\t\t\t\t\t\ttr.attr(\"id\", _20e.rowIdPrefix + \"-\" + _211 + \"-\"\r\n\t\t\t\t\t\t\t\t\t\t\t+ (i + 1));\r\n\t\t\t\t\t\t\tif (_210 && opts.rownumbers) {\r\n\t\t\t\t\t\t\t\tvar _212 = i + 2;\r\n\t\t\t\t\t\t\t\tif (opts.pagination) {\r\n\t\t\t\t\t\t\t\t\t_212 += (opts.pageNumber - 1)\r\n\t\t\t\t\t\t\t\t\t\t\t* opts.pageSize;\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\ttr.find(\"div.datagrid-cell-rownumber\")\r\n\t\t\t\t\t\t\t\t\t\t.html(_212);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tif (opts.striped) {\r\n\t\t\t\t\t\t\t\ttr.removeClass(\"datagrid-row-alt\")\r\n\t\t\t\t\t\t\t\t\t\t.addClass((i + 1) % 2\r\n\t\t\t\t\t\t\t\t\t\t\t\t? \"datagrid-row-alt\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t: \"\");\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t};\r\n\t\t\t\t\tfunction _213(_214) {\r\n\t\t\t\t\t\tvar _215 = _214 ? 1 : 2;\r\n\t\t\t\t\t\tvar _216 = this.grid.getColumnFields(_214);\r\n\t\t\t\t\t\tvar _217 = _20e.rowIdPrefix + \"-\" + _215 + \"-\" + _20d;\r\n\t\t\t\t\t\tvar tr = \"<tr id=\\\"\"\r\n\t\t\t\t\t\t\t\t+ _217\r\n\t\t\t\t\t\t\t\t+ \"\\\" class=\\\"datagrid-row\\\" datagrid-row-index=\\\"\"\r\n\t\t\t\t\t\t\t\t+ _20d + \"\\\"></tr>\";\r\n\t\t\t\t\t\tif (_20d >= data.rows.length) {\r\n\t\t\t\t\t\t\tif (data.rows.length) {\r\n\t\t\t\t\t\t\t\topts.finder.getTr(this.grid.element, \"\",\r\n\t\t\t\t\t\t\t\t\t\t\"last\", _215).after(tr);\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tvar cc = _214 ? dc.body1 : dc.body2;\r\n\t\t\t\t\t\t\t\tcc\r\n\t\t\t\t\t\t\t\t\t\t.html(\"<table cellspacing=\\\"0\\\" cellpadding=\\\"0\\\" border=\\\"0\\\"><tbody>\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t+ tr + \"</tbody></table>\");\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\topts.finder.getTr(this.grid.element, _20d + 1,\r\n\t\t\t\t\t\t\t\t\t\"body\", _215).before(tr);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t};\r\n\t\t\t\t\t_20f.call(this, true);\r\n\t\t\t\t\t_20f.call(this, false);\r\n\t\t\t\t\t_213.call(this, true);\r\n\t\t\t\t\t_213.call(this, false);\r\n\t\t\t\t\tdata.total += 1;\r\n\t\t\t\t\tdata.rows.splice(_20d, 0, row);\r\n\t\t\t\t\tthis.refreshRow.call(this, this.grid.element, _20d);\r\n\t\t\t\t},\r\n\t\t\t\tdeleteRow : function(_218, _219) {\r\n\t\t\t\t\tvar _21a = $.data(_218, \"datagrid\");\r\n\t\t\t\t\tvar opts = _21a.options;\r\n\t\t\t\t\tvar data = _21a.data;\r\n\t\t\t\t\tfunction _21b(_21c) {\r\n\t\t\t\t\t\tvar _21d = _21c ? 1 : 2;\r\n\t\t\t\t\t\tfor (var i = _219 + 1; i < data.rows.length; i++) {\r\n\t\t\t\t\t\t\tvar tr = opts.finder.getTr(_218, i, \"body\", _21d);\r\n\t\t\t\t\t\t\ttr.attr(\"datagrid-row-index\", i - 1);\r\n\t\t\t\t\t\t\ttr.attr(\"id\", _21a.rowIdPrefix + \"-\" + _21d + \"-\"\r\n\t\t\t\t\t\t\t\t\t\t\t+ (i - 1));\r\n\t\t\t\t\t\t\tif (_21c && opts.rownumbers) {\r\n\t\t\t\t\t\t\t\tvar _21e = i;\r\n\t\t\t\t\t\t\t\tif (opts.pagination) {\r\n\t\t\t\t\t\t\t\t\t_21e += (opts.pageNumber - 1)\r\n\t\t\t\t\t\t\t\t\t\t\t* opts.pageSize;\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\ttr.find(\"div.datagrid-cell-rownumber\")\r\n\t\t\t\t\t\t\t\t\t\t.html(_21e);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tif (opts.striped) {\r\n\t\t\t\t\t\t\t\ttr.removeClass(\"datagrid-row-alt\")\r\n\t\t\t\t\t\t\t\t\t\t.addClass((i - 1) % 2\r\n\t\t\t\t\t\t\t\t\t\t\t\t? \"datagrid-row-alt\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t: \"\");\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t};\r\n\t\t\t\t\topts.finder.getTr(_218, _219).remove();\r\n\t\t\t\t\t_21b.call(this, true);\r\n\t\t\t\t\t_21b.call(this, false);\r\n\t\t\t\t\tdata.total -= 1;\r\n\t\t\t\t\tdata.rows.splice(_219, 1);\r\n\t\t\t\t},\r\n\t\t\t\tonBeforeRender : function(_21f, rows) {\r\n\t\t\t\t},\r\n\t\t\t\tonAfterRender : function() {\r\n\t\t\t\t\tvar opts = $.data(this.grid.element, \"datagrid\").options;\r\n\t\t\t\t\tif (opts.showFooter) {\r\n\t\t\t\t\t\tvar _221 = this.grid.getPanel()\r\n\t\t\t\t\t\t\t\t.find(\"div.datagrid-footer\");\r\n\t\t\t\t\t\t_221\r\n\t\t\t\t\t\t\t\t.find(\"div.datagrid-cell-rownumber,div.datagrid-cell-check\")\r\n\t\t\t\t\t\t\t\t.css(\"visibility\", \"hidden\");\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t})\r\n\r\n\t\t\tfunction createEditors(editorList) {\r\n\t\t\t\tvar editors = {};\r\n\t\t\t\t$.map(editorList, function(name) {\r\n\t\t\t\t\t\t\teditors[name] = initEditor(name);\r\n\t\t\t\t\t\t});\r\n\r\n\t\t\t\treturn editors;\r\n\t\t\t\tfunction initEditor(name) {\r\n\t\t\t\t\tfunction isA(editorDom) {\r\n\t\t\t\t\t\treturn $.data($(editorDom)[0], name) != undefined;\r\n\t\t\t\t\t};\r\n\t\t\t\t\treturn {\r\n\t\t\t\t\t\tinit : function(dom, opt) {\r\n\t\t\t\t\t\t\tvar editorDom = $(\"<input type=\\\"text\\\" class=\\\"datagrid-editable-input\\\" width=\\\"100%\\\">\")\r\n\t\t\t\t\t\t\t\t\t.appendTo(dom);\r\n\t\t\t\t\t\t\tif (editorDom[name] && name != \"text\") {\r\n\t\t\t\t\t\t\t\tvar t = editorDom[name](opt);\r\n\t\t\t\t\t\t\t\treturn editorDom;\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\treturn editorDom;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tdestroy : function(editorDom) {\r\n\t\t\t\t\t\t\tif (isA(editorDom, name)) {\r\n\t\t\t\t\t\t\t\t$(editorDom)[name](\"destroy\");\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tgetValue : function(editorDom) {\r\n\t\t\t\t\t\t\tif (isA(editorDom, name)) {\r\n\t\t\t\t\t\t\t\tvar opts = $(editorDom)[name](\"options\");\r\n\t\t\t\t\t\t\t\tif (opts.multiple) {\r\n\t\t\t\t\t\t\t\t\treturn $(editorDom)[name](\"getValues\")\r\n\t\t\t\t\t\t\t\t\t\t\t.join(opts.separator);\r\n\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\treturn $(editorDom)[name](\"getValue\");\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\treturn $(editorDom)[name](\"getValue\");\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\treturn $(editorDom).val();\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tsetValue : function(editorDom, value) {\r\n\t\t\t\t\t\t\tif (isA(editorDom, name)) {\r\n\t\t\t\t\t\t\t\tvar opts = $(editorDom)[name](\"options\");\r\n\t\t\t\t\t\t\t\tif (opts.multiple) {\r\n\t\t\t\t\t\t\t\t\tif (value) {\r\n\t\t\t\t\t\t\t\t\t\t$(editorDom)[name](\"setValues\", value\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t.split(opts.separator));\r\n\t\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\t\t$(editorDom)[name](\"clear\");\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\t$(editorDom)[name](\"setValue\", value);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t$(editorDom).val();\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tresize : function(editorDom, size) {\r\n\t\t\t\t\t\t\tif (isA(editorDom, name)) {\r\n\t\t\t\t\t\t\t\t$(editorDom)[name](\"resize\", size);\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t$(editorDom)._outerWidth(size)._outerHeight(22);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t};\r\n\t\t\t\t};\r\n\t\t\t};\r\n\t\t\tvar editors = $.extend({}, createEditors([\"text\", \"textbox\",\r\n\t\t\t\t\t\t\t\"number\", \"numberspinner\", \"combobox\", \"combotree\",\r\n\t\t\t\t\t\t\t\"combogrid\", \"datebox\", \"datetimebox\",\r\n\t\t\t\t\t\t\t\"timespinner\", \"datetimespinner\"]), {\r\n\t\t\t\t\t\ttextarea : {\r\n\t\t\t\t\t\t\tinit : function(dom, opt) {\r\n\t\t\t\t\t\t\t\tvar editorDom = $(\"<textarea class=\\\"datagrid-editable-input\\\"></textarea>\")\r\n\t\t\t\t\t\t\t\t\t\t.appendTo(dom);\r\n\t\t\t\t\t\t\t\treturn editorDom;\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\tgetValue : function(editorDom) {\r\n\t\t\t\t\t\t\t\treturn $(editorDom).val();\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\tsetValue : function(editorDom, value) {\r\n\t\t\t\t\t\t\t\t$(editorDom).val(value);\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\tresize : function(editorDom, size) {\r\n\t\t\t\t\t\t\t\t$(editorDom)._outerWidth(size);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tcheckbox : {\r\n\t\t\t\t\t\t\tinit : function(dom, opt) {\r\n\t\t\t\t\t\t\t\tvar editorDom = $(\"<input type=\\\"checkbox\\\">\")\r\n\t\t\t\t\t\t\t\t\t\t.appendTo(dom);\r\n\t\t\t\t\t\t\t\teditorDom.val(_1a8.on);\r\n\t\t\t\t\t\t\t\teditorDom.attr(\"offval\", _1a8.off);\r\n\t\t\t\t\t\t\t\treturn editorDom;\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\tgetValue : function(editorDom) {\r\n\t\t\t\t\t\t\t\tif ($(editorDom).is(\":checked\")) {\r\n\t\t\t\t\t\t\t\t\treturn $(editorDom).val();\r\n\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\treturn $(editorDom).attr(\"offval\");\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\tsetValue : function(_1ab, _1ac) {\r\n\t\t\t\t\t\t\t\tvar _1ad = false;\r\n\t\t\t\t\t\t\t\tif ($(_1ab).val() == _1ac) {\r\n\t\t\t\t\t\t\t\t\t_1ad = true;\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t$(_1ab).attr(\"checked\", _1ad);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tvalidatebox : {\r\n\t\t\t\t\t\t\tinit : function(_1ae, _1af) {\r\n\t\t\t\t\t\t\t\tvar _1b0 = $(\"<input type=\\\"text\\\" class=\\\"datagrid-editable-input\\\">\")\r\n\t\t\t\t\t\t\t\t\t\t.appendTo(_1ae);\r\n\t\t\t\t\t\t\t\t_1b0.validatebox(_1af);\r\n\t\t\t\t\t\t\t\treturn _1b0;\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\tdestroy : function(_1b1) {\r\n\t\t\t\t\t\t\t\t$(_1b1).validatebox(\"destroy\");\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\tgetValue : function(_1b2) {\r\n\t\t\t\t\t\t\t\treturn $(_1b2).val();\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\tsetValue : function(_1b3, _1b4) {\r\n\t\t\t\t\t\t\t\t$(_1b3).val(_1b4);\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\tresize : function(_1b5, _1b6) {\r\n\t\t\t\t\t\t\t\t$(_1b5)._outerWidth(_1b6)._outerHeight(22);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tbutton : {\r\n\t\t\t\t\t\t\tinit : function(_1ae, _1af) {\r\n\r\n\t\t\t\t\t\t\t\tvar _1b0 = $('<a>[对象]</a>').appendTo(_1ae);\r\n\t\t\t\t\t\t\t\t_1b0.button(_1af);\r\n\t\t\t\t\t\t\t\treturn _1b0;\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\tdestroy : function(_1b1) {\r\n\t\t\t\t\t\t\t\t// $(_1b1).validatebox(\"destroy\");\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\tgetValue : function(_1b2, row, field) {\r\n\t\t\t\t\t\t\t\treturn row[field];\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\tsetValue : function(_1b3, _1b4) {\r\n\t\t\t\t\t\t\t\t$(_1b3).val(_1b4);\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\tresize : function(_1b5, _1b6) {\r\n\t\t\t\t\t\t\t\t$(_1b5)._outerWidth(_1b6)._outerHeight(22);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\r\n\t\t\tfunction getGridDom(t) {\r\n\t\t\t\treturn $(t).closest(\"div.datagrid-view\")\r\n\t\t\t\t\t\t.children(\".datagrid-f\")[0];\r\n\t\t\t}\r\n\t\t\tfunction getHeaderOverEvent(isOver) {\r\n\t\t\t\treturn function(e) {\r\n\t\t\t\t\tvar td = $(e.target).closest(\"td[field]\");\r\n\t\t\t\t\tif (td.length) {\r\n\t\t\t\t\t\tvar gridDom = getGridDom(td);\r\n\t\t\t\t\t\tif (!$(gridDom).data(\"datagrid\").resizing && isOver) {\r\n\t\t\t\t\t\t\ttd.addClass(\"datagrid-header-over\");\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\ttd.removeClass(\"datagrid-header-over\");\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t};\r\n\t\t\t}\r\n\r\n\t\t\tfunction headerClickEvent(e) {\r\n\t\t\t\tvar gridDom = getGridDom(e.target);\r\n\t\t\t\tvar options = $(gridDom).datagrid(\"options\");\r\n\t\t\t\tvar ck = $(e.target).closest(\"input[type=checkbox]\");\r\n\t\t\t\tif (ck.length) {\r\n\t\t\t\t\tif (options.singleSelect && options.selectOnCheck) {\r\n\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (ck.is(\":checked\")) {\r\n\t\t\t\t\t\t$(gridDom).datagrid(\"checkAll\");\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\t$(gridDom).datagrid(\"uncheckAll\");\r\n\t\t\t\t\t}\r\n\t\t\t\t\te.stopPropagation();\r\n\t\t\t\t} else {\r\n\t\t\t\t\tvar cell = $(e.target).closest(\".datagrid-cell\");\r\n\t\t\t\t\tif (cell.length) {\r\n\t\t\t\t\t\tvar p1 = cell.offset().left + 5;\r\n\t\t\t\t\t\tvar p2 = cell.offset().left + cell._outerWidth() - 5;\r\n\t\t\t\t\t\tif (e.pageX < p2 && e.pageX > p1) {\r\n\t\t\t\t\t\t\t$(gridDom).datagrid(\"sort\",\r\n\t\t\t\t\t\t\t\t\tcell.parent().attr(\"field\"));\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tfunction headerDblclick(e) {\r\n\t\t\t\tvar gridDom = getGridDom(e.target);\r\n\t\t\t\tvar options = $(gridDom).datagrid(\"options\");\r\n\t\t\t\tvar cells = $(e.target).closest(\".datagrid-cell\");\r\n\t\t\t\tif (cells.length) {\r\n\t\t\t\t\tvar p1 = cells.offset().left + 5;\r\n\t\t\t\t\tvar p2 = cells.offset().left + cells._outerWidth() - 5;\r\n\t\t\t\t\tvar resizeHandle = options.resizeHandle == \"right\"\r\n\t\t\t\t\t\t\t? (e.pageX > p2)\r\n\t\t\t\t\t\t\t: (options.resizeHandle == \"left\"\r\n\t\t\t\t\t\t\t\t\t? (e.pageX < p1)\r\n\t\t\t\t\t\t\t\t\t: (e.pageX < p1 || e.pageX > p2));\r\n\t\t\t\t\tif (resizeHandle) {\r\n\t\t\t\t\t\tvar field = cells.parent().attr(\"field\");\r\n\t\t\t\t\t\tvar col = $(gridDom).datagrid(\"getColumnOption\", field);\r\n\t\t\t\t\t\tif (col.resizable == false) {\r\n\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t$(gridDom).datagrid(\"autoSizeColumn\", field);\r\n\t\t\t\t\t\tcol.auto = false;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tfunction headerContextmenuEvent(e) {\r\n\t\t\t\tvar gridDom = getGridDom(e.target);\r\n\t\t\t\tvar options = $(gridDom).datagrid(\"options\");\r\n\t\t\t\tvar td = $(e.target).closest(\"td[field]\");\r\n\t\t\t\toptions.onHeaderContextMenu.call(gridDom, e, td.attr(\"field\"));\r\n\t\t\t}\r\n\r\n\t\t\tfunction getGridRowDom(t, closetDom) {\r\n\t\t\t\tvar tr = $(t).closest(closetDom || \"tr.datagrid-row\");\r\n\t\t\t\tif (tr.length && tr.parent().length) {\r\n\t\t\t\t\treturn tr;\r\n\t\t\t\t} else {\r\n\t\t\t\t\treturn undefined;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tfunction getRowIndex(tr) {\r\n\t\t\t\tif (tr.attr(\"datagrid-row-index\")) {\r\n\t\t\t\t\treturn parseInt(tr.attr(\"datagrid-row-index\"));\r\n\t\t\t\t} else {\r\n\t\t\t\t\treturn tr.attr(\"node-id\");\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tfunction getCellOverEvent(isOver) {\r\n\t\t\t\treturn function(e) {\r\n\t\t\t\t\tvar tr = getGridRowDom(e.target);\r\n\t\t\t\t\tif (!tr) {\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tvar gridDom = getGridDom(tr);\r\n\t\t\t\t\tif ($.data(gridDom, \"datagrid\").resizing) {\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tvar rowIndex = getRowIndex(tr);\r\n\t\t\t\t\tif (rowIndex) {\r\n\t\t\t\t\t\trowOver(gridDom, rowIndex);\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tvar options = $.data(gridDom, \"datagrid\").options;\r\n\t\t\t\t\t\toptions.finder.getTr(gridDom, rowIndex)\r\n\t\t\t\t\t\t\t\t.removeClass(\"datagrid-row-over\");\r\n\t\t\t\t\t}\r\n\t\t\t\t};\r\n\t\t\t}\r\n\t\t\tfunction rowOver(gridDom, trDom) {\r\n\t\t\t\tvar dataGridObj = $.data(gridDom, \"datagrid\");\r\n\t\t\t\tvar opts = dataGridObj.options;\r\n\t\t\t\topts.finder.getTr(gridDom, dataGridObj.highlightIndex)\r\n\t\t\t\t\t\t.removeClass(\"datagrid-row-over\");\r\n\t\t\t\topts.finder.getTr(gridDom, trDom).addClass(\"datagrid-row-over\");\r\n\t\t\t\tdataGridObj.highlightIndex = trDom;\r\n\t\t\t}\r\n\r\n\t\t\t\r\n\t\t\t\r\n\t\t\tfunction bodyCellClickEvent(e) {\r\n\t\t\t\tvar tr = getGridRowDom(e.target);\r\n\t\t\t\tif (!tr) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tvar gridDom = getGridDom(tr);\r\n\t\t\t\tvar options = $.data(gridDom, \"datagrid\").options;\r\n\r\n\t\t\t\tvar dataGridClass = $.data(gridDom, \"datagridObj\");\r\n\r\n\t\t\t\tvar rowIndex = getRowIndex(tr);\r\n\t\t\t\tvar row = options.finder.getRow(rowIndex);\r\n\r\n\t\t\t\tvar tt = $(e.target);\r\n\t\t\t\t\r\n\t\t        var rowBtn = tt.closest(\"a.rowBtn\");\r\n\t\t        if (rowBtn.length>0){\r\n\t\t        \tdataGridClass.operator[rowBtn.attr(\"id\")].call(this,row)\r\n\t\t        \treturn;\r\n\t\t        }\r\n\t\t\t\tif (tt.parent().hasClass(\"datagrid-cell-check\")) {\r\n\t\t\t\t\tif (options.singleSelect && options.selectOnCheck) {\r\n\t\t\t\t\t\ttt.attr(\"checked\", !tt.is(\":checked\"));\r\n\t\t\t\t\t\tdataGridClass.checkRow(rowIndex);\r\n\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tif (tt.is(\":checked\")) {\r\n\t\t\t\t\t\t\ttt.attr(\"checked\", false);\r\n\t\t\t\t\t\t\tdataGridClass.checkRow(rowIndex);\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\ttt.attr(\"checked\", true);\r\n\t\t\t\t\t\t\tdataGridClass.uncheckRow(rowIndex);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\tvar td = tt.closest(\"td[field]\", tr);\r\n\t\t\t\t\tif (td.length) {\r\n\t\t\t\t\t\tvar field = td.attr(\"field\");\r\n\t\t\t\t\t\tdataGridClass.trigger(\"onClickCell\", rowIndex, field,\r\n\t\t\t\t\t\t\t\trow[field])\r\n\t\t\t\t\t\t// options.onClickCell.call(gridDom, rowIndex,\r\n\t\t\t\t\t\t// _a4,row[_a4]);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (options.singleSelect == true) {\r\n\t\t\t\t\t\tdataGridClass.selectRow(rowIndex);\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tif (options.ctrlSelect) {\r\n\t\t\t\t\t\t\tif (e.ctrlKey) {\r\n\t\t\t\t\t\t\t\tif (tr.hasClass(\"datagrid-row-selected\")) {\r\n\r\n\t\t\t\t\t\t\t\t\tdataGridClass.unselectRow(rowIndex);\r\n\t\t\t\t\t\t\t\t\t// $(gridDom).datagrid(\"unselectRow\", );\r\n\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\tdataGridClass.selectRow(rowIndex);\r\n\t\t\t\t\t\t\t\t\t// $(gridDom).datagrid(\"selectRow\",\r\n\t\t\t\t\t\t\t\t\t// rowIndex);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tif (e.shiftKey) {\r\n\t\t\t\t\t\t\t\t\t$(gridDom).datagrid(\"clearSelections\");\r\n\t\t\t\t\t\t\t\t\tvar _a7 = Math.min(\r\n\t\t\t\t\t\t\t\t\t\t\toptions.lastSelectedIndex || 0,\r\n\t\t\t\t\t\t\t\t\t\t\trowIndex);\r\n\t\t\t\t\t\t\t\t\tvar _a8 = Math.max(\r\n\t\t\t\t\t\t\t\t\t\t\toptions.lastSelectedIndex || 0,\r\n\t\t\t\t\t\t\t\t\t\t\trowIndex);\r\n\t\t\t\t\t\t\t\t\tfor (var i = _a7; i <= _a8; i++) {\r\n\t\t\t\t\t\t\t\t\t\t_a5(gridDom, i);\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\t$(gridDom).datagrid(\"clearSelections\");\r\n\t\t\t\t\t\t\t\t\tdataGridClass.selectRow(rowIndex);\r\n\t\t\t\t\t\t\t\t\toptions.lastSelectedIndex = rowIndex;\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tif (tr.hasClass(\"datagrid-row-selected\")) {\r\n\t\t\t\t\t\t\t\tdataGridClass.unselectRow(rowIndex);\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tdataGridClass.selectRow(rowIndex);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tdataGridClass.trigger(\"onClickRow\", getRowParam(gridDom, [\r\n\t\t\t\t\t\t\t\t\t\t\trowIndex, row]))\r\n\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tfunction bodyCellDbClickEvent(e) {\r\n\t\t\t\tvar tr = getGridRowDom(e.target);\r\n\t\t\t\tif (!tr) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tvar gridDom = getGridDom(tr);\r\n\t\t\t\tvar options = $.data(gridDom, \"datagrid\").options;\r\n\t\t\t\tvar dataGridClass = $.data(gridDom, \"datagridObj\");\r\n\r\n\t\t\t\tvar rowIndex = getRowIndex(tr);\r\n\t\t\t\tvar row = options.finder.getRow(rowIndex);\r\n\t\t\t\tvar td = $(e.target).closest(\"td[field]\", tr);\r\n\t\t\t\tif (td.length) {\r\n\t\t\t\t\tvar _ad = td.attr(\"field\");\r\n\r\n\t\t\t\t\tdataGridClass.trigger(\"onDblClickCell\", rowIndex, _ad,\r\n\t\t\t\t\t\t\trow[_ad]);\r\n\t\t\t\t\t// options.onDblClickCell.call(gridDom, rowIndex, _ad,\r\n\t\t\t\t\t// row[_ad]);\r\n\t\t\t\t}\r\n\t\t\t\tdataGridClass.trigger(\"onDblClickRow\", getRowParam(gridDom, [\r\n\t\t\t\t\t\t\t\t\t\trowIndex, row]));\r\n\t\t\t\t// options.onDblClickRow.apply(gridDom, getRowParam(gridDom, [\r\n\t\t\t\t// rowIndex, row ]));\r\n\t\t\t}\r\n\r\n\t\t\tfunction bodyContextmenuEvent(e) {\r\n\t\t\t\tvar tr = getGridRowDom(e.target);\r\n\t\t\t\tif (!tr) {\r\n\t\t\t\t\ttr = getGridRowDom(e.target, \".datagrid-body\");\r\n\t\t\t\t} \r\n\t\t\t\tif (!tr){\r\n\t\t\t\t\treturn ;\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tvar gridDom = getGridDom(tr);\r\n\t\t\t\tvar options = $.data(gridDom, \"datagrid\").options;\r\n\t\t\t\tvar dataGridClass = $.data(gridDom, \"datagridObj\");\r\n\t\t\t\tvar rowIndex = getRowIndex(tr);\r\n\t\t\t\tvar row = options.finder.getRow(rowIndex);\r\n\t\t\t\tdataGridClass.trigger(\"onRowContextMenu\", e, rowIndex, row);\r\n\t\t\t\t\r\n\t\t\t\t\r\n\t\t\t}\r\n\t\t\tfunction getRowParam(gridDom, params) {\r\n\t\t\t\treturn $.data(gridDom, \"treegrid\") ? params.slice(1) : params;\r\n\t\t\t}\r\n\r\n\t\t\tDataGrid.defaults = $.extend({}, Opts.appDefaults.Pane, {\r\n\t\t\t\tsharedStyleSheet : false,\r\n\t\t\t\t// 和列（column）属性一样，但是这些列将被冻结在左边\r\n\t\t\t\tfrozenColumns : undefined,\r\n\t\t\t\t// 设置为 true，则会自动扩大或缩小列的尺寸以适应网格的宽度并且防止水平滚动\r\n\t\t\t\tcolumns : undefined,\r\n\t\t\t\t// 设置为 true，则会自动扩大或缩小列的尺寸以适应网格的宽度并且防止水平滚动\r\n\t\t\t\tfitColumns : false,\r\n\t\t\t\t// 调整列的位置，可用的值有：'left'、'right'、'both'。当设置为\r\n\t\t\t\t// 'right'\r\n\t\t\t\t// 时，用户可通过拖拽列头部的右边缘来调整列。\r\n\t\t\t\tresizeHandle : \"right\",\r\n\t\t\t\t// 定义是否设置基于该行内容的行高度。设置为 false，则可以提高加载性能。\r\n\t\t\t\tautoRowHeight : true,\r\n\t\t\t\t// 数据网格（datagrid）面板的头部工具栏。可能的值：\r\n\t\t\t\t// 1、数组，每个工具选项与链接按钮（linkbutton）一样。\r\n\t\t\t\t// 2、选择器，只是工具栏。\r\n\t\t\t\ttoolbar : null,\r\n\t\t\t\tstriped : false,\r\n\t\t\t\tmethod : \"post\",\r\n\t\t\t\tnowrap : true,\r\n\t\t\t\tidField : null,\r\n\t\t\t\turl : null,\r\n\t\t\t\tdata : null,\r\n\t\t\t\tloadMsg : \"数据加载中 ...\",\r\n\t\t\t\trownumbers : false,\r\n\t\t\t\tsingleSelect : false,\r\n\t\t\t\tctrlSelect : false,\r\n\t\t\t\tselectOnCheck : true,\r\n\t\t\t\tcheckOnSelect : true,\r\n\t\t\t\tpagination : false,\r\n\t\t\t\tpagePosition : \"bottom\",\r\n\t\t\t\tpageNumber : 1,\r\n\t\t\t\tpageSize : 10,\r\n\t\t\t\tpageList : [10, 20, 30, 40, 50],\r\n\t\t\t\tqueryParams : {},\r\n\t\t\t\tsortName : null,\r\n\t\t\t\tsortOrder : \"asc\",\r\n\t\t\t\tmultiSort : false,\r\n\t\t\t\tremoteSort : false,\r\n\t\t\t\tshowHeader : true,\r\n\t\t\t\tshowFooter : false,\r\n\t\t\t\tscrollbarSize : 18,\r\n\t\t\t\trowStyler : function(rowIndex, rowData) {\r\n\t\t\t\t},\r\n\t\t\t\theaderEvents : {\r\n\t\t\t\t\tmouseover : getHeaderOverEvent(true),\r\n\t\t\t\t\tmouseout : getHeaderOverEvent(false),\r\n\t\t\t\t\tclick : headerClickEvent,\r\n\t\t\t\t\tdblclick : headerDblclick,\r\n\t\t\t\t\tcontextmenu : headerContextmenuEvent\r\n\t\t\t\t},\r\n\t\t\t\trowEvents : {\r\n\t\t\t\t\tmouseover : getCellOverEvent(true),\r\n\t\t\t\t\tmouseout : getCellOverEvent(false),\r\n\t\t\t\t\tclick : bodyCellClickEvent,\r\n\t\t\t\t\tdblclick : bodyCellDbClickEvent,\r\n\t\t\t\t\tcontextmenu : bodyContextmenuEvent\r\n\t\t\t\t},\r\n\t\t\t\tloader : function(param, success, error) {\r\n\r\n\t\t\t\t\tvar opts = this.options();\r\n\t\t\t\t\tif (!opts.url) {\r\n\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t}\r\n\t\t\t\t\t$.ajax({\r\n\t\t\t\t\t\t\t\ttype : opts.method,\r\n\t\t\t\t\t\t\t\turl : opts.url,\r\n\t\t\t\t\t\t\t\tdata : param,\r\n\t\t\t\t\t\t\t\tdataType : \"json\",\r\n\t\t\t\t\t\t\t\tsuccess : function(data) {\r\n\t\t\t\t\t\t\t\t\tsuccess(data);\r\n\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\terror : function() {\r\n\t\t\t\t\t\t\t\t\terror.apply(this, arguments);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t},\r\n\r\n\t\t\t\tloadFilter : function(data) {\r\n\t\t\t\t\tif (typeof data.length == \"number\"\r\n\t\t\t\t\t\t\t&& typeof data.splice == \"function\") {\r\n\t\t\t\t\t\treturn {\r\n\t\t\t\t\t\t\ttotal : data.length,\r\n\t\t\t\t\t\t\trows : data\r\n\t\t\t\t\t\t};\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\treturn data;\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\teditors : editors,\r\n\t\t\t\tfinder : {\r\n\t\t\t\t\tgetTr : function(_227, _228, type, _229) {\r\n\t\t\t\t\t\ttype = type || \"body\";\r\n\t\t\t\t\t\t_229 = _229 || 0;\r\n\t\t\t\t\t\tvar _22a = $.data(_227, \"datagrid\");\r\n\t\t\t\t\t\tvar dc = _22a.dc;\r\n\t\t\t\t\t\tvar opts = _22a.options;\r\n\t\t\t\t\t\tif (_229 == 0) {\r\n\t\t\t\t\t\t\tvar tr1 = opts.finder.getTr(_227, _228, type, 1);\r\n\t\t\t\t\t\t\tvar tr2 = opts.finder.getTr(_227, _228, type, 2);\r\n\t\t\t\t\t\t\treturn tr1.add(tr2);\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tif (type == \"body\") {\r\n\t\t\t\t\t\t\t\tvar tr = $(\"#\" + _22a.rowIdPrefix + \"-\" + _229\r\n\t\t\t\t\t\t\t\t\t\t+ \"-\" + _228);\r\n\t\t\t\t\t\t\t\tif (!tr.length) {\r\n\t\t\t\t\t\t\t\t\ttr = (_229 == 1 ? dc.body1 : dc.body2)\r\n\t\t\t\t\t\t\t\t\t\t\t.find(\">table>tbody>tr[datagrid-row-index=\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t+ _228 + \"]\");\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\treturn tr;\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tif (type == \"footer\") {\r\n\t\t\t\t\t\t\t\t\treturn (_229 == 1 ? dc.footer1 : dc.footer2)\r\n\t\t\t\t\t\t\t\t\t\t\t.find(\">table>tbody>tr[datagrid-row-index=\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t+ _228 + \"]\");\r\n\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\tif (type == \"selected\") {\r\n\t\t\t\t\t\t\t\t\t\treturn (_229 == 1 ? dc.body1 : dc.body2)\r\n\t\t\t\t\t\t\t\t\t\t\t\t.find(\">table>tbody>tr.datagrid-row-selected\");\r\n\t\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\t\tif (type == \"highlight\") {\r\n\t\t\t\t\t\t\t\t\t\t\treturn (_229 == 1\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t? dc.body1\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t: dc.body2)\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t.find(\">table>tbody>tr.datagrid-row-over\");\r\n\t\t\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\t\t\tif (type == \"checked\") {\r\n\t\t\t\t\t\t\t\t\t\t\t\treturn (_229 == 1\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t? dc.body1\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t: dc.body2)\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t.find(\">table>tbody>tr.datagrid-row-checked\");\r\n\t\t\t\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\t\t\t\tif (type == \"last\") {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\treturn (_229 == 1\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t? dc.body1\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t: dc.body2)\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t.find(\">table>tbody>tr[datagrid-row-index]:last\");\r\n\t\t\t\t\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tif (type == \"allbody\") {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\treturn (_229 == 1\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t? dc.body1\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t: dc.body2)\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t.find(\">table>tbody>tr[datagrid-row-index]\");\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tif (type == \"allfooter\") {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\treturn (_229 == 1\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t? dc.footer1\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t: dc.footer2)\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t.find(\">table>tbody>tr[datagrid-row-index]\");\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t\tgetRow : function(p) {\r\n\t\t\t\t\t\tvar _22c = (typeof p == \"object\") ? p\r\n\t\t\t\t\t\t\t\t.attr(\"datagrid-row-index\") : p;\r\n\t\t\t\t\t\treturn $.data(this.element, \"datagrid\").data.rows[parseInt(_22c)];\r\n\t\t\t\t\t},\r\n\t\t\t\t\tgetRows : function() {\r\n\t\t\t\t\t\treturn $(this.element).datagrid(\"getRows\");\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\t// view : dataView,\r\n\t\t\t\tonBeforeLoad : function(_22e) {\r\n\t\t\t\t},\r\n\t\t\t\tonLoadSuccess : function() {\r\n\t\t\t\t},\r\n\t\t\t\tonLoadError : function() {\r\n\t\t\t\t},\r\n\t\t\t\tonClickRow : function(_22f, _230) {\r\n\t\t\t\t},\r\n\t\t\t\tonDblClickRow : function(_231, _232) {\r\n\t\t\t\t},\r\n\t\t\t\tonClickCell : function(_233, _234, _235) {\r\n\t\t\t\t},\r\n\t\t\t\tonDblClickCell : function(_236, _237, _238) {\r\n\t\t\t\t},\r\n\t\t\t\tonBeforeSortColumn : function(sort, _239) {\r\n\t\t\t\t},\r\n\t\t\t\tonSortColumn : function(sort, _23a) {\r\n\t\t\t\t},\r\n\t\t\t\tonResizeColumn : function(_23b, _23c) {\r\n\t\t\t\t},\r\n\t\t\t\tonResize : function() {\r\n\r\n\t\t\t\t},\r\n\t\t\t\tonSelect : function(_23d, _23e) {\r\n\t\t\t\t},\r\n\t\t\t\tonUnselect : function(_23f, _240) {\r\n\t\t\t\t},\r\n\t\t\t\tonSelectAll : function(rows) {\r\n\t\t\t\t},\r\n\t\t\t\tonUnselectAll : function(rows) {\r\n\t\t\t\t},\r\n\t\t\t\tonCheck : function(_241, _242) {\r\n\t\t\t\t},\r\n\t\t\t\tonUncheck : function(_243, _244) {\r\n\t\t\t\t},\r\n\t\t\t\tonCheckAll : function(rows) {\r\n\t\t\t\t},\r\n\t\t\t\tonUncheckAll : function(rows) {\r\n\t\t\t\t},\r\n\t\t\t\tonBeforeEdit : function(_245, _246) {\r\n\t\t\t\t},\r\n\t\t\t\tonBeginEdit : function(_247, _248) {\r\n\t\t\t\t},\r\n\t\t\t\tonEndEdit : function(_249, _24a, _24b) {\r\n\t\t\t\t},\r\n\t\t\t\tonAfterEdit : function(_24c, _24d, _24e) {\r\n\t\t\t\t},\r\n\t\t\t\tonCancelEdit : function(_24f, _250) {\r\n\t\t\t\t},\r\n\t\t\t\tonHeaderContextMenu : function(e, _251) {\r\n\t\t\t\t},\r\n\t\t\t\tonRowContextMenu : function(e, _252, _253) {\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t\tDataGrid.parseOptions = function(gridDom) {\r\n\t\t\t\tvar t = $(gridDom);\r\n\t\t\t\treturn $.extend({}, Panel.parseOptions(gridDom), t\r\n\t\t\t\t\t\t\t\t.parseOptions(gridDom, [\"url\", \"toolbar\",\r\n\t\t\t\t\t\t\t\t\t\t\t\t\"idField\", \"sortName\",\r\n\t\t\t\t\t\t\t\t\t\t\t\t\"sortOrder\", \"pagePosition\",\r\n\t\t\t\t\t\t\t\t\t\t\t\t\"resizeHandle\", {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tsharedStyleSheet : \"boolean\",\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tfitColumns : \"boolean\",\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tautoRowHeight : \"boolean\",\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tstriped : \"boolean\",\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tnowrap : \"boolean\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t}, {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\trownumbers : \"boolean\",\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tsingleSelect : \"boolean\",\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tctrlSelect : \"boolean\",\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tcheckOnSelect : \"boolean\",\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tselectOnCheck : \"boolean\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t}, {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tpagination : \"boolean\",\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tpageSize : \"number\",\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tpageNumber : \"number\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t}, {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tmultiSort : \"boolean\",\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tremoteSort : \"boolean\",\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tshowHeader : \"boolean\",\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tshowFooter : \"boolean\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t}, {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tscrollbarSize : \"number\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t}]), {\r\n\t\t\t\t\t\t\tpageList : (t.attr(\"pageList\") ? eval(t\r\n\t\t\t\t\t\t\t\t\t.attr(\"pageList\")) : undefined),\r\n\t\t\t\t\t\t\tloadMsg : (t.attr(\"loadMsg\") != undefined ? t\r\n\t\t\t\t\t\t\t\t\t.attr(\"loadMsg\") : undefined),\r\n\t\t\t\t\t\t\trowStyler : (t.attr(\"rowStyler\") ? eval(t\r\n\t\t\t\t\t\t\t\t\t.attr(\"rowStyler\")) : undefined)\r\n\t\t\t\t\t\t});\r\n\t\t\t}\r\n\r\n\t\t\t$.fn.datagrid = function(options, param) {\r\n\t\t\t\t// console.log(arguments)\r\n\t\t\t\tvar methodReturn;\r\n\r\n\t\t\t\toptions = options || {};\r\n\t\t\t\t$set = this.each(function() {\r\n\t\t\t\t\t\t\tvar $this = $(this);\r\n\t\t\t\t\t\t\tvar state = $.data(this, 'datagrid');\r\n\t\t\t\t\t\t\tvar gridObj = $this.data('datagridObj');\r\n\t\t\t\t\t\t\tif (state) {\r\n\t\t\t\t\t\t\t\tif (typeof options === 'object') {\r\n\t\t\t\t\t\t\t\t\topts = $.extend(state.options, options);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\toptions.element = this;\r\n\t\t\t\t\t\t\t\tgridObj = new DataGrid(this, options);\r\n\t\t\t\t\t\t\t\t$this.data('datagridObj', gridObj);\r\n\t\t\t\t\t\t\t\t// data._init(this);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tif (typeof options === 'string')\r\n\t\t\t\t\t\t\t\tmethodReturn = gridObj[options](param);\r\n\t\t\t\t\t\t});\r\n\t\t\t\treturn (methodReturn === undefined) ? $set : methodReturn;\r\n\t\t\t};\r\n\t\t\tDataGrid.GridView = GridView;\r\n\t\t\treturn DataGrid;\r\n\t\t});\r\n\n",
    "/**\r\n * \r\n */\r\ndefine(\t'app/widgets/treegrid/app-treegrid',[\"app/core/app-jquery\", \"app/core/app-core\", \"app/core/app-options\",\r\n\t\t\t\t\"jquery/jquery-ui\", \"app/widgets/app-widget\",\r\n\t\t\t\t\"app/widgets/treegrid/app-datagrid\", \"app/data/app-ajax\"],\r\n\t\tfunction($, $A, Opts, resizable, Widget, DataGrid, AppAjax) {\r\n\r\n\t\t\tvar treeUtils = {\r\n\t\t\t\t/**\r\n\t\t\t\t * Get the index of array item, return -1 when the item is not\r\n\t\t\t\t * found.\r\n\t\t\t\t */\r\n\t\t\t\tindexOfArray : function(a, o, id) {\r\n\t\t\t\t\tfor (var i = 0, len = a.length; i < len; i++) {\r\n\t\t\t\t\t\tif (id == undefined) {\r\n\t\t\t\t\t\t\tif (a[i] == o) {\r\n\t\t\t\t\t\t\t\treturn i;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tif (a[i][o] == id) {\r\n\t\t\t\t\t\t\t\treturn i;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn -1;\r\n\t\t\t\t},\r\n\t\t\t\t/**\r\n\t\t\t\t * Remove array item, 'o' parameter can be item object or id\r\n\t\t\t\t * field name. When 'o' parameter is the id field name, the 'id'\r\n\t\t\t\t * parameter is valid.\r\n\t\t\t\t */\r\n\t\t\t\tremoveArrayItem : function(a, o, id) {\r\n\t\t\t\t\tif (typeof o == 'string') {\r\n\t\t\t\t\t\tfor (var i = 0, len = a.length; i < len; i++) {\r\n\t\t\t\t\t\t\tif (a[i][o] == id) {\r\n\t\t\t\t\t\t\t\ta.splice(i, 1);\r\n\t\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tvar index = this.indexOfArray(a, o);\r\n\t\t\t\t\t\tif (index != -1) {\r\n\t\t\t\t\t\t\ta.splice(index, 1);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\t/**\r\n\t\t\t\t * Add un-duplicate array item, 'o' parameter is the id field\r\n\t\t\t\t * name, if the 'r' object is exists, deny the action.\r\n\t\t\t\t */\r\n\t\t\t\taddArrayItem : function(a, o, r) {\r\n\t\t\t\t\tvar index = this.indexOfArray(a, o, r ? r[o] : undefined);\r\n\t\t\t\t\tif (index == -1) {\r\n\t\t\t\t\t\ta.push(r ? r : o);\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\ta[index] = r ? r : o;\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\tgetArrayItem : function(a, o, id) {\r\n\t\t\t\t\tvar index = this.indexOfArray(a, o, id);\r\n\t\t\t\t\treturn index == -1 ? null : a[index];\r\n\t\t\t\t},\r\n\t\t\t\tforEach : function(data, deep, callback) {\r\n\t\t\t\t\tvar nodes = [];\r\n\t\t\t\t\tfor (var i = 0; i < data.length; i++) {\r\n\t\t\t\t\t\tnodes.push(data[i]);\r\n\t\t\t\t\t}\r\n\t\t\t\t\twhile (nodes.length) {\r\n\t\t\t\t\t\tvar node = nodes.shift();\r\n\t\t\t\t\t\tif (callback(node) == false) {\r\n\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (deep && node.children) {\r\n\t\t\t\t\t\t\tfor (var i = node.children.length - 1; i >= 0; i--) {\r\n\t\t\t\t\t\t\t\tnodes.unshift(node.children[i]);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tvar TreeGrid = DataGrid.extend({\r\n\t\t\t\tgrid : null,\r\n\t\t\t\t\r\n\t\t\t\tinitialize : function(el, opt) {\r\n\t\t\t\t\tthis.element = el;\r\n\t\t\t\t\tvar defaultOpt;\r\n\t\t\t\t\tif (!opt) {\r\n\t\t\t\t\t\topt = {};\r\n\t\t\t\t\t}\r\n\t\t\t\t\tvar _self = this;\r\n\t\t\t\t\tif (!opt.view) {\r\n\t\t\t\t\t\topt.view = new TreeGridView(this);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tdefaultOpt = $.data(el, \"treegrid\", {\r\n\t\t\t\t\t\toptions : $.extend({}, TreeGrid.defaults, TreeGrid\r\n\t\t\t\t\t\t\t\t\t\t.parseOptions(el), {\r\n\t\t\t\t\t\t\t\t\tfinder : {\r\n\t\t\t\t\t\t\t\t\t\tgetTr : function(target, id, type, _111) {\r\n\t\t\t\t\t\t\t\t\t\t\ttype = type || \"body\";\r\n\t\t\t\t\t\t\t\t\t\t\t_111 = _111 || 0;\r\n\t\t\t\t\t\t\t\t\t\t\tvar dc = $.data(target, \"datagrid\").dc;\r\n\t\t\t\t\t\t\t\t\t\t\tif (_111 == 0) {\r\n\t\t\t\t\t\t\t\t\t\t\t\tvar opts = $.data(target,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\"treegrid\").options;\r\n\t\t\t\t\t\t\t\t\t\t\t\tvar tr1 = opts.finder.getTr(\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\ttarget, id, type, 1);\r\n\t\t\t\t\t\t\t\t\t\t\t\tvar tr2 = opts.finder.getTr(\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\ttarget, id, type, 2);\r\n\t\t\t\t\t\t\t\t\t\t\t\treturn tr1.add(tr2);\r\n\t\t\t\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\t\t\t\tif (type == \"body\") {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tvar tr = $(\"#\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t+ $.data(target,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\"datagrid\").rowIdPrefix\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t+ \"-\" + _111 + \"-\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t+ id);\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tif (!tr.length) {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\ttr = (_111 == 1\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t? dc.body1\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t: dc.body2)\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t.find(\"tr[node-id=\\\"\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t+ id\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t+ \"\\\"]\");\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\treturn tr;\r\n\t\t\t\t\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tif (type == \"footer\") {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\treturn (_111 == 1\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t? dc.footer1\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t: dc.footer2)\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t.find(\"tr[node-id=\\\"\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t+ id\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t+ \"\\\"]\");\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tif (type == \"selected\") {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\treturn (_111 == 1\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t? dc.body1\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t: dc.body2)\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t.find(\"tr.datagrid-row-selected\");\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tif (type == \"highlight\") {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\treturn (_111 == 1\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t? dc.body1\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t: dc.body2)\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t.find(\"tr.datagrid-row-over\");\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tif (type == \"checked\") {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\treturn (_111 == 1\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t? dc.body1\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t: dc.body2)\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t.find(\"tr.datagrid-row-checked\");\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tif (type == \"last\") {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\treturn (_111 == 1\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t? dc.body1\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t: dc.body2)\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t.find(\"tr:last[node-id]\");\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tif (type == \"allbody\") {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\treturn (_111 == 1\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t? dc.body1\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t: dc.body2)\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t.find(\"tr[node-id]\");\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tif (type == \"allfooter\") {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\treturn (_111 == 1\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t? dc.footer1\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t: dc.footer2)\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t.find(\"tr[node-id]\");\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t\t\tgetRow : function(p) {\r\n\t\t\t\t\t\t\t\t\t\t\tvar id = (typeof p == \"object\") ? p\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t.attr(\"node-id\") : p;\r\n\t\t\t\t\t\t\t\t\t\t\treturn _self.find(id);\r\n\t\t\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t\t\tgetRows : function(_113) {\r\n\t\t\t\t\t\t\t\t\t\t\treturn _self.getChildren();\r\n\t\t\t\t\t\t\t\t\t\t\t// $(_113).treegrid(\"getChildren\");\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t}, opt),\r\n\t\t\t\t\t\tcheckedRows : [],\r\n\t\t\t\t\t\tdata : []\r\n\t\t\t\t\t});\r\n\t\t\t\t\tvar _self = this;\r\n\t\t\t\t\tvar opts = defaultOpt.options\r\n\t\t\t\t\tvar gridOpts = $.extend({}, opts, {\r\n\t\t\t\t\t\t\t\turl : null,\r\n\t\t\t\t\t\t\t\tdata : null,\r\n\t\t\t\t\t\t\t\telement : el,\r\n\t\t\t\t\t\t\t\tautoLoad : false,\r\n\t\t\t\t\t\t\t\tloader : function() {\r\n\t\t\t\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\tonResizeColumn : function(field, width) {\r\n\t\t\t\t\t\t\t\t\t_self.fixRowHeight();\r\n\t\t\t\t\t\t\t\t\t_self.trigger(\"onResizeColumn\", field,\r\n\t\t\t\t\t\t\t\t\t\t\twidth);\r\n\t\t\t\t\t\t\t\t\t// opts.onResizeColumn.call(_5, _6);\r\n\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\tonSortColumn : function(_sortName, sortOrder) {\r\n\t\t\t\t\t\t\t\t\topts.sortName = _sortName;\r\n\t\t\t\t\t\t\t\t\topts.sortOrder = sortOrder;\r\n\t\t\t\t\t\t\t\t\tif (opts.remoteSort) {\r\n\t\t\t\t\t\t\t\t\t\t_1f(_2);\r\n\t\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\t\tvar _9 = _self.loadData(\"getData\");\r\n\t\t\t\t\t\t\t\t\t\t_self.loadData(_9);\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t// opts.onSortColumn.call(_7, _8);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\tthis.grid = new DataGrid(el, gridOpts)\r\n\t\t\t\t\t\r\n\t\t\t\t\t\r\n\t\t\t\t\t$.data(el, \"datagridObj\",this.grid);\r\n\t\t\t\t\tDataGrid.superclass.initialize.call(this, opts);\r\n\t\t\t\t\tif (!opts.columns) {\r\n\t\t\t\t\t\tvar options = $.data(el, \"datagrid\").options;\r\n\t\t\t\t\t\topts.columns = options.columns;\r\n\t\t\t\t\t\topts.frozenColumns = options.frozenColumns;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tdefaultOpt.dc = $.data(el, \"datagrid\").dc;\r\n\t\t\t\t\tif (opts.data) {\r\n\t\t\t\t\t\tthis.loadData(opts.data);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tthis.nodeLoad();\r\n\t\t\t\t\tthis.bindNodeEvent();\r\n\t\t\t\t\tthis.addEvents(\"onLoadSuccess\", \"onLoadError\",\r\n\t\t\t\t\t\t\t\"onBeforeLoad\", \"onClickRow\", \"onDblClickRow\",\r\n\t\t\t\t\t\t\t\"onClickCell\", \"onDblClickCell\", \"onSortColumn\",\r\n\t\t\t\t\t\t\t\"onResizeColumn\", \"onSelect\", \"onUnselect\",\r\n\t\t\t\t\t\t\t\"onSelectAll\", \"onUnselectAll\", \"onCheck\",\r\n\t\t\t\t\t\t\t\"onUncheck\", \"onCheckAll\", \"onUncheckAll\",\r\n\t\t\t\t\t\t\t\"onBeforeEdit\", \"onAfterEdit\", \"onCancelEdit\",\r\n\t\t\t\t\t\t\t\"onHeaderContextMenu\", \"onAfterRender\",\r\n\t\t\t\t\t\t\t\"onRowContextMenu\")\r\n\t\t\t\t},\r\n\t\t\t\ttoTreeNodeData : function(record) {\r\n\t\t\t\t\tvar node = {\r\n\t\t\t\t\t\t// text : this.formatText(record),\r\n\t\t\t\t\t\tchildren : [],\r\n\t\t\t\t\t\tstate : this.get(\"asyTree\") ? \"closed\" : \"open\"\r\n\t\t\t\t\t};\r\n\t\t\t\t\t/*\r\n\t\t\t\t\t * if(this.autoNodeId !== true) { Ext.apply(node, { id :\r\n\t\t\t\t\t * record[this.keyField] }); }\r\n\t\t\t\t\t */\r\n\t\t\t\t\t/*\r\n\t\t\t\t\t * if (this.checked == true) { node[\"checked\"] =\r\n\t\t\t\t\t * record[this.checkField] ? record[this.checkField] : false }\r\n\t\t\t\t\t */\r\n\t\t\t\t\tnode = $.extend(node, record);\r\n\t\t\t\t\treturn node;\r\n\t\t\t\t},\r\n\t\t\t\tlistToTreeData : function(treeDataList) {\r\n\t\t\t\t\tvar parentIdMap = {};\r\n\t\t\t\t\tvar IdMap = {};\r\n\t\t\t\t\tvar parentMapId;\r\n\t\t\t\t\tfor (var i = 0; i < treeDataList.length; i++) {\r\n\r\n\t\t\t\t\t\tparentMapId = treeDataList[i][this.get(\"parentField\")]\r\n\t\t\t\t\t\t\t\t|| this.get(\"rootId\");\r\n\t\t\t\t\t\ttreeDataList[i][this.get(\"parentField\")] = parentMapId;\r\n\t\t\t\t\t\tif (!parentIdMap[parentMapId.toString()]) {\r\n\t\t\t\t\t\t\tparentIdMap[parentMapId.toString()] = {};\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tparentIdMap[parentMapId.toString()][treeDataList[i][this\r\n\t\t\t\t\t\t\t\t.get(\"idField\")]] = {\r\n\t\t\t\t\t\t\tdata : treeDataList[i],\r\n\t\t\t\t\t\t\tchildren : {}\r\n\t\t\t\t\t\t};\r\n\t\t\t\t\t\tIdMap[treeDataList[i][this.get(\"idField\")]] = {\r\n\t\t\t\t\t\t\tdata : treeDataList[i],\r\n\t\t\t\t\t\t\tchildren : []\r\n\t\t\t\t\t\t};\r\n\t\t\t\t\t};\r\n\t\t\t\t\tvar rootId, rootList = [];\r\n\t\t\t\t\tfor (var pId in parentIdMap) {\r\n\t\t\t\t\t\tif (!IdMap[pId]) {\r\n\t\t\t\t\t\t\trootId = pId;\r\n\t\t\t\t\t\t\trootList.push(pId);\r\n\t\t\t\t\t\t\t// break;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t};\r\n\t\t\t\t\tvar _self = this;\r\n\t\t\t\t\tvar createTree = function(rootData, parentIdMap) {\r\n\t\t\t\t\t\tvar nodedata;\r\n\t\t\t\t\t\tvar treedata = [];\r\n\t\t\t\t\t\tfor (var p in rootData) {\r\n\t\t\t\t\t\t\tnodedata = _self\r\n\t\t\t\t\t\t\t\t\t.toTreeNodeData(rootData[p][\"data\"]);\r\n\t\t\t\t\t\t\tif (parentIdMap[p]) {\r\n\t\t\t\t\t\t\t\trootData[p][\"children\"] = parentIdMap[p];\r\n\t\t\t\t\t\t\t\tnodedata.children = createTree(\r\n\t\t\t\t\t\t\t\t\t\trootData[p][\"children\"], parentIdMap);\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\trootData[p][\"children\"] = null;\r\n\t\t\t\t\t\t\t};\r\n\t\t\t\t\t\t\tif (nodedata.children.length == 0) {\r\n\t\t\t\t\t\t\t\tdelete nodedata.children;\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tnodedata.leaf = false;\r\n\t\t\t\t\t\t\t};\r\n\t\t\t\t\t\t\ttreedata.push(nodedata);\r\n\t\t\t\t\t\t};\r\n\t\t\t\t\t\treturn treedata;\r\n\t\t\t\t\t};\r\n\t\t\t\t\tvar treeData = [];\r\n\t\t\t\t\tvar temarr;\r\n\t\t\t\t\t// var treeData = createTree(rootData, parentIdMap);\r\n\t\t\t\t\tfor (var i = 0; i < rootList.length; i++) {\r\n\t\t\t\t\t\tvar rootData = parentIdMap[rootList[i]];\r\n\t\t\t\t\t\ttemarr = createTree(rootData, parentIdMap);\r\n\t\t\t\t\t\ttreeData = treeData.concat(temarr);\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn treeData;\r\n\t\t\t\t},\r\n\t\t\t\tbindNodeEvent : function() {\r\n\t\t\t\t\tvar target = this.element;\r\n\t\t\t\t\tvar dc = $.data(target, \"datagrid\").dc;\r\n\t\t\t\t\tvar body2 = dc.body1.add(dc.body2);\r\n\t\t\t\t\tvar _self = this;\r\n\t\t\t\t\tvar _2f = ($.data(body2[0], \"events\") || $._data(body2[0],\r\n\t\t\t\t\t\t\t\"events\")).click[0].handler;\r\n\t\t\t\t\tdc.body1.add(dc.body2).bind(\"mouseover\", function(e) {\r\n\t\t\t\t\t\tvar tt = $(e.target);\r\n\t\t\t\t\t\tvar tr = tt.closest(\"tr.datagrid-row\");\r\n\t\t\t\t\t\tif (!tr.length) {\r\n\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (tt.hasClass(\"tree-hit\")) {\r\n\t\t\t\t\t\t\ttt.hasClass(\"tree-expanded\") ? tt\r\n\t\t\t\t\t\t\t\t\t.addClass(\"tree-expanded-hover\") : tt\r\n\t\t\t\t\t\t\t\t\t.addClass(\"tree-collapsed-hover\");\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}).bind(\"mouseout\", function(e) {\r\n\t\t\t\t\t\tvar tt = $(e.target);\r\n\t\t\t\t\t\tvar tr = tt.closest(\"tr.datagrid-row\");\r\n\t\t\t\t\t\tif (!tr.length) {\r\n\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (tt.hasClass(\"tree-hit\")) {\r\n\t\t\t\t\t\t\ttt.hasClass(\"tree-expanded\") ? tt\r\n\t\t\t\t\t\t\t\t\t.removeClass(\"tree-expanded-hover\") : tt\r\n\t\t\t\t\t\t\t\t\t.removeClass(\"tree-collapsed-hover\");\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}).unbind(\"click\").bind(\"click\", function(e) {\r\n\t\t\t\t\t\t\t\tvar tt = $(e.target);\r\n\t\t\t\t\t\t\t\tvar tr = tt.closest(\"tr.datagrid-row\");\r\n\t\t\t\t\t\t\t\tif (!tr.length) {\r\n\t\t\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tif (tt.hasClass(\"tree-hit\")) {\r\n\t\t\t\t\t\t\t\t\t_self.toggle(tr.attr(\"node-id\"));\r\n\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\t_2f(e);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t},\r\n\t\t\t\tnodeLoad : function(nodeId, queryParams, parentId, callback) {\r\n\t\t\t\t\tvar target = this.element;\r\n\t\t\t\t\tvar opts = $.data(target, \"treegrid\").options;\r\n\t\t\t\t\tvar gridBody = this.getPanel().find(\"div.datagrid-body\");\r\n\t\t\t\t\tvar _self = this;\r\n\t\t\t\t\tif (queryParams) {\r\n\t\t\t\t\t\topts.queryParams = queryParams;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tvar params = $.extend({}, opts.queryParams);\r\n\t\t\t\t\tif (opts.pagination) {\r\n\t\t\t\t\t\t$.extend(params, {\r\n\t\t\t\t\t\t\t\t\tpage : opts.pageNumber,\r\n\t\t\t\t\t\t\t\t\trows : opts.pageSize\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (opts.sortName) {\r\n\t\t\t\t\t\t$.extend(params, {\r\n\t\t\t\t\t\t\t\t\tsort : opts.sortName,\r\n\t\t\t\t\t\t\t\t\torder : opts.sortOrder\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t\tvar row = this.find(nodeId);\r\n\t\t\t\t\tif (this.trigger(\"onBeforeLoad\", row, params) == false) {\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tvar parentNode = gridBody.find(\"tr[node-id=\\\"\" + nodeId\r\n\t\t\t\t\t\t\t+ \"\\\"] span.tree-folder\");\r\n\t\t\t\t\tparentNode.addClass(\"tree-loading\");\r\n\t\t\t\t\tthis.loading();\r\n\t\t\t\t\tvar _4f = opts.loader.call(this, params, function(data) {\r\n\t\t\t\t\t\t\t\tparentNode.removeClass(\"tree-loading\");\r\n\t\t\t\t\t\t\t\t_self.loaded();\r\n\t\t\t\t\t\t\t\t_self.loadNodeData(nodeId, data, parentId);\r\n\t\t\t\t\t\t\t\tif (callback) {\r\n\t\t\t\t\t\t\t\t\tcallback();\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}, function() {\r\n\t\t\t\t\t\t\t\tparentNode.removeClass(\"tree-loading\");\r\n\t\t\t\t\t\t\t\t_self.loaded();\r\n\t\t\t\t\t\t\t\t_self.trigger(\"onLoadError\", arguments);\r\n\t\t\t\t\t\t\t\tif (callback) {\r\n\t\t\t\t\t\t\t\t\tcallback();\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\tif (_4f == false) {\r\n\t\t\t\t\t\tparentNode.removeClass(\"tree-loading\");\r\n\t\t\t\t\t\t_self.loaded();\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t},\r\n\t\t\t\toptions : function() {\r\n\t\t\t\t\treturn $.data(this.element, \"treegrid\").options;\r\n\t\t\t\t},\r\n\t\t\t\tresize : function(_b5) {\r\n\t\t\t\t\t// this.resize(_b5)\r\n\t\t\t\t\tTreeGrid.superclass.resize.call(this, _b5)\r\n\t\t\t\t},\r\n\t\t\t\tfixRowHeight : function(rowIndex) {\r\n\t\t\t\t\t/*\r\n\t\t\t\t\t * return jq.each(function() { _20(this, _b6); });\r\n\t\t\t\t\t */\r\n\t\t\t\t\tvar target = this.element;\r\n\t\t\t\t\tvar opts = $.data(target, \"datagrid\").options;\r\n\t\t\t\t\tvar dc = $.data(target, \"datagrid\").dc;\r\n\t\t\t\t\tif (!dc.body1.is(\":empty\")\r\n\t\t\t\t\t\t\t&& (!opts.nowrap || opts.autoRowHeight)) {\r\n\t\t\t\t\t\tif (rowIndex != undefined) {\r\n\t\t\t\t\t\t\tvar children = this.getChildren(rowIndex);\r\n\t\t\t\t\t\t\tfor (var i = 0; i < children.length; i++) {\r\n\t\t\t\t\t\t\t\tsetRowHeight(children[i][opts.idField]);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tTreeGrid.superclass.fixRowHeight.call(this, rowIndex)\r\n\r\n\t\t\t\t\tfunction setRowHeight(nodeId) {\r\n\t\t\t\t\t\tvar tr1 = opts.finder.getTr(target, nodeId, \"body\", 1);\r\n\t\t\t\t\t\tvar tr2 = opts.finder.getTr(target, nodeId, \"body\", 2);\r\n\t\t\t\t\t\ttr1.css(\"height\", \"\");\r\n\t\t\t\t\t\ttr2.css(\"height\", \"\");\r\n\t\t\t\t\t\tvar _28 = Math.max(tr1.height(), tr2.height());\r\n\t\t\t\t\t\ttr1.css(\"height\", _28);\r\n\t\t\t\t\t\ttr2.css(\"height\", _28);\r\n\t\t\t\t\t};\r\n\t\t\t\t},\r\n\t\t\t\tloadNodeData : function(nodeId, data, _3d) {\r\n\t\t\t\t\tvar target = this.element;\r\n\t\t\t\t\tvar _3e = $.data(target, \"treegrid\");\r\n\t\t\t\t\tvar opts = _3e.options;\r\n\t\t\t\t\tvar dc = _3e.dc;\r\n\t\t\t\t\tdata = opts.loadFilter.call(target, data, nodeId);\r\n\t\t\t\t\tvar node = this.find(nodeId);\r\n\t\t\t\t\tif (node) {\r\n\t\t\t\t\t\tvar _42 = opts.finder.getTr(target, nodeId, \"body\", 1);\r\n\t\t\t\t\t\tvar _43 = opts.finder.getTr(target, nodeId, \"body\", 2);\r\n\t\t\t\t\t\tvar cc1 = _42.next(\"tr.treegrid-tr-tree\")\r\n\t\t\t\t\t\t\t\t.children(\"td\").children(\"div\");\r\n\t\t\t\t\t\tvar cc2 = _43.next(\"tr.treegrid-tr-tree\")\r\n\t\t\t\t\t\t\t\t.children(\"td\").children(\"div\");\r\n\t\t\t\t\t\tif (!_3d) {\r\n\t\t\t\t\t\t\tnode.children = [];\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tvar cc1 = dc.body1;\r\n\t\t\t\t\t\tvar cc2 = dc.body2;\r\n\t\t\t\t\t\tif (!_3d) {\r\n\t\t\t\t\t\t\t_3e.data = [];\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (!_3d) {\r\n\t\t\t\t\t\tcc1.empty();\r\n\t\t\t\t\t\tcc2.empty();\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (opts.view.onBeforeRender) {\r\n\t\t\t\t\t\topts.view.onBeforeRender.call(opts.view, nodeId, data);\r\n\t\t\t\t\t}\r\n\t\t\t\t\topts.view.render.call(opts.view, cc1, true);\r\n\t\t\t\t\topts.view.render.call(opts.view, cc2, false);\r\n\t\t\t\t\tif (opts.showFooter) {\r\n\t\t\t\t\t\topts.view.renderFooter\r\n\t\t\t\t\t\t\t\t.call(opts.view, dc.footer1, true);\r\n\t\t\t\t\t\topts.view.renderFooter.call(opts.view, dc.footer2,\r\n\t\t\t\t\t\t\t\tfalse);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (opts.view.onAfterRender) {\r\n\t\t\t\t\t\topts.view.onAfterRender.call(opts.view, target);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (!nodeId && opts.pagination) {\r\n\t\t\t\t\t\tvar _44 = $.data(target, \"treegrid\").total;\r\n\t\t\t\t\t\tvar _45 = this.grid.getPager();\r\n\t\t\t\t\t\tif (_45.pagination(\"options\").total != _44) {\r\n\t\t\t\t\t\t\t_45.pagination({\r\n\t\t\t\t\t\t\t\t\t\ttotal : _44\r\n\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tthis.fixRowHeight();\r\n\t\t\t\t\tthis.setRownumber();\r\n\t\t\t\t\tthis.showLines();\r\n\t\t\t\t\tthis.setSelectionState();\r\n\t\t\t\t\tthis.autoSizeColumn();\r\n\t\t\t\t\t// $(target).treegrid(\"showLines\");\r\n\t\t\t\t\t// $(target).treegrid(\"setSelectionState\");\r\n\t\t\t\t\t// $(target).treegrid(\"autoSizeColumn\");\r\n\t\t\t\t\tthis.trigger(\"onLoadSuccess\", node, data)\r\n\t\t\t\t\t// opts.onLoadSuccess.call(this, node, data);\r\n\t\t\t\t},\r\n\t\t\t\tsetRownumber : function() {\r\n\t\t\t\t\tvar dc = $.data(this.element, \"datagrid\").dc;\r\n\t\t\t\t\tvar opts = $.data(this.element, \"treegrid\").options;\r\n\t\t\t\t\tif (!opts.rownumbers) {\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tdc.body1.find(\"div.datagrid-cell-rownumber\").each(\r\n\t\t\t\t\t\t\tfunction(i) {\r\n\t\t\t\t\t\t\t\t$(this).html(i + 1);\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t},\r\n\t\t\t\tloadData : function(data) {\r\n\t\t\t\t\t/*\r\n\t\t\t\t\t * return jq.each(function() { _39(this, _b7.parent, _b7);\r\n\t\t\t\t\t * });\r\n\t\t\t\t\t */\r\n\t\t\t\t\tthis.loadNodeData(data.parent, data)\r\n\t\t\t\t},\r\n\t\t\t\tload : function(param) {\r\n\t\t\t\t\t// return jq.each(function() {\r\n\t\t\t\t\tthis.options().pageNumber = 1;\r\n\t\t\t\t\tthis.getPager().pagination({\r\n\t\t\t\t\t\t\t\tpageNumber : 1\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t// $(this).treegrid(\"reload\", param);\r\n\t\t\t\t\tthis.reload(param)\r\n\t\t\t\t\t// });\r\n\t\t\t\t},\r\n\t\t\t\treload : function(id) {\r\n\t\t\t\t\tvar opts = this.options();\r\n\t\t\t\t\tvar queryParams = {};\r\n\t\t\t\t\tif (typeof id == \"object\") {\r\n\t\t\t\t\t\tqueryParams = id;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tqueryParams = $.extend({}, opts.queryParams);\r\n\t\t\t\t\t\tqueryParams.id = id;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (queryParams.id) {\r\n\t\t\t\t\t\tvar _bb = $(this).treegrid(\"find\", queryParams.id);\r\n\t\t\t\t\t\tif (_bb.children) {\r\n\t\t\t\t\t\t\t_bb.children.splice(0, _bb.children.length);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\topts.queryParams = queryParams;\r\n\t\t\t\t\t\tvar tr = opts.finder.getTr(this, queryParams.id);\r\n\t\t\t\t\t\ttr.next(\"tr.treegrid-tr-tree\").remove();\r\n\t\t\t\t\t\ttr\r\n\t\t\t\t\t\t\t\t.find(\"span.tree-hit\")\r\n\t\t\t\t\t\t\t\t.removeClass(\"tree-expanded tree-expanded-hover\")\r\n\t\t\t\t\t\t\t\t.addClass(\"tree-collapsed\");\r\n\t\t\t\t\t\tthis.expand(queryParams.id);\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tthis.nodeLoad(null, queryParams);\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t},\r\n\t\t\t\treloadFooter : function(_bc) {\r\n\t\t\t\t\treturn jq.each(function() {\r\n\t\t\t\t\t\t\t\tvar _bd = $.data(this, \"treegrid\").options;\r\n\t\t\t\t\t\t\t\tvar dc = $.data(this, \"datagrid\").dc;\r\n\t\t\t\t\t\t\t\tif (_bc) {\r\n\t\t\t\t\t\t\t\t\t$.data(this, \"treegrid\").footer = _bc;\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tif (_bd.showFooter) {\r\n\t\t\t\t\t\t\t\t\t_bd.view.renderFooter.call(_bd.view, this,\r\n\t\t\t\t\t\t\t\t\t\t\tdc.footer1, true);\r\n\t\t\t\t\t\t\t\t\t_bd.view.renderFooter.call(_bd.view, this,\r\n\t\t\t\t\t\t\t\t\t\t\tdc.footer2, false);\r\n\t\t\t\t\t\t\t\t\tif (_bd.view.onAfterRender) {\r\n\t\t\t\t\t\t\t\t\t\t_bd.view.onAfterRender.call(_bd.view,\r\n\t\t\t\t\t\t\t\t\t\t\t\tthis);\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t$(this).treegrid(\"fixRowHeight\");\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t},\r\n\t\t\t\tgetData : function() {\r\n\t\t\t\t\treturn $.data(this.element, \"treegrid\").data;\r\n\t\t\t\t},\r\n\t\t\t\tgetFooterRows : function() {\r\n\t\t\t\t\treturn $.data(this.element, \"treegrid\").footer;\r\n\t\t\t\t},\r\n\t\t\t\tgetRoot : function() {\r\n\t\t\t\t\tvar roots = this.getRoots();\r\n\t\t\t\t\tif (roots.length) {\r\n\t\t\t\t\t\treturn roots[0];\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\treturn null;\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\tgetRoots : function() {\r\n\t\t\t\t\treturn $.data(this.element, \"treegrid\").data;;\r\n\t\t\t\t},\r\n\t\t\t\tgetParent : function(id) {\r\n\t\t\t\t\tvar row = this.find(id);\r\n\t\t\t\t\tif (row._parentId) {\r\n\t\t\t\t\t\treturn this.find(row._parentId);\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\treturn null;\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\tgetChildren : function(id) {\r\n\t\t\t\t\t// return _25(this.element, id);\r\n\t\t\t\t\tvar _self = this;\r\n\t\t\t\t\tvar target = this.element;\r\n\t\t\t\t\tvar opts = $.data(target, \"treegrid\").options;\r\n\t\t\t\t\tvar panel = this.getPanel()\r\n\t\t\t\t\t\t\t.find(\"div.datagrid-view2 div.datagrid-body\");\r\n\t\t\t\t\tvar children = [];\r\n\t\t\t\t\tif (id) {\r\n\t\t\t\t\t\tfindChildrenById(id);\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tvar _5f = this.getRoots();\r\n\t\t\t\t\t\tfor (var i = 0; i < _5f.length; i++) {\r\n\t\t\t\t\t\t\tchildren.push(_5f[i]);\r\n\t\t\t\t\t\t\tfindChildrenById(_5f[i][opts.idField]);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tfunction findChildrenById(nodeId) {\r\n\t\t\t\t\t\tvar node = _self.find(nodeId);\r\n\t\t\t\t\t\tif (node && node.children) {\r\n\t\t\t\t\t\t\tfor (var i = 0, len = node.children.length; i < len; i++) {\r\n\t\t\t\t\t\t\t\tvar nodeChildren = node.children[i];\r\n\t\t\t\t\t\t\t\tchildren.push(nodeChildren);\r\n\t\t\t\t\t\t\t\tfindChildrenById(nodeChildren[opts.idField]);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t};\r\n\t\t\t\t\treturn children;\r\n\t\t\t\t},\r\n\t\t\t\tgetLevel : function(id) {\r\n\t\t\t\t\tif (!id) {\r\n\t\t\t\t\t\treturn 0;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tvar target = this.element\r\n\t\t\t\t\tvar _66 = $.data(target, \"treegrid\").options;\r\n\t\t\t\t\tvar _67 = this.getPanel().children(\"div.datagrid-view\");\r\n\t\t\t\t\tvar _68 = _67.find(\"div.datagrid-body tr[node-id=\\\"\" + id\r\n\t\t\t\t\t\t\t+ \"\\\"]\").children(\"td[field=\\\"\" + _66.treeField\r\n\t\t\t\t\t\t\t+ \"\\\"]\");\r\n\t\t\t\t\treturn _68.find(\"span.tree-indent,span.tree-hit\").length;\r\n\t\t\t\t},\r\n\t\t\t\tfind : function(id) {\r\n\t\t\t\t\t// return _self.find(this.element, id);\r\n\t\t\t\t\tif (!id){\r\n\t\t\t\t\t\treturn null;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tvar target = this.element;\r\n\t\t\t\t\tvar opts = $.data(target, \"treegrid\").options;\r\n\t\t\t\t\tvar data = $.data(target, \"treegrid\").data;\r\n\t\t\t\t\tvar nodes = [data];\r\n\t\t\t\t\twhile (nodes.length) {\r\n\t\t\t\t\t\tvar c = nodes.shift();\r\n\t\t\t\t\t\tfor (var i = 0; i < c.length; i++) {\r\n\t\t\t\t\t\t\tvar node = c[i];\r\n\t\t\t\t\t\t\tif (node[opts.idField] == id) {\r\n\t\t\t\t\t\t\t\treturn node;\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tif (node[\"children\"]) {\r\n\t\t\t\t\t\t\t\t\tnodes.push(node[\"children\"]);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn null;\r\n\t\t\t\t},\r\n\t\t\t\tisLeaf : function(id) {\r\n\t\t\t\t\tvar _be = $.data(this.element, \"treegrid\").options;\r\n\t\t\t\t\tvar tr = _be.finder.getTr(this.element, id);\r\n\t\t\t\t\tvar hit = tr.find(\"span.tree-hit\");\r\n\t\t\t\t\treturn hit.length == 0;\r\n\t\t\t\t},\r\n\t\t\t\tselect : function(id) {\r\n\t\t\t\t\treturn this.grid.selectRow(id);\r\n\t\t\t\t\t/*return jq.each(function() {\r\n\t\t\t\t\t\t\t\t$(this).datagrid(\"selectRow\", id);\r\n\t\t\t\t\t\t\t});*/\r\n\t\t\t\t},\r\n\t\t\t\tunselect : function(id) {\r\n\t\t\t\t\t/*return jq.each(function() {\r\n\t\t\t\t\t\t\t\t$(this).datagrid(\"unselectRow\", id);\r\n\t\t\t\t\t\t\t});*/\r\n\t\t\t\t\treturn this.grid.unselectRow(id);\r\n\t\t\t\t},\r\n\t\t\t\tcollapse : function(id) {\r\n\t\t\t\t\tvar target = this.element;\r\n\t\t\t\t\tvar opts = $.data(target, \"treegrid\").options;\r\n\t\t\t\t\tvar row = this.find(id);\r\n\t\t\t\t\tvar _self = this;\r\n\t\t\t\t\tvar tr = opts.finder.getTr(target, id);\r\n\t\t\t\t\tvar hit = tr.find(\"span.tree-hit\");\r\n\t\t\t\t\tif (hit.length == 0) {\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (hit.hasClass(\"tree-collapsed\")) {\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (this.trigger(\"onBeforeCollapse\", row) == false) {\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\t\t\t\t\thit.removeClass(\"tree-expanded tree-expanded-hover\")\r\n\t\t\t\t\t\t\t.addClass(\"tree-collapsed\");\r\n\t\t\t\t\thit.next().removeClass(\"tree-folder-open\");\r\n\t\t\t\t\trow.state = \"closed\";\r\n\t\t\t\t\ttr = tr.next(\"tr.treegrid-tr-tree\");\r\n\t\t\t\t\tvar cc = tr.children(\"td\").children(\"div\");\r\n\t\t\t\t\tif (opts.animate) {\r\n\t\t\t\t\t\tcc.slideUp(\"normal\", function() {\r\n\t\t\t\t\t\t\t\t\t_self.autoSizeColumn();\r\n\t\t\t\t\t\t\t\t\t_self.fixRowHeight(id);\r\n\t\t\t\t\t\t\t\t\t_self.trigger(\"onCollapse\", row);\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tcc.hide();\r\n\t\t\t\t\t\t_self.autoSizeColumn()\r\n\t\t\t\t\t\t_self.fixRowHeight(id);\r\n\t\t\t\t\t\t_self.trigger(\"onCollapse\", row)\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\trenderNodeChildren : function(id) {\r\n\t\t\t\t\tvar target = this.element;\r\n\t\t\t\t\tvar opts = $.data(target, \"treegrid\").options;\r\n\t\t\t\t\tvar tr1 = opts.finder.getTr(target, id, \"body\", 1);\r\n\t\t\t\t\tvar tr2 = opts.finder.getTr(target, id, \"body\", 2);\r\n\t\t\t\t\tvar colCount = this.getColumnFields(true).length\r\n\t\t\t\t\t\t\t+ (opts.rownumbers ? 1 : 0);\r\n\t\t\t\t\tvar colCount2 = this.getColumnFields(false).length;\r\n\t\t\t\t\taddNodeRow(tr1, colCount);\r\n\t\t\t\t\taddNodeRow(tr2, colCount2);\r\n\t\t\t\t\tfunction addNodeRow(tr, _38) {\r\n\t\t\t\t\t\t$(\"<tr class=\\\"treegrid-tr-tree\\\">\"\r\n\t\t\t\t\t\t\t\t+ \"<td style=\\\"border:0px\\\" colspan=\\\"\" + _38\r\n\t\t\t\t\t\t\t\t+ \"\\\">\" + \"<div></div>\" + \"</td>\" + \"</tr>\")\r\n\t\t\t\t\t\t\t\t.insertAfter(tr);\r\n\t\t\t\t\t};\r\n\r\n\t\t\t\t},\r\n\t\t\t\texpand : function(id) {\r\n\t\t\t\t\tvar target = this.element;\r\n\t\t\t\t\tvar opts = $.data(target, \"treegrid\").options;\r\n\t\t\t\t\tvar tr = opts.finder.getTr(target, id);\r\n\t\t\t\t\tvar hit = tr.find(\"span.tree-hit\");\r\n\t\t\t\t\tvar row = this.find(id);\r\n\t\t\t\t\tvar _self = this;\r\n\t\t\t\t\tif (hit.length == 0) {\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (hit.hasClass(\"tree-expanded\")) {\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (this.trigger(\"onBeforeExpand\", row) == false) {\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\t\t\t\t\thit.removeClass(\"tree-collapsed tree-collapsed-hover\")\r\n\t\t\t\t\t\t\t.addClass(\"tree-expanded\");\r\n\t\t\t\t\thit.next().addClass(\"tree-folder-open\");\r\n\t\t\t\t\tvar childrenDom = tr.next(\"tr.treegrid-tr-tree\");\r\n\t\t\t\t\tif (childrenDom.length) {\r\n\t\t\t\t\t\tvar cc = childrenDom.children(\"td\").children(\"div\");\r\n\t\t\t\t\t\tshow(cc);\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tthis.renderNodeChildren(row[opts.idField]);\r\n\t\t\t\t\t\tvar childrenDom = tr.next(\"tr.treegrid-tr-tree\");\r\n\t\t\t\t\t\tvar cc = childrenDom.children(\"td\").children(\"div\");\r\n\t\t\t\t\t\tcc.hide();\r\n\t\t\t\t\t\tvar queryParams = $.extend({}, opts.queryParams || {});\r\n\t\t\t\t\t\tvar queryParamFields = _self.get(\"queryParamFields\");\r\n\r\n\t\t\t\t\t\tqueryParams.id = row[opts.idField];\r\n\t\t\t\t\t\tif (queryParamFields) {\r\n\t\t\t\t\t\t\tvar paramFields = queryParamFields.split(\",\");\r\n\t\t\t\t\t\t\tfor (var i = 0; i < paramFields.length; i++) {\r\n\t\t\t\t\t\t\t\tqueryParams[paramFields[i]] = row[paramFields[i]];\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tthis.nodeLoad(row[opts.idField], queryParams, true,\r\n\t\t\t\t\t\t\t\tfunction() {\r\n\t\t\t\t\t\t\t\t\tif (cc.is(\":empty\")) {\r\n\t\t\t\t\t\t\t\t\t\tchildrenDom.remove();\r\n\t\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\t\tshow(cc);\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t\tfunction show(cc) {\r\n\t\t\t\t\t\trow.state = \"open\";\r\n\t\t\t\t\t\tif (opts.animate) {\r\n\t\t\t\t\t\t\tcc.slideDown(\"normal\", function() {\r\n\t\t\t\t\t\t\t\t\t\t_self.autoSizeColumn();\r\n\t\t\t\t\t\t\t\t\t\t_self.fixRowHeight(id);\r\n\t\t\t\t\t\t\t\t\t\t_self.trigger(\"onExpand\", row)\r\n\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tcc.show();\r\n\t\t\t\t\t\t\t_self.autoSizeColumn();\r\n\t\t\t\t\t\t\t_self.fixRowHeight(id);\r\n\t\t\t\t\t\t\t_self.trigger(\"onExpand\", row)\r\n\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t};\r\n\t\t\t\t},\r\n\t\t\t\ttoggle : function(id) {\r\n\t\t\t\t\tvar opts = $.data(this.element, \"treegrid\").options;\r\n\t\t\t\t\tvar tr = opts.finder.getTr(this.element, id);\r\n\t\t\t\t\tvar hit = tr.find(\"span.tree-hit\");\r\n\t\t\t\t\tif (hit.hasClass(\"tree-expanded\")) {\r\n\t\t\t\t\t\tthis.collapse(id);\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tthis.expand(id);\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\tcollapseAll : function(id) {\r\n\t\t\t\t\treturn jq.each(function() {\r\n\t\t\t\t\t\t\t\t_7c(this, id);\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t},\r\n\t\t\t\texpandAll : function(id) {\r\n\t\t\t\t\treturn jq.each(function() {\r\n\t\t\t\t\t\t\t\t_81(this, id);\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t},\r\n\t\t\t\texpandTo : function(id) {\r\n\t\t\t\t\treturn jq.each(function() {\r\n\t\t\t\t\t\t\t\t_86(this, id);\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t},\r\n\t\t\t\tappend : function(_bf) {\r\n\t\t\t\t\treturn jq.each(function() {\r\n\t\t\t\t\t\t\t\t_8a(this, _bf);\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t},\r\n\t\t\t\tgetCheckedNodes: function(checkedStatae) {\r\n\t\t\t\t\tcheckedStatae = checkedStatae || \"checked\";\r\n\t\t            var checkNode = [];\r\n\t\t            treeUtils.forEach($(this.element).data(\"treegrid\").checkedRows, false,\r\n\t\t            function(row) {\r\n\t\t                if (row.checkState == _e0) {\r\n\t\t                \tcheckNode.push(row);\r\n\t\t                }\r\n\t\t            });\r\n\t\t            return checkNode;\r\n\t\t        },\r\n\t\t\t\t checkNode: function(id) {\r\n\t\t\t\t\t\tthis.changeCheckNode(id,true)\r\n\t\t\t        },\r\n\t\t\t        uncheckNode: function(id) {\r\n\t\t\t        \tthis.changeCheckNode(id,false)\r\n\t\t\t        },\r\n\t\t\t\t\r\n\t\t\t\tchangeCheckNode : function(nodeId, checked, closeBeforeCheckEvent,\r\n\t\t\t\t\t\tcloseCheckNodeEvent) {\r\n\t\t\t\t\tvar opts = $.data(this.element, \"treegrid\");\r\n\t\t\t\t\tvar checkedRows = opts.checkedRows;\r\n\t\t\t\t\tvar options = opts.options;\r\n\t\t\t\t\tif (!options.checkbox) {\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tvar row = this.find(nodeId);\r\n\t\t\t\t\tif (!row.checkState) {\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tvar tr = options.finder.getTr(this.element,nodeId);\r\n\t\t\t\t\tvar ck = tr.find(\".tree-checkbox\");\r\n\t\t\t\t\tif (checked == undefined) {\r\n\t\t\t\t\t\tif (ck.hasClass(\"tree-checkbox1\")) {\r\n\t\t\t\t\t\t\tchecked = false;\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tif (ck.hasClass(\"tree-checkbox0\")) {\r\n\t\t\t\t\t\t\t\tchecked = true;\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tif (row._checked == undefined) {\r\n\t\t\t\t\t\t\t\t\trow._checked = ck\r\n\t\t\t\t\t\t\t\t\t\t\t.hasClass(\"tree-checkbox1\");\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tchecked = !row._checked;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\trow._checked = checked;\r\n\t\t\t\t\tif (checked) {\r\n\t\t\t\t\t\tif (ck.hasClass(\"tree-checkbox1\")) {\r\n\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tif (ck.hasClass(\"tree-checkbox0\")) {\r\n\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (!closeBeforeCheckEvent) {\r\n\t\t\t\t\t\tif (options.onBeforeCheckNode.call(row, checked) == false) {\r\n\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\t//半选状态\r\n\t\t\t\t\tif (options.cascadeCheck) {\r\n\t\t\t\t\t\tthis.setChildrenNodeChecBox(row, checked);\r\n\t\t\t\t\t\tthis.setParentNodeCheckbox(row);\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tthis.setNodeCheckBox(row, checked ? \"1\" : \"0\");\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (!closeCheckNodeEvent) {\r\n\t\t\t\t\t\toptions.onCheckNode.call(row, checked);\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t},\r\n\t\t\t\tsetChildrenNodeChecBox : function(row, checkboxValue) {\r\n\t\t\t\t\tcheckboxValue = checkboxValue ? 1 : 0;\r\n\t\t\t\t\tthis.setNodeCheckBox(row, checkboxValue);\r\n\t\t\t\t\tvar _self = this;\r\n\t\t\t\t\ttreeUtils.forEach(row.children || [], true, function(r) {\r\n\t\t\t\t\t\t\t\t_self.setNodeCheckBox(r, checkboxValue);\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t},\r\n\t\t\t\tsetParentNodeCheckbox : function(row) {\r\n\t\t\t\t\tvar options = $.data(this.element, \"treegrid\").options;\r\n\t\t\t\t\tvar parentNode = this.getParent(row[options.idField]);\r\n\t\t\t\t\tif (parentNode) {\r\n\t\t\t\t\t\tthis.setNodeCheckBox(parentNode, this\r\n\t\t\t\t\t\t\t\t\t\t.getNodeCheckValue(parentNode));\r\n\t\t\t\t\t\tthis.setParentNodeCheckbox(parentNode);\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\tgetNodeCheckValue : function(row) {\r\n\t\t\t\t\tvar len = 0;\r\n\t\t\t\t\tvar c0 = 0;\r\n\t\t\t\t\tvar c1 = 0;\r\n\t\t\t\t\ttreeUtils.forEach(row.children || [], false, function(r) {\r\n\t\t\t\t\t\t\t\tif (r.checkState) {\r\n\t\t\t\t\t\t\t\t\tlen++;\r\n\t\t\t\t\t\t\t\t\tif (r.checkState == \"checked\") {\r\n\t\t\t\t\t\t\t\t\t\tc1++;\r\n\t\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\t\tif (r.checkState == \"unchecked\") {\r\n\t\t\t\t\t\t\t\t\t\t\tc0++;\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\tif (len == 0) {\r\n\t\t\t\t\t\treturn undefined;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tvar checkValue = 0;\r\n\t\t\t\t\tif (c0 == len) {\r\n\t\t\t\t\t\tcheckValue = 0;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tif (c1 == len) {\r\n\t\t\t\t\t\t\tcheckValue = 1;\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tcheckValue = 2;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn checkValue;\r\n\t\t\t\t},\r\n\t\t\t\tsetNodeCheckBox : function(row, nodeCheckState) {\r\n\r\n\t\t\t\t\tvar treeGridObj = $.data(this.element, \"treegrid\");\r\n\t\t\t\t\tvar checkedRows = treeGridObj.checkedRows;\r\n\t\t\t\t\tvar options = treeGridObj.options;\r\n\t\t\t\t\tif (!row.checkState || nodeCheckState == undefined) {\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tvar tr = options.finder.getTr(this.element,row[options.idField]);\r\n\t\t\t\t\tvar ck = tr.find(\".tree-checkbox\");\r\n\t\t\t\t\tif (!ck.length) {\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\t\t\t\t\trow.checkState = [\"unchecked\", \"checked\", \"indeterminate\"][nodeCheckState];\r\n\t\t\t\t\trow.checked = (row.checkState == \"checked\");\r\n\t\t\t\t\tck\r\n\t\t\t\t\t\t\t.removeClass(\"tree-checkbox0 tree-checkbox1 tree-checkbox2\");\r\n\t\t\t\t\tck.addClass(\"tree-checkbox\" + nodeCheckState);\r\n\t\t\t\t\tif (nodeCheckState == 0) {\r\n\t\t\t\t\t\ttreeUtils.removeArrayItem(checkedRows, options.idField,\r\n\t\t\t\t\t\t\t\trow[options.idField]);\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\ttreeUtils.addArrayItem(checkedRows, options.idField,\r\n\t\t\t\t\t\t\t\trow);\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\tinsert : function(_c0) {\r\n\t\t\t\t\treturn jq.each(function() {\r\n\t\t\t\t\t\t\t\t_90(this, _c0);\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t},\r\n\t\t\t\tremove : function(id) {\r\n\t\t\t\t\treturn jq.each(function() {\r\n\t\t\t\t\t\t\t\t_9c(this, id);\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t},\r\n\t\t\t\tpop : function(id) {\r\n\t\t\t\t\tvar row = jq.treegrid(\"find\", id);\r\n\t\t\t\t\tjq.treegrid(\"remove\", id);\r\n\t\t\t\t\treturn row;\r\n\t\t\t\t},\r\n\t\t\t\trefresh : function(id) {\r\n\t\t\t\t\treturn jq.each(function() {\r\n\t\t\t\t\t\t\t\tvar _c1 = $.data(this, \"treegrid\").options;\r\n\t\t\t\t\t\t\t\t_c1.view.refreshRow.call(_c1.view, this, id);\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t},\r\n\t\t\t\tupdate : function(node) {\r\n\r\n\t\t\t\t\tvar opts = $.data(this.element, \"treegrid\").options;\r\n\t\t\t\t\topts.view.updateRow\r\n\t\t\t\t\t\t\t.call(opts.view, this, node.id, node.row);\r\n\t\t\t\t\tvar row = node.row;\r\n\t\t\t\t\tif (row.checked != undefined) {\r\n\t\t\t\t\t\trow = this.find(node.id);\r\n\t\t\t\t\t\t$.extend(row, {\r\n\t\t\t\t\t\t\t\t\tcheckState : row.checked\r\n\t\t\t\t\t\t\t\t\t\t\t? \"checked\"\r\n\t\t\t\t\t\t\t\t\t\t\t: (row.checked === false\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t? \"unchecked\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t: undefined)\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\tthis.updateCheckbox(_dd.id);\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t},\r\n\r\n\t\t\t\tupdateCheckbox : function(nodeId) {\r\n\t\t\t\t\tvar opts = $.data(this.element, \"treegrid\").options;\r\n\t\t\t\t\tif (!opts.checkbox) {\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tvar row = this.find(nodeId);\r\n\t\t\t\t\tvar tr = opts.finder.getTr(nodeId);\r\n\t\t\t\t\tvar ck = tr.find(\".tree-checkbox\");\r\n\t\t\t\t\tif (opts.view.hasCheckbox(row)) {\r\n\t\t\t\t\t\tif (!ck.length) {\r\n\t\t\t\t\t\t\trow.checkState = row.checkState || \"unchecked\";\r\n\t\t\t\t\t\t\t$(\"<span class=\\\"tree-checkbox\\\"></span>\")\r\n\t\t\t\t\t\t\t\t\t.insertBefore(tr.find(\".tree-title\"));\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (row.checkState == \"checked\") {\r\n\t\t\t\t\t\t\tthis.changeCheckNode(nodeId, true, true);\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tif (row.checkState == \"unchecked\") {\r\n\t\t\t\t\t\t\t\tthis.changeCheckNode(nodeId, false, true);\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tvar checkValue = this.getNodeCheckValue(row);\r\n\t\t\t\t\t\t\t\tif (checkValue === 0) {\r\n\t\t\t\t\t\t\t\t\tthis.changeCheckNode(nodeId, false, true);\r\n\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\tif (checkValue === 1) {\r\n\t\t\t\t\t\t\t\t\t\tthis.changeCheckNode(nodeId, true, true);\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tck.remove();\r\n\t\t\t\t\t\trow.checkState = undefined;\r\n\t\t\t\t\t\trow.checked = undefined;\r\n\t\t\t\t\t\tthis.setParentNodeCheckbox(row);\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t},\r\n\t\t\t\tbeginEdit : function(id) {\r\n\t\t\t\t\treturn jq.each(function() {\r\n\t\t\t\t\t\t\t\t$(this).datagrid(\"beginEdit\", id);\r\n\t\t\t\t\t\t\t\t$(this).treegrid(\"fixRowHeight\", id);\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t},\r\n\t\t\t\tendEdit : function(id) {\r\n\t\t\t\t\treturn jq.each(function() {\r\n\t\t\t\t\t\t\t\t$(this).datagrid(\"endEdit\", id);\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t},\r\n\t\t\t\tcancelEdit : function(id) {\r\n\t\t\t\t\treturn jq.each(function() {\r\n\t\t\t\t\t\t\t\t$(this).datagrid(\"cancelEdit\", id);\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t},\r\n\t\t\t\tshowLines : function() {\r\n\t\t\t\t\t/*\r\n\t\t\t\t\t * return jq.each(function() { _a0(this); });\r\n\t\t\t\t\t */\r\n\t\t\t\t\tvar t = $(this.element);\r\n\t\t\t\t\tvar _slef = this;\r\n\t\t\t\t\tvar target = this.element;\r\n\t\t\t\t\tvar _a2 = this.options();\r\n\t\t\t\t\tif (_a2.lines) {\r\n\t\t\t\t\t\tthis.getPanel().addClass(\"tree-lines\");\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tthis.getPanel().removeClass(\"tree-lines\");\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tthis.getPanel().find(\"span.tree-indent\")\r\n\t\t\t\t\t\t\t.removeClass(\"tree-line tree-join tree-joinbottom\");\r\n\t\t\t\t\tthis\r\n\t\t\t\t\t\t\t.getPanel()\r\n\t\t\t\t\t\t\t.find(\"div.datagrid-cell\")\r\n\t\t\t\t\t\t\t.removeClass(\"tree-node-last tree-root-first tree-root-one\");\r\n\t\t\t\t\tvar _a3 = this.getRoots();\r\n\t\t\t\t\tif (_a3.length > 1) {\r\n\t\t\t\t\t\t_a4(_a3[0]).addClass(\"tree-root-first\");\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tif (_a3.length == 1) {\r\n\t\t\t\t\t\t\t_a4(_a3[0]).addClass(\"tree-root-one\");\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\t_a5(_a3);\r\n\t\t\t\t\t_a6(_a3);\r\n\t\t\t\t\tfunction _a5(_a7) {\r\n\t\t\t\t\t\t$.map(_a7, function(_a8) {\r\n\t\t\t\t\t\t\t\t\tif (_a8.children && _a8.children.length) {\r\n\t\t\t\t\t\t\t\t\t\t_a5(_a8.children);\r\n\t\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\t\tvar _a9 = _a4(_a8);\r\n\t\t\t\t\t\t\t\t\t\t_a9.find(\".tree-icon\").prev()\r\n\t\t\t\t\t\t\t\t\t\t\t\t.addClass(\"tree-join\");\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\tvar _aa = _a4(_a7[_a7.length - 1]);\r\n\t\t\t\t\t\t_aa.addClass(\"tree-node-last\");\r\n\t\t\t\t\t\t_aa.find(\".tree-join\").removeClass(\"tree-join\")\r\n\t\t\t\t\t\t\t\t.addClass(\"tree-joinbottom\");\r\n\t\t\t\t\t};\r\n\t\t\t\t\tfunction _a6(_ab) {\r\n\t\t\t\t\t\t$.map(_ab, function(_ac) {\r\n\t\t\t\t\t\t\t\t\tif (_ac.children && _ac.children.length) {\r\n\t\t\t\t\t\t\t\t\t\t_a6(_ac.children);\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\tfor (var i = 0; i < _ab.length - 1; i++) {\r\n\t\t\t\t\t\t\tvar _ad = _ab[i];\r\n\t\t\t\t\t\t\tvar _ae = _slef.getLevel(_ad[_a2.idField]);\r\n\t\t\t\t\t\t\tvar tr = _a2.finder.getTr(target, _ad[_a2.idField]);\r\n\t\t\t\t\t\t\tvar cc = tr.next()\r\n\t\t\t\t\t\t\t\t\t.find(\"tr.datagrid-row td[field=\\\"\"\r\n\t\t\t\t\t\t\t\t\t\t\t+ _a2.treeField\r\n\t\t\t\t\t\t\t\t\t\t\t+ \"\\\"] div.datagrid-cell\");\r\n\t\t\t\t\t\t\tcc.find(\"span:eq(\" + (_ae - 1) + \")\")\r\n\t\t\t\t\t\t\t\t\t.addClass(\"tree-line\");\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t};\r\n\t\t\t\t\tfunction _a4(_af) {\r\n\t\t\t\t\t\tvar tr = _a2.finder.getTr(target, _af[_a2.idField]);\r\n\t\t\t\t\t\tvar _b0 = tr.find(\"td[field=\\\"\" + _a2.treeField\r\n\t\t\t\t\t\t\t\t+ \"\\\"] div.datagrid-cell\");\r\n\t\t\t\t\t\treturn _b0;\r\n\t\t\t\t\t};\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t\tTreeGrid.parseOptions = function(treeGridDom) {\r\n\t\t\t\treturn $.extend({}, DataGrid.parseOptions(treeGridDom), $.fn\r\n\t\t\t\t\t\t\t\t.parseOptions(treeGridDom, [\"treeField\", {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tanimate : \"boolean\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t}]));\r\n\t\t\t};\r\n\r\n\t\t\tvar TreeGridView = DataGrid.GridView.extend({\r\n\t\t\t\tinitialize : function(treeGrid) {\r\n\t\t\t\t\tthis.treeGrid = treeGrid;\r\n\t\t\t\t},\r\n\t\t\t\trender : function(_c7, _c8) {\r\n\t\t\t\t\tvar target = this.treeGrid.element;\r\n\t\t\t\t\tvar _self = this;\r\n\t\t\t\t\tvar opts = $.data(target, \"treegrid\").options;\r\n\t\t\t\t\tvar columns = this.treeGrid.getColumnFields(_c8);\r\n\t\t\t\t\tvar rowIdPrefix = $.data(target, \"datagrid\").rowIdPrefix;\r\n\t\t\t\t\tif (_c8) {\r\n\t\t\t\t\t\tif (!(opts.rownumbers || (opts.frozenColumns && opts.frozenColumns.length))) {\r\n\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\t// var _self = this;\r\n\t\t\t\t\tif (this.treeNodes && this.treeNodes.length) {\r\n\t\t\t\t\t\tvar _cd = _ce(_c8, this.treeLevel, this.treeNodes);\r\n\t\t\t\t\t\t$(_c7).append(_cd.join(\"\"));\r\n\t\t\t\t\t}\r\n\t\t\t\t\tfunction _ce(_cf, _d0, _d1) {\r\n\t\t\t\t\t\tvar _d2 = _self.treeGrid\r\n\t\t\t\t\t\t\t\t.getParent(_d1[0][opts.idField]);\r\n\t\t\t\t\t\tvar _d3 = (_d2 ? _d2.children.length : _self.treeGrid\r\n\t\t\t\t\t\t\t\t.getRoots())\r\n\t\t\t\t\t\t\t\t- _d1.length;\r\n\t\t\t\t\t\tvar _d4 = [\"<table class=\\\"datagrid-btable\\\" cellspacing=\\\"0\\\" cellpadding=\\\"0\\\" border=\\\"0\\\"><tbody>\"];\r\n\t\t\t\t\t\tfor (var i = 0; i < _d1.length; i++) {\r\n\t\t\t\t\t\t\tvar row = _d1[i];\r\n\t\t\t\t\t\t\tif (opts.leafField) {\r\n\t\t\t\t\t\t\t\tif (row[opts.leafField] == true\r\n\t\t\t\t\t\t\t\t\t\t|| row[opts.leafField] == \"1\") {\r\n\t\t\t\t\t\t\t\t\trow.state = \"open\";\r\n\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\trow.state = \"closed\";\r\n\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tif (opts.state) {\r\n\t\t\t\t\t\t\t\t\trow.state = opts.state;\r\n\t\t\t\t\t\t\t\t} else if (row.state != \"open\"\r\n\t\t\t\t\t\t\t\t\t\t&& row.state != \"closed\") {\r\n\t\t\t\t\t\t\t\t\trow.state = \"closed\";\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\tvar css = opts.rowStyler ? opts.rowStyler.call(\r\n\t\t\t\t\t\t\t\t\ttarget, row) : \"\";\r\n\t\t\t\t\t\t\tvar _d5 = \"\";\r\n\t\t\t\t\t\t\tvar _d6 = \"\";\r\n\t\t\t\t\t\t\tif (typeof css == \"string\") {\r\n\t\t\t\t\t\t\t\t_d6 = css;\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tif (css) {\r\n\t\t\t\t\t\t\t\t\t_d5 = css[\"class\"] || \"\";\r\n\t\t\t\t\t\t\t\t\t_d6 = css[\"style\"] || \"\";\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tvar cls = \"class=\\\"datagrid-row \"\r\n\t\t\t\t\t\t\t\t\t+ (_d3++ % 2 && opts.striped\r\n\t\t\t\t\t\t\t\t\t\t\t? \"datagrid-row-alt \"\r\n\t\t\t\t\t\t\t\t\t\t\t: \" \") + _d5 + \"\\\"\";\r\n\t\t\t\t\t\t\tvar _d7 = _d6 ? \"style=\\\"\" + _d6 + \"\\\"\" : \"\";\r\n\t\t\t\t\t\t\tvar _d8 = rowIdPrefix + \"-\" + (_cf ? 1 : 2) + \"-\"\r\n\t\t\t\t\t\t\t\t\t+ row[opts.idField];\r\n\t\t\t\t\t\t\t_d4.push(\"<tr id=\\\"\" + _d8 + \"\\\" node-id=\\\"\"\r\n\t\t\t\t\t\t\t\t\t+ row[opts.idField] + \"\\\" \" + cls + \" \"\r\n\t\t\t\t\t\t\t\t\t+ _d7 + \">\");\r\n\t\t\t\t\t\t\t_d4 = _d4.concat(_self.renderRow.call(_self,\r\n\t\t\t\t\t\t\t\t\tcolumns, _cf, _d0, row));\r\n\t\t\t\t\t\t\t_d4.push(\"</tr>\");\r\n\t\t\t\t\t\t\tif (row.children && row.children.length) {\r\n\t\t\t\t\t\t\t\tvar tt = _ce(_cf, _d0 + 1, row.children);\r\n\t\t\t\t\t\t\t\tvar v = row.state == \"closed\"\r\n\t\t\t\t\t\t\t\t\t\t? \"none\"\r\n\t\t\t\t\t\t\t\t\t\t: \"block\";\r\n\t\t\t\t\t\t\t\t_d4\r\n\t\t\t\t\t\t\t\t\t\t.push(\"<tr class=\\\"treegrid-tr-tree\\\"><td style=\\\"border:0px\\\" colspan=\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t+ (columns.length + (opts.rownumbers\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t? 1\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t: 0))\r\n\t\t\t\t\t\t\t\t\t\t\t\t+ \"><div style=\\\"display:\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t+ v\r\n\t\t\t\t\t\t\t\t\t\t\t\t+ \"\\\">\");\r\n\t\t\t\t\t\t\t\t_d4 = _d4.concat(tt);\r\n\t\t\t\t\t\t\t\t_d4.push(\"</div></td></tr>\");\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t_d4.push(\"</tbody></table>\");\r\n\t\t\t\t\t\treturn _d4;\r\n\t\t\t\t\t};\r\n\t\t\t\t},\r\n\t\t\t\trenderFooter : function(_da, _db) {\r\n\t\t\t\t\tvar target = this.treeGrid.element;\r\n\t\t\t\t\tvar _dc = $.data(target, \"treegrid\").options;\r\n\t\t\t\t\tvar _dd = $.data(target, \"treegrid\").footer || [];\r\n\t\t\t\t\tvar _de = this.treeGrid.getColumnFields(_db);\r\n\t\t\t\t\tvar _df = [\"<table class=\\\"datagrid-ftable\\\" cellspacing=\\\"0\\\" cellpadding=\\\"0\\\" border=\\\"0\\\"><tbody>\"];\r\n\t\t\t\t\tfor (var i = 0; i < _dd.length; i++) {\r\n\t\t\t\t\t\tvar row = _dd[i];\r\n\t\t\t\t\t\trow[_dc.idField] = row[_dc.idField]\r\n\t\t\t\t\t\t\t\t|| (\"foot-row-id\" + i);\r\n\t\t\t\t\t\t_df.push(\"<tr class=\\\"datagrid-row\\\" node-id=\\\"\"\r\n\t\t\t\t\t\t\t\t+ row[_dc.idField] + \"\\\">\");\r\n\t\t\t\t\t\t_df.push(this.renderRow.call(this, _de, _db, 0, row));\r\n\t\t\t\t\t\t_df.push(\"</tr>\");\r\n\t\t\t\t\t}\r\n\t\t\t\t\t_df.push(\"</tbody></table>\");\r\n\t\t\t\t\t$(_da).html(_df.join(\"\"));\r\n\t\t\t\t},\r\n\t\t\t\trenderRow : function(_ff, _100, _101, row) {\r\n\t\t\t\t\tvar target = this.treeGrid.element;\r\n\t\t\t\t\t var treeGridObject = $.data(target, \"treegrid\");\r\n\t\t\t\t\tvar opts = treeGridObject.options;\r\n\t\t\t\t\tvar cc = [];\r\n\t\t\t\t\tif (_100 && opts.rownumbers) {\r\n\t\t\t\t\t\tcc.push(\"<td class=\\\"datagrid-td-rownumber\\\"><div class=\\\"datagrid-cell-rownumber\\\">0</div></td>\");\r\n\t\t\t\t\t}\r\n\t\t\t\t\tfor (var i = 0; i < _ff.length; i++) {\r\n\t\t\t\t\t\tvar _103 = _ff[i];\r\n\t\t\t\t\t\tvar col = $(target).treegrid(\"getColumnOption\", _103);\r\n\t\t\t\t\t\tif (col) {\r\n\t\t\t\t\t\t\tvar css = col.styler\r\n\t\t\t\t\t\t\t\t\t? (col.styler(row[_103], row) || \"\")\r\n\t\t\t\t\t\t\t\t\t: \"\";\r\n\t\t\t\t\t\t\tvar cs = this.getStyleValue(css);\r\n\t\t\t\t\t\t\tvar cls = cs.c ? \"class=\\\"\" + cs.c + \"\\\"\" : \"\";\r\n\t\t\t\t\t\t\tvar _104 = col.hidden ? \"style=\\\"display:none;\"\r\n\t\t\t\t\t\t\t\t\t+ cs.s + \"\\\"\" : (cs.s ? \"style=\\\"\" + cs.s\r\n\t\t\t\t\t\t\t\t\t+ \"\\\"\" : \"\");\r\n\t\t\t\t\t\t\tcc.push(\"<td field=\\\"\" + _103 + \"\\\" \" + cls + \" \"\r\n\t\t\t\t\t\t\t\t\t+ _104 + \">\");\r\n\t\t\t\t\t\t\tvar _104 = \"\";\r\n\t\t\t\t\t\t\tif (!col.checkbox&&_103 != opts.treeField) {\r\n\t\t\t\t\t\t\t\tif (col.align) {\r\n\t\t\t\t\t\t\t\t\t_104 += \"text-align:\" + col.align + \";\";\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tif (!opts.nowrap) {\r\n\t\t\t\t\t\t\t\t\t_104 += \"white-space:normal;height:auto;\";\r\n\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\tif (opts.autoRowHeight) {\r\n\t\t\t\t\t\t\t\t\t\t_104 += \"height:auto;\";\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tcc.push(\"<div style=\\\"\" + _104 + \"\\\" \");\r\n\t\t\t\t\t\t\tif (col.checkbox) {\r\n\t\t\t\t\t\t\t\tcc.push(\"class=\\\"datagrid-cell-check \");\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tcc.push(\"class=\\\"datagrid-cell \"\r\n\t\t\t\t\t\t\t\t\t\t+ col.cellClass);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tcc.push(\"\\\">\");\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tif (col.buttons){\r\n\t\t\t\t\t\t\t\tfor (var j=0;j<col.buttons.length;j++){\r\n\t\t\t\t\t\t\t\t\tvar btn=col.buttons[j],disabled=\"\";\r\n\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t  if($.isFunction(btn.disabled)){\r\n\t\t\t\t\t\t                    if(btn.disabled(rowData, rowIndex)){\r\n\t\t\t\t\t\t                        disabled = ' disabled';\r\n\t\t\t\t\t\t                    }\r\n\t\t\t\t\t\t                }else if(btn.disabled === true){\r\n\t\t\t\t\t\t                    disabled = ' disabled';\r\n\t\t\t\t\t\t                }\r\n\t\t\t\t\t\t\t\t\tcc.push( '<a id=\"'\r\n\t\t\t\t\t\t\t\t\t+ btn.id\r\n\t\t\t\t\t\t\t\t\t+ '\" class=\"rowBtn'\r\n\t\t\t\t\t\t\t\t\t+ disabled\r\n\t\t\t\t\t\t\t\t\t+ '\" tab-index=\"-1\" href=\"javascript:void(0)\">'\r\n\t\t\t\t\t\t\t\t\t+ '<i class=\"' + btn.iconCls + '\" title=\"'\r\n\t\t\t\t\t\t\t\t\t+ btn.text + '\"></i>' + '</a>');\r\n\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t   \r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tif (col.checkbox) {\r\n\t\t\t\t\t\t\t\tif (row.checked) {\r\n\t\t\t\t\t\t\t\t\tcc\r\n\t\t\t\t\t\t\t\t\t\t\t.push(\"<input type=\\\"checkbox\\\" checked=\\\"checked\\\"\");\r\n\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\tcc.push(\"<input type=\\\"checkbox\\\"\");\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tcc.push(\" name=\\\"\"\r\n\t\t\t\t\t\t\t\t\t\t+ _103\r\n\t\t\t\t\t\t\t\t\t\t+ \"\\\" value=\\\"\"\r\n\t\t\t\t\t\t\t\t\t\t+ (row[_103] != undefined\r\n\t\t\t\t\t\t\t\t\t\t\t\t? row[_103]\r\n\t\t\t\t\t\t\t\t\t\t\t\t: \"\") + \"\\\">\");\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tvar val = null;\r\n\t\t\t\t\t\t\t\tif (col.formatter) {\r\n\t\t\t\t\t\t\t\t\tval = col.formatter(row[_103], row);\r\n\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\tval = row[_103];\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tif (_103 == opts.treeField) {\r\n\t\t\t\t\t\t\t\t\tfor (var j = 0; j < _101; j++) {\r\n\t\t\t\t\t\t\t\t\t\tcc\r\n\t\t\t\t\t\t\t\t\t\t\t\t.push(\"<span class=\\\"tree-indent\\\"></span>\");\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\tif (row.state == \"closed\") {\r\n\t\t\t\t\t\t\t\t\t\tcc\r\n\t\t\t\t\t\t\t\t\t\t\t\t.push(\"<span class=\\\"tree-hit tree-collapsed\\\"></span>\");\r\n\t\t\t\t\t\t\t\t\t\tcc\r\n\t\t\t\t\t\t\t\t\t\t\t\t.push(\"<span class=\\\"tree-icon tree-folder \"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t+ (row.iconCls\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t? row.iconCls\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t: \"\")\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t+ \"\\\"></span>\");\r\n\t\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\t\tif (row.children && row.children.length) {\r\n\t\t\t\t\t\t\t\t\t\t\tcc\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t.push(\"<span class=\\\"tree-hit tree-expanded\\\"></span>\");\r\n\t\t\t\t\t\t\t\t\t\t\tcc\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t.push(\"<span class=\\\"tree-icon tree-folder tree-folder-open \"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t+ (row.iconCls\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t? row.iconCls\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t: \"\")\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t+ \"\\\"></span>\");\r\n\t\t\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\t\t\tcc\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t.push(\"<span class=\\\"tree-indent\\\"></span>\");\r\n\t\t\t\t\t\t\t\t\t\t\tcc\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t.push(\"<span class=\\\"tree-icon tree-file \"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t+ (row.iconCls\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t? row.iconCls\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t: \"\")\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t+ \"\\\"></span>\");\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\tif (this.hasCheckbox( row)) {\r\n\t\t\t\t\t\t\t\t\t\tvar flag = 0;\r\n\t\t\t\t\t\t\t\t\t\tvar crow = treeUtils.getArrayItem(\r\n\t\t\t\t\t\t\t\t\t\t\t\ttreeGridObject.checkedRows, opts.idField,\r\n\t\t\t\t\t\t\t\t\t\t\t\trow[opts.idField]);\r\n\t\t\t\t\t\t\t\t\t\tif (crow) {\r\n\t\t\t\t\t\t\t\t\t\t\tflag = crow.checkState == \"checked\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t? 1\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t: 2;\r\n\t\t\t\t\t\t\t\t\t\t\trow.checkState = crow.checkState;\r\n\t\t\t\t\t\t\t\t\t\t\trow.checked = crow.checked;\r\n\t\t\t\t\t\t\t\t\t\t\ttreeUtils.addArrayItem(\r\n\t\t\t\t\t\t\t\t\t\t\t\t\ttreeGridObject.checkedRows,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\topts.idField, row);\r\n\t\t\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\t\t\tvar prow =treeUtils\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t.getArrayItem(\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\ttreeGridObject.checkedRows,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\topts.idField,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\trow._parentId);\r\n\t\t\t\t\t\t\t\t\t\t\tif (prow\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t&& prow.checkState == \"checked\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t&& opts.cascadeCheck) {\r\n\t\t\t\t\t\t\t\t\t\t\t\tflag = 1;\r\n\t\t\t\t\t\t\t\t\t\t\t\trow.checked = true;\r\n\t\t\t\t\t\t\t\t\t\t\t\ttreeUtils.addArrayItem(\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\ttreeGridObject.checkedRows,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\topts.idField, row);\r\n\t\t\t\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\t\t\t\tif (row.checked) {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\ttreeUtils.addArrayItem(\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\ttreeGridObject.tmpIds,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\trow[opts.idField]);\r\n\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\trow.checkState = flag\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t? \"checked\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t: \"unchecked\";\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\tcc\r\n\t\t\t\t\t\t\t\t\t\t\t\t.push(\"<span class=\\\"tree-checkbox tree-checkbox\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t+ flag + \"\\\"></span>\");\r\n\t\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\t\trow.checkState = undefined;\r\n\t\t\t\t\t\t\t\t\t\trow.checked = undefined;\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\tcc.push(\"<span class=\\\"tree-title\\\">\" + val\r\n\t\t\t\t\t\t\t\t\t\t\t+ \"</span>\");\r\n\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\tcc.push(val);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tcc.push(\"</div>\");\r\n\t\t\t\t\t\t\tcc.push(\"</td>\");\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn cc.join(\"\");\r\n\t\t\t\t},\r\n\t\t\t\thasCheckbox : function(row) {\r\n\t\t\t\t\tvar target = this.treeGrid.element;\r\n\t\t\t\t\tvar opts = $.data(target, \"treegrid\").options;\r\n\t\t\t\t\tif (opts.checkbox) {\r\n\t\t\t\t\t\tif ($.isFunction(opts.checkbox)) {\r\n\t\t\t\t\t\t\tif (opts.checkbox.call(_105, row)) {\r\n\t\t\t\t\t\t\t\treturn true;\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tif (opts.onlyLeafCheck) {\r\n\t\t\t\t\t\t\t\tif (row.state == \"open\"\r\n\t\t\t\t\t\t\t\t\t\t&& !(row.children && row.children.length)) {\r\n\t\t\t\t\t\t\t\t\treturn true;\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\treturn true;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t},\r\n\r\n\t\t\t\trefreshRow : function(_e9, id) {\r\n\t\t\t\t\tthis.updateRow.call(this, _e9, id, {});\r\n\t\t\t\t},\r\n\t\t\t\tupdateRow : function(_ea, id, row) {\r\n\t\t\t\t\tvar _eb = $.data(_ea, \"treegrid\").options;\r\n\t\t\t\t\tvar _ec = $(_ea).treegrid(\"find\", id);\r\n\t\t\t\t\t$.extend(_ec, row);\r\n\t\t\t\t\tvar _ed = $(_ea).treegrid(\"getLevel\", id) - 1;\r\n\t\t\t\t\tvar _ee = _eb.rowStyler ? _eb.rowStyler.call(_ea, _ec) : \"\";\r\n\t\t\t\t\tvar _ef = $.data(_ea, \"datagrid\").rowIdPrefix;\r\n\t\t\t\t\tvar _f0 = _ec[_eb.idField];\r\n\t\t\t\t\tfunction _f1(_f2) {\r\n\t\t\t\t\t\tvar _f3 = $(_ea).treegrid(\"getColumnFields\", _f2);\r\n\t\t\t\t\t\tvar tr = _eb.finder.getTr(_ea, id, \"body\",\r\n\t\t\t\t\t\t\t\t(_f2 ? 1 : 2));\r\n\t\t\t\t\t\tvar _f4 = tr.find(\"div.datagrid-cell-rownumber\").html();\r\n\t\t\t\t\t\tvar _f5 = tr\r\n\t\t\t\t\t\t\t\t.find(\"div.datagrid-cell-check input[type=checkbox]\")\r\n\t\t\t\t\t\t\t\t.is(\":checked\");\r\n\t\t\t\t\t\ttr.html(this.renderRow(_ea, _f3, _f2, _ed, _ec));\r\n\t\t\t\t\t\ttr.attr(\"style\", _ee || \"\");\r\n\t\t\t\t\t\ttr.find(\"div.datagrid-cell-rownumber\").html(_f4);\r\n\t\t\t\t\t\tif (_f5) {\r\n\t\t\t\t\t\t\ttr\r\n\t\t\t\t\t\t\t\t\t.find(\"div.datagrid-cell-check input[type=checkbox]\")\r\n\t\t\t\t\t\t\t\t\t._propAttr(\"checked\", true);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (_f0 != id) {\r\n\t\t\t\t\t\t\ttr\r\n\t\t\t\t\t\t\t\t\t.attr(\"id\", _ef + \"-\" + (_f2 ? 1 : 2) + \"-\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t+ _f0);\r\n\t\t\t\t\t\t\ttr.attr(\"node-id\", _f0);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t};\r\n\t\t\t\t\t_f1.call(this, true);\r\n\t\t\t\t\t_f1.call(this, false);\r\n\t\t\t\t\t$(_ea).treegrid(\"fixRowHeight\", id);\r\n\t\t\t\t},\r\n\t\t\t\tdeleteRow : function(_f6, id) {\r\n\t\t\t\t\tvar _f7 = $.data(_f6, \"treegrid\").options;\r\n\t\t\t\t\tvar tr = _f7.finder.getTr(_f6, id);\r\n\t\t\t\t\ttr.next(\"tr.treegrid-tr-tree\").remove();\r\n\t\t\t\t\ttr.remove();\r\n\t\t\t\t\tvar _f8 = del(id);\r\n\t\t\t\t\tif (_f8) {\r\n\t\t\t\t\t\tif (_f8.children.length == 0) {\r\n\t\t\t\t\t\t\ttr = _f7.finder.getTr(_f6, _f8[_f7.idField]);\r\n\t\t\t\t\t\t\ttr.next(\"tr.treegrid-tr-tree\").remove();\r\n\t\t\t\t\t\t\tvar _f9 = tr.children(\"td[field=\\\"\" + _f7.treeField\r\n\t\t\t\t\t\t\t\t\t+ \"\\\"]\").children(\"div.datagrid-cell\");\r\n\t\t\t\t\t\t\t_f9.find(\".tree-icon\").removeClass(\"tree-folder\")\r\n\t\t\t\t\t\t\t\t\t.addClass(\"tree-file\");\r\n\t\t\t\t\t\t\t_f9.find(\".tree-hit\").remove();\r\n\t\t\t\t\t\t\t$(\"<span class=\\\"tree-indent\\\"></span>\")\r\n\t\t\t\t\t\t\t\t\t.prependTo(_f9);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tfunction del(id) {\r\n\t\t\t\t\t\tvar cc;\r\n\t\t\t\t\t\tvar _fa = $(_f6).treegrid(\"getParent\", id);\r\n\t\t\t\t\t\tif (_fa) {\r\n\t\t\t\t\t\t\tcc = _fa.children;\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tcc = $(_f6).treegrid(\"getData\");\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tfor (var i = 0; i < cc.length; i++) {\r\n\t\t\t\t\t\t\tif (cc[i][_f7.idField] == id) {\r\n\t\t\t\t\t\t\t\tcc.splice(i, 1);\r\n\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\treturn _fa;\r\n\t\t\t\t\t};\r\n\t\t\t\t},\r\n\t\t\t\tonBeforeRender : function(_fc, _fd) {\r\n\t\t\t\t\tvar target = this.treeGrid.element;\r\n\t\t\t\t\tif ($.isArray(_fc)) {\r\n\t\t\t\t\t\t_fd = {\r\n\t\t\t\t\t\t\ttotal : _fc.length,\r\n\t\t\t\t\t\t\trows : _fc\r\n\t\t\t\t\t\t};\r\n\t\t\t\t\t\t_fc = null;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (!_fd) {\r\n\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tvar _fe = $.data(target, \"treegrid\");\r\n\t\t\t\t\tvar _ff = _fe.options;\r\n\t\t\t\t\tif (_fd.length == undefined) {\r\n\t\t\t\t\t\tif (_fd.footer) {\r\n\t\t\t\t\t\t\t_fe.footer = _fd.footer;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (_fd.total) {\r\n\t\t\t\t\t\t\t_fe.total = _fd.total;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t_fd = this.transfer(_fc, _fd.rows);\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tfunction _100(_101, _102) {\r\n\t\t\t\t\t\t\tfor (var i = 0; i < _101.length; i++) {\r\n\t\t\t\t\t\t\t\tvar row = _101[i];\r\n\t\t\t\t\t\t\t\trow._parentId = _102;\r\n\t\t\t\t\t\t\t\tif (row.children && row.children.length) {\r\n\t\t\t\t\t\t\t\t\t_100(row.children, row[_ff.idField]);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t};\r\n\t\t\t\t\t\t_100(_fd, _fc);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tvar node = this.treeGrid.find(_fc);\r\n\t\t\t\t\tif (node) {\r\n\t\t\t\t\t\tif (node.children) {\r\n\t\t\t\t\t\t\tnode.children = node.children.concat(_fd);\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tnode.children = _fd;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\t_fe.data = _fe.data.concat(_fd);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tthis.sort(_fd);\r\n\t\t\t\t\tthis.treeNodes = _fd;\r\n\t\t\t\t\tthis.treeLevel = this.treeGrid.getLevel(_fc);\r\n\t\t\t\t},\r\n\t\t\t\tonAfterRender : function() {\r\n\t\t\t\t\tvar opts = $.data(this.treeGrid.element, \"datagrid\").options;\r\n\t\t\t\t\tif (opts.showFooter) {\r\n\t\t\t\t\t\tvar _221 = this.grid.getPanel()\r\n\t\t\t\t\t\t\t\t.find(\"div.datagrid-footer\");\r\n\t\t\t\t\t\t_221\r\n\t\t\t\t\t\t\t\t.find(\"div.datagrid-cell-rownumber,div.datagrid-cell-check\")\r\n\t\t\t\t\t\t\t\t.css(\"visibility\", \"hidden\");\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\tsort : function(data) {\r\n\t\t\t\t\tvar target = this.treeGrid.element;\r\n\t\t\t\t\tvar opts = $.data(target, \"treegrid\").options;\r\n\t\t\t\t\tif (!opts.remoteSort && opts.sortName) {\r\n\t\t\t\t\t\tvar sortNames = opts.sortName.split(\",\");\r\n\t\t\t\t\t\tvar sortOrders = opts.sortOrder.split(\",\");\r\n\t\t\t\t\t\tdataSort(data);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tfunction dataSort(rows) {\r\n\t\t\t\t\t\trows.sort(function(r1, r2) {\r\n\t\t\t\t\t\t\t\t\tvar r = 0;\r\n\t\t\t\t\t\t\t\t\tfor (var i = 0; i < sortNames.length; i++) {\r\n\t\t\t\t\t\t\t\t\t\tvar sn = sortNames[i];\r\n\t\t\t\t\t\t\t\t\t\tvar so = sortOrders[i];\r\n\t\t\t\t\t\t\t\t\t\tvar col = $(target).treegrid(\r\n\t\t\t\t\t\t\t\t\t\t\t\t\"getColumnOption\", sn);\r\n\t\t\t\t\t\t\t\t\t\tvar _107 = col.sorter\r\n\t\t\t\t\t\t\t\t\t\t\t\t|| function(a, b) {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\treturn a == b ? 0 : (a > b\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t? 1\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t: -1);\r\n\t\t\t\t\t\t\t\t\t\t\t\t};\r\n\t\t\t\t\t\t\t\t\t\tr = _107(r1[sn], r2[sn])\r\n\t\t\t\t\t\t\t\t\t\t\t\t* (so == \"asc\" ? 1 : -1);\r\n\t\t\t\t\t\t\t\t\t\tif (r != 0) {\r\n\t\t\t\t\t\t\t\t\t\t\treturn r;\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\treturn r;\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\tfor (var i = 0; i < rows.length; i++) {\r\n\t\t\t\t\t\t\tvar _108 = rows[i].children;\r\n\t\t\t\t\t\t\tif (_108 && _108.length) {\r\n\t\t\t\t\t\t\t\tdataSort(_108);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t};\r\n\t\t\t\t},\r\n\t\t\t\ttransfer : function(_10a, data) {\r\n\t\t\t\t\tvar target = this.treeGrid.element;\r\n\t\t\t\t\tvar opts = $.data(target, \"treegrid\").options;\r\n\t\t\t\t\tvar rows = [];\r\n\t\t\t\t\tfor (var i = 0; i < data.length; i++) {\r\n\t\t\t\t\t\trows.push(data[i]);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tvar _10b = [];\r\n\t\t\t\t\tfor (var i = 0; i < rows.length; i++) {\r\n\t\t\t\t\t\tvar row = rows[i];\r\n\t\t\t\t\t\tif (!_10a) {\r\n\t\t\t\t\t\t\tif (!row._parentId) {\r\n\t\t\t\t\t\t\t\t_10b.push(row);\r\n\t\t\t\t\t\t\t\trows.splice(i, 1);\r\n\t\t\t\t\t\t\t\ti--;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tif (row._parentId == _10a) {\r\n\t\t\t\t\t\t\t\t_10b.push(row);\r\n\t\t\t\t\t\t\t\trows.splice(i, 1);\r\n\t\t\t\t\t\t\t\ti--;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tvar toDo = [];\r\n\t\t\t\t\tfor (var i = 0; i < _10b.length; i++) {\r\n\t\t\t\t\t\ttoDo.push(_10b[i]);\r\n\t\t\t\t\t}\r\n\t\t\t\t\twhile (toDo.length) {\r\n\t\t\t\t\t\tvar node = toDo.shift();\r\n\t\t\t\t\t\tfor (var i = 0; i < rows.length; i++) {\r\n\t\t\t\t\t\t\tvar row = rows[i];\r\n\t\t\t\t\t\t\tif (row._parentId == node[opts.idField]) {\r\n\t\t\t\t\t\t\t\tif (node.children) {\r\n\t\t\t\t\t\t\t\t\tnode.children.push(row);\r\n\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\tnode.children = [row];\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\ttoDo.push(row);\r\n\t\t\t\t\t\t\t\trows.splice(i, 1);\r\n\t\t\t\t\t\t\t\ti--;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn _10b;\r\n\t\t\t\t}\r\n\r\n\t\t\t});\r\n\t\t\t\r\n\t\t    function mouseEvent(isOver) {\r\n\t\t        return function(e) {\r\n\t\t            DataGrid.defaults.rowEvents[isOver ? \"mouseover\": \"mouseout\"](e);\r\n\t\t            var tt = $(e.target);\r\n\t\t            var fn = isOver ? \"addClass\": \"removeClass\";\r\n\t\t            if (tt.hasClass(\"tree-hit\")) {\r\n\t\t                tt.hasClass(\"tree-expanded\") ? tt[fn](\"tree-expanded-hover\") : tt[fn](\"tree-collapsed-hover\");\r\n\t\t            }\r\n\t\t        };\r\n\t\t    };\r\n\t\t    \r\n\t\t    function getTreeGridDOM(t) {\r\n\t\t        return $(t).closest(\"div.datagrid-view\").children(\".datagrid-f\")[0];\r\n\t\t    };\r\n\t\t    function rowClickEvent(e) {\r\n\t\t        var tt = $(e.target);\r\n\t\t        var tr = tt.closest(\"tr.datagrid-row\");\r\n\t\t        if (!tr.length || !tr.parent().length) {\r\n\t\t            return;\r\n\t\t        } \r\n\t\t        var nodeId = tr.attr(\"node-id\");\r\n\t\t        var treeGridDOM = getTreeGridDOM(tr);\r\n\t\t        var treeGridClass =  $.data(treeGridDOM, \"treeGridObj\"); \r\n\t\t        if (tt.hasClass(\"tree-hit\")) {\r\n\t\t        \ttreeGridClass.toggle(nodeId);\r\n\t\t        } else {\r\n\t\t            if (tt.hasClass(\"tree-checkbox\")) {\r\n\t\t            \ttreeGridClass.changeCheckNode(nodeId);\r\n\t\t            } else {\r\n\t\t                var options = $(treeGridDOM).treegrid(\"options\");\r\n\t\t                if (!tt.parent().hasClass(\"datagrid-cell-check\") && !options.singleSelect && e.shiftKey) {\r\n\t\t                    var children = $(treeGridDOM).treegrid(\"getChildren\");\r\n\t\t                    var _2c = treeUtils.indexOfArray(children, options.idField, options.lastSelectedIndex);\r\n\t\t                    var _2d = treeUtils.indexOfArray(children, options.idField, nodeId);\r\n\t\t                    var _2e = Math.min(Math.max(_2c, 0), _2d);\r\n\t\t                    var to = Math.max(_2c, _2d);\r\n\t\t                    var row = children[_2d];\r\n\t\t                    var td = tt.closest(\"td[field]\", tr);\r\n\t\t                    if (td.length) {\r\n\t\t                        var _2f = td.attr(\"field\");\r\n\t\t                        options.onClickCell.call(treeGridDOM, nodeId, _2f, row[_2f]);\r\n\t\t                    }\r\n\t\t                    $(treeGridDOM).treegrid(\"clearSelections\");\r\n\t\t                    for (var i = _2e; i <= to; i++) {\r\n\t\t                        $(treeGridDOM).treegrid(\"selectRow\", children[i][options.idField]);\r\n\t\t                    }\r\n\t\t                  \r\n\t\t                    treeGridClass.trigger(\"onClickRow\",row)\r\n\t\t                   // options.onClickRow.call(treeGridDOM, row);\r\n\t\t                } else {\r\n\t\t                    DataGrid.defaults.rowEvents.click(e);\r\n\t\t                }\r\n\t\t            }\r\n\t\t        }\r\n\t\t    };\r\n\t\t    \r\n\t\t\tTreeGrid.defaults = $.extend({}, DataGrid.defaults, {\r\n\t\t\t\t\t\ttreeField : null,\r\n\t\t\t\t\t\tlines : false,\r\n\t\t\t\t\t\tanimate : false,\r\n\t\t\t\t\t\tsingleSelect : true,\r\n\t\t\t\t\t\trootId : '-1',\r\n\t\t\t\t\t\tasyTree : false,\r\n\t\t\t\t\t\tleafField : '',\r\n\t\t\t\t\t\tcheckboxField : '',\r\n\t\t\t\t\t\tcheckbox: false,\r\n        \t\t\t\tcascadeCheck: true,\r\n        \t\t\t\tonlyLeafCheck: false,\r\n\t\t\t\t\t\tonBeforeCheckNode: function(row, _133) {},\r\n\t\t\t\t\t    onCheckNode: function(row, _134) {},\r\n\t\t\t\t\t\trowEvents: $.extend({},\r\n\t\t\t\t\t\t\t        DataGrid.defaults.rowEvents, {\r\n\t\t\t\t\t\t\t            mouseover: mouseEvent(true),\r\n\t\t\t\t\t\t\t            mouseout: mouseEvent(false),\r\n\t\t\t\t\t\t\t            click: rowClickEvent\r\n\t\t\t\t\t\t\t        }),\r\n\t\t\t\t\t\t// view : _c5,\r\n\t\t\t\t\t\tloader : function(queryParams, success, error) {\r\n\t\t\t\t\t\t\tvar opts = this.options();\r\n\t\t\t\t\t\t\tvar _self = this;\r\n\t\t\t\t\t\t\tif (!opts.url) {\r\n\t\t\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tif (!error) {\r\n\t\t\t\t\t\t\t\tvar ajaxError = error;\r\n\t\t\t\t\t\t\t\terror = function() {\r\n\t\t\t\t\t\t\t\t\tajaxError.apply(this, arguments);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tAppAjax.ajaxCall({\r\n\t\t\t\t\t\t\t\t\t\ttype : opts.method,\r\n\t\t\t\t\t\t\t\t\t\turl : opts.url,\r\n\t\t\t\t\t\t\t\t\t\tdata : queryParams,\r\n\t\t\t\t\t\t\t\t\t\tdataType : \"json\",\r\n\t\t\t\t\t\t\t\t\t\tsuccess : function(data) {\r\n\t\t\t\t\t\t\t\t\t\t\tvar data = data.data || data\r\n\t\t\t\t\t\t\t\t\t\t\tdata = _self.listToTreeData(data);\r\n\t\t\t\t\t\t\t\t\t\t\tsuccess(data);\r\n\t\t\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t\t\terror : error\r\n\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tloadFilter : function(data, _10f) {\r\n\t\t\t\t\t\t\treturn data;\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t});\r\n\r\n\t\t\t$.fn.treegrid = function(options, param) {\r\n\t\t\t\t// console.log(arguments)\r\n\t\t\t\tvar methodReturn;\r\n\r\n\t\t\t\toptions = options || {};\r\n\r\n\t\t\t\tvar $set = this.each(function() {\r\n\t\t\t\t\t\t\tvar $this = $(this);\r\n\t\t\t\t\t\t\tvar state = $.data(this, 'treegrid');\r\n\t\t\t\t\t\t\tvar treeGridObj = $this.data('treeGridObj');\r\n\t\t\t\t\t\t\tif (state) {\r\n\t\t\t\t\t\t\t\tif (typeof options === 'object') {\r\n\t\t\t\t\t\t\t\t\tvar opts = $.extend(state.options, options);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\toptions.element = this;;\r\n\t\t\t\t\t\t\t\ttreeGridObj = new TreeGrid(this, options);\r\n\t\t\t\t\t\t\t\t$this.data('treeGridObj', treeGridObj);\r\n\t\t\t\t\t\t\t\t// data._init(this);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tif (typeof options === 'string')\r\n\t\t\t\t\t\t\t\tmethodReturn = treeGridObj[options](param);\r\n\t\t\t\t\t\t});\r\n\t\t\t\treturn (methodReturn === undefined) ? $set : methodReturn;\r\n\t\t\t};\r\n\t\t\treturn TreeGrid;\r\n\t\t}\r\n\r\n);\n",
    "/*! HTML5 Shiv vpre3.6 | @afarkas @jdalton @jon_neal @rem | MIT/GPL2 Licensed\r\n  Uncompressed source: https://github.com/aFarkas/html5shiv  */\r\n(function(a,b){function h(a,b){var c=a.createElement(\"p\"),d=a.getElementsByTagName(\"head\")[0]||a.documentElement;return c.innerHTML=\"x<style>\"+b+\"</style>\",d.insertBefore(c.lastChild,d.firstChild)}function i(){var a=l.elements;return typeof a==\"string\"?a.split(\" \"):a}function j(a){var b={},c=a.createElement,f=a.createDocumentFragment,g=f();a.createElement=function(a){if(!l.shivMethods)return c(a);var f;return b[a]?f=b[a].cloneNode():e.test(a)?f=(b[a]=c(a)).cloneNode():f=c(a),f.canHaveChildren&&!d.test(a)?g.appendChild(f):f},a.createDocumentFragment=Function(\"h,f\",\"return function(){var n=f.cloneNode(),c=n.createElement;h.shivMethods&&(\"+i().join().replace(/\\w+/g,function(a){return c(a),g.createElement(a),'c(\"'+a+'\")'})+\");return n}\")(l,g)}function k(a){var b;return a.documentShived?a:(l.shivCSS&&!f&&(b=!!h(a,\"article,aside,details,figcaption,figure,footer,header,hgroup,nav,section{display:block}audio{display:none}canvas,video{display:inline-block;*display:inline;*zoom:1}[hidden]{display:none}audio[controls]{display:inline-block;*display:inline;*zoom:1}mark{background:#FF0;color:#000}\")),g||(b=!j(a)),b&&(a.documentShived=b),a)}var c=a.html5||{},d=/^<|^(?:button|form|map|select|textarea|object|iframe|option|optgroup)$/i,e=/^<|^(?:a|b|button|code|div|fieldset|form|h1|h2|h3|h4|h5|h6|i|iframe|img|input|label|li|link|ol|option|p|param|q|script|select|span|strong|style|table|tbody|td|textarea|tfoot|th|thead|tr|ul)$/i,f,g;(function(){var c=b.createElement(\"a\");c.innerHTML=\"<xyz></xyz>\",f=\"hidden\"in c,f&&typeof injectElementWithStyles==\"function\"&&injectElementWithStyles(\"#modernizr{}\",function(b){b.hidden=!0,f=(a.getComputedStyle?getComputedStyle(b,null):b.currentStyle).display==\"none\"}),g=c.childNodes.length==1||function(){try{b.createElement(\"a\")}catch(a){return!0}var c=b.createDocumentFragment();return typeof c.cloneNode==\"undefined\"||typeof c.createDocumentFragment==\"undefined\"||typeof c.createElement==\"undefined\"}()})();var l={elements:c.elements||\"abbr article aside audio bdi canvas data datalist details figcaption figure footer header hgroup mark meter nav output progress section summary time video\",shivCSS:c.shivCSS!==!1,shivMethods:c.shivMethods!==!1,type:\"default\",shivDocument:k};a.html5=l,k(b)})(this,document);\ndefine(\"base/html5\", function(){});\n\n",
    "/*!\r\n * Ext JS Library 3.2.1\r\n * Copyright(c) 2006-2010 Ext JS, Inc.\r\n * licensing@extjs.com\r\n * http://www.extjs.com/license\r\n */\r\n/**\r\n * @class Template\r\n * <p>Represents an HTML fragment template. Templates may be {@link #compile precompiled}\r\n * for greater performance.</p>\r\n * <p>For example usage {@link #Template see the constructor}.</p>\r\n *\r\n * @constructor\r\n * An instance of this class may be created by passing to the constructor either\r\n * a single argument, or multiple arguments:\r\n * <div class=\"mdetail-params\"><ul>\r\n * <li><b>single argument</b> : String/Array\r\n * <div class=\"sub-desc\">\r\n * The single argument may be either a String or an Array:<ul>\r\n * <li><tt>String</tt> : </li><pre><code>\r\nvar t = new Template(\"&lt;div>Hello {0}.&lt;/div>\");\r\nt.{@link #append}('some-element', ['foo']);\r\n * </code></pre>\r\n * <li><tt>Array</tt> : </li>\r\n * An Array will be combined with <code>join('')</code>.\r\n<pre><code>\r\nvar t = new Template([\r\n    '&lt;div name=\"{id}\"&gt;',\r\n        '&lt;span class=\"{cls}\"&gt;{name:trim} {value:ellipsis(10)}&lt;/span&gt;',\r\n    '&lt;/div&gt;',\r\n]);\r\nt.{@link #compile}();\r\nt.{@link #append}('some-element', {id: 'myid', cls: 'myclass', name: 'foo', value: 'bar'});\r\n</code></pre>\r\n * </ul></div></li>\r\n * <li><b>multiple arguments</b> : String, Object, Array, ...\r\n * <div class=\"sub-desc\">\r\n * Multiple arguments will be combined with <code>join('')</code>.\r\n * <pre><code>\r\nvar t = new Template(\r\n    '&lt;div name=\"{id}\"&gt;',\r\n        '&lt;span class=\"{cls}\"&gt;{name} {value}&lt;/span&gt;',\r\n    '&lt;/div&gt;',\r\n    // a configuration object:\r\n    {\r\n        compiled: true,      // {@link #compile} immediately\r\n        disableFormats: true // See Notes below.\r\n    }\r\n);\r\n * </code></pre>\r\n * <p><b>Notes</b>:</p>\r\n * <div class=\"mdetail-params\"><ul>\r\n * <li>Formatting and <code>disableFormats</code> are not applicable for Ext Core.</li>\r\n * <li>For a list of available format functions, see {@link util.Format}.</li>\r\n * <li><code>disableFormats</code> reduces <code>{@link #apply}</code> time\r\n * when no formatting is required.</li>\r\n * </ul></div>\r\n * </div></li>\r\n * </ul></div>\r\n * @param {Mixed} config\r\n */\r\nTemplate = function(html){\r\n    var me = this,\r\n        a = arguments,\r\n        buf = [],\r\n        v;\r\n\r\n    for(var i = 0, len = a.length; i < len; i++){\r\n\t\tv = a[i];\r\n\t\tif(typeof v == 'object'){\r\n\t\t\tapply(me, v);\r\n\t\t} else {\r\n\t\t\tbuf.push(v);\r\n\t\t}\r\n\t};\r\n\thtml = buf.join('');\r\n\r\n    /**@private*/\r\n    me.html = html;\r\n    /**\r\n     * @cfg {Boolean} compiled Specify <tt>true</tt> to compile the template\r\n     * immediately (see <code>{@link #compile}</code>).\r\n     * Defaults to <tt>false</tt>.\r\n     */\r\n    if (me.compiled) {\r\n        me.compile();\r\n    }\r\n};\r\nTemplate.prototype = {\r\n    /**\r\n     * @cfg {RegExp} re The regular expression used to match template variables.\r\n     * Defaults to:<pre><code>\r\n     * re : /\\{([\\w-]+)\\}/g                                     // for Ext Core\r\n     * re : /\\{([\\w-]+)(?:\\:([\\w\\.]*)(?:\\((.*?)?\\))?)?\\}/g      // for Ext JS\r\n     * </code></pre>\r\n     */\r\n    re : /\\{([\\w-]+)\\}/g,\r\n    /**\r\n     * See <code>{@link #re}</code>.\r\n     * @type RegExp\r\n     * @property re\r\n     */\r\n\r\n    /**\r\n     * Returns an HTML fragment of this template with the specified <code>values</code> applied.\r\n     * @param {Object/Array} values\r\n     * The template values. Can be an array if the params are numeric (i.e. <code>{0}</code>)\r\n     * or an object (i.e. <code>{foo: 'bar'}</code>).\r\n     * @return {String} The HTML fragment\r\n     */\r\n    applyTemplate : function(values){\r\n        var me = this;\r\n\r\n        return me.compiled ?\r\n                me.compiled(values) :\r\n                me.html.replace(me.re, function(m, name){\r\n                    return values[name] !== undefined ? values[name] : \"\";\r\n                });\r\n    },\r\n\r\n    /**\r\n     * Sets the HTML used as the template and optionally compiles it.\r\n     * @param {String} html\r\n     * @param {Boolean} compile (optional) True to compile the template (defaults to undefined)\r\n     * @return {Template} this\r\n     */\r\n    set : function(html, compile){\r\n        var me = this;\r\n        me.html = html;\r\n        me.compiled = null;\r\n        return compile ? me.compile() : me;\r\n    },\r\n\r\n    /**\r\n     * Compiles the template into an internal function, eliminating the RegEx overhead.\r\n     * @return {Template} this\r\n     */\r\n    compile : function(){\r\n        var me = this,\r\n            sep = isGecko ? \"+\" : \",\";\r\n\r\n        function fn(m, name){\r\n            name = \"values['\" + name + \"']\";\r\n            return \"'\"+ sep + '(' + name + \" == undefined ? '' : \" + name + ')' + sep + \"'\";\r\n        }\r\n\r\n        eval(\"this.compiled = function(values){ return \" + (isGecko ? \"'\" : \"['\") +\r\n             me.html.replace(/\\\\/g, '\\\\\\\\').replace(/(\\r\\n|\\n)/g, '\\\\n').replace(/'/g, \"\\\\'\").replace(this.re, fn) +\r\n             (isGecko ?  \"';};\" : \"'].join('');};\"));\r\n        return me;\r\n    },\r\n\r\n  \r\n\r\n    /**\r\n     * Applies the supplied values to the template and overwrites the content of el with the new node(s).\r\n     * @param {Mixed} el The context element\r\n     * @param {Object/Array} values The template values. Can be an array if your params are numeric (i.e. {0}) or an object (i.e. {foo: 'bar'})\r\n     * @param {Boolean} returnElement (optional) true to return a Element (defaults to undefined)\r\n     * @return {HTMLElement/Element} The new node or Element\r\n     */\r\n    overwrite : function(el, values, returnElement){\r\n        el = getDom(el);\r\n        el.innerHTML = this.applyTemplate(values);\r\n        return returnElement ? get(el.firstChild, true) : el.firstChild;\r\n    }\r\n};\r\n/**\r\n * Alias for {@link #applyTemplate}\r\n * Returns an HTML fragment of this template with the specified <code>values</code> applied.\r\n * @param {Object/Array} values\r\n * The template values. Can be an array if the params are numeric (i.e. <code>{0}</code>)\r\n * or an object (i.e. <code>{foo: 'bar'}</code>).\r\n * @return {String} The HTML fragment\r\n * @member Template\r\n * @method apply\r\n */\r\nTemplate.prototype.apply = Template.prototype.applyTemplate;\r\n\r\n/**\r\n * Creates a template from the passed element's value (<i>display:none</i> textarea, preferred) or innerHTML.\r\n * @param {String/HTMLElement} el A DOM element or its id\r\n * @param {Object} config A configuration object\r\n * @return {Template} The created template\r\n * @static\r\n */\r\nTemplate.from = function(el, config){\r\n    el = getDom(el);\r\n    return new Template(el.value || el.innerHTML, config || '');\r\n};\r\n\ndefine(\"base/template\", function(){});\n\n",
    "\r\ndefine('bs-http-plugin/bs-ca-auth',['bs-http-plugin/base-pluginvoke'], function(BasePluginvoke,Socket) {\r\n\r\n    /**\r\n     * @desc ca认证控件 使用请引入 'bs-http-plugin/bs-ca-auth'\r\n     * @class\r\n     * @classdesc\r\n     * @name bs-ca-auth\r\n     * @extends base-pluginvoke\r\n     */\r\n    var CaAuth = BasePluginvoke.extend({\r\n        /**\r\n         * @description dll名称\r\n         * @memberOf bs-ca-auth\r\n         * @instance\r\n         * @example\r\n         * module:'ca'\r\n         */\r\n        module:'ca',\r\n        /**\r\n         * @description 自动生成函数列表\r\n         */\r\n        functions:[\r\n            /**\r\n             * @function doSign\r\n             * @instance\r\n             * @memberOf bs-ca-auth\r\n             * @description CA签名验证\r\n             * @param {object} options\r\n             * @param {string} options.signText 待签名串\r\n             * @param {string} options.provider 签名供应者 'Jit'、'Kinsec'、'LNJH'\r\n             * @returns {object}\r\n             *\r\n             * @example\r\n             * var instance = CaAuth.getInstance();\r\n             * instance.doSign({\r\n\t\t\t * \tsignText:'xxxx',\r\n\t\t\t * \tprovider:'Jit'\r\n\t\t\t * }).done(function(data){\r\n\t\t\t * \t\t//TODO success\r\n\t\t\t * }).fail(function(){\r\n\t\t\t * \t\t//TODO error\r\n\t\t\t * })\r\n             *\r\n             *\r\n             * //会自动获取后台配置项，前提有配置全局变量     window._caProvider\r\n             * var instance = CaAuth.getInstance();\r\n             * instance.doSign('xxxx').done(function(data){\r\n\t\t\t * \t\t//TODO success\r\n\t\t\t * }).fail(function(){\r\n\t\t\t * \t\t//TODO error\r\n\t\t\t * })\r\n             */\r\n            'doSign',\r\n\r\n            'initParams'\r\n        ],\r\n        doSign:function (data) {\r\n            if($.type(data)=='string'){\r\n                data ={\r\n                    signText:data,\r\n                }\r\n            }\r\n            if($.type(data.provider)!='string'){\r\n                data.provider = $A.getCaProvider();\r\n            }\r\n            if($.type(data.provider)!='string'){\r\n                return $.Deferred().reject('CA验证提供商为空');\r\n            }\r\n            if($.type(data.cryptoType)!='string'){\r\n                data.cryptoType = $A.getCaCryptoType();\r\n            }\r\n            //用户\r\n            return this.operate({\r\n                data:[data],\r\n                func:'doSign'\r\n            })\r\n        },\r\n        validateSN:function (data) {\r\n            var cardInfo = $A.getCaInfo();\r\n            if(!cardInfo||!cardInfo.caNo){\r\n                var msg = \"Ukey信息与当前ca产商不一致，请联系管理员！\";\r\n                return $.Deferred().reject(msg);\r\n            }\r\n            if($.type(data)=='string'){\r\n                data ={\r\n                    signText:data,\r\n                }\r\n            }\r\n\t\t\tdata.certNo = cardInfo.caNo;\r\n            return this.doSign(data)\r\n        },\r\n        Statics:{\r\n            /**\r\n             * @description 获取打印控件实例\r\n             * @static\r\n             * @memberOf bs-ca-auth\r\n             * @function getInstance\r\n             * @param {object} op\r\n             * @param {object} op.config dll配置\r\n             * @param {string} op.config.appId 应用Id(<span style=\"color:red\">必填</span>)\r\n             * @example\r\n             *         var instantce = CaAuth.getInstance({\r\n             *          config:{\r\n             *              appId:'123'\r\n             *          }\r\n             *         });\r\n             */\r\n            getInstance:function(op){\r\n                if (!this.instance){\r\n                    this.instance =new CaAuth(op);\r\n                }\r\n                return this.instance;\r\n            }\r\n        }\r\n    });\r\n    return CaAuth;\r\n});\n",
    "define('bs-http-plugin/bs-doccamera',['bs-http-plugin/base-pluginvoke',\"bs-http-plugin/util/uuid\"], function (BasePluginvoke,uuid) {\r\n\r\n    /**\r\n     * @desc 高拍仪 使用请引入 'bs-http-plugin/bs-doccamera'\r\n     * @class\r\n     * @classdesc\r\n     * @name bs-doccamera\r\n     * @extends base-pluginvoke\r\n     */\r\n    var Doccamera = BasePluginvoke.extend({\r\n        /**\r\n         * @description dll名称\r\n         * @memberOf bs-doccamera\r\n         * @instance\r\n         * @example\r\n         * module:'Doccamera'\r\n         */\r\n        module: 'Doccamera',\r\n        /**\r\n         * @description 自动生成函数列表\r\n         */\r\n        functions: [\r\n            'TakePhotoes',\r\n            'GetImageList',\r\n            'GetImageListWithoutBase64',\r\n            'GetImages',\r\n            'ClearImages'\r\n        ],\r\n        getPicture: function (id,method) {\r\n            var me = this;\r\n            var dfd = $.Deferred();\r\n            var fn = function () {\r\n                me[method]().then(function (data) {\r\n                    if (data[id]) {\r\n                        dfd.resolve(data[id]);\r\n                    }\r\n                    if (data[id] || data['state'] == 0) {\r\n                        return\r\n                    }\r\n                    setTimeout(function () {\r\n                        fn();\r\n                    }, 2500);\r\n                }).fail(function () {\r\n                    dfd.rejectWith(dfd, arguments);\r\n                })\r\n            };\r\n            fn();\r\n            return dfd;\r\n        },\r\n        /**\r\n         * @function takePicture\r\n         * @instance\r\n         * @memberOf bs-doccamera\r\n         * @description 拍照\r\n         * @returns {object}  $.Deferred().done(function(data){});\r\n         * <pre>操作成功后 data数据结构 {\r\n         *      success:true|false,\r\n         *      message:'xxx',\r\n         *      pictures:[\r\n         *          {\r\n         *              filename:'文件名',\r\n         *              picture:'base64',\r\n         *              type:'图片类型后缀'\r\n         *          }\r\n         *      ]\r\n         * }\r\n         * </pre>\r\n         *\r\n         * @example\r\n         * var instance = CaAuth.getInstance();\r\n         * instance.takePicture().done(function(data){\r\n\t\t\t * \t\t//TODO success\r\n\t\t\t * }).fail(function(){\r\n\t\t\t * \t\t//TODO error\r\n\t\t\t * })\r\n         */\r\n        takePicture: function () {\r\n            var me = this;\r\n            var id = uuid.v4().replace(/-/g, '');\r\n            return me.TakePhotoes({id:id}).then(function () {\r\n                return me.getPicture(id,'GetImageList');\r\n            })\r\n        },\r\n\r\n        /**\r\n         * @function bufferTakePicture\r\n         * @instance\r\n         * @memberOf bs-doccamera\r\n         * @description 高拍仪所拍摄拍的照片预存硬盘上，再读取\r\n         * @returns {object}  $.Deferred().done(function(data){});\r\n         * <pre>操作成功后 data数据结构 {\r\n         *      success:true|false,\r\n         *      message:'xxx',\r\n         *      pictures:[\r\n         *          {\r\n         *              filename:'文件名',\r\n         *              picture:'base64',\r\n         *              type:'图片类型后缀'\r\n         *          }\r\n         *      ]\r\n         * }\r\n         * </pre>\r\n         *\r\n         * @example\r\n         * var instance = CaAuth.getInstance();\r\n         * instance.bufferTakePicture().done(function(data){\r\n\t\t\t * \t\t//TODO success\r\n\t\t\t * }).fail(function(){\r\n\t\t\t * \t\t//TODO error\r\n\t\t\t * })\r\n         */\r\n        bufferTakePicture:function(){\r\n            var dfd = $.Deferred();\r\n            var me = this;\r\n            var id = uuid.v4().replace(/-/g, '');\r\n            return me.TakePhotoes({id:id}).then(function () {\r\n                return me.getPicture(id,'GetImageListWithoutBase64');\r\n            }).then(function (data) {\r\n                return me.getImagesAndClean(id,data);\r\n            })\r\n        },\r\n        getImgSize:2,\r\n        getImagesAndClean:function (id,picInfo) {\r\n            var me = this;\r\n            var dfd = $.Deferred();\r\n            var pictures = picInfo['pictures'];\r\n            if(!$.isArray(pictures)){\r\n                dfd.rejectWith(this,['picture is not array!']);\r\n            }\r\n            pictures = $(pictures).map(function (index,item) {\r\n                return item['filename']\r\n            }).toArray();\r\n            var result = {};\r\n            var respics = [];\r\n            var fn = function () {\r\n                if(pictures.length==0){\r\n                    dfd.resolve(result);\r\n                    me.ClearImages();\r\n                    return;\r\n                }\r\n                me.GetImages({pictures:pictures.splice(0,me.getImgSize)}).then(function (data) {\r\n\t\t\t\t\tresult = data[id];\r\n                    respics = respics.concat(result['pictures']);\r\n                    result['pictures'] = respics;\r\n                    fn();\r\n                    if (data[id] || data['state'] == 0) {\r\n                        return\r\n                    }\r\n                }).fail(function () {\r\n                    dfd.rejectWith(dfd, arguments);\r\n                })\r\n            }\r\n            fn();\r\n            return dfd;\r\n        },\r\n        Statics: {\r\n            /**\r\n             * @description 获取打印控件实例\r\n             * @static\r\n             * @memberOf bs-doccamera\r\n             * @function getInstance\r\n             * @param {object} op\r\n             * @param {object} op.config dll配置\r\n             * @param {string} op.config.appId 应用Id(<span style=\"color:red\">必填</span>)\r\n             * @example\r\n             *         var instantce = Doccamera.getInstance({\r\n             *          config:{\r\n             *              appId:'123'\r\n             *          }\r\n             *         });\r\n             */\r\n            getInstance: function (op) {\r\n                if (!this.instance) {\r\n                    this.instance = new Doccamera(op);\r\n                }\r\n                return this.instance;\r\n            }\r\n        }\r\n    });\r\n    return Doccamera;\r\n});\n",
    "\r\ndefine('bs-http-plugin/bs-pd',['bs-http-plugin/base-pluginvoke'], function(BasePluginvoke,Socket) {\r\n\r\n    /**\r\n     * @desc  PD刷卡 使用请引入 'bs-http-plugin/bs-pd'\r\n     * @class\r\n     * @classdesc\r\n     * @name bs-pd\r\n     * @extends base-pluginvoke\r\n     */\r\n    var Pd = BasePluginvoke.extend({\r\n        /**\r\n         * @description dll名称\r\n         * @memberOf bs-pd\r\n         * @instance\r\n         * @example\r\n         * module:'print'\r\n         */\r\n        module:'pd',\r\n        /**\r\n         * @description 自动生成函数列表\r\n         */\r\n        functions:[\r\n            /**\r\n             * @function doPd\r\n             * @instance\r\n             * @memberOf bs-pd\r\n             * @description CA签名验证\r\n             * @param {object} options\r\n             * @returns {string} options.aUrl\r\n             * @returns {string} options.aPdaName\r\n             * @returns {string} options.aOrgCode\r\n             * @returns {string} options.aPdId\r\n             * @returns {string} options.aPdCode\r\n             *\r\n             * @example\r\n             * var instance = Pd.getInstance();\r\n             * instance.expPd({\r\n             * aUrl: '',\r\n             * aPdaName: '',\r\n             * aOrgCode: '',\r\n             * aPdId: '',\r\n             * aPdCode: ''\r\n\t\t\t * }).done(function(data){\r\n\t\t\t * \t\t//TODO success\r\n\t\t\t * }).fail(function(){\r\n\t\t\t * \t\t//TODO error\r\n\t\t\t * })\r\n             */\r\n            'expPd',\r\n\r\n\r\n            /**\r\n             * @function impPd\r\n             * @instance\r\n             * @memberOf bs-pd\r\n             * @description CA签名验证\r\n             * @returns {string} options.aUrl\r\n             * @returns {string} options.aPdaName\r\n             * @returns {string} options.aOrgCode\r\n             * @returns {object}\r\n             *\r\n             * @example\r\n             * var instance = Pd.getInstance();\r\n             * instance.impPd({\r\n             * aUrl: '',\r\n             * aPdaName: '',\r\n             * aOrgCode: '',\r\n\t\t\t * }).done(function(data){\r\n\t\t\t * \t\t//TODO success\r\n\t\t\t * }).fail(function(){\r\n\t\t\t * \t\t//TODO error\r\n\t\t\t * })\r\n             */\r\n            'impPd'\r\n        ],\r\n        Statics:{\r\n            /**\r\n             * @static\r\n             * @memberOf bs-pd\r\n             * @function getInstance\r\n             * @param {object} op\r\n             * @param {object} op.config dll配置\r\n             * @param {string} op.config.appId 应用Id(<span style=\"color:red\">必填</span>)\r\n             * @example\r\n             *         var instantce = Pd.getInstance({\r\n             *          config:{\r\n             *              appId:'123'\r\n             *          }\r\n             *         });\r\n             */\r\n            getInstance:function(op){\r\n                if (!this.instance){\r\n                    this.instance =new Pd(op);\r\n                }\r\n                return this.instance;\r\n            }\r\n        }\r\n    });\r\n    return Pd;\r\n});\n",
    "\r\ndefine('bs-http-plugin/bs-pos',['bs-http-plugin/base-pluginvoke'], function(BasePluginvoke,Socket) {\r\n\r\n    /**\r\n     * @desc  POS刷卡 使用请引入 'bs-http-plugin/bs-pos'\r\n     * @class\r\n     * @classdesc\r\n     * @name bs-pos\r\n     * @extends base-pluginvoke\r\n     */\r\n    var Pos = BasePluginvoke.extend({\r\n        /**\r\n         * @description dll名称\r\n         * @memberOf bs-pos\r\n         * @instance\r\n         * @example\r\n         * module:'print'\r\n         */\r\n        module:'pos',\r\n        /**\r\n         * @description 自动生成函数列表\r\n         */\r\n        functions:[\r\n            /**\r\n             * @function doPos\r\n             * @instance\r\n             * @memberOf bs-pos\r\n             * @description CA签名验证\r\n             * @param {object} options\r\n             * @param {string} options.totalAmt 金额\r\n             * @param {string} options.posNo POS机号\r\n             * @param {string} options.posPNo POS员工号\r\n             * @param {string} options.transDate 交易日期\r\n             * @param {string} options.transNo 交易号\r\n             * @param {string} options.transVoucher 交易凭证\r\n             * @param {string} options.letterNo 缴款码\r\n             * @param {string} options.transType 交易类型\r\n             * @param {string} options.account 账号\r\n             * @returns {object}\r\n             *\r\n             * @example\r\n             * var instance = Pos.getInstance();\r\n             * instance.doPos({\r\n\t\t\t * \ttotalAmt:'xxxx',\r\n\t\t\t * \tposNo:'xxxx',\r\n\t\t\t * \tposPNo:'xxxx',\r\n\t\t\t * \ttransDate:'xxxx',\r\n\t\t\t * \ttransNo:'xxxx',\r\n\t\t\t * \ttransVoucher:'xxxx',\r\n\t\t\t * \tletterNo:'xxxx',\r\n\t\t\t * \ttransType:'xxxx',\r\n\t\t\t * \taccount:'xxxx'\r\n\t\t\t * }).done(function(data){\r\n\t\t\t * \t\t//TODO success\r\n\t\t\t * }).fail(function(){\r\n\t\t\t * \t\t//TODO error\r\n\t\t\t * })\r\n             */\r\n            'doPos',\r\n\r\n            'initParams'\r\n        ],\r\n        Statics:{\r\n            /**\r\n             * @description 获取打印控件实例\r\n             * @static\r\n             * @memberOf bs-pos\r\n             * @function getInstance\r\n             * @param {object} op\r\n             * @param {object} op.config dll配置\r\n             * @param {string} op.config.appId 应用Id(<span style=\"color:red\">必填</span>)\r\n             * @example\r\n             *         var instantce = Pos.getInstance({\r\n             *          config:{\r\n             *              appId:'123'\r\n             *          }\r\n             *         });\r\n             */\r\n            getInstance:function(op){\r\n                if (!this.instance){\r\n                    this.instance =new Pos(op);\r\n                }\r\n                return this.instance;\r\n            }\r\n        }\r\n    });\r\n    return Pos;\r\n});\n",
    "\r\ndefine('bs-http-plugin/bs-upload',['bs-http-plugin/base-pluginvoke',\r\n    'app/widgets/grid/app-grid'], function(BasePluginvoke) {\r\n\r\n    /**\r\n     * @desc 文件上传控件 使用请引入 'bs-http-plugin/bs-upload'\r\n     * @class\r\n     * @classdesc\r\n     * @name bs-upload\r\n     * @extends base-pluginvoke\r\n     */\r\n    var Upload = BasePluginvoke.extend({\r\n        /**\r\n         * @description dll名称\r\n         * @memberOf bs-upload\r\n         * @instance\r\n         * @example\r\n         * module:'upload'\r\n         */\r\n        module:'upload',\r\n        /**\r\n         * @description 自动生成函数列表\r\n         */\r\n        functions:[\r\n            /**\r\n             * @function uploadFile\r\n             * @instance\r\n             * @memberOf bs-upload\r\n             * @description 上传文件\r\n             * @param {object} options\r\n             * @param {string} options.file 文件上传名称\r\n             * @param {string} options.url 保存url\r\n             * @returns {object}\r\n             *\r\n             * @example\r\n             * var instance = Upload.getInstance();\r\n             * instance.uploadFile({\r\n\t\t\t * \tfile:'xxxx',\r\n\t\t\t * \turl:'xxxx'\r\n\t\t\t * }).done(function(data){\r\n\t\t\t * \t\t//TODO success\r\n\t\t\t * }).fail(function(){\r\n\t\t\t * \t\t//TODO error\r\n\t\t\t * })\r\n             */\r\n            'uploadFile',\r\n\r\n            'uploadIsComplete',\r\n\r\n            'getCurrentProgress',\r\n\r\n            'getFileList',\r\n\r\n            'removeFile',\r\n\r\n            'resumeUpload',\r\n\r\n            'executeFile'\r\n        ],\r\n        init: function () {\r\n            var dfd = $.Deferred();\r\n            var my = this;\r\n            my.render();\r\n            my.bindEvents();\r\n            dfd.resolve();\r\n            return dfd;\r\n        },\r\n        render:function () {\r\n            var my = this;\r\n            //ui-draggable ui-draggable-handle\r\n            //<input type=\"text\" name=\"files[]\" multiple=\"\">\r\n            this.$container =$('<div class=\"upload-box \">\\\r\n                <div class=\"upload-box-header \">\\\r\n                    <span class=\"upload-box-title\">文件上传进度</span>\\\r\n                    <span id=\"closeBtn\" class=\"title-btn\" title=\"关闭\">×</span>\\\r\n                    <span id=\"zoomBtn\" max=true class=\"title-btn\" title=\"最小化\">-</span>\\\r\n                </div>\\\r\n                <div class=\"upload-box-body\">\\\r\n                    <table style=\"display: none;\"/>\\\r\n                </div>\\\r\n                </div>');\r\n            this.$zoomBtn = this.$container.find('#zoomBtn');\r\n            this.$closeBtn = this.$container.find('#closeBtn');\r\n            this.$body = this.$container.find('.upload-box-body');\r\n            this.$table = this.$container.find('table');\r\n            this.$file = this.$container.find('.upload-add-btn');\r\n            this.$table.grid({\r\n                url: '',\r\n                rownumbers: 'normal',\r\n                height: 165,\r\n                pager: 'none',\r\n                columns: [[\r\n                    {\r\n                        title: '文件名称', field: 'path', width: 121, align: 'left',showTitle:true\r\n                    },\r\n                    {\r\n                        title: '进度', field: 'percent',width:150, align: 'left',\r\n                        formatter:function (val) {\r\n                            var data = {\r\n                                width:val,\r\n                                radius:(val>96)?'10px':'10px 0px 0px 10px'\r\n                            }\r\n                            return dotpl.applyTpl('<div class=\"upload-progress-bar\">' +\r\n                                '<div class=\"progress-percent\" style=\"width:${width}%;border-radius: ${radius};\"></div>' +\r\n                                '<span class=\"progress-text\">${width}%</span>' +\r\n                                '</div>',data);\r\n                        }\r\n                    },\r\n                    {\r\n                        title: '操作', field: 'state', width: 80, align: 'center',\r\n                        formatter: function(val,data){\r\n                            //0 暂停，1 上传， 2 完成, 3 错误\r\n                            var btns = '\\\r\n                                    <div><i class=\"upload-btn bs-font bs-ui-start\" title=\"开始\"></i>\\\r\n                                    <i class=\"upload-btn bs-font bs-ui-pause\" title=\"暂停\"></i>\\\r\n                                    <i class=\"upload-btn bs-font bs-ui-delete\" title=\"删除\"></i></div>\\\r\n                            ';\r\n                            var $btns = $(btns);\r\n                            $btns.css('padding-top','3px');\r\n                            $btns.find('.bs-font').hide();\r\n                            $btns.find('i').attr('data-item',encodeURIComponent(JSON.stringify(data)));\r\n                            $btns.find('i').attr('data-file',data.path);\r\n                            switch (val){\r\n                                case 0://0 暂停\r\n                                    $btns.find('.bs-ui-start').show();\r\n                                    $btns.find('.bs-ui-delete').show();\r\n                                    break;\r\n                                case 1://1 上传\r\n                                    $btns.find('.bs-ui-delete').show();\r\n                                    break;\r\n                                case 2://2 完成\r\n\r\n                                    break;\r\n                                case 3://3 错误\r\n                                    $btns.find('.bs-ui-delete').show();\r\n                                    break;\r\n                            }\r\n                            return $btns.html();\r\n                        }\r\n                    }\r\n                ]]\r\n            });\r\n            my.setAutoRefresh(true);\r\n            my.$container.hide().prependTo('body');\r\n        },\r\n        bindEvents:function(){\r\n            var my = this;\r\n            // this.$container.resizable({\r\n            //     maxHeight: 350,\r\n            //     maxWidth: 400,\r\n            // });\r\n            my.$container.find('.upload-box-body').on('click',function (e) {\r\n                if($(e.target).is('.bs-ui-start')){\r\n                    my.resumeUpload({file:$(e.target).data('file')}).done(function () {\r\n                        my.setAutoRefresh(true);\r\n                    }).fail(function () {\r\n                        my.setAutoRefresh(false);\r\n                    });\r\n                }\r\n                if($(e.target).is('.bs-ui-pause')){\r\n                    my.pauseUpload({file:$(e.target).data('file')}).done(function () {\r\n                        my.setAutoRefresh(true);\r\n                    }).fail(function () {\r\n                        my.setAutoRefresh(false);\r\n                    });\r\n                }\r\n                if($(e.target).is('.bs-ui-delete')){\r\n                    var $bn =$(e.target);\r\n                    var data = JSON.parse(decodeURIComponent($bn.data('item')));\r\n                    my.removeFile({file:$bn.data('file'),DelSrvFile:1}).done(function () {\r\n                        my.emitDelSuccess(arguments,data);\r\n                        my.setAutoRefresh(true);\r\n                    }).fail(function () {\r\n                        my.emitDelError(arguments,data);\r\n                        my.setAutoRefresh(false);\r\n                    });\r\n                }\r\n            })\r\n            this.$container.draggable({\r\n                handle: '.upload-box-header',\r\n                distance: 20,\r\n                scroll:true,\r\n                containment: 'body',\r\n                stop: function(event){\r\n                    my.containerTop = my.$container.css('top');\r\n                    my.containerLeft = my.$container.css('left');\r\n                }\r\n            });\r\n            this.$closeBtn.on('click',function(){\r\n                my.setAutoRefresh(false);\r\n                my.close()\r\n            });\r\n            this.$zoomBtn.on('click',function(){\r\n                if(my.$zoomBtn.attr('max')==='true'){\r\n                    my.minimize();\r\n                }else{\r\n                    my.setAutoRefresh(true);\r\n                    my.maximize();\r\n                }\r\n            });\r\n            this.$file.on('click',function(){\r\n                my.addFile()\r\n            });\r\n        },\r\n        setAutoRefresh:function(flg){\r\n            this.auto = flg;\r\n            if(flg){\r\n                !this.timeout&&this.refresh();\r\n            }else {\r\n                clearTimeout(this.timeout);\r\n                this.timeout = undefined;\r\n            }\r\n        },\r\n        emitDelSuccess:function (args,extParam) {\r\n            var _args =  ['deleteSuccess',extParam].concat([].slice.call(args,0))\r\n            this.emit.apply(this,_args);\r\n        },\r\n        emitDelError:function (args,extParam) {\r\n            var _args =  ['deleteError',extParam].concat([].slice.call(args,0))\r\n            this.emit.apply(this,_args);\r\n        },\r\n        frequency:2000,\r\n        setUpSucTip:function (flg) {\r\n          this.successTip =  flg;\r\n        },\r\n        refresh:function () {\r\n            var my = this;\r\n            if(!this.auto){\r\n                return;\r\n            }\r\n            my.timeout = setTimeout(function () {\r\n                my.getFileList().done(function (data) {\r\n                    my.$table.grid('loadData',data);\r\n                    my.emit('refresh',data);\r\n                    var completeFiles = [];\r\n                    var errorFiles = [];\r\n                    var hasUploding = false;\r\n                    $(data).each(function (index,item) {\r\n                        if(item.percent == 100 && item.state == 2){\r\n                            completeFiles.push(item);\r\n                            my.removeFile({file:item.path,DelSrvFile:0});\r\n                        }\r\n                        if(item.state == 3){\r\n                            errorFiles.push(item);\r\n                        }\r\n                        if(item.state == 1){\r\n                            hasUploding = true;\r\n                        }\r\n                    })\r\n                    if(completeFiles.length){\r\n                        my.successTip&&$A.messager.correct(completeFiles.join(\"、\") +\" 上传成功！\");\r\n                        my.emit(\"uploadSuccess\",completeFiles);\r\n                    }\r\n                    if(errorFiles.length){\r\n                        my.emit(\"uploadError\",errorFiles);\r\n                    }\r\n                    if(hasUploding&&data.length){\r\n                        my.refresh();\r\n                    }else{\r\n                        my.setAutoRefresh(false);\r\n                    }\r\n                }).fail(function () {\r\n                    my.setAutoRefresh(false);\r\n                });\r\n            },my.frequency);\r\n        },\r\n        addFile:function (op) {\r\n            var my = this;\r\n            var params = this.params;\r\n            if($.type(params)!=='object'){\r\n                params = {};\r\n            }\r\n            if(my.$container.css(\"display\")==='none'){\r\n                my.show();\r\n            }\r\n            my.setAutoRefresh(true);\r\n            return this.uploadFile(op).done(function () {\r\n            }).fail(function () {\r\n\r\n            });\r\n        },\r\n        /**\r\n         * 最大化\r\n         */\r\n        maximize: function(){\r\n            var my = this;\r\n            my.$container.animate({\r\n                top: document.body.clientHeight - 200,\r\n                left: document.body.clientWidth - 420,\r\n                width: 400,\r\n                height: 200\r\n            }, 'normal', 'swing', function(){\r\n                // my.openAutoReload(timeRoll);\r\n                my.$container.find('.upload-box-body').slideDown();\r\n                my.$zoomBtn.attr({'max': true, 'title': '最大化'}).text('-');\r\n            });\r\n        },\r\n        /**\r\n         * 最小化\r\n         * @param callback 缩小后执行的函数\r\n         */\r\n        minimize: function(){\r\n            var my = this;\r\n            my.$container.animate({\r\n                left: document.body.clientWidth - 200,\r\n                top: document.body.clientHeight - 30,\r\n                width: 180,\r\n                height: 30\r\n            }, 'normal', 'swing', function(){\r\n                // my.closeAutoReload();\r\n                my.$container.find('.upload-box-body').slideUp();\r\n                my.$zoomBtn.attr({'max': false, 'title': '最小化'}).text('□');\r\n            });\r\n        },\r\n        show:function () {\r\n            var my = this;\r\n            my.$container.css({\r\n                display:'block',\r\n                left: document.body.clientWidth - 180,\r\n                top: document.body.clientHeight - 30\r\n            });\r\n            my.maximize();\r\n            my.setAutoRefresh(true);\r\n        },\r\n        close:function () {\r\n            this.$container.hide();\r\n        },\r\n        Statics:{\r\n            /**\r\n             * @description 获取打印控件实例\r\n             * @static\r\n             * @memberOf bs-upload\r\n             * @function getInstance\r\n             * @param {object} op\r\n             * @param {object} op.config dll配置\r\n             * @param {string} op.config.appId 应用Id(<span style=\"color:red\">必填</span>)\r\n             * @example\r\n             *         var instantce = Upload.getInstance({\r\n             *          config:{\r\n             *              appId:'123'\r\n             *          }\r\n             *         });\r\n             */\r\n            getInstance:function(op){\r\n                if (!this.instance){\r\n                    this.instance =new Upload(op);\r\n                }\r\n                return this.instance;\r\n            }\r\n        }\r\n    });\r\n    return Upload;\r\n});\n",
    "(function (scope) {\r\n    var casUrl = 'http://127.0.0.1:13526/ca';\r\n    var heartUrl = 'http://127.0.0.1:13526/heart';\r\n    var Message = function () {\r\n        var _self = this;\r\n        _self.msgStack = {};\r\n        window.onmessage = function (event) {\r\n            var data = event.data;\r\n            data = $.parseJSON(data);\r\n            var callback = _self.get(data.id);\r\n            if (!!callback) {\r\n                callback.call({}, data);\r\n            }\r\n        };\r\n    };\r\n    Message.prototype = {\r\n        constructor:Message,\r\n        set: function (id, callback) {\r\n            this.msgStack[id] = callback;\r\n        },\r\n        get: function (id) {\r\n            var callback = this.msgStack[id];\r\n            if (!!callback) {\r\n                delete this.msgStack[id];\r\n            }\r\n            return callback;\r\n        }\r\n    };\r\n    var message = new Message();\r\n\r\n\r\n    var getRs = function () {\r\n        return this.ret.ret_msg;\r\n    };\r\n    var Socket = function () {\r\n    };\r\n    Socket.prototype = {\r\n        constructor:Socket,\r\n        send:function (op) {\r\n            var _self = this;\r\n            var data = op.data;\r\n            op.id = op.data.id = new Date().getTime();\r\n            if(typeof data.payload === 'undefined'){\r\n                throw new Error('data.payload not found!');\r\n            }\r\n            //payload 初始化\r\n            var payload = data.payload;\r\n            payload = JSON.stringify(payload);\r\n            payload = _self.base64Encode(payload);\r\n            op.data.payload = payload;\r\n            var $iframe = _self.createIframe(op);\r\n            var $form = _self.createForm(op);\r\n            //  \" 会截断数据\r\n            $form.find('[name=\"payload\"]').val(payload);\r\n            var callback = function (data) {\r\n                if(data==='undefined'){\r\n                    data = {};\r\n                }\r\n                data['getResult'] = getRs;\r\n                var args = [data.getResult()];\r\n                try {\r\n                    args = args.concat([].slice.call(arguments,0));\r\n                    args.push(op);\r\n                    if(data.ret['ret_code']==='0'){\r\n                        op.success.apply(op,args);\r\n                    }else{\r\n                        op.error.apply(op,args);\r\n                    }\r\n                    $form.remove();\r\n                    $iframe.remove();\r\n                }catch (e){\r\n                    $form.remove();\r\n                    $iframe.remove();\r\n                    throw e;\r\n                }\r\n            }\r\n            message.set(op.id,callback);\r\n            $form.submit();\r\n            $.ajax({\r\n                url:heartUrl,\r\n                timeout:op.timeout?op.timeout:3000,\r\n                contentType:\"application/x-www-form-urlencoded; charset=utf-8\",\r\n                dataType: 'jsonp',\r\n                jsonp: 'jsonp',\r\n                type:'GET',\r\n                error:function () {\r\n                    $form.remove();\r\n                    $iframe.remove();\r\n                    op.clientError.apply(op,arguments)\r\n                }\r\n            })\r\n        },\r\n        createIframe:function (op) {\r\n            var template= '<iframe \\\r\n                                id=\"socketIframe$id\" \\\r\n                                name=\"socketIframe$id\" \\\r\n                                style=\"position:absolute; top:-9999px; left:-9999px\">\\\r\n                            </iframe>';\r\n            var $iframe = $(template.replace(/\\$id/g,op.id));\r\n            $iframe.appendTo('body');\r\n            return $iframe;\r\n        },\r\n        createForm:function (op) {\r\n            if(!!op.func){\r\n                op.invokeType = 'func';\r\n                op.invokeValue = op.func;\r\n            }else{\r\n                op.invokeType = 'proc';\r\n                op.invokeValue = op.proc;\r\n            }\r\n            var template= '<form id=\"socketForm$id\" name=\"socketForm$id\" \\\r\n                target=\"socketIframe$id\" \\\r\n                action=\"$url\" \\\r\n                method=\"post\" \\\r\n                accept-charset=\"UTF-8\" \\\r\n                > \\\r\n                <input type=\"hidden\" name=\"$invokeType\" value=\"$invokeValue\" /> \\\r\n                <input type=\"hidden\" name=\"id\" value=\"$id\" /> \\\r\n                <input type=\"hidden\" name=\"payload\" /> \\\r\n                </form>';\r\n            var $form = $(\r\n                template.replace(/\\$id/g,op.id)\r\n                    .replace(/\\$url/,op.url)\r\n                    .replace(/\\$invokeType/,op.invokeType)\r\n                    .replace(/\\$invokeValue/,op.invokeValue)\r\n            );\r\n            $form.appendTo('body');\r\n            return $form;\r\n        },\r\n        base64Encode:function (data) {\r\n            return Base64.encode(data);\r\n        }\r\n    };\r\n\r\n    var socket = new Socket();\r\n\r\n    var CASLogin = function () {\r\n    };\r\n\r\n    CASLogin.prototype = {\r\n        constructor:CASLogin,\r\n        doSign:function (op) {\r\n            var success = $.isFunction(op.success)?op.success:$.noop;\r\n            var error = $.isFunction(op.success)?op.success:$.noop;\r\n            var clientError = $.isFunction(op.clientError)?op.clientError:$.noop;\r\n            delete op.success;\r\n            delete op.error;\r\n            delete op.clientError;\r\n            var options = {\r\n                url:casUrl,\r\n                func:'doSign',\r\n                success:success,\r\n                error:error,\r\n                clientError:clientError,\r\n                data:{\r\n                    payload:{\r\n                        config:{\r\n                        \tappId:'cas-server'\r\n                        },\r\n                        data:[\r\n                            op\r\n                        ]\r\n                    }\r\n                }\r\n            };\r\n\r\n           socket.send(options);\r\n        }\r\n    };\r\n\r\n    scope.casLogin = new CASLogin();\r\n}(window));\r\n\r\n\ndefine(\"bs-http-plugin/cas-login\", function(){});\n\n",
    "define('require-plugin/css.min',[],function(){if(\"undefined\"==typeof window)return{load:function(a,b,c){c()}};var a=document.getElementsByTagName(\"head\")[0],b=window.navigator.userAgent.match(/Trident\\/([^ ;]*)|AppleWebKit\\/([^ ;]*)|Opera\\/([^ ;]*)|rv\\:([^ ;]*)(.*?)Gecko\\/([^ ;]*)|MSIE\\s([^ ;]*)|AndroidWebKit\\/([^ ;]*)/)||0,c=!1,d=!0;b[1]||b[7]?c=parseInt(b[1])<6||parseInt(b[7])<=9:b[2]||b[8]?d=!1:b[4]&&(c=parseInt(b[4])<18);var e={};e.pluginBuilder=\"./css-builder\";var f,g,h,i=function(){f=document.createElement(\"style\"),a.appendChild(f),g=f.styleSheet||f.sheet},j=0,k=[],l=function(a){g.addImport(a),f.onload=function(){m()},j++,31==j&&(i(),j=0)},m=function(){h();var a=k.shift();return a?(h=a[1],void l(a[0])):void(h=null)},n=function(a,b){if(g&&g.addImport||i(),g&&g.addImport)h?k.push([a,b]):(l(a),h=b);else{f.textContent='@import \"'+a+'\";';var c=setInterval(function(){try{f.sheet.cssRules,clearInterval(c),b()}catch(a){}},10)}},o=function(b,c){var e=document.createElement(\"link\");if(e.type=\"text/css\",e.rel=\"stylesheet\",d)e.onload=function(){e.onload=function(){},setTimeout(c,7)};else var f=setInterval(function(){for(var a=0;a<document.styleSheets.length;a++){var b=document.styleSheets[a];if(b.href==e.href)return clearInterval(f),c()}},10);e.href=b,a.appendChild(e)};return e.normalize=function(a,b){return\".css\"==a.substr(a.length-4,4)&&(a=a.substr(0,a.length-4)),b(a)},e.load=function(a,b,d,e){(c?n:o)(b.toUrl(a+\".css\"),d)},e});\n",
    "define('app',[\"app/app-funcbase\",\n\r\"app/app-pagebase\",\n\r\"app/core/app-attribute\",\n\r\"app/core/app-base\",\n\r\"app/core/app-class\",\n\r\"app/core/app-core\",\n\r\"app/core/app-events\",\n\r\"app/core/app-jquery\",\n\r\"app/core/app-main\",\n\r\"app/core/app-options-helper\",\n\r\"app/core/app-options\",\n\r\"app/core/app-register\",\n\r\"app/data/app-ajax\",\n\r\"app/data/app-json-result\",\n\r\"app/data/app-result\",\n\r\"app/util/app-localstorage\",\n\r\"app/util/app-number-format\",\n\r\"app/util/app-utils\",\n\r\"app/util/app-xss-utils\",\n\r\"app/widgets/app-download\",\n\r\"app/widgets/app-frags\",\n\r\"app/widgets/app-jqgrid\",\n\r\"app/widgets/app-lang_zh_CN\",\n\r\"app/widgets/app-progressbar\",\n\r\"app/widgets/app-resizable\",\n\r\"app/widgets/app-scroll\",\n\r\"app/widgets/app-scrolltable\",\n\r\"app/widgets/app-widget\",\n\r\"app/widgets/app-workspace\",\n\r\"app/widgets/button/app-button\",\n\r\"app/widgets/button/app-menubutton\",\n\r\"app/widgets/drag/app-dialogdrag\",\n\r\"app/widgets/drag/app-drag\",\n\r\"app/widgets/drag/app-droppanel\",\n\r\"app/widgets/form/app-checkbox\",\n\r\"app/widgets/form/app-combo\",\n\r\"app/widgets/form/app-combobox\",\n\r\"app/widgets/form/app-combogrid\",\n\r\"app/widgets/form/app-comboztree\",\n\r\"app/widgets/form/app-comp\",\n\r\"app/widgets/form/app-datetime\",\n\r\"app/widgets/form/app-form\",\n\r\"app/widgets/form/app-formgroup\",\n\r\"app/widgets/form/app-money\",\n\r\"app/widgets/form/app-number\",\n\r\"app/widgets/form/app-reference\",\n\r\"app/widgets/form/app-rule\",\n\r\"app/widgets/form/app-suggest\",\n\r\"app/widgets/form/app-textbox\",\n\r\"app/widgets/form/app-typeahead\",\n\r\"app/widgets/form/app-upload\",\n\r\"app/widgets/form/app-validate\",\n\r\"app/widgets/form/app-xquery\",\n\r\"app/widgets/form/app-xquerybox\",\n\r\"app/widgets/grid/app-grid-editor\",\n\r\"app/widgets/grid/app-grid-ext\",\n\r\"app/widgets/grid/app-grid-formatter\",\n\r\"app/widgets/grid/app-grid-headerContextMenu\",\n\r\"app/widgets/grid/app-grid-merger\",\n\r\"app/widgets/grid/app-grid-pager\",\n\r\"app/widgets/grid/app-grid-print\",\n\r\"app/widgets/grid/app-grid-sort\",\n\r\"app/widgets/grid/app-grid-summary\",\n\r\"app/widgets/grid/app-grid-toolbar\",\n\r\"app/widgets/grid/app-grid\",\n\r\"app/widgets/layout/app-boxlayout\",\n\r\"app/widgets/layout/app-containerLayout\",\n\r\"app/widgets/layout/app-layout\",\n\r\"app/widgets/layout/app-layout2\",\n\r\"app/widgets/menu/app-contextmenu\",\n\r\"app/widgets/menu/app-menu\",\n\r\"app/widgets/panel/app-panel\",\n\r\"app/widgets/portlet/app-portal\",\n\r\"app/widgets/tabs/app-tab\",\n\r\"app/widgets/tabs/app-tabs\",\n\r\"app/widgets/tree/app-ztree\",\n\r\"app/widgets/treegrid/app-datagrid\",\n\r\"app/widgets/treegrid/app-pagination\",\n\r\"app/widgets/treegrid/app-treegrid\",\n\r\"app/widgets/window/app-dialog\",\n\r\"app/widgets/window/app-messager\",\n\r\"base/base64\",\n\r\"base/dotpl-js\",\n\r\"base/html5\",\n\r\"base/json2\",\n\r\"base/pinyin\",\n\r\"base/template\",\n\r\"bs-http-plugin/base-pluginvoke\",\n\r\"bs-http-plugin/bs-ca-auth\",\n\r\"bs-http-plugin/bs-doccamera\",\n\r\"bs-http-plugin/bs-pd\",\n\r\"bs-http-plugin/bs-pos\",\n\r\"bs-http-plugin/bs-print\",\n\r\"bs-http-plugin/bs-upload\",\n\r\"bs-http-plugin/cas-login\",\n\r\"bs-http-plugin/config-ext\",\n\r\"bs-http-plugin/config\",\n\r\"bs-http-plugin/data-transmit/message\",\n\r\"bs-http-plugin/data-transmit/socket\",\n\r\"bs-http-plugin/util/img-lazyload\",\n\r\"bs-http-plugin/util/uuid\",\n\r\"require-plugin/css.min\"],function(){});\n"
  ]
}